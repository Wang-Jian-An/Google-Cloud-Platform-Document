{"title": "Documentation - Back up VMs", "url": "https://cloud.google.com/distributed-cloud/hosted/docs/latest/gdch/overview", "abstract": "# Documentation - Back up VMs\nThis page describes how to back up virtual machines (VMs) while adhering to GDCH backup and restore principles. It also contains instructions on how to view a list of VM backups, and delete existing VM backups.\n", "content": "## Before you begin\nBefore backing up VMs, you must already have a [backup repository and backup plan](/distributed-cloud/hosted/docs/latest/gdch/platform/pa-user/backup-plan-vm) .\n## Manually back up VMs\nA manual backup must reference an existing backup plan for the backup configuration.\nTo get the permissions you need to create a manual backup, ask your Project IAM Admin to grant you the following roles:\n- Project VM Admin:`project-vm-admin`.\n- Backup Creator:`backup-creator`.\n- Project Viewer:`project-viewer`.\nBack up VMs using either the GDCH console or the API.\n- Sign into the GDCH console.\n- In the navigation menu, click **Backup for Virtual Machines** .\n- Select a project.\n- Click the **Backups** tab.\n- Click **Create a backup** .\n- In the **Source VM** instance field, select the VM that you want to back up.\n- Enter a **Name** for the backup.\n- In the **Backup plan** field, select the backup plan for which you want to to create a backup.\n- Click **Create** .\nIssue a virtual machine backup request to initiate a backup:\n```\napiVersion: virtualmachine.gdc.goog/v1kind: VirtualMachineBackupRequestmetadata:\u00a0 name: BACKUP_REQUEST_NAMEspec:\u00a0 virtualMachineBackupPlanTemplate: VM_BACKUP_PLAN\u00a0 virtualMachine: VM_NAME\u00a0 virtualMachineBackupName: VM_BACKUP_NAME\n```\nReplace the following:- ``: name to give the backup request that is being initiated.\n- ``: the name of the`VirtualMachineBackupPlanTemplate`resource to use for configuration of the backup.\n- ``: the name of the VM to back up.\n- ``: the name of the backup to create.## View VM backups\nView a list of VM backups using the GDCH console or `kubectl` .\n- Sign into the GDCH console.\n- In the navigation menu, click **Backup for Virtual Machines** .\n- Select a project.\n- Click the **Backups** tab.\n- Click a backup in the list to view its details.\nView a VM backup by listing the backups and viewing their details.- List the existing backups:```\nkubectl get virtualmachinebackups.virtualmachine.gdc.goog -n PROJECT_NAME\n```Replace `` with the name of the project.\n- In the list, find the backup that you want to view.\n- View the backup details:```\nkubectl describe virtualmachinebackup.virtualmachine.gdc.goog VM_BACKUP_NAME -n PROJECT_NAME\n```Replace the following:- ``: the name of the backup.\n- ``: the name of the project.\n## Delete a VM backup\nDelete VM backups by using the GDCH console or `kubectl` .\n- Sign in to the GDCH console.\n- In the navigation menu, click **Backup for Virtual Machines** .\n- Select a project.\n- Click the **Backups** tab.\n- In the list of backups, find the backup to delete and click **Delete Backup** .\n- In the **Backup name** field, enter the name of the backup to delete.\n- Click **Delete Backup** .\nDelete a VM backup using `kubectl` .- List the existing VM backups:```\nkubectl get virtualmachinebackups.virtualmachine.gdc.goog -n PROJECT_NAME\n```Replace `` with the name of the project.\n- In the list, find the backup that you want to delete.\n- Issue a `VirtualMachineDeleteBackupRequest` to delete the backup:```\napiVersion: virtualmachine.gdc.goog/v1kind: VirtualMachineDeleteBackupRequestmetadata:\u00a0 name: DELETE_BACKUP_REQUEST_NAME\u00a0 namespace: PROJECT_NAMEspec:\u00a0 virtualMachineBackupRef:\u00a0 \u00a0 name: VM_BACKUP_NAME\n```Replace the following:- ``: the name to give the`VirtualMachineDeleteBackupRequest`that is being initiated.\n- ``: the name of the backup to delete.\n- ``: the name of the project.", "guide": "Documentation"}