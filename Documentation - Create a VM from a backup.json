{"title": "Documentation - Create a VM from a backup", "url": "https://cloud.google.com/distributed-cloud/hosted/docs/latest/gdch/overview", "abstract": "# Documentation - Create a VM from a backup\nAfter a backup is created, you can create a restore for that backup, which initiates the restoration of the entire virtual machine (VM). The restored VM and its associated disks have different names based on what you specify as the **New VM instance name** in the GDCH console, or the `restoredResourceName` in the application programming interface (API).\nWhen a backup is restored, the entire VM is restored. After the resources are created, actual restoration of application functionality is subject to the VM operating system or image.\nTo get the permissions that you need to backup and restore your data, ask your Project IAM Admin to grant you the following roles:\n- Project VM Admin:`project-vm-admin`.\n- Backup Creator:`backup-creator`.\n- Project Viewer:`project-viewer`.", "content": "## Create a restore for VMs\nRestore a VM backup using the GDCH console or the API.\n- Sign in to the GDCH console.\n- In the navigation menu, click **Backup for Virtual Machines** .\n- Select a project.\n- Click the **Backups** tab.\n- In the list of backups, find the backup that you want to restore and click **Restore** .\n- In the **New VM instance name** field, enter a name for the new target virtual instance to restore the backup in.\n- Optional: In the **New VM instance** description field, enter a description.\n- Enter a **Name** for the restore.\n- Click **Restore** .\nDefine a `VirtualMachineRestoreRequest` custom resource to initiate the restore process. The referenced backup in the `virtualMachineBackup` field refers to a `VirtualMachineBackup` custom resource generated by a `VirtualMachineBackupRequest` . Here's an example of a `VirtualMachineRestoreRequest` :\nDefine a `VirtualMachineRestoreRequest` custom resource to initiate the restore process:\n```\napiVersion: virtualmachine.gdc.goog/v1kind: VirtualMachineRestoreRequestmetadata:\u00a0 name: RESTORE_REQUEST_NAME\u00a0 namespace: PROJECT_NAMEspec:\u00a0 virtualMachineBackup: VM_BACKUP_NAME\u00a0 restoreName: RESTORE_NAME\u00a0 restoredResourceName: RESTORED_RESOURCE_NAME\u00a0 restoredResourceDescription: RESTORED_RESOURCE_DESCRIPTION\n```\nReplace the following:- ``: the name of the`VirtualMachineBackup`to restore from.\n- ``: the name of the GDCH project.\n- ``: the name to give the restore request that is being initiated.\n- ``: name to give the restore that is being initiated.\n- ``: the name to give the restored VM.\n- ``: notes for why the restore is being performed.\nThe result of the restore creates a new VM with the same configuration and disk state as the backup.\n**Note:** Some VMs are provisioned with an IP address in the `spec` . When a VM is restored, its `spec` is also restored, which includes the original IP address assigned to the original VM. If the original VM is still running, this new VM fails to start due to an IP address conflict issue. This forces the VM into a `ConfigurationError` state. If this happens, edit the `spec` of the `VirtualMachine` using the command line and remove the IP addresses section from the network interfaces section of the `spec` . Upon removal, the restored VM is assigned a new IP address and starts running.\n### View a restore for VMs\nView a list of restores using the GDCH console:\n- Sign in to the GDCH console.\n- In the navigation menu, click **Backup for Virtual Machines** .\n- Select a project.\n- Click the **Restores** tab.\n- Click a restore in the list to view its details.## Delete a restore\nDelete a restore by using the GDCH console or `kubectl` .\n- Sign in to the GDCH console.\n- In the navigation menu, click **Backup for Virtual Machines** .\n- Select a project.\n- Click the **Restores** tab.\n- In the list of restores, find the restore to delete and click **Delete Restore** .\n- In the **Restore name** field, enter the name of the restore to delete.\n- Click **Delete Restore** .\n- List the existing restores:```\nkubectl get virtualmachinerestores.virtualmachine.gdc.goog -n PROJECT_NAME\n```Replace `` with the name of the project.\n- In the list, find the restore that you want to delete.\n- Delete the restore:```\nkubectl delete virtualmachinerestores.virtualmachine.gdc.goog RESTORE_NAME -n PROJECT_NAME\n```Replace the following:- ``: the name of the restore.\n- ``: the name of the project.", "guide": "Documentation"}