{"title": "Documentation - Encrypt and decrypt data", "url": "https://cloud.google.com/distributed-cloud/hosted/docs/latest/gdch/overview", "abstract": "# Documentation - Encrypt and decrypt data\nThe AO performs encrypt and decrypt operations through Distributed Cloud Hosted gdcloud CLI to the KMS through a gRPC client.\n", "content": "## Before you begin\nBefore performing crypto operations, download, install, and configure the gdcloud CLI to access the org admin cluster. To do this, follow the [gdcloud CLI overview](/distributed-cloud/hosted/docs/latest/gdch/resources/gdcloud-overview) .\nTo get the permissions you need to perform cryptographic operations, ask your Organization IAM Admin to grant you the KMS Developer ( `kms-developer` ) role.\n## Encrypt data\nTo encrypt data, use the `gdcloud kms keys encrypt` command. This command encrypts a given plaintext file using the `AEAD` key, and writes it to a named ciphertext file.\n- To encrypt data, pass in the key name and the following:```\ngdcloud kms keys encrypt namespaces/NAMESPACE/aeadKeys/KEY_NAME \\\u00a0 --plaintext-file=PLAINTEXT_PATH \\\u00a0 --additional-authenticated-data-file=ADDITIONAL_AUTHENTICATED_DATA_FILE \\\u00a0 --ciphertext-file=CIPHERTEXT_PATH\n```Replace the following variables:- : the project namespace\u2014for example:`kms-test1`.\n- : the name of the key used to encrypt the plaintext\u2014for example:`key-1`.\n- : the path to the file that contains the plaintext to encrypt.\n- : an optional file that contains additional authenticated data (AAD). AAD is used for integrity checks and protects your data from a confused deputy attack. AAD and the plaintext each have a size limit of 64KB.\n- : the path to the file that contains the encrypted plaintext.\nAfter running the command, you see a file you specified in the `--ciphertext-file` flag that contains the encrypted contents of the plaintext file.## Decrypt data\nTo decrypt data, use the `gdcloud kms keys decrypt` command. This command decrypts a given ciphertext file using the `AEAD` key, and writes it to a named plaintext file.\n- To decrypt ciphertext, pass in the key name and the following:```\ngdcloud kms keys decrypt namespaces/NAMESPACE/aeadKeys/KEY_NAME \\\u00a0--ciphertext-file=CIPHERTEXT_PATH \\\u00a0--additional-authenticated-data-file=ADDITIONAL_AUTHENTICATED_DATA_FILE \\\u00a0--plaintext-file=PLAINTEXT_PATH\n```Replace the following variables:- : the project namespace.\n- : the name of the key used to encrypt the plaintext.\n- : the path of the file you want to decrypt.\n- : an optional file that contains additional authenticated data (AAD). AAD is used for integrity checks and protects your data from a confused deputy attack. AAD and the plaintext each have a size limit of 64KB. **Note** : You must use the same AAD you passed during the encrypt operation for the decrypt operation.\n- : the path to the file that contains the decrypted plaintext.\nAfter running the command, you see a file you specified in the `--plaintext-file` flag that contains the decrypted data.", "guide": "Documentation"}