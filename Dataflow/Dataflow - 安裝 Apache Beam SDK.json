{"title": "Dataflow - \u5b89\u88dd Apache Beam SDK", "url": "https://cloud.google.com/dataflow/docs/guides/installing-beam-sdk?hl=zh-cn", "abstract": "# Dataflow - \u5b89\u88dd Apache Beam SDK\n\u672c\u9801\u9762\u4ecb\u7d39\u5982\u4f55\u5b89\u88dd [Apache Beam SDK](https://beam.apache.org/) \uff0c\u4ee5\u4fbf\u60a8\u53ef\u4ee5\u5728 Dataflow \u670d\u52d9\u4e0a\u904b\u884c\u6d41\u6c34\u7dda\u3002\n**Dataflow SDK \u68c4\u7528\u901a\u77e5** \uff1aDataflow SDK 2.5.0 \u662f\u6700\u5f8c\u4e00\u500b\u8207 Apache Beam SDK \u7248\u672c\u5206\u958b\u7684 Dataflow SDK \u7248\u672c\u3002Dataflow \u670d\u52d9\u5b8c\u5168\u652f\u6301 Apache Beam SDK \u6b63\u5f0f\u7248\u672c\u3002\u5982\u9700\u77ad\u89e3\u5404\u7a2e SDK \u7684\u652f\u6301\u72c0\u614b\uff0c\u8acb\u53c3\u95b1 Dataflow [\u652f\u6301\u9801\u9762](https://cloud.google.com/dataflow/support?hl=zh-cn) \u3002\n", "content": "## \u5b89\u88dd SDK \u7248\u672c\n[Apache Beam SDK](https://beam.apache.org/get-started/beam-overview/) \u662f\u4e00\u500b\u7528\u65bc\u6578\u64da\u6d41\u6c34\u7dda\u7684\u958b\u6e90\u7de8\u7a0b\u6a21\u578b\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 Apache Beam \u7a0b\u5e8f\u5b9a\u7fa9\u9019\u4e9b\u6d41\u6c34\u7dda\uff0c\u4e26\u4e14\u53ef\u4ee5\u9078\u64c7\u904b\u884c\u7a0b\u5e8f\uff08\u5982 Dataflow\uff09\u4f86\u57f7\u884c\u6d41\u6c34\u7dda\u3002\nJava \u7248 Apache Beam SDK \u7684\u6700\u65b0\u767c\u5e03\u7248\u672c\u7232 **2.54.0** \u3002\u5982\u9700\u77ad\u89e3\u8a72\u7248\u672c\u4e2d\u5305\u542b\u7684\u66f4\u6539\uff0c\u8acb\u53c3\u95b1 [\u7248\u672c\u516c\u544a](https://beam.apache.org/blog/beam-2.54.0/) \u3002\n\u8981\u4f7f\u7528 Maven \u7372\u53d6 Java \u7248 Apache Beam SDK\uff0c\u8acb\u4f7f\u7528 [Maven \u4e2d\u592e\u4ee3\u78bc\u5eab](https://search.maven.org/search?q=apache-beam) \u4e2d\u5df2\u767c\u4f48\u7684\u4e00\u500b\u5de5\u4ef6\u3002\n\u5c07\u4f9d\u8cf4\u9805\u548c\u4f9d\u8cf4\u9805\u7ba1\u7406\u5de5\u5177\u6dfb\u52a0\u5230 SDK \u5de5\u4ef6\u7684 `pom.xml` \u6587\u4ef6\u4e2d\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u5728 Dataflow \u4e2d\u7ba1\u7406\u6d41\u6c34\u7dda\u4f9d\u8cf4\u9805](https://cloud.google.com/dataflow/docs/guides/manage-dependencies?hl=zh-cn#java) \u3002\n\u5982\u9700\u8a73\u7d30\u77ad\u89e3 Java \u7248 Apache Beam SDK \u4f9d\u8cf4\u9805\uff0c\u8acb\u53c3\u95b1 Apache Beam \u6587\u6a94\u4e2d\u7684 [Java \u7248 Apache Beam SDK \u4f9d\u8cf4\u9805](https://beam.apache.org/documentation/sdks/java-dependencies/) \u548c [\u7ba1\u7406 Java \u7248 Beam \u4f9d\u8cf4\u9805](https://beam.apache.org/blog/managing-beam-dependencies-in-java/) \u3002Python \u7248 Apache Beam SDK \u7684\u6700\u65b0\u767c\u5e03\u7248\u672c\u7232 **2.54.0** \u3002\u5982\u9700\u77ad\u89e3\u8a72\u7248\u672c\u4e2d\u5305\u542b\u7684\u66f4\u6539\uff0c\u8acb\u53c3\u95b1 [\u7248\u672c\u516c\u544a](https://beam.apache.org/blog/beam-2.54.0/) \u3002\n\u8981\u7372\u53d6 Python \u7248 Apache Beam SDK\uff0c\u8acb\u4f7f\u7528 [Python \u8edf\u4ef6\u5305\u7d22\u5f15](https://pypi.org/project/apache-beam/) \u4e2d\u5df2\u767c\u4f48\u7684\u4e00\u500b\u8edf\u4ef6\u5305\u3002\n\u901a\u904e\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88dd Python wheel\uff1a\n```\npip install wheel\n```\n\u5728\u865b\u64ec\u74b0\u5883\u4e2d\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u4ee5\u5b89\u88dd Python \u7248 Apache Beam SDK \u7684\u6700\u65b0\u7248\u672c\uff1a\n```\npip install 'apache-beam[gcp]'\n```\n\u6839\u64da\u9023\u63a5\u60c5\u6cc1\uff0c\u5b89\u88dd\u53ef\u80fd\u9700\u8981\u4e00\u4e9b\u6642\u9593\u3002\n\u8981\u5347\u7d1a\u5df2\u7d93\u5b89\u88dd\u7684 apache-beam\uff0c\u8acb\u4f7f\u7528 `--upgrade` \u6a19\u8a8c\uff1a\n```\npip install --upgrade 'apache-beam[gcp]'\n```\n\u5f9e 2020 \u5e74 10 \u6708 7 \u65e5\u958b\u59cb\uff0cDataflow \u4e0d\u518d\u652f\u6301 Python 2 \u6d41\u6c34\u7dda\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Google Cloud \u4e0a\u7684 Python 2 \u652f\u6301](https://cloud.google.com/python/docs/python2-sunset?hl=zh-cn#dataflow) \u3002\nGo \u7248 Apache Beam SDK \u7684\u6700\u65b0\u767c\u5e03\u7248\u672c\u7232 **2.54.0** \u3002\u5982\u9700\u77ad\u89e3\u8a72\u7248\u672c\u4e2d\u5305\u542b\u7684\u66f4\u6539\uff0c\u8acb\u53c3\u95b1 [\u7248\u672c\u516c\u544a](https://beam.apache.org/blog/beam-2.54.0/) \u3002\n\u5982\u9700\u5b89\u88dd Go \u7248 Apache Beam SDK \u7684\u6700\u65b0\u7248\u672c\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ngo get -u github.com/apache/beam/sdks/v2/go/pkg/beam\n```\n**\u6ce8\u610f** \uff1a\u7248\u672c\u865f\u5177\u6709\u9019\u4e00\u5f62\u5f0f\u8868\u793a\uff0c\u4e26\u6309\u5982\u4e0b\u65b9\u5f0f\u905e\u589e\uff1a\u7248\u672c\u8868\u793a\u4e0d\u517c\u5bb9\u7684 API \u66f4\u6539\uff0c\u7248\u672c\u8868\u793a\u4ee5\u5411\u5f8c\u517c\u5bb9\u65b9\u5f0f\u589e\u52a0\u4e86\u65b0\u529f\u80fd\uff0c\u7248\u672c\u8868\u793a\u5411\u524d\u517c\u5bb9\u7684\u554f\u984c\u4fee\u5fa9\u3002\u6a19\u8a18\u7232\u201c\u5be6\u9a57\u6027\u201d\u7684 API \u53ef\u80fd\u6703\u96a8\u6642\u66f4\u6539\u3002\n## \u8a2d\u7f6e\u958b\u767c\u74b0\u5883\n\u5982\u9700\u77ad\u89e3\u5982\u4f55\u8a2d\u7f6e Google Cloud \u9805\u76ee\u548c\u958b\u767c\u74b0\u5883\u4ee5\u4f7f\u7528 Dataflow\uff0c\u8acb\u6309\u7167\u76f8\u61c9\u7684\u5feb\u901f\u5165\u9580\u64cd\u4f5c\uff1a\n- [\u4f7f\u7528 Java \u5275\u5efa Dataflow \u6d41\u6c34\u7dda](https://cloud.google.com/dataflow/docs/quickstarts/create-pipeline-java?hl=zh-cn) \n- [\u4f7f\u7528 Python \u5275\u5efa Dataflow \u6d41\u6c34\u7dda](https://cloud.google.com/dataflow/docs/quickstarts/create-pipeline-python?hl=zh-cn) \n- [\u4f7f\u7528 Go \u5275\u5efa Dataflow \u6d41\u6c34\u7dda](https://cloud.google.com/dataflow/docs/quickstarts/create-pipeline-go?hl=zh-cn) \n- [\u4f7f\u7528 Dataflow \u6a21\u677f\u5275\u5efa\u6d41\u8655\u7406\u6d41\u6c34\u7dda](https://cloud.google.com/dataflow/docs/quickstarts/create-streaming-pipeline-template?hl=zh-cn) ## \u6e90\u4ee3\u78bc\u548c\u793a\u4f8b\nGitHub \u4e0a\u7684 [Apache Beam \u4ee3\u78bc\u5eab](https://github.com/apache/beam) \u4e2d\u63d0\u4f9b\u4e86 Apache Beam \u6e90\u4ee3\u78bc\u3002\nGitHub \u4e0a\u7684 Apache Beam [\u793a\u4f8b\u76ee\u9304](https://github.com/apache/beam/tree/master/examples/java/src/main/java/org/apache/beam/examples) \u4e2d\u63d0\u4f9b\u4e86\u4ee3\u78bc\u793a\u4f8b\u3002GitHub \u4e0a\u7684 Apache Beam [\u793a\u4f8b\u76ee\u9304](https://github.com/apache/beam/tree/master/sdks/python/apache_beam/examples) \u4e2d\u63d0\u4f9b\u4e86\u4ee3\u78bc\u793a\u4f8b\u3002GitHub \u4e0a\u7684 Apache Beam [\u793a\u4f8b\u76ee\u9304](https://github.com/apache/beam/tree/master/sdks/go/examples) \u4e2d\u63d0\u4f9b\u4e86\u4ee3\u78bc\u793a\u4f8b\u3002\n## \u67e5\u627e Dataflow SDK \u7248\u672c\n\u5b89\u88dd\u7d30\u7bc0\u53d6\u6c7a\u65bc\u60a8\u7684\u958b\u767c\u74b0\u5883\u3002\u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f Maven\uff0c\u60a8\u53ef\u4ee5\u5728\u4e00\u500b\u6216\u591a\u500b\u672c\u5730 Maven \u4ee3\u78bc\u5eab\u4e2d\u201c\u5b89\u88dd\u201d\u591a\u500b\u7248\u672c\u7684 Dataflow SDK\u3002\n\u5982\u9700\u78ba\u5b9a\u6307\u5b9a\u6d41\u6c34\u7dda\u6b63\u5728\u904b\u884c\u7684 Dataflow SDK \u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u5728\u4f7f\u7528 `DataflowPipelineRunner` \u6216 `BlockingDataflowPipelineRunner` \u904b\u884c\u6642\u67e5\u770b\u63a7\u5236\u6aaf\u8f38\u51fa\u3002\u63a7\u5236\u6aaf\u5c07\u986f\u793a\u5982\u4e0b\u6d88\u606f\uff0c\u5176\u4e2d\u5305\u542b Dataflow SDK \u7684\u7248\u672c\u4fe1\u606f\uff1a\u5982\u9700\u78ba\u5b9a\u6307\u5b9a\u6d41\u6c34\u7dda\u6b63\u5728\u904b\u884c\u7684 Dataflow SDK \u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u5728\u4f7f\u7528 `DataflowRunner` \u904b\u884c\u6642\u67e5\u770b\u63a7\u5236\u6aaf\u8f38\u51fa\u3002\u63a7\u5236\u6aaf\u5c07\u986f\u793a\u5982\u4e0b\u6d88\u606f\uff0c\u5176\u4e2d\u5305\u542b Dataflow SDK \u7684\u7248\u672c\u4fe1\u606f\uff1a\u5982\u9700\u78ba\u5b9a\u6307\u5b9a\u6d41\u6c34\u7dda\u6b63\u5728\u904b\u884c\u7684 Dataflow SDK \u7248\u672c\uff0c\u60a8\u53ef\u4ee5\u5728\u4f7f\u7528 `DataflowRunner` \u904b\u884c\u6642\u67e5\u770b\u63a7\u5236\u6aaf\u8f38\u51fa\u3002\u63a7\u5236\u6aaf\u5c07\u986f\u793a\u5982\u4e0b\u6d88\u606f\uff0c\u5176\u4e2d\u5305\u542b Dataflow SDK \u7684\u7248\u672c\u4fe1\u606f\uff1a\n```\n INFO: Executing pipeline on the Dataflow Service, ...\n Dataflow SDK version: <version>\n```\n## \u5f8c\u7e8c\u6b65\u9a5f\n- Dataflow \u8207 Google Cloud CLI \u96c6\u6210\u3002\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd Dataflow \u547d\u4ee4\u884c\u754c\u9762\uff0c\u8acb\u53c3\u95b1 [\u4f7f\u7528 Dataflow \u547d\u4ee4\u884c\u754c\u9762](https://cloud.google.com/dataflow/pipelines/dataflow-command-line-intf?hl=zh-cn) \u3002\n- \u8981\u4e86\u89e3 Dataflow \u652f\u6301\u54ea\u4e9b Apache Beam \u529f\u80fd\uff0c\u8acb\u67e5\u770b [Apache Beam \u529f\u80fd\u77e9\u9663](https://beam.apache.org/documentation/runners/capability-matrix/) \u3002", "guide": "Dataflow"}