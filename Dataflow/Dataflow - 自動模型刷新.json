{"title": "Dataflow - \u81ea\u52d5\u6a21\u578b\u5237\u65b0", "url": "https://cloud.google.com/dataflow/docs/machine-learning/ml-model-refresh?hl=zh-cn", "abstract": "# Dataflow - \u81ea\u52d5\u6a21\u578b\u5237\u65b0\n\u85c9\u52a9\u81ea\u52d5\u6a21\u578b\u5237\u65b0\u529f\u80fd\uff0c\u7576\u5e95\u5c64\u6a21\u578b\u767c\u751f\u66f4\u6539\u6642\uff0c\u6d41\u6c34\u7dda\u5c07\u66f4\u65b0\u7232\u4f7f\u7528\u65b0\u6a21\u578b\u3002\u7531\u65bc `RunInference` \u8f49\u63db\u6703\u81ea\u52d5\u66f4\u65b0\u6a21\u578b\u8655\u7406\u7a0b\u5e8f\uff0c\u56e0\u6b64\u60a8\u7121\u9700\u91cd\u65b0\u90e8\u7f72\u6d41\u6c34\u7dda\u3002\u5373\u4f7f Apache Beam \u6d41\u6c34\u7dda\u6b63\u5728\u904b\u884c\uff0c\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528\u6b64\u529f\u80fd\u5be6\u6642\u66f4\u65b0\u6a21\u578b\u3002\n\u81ea\u52d5\u6a21\u578b\u5237\u65b0\u63d0\u4f9b\u4e86\u5169\u7a2e\u66f4\u65b0\u6a5f\u5668\u5b78\u7fd2 (ML) \u6a21\u578b\u7684\u65b9\u6cd5\uff0c\u5373 [\u89c0\u5bdf\u6a21\u5f0f](#watch) \u548c [\u4e8b\u4ef6\u6a21\u5f0f](#event) \u3002\n", "content": "## \u89c0\u5bdf\u6a21\u5f0f\n\u8acb\u4f7f\u7528 Apache Beam \u63d0\u4f9b\u7684\u6a21\u5f0f\u4e4b\u4e00\uff08\u4f8b\u5982 [WatchFilePattern](https://beam.apache.org/releases/pydoc/current/apache_beam.ml.inference.utils.html) \u985e\uff09\u4f86\u76e3\u63a7 Cloud Storage \u5b58\u5132\u6876\u4e2d\u7684\u6700\u65b0\u6587\u4ef6\u3002 `WatchFilePattern` \u4f7f\u7528\u6642\u9593\u6233\u8207 `file_pattern` \u9032\u884c\u5339\u914d\uff0c\u4e26\u8f38\u51fa\u6700\u65b0\u7684 [ModelMetadata](https://beam.apache.org/releases/pydoc/current/apache_beam.ml.inference.base.html?highlight=modelmetadata#apache_beam.ml.inference.base.ModelMetadata) \uff0c `RunInference PTransform` \u6703\u4f7f\u7528\u5b83\u4f86\u66f4\u65b0\u6a5f\u5668\u5b78\u7fd2\u6a21\u578b\u3002\n\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u5982\u4f55\u4f7f\u7528 `WatchFilePattern` \u81ea\u52d5\u5237\u65b0\u6a5f\u5668\u5b78\u7fd2\u6a21\u578b\uff0c\u8acb\u53c3\u95b1 Apache Beam \u6587\u6a94\u4e2d\u7684 [\u4f7f\u7528 WatchFilePattern \u5728 RunInference \u4e2d\u81ea\u52d5\u66f4\u65b0\u6a5f\u5668\u5b78\u7fd2\u6a21\u578b](https://beam.apache.org/documentation/ml/side-input-updates/) \u3002\n## \u4e8b\u4ef6\u6a21\u5f0f\n\u5c07\u6d41\u6c34\u7dda\u9023\u63a5\u5230\u7121\u754c\u9650\u4f86\u6e90\uff08\u4f8b\u5982 Pub/Sub\uff09\uff0c\u4ee5\u5c07\u66f4\u65b0\u4e8b\u4ef6\u76f4\u63a5\u767c\u9001\u5230\u8f49\u63db\uff0c\u5f9e\u800c\u5553\u52d5\u6a21\u578b\u66f4\u65b0\u3002\u60a8\u53ef\u4ee5\u914d\u7f6e\u81ea\u5b9a\u7fa9 [\u8f14\u52a9\u8f38\u5165](https://beam.apache.org/documentation/programming-guide/#side-inputs) `PCollection` \u4f86\u5b9a\u7fa9\u6a21\u578b\u66f4\u65b0\u7684\u908f\u8f2f\u3002\n\u5982\u9700\u67e5\u770b\u6f14\u793a\u5982\u4f55\u4f7f\u7528\u8f14\u52a9\u8f38\u5165 `PCollection` \u5728\u751f\u7522\u74b0\u5883\u4e2d\u66f4\u65b0\u6a21\u578b\uff0c\u8acb\u53c3\u95b1 [\u5728\u6b63\u5728\u904b\u884c\u7684\u6d41\u6c34\u7dda\u4e2d\u66f4\u65b0\u6a5f\u5668\u5b78\u7fd2\u6a21\u578b](https://cloud.google.com/dataflow/docs/notebooks/automatic_model_refresh?hl=zh-cn) \u3002\n## \u5f8c\u7e8c\u6b65\u9a5f\n- \u67e5\u770b Apache Beam \u6587\u6a94\uff0c\u8a73\u7d30\u77ad\u89e3 [\u81ea\u52d5\u6a21\u578b\u5237\u65b0](https://beam.apache.org/documentation/ml/about-ml/#automatic-model-refresh) \u529f\u80fd\u3002\n- [\u5728\u7b46\u8a18\u672c\u4e2d\u8a66\u7528\u6b64\u529f\u80fd](https://colab.sandbox.google.com/github/apache/beam/blob/master/examples/notebooks/beam-ml/automatic_model_refresh.ipynb?hl=zh-cn) \u3002", "guide": "Dataflow"}