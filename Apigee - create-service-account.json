{"title": "Apigee - create-service-account", "url": "https://cloud.google.com/apigee/docs/api-platform/get-started/what-apigee", "abstract": "# Apigee - create-service-account\nYou are currently viewing version 1.2 of the Apigee hybrid documentation. **This version is end of life.** You should upgrade to a newer version. For more information, see [Supported versions](/apigee/docs/hybrid/supported-platforms#supported-versions) .\nCreates Google Cloud Platform (GCP) service accounts with roles that allow individual Apigee hybrid components to make authorized API calls and downloads the associated service account key files. You can use the service account key files generated by this command in your configuration overrides file.\nThe `create-service-account` tool is located in `` `/tools` directory.\n", "content": "## Prerequisites\nThe `create-service-account` tool requires that the [gcloud](https://cloud.google.com/sdk/gcloud/) CLI be installed. Users invoking the utility should have the role `Service Account Admin` .\nTo get started, be sure your `gcloud` project configuration is set to the project you created in [Step 2: Create a Google Cloud project](/apigee/docs/hybrid/v1.2/precog-gcpproject) :\n```\ngcloud config list project\n```\nIf you need to change the current project ID, use this command:\n```\ngcloud config set project gcp_project_id\n```\nWhere is the project created in [Step 2: Create a Google Cloud project](/apigee/docs/hybrid/v1.2/precog-gcpproject) .\n## create-service-account syntax\nThe `create-service-account` tool uses the following syntax:\n```\ncreate-service-account component_name output_dir [gcp_project_id]\n```\nWhere:\n- : Specifies the hybrid service that uses the service account. Valid  values are:- `apigee-cassandra`\n- `apigee-logger`\n- `apigee-mart`\n- `apigee-metrics`\n- `apigee-synchronizer`\n- `apigee-udca`\nNote that the `create-service-account` tool cannot create the `apigee-org-admin` service account. You must create that either with the  GCP or gCloud APIs, as described in [Create service accounts](/apigee/docs/hybrid/v1.2/install-download-install#create-service-accounts) .\n- : The output directory in which to store the downloaded service account  key.\n- : (Optional) Specifies the GCP project ID of the project that is bound  to your hybrid-enabled organization. If the GCP project ID is not provided, the tool attempts to  retrieve it from the current gcloud configuration.\n**NOTE:** When you generate a service account for`apigee-mart`you'll see this error:```\n[ERROR]: No roles found for component apigee-mart\n```You can ignore the error\u2014the service account for MART does not need a role and is created with no role assigned to it.\n## Detailed description\nThe `create-service-account` tool:\n- Creates [GCP service accounts](https://cloud.google.com/iam/docs/service-accounts) used by hybrid components. The created service account is granted the role required by  the specific component to operate.\n- Downloads the service account key to your system. You place the service account keys in your  hybrid configuration overrides file, as explained in the hybrid [installation instructions](/apigee/docs/hybrid/v1.2/install-before-begin) .\nThe tool creates service accounts for the following components:\n| Component*                | Role                 | Required for basic install?           | Description                                           |\n|:-----------------------------------------------------------------------|:-----------------------------------------------------------------------|:-----------------------------------------------------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| apigee-cassandra              | Storage Object Admin             | nan                 | Allows Cassandra backups to Google Cloud Storage, as described in Backup and recovery.                        |\n| apigee-logger               | Logs Writer               | nan                 | Allows logging data collection, as described in Logging. Only required for non-GKE cluster installations.                   |\n| apigee-mart               | No role                | nan                 | Allows MART service authentication. This service account should not have a role associated with it; as a result, when you create this service account, do not assign a role to it. |\n| apigee-metrics               | Monitoring Metric Writer            | nan                 | Allows metrics data collection, as described in Metrics collection                             |\n| apigee-org-admin              | Apigee Organization Admin            | nan                 | Lets you call the getSyncAuthorization API and setSyncAuthorization API. You cannot create this service account with the create-service-account tool.        |\n| apigee-synchronizer             | Apigee\u00a0Synchronizer\u00a0Manager           | nan                 | Allows the synchronizer to download proxy bundles and environment configuration data. Also enables operation of the trace feature.             |\n| apigee-udca               | Apigee Analytics Agent             | nan                 | Allows the transfer of trace, analytics and deployment status data to the management plane.                       |\n| * This name is used in the downloaded service account key's filename. | * This name is used in the downloaded service account key's filename. | * This name is used in the downloaded service account key's filename. | * This name is used in the downloaded service account key's filename.                            |\nYou can also create service accounts in the GCP Console. See also [Creating and managing service accounts](https://cloud.google.com/iam/docs/creating-managing-service-accounts) .\n## Example\nThe following example creates a new service account for the `apigee-logger` service and places the downloaded key in the `./service-accounts` directory.\n```\n./my-hybrid-root/tools/create-service-account apigee-logger ./service-accounts\n```", "guide": "Apigee"}