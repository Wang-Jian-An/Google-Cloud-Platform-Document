{"title": "Compute Engine - View and understand VM instance insights", "url": "https://cloud.google.com/compute/docs/instances", "abstract": "# Compute Engine - View and understand VM instance insights\nVirtual machine (VM) instance insights help you understand the CPU, memory, and network usage of your Compute Engine VMs. Insights are generated automatically based on system metrics or metrics gathered by Cloud Monitoring. You can use insights to support decisions about resizing your machine types to more efficiently use VM resources.\nFor more information about insights, see [Insights](/recommender/docs/insights/using-insights) .\n", "content": "## Before you begin\n- If you haven't already, set up authentication. [Authentication](/compute/docs/authentication) is the process by which your identity is verified for access to Google Cloud services and APIs. To run code or samples from a local development environment, you can authenticate to Compute Engine as follows.Select the tab for how you plan to use the samples on this page:\nWhen you use the Google Cloud console to access Google Cloud services and   APIs, you don't need to set up authentication.- [Install](/sdk/docs/install) the Google Cloud CLI, then [initialize](/sdk/docs/initializing) it by running the following command:```\ngcloud init\n``` **Note:** If you installed the gcloud CLI  previously, make sure you have the latest version by running`gcloud components  update`.\n- [ Set a default region and zone](/compute/docs/gcloud-compute#set_default_zone_and_region_in_your_local_client) .\nTo use the REST API samples on this page in a local development environment, you use the credentials you provide to the gcloud CLI.- [Install](/sdk/docs/install) the Google Cloud CLI, then [initialize](/sdk/docs/initializing) it by running the following command:\n- ```\ngcloud init\n```## View insights for VM recommendations\nCompute Engine generates recommendations based on resource [insights](/recommender/docs/insights/using-insights) . Recommendations include [machine type recommendations](/compute/docs/instances/apply-machine-type-recommendations-for-instances) and [idle VM recommendations](/compute/docs/instances/viewing-and-applying-idle-vm-recommendations) .\nBy viewing insights associated with a specific VM, you can learn more about the CPU, memory, and network usage for your VM.\nTo view the insights that generated a specific recommendation, use the gcloud CLI or the API.\nTo view all the available insights in detail for a specific zone, use the [insights list command](/sdk/gcloud/reference/recommender/insights/list) and provide the `--format` option.\n```\ngcloud recommender insights list --project=PROJECT_ID \\\n --location=LOCATION \\\n --insight-type=INSIGHT_TYPE_ID \\\n --format=FORMAT\n```\nReplace the following:- ``: the ID of your project.\n- ``: the zone that contains the resources for which you want to view insights.\n- ``: the id of the [insight type](/recommender/docs/insights/insight-types) . For a list of the VM insights available, see [Types of VM instance insights](#types_of_vm_instance_insights) .\n- ``: your preferred output [format](/sdk/gcloud/reference/topic/formats) \u2013for example,`json`.\nA typical output of the `insights list` command using the `json` output format might look like the following.\n```\n[ {\n \"associatedRecommendations\": [  {\n  \"recommendation\": \"projects/PROJECT_ID/locations/us-central1-a/recommenders/google.compute.instance.MachineTypeRecommender/recommendations/7618763b-fee2-42e5-8b9b-e6eee0b2077f\"\n  }\n ],\n \"category\": \"PERFORMANCE\",\n \"content\": {\n  \"predictedCpuCores\": 0.15\n },\n \"description\": \"Predicted CPU usage is 0.1 vCPUs.\",\n \"etag\": \"\\\"fdb51460cac758a0\\\"\",\n \"insightSubtype\": \"CPU_USAGE_PREDICTION\",\n \"lastRefreshTime\": \"2021-09-15T06:50:45Z\",\n \"name\": \"projects/PROJECT_ID/locations/us-central1-a/insightTypes/google.compute.instance.CpuUsagePredictionInsight/insights/cb2ab4e6-2c5e-4f0e-8cbe-1487e8bae8c0\",\n \"observationPeriod\": \"604800s\",\n \"severity\": \"LOW\",\n \"stateInfo\": {\n  \"state\": \"ACTIVE\"\n },\n \"targetResources\": [  \"//compute.googleapis.com/projects/PROJECT_ID/zones/us-central1-a/instances/instance-name-1\"\n ]\n }\n]\n```\nTo view all the available insights in detail for a specific zone, use the [insights.list method](/recommender/docs/reference/rest/v1/projects.locations.insightTypes.insights/list) .\n```\nGET https://recommender.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/insightTypes/INSIGHT_TYPE_ID/insights\n```\nReplace the following:- ``: the ID of your project.\n- ``: the zone that contains the resources for which you want to view insights.\n- ``: the id of the [insight Type](/recommender/docs/insights/insight-types) . For a list of the VM insights available, see [Types of VM instance insights](#types_of_vm_instance_insights) .\nA typical output of the `insights.list` method might look like the following.\n```\n[ {\n \"associatedRecommendations\": [  {\n  \"recommendation\": \"projects/PROJECT_ID/locations/us-central1-a/recommenders/google.compute.instance.MachineTypeRecommender/recommendations/7618763b-fee2-42e5-8b9b-e6eee0b2077f\"\n  }\n ],\n \"category\": \"PERFORMANCE\",\n \"content\": {\n  \"predictedCpuCores\": 0.15\n },\n \"description\": \"Predicted CPU usage is 0.1 vCPUs.\",\n \"etag\": \"\\\"fdb51460cac758a0\\\"\",\n \"insightSubtype\": \"CPU_USAGE_PREDICTION\",\n \"lastRefreshTime\": \"2021-09-15T06:50:45Z\",\n \"name\": \"projects/PROJECT_ID/locations/us-central1-a/insightTypes/google.compute.instance.CpuUsagePredictionInsight/insights/cb2ab4e6-2c5e-4f0e-8cbe-1487e8bae8c0\",\n \"observationPeriod\": \"604800s\",\n \"severity\": \"LOW\",\n \"stateInfo\": {\n  \"state\": \"ACTIVE\"\n },\n \"targetResources\": [  \"//compute.googleapis.com/projects/PROJECT_ID/zones/us-central1-a/instances/instance-name-1\"\n ]\n }\n]\n```\nFor more information about insights, see the [reference docs](/recommender/docs/reference/rest/v1/projects.locations.insightTypes.insights) .\n## Types of VM instance insights\nYou can use different insights to retrieve information about the performance of your VMs. Each insight type has specific content attributes.\nThe following sections provide a reference for the VM insights available.\n### CPU usage insight\nCompute Engine creates CPU usage insights when the CPU usage of your VMs has been higher or lower than usual for the last observation period.\nThe insight type ID is `google.compute.instance.CpuUsageInsight` .\nThe available subtypes are:\n- `HIGH_CPU_USAGE`\n- `LOW_CPU_USAGE`\nThese are associated with insight descriptions such as the following:\n- `In the last 12 days for 90% of the time, CPU usage was greater than or equal to 83%.`\n- `In the last 10 days for 70% of the time, CPU usage was lower than or equal to 20%.`\nThe following table provides some details about the content associated with CPU usage insights.\n| 0   | 1  | 2                                                                                             |\n|:----------|:------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| Attribute | Type | Description                                                                                          |\n| points | ARRAY | Array of objects. Each object contains the following properties: sampleProbability: (DOUBLE) Relative amount of CPU usage samples below quantile function value. quantileFunctionValue: (DOUBLE) Upper bound for CPU usage which holds at least part (sample probability) of samples. The value represents the ratio of the total amount of vCPUs, and is in the range [0, 1]. |\n### CPU usage prediction insight\nCompute Engine creates CPU usage prediction insights to indicate the predicted CPU usage for the following day.\nThe insight type ID is `google.compute.instance.CpuUsagePredictionInsight` .\nA typical description you can find in this insight is similar to the following:\n- `Predicted CPU usage is 0.1 vCPUs.`\nThe following table provides some details about the content associated with CPU usage prediction insights.\n| 0     | 1  | 2        |\n|:--------------------|:-------|:-------------------------------|\n| Attribute   | Type | Description     |\n| predicted_cpu_cores | DOUBLE | Predicted amount of CPU cores. |\n### CPU usage trend insight\nCompute Engine creates CPU usage trend insights when CPU usage shows an increasing or decreasing trend in the last observation period.\nThe insight type ID is `google.compute.instance.CpuUsageTrendInsight` .\nThe available subtypes are:\n- `CPU_USAGE_INCREASE`\n- `CPU_USAGE_DECREASE`\nThese are generally associated with insight descriptions such as the following:\n- `In the last 7 days, average daily CPU usage has increased by 8% from 65% to 73%.`\n- `In the last 7 days, average daily CPU usage has decreased by 10% from 55% to 45%.`\nThe following table provides some details about the content associated with CPU usage trend insights.\n| 0        | 1  | 2                                                             |\n|:------------------------------|:-------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| Attribute      | Type | Description                                                           |\n| cpu_usage_percentage_at_start | DOUBLE | Measured daily mean of CPU usage at the start of the observation period. The value represents the percentage of the total number of vCPUs, and is in the range [0, 100].                    |\n| cpu_usage_percentage_at_end | DOUBLE | Measured daily mean of CPU usage at the end of the observation period. The value represents the percentage of the total number of vCPUs, and is in the range [0, 100].                    |\n| cpu_usage_percentage_change | DOUBLE | Predicted change of daily mean of CPU usage during the observation period. Prediction uses linear regression to model the change of daily CPU usage. The value represents the percentage of the total number of vCPUs, and is in the range [0, 100]. |\n### Memory usage insight\nCompute Engine creates memory usage insights if the memory usage is exceptionally high or low during the observation period.\nThe insight type ID is `google.compute.instance.MemoryUsageInsight` .\n**Note:** You can receive memory usage insights only if you install Cloud Monitoring in your VMs. For more information, see [Installing Cloud Monitoring](/monitoring/agent/monitoring/installation) .\nThe available subtypes are:\n- `HIGH_MEMORY_USAGE`\n- `LOW_MEMORY_USAGE`\nThese are generally associated with insight descriptions such as the following:\n- `In the last 12 days for 80% of the time, memory usage was greater than or equal to 64%.`\n- `In the last 7 days for 50% of the time, memory usage was lower than or equal to 10%.`\nThe following table provides some details about the content associated with memory usage insights.\n| 0   | 1  | 2                                                                                               |\n|:----------|:------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| Attribute | Type | Description                                                                                            |\n| points | ARRAY | Array of objects. Each object contains the following properties: sampleProbability: (DOUBLE) Relative amount of memory usage samples below quantile function value. quantileFunctionValue: (DOUBLE) Upper bound for memory usage which holds at least part (sample probability) of samples. The value represents the ratio of the total amount of memory, and is in the range [0, 1]. |\n### Memory usage prediction insight\nCompute Engine creates memory usage prediction insights to indicate the memory usage predicted for the following day.\n**Note:** You can receive memory usage insights only if you install Cloud Monitoring in your VMs.\nThe insight type ID is `google.compute.instance.MemoryUsagePredictionInsight` .\nA typical insight description is the following:\n- `Predicted memory usage is 1536 MB.`\nThe following table provides some details about the content associated with memory usage prediction insights.\n| 0     | 1  | 2           |\n|:--------------------|:-------|:--------------------------------------------|\n| Attribute   | Type | Description         |\n| predicted_memory_mb | DOUBLE | Predicted amount of memory expressed in MB. |\n### Network throughput insight\nCompute Engine creates network throughput insights when the network throughput during the observation period is exceptionally low for the incoming or outgoing traffic.\nThe insight type ID is `google.compute.instance.NetworkThroughputInsight` .\nThe available subtypes are:\n- `LOW_RECEIVED_NETWORK_THROUGHPUT`\n- `LOW_SENT_NETWORK_THROGHPUT`\nThese are generally associated with insight descriptions such as the following:\n- `In the last 7 days for 80% of the time, received network throughput was lower than or equal to 500 B/s.`\n- `In the last 7 days for 80% of the time, sent network throughput was lower than or equal to 200 B/s.`\nThe following table provides some details about the content associated with network throughput insights.\n| 0           | 1  | 2                                   |\n|:--------------------------------------------|:-------|:--------------------------------------------------------------------------------------------------------------------------------------------|\n| Attribute         | Type | Description                                 |\n| sample_probability       | DOUBLE | Relative amount of network throughput samples below the quantile function value. The value is in the range [0, 1].      |\n| quantile_function_value_in_bytes_per_second | DOUBLE | Upper bound for network throughput which holds at least part (sample probability) of samples. The value is expressed in bytes per second. |\n## What's next\n- Learn more about [machine type recommendations](/compute/docs/instances/apply-machine-type-recommendations-for-instances) that Compute Engine creates based on insights.\n- Learn more about [idle VM recommendations](/compute/docs/instances/viewing-and-applying-idle-vm-recommendations) .", "guide": "Compute Engine"}