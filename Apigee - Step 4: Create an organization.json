{"title": "Apigee - Step 4: Create an organization", "url": "https://cloud.google.com/apigee/docs/api-platform/get-started/what-apigee", "abstract": "# Apigee - Step 4: Create an organization\nYou are currently viewing version 1.1 of the Apigee hybrid documentation. **This version is end of life.** You should upgrade to a newer version. For more information, see [Supported versions](/apigee/docs/hybrid/supported-platforms#supported-versions) .\nYou've created a Google Cloud account and project and enabled the APIs. Now you can create your organization.\n#", "content": "## Prerequisite\nTo create an organization, you must meet one of the following conditions:\n- Have an evaluation account. Evaluation accounts expire after 60 days. At that time, the organization will be deleted.\n- Have a paid account\nIf neither of these is true, then you must contact [Apigee Sales](https://pages.apigee.com/contact-sales-reg.html) before you can continue.\n**To create a new organization and provision it:**\n**Note: ** If you have an Apigee evaluation account, the organization you create will expire after 60 days. At that time, the organization will be deleted.\n- On the command line, get your `gcloud` authentication credentials, as the following example shows:```\nTOKEN=$(gcloud auth print-access-token)\n```To check that your token was populated, use `echo` , as the following example shows:```\necho $TOKEN\n```This should display your token as an encoded string.For more information, see [gcloud command-line tool overview](https://cloud.google.com/sdk/gcloud/) .\n- Send an authenticated`POST`request to the [Create organizations API](/apigee/docs/reference/apis/apigee/rest/v1/organizations/create) . **Note:** After you create a hybrid-enabled organization, you cannot  delete it, change the organization ID, or change the Google Cloud project that is bound to it.  If you need to migrate to another Google Cloud project, contact [Apigee Sales](https://pages.apigee.com/contact-sales-reg.html) to decommission the  project and provide an entitlement for a new one.The following example shows the request structure that creates an organization:```\ncurl -H \"Authorization: Bearer $TOKEN\" -X POST -H \"content-type:application/json\" \\\n -d '{\n \"name\":\"proposed_org_ID\",\n \"displayName\":\"display_name\",\n \"description\":\"organization_description\",\n \"runtimeType\":\"runtime_type\",\n \"analyticsRegion\":\"analytics_region\"\n }' \\\n \"https://apigee.googleapis.com/v1/organizations?parent=projects/project_ID\"\n```Where:- **(Required)** is the programmatic ID that you   want for your hybrid-enabled organization. For example,`my-hybrid-org`. **Note:** The organization ID can contain only lower-   case letters, digits, and hyphens. It has a maximum length of 32 characters.The following example IDs are valid:check_circleorg-all-lowercasecheck_circleshort-org-idcheck_circleorg-with-hyphenscheck_circleorg-number-42The following example IDs are valid:closeOrg-With-Camel-Casecloselong-organization-id-is-more-than-32-characterscloseorg_with_underscorescloseorg+with*other/special%charsApigee recommends that you use the same ID as the Google Cloud project ID that you created in [Step 2: Create a Google Cloud project](/apigee/docs/hybrid/v1.1/precog-gcpproject) , but you can use another ID if you want.\n- **(Required)** is the runtime type of the Apigee organization,   where HYBRID is user-managed Apigee hybrid runtime.\n- **(Required)** is the primary region for   analytics data storage. Choose one of the following:| 0    | 1     | 2   |\n|:----------------|:---------------------|:-------------|\n| asia-northeast1 | australia-southeast1 | us-west1  |\n| us-central1  | us-east1    | europe-west1 |\n| europe-west2 | nan     | nan   |We provide this option so that you can choose a region that is geographically close or if   your organization has other storage requirements.\n- **(Required)** is the Google Cloud project that you want bound   to your new   hybrid-enabled organization. This is the ID that Google generated for you in [Step 2: Create a Google Cloud project](/apigee/docs/hybrid/v1.1/precog-gcpproject) . **Note:** The project ID can contain only lower-case   letters, digits, and hyphens, with a maximum length of 32 characters.\n- is the user-friendly name of your   organization. This value does not need to be unique, and can include spaces and special   characters. For example, \"My Hybrid Organization\".\n- is information about the   organization that you'd like to use as a reminder of its purpose. For example, \"My first   organization\".\nOn a successful creation request, the Organizations API should respond with a message similar  to the following:```\n{\u00a0 \"name\": \"organizations/organization_ID/operations/long_running_operation_ID\",\u00a0 \"metadata\": {\u00a0 \u00a0 \"@type\": \"type.googleapis.com/google.cloud.apigee.v1.OperationMetadata\",\u00a0 \u00a0 \"operationType\": \"INSERT\",\u00a0 \u00a0 \"targetResourceName\": \"organizations/organization_ID\",\u00a0 \u00a0 \"state\": \"IN_PROGRESS\"\u00a0 }}\n```Where:- is the UUID of an asynchronous, long-running   operation. You can use this ID to check the status of your organizatioin creation request   (described later).\n- is the ID of your new organization that is currently   being created.\nAs the `state` property in the response indicates, Apigee has started to create  the new organization, so  it's state is `IN_PROGRESS` . This process can take several minutes.If you get an error, see [Troubleshooting organization creation](#errors) .\n- You can check the status of the long-running operation whose ID Apigee returned on your  initial creation request. To do this, use the [Operations API](/apigee/docs/reference/apis/apigee/rest/v1/organizations.operations) , as the following example  shows:```\ncurl -H \"Authorization: Bearer $TOKEN\" \\\n \"https://apigee.googleapis.com/v1/organizations/organization_ID/operations/long_running_operation_ID\"\n```The following examples show possible responses to this request:\nWhen the organization has been provisioned, the state of the long-running operation is `FINISHED` , as the following example shows:\n```\n{\u00a0 \u00a0 \"operations\": [\u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \"name\": \"organizations/organization_ID/operations/long_running_operation_ID\",\u00a0 \u00a0 \u00a0 \u00a0 \"metadata\": {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"@type\": \"type.googleapis.com/google.cloud.apigee.v1.OperationMetadata\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"operationType\": \"INSERT\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"targetResourceName\": \"organizations/organization_ID\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"state\": \"FINISHED\"\u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 \"done\": true,\u00a0 \u00a0 \u00a0 \u00a0 \"response\": {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"@type\": \"type.googleapis.com/google.cloud.apigee.v1.Organization\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"name\": \"organization_ID\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"createdAt\": \"1572550611\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"lastModifiedAt\": \"1572550611\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"displayName\": \"display_name\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"description\": \"description\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"properties\": {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"property\": [\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"name\": \"features.hybrid.enabled\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"value\": \"true\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ]\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"analyticsRegion\": \"us-east1\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"runtimeType\": \"HYBRID\",\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 ]\u00a0 }\n```\nIf you did not enter a description, then that field will not appear in the response.\nCongratulations! You have created a new organization and it is ready for you to use. You  can continue to [Step 5: Add an environment](/apigee/docs/hybrid/v1.1/precog-add-environment) .If Apigee is still creating the organization, Apigee responds with a status of `IN_PROGRESS` , as the following example shows:\n```\n{\u00a0 \u00a0 \"name\": \"organizations/organization_ID/operations/long_running_operation_ID\",\u00a0 \u00a0 \"metadata\": {\u00a0 \u00a0 \u00a0 \"@type\": \"type.googleapis.com/google.cloud.apigee.v1.OperationMetadata\",\u00a0 \u00a0 \u00a0 \"operationType\": \"INSERT\",\u00a0 \u00a0 \u00a0 \"targetResourceName\": \"organizations/organization_ID\",\u00a0 \u00a0 \u00a0 \"state\": \"IN_PROGRESS\"\u00a0 \u00a0 }\u00a0 }\n```\nYou should wait a little longer before attempting to verify that the creation process   is complete.\n## Troubleshooting organization creation\nWhen you create an organization with the [Create organizations API](/apigee/docs/reference/apis/apigee/rest/v1/organizations/create) , you might get an error response. Responses look like the following:\n```\n{\n \"error\": {\n \"code\": HTTP_error_code,\n \"message\": \"short_error_message\",\n \"status\": \"high_level_error_type\",\n \"details\": [  {\n  \"@type\": \"specific_error_type\",\n  \"detail\": \"expanded_error_description\"\n  }\n ]\n }\n}\n```\nThe following example shows a response to a common error\u2014the organization ID contains illegal characters (upper case characters are not allowed in organization IDs):\n```\n{\u00a0 \"error\": {\u00a0 \u00a0 \"code\": 400,\u00a0 \u00a0 \"message\": \"invalid Organization ID \\\"MY-ORG\\\": \\\"MY-ORG\\\" is an invalid Organization ID\",\u00a0 \u00a0 \"status\": \"INVALID_ARGUMENT\",\u00a0 \u00a0 \"details\": [\u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \"@type\": \"type.googleapis.com/google.rpc.DebugInfo\",\u00a0 \u00a0 \u00a0 \u00a0 \"detail\": \"[ORIGINAL ERROR] generic::invalid_argument: invalid Organization ID \\\"MY-ORG\\\":\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \\\"My-ORG\\\" is an invalid Organization ID [google.rpc.error_details_ext]\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 { message: \\\"invalid Organization ID \\\\\\\"MY-ORG\\\\\\\": \\\\\\\"MY-ORG\\\\\\\" is an invalid\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Organization ID\\\" }\"\u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 ]\u00a0 }}\n```\nIn this case, you could rename the organization with lower-case letters and resend your request.\nThe following table lists errors you might receive and potential resolutions when you try to create  a new organization:\n| HTTP\u00a0Error Code | HTTP Error          | Description                                                                   |\n|------------------:|:-------------------------------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n|    400 | Invalid JSON payload received     | Either the structure of the data in your request contains a syntax error or the path to the endpoint is incorrect.                                         |\n|    400 | Invalid organization ID       | The organization ID that you request cannot contain upper-case letters or any special characters other than hyphens. It must contain only lower-case letters, numbers, and/or hyphens. It can be up to a maximum of 32 characters long.           |\n|    400 | Unsupported analytics region      | You either did not specify the value of the analyticsRegion in your request body, or the value you specified is not one of the valid options.                                  |\n|    400 | Does not have an Apigee entitlement    | Your Google Cloud project (that you created in Step 2: Create a Google Cloud project) has not yet been hybrid enabled. This could indicate an issue with your billing or some other error related to your Google Cloud account. For more information, contact Apigee Sales.  |\n|    401 | Request\u00a0had\u00a0invalid\u00a0authentication credentials | Your gcloud authentication token is either bad or outdated, or you did not include one in the request. Generate a new token and resend the address.                                 |\n|    403 | Permission denied on resource project project_ID | You might have sent a request that contained an incorrect project ID or path.                                                  |\n|    403 | Unable to retrieve project information   | The organization has not yet been created or provisioned. You can issue a request to the Operations API to check the status of the long-running operation, as described in the procedure above.                     |\n|    409 | Organization already exists      | You tried to create more than one organization for the Google Cloud project. You can only create one organization per project.                                      |\n|    409 | Org proposed_organization_ID already exists  | You tried to create an organization that has the same ID as one that already exists. Organization IDs must be unique across all hybrid customers. Resubmit with a new proposed organization ID; for example, append a numeric value to the end of the previous ID that you tried. |\n## Get organization information\nYou can get a list of all organizations that your account has access to, or you can get  details about a specific organization by its ID. To perform these actions, you use the [organizations API](/apigee/docs/reference/apis/apigee/rest/v1/organizations) .\n**To get a list of all organizations:** \nSend a `GET` request (with no body) to the following [List organizations API](/apigee/docs/reference/apis/apigee/rest/v1/organizations/list) endpoint:\n```\nhttps://apigee.googleapis.com/v1/organizations\n```\nFor example:\n```\ncurl -H \"Authorization: Bearer $TOKEN\" \"https://apigee.googleapis.com/v1/organizations\"\n```\nThe response to your request contains an array of all hybrid-enabled organizations that  you have access to, in JSON format.\nThe following example shows a response with a single organization, \"my-org-42\":\n```\n{\u00a0 \"organizations\": [\u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \"organization\": \"my-org-42\",\u00a0 \u00a0 \u00a0 \"projectIds\": [\u00a0 \u00a0 \u00a0 \u00a0 \"my-project\"\u00a0 \u00a0 \u00a0 ]\u00a0 \u00a0 }\u00a0 ]}\n``` **To get details about a single organization:** \nSend a `GET` request (with no body) to the following [Get organizations API](/apigee/docs/reference/apis/apigee/rest/v1/organizations/get) endpoint:\n```\nhttps://apigee.googleapis.com/v1/organizations/organization_ID\n```\nThe following example gets details about the \"my-org-42\" organization:\n```\ncurl -H \"Authorization: Bearer $TOKEN\"\n \"https://apigee.googleapis.com/v1/organizations/my-org-42\"\n```\nThe response to your request contains details about the specified organization in JSON  format.\nThe following example shows a response with details about the \"my-org-42\" organization:\n```\n{\u00a0 \"name\": \"my-org-42\",\u00a0 \"createdAt\": \"1572550611\",\u00a0 \"lastModifiedAt\": \"1572550611\",\u00a0 \"environments\": [\u00a0 \u00a0 \"my-environment\"\u00a0 ],\u00a0 \"analyticsRegion\": \"us-east1\"}\n```\n## Next step\nstepper_buttons is defined in localvars Iterate over all the buttons in the data dictionary If the button's step matches the current step in the process, make the button disabled [1](/apigee/docs/hybrid/v1.1/precog-gcpaccount) If the button's step matches the current step in the process, make the button disabled [2](/apigee/docs/hybrid/v1.1/precog-gcpproject) If the button's step matches the current step in the process, make the button disabled [3](/apigee/docs/hybrid/v1.1/precog-enableapi) If the button's step matches the current step in the process, make the button disabled If the button's step matches the next step [4](/apigee/docs/hybrid/v1.1/precog-provision) If the button's step matches the current step in the process, make the button disabled In all other cases (previous buttons or future buttons (after the next one), make them links [(NEXT) Step 5: Add an environment](/apigee/docs/hybrid/v1.1/precog-add-environment)", "guide": "Apigee"}