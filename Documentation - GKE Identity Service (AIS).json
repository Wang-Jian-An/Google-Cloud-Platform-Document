{"title": "Documentation - GKE Identity Service (AIS)", "url": "https://cloud.google.com/distributed-cloud/hosted/docs/latest/gdch/overview", "abstract": "# Documentation - GKE Identity Service (AIS)\n| 0     | 1             |\n|:-------------------|:---------------------------------------------------|\n| Workload location | Root and organization workloads     |\n| Audit log source | GKE Identity Service        |\n| Audited operations | Revoke or create a login token Create an STS token |\n", "content": "## Revoke or create a login token\n| ('Fields in the log entry that contain audit information', 'Audit metadata') | ('Fields in the log entry that contain audit information', 'Audit field name') | ('Fields in the log entry that contain audit information', 'Value')                           |\n|:-------------------------------------------------------------------------------|:---------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| User or service identity              | payload.user                  | For example, \"payload\":{ \"user\":\"fop-infrastructure-operator@example.com\" }                         |\n| Target (Fields and values that call the API)         | resource                   | \"resource\":\"login_token\"                                      |\n| Action (Fields containing the performed operation)        | operation                  | \"operation\":\"revoke\"                                       |\n| Event timestamp                | metadata.timestamp                | For example, \"metadata\":{ \"timestamp\":\"2023-01-13T20:04:30.529916149+00:00\" }                        |\n| Source of action                | payload.issuer                 | For example, \"payload\":{ \"issuer\":\"fake-oidc-provider\" }                             |\n| Outcome                  | description                  | \"description\":\"Revoked Login Token '84518e03-396a-425d-93ac-5ff1e1c993f8' which was previously issued to user 'fop-infrastructure-operator@example.com' due to a web logout\" |\n| Other fields                 | Not applicable                 | Not applicable                                        |\n**Example log**\n```\n{\u00a0 \"description\":\"Revoked Login Token '84518e03-396a-425d-93ac-5ff1e1c993f8' which was previously issued to user 'fop-infrastructure-operator@example.com' due to a web logout\",\u00a0 \"id\":\"55f2ae33-d229-4057-aa1f-d62349281e9c\",\u00a0 \"_gdch_service_tenant\":\"platform-obs\",\u00a0 \"resource\":\"login_token\",\u00a0 \"_gdch_tenant_id\":\"platform-obs\",\u00a0 \"payload\":{\u00a0 \u00a0 \"id\":\"84518e03-396a-425d-93ac-5ff1e1c993f8\",\u00a0 \u00a0 \"expirationTime\":\"2023-01-14T08:03:33.413710266+00:00\",\u00a0 \u00a0 \"user\":\"fop-infrastructure-operator@example.com\",\u00a0 \u00a0 \"groups\":[\"\"],\u00a0 \u00a0 \"issuer\":\"fake-oidc-provider\"\u00a0 \u00a0 },\u00a0 \"_gdch_service_name\":\"ais\",\u00a0 \"_gdch_namespace\":\"anthos-identity-service\",\u00a0 \"operation\":\"revoke\",\u00a0 \"metadata\":{\u00a0 \u00a0 \"userAgent\":\"\",\u00a0 \u00a0 \"timestamp\":\"2023-01-13T20:04:30.529916149+00:00\"\u00a0 \u00a0 },\u00a0 \"_gdch_org_name\":\"UNKNOWN\",\u00a0 \"_gdch_org_id\":\"UNKNOWN\",\u00a0 \"_gdch_cluster\":\"org-1-admin\",\u00a0 \"_gdch_fluentbit_pod\":\"anthos-audit-logs-forwarder-nhbwb\"}\n```\n## Create an STS token\n| ('Fields in the log entry that contain audit information', 'Audit metadata') | ('Fields in the log entry that contain audit information', 'Audit field name') | ('Fields in the log entry that contain audit information', 'Value') |\n|:-------------------------------------------------------------------------------|:---------------------------------------------------------------------------------|:----------------------------------------------------------------------|\n| User or service identity              | identity                   | For example, \"identity\":\"fop-shengjiang\"        |\n| Target (Fields and values that call the API)         | resource                   | \"resource\":\"AIS STS token\"           |\n| Action (Fields containing the performed operation)        | action                   | \"action\":\"Create\"              |\n| Event timestamp                | time                    | For example, \"time\":\"2022-11-22T18:31:37.084205362+00:00\"    |\n| Source of action                | userAgent                  | For example, \"userAgent\":\"Go-http-client/2.0\"       |\n| Outcome                  | response                   | For example, \"response\":\"Success\"          |\n| Other fields                 | Not applicable                 | Not applicable              |\n**Example log**\n```\n{\u00a0 \"action\":\"Create\",\u00a0 \"auditID\":\"vwWq8fQ-o9RTopgcZtAC_psm1aYyMKxkv47GOkdU\",\u00a0 \"description\":\"An AIS STS token is minted for fop-shengjiang (from fake-oidc-provider) and will be valid for 11h59m49.438314611s\",\u00a0 \"resource\":\"AIS STS token\",\u00a0 \"response\":\"Success\",\u00a0 \"time\":\"2022-11-22T18:31:37.084205362+00:00\",\u00a0 \"user\":{\u00a0 \u00a0 \"groups\":[\u00a0 \u00a0 \u00a0 \"group-claim-1\",\u00a0 \u00a0 \u00a0 \"group-claim-2\"\u00a0 \u00a0 \u00a0 ],\u00a0 \u00a0 \"identity\":\"fop-shengjiang\",\u00a0 \u00a0 \"issuer\":\"fake-oidc-provider\"\u00a0 \u00a0 },\u00a0 \"userAgent\":\"Go-http-client/2.0\"}\n```", "guide": "Documentation"}