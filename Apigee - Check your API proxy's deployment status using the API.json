{"title": "Apigee - Check your API proxy's deployment status using the API", "url": "https://cloud.google.com/apigee/docs/api-platform/get-started/what-apigee", "abstract": "# Apigee - Check your API proxy's deployment status using the API\nYou are currently viewing version 1.1 of the Apigee hybrid documentation. **This version is end of life.** You should upgrade to a newer version. For more information, see [Supported versions](/apigee/docs/hybrid/supported-platforms#supported-versions) .\nThis section describes how to check the deployment status of an API proxy using the [Apigee APIs](/apigee/docs/reference/apis/apigee/rest) .\n- Deploy a test API proxy as explained in [Create and deploy a new API proxy](/apigee/docs/hybrid/v1.1/test-new-proxy) .\n- Locate the JSON file with the Apigee Organization Admin service account key.  This service account and key was created in [Enable synchronizer access](/apigee/docs/hybrid/v1.1/install-apply-hybrid#enable-synchronizer-access) .\n- Execute these two commands to get a token:```\nexport GOOGLE_APPLICATION_CREDENTIALS=org-admin-service-account-fileexport TOKEN=$(gcloud auth application-default print-access-token)\n```Where is the path on your system to the service  account key you downloaded with the **Apigee Organization Admin** role.\n- Call the revisions API, with the following parts:- **Base URL:** `https://apigee.googleapis.com/v1`\n- **Endpoint URL:** `/organizations/my-organization/environments/test/apis/myproxy/revisions/1/deployments`\n- **Protocol:** `HTTPS`\n- **Method:** `GET`\n- **Headers:** `\"Authorization: Bearer $TOKEN\"`\nThe following example calls the deployment revisions API with these settings using `curl` :```\ncurl \"https://apigee.googleapis.com/v1/organizations/my-organization/environments/test/apis/myproxy/revisions/1/deployments\" \\\n-X GET -H \"Authorization: Bearer $TOKEN\"\n```You should receive a response similar to the following:```\n{\n \"deployments\": [ {\n  \"environment\": \"test\",\n  \"apiProxy\": \"myproxy\",\n  \"revision\": \"1\",\n  \"deployStartTime\": \"1560782439002\",\n  \"pods\": [  {\n   \"podName\": \"apigee-runtime-my-organization-test-blue-56b642fv429v\",\n   \"appVersion\": \"self\",\n   \"deploymentStatusTime\": \"1560787671389\",\n   \"deploymentStatus\": \"deployed\",\n   \"statusCode\": \"200\",\n   \"statusCodeDetails\": \"Deployment Success\",\n   \"deploymentTime\": \"1560782471370\",\n   \"podStatus\": \"active\",\n   \"podStatusTime\": \"1560787671389\"\n  },\n  {\n   \"podName\": \"apigee-runtime-my-organization-test-blue-564422f7dmwj\",\n   \"appVersion\": \"self\",\n   \"deploymentStatusTime\": \"1560787670121\",\n   \"deploymentStatus\": \"deployed\",\n   \"statusCode\": \"200\",\n   \"statusCodeDetails\": \"Deployment Success\",\n   \"deploymentTime\": \"1560782485204\",\n   \"podStatus\": \"active\",\n   \"podStatusTime\": \"1560787670121\"\n  }\n  ],\n  \"basePath\": \"/\"\n }\n ]\n}\n```This example response shows the API proxy's status on 2 pods. The deployment status is `deployed` on both pods. response might show the deployment status of you API proxy on fewer or more pods, depending on  your cluster's configuration.If you get an empty response or an error, check that:- You used the correct base URL. Note that the hybrid base URL is not the same as the   Edge API's base URL. Use`https://apigee.googleapis.com/v1`.\n- You used the correct endpoint URL. Note that the revision is \"1\" and the endpoint is`/organizations/my_organization/environments/test/apis/myproxy/revisions/1/deployments`. If you   specify a revision that doesn't exist, the request results in an empty response like the   following:```\n{ }\n```\n- You have permissions to access the organization that you specify in the request.\n- Your token has not expired. If it has, regenerate a new one as described in [Obtain an OAuth 2.0 access token](/apigee/docs/api-platform/get-started/api-get-started#oauth20) .\n- You wrapped the`\"Authorization: Bearer $TOKEN\"`header in quotes", "content": ".", "guide": "Apigee"}