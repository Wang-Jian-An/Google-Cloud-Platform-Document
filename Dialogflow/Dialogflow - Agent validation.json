{"title": "Dialogflow - Agent validation", "url": "https://cloud.google.com/dialogflow/es/docs/agents-validation", "abstract": "# Dialogflow - Agent validation\nAs discussed on the [Agent design](/dialogflow/docs/agents-design) page, the design of your agent can greatly influence the quality of your agent. To help agent designers create high-quality agents, Dialogflow provides a validation feature. Agent validation results are available automatically whenever agent training is performed and completed. You can access the results of validation from either the Dialogflow Console or the API.\nThe validation results are informational only. They provide a list of errors that you should correct to improve the quality and performance of your agent. If your agent has errors, you can choose to ignore them and launch your agent. Agent validation does not affect the behavior of an agent in any way.\nHere are some example results that you might find:\n- Intent has training phrases which are too similar.\n- Intent contains a parameter that is not used in enough training phrases.\n- There are no negative examples for the fallback intent.\n- This text is annotated in some training phrases but not others.", "content": "## Enable and disable automatic validation\nBy default, agent validation is automatically performed whenever the agent is trained. You can enable and disable this setting:\n- Go to the [Dialogflow ES Console](https://dialogflow.cloud.google.com) .\n- Select your agent.\n- Click the settingsicon next to the agent name.\n- Select the **ML Settings** tab.\n- Toggle the **Agent Validation** setting on (default) or off.\n## Agent validation page\nTo access the validation data for your agent:\n- Go to the [Dialogflow ES Console](https://dialogflow.cloud.google.com) .\n- Select your agent.\n- Click **Validation** in the [sidebar menu](/dialogflow/docs/console#console_interface_layout) .\n## Validation results for intents and entities\nWhen you visit either the intents list or the entities list pages, any intents or entities with validation errors show an error indicator next to the name.\nWhen you visit a page for a specific intent or entity that has validation errors, an error indicator is shown near the **Save** button.\nClicking this button shows a list of errors for the intent or entity. By default, only errors with a severity of `CRITICAL` or `ERROR` are shown. You can toggle the types of severities to also show `WARNING` and `INFO` .\nYou may also see error indicators for specific training phrases and parameters, and you can hover over these indicators to see the details.\n## Validation results for versions and environments\nWhen viewing [versions and environments](/dialogflow/docs/agents-versions) , each agent version may have unique validation errors. If any errors are present, the validation icon appears next to the version.\nClicking the icon will show the details.\n## Validation results with the API\nIn most cases, you will view validation results using the Dialogflow Console. However, you can access this data from the API as well.\nCall the\n`getValidationResult`\nmethod on the\n [Agents](/dialogflow/docs/reference/common-types#agents) \ntype.\nBefore using any of the request data, make the following replacements:- : your Google Cloud project ID\nHTTP method and URL:\n```\nGET https://dialogflow.googleapis.com/v2/projects/PROJECT_ID/agent/validationResult?languageCode=en\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"validationErrors\": [ {\n  \"severity\": \"ERROR\",\n  \"entries\": [  \"projects/my-project/agent/intents/58b44b2d-4967-4a81-b017-12623dcd5d28/parameters/bf6fdf55-b862-4101-b5b1-36f1423629d0\"\n  ],\n  \"errorMessage\": \"Parameter 'test' has an empty value.\"\n },\n {\n  \"severity\": \"WARNING\",\n  \"entries\": [  \"projects/my-project/agent/intents/271e3808-3c91-4e6b-89e8-47951abcec8d\"\n  ],\n  \"errorMessage\": \"Intent 'app.current.update' does not have enough unique training phrases. Consider adding more different examples.\"\n },\n {\n  \"severity\": \"ERROR\",\n  \"entries\": [  \"projects/my-project/agent/intents/26e64b1b-eaa7-4ce2-be46-631a501fccbe/trainingPhrases/a650375e-083c-4bb5-9794-ba9453e51282\",\n  \"projects/my-project/agent/intents/58b44b2d-4967-4a81-b017-12623dcd5d28/trainingPhrases/1d947780-22d3-4f80-8d7a-3f86efbf0be3\"\n  ],\n  \"errorMessage\": \"Multiple intents share training phrases which are too similar:\\n - Intent 'app.notifications.open': training phrase 'open allo notifications settings'\\n - Intent 'app.current.notifications.open': training phrase 'open notifications settings'\"\n },\n ]\n}\n```\n## Severity States\nValidation can show the following severity states:\n| Severity    | Description                     |\n|:---------------------|:--------------------------------------------------------------------------------------------|\n| INFO     | The agent doesn't follow the best practice.             |\n| WARNING    | The agent might not behave as expected.              |\n| ERROR    | The agent may experience partial failures.             |\n| CRITICAL    | The agent may completely fail.                |\n| SEVERITY_UNSPECIFIED | Not specified. This value should never be used. (This severity is possible through the API) |\n## Force validation\nAgent validation results are available automatically whenever agent training is performed and completed. To force new validation results, you can disable automatic validation, and trigger it manually. See the [Agent ML settings](/dialogflow/docs/agents-settings#ml) page on the console.\n## Handling many issues\nWhen a large number of issues are found, you should consider the following:\n- Fix issues in small batches. If there are many similar issues, fixing one issue may fix similar issues after you retrain the agent.\n- At most 5000 issues are shown at a time. If you have over 5000 issues, you may not see a count reduction until less than 5000 remain.", "guide": "Dialogflow"}