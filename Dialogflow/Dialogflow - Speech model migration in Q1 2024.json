{"title": "Dialogflow - Speech model migration in Q1 2024", "url": "https://cloud.google.com/dialogflow/cx/docs/concept/speech-model-migration", "abstract": "# Dialogflow - Speech model migration in Q1 2024\n**Note:** This migration doesn't affect you if you don't send audio to your Dialogflow CX or Dialogflow ES agents with the following language tags: `en` , `en-us` , `en-au` , `en-gb` , `en-in` , `de` , `es` , `es-es` , `es-us` , `fr` , `fr-ca` , `fr-fr` , `it` , `ja` , `nl` , `pt-br` .\nFrom March 18 to April 15, 2024, for certain [language tag](/dialogflow/cx/docs/reference/language) and speech setting combinations, the Dialogflow CX and Dialogflow ES traffic with audio will gradually route away from the classic Speech-to-Text models behind the `command_and_search` , `default` , `phone_call` , and `video` model identifiers to the new conformer-based [speechmodels](/speech-to-text/docs/transcription-model) . As the redirection will be internal only, the current model identifiers and code will remain valid and continue to serve traffic.\nThe tables in the [Migration for en and en-uslanguage tags](#en-en-us) and [Migration for de, en-au, en-gb, en-in, es, es-es, es-us, fr,fr-ca, fr-fr, it, ja, nl, pt-br languagetags](#non-en-en-us-affected) sections show the routing of Speech-to-Text models that will take place when the migration takes effect. If your configuration matches the language tag and the first two columns in the table, the new model identifier is listed in the third column. No change is expected for other configurations.\nSee the [Migration options](#options) section to choose the best option for you.\n", "content": "## Migration for en and en-us language tags\n| Current model identifier      | Current single_utterance setting * | Model identifier that traffic will be directed to          |\n|:-----------------------------------------------|:-------------------------------------|:-----------------------------------------------------------------------------------------|\n| command_and_search        | false        | latest_long                    |\n| command_and_search        | true         | latest_short                    |\n| default          | false        | telephony                    |\n| phone_call          | false        | telephony                    |\n| phone_call (model_variant is not USE_STANDARD) | true         | telephony_short                   |\n| video           | false        | telephony                    |\n| Unspecified         | true/false       | Model is auto-selected from among the above, based on the parameters in InputAudioConfig |\n| Symbol | Description                                      |\n|:---------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| *  | If your Dialogflow CX agent has enabled advanced timeout-based end of speech sensitivity, then the model identifier is routed assuming single_utterance is false. |\n## Migration for de, en-au, en-gb, en-in, es, es-es, es-us, fr, fr-ca, fr-fr, it, ja, nl, pt-br language tags\n| Current model identifier | Current single_utterance setting * | Model identifier that traffic will be directed to          |\n|:---------------------------|:-------------------------------------|:-----------------------------------------------------------------------------------------|\n| command_and_search   | false        | latest_long                    |\n| command_and_search   | true         | latest_short                    |\n| default     | false        | latest_long                    |\n| Unspecified    | true/false       | Model is auto-selected from among the above, based on the parameters in InputAudioConfig |\n| Symbol | Description                                      |\n|:---------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| *  | If your Dialogflow CX agent has enabled advanced timeout-based end of speech sensitivity, then the model identifier is routed assuming single_utterance is false. |\n## Migration options\nThere are three migration options: early opt-in, automatic, and temporary opt-out.\n### Opt in and migrate earlier\nTo opt in proactively, change the speech model identifier that you have been using in the [Dialogflow CXAPI](/dialogflow/cx/docs/reference/rest/v3/ConversationTurn#inputaudioconfig) and [Dialogflow ESAPI](/dialogflow/es/docs/reference/rpc/google.cloud.dialogflow.v2#inputaudioconfig) with the updated one. For Dialogflow CX, you can also change the [modelidentifier](/dialogflow/cx/docs/concept/agent#stt-model-selection) in the **Advanced speech settings** under **Speech and IVR settings** in the Dialogflow CX console.\nSpeech model specified in the API at runtime takes precedence over the speech model specified in the Dialogflow CX console. Read more about precedence in [speech models](/dialogflow/cx/docs/concept/speech-models) .\nFor partner telephony integrations, check with your telephony provider if the speech model is being set in the API. If you are using the Dialogflow CX Phone Gateway, review the speech model [limitations](/dialogflow/cx/docs/concept/integration/phone-gateway#limits) .\nMigrating your project proactively gives you time to test the models and take advantage of the improved accuracy and robustness earlier. This approach is highly recommended, especially if you are using a model that will [migrate](#en-en-us) to the new `telephony` and `telephony_short` models. Most integrations require `single_utterance = true` , so if you are not using [advanced timeout-based end of speech sensitivity](/dialogflow/cx/docs/concept/agent#advanced-end-of-speech-sensitivity) you'll likely want to use `telephony_short` or `latest_short` .\n### Migrate automatically\nTo be migrated automatically, no action is required on your part. The existing Speech-to-Text model identifiers are valid and we will shift traffic internally.\n### Opt out and migrate later\nIf you find any issues with the updated models and would like to opt out from the migration temporarily, there are two options:\n- Set the [opt_out_conformer_model_migration](/dialogflow/cx/docs/reference/rpc/google.cloud.dialogflow.cx.v3#google.cloud.dialogflow.cx.v3.InputAudioConfig.FIELDS.bool.google.cloud.dialogflow.cx.v3.InputAudioConfig.opt_out_conformer_model_migration) value to `true` for your Dialogflow CX API runtime requests. This field will work until June 2024.\n- [Raise a Google Cloud support case](/support/docs/customer-care-procedures) by April 8, 2024. When creating the support case, use the title \"Opt out from Dialogflow CX Speech-to-Text migration\" and provide your project IDs and the reason for opting out. Opt-out requests won't be accepted after April 8, 2024.\n**Important:** All temporarily opted-out projects will be migrated in June 2024. Even if you decided to temporarily opt out, consider [opting in](#opt-in) at least one of your test projects before June 2024 to test how the migration will affect your production traffic. After June 2024, no opt-out options will be available.", "guide": "Dialogflow"}