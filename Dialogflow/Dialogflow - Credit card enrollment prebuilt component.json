{"title": "Dialogflow - Credit card enrollment prebuilt component", "url": "https://cloud.google.com/dialogflow/cx/docs/concept/prebuilt-component/credit-card-enrollment", "abstract": "# Dialogflow - Credit card enrollment prebuilt component\nThe credit card enrollment [prebuilt component](/dialogflow/cx/docs/concept/prebuilt-component) allows new and existing customers to apply for a new credit card.\nThe component begins by collecting the end-user's telephone number to identify whether they are a new or existing customer. For a new user, the component will collect required details including their monthly income and category of expenses or card benefits the user is requesting. Once all required information has been collected, the component arranges a call back and provides the request number to the user.\nFor an existing customer, the component will retrieve registered user information and present available card options to the end-user based on their preferences and retrieved information including their credit score. Once the customer has selected a card option, the component will send a link to complete the enrollment procedure via registered channels including WhatsApp or SMS.\nThis component uses the [Telephone number collection](/dialogflow/cx/docs/concept/prebuilt-component/telephone-number-collection) and [Zip code collection](/dialogflow/cx/docs/concept/prebuilt-component/zip-code-collection) prebuilt components to collect and validate user details.\n", "content": "## Limitations\nIn addition to the [common prebuilt component limitations](/dialogflow/cx/docs/concept/prebuilt-component#limits) , this prebuilt component has the following limitations:\n- This component does not encrypt any data.## Sample dialogs\nThe following sample dialogs demonstrate common scenarios handled by this prebuilt component. The sample dialogs demonstrate behavior when the component is called via telephony, which triggers the Default Welcome Intent and the first agent response at the start of the conversation.\n### New user\nComponent checks whether the user is calling using a registered phone number and identifies that they are a new user. The component collects the category of card the user would like to enroll for and collects information to identify the user, including zip code and telephone number. The component then arranges a call back and gives the user the request number.\n| User input  | Agent response                                                      |\n|:-----------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| nan    | Can you please confirm if you are an existing customer of our bank?                                         |\n| I'm not   | nan                                                         |\n| nan    | We are glad that you would like to apply for a credit card with us. We have a wide range of credit cards that are suitable for you. To provide you with the best available cards, could you please state your monthly income in USD? |\n| 5000 dollars  | nan                                                         |\n| nan    | Which expenses or benefits are you interested in? We have a range of options available, like travel, fuel, and shopping.                            |\n| I like shopping | nan                                                         |\n| nan    | Your selected response falls under the shopping category. If you want to proceed further, say yes.                                 |\n| Yes    | nan                                                         |\n| nan    | Agent collects user's zip code using Zip code collection prebuilt component                                       |\n| nan    | You mentioned the zip code is 10011, is that correct?                                            |\n| Yes that's right | nan                                                         |\n| nan    | Great, we're done with collecting the zip code.                                              |\n| nan    | Agent collects user's telephone number using Telephone number collection prebuilt component                                   |\n| nan    | Got it. The number you mentioned is plus 1 6502530000, is that correct?                                        |\n| Yes    | nan                                                         |\n| nan    | Great, we're done collecting the telephone number. One of our representatives will call you back for the related cards based on your criteria. Your request number is 993835.              |\n### Existing customer\nComponent identifies registered customer using their telephone number. The component then requests information like the category and type of card the user would like to enroll for. Once this information has been confirmed, the component asks the customer to select a channel to complete their enrollment process on, and sends the link to the customer's registered channel.\n| User input           | Agent response                                                                                   |\n|:------------------------------------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| nan             | We are glad that you continue selecting our product and services. We have a wide range of credit cards that are suitable for you. Which expenses or benefits are you interested in? We have a range of options available, like travel, fuel, and shopping.                        |\n| I want a card I can use when I go on my next vacation | nan                                                                                     |\n| nan             | Your selected response falls under the travel category. If you want to proceed further, say yes.                                                              |\n| Yes             | nan                                                                                     |\n| nan             | There are 3 types of cards to suit your type of request: platinum travel card, gold travel card, classic travel card. Would you like to know information about all cards or a specific one? For example, if you are specifically looking for a classic card, please say classic card.                 |\n| Can you tell me about the platinum card?    | nan                                                                                     |\n| nan             | Sure, for a platinum travel card the annual fee is 95 dollars. Benefits include: get 10,000 bonus miles every year, earn unlimited 2x miles on all other purchases, miles are easy to earn and easy to use. You can find more information about benefits or bonuses on our website. Please confirm if you wish to enroll for the platinum travel card. |\n| Yes let's do that          | nan                                                                                     |\n| nan             | We will share a link with the enrollment procedure steps. Do you want us to share these card details with your mobile number through SMS or WhatsApp?                                                 |\n| SMS please           | nan                                                                                     |\n| nan             | Okay, we are sending the link to your registered mobile number. This action may take a few seconds. Can you please confirm if you have received the link by saying yes or no?                                           |\n| I've got it           | nan                                                                                     |\n| nan             | Great, now you can open the link and check the card enrollment details. Once the data is completed, the issuance of the new card will be initiated and sent to your current address.                                         |\n### Denial of information\nUser declines to provide information required to enroll for a credit card. The component exits with a failure message.\n| User input        | Agent response                                                      |\n|:------------------------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| nan          | Can you please confirm if you are an existing customer of our bank?                                         |\n| No I'm not        | nan                                                         |\n| nan          | We are glad that you would like to apply for a credit card with us. We have a wide range of credit cards that are suitable for you. To provide you with the best available cards, could you please state your monthly income in USD? |\n| I don't want to tell you that information | nan                                                         |\n| nan          | Thank you for calling. We're sorry, but we are unable to proceed further without the requested information at this time.                            |\n## Naming conventions\nThis prebuilt component uses the following naming conventions:\n| Feature     | Format            | Example              |\n|:--------------------------|:------------------------------------------------------|:--------------------------------------------------------------|\n| Flow      | [Component Name]          | Credit Card Enrollment          |\n| Component Specific Intent | prebuilt_components_[component_name]_[intent_name] | prebuilt_components_cc_enroll_collect_cardtype    |\n| Entity Type    | prebuilt_components_[component_name]_[entity_type] | prebuilt_components_cc_enroll_expense_category    |\n| Webhook     | prebuilt_components_[component_name]:[webhook_action] | prebuilt_components_credit_card_enrollment:get_available_card |\n## Input parameters\nInput parameters are parameters that are used to configure certain behaviors of the component. The parameters will be used by one or more conditions within the flow to determine how the component should behave. Flow-scoped parameters must be set on the start page of the component as described below. Session-scoped parameters may be set either by a calling flow, or on the start page of this component.\nThis prebuilt component accepts the following input parameters:\n| Parameter Name    | Description                               | Input Format |\n|:-----------------------------|:--------------------------------------------------------------------------------------------------------------------------------------|:---------------|\n| $session.params.auth_level | (optional) Indicates the current authentication level of the end-user.                | integer  |\n| $session.params.phone_number | (optional) End-user's phone number. If this parameter is not provided, the component will collect the phone number from the end-user. | string   |\n| $flow.max_retry_count  | Specifies the number of retries given to the end-user. The default value is 3.              | integer  |\n| $flow.currency_name   | Specifies the currency expected when collecting monthly income details. The default value is \"USD\".         | string   |\n## Output parameters\nOutput parameters are session parameters that will remain active after exiting the component. These parameters contain important information collected by the component. This prebuilt component provides values for the following output parameters:\n| Parameter Name | Description                                                                                                                                                                           | Output Format |\n|:-----------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------|\n| phone_number  | User's local phone number, without the country code, used to identify the user.                                                                                                                                                          | string   |\n| transfer_reason | This parameter indicates the reason the flow exited, if it was not successful. The returned value is one of: agent: the end-user requested a human agent at some point during the conversation. denial_of_information: the end-user declined to share information requested by the component. max_no_input: the conversation reached the maximum number of retries for no-input events. See no-input built-in events. max_no_match: the conversation reached the maximum number of retries for no-match events. See no-match built-in events. webhook_error: a webhook error occurred. See webhook.error built-in event. webhook_not_found: a webhook URL was unreachable. See webhook.error.not-found built-in event. | string   |\n## Basic setup\nTo set up this prebuilt component:\n- [Import the prebuilt component](/dialogflow/cx/docs/concept/prebuilt-component#import) .\n- Configure the provided [flexible webhooks](/dialogflow/cx/docs/concept/webhook#flexible) with configuration describing your Dialogflow-external services, see Webhook setup below.## Webhook setup\nIn order to use this component, you will need to configure the included [flexible webhooks](/dialogflow/cx/docs/concept/webhook#flexible) to retrieve needed information from your external services.\n### Get account details\nThe `prebuilt_components_credit_card_enrollment:get_account_details` webhook is used by the component to retrieve the user's account details, if an account exists.\nThe following parameters are provided by the component as inputs to the API request.\n| Parameter Name    | Description                  | Input Format |\n|:-----------------------------|:--------------------------------------------------------------------------------|:---------------|\n| $session.params.phone_number | User's local phone number, without the country code, used to identify the user. | string   |\nThe following parameters are pulled from the API response to be used by the component.\n| Parameter Name | Description               | Output Format |\n|:-----------------|:--------------------------------------------------------------------|:----------------|\n| account_count | The number of accounts associated with the registered phone number. | integer   |\n| credit_score  | The user's registered credit score.         | integer   |### Get card count\nThe `prebuilt_components_credit_card_enrollment:get_card_count` webhook is used by the component to retrieve the number of credit cards associated with a registered user's account(s).\nThe following parameters are provided by the component as inputs to the API request.\n| Parameter Name    | Description                  | Input Format |\n|:-----------------------------|:--------------------------------------------------------------------------------|:---------------|\n| $session.params.phone_number | User's local phone number, without the country code, used to identify the user. | string   |\nThe following parameters are pulled from the API response to be used by the component.\n| Parameter Name | Description                | Output Format |\n|:-----------------|:------------------------------------------------------------------------|:----------------|\n| card_count  | The total number of credit cards across a registered user's account(s). | integer   |### Get available cards\nThe `prebuilt_components_credit_card_enrollment:get_available_card` webhook is used by the component to retrieve the list of cards available to the user for a specific category based on the user's credit score.\nThe following parameters are provided by the component as inputs to the API request.\n| Parameter Name   | Description                                                 | Input Format |\n|:-----------------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:---------------|\n| $flow.expense_category | The expense category the user has selected to enroll in. Valid values are defined by the prebuilt_components_cc_enroll_expense_category custom entity. By default fuel, shopping, and travel are supported. | string   |\n| $flow.credit_score  | The user's credit score, retrieved by the component using the Get account details webhook.                             | integer  |\nThe following parameters are pulled from the API response to be used by the component.\n| Parameter Name  | Description                      | Output Format |\n|:---------------------|:-------------------------------------------------------------------------------------------------|:----------------|\n| available_card_names | List of cards available to the user, for example [\"gold shopping card\",\"classic shopping card\"]. | List (string) |\n| cards_count   | The number of cards available to the user.              | integer   |### Get selected card details\nThe `prebuilt_components_credit_card_enrollment:get_selected_card` webhook is used by the component to retrieve annual fees and benefits for the selected card.\nThe following parameters are provided by the component as inputs to the API request.\n| Parameter Name   | Description                                                 | Input Format |\n|:-----------------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:---------------|\n| $flow.card_type  | The card type the user has selected to enroll in. Valid values are defined by the prebuilt_components_cc_enroll_card_type custom entity. By default classic, gold, and platinum are supported.    | string   |\n| $flow.expense_category | The expense category the user has selected to enroll in. Valid values are defined by the prebuilt_components_cc_enroll_expense_category custom entity. By default fuel, shopping, and travel are supported. | string   |\n| $flow.credit_score  | The user's credit score, retrieved by the component using the Get account details webhook.                             | integer  |\nThe following parameters are pulled from the API response to be used by the component.\n| Parameter Name   | Description           | Output Format |\n|:-------------------------|:-----------------------------------------------------|:----------------|\n| selected_card_benefits | Information about the benefits of the selected card. | string   |\n| selected_card_annual_fee | The annual fee of the selected card.     | integer   |\n| selected_card_name  | The name of the selected card.      | string   |### Submit enrollment request\nThe `prebuilt_components_credit_card_enrollment:submit_enroll` webhook is used by the component to create a card enrollment request based on the new user's provided preferences and user details.\nThe following parameters are provided by the component as inputs to the API request.\n| Parameter Name    | Description                       | Input Format |\n|:-----------------------------|:------------------------------------------------------------------------------------------------------|:---------------|\n| $session.params.phone_number | User's local phone number, without the country code, used to identify the user.      | string   |\n| $flow.zipcode    | User's provided zip code.                    | string   |\n| $flow.monthly_salary   | User's provided monthly salary.                  | integer  |\n| $flow.currency_name   | Currency of the monthly salary, configured in the component's input parameters. See input parameters. | string   |\nThe following parameters are pulled from the API response to be used by the component.\n| Parameter Name | Description                 | Output Format |\n|:-----------------|:-------------------------------------------------------------------------------|:----------------|\n| request_number | Request number for the successful registration of the card enrollment request. | integer   |### Send message\nThe `prebuilt_components_credit_card_enrollment:send_message` webhook is used by the component to send a message containing a link to complete credit card enrollment for existing customers.\nThe following parameters are provided by the component as inputs to the API request.\n| Parameter Name    | Description                                             | Input Format |\n|:-----------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:---------------|\n| $session.params.phone_number | User's local phone number, without the country code, used to identify the user.                            | string   |\n| $flow.channel    | The channel the user has selected to receive the message on. Valid values are defined by the prebuilt_components_cc_enroll_channel custom entity. By default SMS and WhatsApp are supported. | string   |\n| $flow.selected_card_name  | List of cards selected by the user, for example [\"gold shopping card\",\"classic shopping card\"].                        | List (string) |\nThe following parameters are pulled from the API response to be used by the component.\n| Parameter Name | Description                    | Output Format |\n|:-----------------|:------------------------------------------------------------------------------------------|:----------------|\n| message_sent  | Indicates whether the message was successfully sent to the channel specified by the user. | boolean   |### Complete\nYour agent and its webhooks should now be set up and ready to test.", "guide": "Dialogflow"}