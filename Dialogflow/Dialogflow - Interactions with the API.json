{"title": "Dialogflow - Interactions with the API", "url": "https://cloud.google.com/dialogflow/vertex/docs/quick/api?hl=zh-cn", "abstract": "# Dialogflow - Interactions with the API\nFor each conversational turn, an takes place. During an interaction, an end-user sends input to the playbook agent and the playbook agent sends a response. You can use the Vertex AI Conversation API to interact with the playbook agent at runtime.\n**Note:** In upcoming changes, Vertex AI Conversation will have its own API.\n", "content": "## Before you begin\nYou should do the following before reading this guide:\n- Create a new playbook agent or continue using the playbook agent you created in [Create a playbook agent app](/dialogflow/vertex/docs/quick/create-application) .## Collect IDs\nThe samples below require several IDs as input. To find your project ID, region ID, and app ID:\n- Go to the Vertex AI Conversation console: [Vertex AI Conversation console](https://console.cloud.google.com/gen-app-builder/) \n- Your project ID is shown at the top of the console.\n- The **Location** column shows region IDs.\n- Select an app.\n- The browser URL path segment after `agents/` contains the playbook agent ID.\nYou also need a session ID. A [session](/dialogflow/cx/docs/concept/session) represents a conversation between a playbook agent and an end-user. You create a unique session ID at the beginning of a conversation and use it for each turn of the conversation. For the purpose of trying the API, you can use any string ID that is at most 36 bytes, like `test-session-123` .\n## Call detect intent\nThe following samples call the `Sessions.detectIntent` method.\nBefore using any of the request data, make the following replacements:- : your Google Cloud project ID\n- : your playbook agent ID, which corresponds to the Dialogflow agent ID\n- : your region ID\n- : your session ID\n- : the end-user input, for example: I want to buy a shirt\nHTTP method and URL:\n```\nPOST https://REGION_ID-dialogflow.googleapis.com/v3/projects/PROJECT_ID/locations/REGION_ID/agents/AGENT_ID/sessions/SESSION_ID:detectIntent\n```\nRequest JSON body:\n```\n{\n \"queryInput\": {\n \"text\": {\n  \"text\": \"END_USER_INPUT\"\n },\n \"languageCode\": \"en\"\n },\n \"queryParams\": {\n \"timeZone\": \"America/Los_Angeles\"\n }\n}\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"responseId\": \"a6cd27b0-5eaa-4f93-aa6e-11faf97dbb63\",\n \"queryResult\": {\n \"text\": \"I want to buy a shirt\",\n \"languageCode\": \"en\",\n \"responseMessages\": [  {\n  \"text\": {\n   \"text\": [   \"Great! I can help you with that. We have a wide variety of shirts to choose from. What size and color would you like?\"\n   ]\n  }\n  }\n ],\n \"intentDetectionConfidence\": 1,\n \"diagnosticInfo\": {\n  \"Session Id\": \"123\",\n  \"Response Id\": \"a6cd27b0-5eaa-4f93-aa6e-11faf97dbb63\"\n },\n \"match\": {\n  \"confidence\": 1\n },\n \"advancedSettings\": {\n  \"loggingSettings\": {}\n }\n },\n \"responseType\": \"FINAL\"\n}\n```", "guide": "Dialogflow"}