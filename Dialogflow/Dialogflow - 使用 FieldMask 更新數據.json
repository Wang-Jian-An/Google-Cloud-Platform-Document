{"title": "Dialogflow - \u4f7f\u7528 FieldMask \u66f4\u65b0\u6578\u64da", "url": "https://cloud.google.com/dialogflow/es/docs/how/field-mask?hl=zh-cn", "abstract": "# Dialogflow - \u4f7f\u7528 FieldMask \u66f4\u65b0\u6578\u64da\n\u4f7f\u7528 API \u66f4\u65b0\u4ee3\u7406\u6578\u64da\u6642\uff0c\u60a8\u53ef\u4ee5\u9078\u64c7\u8986\u84cb\u6574\u500b\u6578\u64da\u985e\u578b\u6216\u50c5\u8986\u84cb\u6578\u64da\u985e\u578b\u7684\u7279\u5b9a\u5b57\u6bb5\u3002\u901a\u5e38\u60c5\u6cc1\u4e0b\uff0c\u6700\u597d\u8986\u84cb\u7279\u5b9a\u5b57\u6bb5\uff0c\u4ee5\u514d\u56e0\u610f\u5916\u8986\u84cb\u6240\u6709\u6578\u64da\u3002\u5982\u8981\u8986\u84cb\u7279\u5b9a\u5b57\u6bb5\uff0c\u8acb\u7232\u66f4\u65b0\u8acb\u6c42\u63d0\u4f9b [FieldMask](https://developers.google.com/protocol-buffers/docs/reference/google.protobuf?hl=zh-cn#fieldmask) \u3002\n\u4ee5\u4e0b\u793a\u4f8b\u5c55\u793a\u77ad\u5982\u4f55\u63d0\u4f9b `FieldMask` \u4ee5\u66f4\u65b0 [\u610f\u5716](https://cloud.google.com/dialogflow/docs/reference/common-types?hl=zh-cn#intents) \u985e\u578b\u7684\u986f\u793a\u540d\u7a31\u3002\n\u7232 `patch` \u65b9\u6cd5\u63d0\u4f9b `updateMask` \u7db2\u5740\u67e5\u8a62\u53c3\u6578\u3002\u4f8b\u5982\uff1a\n```\n?updateMask=displayName\n```\u8981\u5411 Dialogflow \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/java-docs-samples/blob/HEAD/dialogflow/snippets/src/main/java/com/example/dialogflow/UpdateIntent.java) \n```\nimport com.google.cloud.dialogflow.v2.Intent;import com.google.cloud.dialogflow.v2.Intent.Builder;import com.google.cloud.dialogflow.v2.IntentsClient;import com.google.cloud.dialogflow.v2.UpdateIntentRequest;import com.google.protobuf.FieldMask;import java.io.IOException;public class UpdateIntent {\u00a0 public static void main(String[] args) throws IOException {\u00a0 \u00a0 // TODO(developer): Replace these variables before running the sample.\u00a0 \u00a0 String projectId = \"my-project-id\";\u00a0 \u00a0 String intentId = \"my-intent-id\";\u00a0 \u00a0 String location = \"my-location\";\u00a0 \u00a0 String displayName = \"my-display-name\";\u00a0 \u00a0 updateIntent(projectId, intentId, location, displayName);\u00a0 }\u00a0 // DialogFlow API Update Intent sample.\u00a0 public static void updateIntent(\u00a0 \u00a0 \u00a0 String projectId, String intentId, String location, String displayName) throws IOException {\u00a0 \u00a0 try (IntentsClient client = IntentsClient.create()) {\u00a0 \u00a0 \u00a0 String intentPath =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"projects/\" + projectId + \"/locations/\" + location + \"/agent/intents/\" + intentId;\u00a0 \u00a0 \u00a0 Builder intentBuilder = client.getIntent(intentPath).toBuilder();\u00a0 \u00a0 \u00a0 intentBuilder.setDisplayName(displayName);\u00a0 \u00a0 \u00a0 FieldMask fieldMask = FieldMask.newBuilder().addPaths(\"display_name\").build();\u00a0 \u00a0 \u00a0 Intent intent = intentBuilder.build();\u00a0 \u00a0 \u00a0 UpdateIntentRequest request =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 UpdateIntentRequest.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setIntent(intent)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setLanguageCode(\"en\")\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setUpdateMask(fieldMask)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 \u00a0 // Make API request to update intent using fieldmask\u00a0 \u00a0 \u00a0 Intent response = client.updateIntent(request);\u00a0 \u00a0 \u00a0 System.out.println(response);\u00a0 \u00a0 }\u00a0 }}\n```\u8981\u5411 Dialogflow \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/nodejs-docs-samples/blob/HEAD/dialogflow/update-intent.js) \n```\nconst {IntentsClient} = require('@google-cloud/dialogflow');const intentClient = new IntentsClient();const agentPath = intentClient.projectAgentPath(projectId);const intentPath = agentPath + '/intents/' + intentId;const intent = await intentClient.getIntent({name: intentPath});intent[0].displayName = displayName;const updateMask = {\u00a0 paths: ['display_name'],};const updateIntentRequest = {\u00a0 intent: intent[0],\u00a0 updateMask: updateMask,\u00a0 languageCode: 'en',};//Send the request for update the intent.const result = await intentClient.updateIntent(updateIntentRequest);console.log(result);\n```\u8981\u5411 Dialogflow \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/python-docs-samples/blob/HEAD/dialogflow/update_intent.py) \n```\nfrom google.cloud.dialogflow_v2 import IntentsClientfrom google.protobuf import field_mask_pb2def update_intent(project_id, intent_id, display_name):\u00a0 \u00a0 intents_client = IntentsClient()\u00a0 \u00a0 intent_name = intents_client.intent_path(project_id, intent_id)\u00a0 \u00a0 intent = intents_client.get_intent(request={\"name\": intent_name})\u00a0 \u00a0 intent.display_name = display_name\u00a0 \u00a0 update_mask = field_mask_pb2.FieldMask(paths=[\"display_name\"])\u00a0 \u00a0 response = intents_client.update_intent(intent=intent, update_mask=update_mask)\u00a0 \u00a0 return response\n``", "content": "`", "guide": "Dialogflow"}