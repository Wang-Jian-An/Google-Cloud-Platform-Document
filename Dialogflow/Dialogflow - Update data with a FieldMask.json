{"title": "Dialogflow - Update data with a FieldMask", "url": "https://cloud.google.com/dialogflow/cx/docs/how/field-mask", "abstract": "# Dialogflow - Update data with a FieldMask\nWhen updating agent data with the API, you can choose to overwrite the entire data type or to overwrite only specific fields of the data type. It is usually best to overwrite specific fields, so you avoid accidentally overwriting all of your data. To overwrite specific fields, supply a [FieldMask](https://developers.google.com/protocol-buffers/docs/reference/google.protobuf#fieldmask) to your update request.\nThe following examples show how to supply a `FieldMask` to update the display name for an `Intent` type.\nBefore using any of the request data, make the following replacements:- : your Google Cloud project ID\n- : your agent ID\n- : your [region ID](/dialogflow/cx/docs/concept/region) \n- : your intent ID\n- : your desired display name\nHTTP method and URL:\n```\nPATCH https://REGION_ID-dialogflow.googleapis.com/v3/projects/PROJECT_ID/locations/REGION_ID/agents/AGENT_ID/intents/INTENT_ID?updateMask=displayName\n```\nRequest JSON body:\n```\n{\n \"displayName\": \"DISPLAY_NAME\"\n}\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"name\": \"projects/PROJECT_ID/locations/REGION_ID/agents/AGENT_ID/intents/INTENT_ID\",\n \"displayName\": \"DISPLAY_NAME\",\n ...\n}\n```\nTo authenticate to Dialogflow, set up Application Default Credentials.  For more information, see [Set up authentication for a local development environment](/docs/authentication/provide-credentials-adc#local-dev) .\n [View on GitHub](https://github.com/GoogleCloudPlatform/java-docs-samples/blob/HEAD/dialogflow-cx/src/main/java/dialogflow/cx/UpdateIntent.java) \n```\nimport com.google.cloud.dialogflow.cx.v3.Intent;import com.google.cloud.dialogflow.cx.v3.Intent.Builder;import com.google.cloud.dialogflow.cx.v3.IntentsClient;import com.google.cloud.dialogflow.cx.v3.UpdateIntentRequest;import com.google.protobuf.FieldMask;import java.io.IOException;public class UpdateIntent {\u00a0 public static void main(String[] args) throws IOException {\u00a0 \u00a0 // TODO(developer): Replace these variables before running the sample.\u00a0 \u00a0 String projectId = \"my-project-id\";\u00a0 \u00a0 String agentId = \"my-agent-id\";\u00a0 \u00a0 String intentId = \"my-intent-id\";\u00a0 \u00a0 String location = \"my-location\";\u00a0 \u00a0 String displayName = \"my-display-name\";\u00a0 \u00a0 updateIntent(projectId, agentId, intentId, location, displayName);\u00a0 }\u00a0 // DialogFlow API Update Intent sample.\u00a0 public static void updateIntent(\u00a0 \u00a0 \u00a0 String projectId, String agentId, String intentId, String location, String displayName)\u00a0 \u00a0 \u00a0 throws IOException {\u00a0 \u00a0 // Note: close() needs to be called on the IntentsClient object to clean up resources\u00a0 \u00a0 // such as threads. In the example below, try-with-resources is used,\u00a0 \u00a0 // which automatically calls close().\u00a0 \u00a0 try (IntentsClient client = IntentsClient.create()) {\u00a0 \u00a0 \u00a0 String intentPath =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"projects/\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 + projectId\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 + \"/locations/\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 + location\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 + \"/agents/\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 + agentId\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 + \"/intents/\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 + intentId;\u00a0 \u00a0 \u00a0 Builder intentBuilder = client.getIntent(intentPath).toBuilder();\u00a0 \u00a0 \u00a0 intentBuilder.setDisplayName(displayName);\u00a0 \u00a0 \u00a0 FieldMask fieldMask = FieldMask.newBuilder().addPaths(\"display_name\").build();\u00a0 \u00a0 \u00a0 Intent intent = intentBuilder.build();\u00a0 \u00a0 \u00a0 UpdateIntentRequest request =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 UpdateIntentRequest.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setIntent(intent)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setLanguageCode(\"en\")\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setUpdateMask(fieldMask)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 \u00a0 // Make API request to update intent using fieldmask\u00a0 \u00a0 \u00a0 Intent response = client.updateIntent(request);\u00a0 \u00a0 \u00a0 System.out.println(response);\u00a0 \u00a0 }\u00a0 }}\n```To authenticate to Dialogflow, set up Application Default Credentials.  For more information, see [Set up authentication for a local development environment](/docs/authentication/provide-credentials-adc#local-dev) .\n [View on GitHub](https://github.com/GoogleCloudPlatform/nodejs-docs-samples/blob/HEAD/dialogflow-cx/update-intent.js) \n```\nconst {IntentsClient} = require('@google-cloud/dialogflow-cx');const intentClient = new IntentsClient();//TODO(developer): Uncomment these variables before running the sample.// \u00a0const projectId = 'your-project-id';// \u00a0const agentId = 'your-agent-id';// \u00a0const intentId = 'your-intent-id';// \u00a0const location = 'your-location';// \u00a0const displayName = 'your-display-name';async function updateIntent() {\u00a0 const agentPath = intentClient.projectPath(projectId);\u00a0 const intentPath = `${agentPath}/locations/${location}/agents/${agentId}/intents/${intentId}`;\u00a0 //Gets the intent from intentPath\u00a0 const intent = await intentClient.getIntent({name: intentPath});\u00a0 intent[0].displayName = displayName;\u00a0 //Specifies what is being updated\u00a0 const updateMask = {\u00a0 \u00a0 paths: ['display_name'],\u00a0 };\u00a0 const updateIntentRequest = {\u00a0 \u00a0 intent: intent[0],\u00a0 \u00a0 updateMask,\u00a0 \u00a0 languageCode: 'en',\u00a0 };\u00a0 //Send the request for update the intent.\u00a0 const result = await intentClient.updateIntent(updateIntentRequest);\u00a0 console.log(result);}updateIntent();\n```To authenticate to Dialogflow, set up Application Default Credentials.  For more information, see [Set up authentication for a local development environment](/docs/authentication/provide-credentials-adc#local-dev) .\n [View on GitHub](https://github.com/GoogleCloudPlatform/python-docs-samples/blob/HEAD/dialogflow-cx/update_intent.py) \n```\nfrom google.cloud.dialogflowcx_v3.services.intents import IntentsClientfrom google.protobuf import field_mask_pb2def update_intent(project_id, agent_id, intent_id, location, displayName):\u00a0 \u00a0 intents_client = IntentsClient()\u00a0 \u00a0 intent_name = intents_client.intent_path(project_id, location, agent_id, intent_id)\u00a0 \u00a0 intent = intents_client.get_intent(request={\"name\": intent_name})\u00a0 \u00a0 intent.display_name = displayName\u00a0 \u00a0 update_mask = field_mask_pb2.FieldMask(paths=[\"display_name\"])\u00a0 \u00a0 response = intents_client.update_intent(intent=intent, update_mask=update_mask)\u00a0 \u00a0 return response\n``", "content": "`", "guide": "Dialogflow"}