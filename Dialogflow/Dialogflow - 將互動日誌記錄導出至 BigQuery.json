{"title": "Dialogflow - \u5c07\u4e92\u52d5\u65e5\u8a8c\u8a18\u9304\u5c0e\u51fa\u81f3 BigQuery", "url": "https://cloud.google.com/dialogflow/cx/docs/concept/export-bq?hl=zh-cn", "abstract": "# Dialogflow - \u5c07\u4e92\u52d5\u65e5\u8a8c\u8a18\u9304\u5c0e\u51fa\u81f3 BigQuery\n\u60a8\u53ef\u4ee5\u5c07 [\u4e92\u52d5\u65e5\u8a8c\u8a18\u9304](https://cloud.google.com/dialogflow/cx/docs/concept/agent?hl=zh-cn#settings-general) \u5c0e\u51fa\u5230 [BigQuery](https://cloud.google.com/bigquery/docs?hl=zh-cn) \u3002\u914d\u7f6e\u5f8c\uff0c\u6240\u6709\u5be6\u6642\u4e92\u52d5\u65e5\u8a8c\u8a18\u9304\u90fd\u6703\u5beb\u5165\u60a8\u7684 BigQuery \u8868\u3002\u9019\u7232\u60a8\u63d0\u4f9b\u4e86\u9ad8\u7d1a\u5206\u6790\u5de5\u5177\uff0c\u53ef\u4ee5\u5e6b\u52a9\u60a8\u8abf\u8a66\u548c\u6539\u9032\u4ee3\u7406\uff0c\u4e26\u767c\u73fe\u5c0d\u8a71\u6578\u64da\u4e2d\u7684\u6a21\u5f0f\u3002\n", "content": "## \u9650\u5236\n\u5b58\u5728\u4ee5\u4e0b\u9650\u5236\uff1a\n- Dialogflow \u4ee3\u7406\u548c BigQuery \u6578\u64da\u96c6\u5fc5\u9808\u4f4d\u65bc\u540c\u4e00\u9805\u76ee\u4e2d\u3002\n- \u6bcf\u500b\u5c0d\u8a71\u6700\u591a\u53ef\u4ee5\u5c0e\u51fa 500 \u500b\u56de\u5408\u3002## \u8868\u7684\u8aaa\u660e\n\u8868\u4e2d\u7684\u6bcf\u4e00\u884c\u90fd\u5305\u542b\u4e00\u500b\u5c0d\u8a71\u56de\u5408\uff0c\u5176\u4e2d\u5305\u542b\u4ee5\u4e0b\u5404\u5217\uff1a\n| \u5217     | \u985e\u578b  | \u8aaa\u660e                 |\n|:---------------------|:----------|:---------------------------------------------------------------------|\n| project_id   | STRING | \u9805\u76ee ID\u3002               |\n| agent_id    | STRING | \u4ee3\u7406 ID\u3002               |\n| conversation_name | STRING | \u6703\u8a71\u7684\u5b8c\u5168\u9650\u5b9a\u8cc7\u6e90\u540d\u7a31\u3002            |\n| turn_position  | INTEGER | \u5c0d\u8a71\u56de\u5408\u7de8\u865f\u3002              |\n| request_time   | TIMESTAMP | \u5c0d\u8a71\u8f2a\u6b21\u7684\u6642\u9593\u3002              |\n| language_code  | STRING | \u8a9e\u8a00\u6a19\u8a18\u3002               |\n| \u8acb\u6c42     | JSON  | \u6aa2\u6e2c\u610f\u5716\u8acb\u6c42\u3002              |\n| Response    | JSON  | \u6aa2\u6e2c\u610f\u5716\u97ff\u61c9\u3002              |\n| partial_responses | JSON  | \u90e8\u5206\u97ff\u61c9\uff08\u5982\u679c\u9069\u7528\uff09\u3002            |\n| derived_data   | JSON  | \u6b64\u5c0d\u8a71\u56de\u5408\u7684\u5176\u4ed6\u5143\u6578\u64da\u3002            |\n| conversation_signals | JSON  | NLU \u76f8\u95dc\u7684\u5206\u6790\u6578\u64da\u3002\u5982\u9700\u77ad\u89e3 JSON \u67b6\u69cb\uff0c\u8acb\u53c3\u95b1 ConversationSignals\u3002 |\n| bot_answer_feedback | JSON  | \u56de\u7b54\u53cd\u994b\uff08\u5982\u6709\u63d0\u4f9b\uff09\u3002            |\n## \u914d\u7f6e\n\u5982\u9700\u914d\u7f6e\u4e92\u52d5\u65e5\u8a8c\u8a18\u9304\u5c0e\u51fa\u529f\u80fd\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- \u78ba\u4fdd\u5df2\u5553\u7528 [\u4e92\u52d5\u65e5\u8a8c\u8a18\u9304](https://cloud.google.com/dialogflow/cx/docs/concept/agent?hl=zh-cn#settings-general) \u3002\n- \u6309\u7167 BigQuery [\u6578\u64da\u96c6\u5275\u5efa\u6307\u5357](https://cloud.google.com/bigquery/docs/datasets?hl=zh-cn#create-dataset) \u5275\u5efa\u6578\u64da\u96c6\u3002\u8acb\u8a18\u4e0b\u6578\u64da\u96c6\u540d\u7a31\uff0c\u56e0\u7232\u4e0b\u4e00\u6b65\u4e2d\u6703\u7528\u5230\u8a72\u540d\u7a31\u3002\n- \u6309\u7167 BigQuery [\u8868\u5275\u5efa\u6307\u5357](https://cloud.google.com/bigquery/docs/tables?hl=zh-cn) \u5275\u5efa\u5177\u6709 SQL \u67b6\u69cb\u5b9a\u7fa9\u7684\u8868\u3002\u4f7f\u7528\u4ee5\u4e0b SQL \u8a9e\u53e5\u9032\u884c\u5275\u5efa\uff1a```\nCREATE TABLE <your_dataset_name>.dialogflow_bigquery_export_data(\u00a0 project_id STRING,\u00a0 agent_id STRING,\u00a0 conversation_name STRING,\u00a0 turn_position INTEGER,\u00a0 request_time TIMESTAMP,\u00a0 language_code STRING,\u00a0 request JSON,\u00a0 response JSON,\u00a0 partial_responses JSON,\u00a0 derived_data JSON,\u00a0 conversation_signals JSON,\u00a0 bot_answer_feedback JSON);\n```\n- \u914d\u7f6e [\u4ee3\u7406\u8a2d\u7f6e](https://cloud.google.com/dialogflow/cx/docs/concept/agent?hl=zh-cn#settings-general) \u4ee5\u5553\u7528 BigQuery Export\uff0c\u4e26\u63d0\u4f9b\u5728\u4e0a\u8ff0\u6b65\u9a5f\u4e2d\u5275\u5efa\u7684\u6578\u64da\u96c6\u548c\u8868\u7684\u540d\u7a31\u3002 **\u6ce8\u610f** \uff1a\u5982\u679c\u60a8\u7684\u4ee3\u7406\u53d7\u5ba2\u6236\u7ba1\u7406\u7684\u52a0\u5bc6\u5bc6\u9470 (CMEK) \u4fdd\u8b77\uff0c\u5247\u5728\u76ee\u6a19 BigQuery \u8868\u672a\u53d7 CMEK \u4fdd\u8b77\u6642\uff0c\u60a8\u6703\u770b\u5230\u8b66\u544a\u3002", "guide": "Dialogflow"}