{"title": "Dialogflow - \u5f9e Dialogflow ES \u9077\u79fb\u5230 CX", "url": "https://cloud.google.com/dialogflow/cx/docs/how/migrate?hl=zh-cn", "abstract": "# Dialogflow - \u5f9e Dialogflow ES \u9077\u79fb\u5230 CX\n\u8207 Dialogflow ES \u4ee3\u7406\u76f8\u6bd4\uff0cDialogflow CX \u4ee3\u7406\u53ef\u7232\u60a8\u63d0\u4f9b [\u66f4\u5f37\u5927\u7684\u5c0d\u8a71\u63a7\u4ef6\u548c\u5de5\u5177](https://cloud.google.com/dialogflow/docs/editions?hl=zh-cn#agent-types) \u3002 \u5982\u679c\u60a8\u7684 Dialogflow ES \u4ee3\u7406\u6703\u8655\u7406\u8907\u96dc\u7684\u5c0d\u8a71\uff0c\u5247\u61c9\u8003\u616e\u9077\u79fb\u5230 Dialogflow CX\u3002\n\u672c\u6307\u5357\u4ecb\u7d39\u5982\u4f55\u5c07\u4ee3\u7406\u5f9e Dialogflow ES \u9077\u79fb\u5230 Dialogflow CX\u3002 \u9019\u5169\u7a2e\u4ee3\u7406\u985e\u578b\u6709\u8a31\u591a\u6839\u672c\u5340\u5225\uff0c\u56e0\u6b64\u6c92\u6709\u76f4\u63a5\u7684\u65b9\u6cd5\u4f86\u57f7\u884c\u6b64\u9077\u79fb\u3002\n\u5982\u679c\u60a8\u4f7f\u7528\u672c\u6307\u5357\u9032\u884c\u9077\u79fb\uff0c\u8acb\u9ede\u64ca\u4e0a\u9762\u7684 **\u767c\u9001\u53cd\u994b** \u6309\u9215\uff0c\u63d0\u4f9b\u6b63\u9762\u6216\u8ca0\u9762\u53cd\u994b\u3002\u6211\u5011\u5c07\u6839\u64da\u9019\u4e9b\u53cd\u994b\u4e0d\u65b7\u6539\u9032\u672c\u6307\u5357\u3002\n\u6982\u62ec\u4f86\u8b1b\uff0c\u5efa\u8b70\u7684\u6d41\u7a0b\u662f\u81ea\u52d5/\u624b\u52d5\u6df7\u5408\u6d41\u7a0b\u3002\u60a8\u5c07\u4f7f\u7528\u4e00\u7a2e\u5de5\u5177\u8b80\u53d6\u90e8\u5206 Dialogflow ES \u4ee3\u7406\u6578\u64da\uff0c\u5c07\u9019\u4e9b\u6578\u64da\u5beb\u5165 Dialogflow CX \u4ee3\u7406\uff0c\u4e26\u6355\u7372\u5f85\u8fa6\u4e8b\u9805\u5217\u8868\u3002 \u7136\u5f8c\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u6700\u4f73\u5be6\u8e10\u3001\u5f85\u8fa6\u4e8b\u9805\u5217\u8868\u4ee5\u53ca\u8a72\u5de5\u5177\u9077\u79fb\u7684\u6578\u64da\u91cd\u65b0\u5275\u5efa\u5b8c\u6574\u7684 CX \u4ee3\u7406\u3002\n", "content": "## \u77ad\u89e3 Dialogflow CX\n\u5728\u5617\u8a66\u6b64\u9077\u79fb\u4e4b\u524d\uff0c\u60a8\u61c9\u8a72\u5c0d Dialogflow CX \u7684\u5de5\u4f5c\u539f\u7406\u6709\u5145\u5206\u7684\u77ad\u89e3\u3002\u60a8\u53ef\u4ee5\u5f9e\u9019\u88cf\u958b\u59cb\uff1a\n- [\u57fa\u790e\u914d\u7f6e](https://cloud.google.com/dialogflow/cx/docs/basics?hl=zh-cn) \n- [\u7c21\u4ecb\u8996\u983b](https://cloud.google.com/dialogflow/cx/docs/video?hl=zh-cn) \n- [\u5feb\u901f\u5165\u9580](https://cloud.google.com/dialogflow/cx/docs/quick?hl=zh-cn) \n\u60a8\u9084\u61c9\u95b1\u8b80\u5176\u4ed6\u6982\u5ff5\u6587\u6a94\uff0c\u9019\u4e9b\u6587\u6a94\u5305\u542b\u65b0\u4ee3\u7406\u4e2d\u53ef\u80fd\u9700\u8981\u7684\u529f\u80fd\u3002\u8acb\u91cd\u9ede\u6ce8\u610f\u4ee5\u4e0b\u5e7e\u9ede\uff1a\n- [\u63a7\u5236\u6aaf\u6982\u89bd](https://cloud.google.com/dialogflow/cx/docs/concept/console?hl=zh-cn) \n- [\u4ee3\u7406](https://cloud.google.com/dialogflow/cx/docs/concept/agent?hl=zh-cn) \n- [\u6d41](https://cloud.google.com/dialogflow/cx/docs/concept/flow?hl=zh-cn) \n- [\u9801\u9762](https://cloud.google.com/dialogflow/cx/docs/concept/page?hl=zh-cn) \n- [\u72c0\u614b\u8655\u7406\u7a0b\u5e8f](https://cloud.google.com/dialogflow/cx/docs/concept/handler?hl=zh-cn) \n- [\u610f\u5716](https://cloud.google.com/dialogflow/cx/docs/concept/intent?hl=zh-cn) \n- [\u53c3\u6578](https://cloud.google.com/dialogflow/cx/docs/concept/parameter?hl=zh-cn) \n- [\u57f7\u884c\u65b9\u5f0f](https://cloud.google.com/dialogflow/cx/docs/concept/fulfillment?hl=zh-cn) \n- [\u7db2\u7d61\u9264\u5b50](https://cloud.google.com/dialogflow/cx/docs/concept/webhook?hl=zh-cn) ## \u77ad\u89e3 ES/CX \u5dee\u7570\n\u672c\u90e8\u5206\u5217\u51fa\u4e86 Dialogflow ES \u8207 CX \u4e4b\u9593\u6700\u91cd\u8981\u7684\u5340\u5225\u3002\u7a0d\u5f8c\u57f7\u884c\u624b\u52d5\u9077\u79fb\u6b65\u9a5f\u6642\uff0c\u60a8\u61c9\u53c3\u95b1\u672c\u90e8\u5206\u7684\u6307\u5c0e\u3002\n### \u7d50\u69cb\u548c\u5c0d\u8a71\u8def\u5f91\u63a7\u5236\nES \u63d0\u4f9b\u4ee5\u4e0b\u5167\u5bb9\u4f86\u63a7\u5236\u7d50\u69cb\u548c\u5c0d\u8a71\u8def\u5f91\uff1a\n- [\u610f\u5716](https://cloud.google.com/dialogflow/cx/docs/concept/intent?hl=zh-cn) \u7528\u4f5c\u4ee3\u7406\u7684\u69cb\u5efa\u584a\u3002\u5728\u5c0d\u8a71\u4e2d\u7684\u4efb\u4f55\u4f4d\u7f6e\uff0c\u7cfb\u7d71\u90fd\u6703\u5339\u914d\u4e00\u500b\u610f\u5716\uff0c\u5f9e\u67d0\u7a2e\u610f\u7fa9\u4e0a\u8aaa\uff0c\u6bcf\u500b\u610f\u5716\u90fd\u662f\u5c0d\u8a71\u7684\u4e00\u500b\u7bc0\u9ede\u3002\n- [Context](https://cloud.google.com/dialogflow/es/docs/contexts-overview?hl=zh-cn) \u7528\u65bc\u63a7\u5236\u5c0d\u8a71\u3002 \u4e0a\u4e0b\u6587\u7528\u65bc\u63a7\u5236\u5728\u4efb\u4f55\u7d66\u5b9a\u6642\u9593\u53ef\u4ee5\u5339\u914d\u54ea\u4e9b intent\u3002\u4e0a\u4e0b\u6587\u6703\u5728\u5c0d\u8a71\u7d93\u904e\u4e00\u5b9a\u6b21\u6578\u5f8c\u904e\u671f\uff0c\u56e0\u6b64\u9019\u7a2e\u985e\u578b\u7684\u63a7\u5236\u5c0d\u65bc\u8f03\u9577\u7684\u5c0d\u8a71\u53ef\u80fd\u4e0d\u6e96\u78ba\u3002\nCX \u63d0\u4f9b\u4e86\u7d50\u69cb\u5316\u8cc7\u6e90\u5c64\u6b21\u7d50\u69cb\u4ee5\u53ca\u66f4\u7cbe\u78ba\u7684\u5c0d\u8a71\u8def\u5f91\u63a7\u5236\u6a5f\u5236\uff1a\n- [\u9801\u9762](https://cloud.google.com/dialogflow/cx/docs/concept/page?hl=zh-cn) \u662f\u5c0d\u8a71\u7684\u5716\u8868\u7bc0\u9ede\u3002CX \u5c0d\u8a71\u985e\u4f3c\u65bc\u72c0\u614b\u6a5f\u3002 \u5728\u5c0d\u8a71\u4e2d\u7684\u4efb\u4f55\u6642\u5019\uff0c\u4e00\u500b\u9801\u9762\u90fd\u8655\u65bc\u6d3b\u52d5\u72c0\u614b\u3002 \u6839\u64da\u6700\u7d42\u7528\u6236\u7684\u8f38\u5165\u6216\u4e8b\u4ef6\uff0c\u5c0d\u8a71\u53ef\u80fd\u6703\u8f49\u63db\u5230\u5176\u4ed6\u9801\u9762\u3002\u4e00\u500b\u9801\u9762\u5728\u591a\u6b21\u5c0d\u8a71\u56de\u5408\u4e2d\u90fd\u4fdd\u6301\u6d3b\u8e8d\u72c0\u614b\u5f88\u5e38\u898b\u3002\n- [\u6d41](https://cloud.google.com/dialogflow/cx/docs/concept/flow?hl=zh-cn) \u662f\u4e00\u7d44\u5f7c\u6b64\u76f8\u95dc\u7684\u9801\u9762\u3002\u6bcf\u500b\u6d41\u7a0b\u90fd\u61c9\u8655\u7406\u4e00\u500b\u7c21\u8981\u5c0d\u8a71\u4e3b\u984c\u3002\n- [\u72c0\u614b\u8655\u7406\u7a0b\u5e8f](https://cloud.google.com/dialogflow/cx/docs/concept/handler?hl=zh-cn) \u7528\u65bc\u63a7\u5236\u8f49\u63db\u548c\u97ff\u61c9\u3002\u72c0\u614b\u8655\u7406\u7a0b\u5e8f\u6709\u4e09\u7a2e\u985e\u578b\uff1a- **\u610f\u5716\u8def\u7531** \uff1a\u5305\u542b\u5fc5\u9808\u5339\u914d\u7684\u610f\u5716\u3001\u53ef\u9078\u97ff\u61c9\u548c\u53ef\u9078\u9801\u9762\u8f49\u63db\u3002\n- **\u689d\u4ef6\u8def\u7531** \uff1a\u5305\u542b\u5fc5\u9808\u6eff\u8db3\u7684\u689d\u4ef6\u3001\u53ef\u9078\u97ff\u61c9\u548c\u53ef\u9078\u7684\u9801\u9762\u8f49\u63db\u3002\n- **\u4e8b\u4ef6\u8655\u7406\u8173\u672c** \uff1a\u5305\u542b\u5fc5\u9808\u8abf\u7528\u7684\u4e8b\u4ef6\u540d\u7a31\u3001\u53ef\u9078\u97ff\u61c9\u548c\u53ef\u9078\u7684\u9801\u9762\u8f49\u63db\u3002\n- [\u4f5c\u7528\u57df](https://cloud.google.com/dialogflow/cx/docs/concept/handler?hl=zh-cn#scope) \u7528\u65bc\u63a7\u5236\u662f\u5426\u53ef\u4ee5\u8abf\u7528\u72c0\u614b\u8655\u7406\u7a0b\u5e8f\u3002\u5927\u591a\u6578\u8655\u7406\u7a0b\u5e8f\u90fd\u8207\u4e00\u500b\u9801\u9762\u6216\u6574\u500b\u6d41\u76f8\u95dc\u806f\u3002\u5982\u679c\u95dc\u806f\u7684\u9801\u9762\u6216\u6d41\u7a0b\u8655\u65bc\u6d3b\u52d5\u72c0\u614b\uff0c\u5247\u8868\u660e\u76f8\u61c9\u8655\u7406\u7a0b\u5e8f\u5728\u8abf\u7528\u7bc4\u570d\u5167\uff0c\u56e0\u6b64\u53ef\u4ee5\u88ab\u8abf\u7528\u3002\u7bc4\u570d\u5167\u7684 CX intent \u8def\u7531\u985e\u4f3c\u65bc\u5177\u6709\u6d3b\u8e8d\u8f38\u5165\u4e0a\u4e0b\u6587\u7684 ES intent\u3002\n\u5728\u8a2d\u8a08\u4ee3\u7406\u7684\u6d41\u7a0b\u548c\u9801\u9762\u6642\uff0c\u8acb\u52d9\u5fc5\u77ad\u89e3 [\u4ee3\u7406\u8a2d\u8a08\u6307\u5357\u7684\u6d41\u7a0b\u90e8\u5206](https://cloud.google.com/dialogflow/cx/docs/concept/agent-design?hl=zh-cn#flow-page) \u4e2d\u7684\u5efa\u8b70\u3002\n### \u8868\u55ae\u586b\u5145\nES \u4f7f\u7528 [\u69fd\u586b\u5145](https://cloud.google.com/dialogflow/es/docs/intents-actions-parameters?hl=zh-cn#required) \u5f9e\u6700\u7d42\u7528\u6236\u6536\u96c6\u5fc5\u9700\u53c3\u6578\uff1a\n- \u9019\u4e9b\u53c3\u6578\u662f\u6a19\u8a18\u7232\u5fc5\u9700\u7684 intent \u53c3\u6578\u3002\n- \u7cfb\u7d71\u6703\u7e7c\u7e8c\u5339\u914d\u610f\u5716\uff0c\u76f4\u5230\u6536\u96c6\u5230\u6240\u6709\u5fc5\u9700\u53c3\u6578\u3002\n- \u60a8\u53ef\u4ee5\u5b9a\u7fa9\u4e00\u689d\u63d0\u793a\uff0c\u8981\u6c42\u6700\u7d42\u7528\u6236\u63d0\u4f9b\u4e00\u500b\u503c\u3002\nCX \u4f7f\u7528 [\u8868\u55ae\u586b\u5145](https://cloud.google.com/dialogflow/cx/docs/concept/parameter?hl=zh-cn#form) \u5f9e\u6700\u7d42\u7528\u6236\u6536\u96c6\u5fc5\u9700\u53c3\u6578\uff1a\n- \u9019\u4e9b\u53c3\u6578\u8207\u7db2\u9801\u76f8\u95dc\u806f\uff0c\u662f\u5728\u7db2\u9801\u8655\u65bc\u6d3b\u52d5\u72c0\u614b\u6642\u6536\u96c6\u7684\u3002\n- \u60a8\u53ef\u4ee5\u5c0d\u9801\u9762\u4f7f\u7528\u689d\u4ef6\u8def\u7531\uff0c\u4ee5\u78ba\u5b9a [\u8868\u55ae\u586b\u5145\u662f\u5426\u5df2\u5b8c\u6210](https://cloud.google.com/dialogflow/cx/docs/concept/parameter?hl=zh-cn#form-ref) \u3002\u9019\u4e9b\u689d\u4ef6\u8def\u7531\u901a\u5e38\u6703\u904e\u6e21\u5230\u53e6\u4e00\u500b\u9801\u9762\u3002\n- \u60a8\u53ef\u4ee5\u5b9a\u7fa9\u63d0\u793a\u4ee5\u53ca [\u91cd\u65b0\u63d0\u793a\u8655\u7406\u7a0b\u5e8f](https://cloud.google.com/dialogflow/cx/docs/concept/parameter?hl=zh-cn#form-reprompt) \uff0c\u59a5\u5584\u8655\u7406\u591a\u6b21\u5617\u8a66\u6536\u96c6\u503c\u7684\u64cd\u4f5c\u3002\n### \u8f49\u63db\n\u7576\u6700\u7d42\u7528\u6236\u8f38\u5165\u8207 intent \u5339\u914d\u6642\uff0cES \u6703\u81ea\u52d5\u5f9e\u4e00\u500b intent \u8f49\u63db\u7232\u4e0b\u4e00\u500b intent\u3002\u9019\u7a2e\u5339\u914d\u50c5\u9069\u7528\u65bc\u6c92\u6709\u8f38\u5165\u4e0a\u4e0b\u6587\u7684\u610f\u5716\u6216\u5177\u6709\u6d3b\u8e8d\u8f38\u5165\u4e0a\u4e0b\u6587\u7684\u610f\u5716\u3002\n\u7576\u7bc4\u570d\u5167\u7684\u72c0\u614b\u8655\u7406\u7a0b\u5e8f\u6eff\u8db3\u5176\u8981\u6c42\u4e26\u63d0\u4f9b\u8f49\u63db\u76ee\u6a19\u6642\uff0cCX \u5f9e\u4e00\u500b\u9801\u9762\u8f49\u63db\u5230\u4e0b\u4e00\u500b\u9801\u9762\u3002 \u901a\u904e\u9019\u4e9b\u8f49\u63db\uff0c\u60a8\u53ef\u4ee5\u53ef\u9760\u5730\u5f15\u5c0e\u6700\u7d42\u7528\u6236\u5b8c\u6210\u5c0d\u8a71\u3002\u60a8\u53ef\u4ee5\u901a\u904e\u591a\u7a2e\u65b9\u5f0f\u63a7\u5236\u9019\u4e9b\u8f49\u63db\uff1a\n- \u610f\u5716\u5339\u914d\u53ef\u80fd\u6703\u89f8\u767c\u610f\u5716\u8def\u7531\u3002\n- \u6eff\u8db3\u67d0\u500b\u689d\u4ef6\u53ef\u4ee5\u89f8\u767c\u689d\u4ef6\u8def\u7531\u3002\n- \u8abf\u7528\u4e8b\u4ef6\u53ef\u80fd\u6703\u89f8\u767c\u4e8b\u4ef6\u8655\u7406\u8173\u672c\u3002\n- \u5982\u679c\u6700\u7d42\u7528\u6236\u591a\u6b21\u5617\u8a66\u5f8c\u4ecd\u672a\u63d0\u4f9b\u503c\uff0c\u91cd\u65b0\u63d0\u793a\u8655\u7406\u7a0b\u5e8f\u53ef\u80fd\u6703\u5c0e\u81f4\u8f49\u63db\u3002\n- \u60a8\u53ef\u4ee5\u5c0d\u8f49\u63db\u76ee\u6a19\u4f7f\u7528 [\u7b26\u865f\u8f49\u63db\u76ee\u6a19](https://cloud.google.com/dialogflow/cx/docs/concept/handler?hl=zh-cn#symbolic) \u3002\n### \u4ee3\u7406\u97ff\u61c9\n\u7576\u610f\u5716\u5339\u914d\u6210\u529f\u6642\uff0c\u7cfb\u7d71\u6703\u5c07 ES \u4ee3\u7406\u97ff\u61c9\u767c\u9001\u7d66\u6700\u7d42\u7528\u6236\uff1a\n- \u4ee3\u7406\u53ef\u4ee5\u5f9e\u53ef\u80fd\u7684\u97ff\u61c9\u5217\u8868\u4e2d\u9078\u64c7\u4e00\u689d\u6d88\u606f\u4f5c\u7232\u97ff\u61c9\u3002\n- \u97ff\u61c9\u53ef\u4ee5\u7279\u5b9a\u65bc\u5e73\u81fa\uff0c\u53ef\u4ee5\u4f7f\u7528 [\u8c50\u5bcc\u7684\u97ff\u61c9\u683c\u5f0f](https://cloud.google.com/dialogflow/es/docs/intents-rich-messages?hl=zh-cn) \u3002\n- \u97ff\u61c9\u53ef\u4ee5\u7531 webhook \u9a45\u52d5\u3002\n\u8abf\u7528 [fulfillment](https://cloud.google.com/dialogflow/cx/docs/concept/fulfillment?hl=zh-cn) \u6642\uff0cCX \u4ee3\u7406\u97ff\u61c9\u6703\u767c\u9001\u7d66\u6700\u7d42\u7528\u6236\u3002\u8207\u59cb\u7d42\u6d89\u53ca webhook \u7684 ES \u57f7\u884c\u65b9\u5f0f\u4e0d\u540c\uff0cCX \u57f7\u884c\u65b9\u5f0f\u53ef\u80fd\u6703\u4e5f\u53ef\u80fd\u4e0d\u6d89\u53ca\u8abf\u7528 webhook\uff0c\u5177\u9ad4\u53d6\u6c7a\u65bc\u57f7\u884c\u65b9\u5f0f\u8cc7\u6e90\u662f\u5426\u914d\u7f6e\u4e86 webhook\u3002\u57fa\u65bc webhook \u97ff\u61c9\u7684\u975c\u614b\u97ff\u61c9\u548c\u52d5\u614b\u97ff\u61c9\u90fd\u7531 fulfillment \u63a7\u5236\u3002\u60a8\u53ef\u4ee5\u901a\u904e\u591a\u7a2e\u65b9\u5f0f\u5275\u5efa\u4ee3\u7406\u97ff\u61c9\uff1a\n- \u53ef\u4ee5\u7232\u4efb\u4f55\u985e\u578b\u7684\u72c0\u614b\u8655\u7406\u7a0b\u5e8f\u63d0\u4f9b\u57f7\u884c\u65b9\u5f0f\u3002\n- \u5728\u4e00\u8f2a\u5c0d\u8a71\u671f\u9593\uff0c\u53ef\u4ee5\u901a\u904e [\u97ff\u61c9\u968a\u5217](https://cloud.google.com/dialogflow/cx/docs/concept/fulfillment?hl=zh-cn#queue) \u4e32\u806f\u591a\u500b\u97ff\u61c9\u3002\u5728\u67d0\u4e9b\u60c5\u6cc1\u4e0b\uff0c\u6b64\u529f\u80fd\u53ef\u4ee5\u7c21\u5316\u4ee3\u7406\u8a2d\u8a08\u3002\n- CX \u4e0d\u652f\u6301\u5167\u7f6e\u7684\u91dd\u5c0d\u5177\u9ad4\u5e73\u81fa\u7684\u97ff\u61c9\u3002 \u4e0d\u904e\uff0c\u5b83\u63d0\u4f9b\u4e86 [\u591a\u7a2e\u97ff\u61c9\u985e\u578b](https://cloud.google.com/dialogflow/cx/docs/concept/fulfillment?hl=zh-cn#static) \uff0c\u5305\u62ec\u53ef\u7528\u65bc\u91dd\u5c0d\u5177\u9ad4\u5e73\u81fa\u7684\u97ff\u61c9\u7684\u81ea\u5b9a\u7fa9\u8f09\u8377\u3002\n### \u53c3\u6578\n[ES \u53c3\u6578](https://cloud.google.com/dialogflow/es/docs/intents-actions-parameters?hl=zh-cn) \u5177\u6709\u4ee5\u4e0b\u7279\u5fb5\uff1a\n- \u50c5\u5728 intent \u4e2d\u5b9a\u7fa9\u3002\n- \u7531\u6700\u7d42\u7528\u6236\u8f38\u5165\u3001\u4e8b\u4ef6\u3001\u7db2\u7d61\u9264\u5b50\u548c API \u8abf\u7528\u8a2d\u7f6e\u3002\n- \u5728\u97ff\u61c9\u3001\u53c3\u6578\u63d0\u793a\u3001\u7db2\u7d61\u9264\u5b50\u4ee3\u78bc\u548c [\u53c3\u6578\u503c](https://cloud.google.com/dialogflow/es/docs/intents-actions-parameters?hl=zh-cn#valfield) \u4e2d\u5f15\u7528\uff1a- \u57fa\u672c\u53c3\u8003\u683c\u5f0f\u7232`$parameter-name`\u3002\n- \u5f15\u7528\u652f\u6301`.original`\u3001`.partial`\u548c`.recent`\u5f8c\u7db4\u8a9e\u6cd5\u3002\n- \u5f15\u7528\u53ef\u4ee5\u6307\u5b9a\u6d3b\u8e8d\u4e0a\u4e0b\u6587\uff1a`#context-name.parameter-name`\u3002\n- \u5f15\u7528\u53ef\u4ee5\u6307\u5b9a\u4e8b\u4ef6\u53c3\u6578\uff1a`#event-name.parameter-name`\u3002[CX \u53c3\u6578](https://cloud.google.com/dialogflow/cx/docs/concept/parameter?hl=zh-cn) \u5177\u6709\u4ee5\u4e0b\u7279\u5fb5\uff1a\n- \u662f\u5728 intent \u548c\u9801\u9762\u8868\u55ae\u4e2d\u5b9a\u7fa9\u7684\u3002\n- intent \u548c\u8868\u55ae\u53c3\u6578\u6703 [\u50b3\u64ad\u5230\u6703\u8a71\u53c3\u6578](https://cloud.google.com/dialogflow/cx/docs/concept/parameter?hl=zh-cn#prop) \u4e2d\uff0c\u4ee5\u4f9b\u5728\u6703\u8a71\u671f\u9593\u5f15\u7528\u3002\n- \u7531\u6700\u7d42\u7528\u6236\u8f38\u5165\u3001\u7db2\u7d61\u9264\u5b50\u3001 [fulfillment \u53c3\u6578\u9810\u8a2d](https://cloud.google.com/dialogflow/cx/docs/concept/fulfillment?hl=zh-cn#param-preset) \u548c API \u8abf\u7528\u8a2d\u7f6e\u3002\n- \u5728\u97ff\u61c9\u3001\u53c3\u6578\u63d0\u793a\u3001\u91cd\u65b0\u63d0\u793a\u8655\u7406\u7a0b\u5e8f\u3001\u53c3\u6578\u9810\u8a2d\u548c\u7db2\u7d61\u9264\u5b50\u4ee3\u78bc\u4e2d\u5f15\u7528\uff1a- \u5c0d\u65bc\u6703\u8a71\u53c3\u6578\uff0c\u5f15\u7528\u683c\u5f0f\u7232`$session.params.parameter-id`\uff1b\u5c0d\u65bc intent \u53c3\u6578\uff0c\u5f15\u7528\u683c\u5f0f\u7232`$intent.params.parameter-id`\u3002\n- intent \u53c3\u6578\u5f15\u7528\u652f\u6301`.original`\u548c`.resolved`\u5f8c\u7db4\u8a9e\u6cd5\u3002\u6703\u8a71\u53c3\u6578\u4e0d\u652f\u6301\u6b64\u8a9e\u6cd5\u3002\n### \u7cfb\u7d71\u5be6\u9ad4\nES \u652f\u6301\u8a31\u591a [\u7cfb\u7d71\u5be6\u9ad4](https://cloud.google.com/dialogflow/es/docs/reference/system-entities?hl=zh-cn) \u3002\nCX \u652f\u6301\u8a31\u591a\u76f8\u540c\u7684 [\u7cfb\u7d71\u5be6\u9ad4](https://cloud.google.com/dialogflow/cx/docs/reference/system-entities?hl=zh-cn) \uff0c\u4f46\u5b58\u5728\u4e00\u4e9b\u5dee\u7570\u3002\u9077\u79fb\u6642\uff0c\u8acb\u9a57\u8b49 CX \u662f\u5426\u4e5f\u652f\u6301\u60a8\u5728 ES \u4e2d\u4f7f\u7528\u7684\u7cfb\u7d71\u5be6\u9ad4\u3002\u5982\u679c\u6c92\u6709\uff0c\u60a8\u61c9\u8a72\u7232\u9019\u4e9b\u5be6\u9ad4\u5275\u5efa\u81ea\u5b9a\u7fa9\u5be6\u9ad4\u3002\n### \u4e8b\u4ef6\n[ES \u4e8b\u4ef6](https://cloud.google.com/dialogflow/es/docs/events-overview?hl=zh-cn) \u5177\u6709\u4ee5\u4e0b\u7279\u5fb5\uff1a\n- \u53ef\u901a\u904e API \u8abf\u7528\u6216 webhook \u8abf\u7528\u4ee5\u5339\u914d intent\u3002\n- \u53ef\u4ee5\u8a2d\u7f6e\u53c3\u6578\u3002\n- \u96c6\u6210\u5e73\u81fa\u6703\u8abf\u7528\u5c11\u91cf\u4e8b\u4ef6\u3002\n[CX \u4e8b\u4ef6](https://cloud.google.com/dialogflow/cx/docs/concept/handler?hl=zh-cn#event) \u5177\u6709\u4ee5\u4e0b\u7279\u5fb5\uff1a\n- \u53ef\u901a\u904e API \u8abf\u7528\u6216 webhook \u8abf\u7528\u4ee5\u8abf\u7528\u4e8b\u4ef6\u8655\u7406\u8173\u672c\u3002\n- \u7121\u6cd5\u8a2d\u7f6e\u53c3\u6578\u3002\n- \u8a31\u591a\u5167\u7f6e\u4e8b\u4ef6\u53ef\u7528\u65bc\u8655\u7406\u7f3a\u5c11\u6700\u7d42\u7528\u6236\u8f38\u5165\u3001\u7121\u6cd5\u8b58\u5225\u7684\u6700\u7d42\u7528\u6236\u8f38\u5165\u3001\u7531 webhook \u5c0e\u81f4\u53c3\u6578\u5931\u6548\u7684\u53c3\u6578\u4ee5\u53ca webhook \u932f\u8aa4\u3002\n- \u8abf\u7528\u53ef\u4ee5\u901a\u904e\u8207\u5176\u4ed6\u72c0\u614b\u8655\u7406\u7a0b\u5e8f\u76f8\u540c\u7684 [\u7bc4\u570d\u898f\u5247](https://cloud.google.com/dialogflow/cx/docs/concept/handler?hl=zh-cn#scope) \u9032\u884c\u63a7\u5236\u3002\n### \u5167\u7f6e\u610f\u5716\nES \u652f\u6301\u4ee5\u4e0b\u5167\u7f6e intent\uff1a\n- [\u6b61\u8fce intent](https://cloud.google.com/dialogflow/es/docs/intents-default?hl=zh-cn#welcome) \n- [\u5f8c\u5099 intent](https://cloud.google.com/dialogflow/es/docs/intents-default?hl=zh-cn#fallback) \n- [\u9810\u5b9a\u7fa9\u7684\u5f8c\u7e8c\u610f\u5716](https://cloud.google.com/dialogflow/es/docs/reference/follow-up-intent-expressions?hl=zh-cn) \n\u4e0b\u9762\u4ecb\u7d39\u4e86\u5c0d\u5167\u7f6e intent \u7684 CX \u652f\u6301\uff1a\n- \u652f\u6301 [\u6b61\u8fce intent](https://cloud.google.com/dialogflow/cx/docs/concept/intent?hl=zh-cn#welcome) \u3002\n- \u4e0d\u63d0\u4f9b\u56de\u9000 intent\u3002\u8acb\u5728\u4e8b\u4ef6\u8655\u7406\u8173\u672c\u4e2d\u4f7f\u7528 [no-match](https://cloud.google.com/dialogflow/cx/docs/concept/handler?hl=zh-cn#event-built-in) \u4e8b\u4ef6\u3002\n- \u5982\u9700\u67e5\u770b\u53cd\u4f8b\uff0c\u8acb\u4f7f\u7528 [\u9ed8\u8a8d\u7684\u6392\u9664 intent](https://cloud.google.com/dialogflow/cx/docs/concept/intent?hl=zh-cn#negative) \u3002\n- \u672a\u63d0\u4f9b\u9810\u5b9a\u7fa9\u7684\u5f8c\u7e8c intent\u3002 \u60a8\u5fc5\u9808\u6839\u64da\u4ee3\u7406\u7684\u8981\u6c42\u5275\u5efa\u9019\u4e9b\u610f\u5716\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u5275\u5efa\u4e00\u500b\u610f\u5716\u4f86\u8655\u7406\u5c0d\u4ee3\u7406\u554f\u984c\u7684\u8ca0\u9762\u56de\u7b54\uff08\u201c\u5426\u201d\u201c\u4e0d\u7528\u4e86\u201d\u201c\u4e0d\uff0c\u6211\u4e0d\u201d\u7b49\uff09\u3002CX \u610f\u5716\u53ef\u4ee5\u5728\u4ee3\u7406\u4e4b\u9593\u91cd\u8907\u4f7f\u7528\uff0c\u56e0\u6b64\u60a8\u53ea\u9700\u5b9a\u7fa9\u4e00\u6b21\u3002\u5728\u4e0d\u540c\u7bc4\u570d\u5167\u91dd\u5c0d\u9019\u4e9b\u5e38\u898b intent \u4f7f\u7528\u4e0d\u540c\u7684 intent \u8def\u7531\u53ef\u8b93\u60a8\u66f4\u597d\u5730\u63a7\u5236\u5c0d\u8a71\u3002\n### Webhook\n[ES webhook](https://cloud.google.com/dialogflow/es/docs/fulfillment-webhook?hl=zh-cn) \u5177\u6709\u4ee5\u4e0b\u7279\u5fb5\uff1a\n- \u60a8\u53ef\u4ee5\u7232\u4ee3\u7406\u914d\u7f6e\u4e00\u9805\u7db2\u7d61\u9264\u5b50\u670d\u52d9\u3002\n- \u6bcf\u500b intent \u90fd\u53ef\u4ee5\u6a19\u8a18\u7232\u4f7f\u7528 webhook\u3002\n- \u672a\u5c0d\u8655\u7406 webhook \u932f\u8aa4\u63d0\u4f9b\u5167\u7f6e\u652f\u6301\u3002\n- webhook \u4f7f\u7528 intent \u64cd\u4f5c\u6216 intent \u540d\u7a31\u4f86\u78ba\u5b9a\u5728\u4ee3\u7406\u4e2d\u7684\u54ea\u500b\u4f4d\u7f6e\u8abf\u7528 intent\u3002\n- \u63a7\u5236\u6aaf\u63d0\u4f9b [\u5167\u5d4c\u7de8\u8f2f\u5668](https://cloud.google.com/dialogflow/es/docs/fulfillment-inline-editor?hl=zh-cn) \u3002\n[CX \u7db2\u7d61\u9264\u5b50](https://cloud.google.com/dialogflow/cx/docs/concept/webhook?hl=zh-cn) \u5177\u6709\u4ee5\u4e0b\u7279\u5fb5\uff1a\n- \u60a8\u53ef\u4ee5\u7232\u4ee3\u7406\u914d\u7f6e\u591a\u9805\u7db2\u7d61\u9264\u5b50\u670d\u52d9\u3002\n- \u6bcf\u500b fulfillment \u90fd\u53ef\u4ee5\u8996\u60c5\u6cc1\u6307\u5b9a\u4e00\u500b webhook \u8abf\u7528\u3002\n- \u7cfb\u7d71\u5167\u7f6e\u4e86\u5c0d [webhook \u932f\u8aa4\u8655\u7406](https://cloud.google.com/dialogflow/cx/docs/concept/webhook?hl=zh-cn#errors) \u7684\u652f\u6301\u3002\n- CX \u57f7\u884c\u65b9\u5f0f webhook \u5305\u542b\u4e00\u500b [\u6a19\u8a18](https://cloud.google.com/dialogflow/cx/docs/concept/fulfillment?hl=zh-cn#webhook) \u3002 \u6b64\u6a19\u8a18\u8207 ES \u64cd\u4f5c\u985e\u4f3c\uff0c\u4f46\u5b83\u50c5\u5728\u8abf\u7528 webhook \u6642\u4f7f\u7528\u3002webhook \u670d\u52d9\u53ef\u4ee5\u4f7f\u7528\u9019\u4e9b\u6a19\u8a18\u4f86\u78ba\u5b9a\u5f9e\u4ee3\u7406\u4e2d\u7684\u54ea\u500b\u4f4d\u7f6e\u8abf\u7528 webhook\u3002\n- \u63a7\u5236\u6aaf\u6c92\u6709\u5167\u7f6e\u7db2\u7d61\u9264\u5b50\u4ee3\u78bc\u7de8\u8f2f\u5668\u3002 [Cloud Functions](https://cloud.google.com/dialogflow/cx/docs/concept/webhook?hl=zh-cn#gcf) \u662f\u4e00\u7a2e\u5e38\u898b\u7528\u6cd5\uff0c\u4f46\u4e5f\u6709\u5f88\u591a\u53ef\u4f9b\u9078\u64c7\u3002\n\u9077\u79fb\u5230 CX \u6642\uff0c\u60a8\u9700\u8981\u66f4\u6539 webhook \u4ee3\u78bc\uff0c\u56e0\u7232\u8acb\u6c42\u548c\u97ff\u61c9\u5c6c\u6027\u4e0d\u540c\u3002\n### \u96c6\u6210\n[ES \u96c6\u6210](https://cloud.google.com/dialogflow/es/docs/integrations?hl=zh-cn) \u548c [CX \u96c6\u6210](https://cloud.google.com/dialogflow/cx/docs/concept/integration?hl=zh-cn) \u652f\u6301\u4e0d\u540c\u7684\u5e73\u81fa\u3002 \u5c0d\u65bc\u9019\u5169\u7a2e\u4ee3\u7406\u985e\u578b\u90fd\u652f\u6301\u7684\u5e73\u81fa\uff0c\u914d\u7f6e\u53ef\u80fd\u5b58\u5728\u5dee\u7570\u3002\n\u5982\u679c CX \u4e0d\u652f\u6301\u60a8\u4f7f\u7528\u7684 ES \u96c6\u6210\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u5207\u63db\u5e73\u81fa\u6216\u81ea\u884c\u5be6\u73fe\u96c6\u6210\u3002\n### \u66f4\u591a\u7279\u5b9a\u65bc CX \u7684\u529f\u80fd\n\u9084\u6709\u8a31\u591a\u5176\u4ed6\u529f\u80fd\u53ea\u6709 CX \u624d\u80fd\u63d0\u4f9b\u3002\u60a8\u61c9\u8003\u616e\u5728\u9077\u79fb\u904e\u7a0b\u4e2d\u4f7f\u7528\u9019\u4e9b\u529f\u80fd\u3002 \u4f8b\u5982\uff1a\n- [\u9ad8\u7d1a NLU](https://cloud.google.com/dialogflow/cx/docs/concept/agent?hl=zh-cn#settings-ml) \n- [\u9ad8\u7d1a\u8a9e\u97f3\u8a2d\u7f6e](https://cloud.google.com/dialogflow/cx/docs/concept/agent?hl=zh-cn#settings-speech) \uff08\u8a9e\u97f3\u7d50\u675f\u9748\u654f\u5ea6\u3001\u7121\u8a9e\u97f3\u8d85\u6642\u7b49\uff09\n- [\u66f4\u6539\u6b77\u53f2\u8a18\u9304](https://cloud.google.com/dialogflow/cx/docs/concept/change-history?hl=zh-cn) \n- [\u689d\u4ef6\u908f\u8f2f](https://cloud.google.com/dialogflow/cx/docs/concept/handler?hl=zh-cn#cond) \n- [\u7528\u65bc\u96fb\u8a71\u96c6\u6210\u7684 DTMF \u8f38\u5165](https://cloud.google.com/dialogflow/cx/docs/concept/parameter?hl=zh-cn#dtmf) \n- [\u7279\u5b9a\u65bc\u74b0\u5883\u7684 webhook](https://cloud.google.com/dialogflow/cx/docs/concept/webhook?hl=zh-cn#environment-specific) \n- [\u5be6\u9a57](https://cloud.google.com/dialogflow/cx/docs/concept/experiments?hl=zh-cn) \n- [\u8def\u7531\u7d44](https://cloud.google.com/dialogflow/cx/docs/concept/handler?hl=zh-cn#route-group) \n- [\u641c\u7d22\u4ee3\u7406\u6578\u64da](https://cloud.google.com/dialogflow/cx/docs/concept/search?hl=zh-cn) \n- [\u5b89\u5168\u8a2d\u7f6e](https://cloud.google.com/dialogflow/cx/docs/concept/security-settings?hl=zh-cn) \uff08\u96b1\u53bb\u548c\u6578\u64da\u4fdd\u7559\uff09\n- [\u7528\u65bc\u9ad8\u7d1a\u97ff\u61c9\u548c\u689d\u4ef6\u7684\u7cfb\u7d71\u51fd\u6578](https://cloud.google.com/dialogflow/cx/docs/reference/system-functions?hl=zh-cn) \n- [\u6e2c\u8a66\u7528\u4f8b](https://cloud.google.com/dialogflow/cx/docs/concept/test-case?hl=zh-cn) \n- [\u9a57\u8b49\u4ee3\u7406\u6578\u64da](https://cloud.google.com/dialogflow/cx/docs/concept/validation?hl=zh-cn) ## \u6700\u4f73\u5be6\u8e10\n\u5728\u9077\u79fb\u4e4b\u524d\uff0c\u8acb\u5148\u719f\u6089 [CX \u4ee3\u7406\u8a2d\u8a08\u6700\u4f73\u5be6\u8e10](https://cloud.google.com/dialogflow/cx/docs/concept/agent-design?hl=zh-cn) \u3002\u9019\u4e9b\u5ba2\u6236\u9ad4\u9a57\u6700\u4f73\u5be6\u8e10\u4e2d\u6709\u8a31\u591a\u985e\u4f3c\u65bc ES \u6700\u4f73\u5be6\u8e10\uff0c\u4f46\u6709\u4e9b\u662f\u5ba2\u6236\u9ad4\u9a57\u6240\u7279\u6709\u7684\u3002\n## \u95dc\u65bc\u9077\u79fb\u5de5\u5177\n\u9077\u79fb\u5de5\u5177\u6703\u5c07\u5927\u91cf ES \u6578\u64da\u8907\u88fd\u5230\u60a8\u7684 CX \u4ee3\u7406\uff0c\u7136\u5f8c\u5beb\u5165\u4e00\u500b\u5305\u542b\u5fc5\u9808\u624b\u52d5\u9077\u79fb\u7684\u9805\u5217\u8868\u7684 TODO \u6587\u4ef6\u3002\u8a72\u5de5\u5177\u50c5\u8907\u88fd\u81ea\u5b9a\u7fa9\u5be6\u9ad4\u985e\u578b\u548c\u610f\u5716\u8a13\u7df4\u77ed\u8a9e\u3002 \u60a8\u61c9\u8003\u616e\u6839\u64da\u60a8\u7684\u7279\u5b9a\u9700\u6c42\u81ea\u5b9a\u7fa9\u6b64\u5de5\u5177\u3002\n### \u9077\u79fb\u5de5\u5177\u4ee3\u78bc\n\u4ee5\u4e0b\u662f\u8a72\u5de5\u5177\u7684\u4ee3\u78bc\u3002 \u60a8\u61c9\u67e5\u770b\u6b64\u5de5\u5177\u7684\u4ee3\u78bc\uff0c\u4ee5\u4fbf\u4e86\u89e3\u6b64\u5de5\u5177\u7684\u7528\u9014\u3002 \u60a8\u53ef\u80fd\u9700\u8981\u66f4\u6539\u6b64\u4ee3\u78bc\u4ee5\u8655\u7406\u4ee3\u7406\u4e2d\u7684\u7279\u5b9a\u60c5\u6cc1\u3002\u5728\u4e0b\u9762\u7684\u6b65\u9a5f\u4e2d\uff0c\u60a8\u5c07\u57f7\u884c\u6b64\u5de5\u5177\u3002\n```\n// Package main implements the ES to CX migration tool.package mainimport (\u00a0 \u00a0 \u00a0 \u00a0 \"context\"\u00a0 \u00a0 \u00a0 \u00a0 \"encoding/csv\"\u00a0 \u00a0 \u00a0 \u00a0 \"flag\"\u00a0 \u00a0 \u00a0 \u00a0 \"fmt\"\u00a0 \u00a0 \u00a0 \u00a0 \"os\"\u00a0 \u00a0 \u00a0 \u00a0 \"strings\"\u00a0 \u00a0 \u00a0 \u00a0 \"time\"\u00a0 \u00a0 \u00a0 \u00a0 v2 \"cloud.google.com/go/dialogflow/apiv2\"\u00a0 \u00a0 \u00a0 \u00a0 proto2 \"cloud.google.com/go/dialogflow/apiv2/dialogflowpb\"\u00a0 \u00a0 \u00a0 \u00a0 v3 \"cloud.google.com/go/dialogflow/cx/apiv3\"\u00a0 \u00a0 \u00a0 \u00a0 proto3 \"cloud.google.com/go/dialogflow/cx/apiv3/cxpb\"\u00a0 \u00a0 \u00a0 \u00a0 \"google.golang.org/api/iterator\"\u00a0 \u00a0 \u00a0 \u00a0 \"google.golang.org/api/option\")// Commandline flagsvar v2Project *string = flag.String(\"es-project-id\", \"\", \"ES project\")var v3Project *string = flag.String(\"cx-project-id\", \"\", \"CX project\")var v2Region *string = flag.String(\"es-region-id\", \"\", \"ES region\")var v3Region *string = flag.String(\"cx-region-id\", \"\", \"CX region\")var v3Agent *string = flag.String(\"cx-agent-id\", \"\", \"CX region\")var outFile *string = flag.String(\"out-file\", \"\", \"Output file for CSV TODO items\")var dryRun *bool = flag.Bool(\"dry-run\", false, \"Set true to skip CX agent writes\")// Map from entity type display name to fully qualified name.var entityTypeShortToLong = map[string]string{}// Map from ES system entity to CX system entityvar convertSystemEntity = map[string]string{\u00a0 \u00a0 \u00a0 \u00a0 \"sys.address\": \u00a0 \u00a0 \u00a0 \u00a0 \"sys.address\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.any\": \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"sys.any\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.cardinal\": \u00a0 \u00a0 \u00a0 \u00a0\"sys.cardinal\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.color\": \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"sys.color\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.currency-name\": \u00a0 \"sys.currency-name\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.date\": \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0\"sys.date\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.date-period\": \u00a0 \u00a0 \"sys.date-period\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.date-time\": \u00a0 \u00a0 \u00a0 \"sys.date-time\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.duration\": \u00a0 \u00a0 \u00a0 \u00a0\"sys.duration\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.email\": \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"sys.email\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.flight-number\": \u00a0 \"sys.flight-number\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.geo-city-gb\": \u00a0 \u00a0 \"sys.geo-city\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.geo-city-us\": \u00a0 \u00a0 \"sys.geo-city\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.geo-city\": \u00a0 \u00a0 \u00a0 \u00a0\"sys.geo-city\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.geo-country\": \u00a0 \u00a0 \"sys.geo-country\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.geo-state\": \u00a0 \u00a0 \u00a0 \"sys.geo-state\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.geo-state-us\": \u00a0 \u00a0\"sys.geo-state\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.geo-state-gb\": \u00a0 \u00a0\"sys.geo-state\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.given-name\": \u00a0 \u00a0 \u00a0\"sys.given-name\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.language\": \u00a0 \u00a0 \u00a0 \u00a0\"sys.language\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.last-name\": \u00a0 \u00a0 \u00a0 \"sys.last-name\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.street-address\": \u00a0\"sys.location\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.location\": \u00a0 \u00a0 \u00a0 \u00a0\"sys.location\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.number\": \u00a0 \u00a0 \u00a0 \u00a0 \u00a0\"sys.number\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.number-integer\": \u00a0\"sys.number-integer\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.number-sequence\": \"sys.number-sequence\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.ordinal\": \u00a0 \u00a0 \u00a0 \u00a0 \"sys.ordinal\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.percentage\": \u00a0 \u00a0 \u00a0\"sys.percentage\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.person\": \u00a0 \u00a0 \u00a0 \u00a0 \u00a0\"sys.person\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.phone-number\": \u00a0 \u00a0\"sys.phone-number\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.temperature\": \u00a0 \u00a0 \"sys.temperature\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.time\": \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0\"sys.time\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.time-period\": \u00a0 \u00a0 \"sys.time-period\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.unit-currency\": \u00a0 \"sys.unit-currency\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.url\": \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"sys.url\",\u00a0 \u00a0 \u00a0 \u00a0 \"sys.zip-code\": \u00a0 \u00a0 \u00a0 \u00a0\"sys.zip-code\",}// Issues found for the CSV outputvar issues = [][]string{\u00a0 \u00a0 \u00a0 \u00a0 {\"Field\", \"Issue\"},}// logIssue logs an issue for the CSV outputfunc logIssue(field string, issue string) {\u00a0 \u00a0 \u00a0 \u00a0 issues = append(issues, []string{field, issue})}// convertEntityType converts an ES entity type to CXfunc convertEntityType(et2 *proto2.EntityType) *proto3.EntityType {\u00a0 \u00a0 \u00a0 \u00a0 var kind3 proto3.EntityType_Kind\u00a0 \u00a0 \u00a0 \u00a0 switch kind2 := et2.Kind; kind2 {\u00a0 \u00a0 \u00a0 \u00a0 case proto2.EntityType_KIND_MAP:\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 kind3 = proto3.EntityType_KIND_MAP\u00a0 \u00a0 \u00a0 \u00a0 case proto2.EntityType_KIND_LIST:\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 kind3 = proto3.EntityType_KIND_LIST\u00a0 \u00a0 \u00a0 \u00a0 case proto2.EntityType_KIND_REGEXP:\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 kind3 = proto3.EntityType_KIND_REGEXP\u00a0 \u00a0 \u00a0 \u00a0 default:\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 kind3 = proto3.EntityType_KIND_UNSPECIFIED\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 var expansion3 proto3.EntityType_AutoExpansionMode\u00a0 \u00a0 \u00a0 \u00a0 switch expansion2 := et2.AutoExpansionMode; expansion2 {\u00a0 \u00a0 \u00a0 \u00a0 case proto2.EntityType_AUTO_EXPANSION_MODE_DEFAULT:\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 expansion3 = proto3.EntityType_AUTO_EXPANSION_MODE_DEFAULT\u00a0 \u00a0 \u00a0 \u00a0 default:\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 expansion3 = proto3.EntityType_AUTO_EXPANSION_MODE_UNSPECIFIED\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 et3 := &proto3.EntityType{\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 DisplayName: \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 et2.DisplayName,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Kind: \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0kind3,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 AutoExpansionMode: \u00a0 \u00a0 expansion3,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 EnableFuzzyExtraction: et2.EnableFuzzyExtraction,\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 for _, e2 := range et2.Entities {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 et3.Entities = append(et3.Entities, &proto3.EntityType_Entity{\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Value: \u00a0 \u00a0e2.Value,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Synonyms: e2.Synonyms,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 })\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 return et3}// convertParameterEntityType converts a entity type found in parametersfunc convertParameterEntityType(intent string, parameter string, t2 string) string {\u00a0 \u00a0 \u00a0 \u00a0 if len(t2) == 0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return \"\"\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 t2 = t2[1:] // remove @\u00a0 \u00a0 \u00a0 \u00a0 if strings.HasPrefix(t2, \"sys.\") {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if val, ok := convertSystemEntity[t2]; ok {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 t2 = val\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 } else {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 t2 = \"sys.any\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 logIssue(\"Intent<\"+intent+\">.Parameter<\"+parameter+\">\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"This intent parameter uses a system entity not supported by CX English agents. See the migration guide for advice. System entity: \"+t2)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return fmt.Sprintf(\"projects/-/locations/-/agents/-/entityTypes/%s\", t2)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 return entityTypeShortToLong[t2]}// convertIntent converts an ES intent to CXfunc convertIntent(intent2 *proto2.Intent) *proto3.Intent {\u00a0 \u00a0 \u00a0 \u00a0 if intent2.DisplayName == \"Default Fallback Intent\" ||\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 intent2.DisplayName == \"Default Welcome Intent\" {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return nil\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 intent3 := &proto3.Intent{\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 DisplayName: intent2.DisplayName,\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 // WebhookState\u00a0 \u00a0 \u00a0 \u00a0 if intent2.WebhookState != proto2.Intent_WEBHOOK_STATE_UNSPECIFIED {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 logIssue(\"Intent<\"+intent2.DisplayName+\">.WebhookState\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"This intent has webhook enabled. You must configure this in your CX agent.\")\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 // IsFallback\u00a0 \u00a0 \u00a0 \u00a0 if intent2.IsFallback {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 logIssue(\"Intent<\"+intent2.DisplayName+\">.IsFallback\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"This intent is a fallback intent. CX does not support this. Use no-match events instead.\")\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 // MlDisabled\u00a0 \u00a0 \u00a0 \u00a0 if intent2.MlDisabled {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 logIssue(\"Intent<\"+intent2.DisplayName+\">.MlDisabled\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"This intent has ML disabled. CX does not support this.\")\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 // LiveAgentHandoff\u00a0 \u00a0 \u00a0 \u00a0 if intent2.LiveAgentHandoff {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 logIssue(\"Intent<\"+intent2.DisplayName+\">.LiveAgentHandoff\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"This intent uses live agent handoff. You must configure this in a fulfillment.\")\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 // EndInteraction\u00a0 \u00a0 \u00a0 \u00a0 if intent2.EndInteraction {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 logIssue(\"Intent<\"+intent2.DisplayName+\">.EndInteraction\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"This intent uses end interaction. CX does not support this.\")\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 // InputContextNames\u00a0 \u00a0 \u00a0 \u00a0 if len(intent2.InputContextNames) > 0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 logIssue(\"Intent<\"+intent2.DisplayName+\">.InputContextNames\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"This intent uses context. See the migration guide for alternatives.\")\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 // Events\u00a0 \u00a0 \u00a0 \u00a0 if len(intent2.Events) > 0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 logIssue(\"Intent<\"+intent2.DisplayName+\">.Events\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"This intent uses events. Use event handlers instead.\")\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 // TrainingPhrases\u00a0 \u00a0 \u00a0 \u00a0 var trainingPhrases3 []*proto3.Intent_TrainingPhrase\u00a0 \u00a0 \u00a0 \u00a0 for _, tp2 := range intent2.TrainingPhrases {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if tp2.Type == proto2.Intent_TrainingPhrase_TEMPLATE {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 logIssue(\"Intent<\"+intent2.DisplayName+\">.TrainingPhrases\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"This intent has a training phrase that uses a template (@...) training phrase type. CX does not support this.\")\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 var parts3 []*proto3.Intent_TrainingPhrase_Part\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 for _, part2 := range tp2.Parts {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 parts3 = append(parts3, &proto3.Intent_TrainingPhrase_Part{\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Text: \u00a0 \u00a0 \u00a0 \u00a0part2.Text,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ParameterId: part2.Alias,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 })\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 trainingPhrases3 = append(trainingPhrases3, &proto3.Intent_TrainingPhrase{\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Parts: \u00a0 \u00a0 \u00a0 parts3,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 RepeatCount: 1,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 })\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 intent3.TrainingPhrases = trainingPhrases3\u00a0 \u00a0 \u00a0 \u00a0 // Action\u00a0 \u00a0 \u00a0 \u00a0 if len(intent2.Action) > 0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 logIssue(\"Intent<\"+intent2.DisplayName+\">.Action\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"This intent sets the action field. Use a fulfillment webhook tag instead.\")\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 // OutputContexts\u00a0 \u00a0 \u00a0 \u00a0 if len(intent2.OutputContexts) > 0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 logIssue(\"Intent<\"+intent2.DisplayName+\">.OutputContexts\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"This intent uses context. See the migration guide for alternatives.\")\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 // ResetContexts\u00a0 \u00a0 \u00a0 \u00a0 if intent2.ResetContexts {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 logIssue(\"Intent<\"+intent2.DisplayName+\">.ResetContexts\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"This intent uses context. See the migration guide for alternatives.\")\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 // Parameters\u00a0 \u00a0 \u00a0 \u00a0 var parameters3 []*proto3.Intent_Parameter\u00a0 \u00a0 \u00a0 \u00a0 for _, p2 := range intent2.Parameters {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if len(p2.Value) > 0 && p2.Value != \"$\"+p2.DisplayName {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 logIssue(\"Intent<\"+intent2.DisplayName+\">.Parameters<\"+p2.DisplayName+\">.Value\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"This field is not set to $parameter-name. This feature is not supported by CX. See: https://cloud.google.com/dialogflow/es/docs/intents-actions-parameters#valfield.\")\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if len(p2.DefaultValue) > 0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 logIssue(\"Intent<\"+intent2.DisplayName+\">.Parameters<\"+p2.DisplayName+\">.DefaultValue\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"This intent parameter is using a default value. CX intent parameters do not support default values, but CX page form parameters do. This parameter should probably become a form parameter.\")\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if p2.Mandatory {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 logIssue(\"Intent<\"+intent2.DisplayName+\">.Parameters<\"+p2.DisplayName+\">.Mandatory\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"This intent parameter is marked as mandatory. CX intent parameters do not support mandatory parameters, but CX page form parameters do. This parameter should probably become a form parameter.\")\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 for _, prompt := range p2.Prompts {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 logIssue(\"Intent<\"+intent2.DisplayName+\">.Parameters<\"+p2.DisplayName+\">.Prompts\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"This intent parameter has a prompt. Use page form parameter prompts instead. Prompt: \"+prompt)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if len(p2.EntityTypeDisplayName) == 0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 p2.EntityTypeDisplayName = \"@sys.any\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 logIssue(\"Intent<\"+intent2.DisplayName+\">.Parameters<\"+p2.DisplayName+\">.EntityTypeDisplayName\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"This intent parameter does not have an entity type. CX requires an entity type for all parameters..\")\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 parameters3 = append(parameters3, &proto3.Intent_Parameter{\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Id: \u00a0 \u00a0 \u00a0 \u00a0 p2.DisplayName,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 EntityType: convertParameterEntityType(intent2.DisplayName, p2.DisplayName, p2.EntityTypeDisplayName),\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 IsList: \u00a0 \u00a0 p2.IsList,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 })\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 //fmt.Printf(\"Converted parameter: %+v\\n\", parameters3[len(parameters3)-1])\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 intent3.Parameters = parameters3\u00a0 \u00a0 \u00a0 \u00a0 // Messages\u00a0 \u00a0 \u00a0 \u00a0 for _, message := range intent2.Messages {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 m, ok := message.Message.(*proto2.Intent_Message_Text_)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if ok {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 for _, t := range m.Text.Text {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 warnings := \"\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if strings.Contains(t, \"#\") {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 warnings += \" This message may contain a context parameter reference, but CX does not support this.\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if strings.Contains(t, \".original\") {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 warnings += \" This message may contain a parameter reference suffix of '.original', But CX only supports this for intent parameters (not session parameters).\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if strings.Contains(t, \".recent\") {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 warnings += \" This message may contain a parameter reference suffix of '.recent', but CX does not support this.\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if strings.Contains(t, \".partial\") {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 warnings += \" This message may contain a parameter reference suffix of '.partial', but CX does not support this.\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 logIssue(\"Intent<\"+intent2.DisplayName+\">.Messages\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"This intent has a response message. Use fulfillment instead.\"+warnings+\" Message: \"+t)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 } else {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 logIssue(\"Intent<\"+intent2.DisplayName+\">.Messages\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"This intent has a non-text response message. See the rich response message information in the migration guide.\")\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if message.Platform != proto2.Intent_Message_PLATFORM_UNSPECIFIED {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 logIssue(\"Intent<\"+intent2.DisplayName+\">.Platform\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"This intent has a message with a non-default platform. See the migration guide for advice.\")\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 return intent3}// migrateEntities migrates ES entities to your CX agentfunc migrateEntities(ctx context.Context) error {\u00a0 \u00a0 \u00a0 \u00a0 var err error\u00a0 \u00a0 \u00a0 \u00a0 // Create ES client\u00a0 \u00a0 \u00a0 \u00a0 var client2 *v2.EntityTypesClient\u00a0 \u00a0 \u00a0 \u00a0 options2 := []option.ClientOption{}\u00a0 \u00a0 \u00a0 \u00a0 if len(*v2Region) > 0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 options2 = append(options2,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 option.WithEndpoint(*v2Region+\"-dialogflow.googleapis.com:443\"))\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 client2, err = v2.NewEntityTypesClient(ctx, options2...)\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return err\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 defer client2.Close()\u00a0 \u00a0 \u00a0 \u00a0 var parent2 string\u00a0 \u00a0 \u00a0 \u00a0 if len(*v2Region) == 0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 parent2 = fmt.Sprintf(\"projects/%s/agent\", *v2Project)\u00a0 \u00a0 \u00a0 \u00a0 } else {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 parent2 = fmt.Sprintf(\"projects/%s/locations/%s/agent\", *v2Project, *v2Region)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 // Create CX client\u00a0 \u00a0 \u00a0 \u00a0 var client3 *v3.EntityTypesClient\u00a0 \u00a0 \u00a0 \u00a0 options3 := []option.ClientOption{}\u00a0 \u00a0 \u00a0 \u00a0 if len(*v3Region) > 0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 options3 = append(options3,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 option.WithEndpoint(*v3Region+\"-dialogflow.googleapis.com:443\"))\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 client3, err = v3.NewEntityTypesClient(ctx, options3...)\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return err\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 defer client3.Close()\u00a0 \u00a0 \u00a0 \u00a0 parent3 := fmt.Sprintf(\"projects/%s/locations/%s/agents/%s\", *v3Project, *v3Region, *v3Agent)\u00a0 \u00a0 \u00a0 \u00a0 // Read each V2 entity type, convert, and write to V3\u00a0 \u00a0 \u00a0 \u00a0 request2 := &proto2.ListEntityTypesRequest{\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Parent: parent2,\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 it2 := client2.ListEntityTypes(ctx, request2)\u00a0 \u00a0 \u00a0 \u00a0 for {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 var et2 *proto2.EntityType\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 et2, err = it2.Next()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if err == iterator.Done {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 break\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return err\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 fmt.Printf(\"Entity Type: %s\\n\", et2.DisplayName)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if *dryRun {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 convertEntityType(et2)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 continue\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 request3 := &proto3.CreateEntityTypeRequest{\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Parent: \u00a0 \u00a0 parent3,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 EntityType: convertEntityType(et2),\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 et3, err := client3.CreateEntityType(ctx, request3)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 entityTypeShortToLong[et3.DisplayName] = et3.Name\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return err\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 // ES and CX each have a quota limit of 60 design-time requests per minute\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 time.Sleep(2 * time.Second)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 return nil}// migrateIntents migrates intents to your CX agentfunc migrateIntents(ctx context.Context) error {\u00a0 \u00a0 \u00a0 \u00a0 var err error\u00a0 \u00a0 \u00a0 \u00a0 // Create ES client\u00a0 \u00a0 \u00a0 \u00a0 var client2 *v2.IntentsClient\u00a0 \u00a0 \u00a0 \u00a0 options2 := []option.ClientOption{}\u00a0 \u00a0 \u00a0 \u00a0 if len(*v2Region) > 0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 options2 = append(options2,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 option.WithEndpoint(*v2Region+\"-dialogflow.googleapis.com:443\"))\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 client2, err = v2.NewIntentsClient(ctx, options2...)\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return err\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 defer client2.Close()\u00a0 \u00a0 \u00a0 \u00a0 var parent2 string\u00a0 \u00a0 \u00a0 \u00a0 if len(*v2Region) == 0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 parent2 = fmt.Sprintf(\"projects/%s/agent\", *v2Project)\u00a0 \u00a0 \u00a0 \u00a0 } else {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 parent2 = fmt.Sprintf(\"projects/%s/locations/%s/agent\", *v2Project, *v2Region)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 // Create CX client\u00a0 \u00a0 \u00a0 \u00a0 var client3 *v3.IntentsClient\u00a0 \u00a0 \u00a0 \u00a0 options3 := []option.ClientOption{}\u00a0 \u00a0 \u00a0 \u00a0 if len(*v3Region) > 0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 options3 = append(options3,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 option.WithEndpoint(*v3Region+\"-dialogflow.googleapis.com:443\"))\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 client3, err = v3.NewIntentsClient(ctx, options3...)\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return err\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 defer client3.Close()\u00a0 \u00a0 \u00a0 \u00a0 parent3 := fmt.Sprintf(\"projects/%s/locations/%s/agents/%s\", *v3Project, *v3Region, *v3Agent)\u00a0 \u00a0 \u00a0 \u00a0 // Read each V2 entity type, convert, and write to V3\u00a0 \u00a0 \u00a0 \u00a0 request2 := &proto2.ListIntentsRequest{\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Parent: \u00a0 \u00a0 parent2,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 IntentView: proto2.IntentView_INTENT_VIEW_FULL,\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 it2 := client2.ListIntents(ctx, request2)\u00a0 \u00a0 \u00a0 \u00a0 for {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 var intent2 *proto2.Intent\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 intent2, err = it2.Next()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if err == iterator.Done {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 break\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return err\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 fmt.Printf(\"Intent: %s\\n\", intent2.DisplayName)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 intent3 := convertIntent(intent2)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if intent3 == nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 continue\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if *dryRun {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 continue\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 request3 := &proto3.CreateIntentRequest{\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Parent: parent3,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Intent: intent3,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 _, err := client3.CreateIntent(ctx, request3)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return err\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 // ES and CX each have a quota limit of 60 design-time requests per minute\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 time.Sleep(2 * time.Second)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 return nil}// checkFlags checks commandline flagsfunc checkFlags() error {\u00a0 \u00a0 \u00a0 \u00a0 flag.Parse()\u00a0 \u00a0 \u00a0 \u00a0 if len(*v2Project) == 0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return fmt.Errorf(\"Need to supply es-project-id flag\")\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 if len(*v3Project) == 0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return fmt.Errorf(\"Need to supply cx-project-id flag\")\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 if len(*v2Region) == 0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 fmt.Printf(\"No region supplied for ES, using default\\n\")\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 if len(*v3Region) == 0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return fmt.Errorf(\"Need to supply cx-region-id flag\")\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 if len(*v3Agent) == 0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return fmt.Errorf(\"Need to supply cx-agent-id flag\")\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 if len(*outFile) == 0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return fmt.Errorf(\"Need to supply out-file flag\")\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 return nil}// closeFile is used as a convenience for deferfunc closeFile(f *os.File) {\u00a0 \u00a0 \u00a0 \u00a0 err := f.Close()\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 fmt.Fprintf(os.Stderr, \"ERROR closing CSV file: %v\\n\", err)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 os.Exit(1)\u00a0 \u00a0 \u00a0 \u00a0 }}func main() {\u00a0 \u00a0 \u00a0 \u00a0 if err := checkFlags(); err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 fmt.Fprintf(os.Stderr, \"ERROR checking flags: %v\\n\", err)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 os.Exit(1)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 ctx := context.Background()\u00a0 \u00a0 \u00a0 \u00a0 if err := migrateEntities(ctx); err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 fmt.Fprintf(os.Stderr, \"ERROR migrating entities: %v\\n\", err)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 os.Exit(1)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 if err := migrateIntents(ctx); err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 fmt.Fprintf(os.Stderr, \"ERROR migrating intents: %v\\n\", err)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 os.Exit(1)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 csvFile, err := os.Create(*outFile)\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 fmt.Fprintf(os.Stderr, \"ERROR opening output file: %v\", err)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 os.Exit(1)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 defer closeFile(csvFile)\u00a0 \u00a0 \u00a0 \u00a0 csvWriter := csv.NewWriter(csvFile)\u00a0 \u00a0 \u00a0 \u00a0 if err := csvWriter.WriteAll(issues); err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 fmt.Fprintf(os.Stderr, \"ERROR writing CSV output file: %v\", err)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 os.Exit(1)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 csvWriter.Flush()}\n```\n### \u5be6\u9ad4\u985e\u578b\u7684\u5de5\u5177\u9077\u79fb\n[ES \u5be6\u9ad4\u985e\u578b](https://cloud.google.com/dialogflow/es/docs/entities-custom?hl=zh-cn) \u548c [CX \u5be6\u9ad4\u985e\u578b](https://cloud.google.com/dialogflow/cx/docs/concept/entity-custom?hl=zh-cn) \u975e\u5e38\u76f8\u4f3c\uff0c\u56e0\u6b64\u5b83\u5011\u662f\u6700\u5bb9\u6613\u9077\u79fb\u7684\u6578\u64da\u985e\u578b\u3002\u8a72\u5de5\u5177\u50c5\u6309\u539f\u6a23\u8907\u88fd\u5be6\u9ad4\u985e\u578b\u3002\n### \u610f\u5716\u7684\u5de5\u5177\u9077\u79fb\n[ES intent](https://cloud.google.com/dialogflow/es/docs/intents-overview?hl=zh-cn) \u548c [CX intent](https://cloud.google.com/dialogflow/cx/docs/concept/intent?hl=zh-cn) \u6709\u5f88\u5927\u4e0d\u540c\u3002\nES intent \u7528\u4f5c\u4ee3\u7406\u7684\u69cb\u5efa\u584a\uff1b\u5b83\u5011\u5305\u542b\u8a13\u7df4\u77ed\u8a9e\u3001\u97ff\u61c9\u3001\u5c0d\u8a71\u63a7\u5236\u7684\u4e0a\u4e0b\u6587\u3001\u7db2\u7d61\u9264\u5b50\u914d\u7f6e\u3001\u4e8b\u4ef6\u3001\u64cd\u4f5c\u548c\u69fd\u4f4d\u586b\u5145\u53c3\u6578\u3002\nDialogflow CX \u5df2\u5c07\u5927\u90e8\u5206\u6578\u64da\u79fb\u81f3\u5176\u4ed6\u8cc7\u6e90\u3002 CX \u610f\u5716\u53ea\u6709\u8a13\u7df4\u77ed\u8a9e\u548c\u53c3\u6578\uff0c\u56e0\u6b64\u53ef\u5728\u4ee3\u7406\u4e2d\u91cd\u8907\u4f7f\u7528\u610f\u5716\u3002\u8a72\u5de5\u5177\u53ea\u6703\u5c07\u9019\u5169\u7a2e\u985e\u578b\u7684 intent \u6578\u64da\u8907\u88fd\u5230\u60a8\u7684 CX intent\u3002\n### \u9077\u79fb\u5de5\u5177\u9650\u5236\n\u9077\u79fb\u5de5\u5177\u4e0d\u652f\u6301\u4ee5\u4e0b\u5404\u9805\uff1a\n- **\u8d85\u7d1a\u4ee3\u7406** \uff1a\u8a72\u5de5\u5177\u7121\u6cd5\u5f9e\u591a\u500b\u5206\u4ee3\u7406\u8b80\u53d6\u6578\u64da\uff0c\u4f46\u60a8\u53ef\u4ee5\u91dd\u5c0d\u6bcf\u500b\u5206\u4ee3\u7406\u591a\u6b21\u8abf\u7528\u8a72\u5de5\u5177\u3002\n- **\u591a\u8a9e\u8a00\u4ee3\u7406** \uff1a\u60a8\u61c9\u4fee\u6539\u8a72\u5de5\u5177\uff0c\u4ee5\u5275\u5efa\u591a\u8a9e\u8a00\u8a13\u7df4\u77ed\u8a9e\u548c\u5be6\u9ad4\u689d\u76ee\u3002\n- **\u91dd\u5c0d\u975e\u82f1\u8a9e\u8a9e\u8a00\u7684\u7cfb\u7d71\u5be6\u9ad4\u9a57\u8b49** \uff1a\u8a72\u5de5\u5177\u6703\u5728\u767c\u73fe [CX \u4e0d\u652f\u6301](https://cloud.google.com/dialogflow/cx/docs/reference/system-entities?hl=zh-cn) \u7684\u7cfb\u7d71\u5be6\u9ad4\u6642\u5275\u5efa TODO \u9805\uff0c\u4e26\u5047\u8a2d\u82f1\u8a9e\u662f\u9ed8\u8a8d\u8a9e\u8a00\uff0c\u4e26\u4e14\u4f7f\u7528\u7f8e\u570b\u5340\u57df\u3002\u5c0d\u7cfb\u7d71\u5be6\u9ad4\u7684\u652f\u6301\u56e0\u8a9e\u8a00\u548c\u5340\u57df\u800c\u7570\u3002 \u5c0d\u65bc\u5176\u4ed6\u8a9e\u8a00\u548c\u5340\u57df\uff0c\u60a8\u61c9\u4fee\u6539\u8a72\u5de5\u5177\u4f86\u57f7\u884c\u9019\u9805\u6aa2\u67e5\u3002## \u57fa\u672c\u9077\u79fb\u6b65\u9a5f\n\u4ee5\u4e0b\u5c0f\u7bc0\u6982\u8ff0\u4e86\u8981\u57f7\u884c\u7684\u9077\u79fb\u6b65\u9a5f\u3002 \u60a8\u7121\u9700\u6309\u9806\u5e8f\u57f7\u884c\u9019\u4e9b\u624b\u52d5\u6b65\u9a5f\uff0c\u60a8\u751a\u81f3\u53ef\u80fd\u9700\u8981\u540c\u6642\u6216\u4ee5\u4e0d\u540c\u7684\u9806\u5e8f\u57f7\u884c\u9019\u4e9b\u6b65\u9a5f\u3002\u5728\u5be6\u969b\u9032\u884c\u66f4\u6539\u4e4b\u524d\uff0c\u8acb\u4ed4\u7d30\u95b1\u8b80\u76f8\u95dc\u6b65\u9a5f\u4e26\u958b\u59cb\u898f\u5283\u66f4\u6539\u3002\n\u904b\u884c\u9077\u79fb\u5de5\u5177\u5f8c\uff0c\u60a8\u53ef\u4ee5\u91cd\u65b0\u69cb\u5efa CX \u4ee3\u7406\u3002 \u60a8\u4ecd\u7136\u9700\u8981\u9032\u884c\u5927\u91cf\u9077\u79fb\u5de5\u4f5c\uff0c\u4f46\u624b\u52d5\u8f38\u5165\u7684\u5927\u90e8\u5206\u6578\u64da\u5c07\u986f\u793a\u5728\u60a8\u7684 CX \u4ee3\u7406\u548c TODO \u6587\u4ef6\u4e2d\u3002\n### \u5275\u5efa Dialogflow CX \u4ee3\u7406\n[\u5275\u5efa Dialogflow CX \u4ee3\u7406](https://cloud.google.com/dialogflow/cx/docs/concept/agent?hl=zh-cn#create) \uff08\u5982\u679c\u5c1a\u672a\u5275\u5efa\uff09\u3002\u8acb\u52d9\u5fc5\u4f7f\u7528\u8207\u60a8\u7684 ES \u4ee3\u7406\u76f8\u540c\u7684\u9ed8\u8a8d\u8a9e\u8a00\u3002\n### \u904b\u884c\u9077\u79fb\u5de5\u5177\n\u8acb\u6309\u7167\u4ee5\u4e0b\u6b65\u9a5f\u57f7\u884c\u8a72\u5de5\u5177\uff1a\n- [\u5728\u6a5f\u5668\u4e0a\u5b89\u88dd Go](https://go.dev/doc/install) \uff08\u5982\u679c\u5c1a\u672a\u5b89\u88dd\uff09\u3002\n- \u7232\u5de5\u5177\u4ee3\u78bc\u5275\u5efa\u4e00\u500b\u540d\u7232`migrate`\u7684\u76ee\u9304\u3002\n- \u5c07 [\u4e0a\u8ff0\u5de5\u5177\u4ee3\u78bc](#tool-code) \u8907\u88fd\u5230\u6b64\u76ee\u9304\u4e2d\u540d\u7232`main.go`\u7684\u6587\u4ef6\u4e2d\u3002\n- \u6839\u64da\u60a8\u7684\u652f\u6301\u8acb\u6c42\u4fee\u6539\u4ee3\u78bc\u3002\n- \u5728\u6b64\u76ee\u9304\u4e2d\u5275\u5efa\u4e00\u500b [Go \u6a21\u584a](https://go.dev/ref/mod#go-mod-init) \u3002\u4f8b\u5982\uff1a```\ngo mod init migrate\n```\n- \u5b89\u88dd Dialogflow ES V2 \u548c Dialogflow CX V3 Go \u5ba2\u6236\u7aef\u5eab\uff1a```\ngo get cloud.google.com/go/dialogflow/apiv2go get cloud.google.com/go/dialogflow/cx/apiv3\n```\n- \u78ba\u4fdd\u60a8\u5df2\u8a2d\u7f6e [\u5ba2\u6236\u7aef\u5eab\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/dialogflow/cx/docs/quick/setup?hl=zh-cn#auth) \u3002\n- \u904b\u884c\u8a72\u5de5\u5177\uff0c\u4e26\u5c07\u8f38\u51fa\u7d50\u679c\u4fdd\u5b58\u5230\u6587\u4ef6\u4e2d\uff1a```\ngo run main.go -es-project-id=<ES_PROJECT_ID> -cx-project-id=<CX_PROJECT_ID> \\-cx-region-id=<CX_REGION_ID> -cx-agent-id=<CX_AGENT_ID> -out-file=out.csv\n```\n### \u9077\u79fb\u5de5\u5177\u554f\u984c\u6392\u67e5\n\u5982\u679c\u60a8\u5728\u904b\u884c\u8a72\u5de5\u5177\u6642\u9047\u5230\u932f\u8aa4\uff0c\u8acb\u6aa2\u67e5\u4ee5\u4e0b\u5404\u9805\uff1a\n| \u932f\u8aa4               | \u89e3\u6c7a\u65b9\u6cd5                                                             |\n|:---------------------------------------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| RPC \u932f\u8aa4\uff0c\u8868\u793a\u8a13\u7df4\u77ed\u8a9e\u90e8\u5206\u63d0\u53ca\u4e86\u67d0\u500b\u672a\u91dd\u5c0d intent \u5b9a\u7fa9\u7684\u53c3\u6578\u3002 | \u5982\u679c\u60a8\u4e4b\u524d\u4f7f\u7528 ES API \u4ee5\u8207\u8a13\u7df4\u77ed\u8a9e\u4e0d\u4e00\u81f4\u7684\u65b9\u5f0f\u5275\u5efa intent \u53c3\u6578\uff0c\u5247\u53ef\u80fd\u6703\u767c\u751f\u9019\u7a2e\u60c5\u6cc1\u3002\u5982\u9700\u89e3\u6c7a\u6b64\u554f\u984c\uff0c\u8acb\u5f9e\u63a7\u5236\u6aaf\u91cd\u547d\u540d ES \u53c3\u6578\uff0c\u6aa2\u67e5\u60a8\u7684\u8a13\u7df4\u77ed\u8a9e\u662f\u5426\u6b63\u78ba\u4f7f\u7528\u4e86\u8a72\u53c3\u6578\uff0c\u7136\u5f8c\u9ede\u64ca\u201cSave\u201d\uff08\u4fdd\u5b58\uff09\u3002\u5982\u679c\u60a8\u7684\u8a13\u7df4\u77ed\u8a9e\u5f15\u7528\u4e86\u4e0d\u5b58\u5728\u7684\u53c3\u6578\uff0c\u4e5f\u53ef\u80fd\u6703\u767c\u751f\u9019\u7a2e\u60c5\u6cc1\u3002 |\n\u4fee\u5fa9\u932f\u8aa4\u5f8c\uff0c\u60a8\u9700\u8981\u5148\u6e05\u9664\u610f\u5716\u548c\u5be6\u9ad4\u7684 CX \u4ee3\u7406\uff0c\u7136\u5f8c\u624d\u80fd\u518d\u6b21\u904b\u884c\u9077\u79fb\u5de5\u5177\u3002\n### \u5c07 ES intent \u6578\u64da\u9077\u79fb\u81f3 CX\n\u8a72\u5de5\u5177\u6703\u5c07 intent \u8a13\u7df4\u77ed\u8a9e\u548c\u53c3\u6578\u9077\u79fb\u5230 CX intent\uff0c\u4f46\u9084\u6709\u8a31\u591a\u5176\u4ed6 ES intent \u5b57\u6bb5\u9700\u8981\u624b\u52d5\u9077\u79fb\u3002\nES intent \u53ef\u80fd\u9700\u8981\u76f8\u61c9\u7684 CX \u9801\u9762\u548c/\u6216\u76f8\u61c9\u7684 CX intent\u3002\n\u5982\u679c\u4f7f\u7528 ES intent \u5339\u914d\u5c07\u5c0d\u8a71\u5f9e\u7279\u5b9a\u5c0d\u8a71\u7bc0\u9ede\u8f49\u63db\u5230\u53e6\u4e00\u500b\u5c0d\u8a71\u7bc0\u9ede\uff0c\u5247\u60a8\u7684\u4ee3\u7406\u4e2d\u61c9\u8a72\u6709\u5169\u500b\u8207\u6b64 intent \u76f8\u95dc\u7684\u9801\u9762\uff1a\n- **\u5305\u542b intent \u8def\u7531\u7684\u539f\u59cb\u9801\u9762\uff0c\u8a72\u9801\u9762\u5c07\u8f49\u63db\u7232\u4e0b\u4e00\u9801** \uff1a\u539f\u59cb\u9801\u9762\u4e2d\u7684 intent \u8def\u7531\u53ef\u80fd\u5177\u6709\u985e\u4f3c\u65bc ES intent \u97ff\u61c9\u7684 CX \u57f7\u884c\u65b9\u5f0f\u6d88\u606f\u3002\u6b64\u9801\u9762\u4e2d\u53ef\u80fd\u6709\u8a31\u591a\u610f\u5716\u8def\u7531\u3002\u7576\u539f\u59cb\u9801\u9762\u8655\u65bc\u6d3b\u52d5\u72c0\u614b\u6642\uff0c\u9019\u4e9b\u610f\u5716\u8def\u7531\u53ef\u4ee5\u5c07\u5c0d\u8a71\u8f49\u63db\u7232\u8a31\u591a\u53ef\u80fd\u7684\u8def\u5f91\u3002\u8a31\u591a ES intent \u5c07\u5171\u7528\u540c\u4e00\u500b\u5c0d\u61c9\u7684 CX \u539f\u59cb\u9801\u9762\u3002\n- **\u4e0b\u4e00\u9801\uff0c\u5373\u539f\u59cb\u9801\u9762\u4e2d intent \u8def\u7531\u7684\u8f49\u63db\u76ee\u6a19** \uff1a\u4e0b\u4e00\u9801\u7684 CX \u689d\u76ee\u57f7\u884c\u65b9\u5f0f\u53ef\u80fd\u5305\u542b\u8207 ES intent \u97ff\u61c9\u985e\u4f3c\u7684 CX \u57f7\u884c\u65b9\u5f0f\u6d88\u606f\u3002\n\u5982\u679c ES intent \u5305\u542b\u5fc5\u9700\u53c3\u6578\uff0c\u60a8\u61c9\u5728\u8868\u55ae\u4e2d\u4f7f\u7528\u76f8\u540c\u53c3\u6578\u5275\u5efa\u76f8\u61c9\u7684 CX \u9801\u9762\u3002\nCX intent \u548c CX \u9801\u9762\u901a\u5e38\u5171\u7528\u76f8\u540c\u7684\u53c3\u6578\u5217\u8868\uff0c\u9019\u610f\u5473\u7740\uff0c\u55ae\u500b ES intent \u5177\u6709\u5c0d\u61c9\u7684 CX \u9801\u9762\u548c\u5c0d\u61c9\u7684 CX intent\u3002\u7576\u5339\u914d\u5230\u610f\u5716\u8def\u7531\u4e2d\u5e36\u6709\u53c3\u6578\u7684 CX \u610f\u5716\u6642\uff0c\u5c0d\u8a71\u901a\u5e38\u6703\u8f49\u63db\u5230\u5177\u6709\u76f8\u540c\u53c3\u6578\u7684\u9801\u9762\u3002\u5f9e intent \u5339\u914d\u4e2d\u63d0\u53d6\u7684\u53c3\u6578\u6703 [\u50b3\u64ad\u5230\u6703\u8a71\u53c3\u6578](https://cloud.google.com/dialogflow/cx/docs/concept/parameter?hl=zh-cn#prop) \uff0c\u9019\u4e9b\u53c3\u6578\u53ef\u7528\u65bc\u90e8\u5206\u6216\u5b8c\u5168\u586b\u5145\u9801\u9762\u8868\u55ae\u53c3\u6578\u3002\nCX \u4e2d\u4e0d\u5b58\u5728\u56de\u9000 intent \u548c\u9810\u5b9a\u7fa9\u7684\u5f8c\u7e8c intent\u3002\u8acb\u53c3\u95b1 [\u5167\u7f6e intent](#diff-built-in-intent) \u3002\n\u4e0b\u8868\u4ecb\u7d39\u77ad\u5982\u4f55\u5c07\u7279\u5b9a intent \u6578\u64da\u5f9e ES \u6620\u5c04\u5230 CX \u8cc7\u6e90\uff1a\n| ES intent \u6578\u64da | \u5c0d\u61c9\u7684\u5ba2\u6236\u9ad4\u9a57\u6578\u64da   | \u9700\u8981\u63a1\u53d6\u884c\u52d5                        |\n|:-----------------|:-----------------------------|:---------------------------------------------------------------------------------------------------------|\n| \u8a13\u7df4\u77ed\u8a9e   | \u610f\u5716\u8a13\u7df4\u77ed\u8a9e     | \u5df2\u7531\u5de5\u5177\u9077\u79fb\u3002\u5de5\u5177\u6703\u6aa2\u67e5\u7cfb\u7d71\u5be6\u9ad4\u652f\u6301\uff0c\u4f75\u7232\u4e0d\u53d7\u652f\u6301\u7684\u7cfb\u7d71\u5be6\u9ad4\u5275\u5efa TODO \u9805\u3002        |\n| \u4ee3\u7406\u97ff\u61c9   | \u5c65\u55ae\u97ff\u61c9\u6d88\u606f     | \u8acb\u53c3\u95b1\u4ee3\u7406\u97ff\u61c9\u3002                       |\n| \u5c0d\u8a71\u63a7\u5236\u4e0a\u4e0b\u6587 | \u7121       | \u8acb\u53c3\u95b1\u7d50\u69cb\u548c\u5c0d\u8a71\u8def\u5f91\u63a7\u5236\u3002                    |\n| \u7db2\u7d61\u9264\u5b50\u8a2d\u7f6e  | \u57f7\u884c\u65b9\u5f0f webhook \u914d\u7f6e  | \u8acb\u53c3\u95b1 webhook\u3002                       |\n| \u4e8b\u4ef6    | \u6d41\u7a0b\u7d1a\u6216\u7db2\u9801\u7d1a\u4e8b\u4ef6\u8655\u7406\u8173\u672c | \u8acb\u53c3\u95b1\u4e8b\u4ef6\u3002                        |\n| \u64cd\u4f5c    | \u57f7\u884c\u65b9\u5f0f\u7db2\u7d61\u9264\u5b50\u4ee3\u78bc   | \u8acb\u53c3\u95b1 webhook\u3002                       |\n| \u53c3\u6578    | intent \u53c3\u6578\u548c/\u6216\u7db2\u9801\u8868\u55ae\u53c3\u6578 | \u5df2\u6309\u5de5\u5177\u9077\u79fb\u5230 intent \u53c3\u6578\u3002\u5982\u679c\u5fc5\u9808\u63d0\u4f9b\u9019\u4e9b\u53c3\u6578\uff0c\u8a72\u5de5\u5177\u6703\u5275\u5efa TODO \u9805\uff0c\u4ee5\u4fbf\u53ef\u80fd\u9077\u79fb\u5230\u7db2\u9801\u3002\u8acb\u53c3\u95b1\u53c3\u6578\u3002 |\n| \u53c3\u6578\u63d0\u793a   | \u9801\u9762\u8868\u55ae\u53c3\u6578\u63d0\u793a    | \u8acb\u53c3\u95b1\u8868\u55ae\u586b\u5145\u3002                       |\n### \u5275\u5efa\u6d41\n\u7232\u6bcf\u500b\u6982\u8981\u5c0d\u8a71\u4e3b\u984c\u5275\u5efa\u6d41\u7a0b\u3002 \u6bcf\u500b\u6d41\u4e2d\u7684\u4e3b\u984c\u61c9\u8a72\u662f\u4e0d\u540c\u7684\uff0c\u4ee5\u4fbf\u5c0d\u8a71\u4e0d\u6703\u5728\u6d41\u4e4b\u9593\u983b\u7e41\u5730\u4f86\u56de\u5207\u63db\u3002\n\u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f\u8d85\u7d1a\u4ee3\u7406\uff0c\u5247\u6bcf\u500b\u5206\u4ee3\u7406\u61c9\u8a72\u8b8a\u6210\u4e00\u500b\u6216\u591a\u500b\u6d41\u3002\n### \u5f9e\u57fa\u672c\u5c0d\u8a71\u8def\u5f91\u958b\u59cb\n\u6700\u597d\u5728\u8fed\u4ee3\u66f4\u6539\u6642\u4f7f\u7528\u6a21\u64ec\u5668\u6e2c\u8a66\u4ee3\u7406\u3002\u56e0\u6b64\uff0c\u60a8\u9996\u5148\u61c9\u8a72\u95dc\u6ce8\u5c0d\u8a71\u65e9\u671f\u7684\u57fa\u672c\u5c0d\u8a71\u8def\u5f91\uff0c\u4e26\u5728\u66f4\u6539\u6642\u9032\u884c\u6e2c\u8a66\u3002\u5b8c\u6210\u9019\u4e9b\u5de5\u4f5c\u5f8c\uff0c\u7e7c\u7e8c\u66f4\u8a73\u7d30\u7684\u5c0d\u8a71\u8def\u5f91\u3002\n### \u6d41\u7d1a\u8207\u9801\u9762\u7d1a\u72c0\u614b\u8655\u7406\u7a0b\u5e8f\n\u5275\u5efa\u72c0\u614b\u8655\u7406\u7a0b\u5e8f\u6642\uff0c\u8acb\u8003\u616e\u5b83\u5011\u61c9\u8a72\u5728\u6d41\u7a0b\u7d1a\u5225\u9084\u662f\u9801\u9762\u7d1a\u5225\u61c9\u7528\u3002\u53ea\u8981\u6d41\uff08\u4ee5\u53ca\u6d41\u5167\u7684\u4efb\u4f55\u9801\u9762\uff09\u8655\u65bc\u6d3b\u52d5\u72c0\u614b\uff0c\u6d41\u7d1a\u8655\u7406\u7a0b\u5e8f\u5c31\u5728\u4f5c\u7528\u57df\u5167\u3002\u50c5\u7576\u7279\u5b9a\u7db2\u9801\u8655\u65bc\u6d3b\u52d5\u72c0\u614b\u6642\uff0c\u7db2\u9801\u7d1a\u8655\u7406\u7a0b\u5e8f\u624d\u4f4d\u65bc\u4f5c\u7528\u57df\u5167\u3002\u6d41\u7d1a\u8655\u7406\u7a0b\u5e8f\u985e\u4f3c\u65bc\u6c92\u6709\u8f38\u5165\u4e0a\u4e0b\u6587\u7684 ES intent\u3002\u9801\u9762\u7d1a\u8655\u7406\u7a0b\u5e8f\u985e\u4f3c\u65bc\u5177\u6709\u8f38\u5165\u4e0a\u4e0b\u6587\u7684 ES intent\u3002\n### \u7db2\u7d61\u9264\u5b50\u4ee3\u78bc\nCX \u7684 webhook \u8acb\u6c42\u548c\u97ff\u61c9\u5c6c\u6027\u6709\u6240\u4e0d\u540c\u3002 \u8acb\u53c3\u95b1 [\u7db2\u7d61\u9264\u5b50\u90e8\u5206](#diff-webhook) \u3002\n### \u77e5\u8b58\u9023\u63a5\u5668\nCX \u5c1a\u4e0d\u652f\u6301 [\u77e5\u8b58\u9023\u63a5\u5668](https://cloud.google.com/dialogflow/es/docs/knowledge-connectors?hl=zh-cn) \u3002 \u60a8\u9700\u8981\u4f5c\u7232\u5e38\u898f intent \u4f86\u5be6\u73fe\u9019\u4e9b\u76ee\u7684\uff0c\u6216\u8005\u7b49\u5230 Dialogflow CX \u652f\u6301\u77e5\u8b58\u9023\u63a5\u5668\u3002\n### \u4ee3\u7406\u8a2d\u7f6e\n\u67e5\u770b\u60a8\u7684 [ES \u4ee3\u7406\u8a2d\u7f6e](https://cloud.google.com/dialogflow/es/docs/agents-settings?hl=zh-cn) \uff0c\u4e26\u6839\u64da\u9700\u8981\u8abf\u6574 [CX \u4ee3\u7406\u8a2d\u7f6e](https://cloud.google.com/dialogflow/cx/docs/concept/agent?hl=zh-cn#settings) \u3002\n**\u6ce8\u610f** \uff1a\u5982\u679c\u60a8\u7684\u4ee3\u7406\u8a2d\u7f6e\u672a\u914d\u7f6e\u81ea\u52d5\u8a13\u7df4\uff0c\u5247\u60a8\u9700\u8981\u5148\u624b\u52d5\u8a13\u7df4\u4ee3\u7406\uff0c\u7136\u5f8c\u624d\u80fd\u6e2c\u8a66\u66f4\u6539\u3002\n### \u5229\u7528 TODO \u6587\u4ef6\n\u9077\u79fb\u5de5\u5177\u6703\u8f38\u51fa\u4e00\u500b CSV \u6587\u4ef6\u3002\u6b64\u5217\u8868\u4e2d\u7684\u9805\u76ee\u4e3b\u8981\u95dc\u6ce8\u53ef\u80fd\u9700\u8981\u6ce8\u610f\u7684\u7279\u5b9a\u6578\u64da\u3002 \u5c07\u6b64\u6587\u4ef6\u5c0e\u5165\u96fb\u5b50\u8868\u683c\u3002 \u89e3\u6790\u96fb\u5b50\u8868\u683c\u4e2d\u7684\u6bcf\u9805\u5167\u5bb9\uff0c\u4f7f\u7528\u4e00\u5217\u6a19\u8a18\u7232\u5df2\u5b8c\u6210\u3002\n### API \u4f7f\u7528\u9077\u79fb\n\u5982\u679c\u60a8\u7684\u7cfb\u7d71\u4f7f\u7528 ES API \u9032\u884c\u904b\u884c\u6642\u6216\u8a2d\u8a08\u6642\u8abf\u7528\uff0c\u60a8\u9700\u8981\u66f4\u65b0\u6b64\u4ee3\u78bc\u624d\u80fd\u4f7f\u7528 [CX API](https://cloud.google.com/dialogflow/cx/docs/reference/api-overview?hl=zh-cn) \u3002 \u5982\u679c\u60a8\u50c5\u5728\u904b\u884c\u6642\u4f7f\u7528\u6aa2\u6e2c intent \u8abf\u7528\uff0c\u90a3\u9ebc\u6b64\u66f4\u65b0\u61c9\u8a72\u76f8\u7576\u7c21\u55ae\u3002\n### \u96c6\u6210\n\u5982\u679c\u60a8\u7684\u4ee3\u7406\u4f7f\u7528\u96c6\u6210\uff0c\u8acb\u53c3\u95b1 [\u96c6\u6210\u90e8\u5206](#diff-integration) \uff0c\u4e26\u6839\u64da\u9700\u8981\u9032\u884c\u66f4\u6539\u3002\n## \u5efa\u8b70\u7684\u9077\u79fb\u6b65\u9a5f\n\u4ee5\u4e0b\u5c0f\u7bc0\u6982\u8ff0\u4e86\u63a8\u85a6\u7684\u9077\u79fb\u6b65\u9a5f\u3002\n### \u9a57\u8b49\n\u8acb\u4f7f\u7528 [\u4ee3\u7406\u9a57\u8b49](https://cloud.google.com/dialogflow/cx/docs/concept/validation?hl=zh-cn) \u4f86\u6aa2\u67e5\u4ee3\u7406\u662f\u5426\u9075\u5faa\u4e86\u6700\u4f73\u5be6\u8e10\u3002\n### \u6e2c\u8a66\n\u57f7\u884c\u4e0a\u8ff0\u624b\u52d5\u9077\u79fb\u6b65\u9a5f\u6642\uff0c\u60a8\u61c9\u4f7f\u7528 [\u6a21\u64ec\u5668](https://cloud.google.com/dialogflow/cx/docs/concept/console?hl=zh-cn#simulator) \u6e2c\u8a66\u4ee3\u7406\u3002\u60a8\u7684\u4ee3\u7406\u4f3c\u4e4e\u53ef\u4ee5\u6b63\u5e38\u904b\u884c\u5f8c\uff0c\u60a8\u61c9\u6bd4\u8f03 ES \u548c CX \u4ee3\u7406\u4e4b\u9593\u7684\u5c0d\u8a71\uff0c\u4e26\u9a57\u8b49\u884c\u7232\u662f\u5426\u76f8\u4f3c\u6216\u662f\u5426\u6709\u6539\u9032\u3002\n\u4f7f\u7528\u6a21\u64ec\u5668\u6e2c\u8a66\u9019\u4e9b\u5c0d\u8a71\u6642\uff0c\u60a8\u61c9\u8a72\u5275\u5efa [\u6e2c\u8a66\u7528\u4f8b](https://cloud.google.com/dialogflow/cx/docs/concept/test-case?hl=zh-cn) \uff0c\u4ee5\u9632\u6b62\u672a\u4f86\u518d\u6b21\u767c\u751f\u8ff4\u6b78\u3002\n### \u74b0\u5883\n\u67e5\u770b\u60a8\u7684 [ES \u74b0\u5883](https://cloud.google.com/dialogflow/es/docs/agents-versions?hl=zh-cn) \u4e26\u6839\u64da\u9700\u8981\u66f4\u65b0 [CX \u74b0\u5883](https://cloud.google.com/dialogflow/cx/docs/concept/version?hl=zh-cn) \u3002", "guide": "Dialogflow"}