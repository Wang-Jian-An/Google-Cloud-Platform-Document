{"title": "Dialogflow - Feedback prebuilt component", "url": "https://cloud.google.com/dialogflow/cx/docs/concept/prebuilt-component/feedback", "abstract": "# Dialogflow - Feedback prebuilt component\nThe feedback [prebuilt component](/dialogflow/cx/docs/concept/prebuilt-component) collects quantitative and qualitative feedback from the end-user.\nThe component first performs a lookup using the configured [Check last feedback webhook](#check_last_feedback) to check whether recent feedback was provided by that particular end-user. If no recent feedback exists, the component asks the user to provide a quantitative feedback score between one and five. If the feedback is negative, the component can optionally collect freeform qualitative feedback from the user.\n", "content": "## Limitations\nIn addition to the [common prebuilt component limitations](/dialogflow/cx/docs/concept/prebuilt-component#limits) , this prebuilt component has the following limitations:\n- The component assumes that the customer phone numbers are maintained in a CRM (Customer Relationship Management) system or other service.\n- Existing customers using an alternate phone number to contact will not be authenticated by this component.## Sample dialogs\nThe following sample dialogs demonstrate common scenarios handled by this prebuilt component. The sample dialogs demonstrate behavior when the component is called via telephony, which triggers the Default Welcome Intent and the first agent response at the start of the conversation.\n### Positive feedback\nThe response from the [Check last feedback webhook](#check_last_feedback) indicates that the end-user has not provided feedback recently. Agent requests user's feedback score, and the user provides a score indicating a positive experience.\n| User input | Agent response                                                                         |\n|-------------:|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n|   nan | Thank you for calling. Your feedback is important to us. Please take a moment to share your opinion of the service you received today by answering a few short questions. On a scale of 1 to 5, where 1 is most unsatisfied and 5 is most satisfied, how satisfied are you with the service you received today? |\n|   5 | nan                                                                            |\n|   nan | Great, thank you for your positive feedback.                                                                 |\n### Negative feedback\nThe response from the [Check last feedback webhook](#check_last_feedback) indicates that the end-user has not provided feedback recently. Agent requests user's feedback score, and the user provides a score indicating a negative experience. The agent then requests qualitative feedback from the user.\n| User input          | Agent response                                                                         |\n|:--------------------------------------------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| nan            | Thank you for calling. Your feedback is important to us. Please take a moment to share your opinion of the service you received today by answering a few short questions. On a scale of 1 to 5, where 1 is most unsatisfied and 5 is most satisfied, how satisfied are you with the service you received today? |\n| 2             | nan                                                                            |\n| nan            | Please tell us how we can improve this experience for you.                                                              |\n| Some of my questions weren't answered completely. | nan                                                                            |\n| nan            | Thanks for your feedback. We apologize for the inconvenience caused to you and strive to give you a better experience next time.                                            |\n### Recent feedback\nThe response from the [Check last feedback webhook](#check_last_feedback) indicates that the end-user has provided feedback recently, so the agent does not ask the user for further input.\n| User input | Agent response     |\n|-------------:|:----------------------------------|\n|   nan | Thank you for reaching out to us. |\n### Invalid input\nThe response from the [Check last feedback webhook](#check_last_feedback) indicates that the end-user has not provided feedback recently. Agent requests user's feedback score, and the user provides invalid input multiple times. The component ends the flow with failure.\n| User input | Agent response                                                                         |\n|:-------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| nan   | Thank you for calling. Your feedback is important to us. Please take a moment to share your opinion of the service you received today by answering a few short questions. On a scale of 1 to 5, where 1 is most unsatisfied and 5 is most satisfied, how satisfied are you with the service you received today? |\n| -1   | nan                                                                            |\n| nan   | Sorry, we didn't get that. Please tell us a feedback score that is 1, 2, 3, 4, or 5.                                                       |\n| 100   | nan                                                                            |\n| nan   | Sorry, we didn't get that. Please tell us a feedback score that is 1, 2, 3, 4, or 5.                                                       |\n| Nice   | nan                                                                            |\n| nan   | We're sorry, but the maximum number of retries has been exceeded. Please try again after some time.                                                    |\n## Naming conventions\nThis prebuilt component uses the following naming conventions:\n| Feature | Format            | Example           |\n|:----------|:------------------------------------------------------|:-------------------------------------------------|\n| Flow  | [Component Name]          | Feedback           |\n| Parameter | [param_name]           | feedback_score         |\n| Webhook | prebuilt_components_[component_name]:[webhook_action] | prebuilt_components_feedback:last_feedback_check |\n## Input parameters\nInput parameters are parameters that are used to configure certain behaviors of the component. The parameters will be used by one or more conditions within the flow to determine how the component should behave. Flow-scoped parameters must be set on the start page of the component as described below. Session-scoped parameters may be set either by a calling flow, or on the start page of this component.\nThis prebuilt component accepts the following input parameters:\n| Parameter Name     | Description                                                                                                                  | Input Format |\n|:-------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:---------------|\n| $session.params.phone_number | User's local phone number, which is used to identify the user in API requests. The phone number should not include the country code.                                                                                    | string   |\n| $flow.minimum_feedback_score | This parameter indicates the threshold for what is considered a negative or positive feedback score. A low score (equal to or less than this parameter's value) indicates a negative experience and a high score (greater than this parameter's value) indicates a positive experience. If a low score is provided by the end-user, qualitative feedback is be requested from the user, asking them how the experience can be improved. The default value for this parameter is 3. | integer  |\n| $flow.feedback_max_retry_count | This is a configurable parameter that captures the maximum number of retries that are provided to a user. The value assigned to this parameter should be one less than the number of the tries available. The default value is 2, which means that the caller gets three tries to provide the requested information.                                        | integer  |\n## Output parameters\nOutput parameters are session parameters that will remain active after exiting the component. These parameters contain important information collected by the component. This prebuilt component provides values for the following output parameters:\n| Parameter Name | Description                                                                                                                                                                           | Output Format |\n|:-----------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------|\n| feedback_score | This parameter captures the feedback score provided by the end-user. Valid values are integers between one and five, inclusive.                                                                                                                                              | integer   |\n| feedback_comment | This parameter captures the qualitative comments provided by the end-user, if any.                                                                                                                                                          | string   |\n| transfer_reason | This parameter indicates the reason the flow exited, if it was not successful. The returned value is one of: agent: the end-user requested a human agent at some point during the conversation. denial_of_information: the end-user declined to share information requested by the component. max_no_input: the conversation reached the maximum number of retries for no-input events. See no-input built-in events. max_no_match: the conversation reached the maximum number of retries for no-match events. See no-match built-in events. webhook_error: a webhook error occurred. See webhook.error built-in event. webhook_not_found: a webhook URL was unreachable. See webhook.error.not-found built-in event. | string   |\n## Basic setup\nTo set up this prebuilt component:\n- [Import the prebuilt component](/dialogflow/cx/docs/concept/prebuilt-component#import) .\n- Configure the provided [flexible webhooks](/dialogflow/cx/docs/concept/webhook#flexible) with your external services, see Webhook setup below.## Webhook setup\nIn order to use this component, you will need to configure the included [flexible webhooks](/dialogflow/cx/docs/concept/webhook#flexible) to retrieve needed information from your external services.\n### Check last feedback\nThe `prebuilt_components_feedback:last_feedback_check` webhook is used by the component to check whether a user has provided feedback recently. The time period during which previously-provided feedback is considered recent is defined by the external service integrated with this webhook, which can be configured by the service's owner.\nThe following parameters are provided by the component as inputs to the API request.\n| Parameter Name | Description                  | Input Format |\n|:-----------------|:--------------------------------------------------------------------------------|:---------------|\n| phone_number  | User's local phone number, without the country code, used to identify the user. | integer  |\nThe following parameters are pulled from the API response to be used by the component.\n| Parameter Name    | Description                                                                          | Output Format |\n|:---------------------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:----------------|\n| last_feedback_time_elapsed | Indicates whether feedback has been provided by the user recently. true indicates a period of time has elapsed since the user last gave feedback and that no recent feedback was found. false indicates that feedback was provided recently, and not enough time has elapsed since the user last gave feedback. | boolean   |### Update feedback\nThe `prebuilt_components_feedback:update_feedback` webhook is used by the component to send collected feedback to an external service.\nThe following parameters are provided by the component as inputs to the API request.\n| Parameter Name | Description                              | Input Format |\n|:-----------------|:---------------------------------------------------------------------------------------------------------------------------------|:---------------|\n| phone_number  | User's local phone number, without the country code, used to identify the user.             | string   |\n| feedback_score | This parameter stores the feedback score provided by the end-user. Expected values are integers between one and five, inclusive. | integer  |\n| feedback_comment | This parameter stores the qualitative feedback comment provided by the end-user.             | string   |### Complete\nYour agent and its webhooks should now be set up and ready to test.", "guide": "Dialogflow"}