{"title": "Dialogflow - Session entities", "url": "https://cloud.google.com/dialogflow/es/docs/entities-session", "abstract": "# Dialogflow - Session entities\nA represents a conversation between a Dialogflow agent and an end-user. You can create special entities, called , during a session. Session entities can extend or replace custom entity types and only exist during the session that they were created for. All session data, including session entities, is stored by Dialogflow for 20 minutes.\nFor example, if your agent has a `@fruit` entity type that includes \"pear\" and \"grape\", that entity type could be updated to include \"apple\" or \"orange\", depending on the information your agent collects from the end-user. The updated entity type would have the \"apple\" or \"orange\" entity entry for the rest of the session.\n", "content": "## Creating session entities with fulfillment\nYou can create session entities with [fulfillment](/dialogflow/docs/fulfillment-overview) . The [WebhookResponse](/dialogflow/docs/reference/common-types#webhookresponse) type contains a field called `sessionEntityTypes` that is used to set session entities.\nThe following examples show how to set a `fruit` entity type's entity entries to `apple` and `orange` for the current session.\n### Example WebhookResponse:\n```\n{\n \"fulfillmentMessages\": [ {\n  \"text\": {\n  \"text\": [   \"Choose apple or orange\"\n  ]\n  }\n }\n ],\n \"sessionEntityTypes\":[ {\n  \"name\":\"projects/project-id/agent/sessions/session-id/entityTypes/fruit\",\n  \"entities\":[  {\n   \"value\":\"APPLE_KEY\",\n   \"synonyms\":[   \"apple\",\n   \"green apple\",\n   \"crabapple\"\n   ]\n  },\n  {\n   \"value\":\"ORANGE_KEY\",\n   \"synonyms\":[   \"orange\"\n   ]\n  }\n  ],\n  \"entityOverrideMode\":\"ENTITY_OVERRIDE_MODE_OVERRIDE\"\n }\n ]\n}\n```\n### Example using the Actions on Google client library:\nIf you are using the [Actions on Google client library](https://github.com/actions-on-google/actions-on-google-nodejs) , you can use the [Session Entities plugin](https://github.com/actions-on-google/dialogflow-session-entities-plugin-nodejs) .\nYour code would look similar to the following:\n```\nconst { sessionEntitiesHelper } = require('actions-on-google-dialogflow-session-entities-plugin')const app = dialogflow()\u00a0 \u00a0 .use(sessionEntitiesHelper())app.intent('input.welcome', (conv) => {\u00a0 conv.ask('make your choice: apple or orange?');\u00a0 // Set the fruit session entity values to 'apple' and 'orange'.\u00a0 conv.sessionEntities.add({\u00a0 \u00a0 name: 'fruit',\u00a0 \u00a0 entities: [{\u00a0 \u00a0 \u00a0 value: 'APPLE_KEY',\u00a0 \u00a0 \u00a0 synonyms: [\u00a0 \u00a0 \u00a0 \u00a0 'apple', 'green apple', 'crabapple'\u00a0 \u00a0 \u00a0 ]\u00a0 \u00a0 }, {\u00a0 \u00a0 \u00a0 value: 'ORANGE_KEY',\u00a0 \u00a0 \u00a0 synonyms: ['orange']\u00a0 \u00a0 }]\u00a0 });\u00a0 conv.sessionEntities.send();});\n```\n## Creating session entities with the API\n**Note:** Session entity API methods do not work with Google Assistant integration. Use the fulfillment option for Google Assistant integration.\nYou create, manage, and update session entities using the [SessionEntityTypes](/dialogflow/docs/reference/common-types#sessionentitytypes) type.", "guide": "Dialogflow"}