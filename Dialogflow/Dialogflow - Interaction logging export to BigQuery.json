{"title": "Dialogflow - Interaction logging export to BigQuery", "url": "https://cloud.google.com/dialogflow/cx/docs/concept/export-bq", "abstract": "# Dialogflow - Interaction logging export to BigQuery\nYou can export [interaction logging](/dialogflow/cx/docs/concept/agent#settings-general) to [BigQuery](/bigquery/docs) . Once configured, all live interaction logging is written to your BigQuery table. This provides you with advanced analysis tools that can help you debug and improve your agent and to discover patterns in conversation data.\n", "content": "## Limitations\nThe following limitations apply:\n- The Dialogflow agent and the BigQuery dataset must be in the same project.\n- At most 500 turns can be exported for each conversation.## Table description\nEach row of the table contains one conversational turn with the following columns:\n| Column    | Type  | Description                |\n|:---------------------|:----------|:-------------------------------------------------------------------------|\n| project_id   | STRING | The project ID.               |\n| agent_id    | STRING | The agent ID.               |\n| conversation_name | STRING | The fully qualified resource name for the session.      |\n| turn_position  | INTEGER | The conversational turn number.           |\n| request_time   | TIMESTAMP | The time of the conversational turn.          |\n| language_code  | STRING | The language tag.              |\n| request    | JSON  | The detect intent request.            |\n| response    | JSON  | The detect intent response.            |\n| partial_responses | JSON  | Partial responses if applicable.           |\n| derived_data   | JSON  | Additional metadata for this conversational turn.      |\n| conversation_signals | JSON  | NLU related analytics data. See ConversationSignals for the JSON schema. |\n| bot_answer_feedback | JSON  | Answer feedback if provided.            |\n## Configuration\nTo configure interaction logging export:\n- Ensure that [interaction logging](/dialogflow/cx/docs/concept/agent#settings-general) is enabled.\n- Follow the BigQuery [dataset creation guide](/bigquery/docs/datasets#create-dataset) to create a dataset. Note the dataset name, as you will need this in the next step.\n- Follow the BigQuery [table creation guide](/bigquery/docs/tables) to create a table with a SQL schema definition. Use the following SQL statement for creation:```\nCREATE TABLE <your_dataset_name>.dialogflow_bigquery_export_data(\u00a0 project_id STRING,\u00a0 agent_id STRING,\u00a0 conversation_name STRING,\u00a0 turn_position INTEGER,\u00a0 request_time TIMESTAMP,\u00a0 language_code STRING,\u00a0 request JSON,\u00a0 response JSON,\u00a0 partial_responses JSON,\u00a0 derived_data JSON,\u00a0 conversation_signals JSON,\u00a0 bot_answer_feedback JSON);\n```\n- Configure your [agent settings](/dialogflow/cx/docs/concept/agent#settings-general) to enable BigQuery export, and to provide the dataset and table names created above. **Note:** If your agent is protected by a Customer Managed Encryption Key (CMEK), you will see a warning if the destination BigQuery table is not protected by CMEK.", "guide": "Dialogflow"}