{"title": "Dialogflow - Manage agents with the API", "url": "https://cloud.google.com/dialogflow/cx/docs/how/agent-create-api", "abstract": "# Dialogflow - Manage agents with the API\nNormally, you create and delete agents using the console. However, in certain advanced scenarios, you may find it easier to use the API.\n", "content": "## Create an agent\nThe following examples show how to call the `Create` method for the `Agent` type.\nBefore using any of the request data, make the following replacements:- : your Google Cloud project ID\n- : your [region ID](/dialogflow/cx/docs/concept/region) \nHTTP method and URL:\n```\nPOST https://REGION_ID-dialogflow.googleapis.com/v3/projects/PROJECT_ID/locations/REGION_ID/agents\n```\nRequest JSON body:\n```\n{\n \"displayName\": \"My display name\",\n \"defaultLanguageCode\": \"en\",\n \"timeZone\": \"America/New_York\"\n}\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"name\": \"projects/PROJECT_ID/locations/REGION_ID/agents/AGENT_ID\",\n \"displayName\": \"My display name\",\n \"defaultLanguageCode\": \"en\",\n \"timeZone\": \"America/New_York\",\n \"startFlow\": \"projects/PROJECT_ID/locations/REGION_ID/agents/AGENT_ID/flows/00000000-0000-0000-0000-000000000000\",\n \"advancedSettings\": {\n \"loggingSettings\": {}\n }\n}\n```\nTo authenticate to Dialogflow, set up Application Default Credentials.  For more information, see [Set up authentication for a local development environment](/docs/authentication/provide-credentials-adc#local-dev) .\n [View on GitHub](https://github.com/GoogleCloudPlatform/java-docs-samples/blob/HEAD/dialogflow-cx/src/main/java/dialogflow/cx/CreateAgent.java) \n```\nimport com.google.cloud.dialogflow.cx.v3.Agent;import com.google.cloud.dialogflow.cx.v3.Agent.Builder;import com.google.cloud.dialogflow.cx.v3.AgentsClient;import com.google.cloud.dialogflow.cx.v3.AgentsSettings;import java.io.IOException;public class CreateAgent {\u00a0 public static void main(String[] args) throws IOException {\u00a0 \u00a0 // TODO(developer): Replace these variables before running the sample.\u00a0 \u00a0 String projectId = \"my-project-id\";\u00a0 \u00a0 String displayName = \"my-display-name\";\u00a0 \u00a0 createAgent(projectId, displayName);\u00a0 }\u00a0 public static Agent createAgent(String parent, String displayName) throws IOException {\u00a0 \u00a0 String apiEndpoint = \"global-dialogflow.googleapis.com:443\";\u00a0 \u00a0 AgentsSettings agentsSettings = AgentsSettings.newBuilder().setEndpoint(apiEndpoint).build();\u00a0 \u00a0 // Note: close() needs to be called on the AgentsClient object to clean up resources\u00a0 \u00a0 // such as threads. In the example below, try-with-resources is used,\u00a0 \u00a0 // which automatically calls close().\u00a0 \u00a0 try (AgentsClient client = AgentsClient.create(agentsSettings)) {\u00a0 \u00a0 \u00a0 // Set the details of the Agent to create\u00a0 \u00a0 \u00a0 Builder build = Agent.newBuilder();\u00a0 \u00a0 \u00a0 build.setDefaultLanguageCode(\"en\");\u00a0 \u00a0 \u00a0 build.setDisplayName(displayName);\u00a0 \u00a0 \u00a0 // Correct format for timezone is location/city\u00a0 \u00a0 \u00a0 // For example America/Los_Angeles, Europe/Madrid, Asia/Tokyo\u00a0 \u00a0 \u00a0 build.setTimeZone(\"America/Los_Angeles\");\u00a0 \u00a0 \u00a0 Agent agent = build.build();\u00a0 \u00a0 \u00a0 String parentPath = String.format(\"projects/%s/locations/%s\", parent, \"global\");\u00a0 \u00a0 \u00a0 // Calls the create agent api and returns the created Agent\u00a0 \u00a0 \u00a0 Agent response = client.createAgent(parentPath, agent);\u00a0 \u00a0 \u00a0 System.out.println(response);\u00a0 \u00a0 \u00a0 return response;\u00a0 \u00a0 }\u00a0 }}\n```To authenticate to Dialogflow, set up Application Default Credentials.  For more information, see [Set up authentication for a local development environment](/docs/authentication/provide-credentials-adc#local-dev) .\n [View on GitHub](https://github.com/GoogleCloudPlatform/nodejs-docs-samples/blob/HEAD/dialogflow-cx/create-agent.js) \n```\nconst parent = 'projects/' + projectId + '/locations/global';const api_endpoint = 'global-dialogflow.googleapis.com';const agent = {\u00a0 displayName: displayName,\u00a0 defaultLanguageCode: 'en',\u00a0 timeZone: 'America/Los_Angeles',};const {AgentsClient} = require('@google-cloud/dialogflow-cx');const client = new AgentsClient({apiEndpoint: api_endpoint});async function setAgentSample() {\u00a0 const request = {\u00a0 \u00a0 agent,\u00a0 \u00a0 parent,\u00a0 };\u00a0 const [response] = await client.createAgent(request);\u00a0 console.log(`response: ${JSON.stringify(response, null, 2)}`);\u00a0 // Delete created agent resource\u00a0 client.deleteAgent({name: response.name});}await setAgentSample();\n```To authenticate to Dialogflow, set up Application Default Credentials.  For more information, see [Set up authentication for a local development environment](/docs/authentication/provide-credentials-adc#local-dev) .\n [View on GitHub](https://github.com/GoogleCloudPlatform/python-docs-samples/blob/HEAD/dialogflow-cx/create_agent.py) \n```\nfrom google.cloud.dialogflowcx_v3.services.agents.client import AgentsClientfrom google.cloud.dialogflowcx_v3.types.agent import Agentdef create_agent(project_id, display_name):\u00a0 \u00a0 parent = \"projects/\" + project_id + \"/locations/global\"\u00a0 \u00a0 agents_client = AgentsClient()\u00a0 \u00a0 agent = Agent(\u00a0 \u00a0 \u00a0 \u00a0 display_name=display_name,\u00a0 \u00a0 \u00a0 \u00a0 default_language_code=\"en\",\u00a0 \u00a0 \u00a0 \u00a0 time_zone=\"America/Los_Angeles\",\u00a0 \u00a0 )\u00a0 \u00a0 response = agents_client.create_agent(request={\"agent\": agent, \"parent\": parent})\u00a0 \u00a0 return response\n```\n## Delete an agent\nThe following examples show how to call the `Delete` method for the `Agent` type.\nBefore using any of the request data, make the following replacements:- : your Google Cloud project ID\n- : your [region ID](/dialogflow/cx/docs/concept/region) \n- : your agent ID, found in the agent creation response\nHTTP method and URL:\n```\nDELETE https://REGION_ID-dialogflow.googleapis.com/v3/projects/PROJECT_ID/locations/REGION_ID/agents/AGENT_ID\n```\nTo send your request, expand one of these options:You should receive a successful status code (2xx) and an empty response.", "guide": "Dialogflow"}