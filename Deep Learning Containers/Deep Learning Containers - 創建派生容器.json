{"title": "Deep Learning Containers - \u5275\u5efa\u6d3e\u751f\u5bb9\u5668", "url": "https://cloud.google.com/deep-learning-containers/docs/derivative-container?hl=zh-cn", "abstract": "# Deep Learning Containers - \u5275\u5efa\u6d3e\u751f\u5bb9\u5668\n\u672c\u9801\u9762\u4ecb\u7d39\u5982\u4f55\u6839\u64da\u5176\u4e2d\u4e00\u500b\u53ef\u7528\u7684\u6a19\u6e96 Deep Learning Containers \u6620\u50cf\u5275\u5efa\u6d3e\u751f\u5bb9\u5668\u3002\n\u5982\u9700\u5b8c\u6210\u672c\u6307\u5357\u4e2d\u7684\u6b65\u9a5f\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 [Cloud Shell](https://console.cloud.google.com?cloudshell=true&hl=zh-cn) \u6216\u5b89\u88dd\u4e86 [Google Cloud CLI](https://cloud.google.com/sdk/docs?hl=zh-cn) \u7684\u4efb\u4f55\u74b0\u5883\u3002\n", "content": "## \u6e96\u5099\u5de5\u4f5c\n\u5728\u958b\u59cb\u4e4b\u524d\uff0c\u8acb\u78ba\u4fdd\u60a8\u5df2\u5b8c\u6210\u4ee5\u4e0b\u6b65\u9a5f\u3002\n- \u5b8c\u6210 [\u672c\u5730 Deep Learning Containers \u5bb9\u5668\u4f7f\u7528\u5165\u9580](https://cloud.google.com/deep-learning-containers/docs/getting-started-local?hl=zh-cn) \u7684\u201c\u6e96\u5099\u5de5\u4f5c\u201d\u90e8\u5206\u4e2d\u7684\u8a2d\u7f6e\u6b65\u9a5f\u3002\n- \u78ba\u4fdd\u60a8\u7684 Google Cloud \u9805\u76ee\u5df2\u5553\u7528\u7d50\u7b97\u529f\u80fd\u3002 [\u77ad\u89e3\u5982\u4f55\u5553\u7528\u7d50\u7b97\u529f\u80fd](https://cloud.google.com/billing/docs/how-to/modify-project?hl=zh-cn) \n- \u5553\u7528 Artifact Registry API\u3002 [\u5553\u7528 API](https://console.cloud.google.com/flows/enableapi?apiid=artifactregistry.googleapis.com&hl=zh-cn) ## \u6d41\u7a0b\n\u5982\u9700\u5275\u5efa\u884d\u751f\u5bb9\u5668\uff0c\u8acb\u4f7f\u7528\u8207\u4ee5\u4e0b\u793a\u4f8b\u985e\u4f3c\u7684\u6d41\u7a0b\uff1a\n- \u5275\u5efa\u521d\u59cb Dockerfile \u4e26\u904b\u884c\u4fee\u6539\u547d\u4ee4\u3002\u9996\u5148\uff0c\u4f7f\u7528\u5176\u4e2d\u4e00\u7a2e [\u53ef\u7528\u7684\u6620\u50cf\u985e\u578b](https://cloud.google.com/deep-learning-containers/docs/choosing-container?hl=zh-cn) \u4f86\u5275\u5efa Deep Learning Containers \u5bb9\u5668\u3002\u7136\u5f8c\u4f7f\u7528 conda\u3001pip \u6216 Jupyter \u547d\u4ee4\u4f86\u6839\u64da\u9700\u8981\u4fee\u6539\u5bb9\u5668\u6620\u50cf\u3002\n- \u69cb\u5efa\u4e26\u63a8\u9001\u5bb9\u5668\u6620\u50cf\u3002\u69cb\u5efa\u5bb9\u5668\u6620\u50cf\uff0c\u7136\u5f8c\u5c07\u5176\u63a8\u9001\u5230 Compute Engine \u670d\u52d9\u8cec\u865f\u53ef\u8a2a\u554f\u7684\u4f4d\u7f6e\u3002## \u5275\u5efa\u521d\u59cb Dockerfile \u4e26\u904b\u884c\u4fee\u6539\u547d\u4ee4\n\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u9078\u64c7 Deep Learning Containers \u6620\u50cf\u985e\u578b\uff0c\u4e26\u5c0d\u5bb9\u5668\u6620\u50cf\u7a0d\u4f5c\u66f4\u6539\u3002\u6b64\u793a\u4f8b\u5c55\u793a\u77ad\u5982\u4f55\u5f9e TensorFlow \u6620\u50cf\u5165\u624b\uff0c\u4e26\u4f7f\u7528\u6700\u65b0\u7248\u672c\u7684 TensorFlow \u66f4\u65b0\u8a72\u6620\u50cf\u3002 \u5c07\u4ee5\u4e0b\u547d\u4ee4\u5beb\u5165 Dockerfile\uff1a\n```\nFROM us-docker.pkg.dev/deeplearning-platform-release/gcr.io/tf-gpu:latest# Uninstall the container's TensorFlow version and install the latest versionRUN pip uninstall -y tensorflow && \\\u00a0 \u00a0 pip install tensorflow\n```\n## \u69cb\u5efa\u4e26\u63a8\u9001\u5bb9\u5668\u6620\u50cf\n\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u69cb\u5efa\u5bb9\u5668\u6620\u50cf\u4e26\u5c07\u5176\u63a8\u9001\u5230 Artifact Registry\uff0c\u60a8\u7684 Google Compute Engine \u670d\u52d9\u5e33\u865f\u53ef\u5728 Artifact Registry \u4e2d\u8a2a\u554f\u8a72\u6620\u50cf\u3002\n\u5275\u5efa\u4ee3\u78bc\u5eab\u4e26\u5c0d\u5176\u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff1a\n```\nexport PROJECT=$(gcloud config list project --format \"value(core.project)\")gcloud artifacts repositories create REPOSITORY_NAME \\\u00a0 \u00a0 --repository-format=docker \\\u00a0 \u00a0 --location=LOCATIONgcloud auth configure-docker LOCATION-docker.pkg.dev\n```\n\u66ff\u63db\u4ee5\u4e0b\u5167\u5bb9\uff1a\n- ``\uff1a\u4ee3\u78bc\u5eab\u7684\u55ae\u5340\u57df\u6216\u591a\u5340\u57df [\u4f4d\u7f6e](https://cloud.google.com/artifact-registry/docs/repositories?hl=zh-cn#locations) \uff0c\u4f8b\u5982`us`\u3002\u5982\u9700\u67e5\u770b\u53d7\u652f\u6301\u4f4d\u7f6e\u7684\u5217\u8868\uff0c\u8acb\u904b\u884c\u547d\u4ee4`gcloud artifacts locations list`\u3002\n- ``\uff1a\u60a8\u8981\u5275\u5efa\u7684\u4ee3\u78bc\u5eab\u7684\u540d\u7a31\uff0c\u4f8b\u5982`my-tf-repo`\u3002\n\u7136\u5f8c\uff0c\u69cb\u5efa\u4e26\u63a8\u9001\u6620\u50cf\uff1a\n```\nexport IMAGE_NAME=\"LOCATION-docker.pkg.dev/${PROJECT}/REPOSITORY_NAME/tf-custom:v1\"docker build . -t $IMAGE_NAMEdocker push $IMAGE_NAME\n```", "guide": "Deep Learning Containers"}