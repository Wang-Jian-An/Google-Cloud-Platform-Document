{"title": "Google Kubernetes Engine (GKE) - GKE Autopilot \u5b89\u5168\u529f\u80fd", "url": "https://cloud.google.com/kubernetes-engine/docs/concepts/autopilot-security?hl=zh-cn", "abstract": "# Google Kubernetes Engine (GKE) - GKE Autopilot \u5b89\u5168\u529f\u80fd\n\u672c\u9801\u9762\u4ecb\u7d39\u904b\u884c GKE \u6642\u5efa\u8b70\u63a1\u7528\u7684 Google Kubernetes Engine (GKE) Autopilot \u4e2d\u7684\u5b89\u5168\u529f\u80fd\u3001\u914d\u7f6e\u548c\u8a2d\u7f6e\u3002\n", "content": "## \u54ea\u4e9b\u4eba\u61c9\u4f7f\u7528\u6b64\u9801\u9762\uff1f\n\u672c\u9801\u9762\u9069\u7528\u65bc\u5e0c\u671b\u77ad\u89e3 Google \u5c08\u9580\u61c9\u7528\u65bc Autopilot \u96c6\u7fa3\u7684\u5b89\u5168\u9650\u5236\uff0c\u4ee5\u53ca\u53ef\u5728 Autopilot \u4e2d\u4f7f\u7528\u7684\u5b89\u5168\u529f\u80fd\u7684\u5b89\u5168\u7ba1\u7406\u54e1\u3002\n\u60a8\u9084\u61c9\u8a72\u95b1\u8b80 [GKE \u5b89\u5168\u6982\u89bd](https://cloud.google.com/kubernetes-engine/docs/concepts/security-overview?hl=zh-cn) \uff0c\u5176\u4e2d\u4ecb\u7d39\u4e86\u9069\u7528\u65bc\u6240\u6709 GKE \u96c6\u7fa3\u3001\u7db2\u7d61\u914d\u7f6e\u548c\u5de5\u4f5c\u8ca0\u8f09\u7684\u5b89\u5168\u5f37\u5316\u9078\u9805\u3001\u63aa\u65bd\u548c\u5efa\u8b70\u3002\n## Autopilot \u4e2d\u7684\u5b89\u5168\u63aa\u65bd\nAutopilot \u96c6\u7fa3\u9ed8\u8a8d\u5553\u7528\u4e26\u61c9\u7528\u5b89\u5168\u6700\u4f73\u5be6\u8e10\u548c\u8a2d\u7f6e\uff0c\u5305\u62ec\u5b89\u5168\u6982\u89bd\u4ee5\u53ca [\u5f37\u5316\u96c6\u7fa3\u5b89\u5168\u6027](https://cloud.google.com/kubernetes-engine/docs/how-to/hardening-your-cluster?hl=zh-cn) \u4e2d\u7684\u8a31\u591a\u5efa\u8b70\u3002\n\u5982\u679c\u60a8\u60f3\u8981\u7372\u53d6\u9069\u5408\u81ea\u5df1\u61c9\u7528\u5834\u666f\u7684\u63a8\u85a6\u8cc7\u6e90\uff0c\u8acb\u8df3\u8f49\u81f3 [\u6309\u61c9\u7528\u5834\u666f\u5283\u5206\u7684\u5b89\u5168\u8cc7\u6e90](#use-case-resources) \u3002 \u4ee5\u4e0b\u90e8\u5206\u4ecb\u7d39\u4e86 Autopilot \u7232\u60a8\u61c9\u7528\u7684\u5b89\u5168\u653f\u7b56\u3002\n### Autopilot \u548c Kubernetes Pod \u5b89\u5168\u6a19\u6e96\nKubernetes \u9805\u76ee\u6709\u4e00\u7d44\u5b89\u5168\u6e96\u5247\uff0c\u540d\u7232 \uff0c\u5b83\u5011\u5b9a\u7fa9\u4e86\u4ee5\u4e0b\u653f\u7b56\uff1a\n- **\u7279\u6b0a** \uff1a\u7121\u8a2a\u554f\u6b0a\u9650\u9650\u5236\u3002\u5728 Autopilot \u4e2d\u4e0d\u4f7f\u7528\u3002\n- **\u57fa\u6e96** \uff1a\u963b\u6b62\u5df2\u77e5\u7684\u6b0a\u9650\u63d0\u5347\u9014\u5f91\u3002\u5141\u8a31\u5927\u591a\u6578\u5de5\u4f5c\u8ca0\u8f09\u5728\u4e0d\u9032\u884c\u91cd\u5927\u66f4\u6539\u7684\u60c5\u6cc1\u4e0b\u904b\u884c\u3002\n- **\u53d7\u9650** \uff1a\u6700\u9ad8\u7d1a\u5225\u7684\u5b89\u5168\u9632\u8b77\u3002\u9700\u8981\u5c0d\u5927\u591a\u6578\u5de5\u4f5c\u8ca0\u8f09\u9032\u884c\u91cd\u5927\u66f4\u6539\u3002\nAutopilot \u6703\u61c9\u7528\u57fa\u6e96\u653f\u7b56\u4e26\u9032\u884c\u67d0\u4e9b\u4fee\u6539\uff0c\u4ee5\u78ba\u4fdd\u53ef\u7528\u6027\u3002Autopilot \u9084\u61c9\u7528\u53d7\u9650\u653f\u7b56\u4e2d\u7684\u8a31\u591a\u9650\u5236\u689d\u4ef6\uff0c\u4f46\u907f\u514d\u4e86\u963b\u6b62\u5927\u591a\u6578\u5de5\u4f5c\u8ca0\u8f09\u904b\u884c\u7684\u9650\u5236\u3002Autopilot \u4f7f\u7528 Google \u63a7\u5236\u7684\u51c6\u5165\u63a7\u5236\u5668\u5728\u96c6\u7fa3\u7d1a\u5c64\u61c9\u7528\u9019\u4e9b\u9650\u5236\u689d\u4ef6\u3002\u5982\u679c\u60a8\u9700\u8981\u61c9\u7528\u5176\u4ed6\u9650\u5236\u4ee5\u7b26\u5408\u5b8c\u6574\u7684\u53d7\u9650\u653f\u7b56\uff0c\u5247\u53ef\u4ee5\u9078\u64c7\u5728\u7279\u5b9a\u547d\u540d\u7a7a\u9593\u4e2d\u4f7f\u7528 [PodSecurity \u51c6\u5165\u63a7\u5236\u5668](https://cloud.google.com/kubernetes-engine/docs/how-to/podsecurityadmission?hl=zh-cn) \u3002\n\u4e0b\u8868\u4ecb\u7d39\u4e86 Autopilot \u96c6\u7fa3\u5982\u4f55\u5be6\u73fe\u57fa\u6e96\u548c\u53d7\u9650\u653f\u7b56\u3002\u6709\u95dc\u6b64\u8868\u4e2d\u6bcf\u500b\u63a7\u4ef6\u7684\u8aaa\u660e\uff0c\u8acb\u53c3\u95b1 [Pod \u5b89\u5168\u6a19\u6e96](https://kubernetes.io/docs/concepts/security/pod-security-standards/) \u4e2d\u7684\u76f8\u61c9\u689d\u76ee\u3002\n\u5728\u8a55\u4f30\u5408\u898f\u6027\u6642\uff0c\u6211\u5011\u8003\u616e\u4e86\u9650\u5236\u689d\u4ef6\u5982\u4f55\u61c9\u7528\u65bc\u60a8\u81ea\u5df1\u7684\u5de5\u4f5c\u8ca0\u8f09\u3002\u9019\u4e0d\u5305\u62ec\u7d93\u904e\u9a57\u8b49\u7684 Google Cloud \u5408\u4f5c\u4f19\u4f34\u5de5\u4f5c\u8ca0\u8f09\u548c\u9700\u8981\u7279\u5b9a\u6b0a\u9650\u624d\u80fd\u6b63\u5e38\u904b\u884c\u7684\u7cfb\u7d71\u5de5\u4f5c\u8ca0\u8f09\u3002\n| \u63a7\u4ef6    | \u57fa\u6e96\u653f\u7b56\u5408\u898f\u6027 | \u53d7\u9650\u653f\u7b56\u5408\u898f\u6027 | \u66f4\u591a\u4fe1\u606f                                                                                                |\n|:-------------------|:-----------------|:-----------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| HostProcess  | nan    | nan    | Autopilot \u6703\u963b\u6b62 HostProcess\u3002                                                                                          |\n| \u4e3b\u6a5f\u547d\u540d\u7a7a\u9593  | nan    | nan    | Autopilot \u6703\u963b\u6b62\u4e3b\u6a5f\u547d\u540d\u7a7a\u9593\u3002\u7d93\u904e\u9a57\u8b49\u7684\u5408\u4f5c\u4f19\u4f34\u7684\u67d0\u4e9b\u5bb9\u5668\u53ef\u4ee5\u4f7f\u7528\u4e3b\u6a5f\u547d\u540d\u7a7a\u9593\u3002                                                                              |\n| \u7279\u6b0a\u5bb9\u5668   | nan    | nan    | \u9ed8\u8a8d\u60c5\u6cc1\u4e0b\uff0cAutopilot \u6703\u963b\u6b62\u7279\u6b0a\u5bb9\u5668\u3002\u7232\u4e86\u67d0\u4e9b\u76ee\u7684\uff08\u4f8b\u5982\u904b\u884c\u5b89\u5168\u548c\u76e3\u63a7\u5de5\u5177\uff09\uff0cAutopilot \u5141\u8a31\u4f7f\u7528\u7d93\u904e\u9a57\u8b49\u7684\u5408\u4f5c\u4f19\u4f34\u63d0\u4f9b\u7684\u7279\u6b0a\u5bb9\u5668\u3002                                                                 |\n| Linux \u529f\u80fd   | nan    | nan    | \u9ed8\u8a8d\u60c5\u6cc1\u4e0b\uff0cAutopilot \u5de5\u4f5c\u8ca0\u8f09\u53ea\u80fd\u8a2a\u554f\u57fa\u6e96 Pod \u5b89\u5168\u6a19\u6e96\u4e2d\u6307\u5b9a\u7684\u529f\u80fd\u3002 \u60a8\u53ef\u4ee5\u624b\u52d5\u5553\u7528\u4ee5\u4e0b\u529f\u80fd\uff1a NET_RAW\uff08\u7528\u65bc ping \u64cd\u4f5c\uff09\u548c SYS_PTRACE\uff08\u7528\u65bc\u8abf\u8a66\uff09\uff1a\u6dfb\u52a0\u5230 Pod SecurityContext NET_ADMIN\uff08\u7528\u65bc Istio \u7b49\u670d\u52d9\u7db2\u683c\uff09\uff1a\u5728\u96c6\u7fa3\u5275\u5efa\u547d\u4ee4\u4e2d\u6307\u5b9a --workload-policies=allow-net-admin\u3002\u9069\u7528\u65bc\u904b\u884c GKE 1.27 \u53ca\u66f4\u9ad8\u7248\u672c\u7684\u65b0\u96c6\u7fa3\u548c\u5347\u7d1a\u7684\u73fe\u6709\u96c6\u7fa3\u3002 Autopilot \u9084\u5141\u8a31\u67d0\u4e9b\u7d93\u904e\u9a57\u8b49\u7684\u5408\u4f5c\u4f19\u4f34\u5de5\u4f5c\u8ca0\u8f09\u8a2d\u7f6e\u5df2\u4e1f\u68c4\u7684\u529f\u80fd\u3002 |\n| hostPath \u5377  | \u90e8\u5206\u7b26\u5408   | \u90e8\u5206\u7b26\u5408   | Autopilot \u5141\u8a31\u5bb9\u5668\u8acb\u6c42\u53ea\u8b80\u6b0a\u9650\u4f86\u8a2a\u554f\u7528\u65bc\u8abf\u8a66\u7684 /var/log\uff0c\u4f46\u6703\u62d2\u7d55\u6240\u6709\u5176\u4ed6\u8b80\u5beb\u6b0a\u9650\u3002                                                                             |\n| hostPort   | nan    | nan    | \u4e0d\u5141\u8a31\u8a2d\u7f6e\u7279\u5b9a\u7684\u4e3b\u6a5f\u7aef\u53e3\uff0c\u9019\u6a23\u53ef\u4ee5\u6e1b\u5c11\u4e00\u4e9b\u8abf\u5ea6\u554f\u984c\uff0c\u4e26\u9632\u6b62\u610f\u5916\u6216\u6709\u610f\u5730\u76f4\u63a5\u516c\u958b\u670d\u52d9\u7db2\u7d61\u3002\u60a8\u53ef\u4ee5\u624b\u52d5\u8a2d\u7f6e\u5df2\u77e5\u7bc4\u570d\u5167\u7684\u96a8\u6a5f\u4e3b\u6a5f\u7aef\u53e3\u5206\u914d\uff0c\u4ee5\u652f\u6301\u904a\u6232\u670d\u52d9\u5668\u7b49\u76f4\u63a5\u9023\u63a5\u7db2\u7d61\u61c9\u7528\u3002                                                        |\n| AppArmor   | nan    | nan    | \u9ed8\u8a8d\u60c5\u6cc1\u4e0b\uff0cAppArmor docker \u5b89\u5168\u914d\u7f6e\u6587\u4ef6\u81ea\u52d5\u61c9\u7528\u65bc Container-Optimized OS\u3002                                                                               |\n| SELinux   | nan    | nan    | \u672a\u61c9\u7528 SELinux\uff0c\u56e0\u7232\u5df2\u61c9\u7528 AppArmor\u3002Pod \u5b89\u5168\u6a19\u6e96\u4e5f\u4e0d\u8981\u6c42\u4f7f\u7528 SELinux\u3002                                                                                |\n| /proc \u88dd\u8f09\u985e\u578b  | nan    | nan    | GKE \u672a\u8a2d\u7f6e ProcMountType \u529f\u80fd\u6a19\u8a8c\u3002\u5982\u679c Pod securityContext \u5c07 procMount \u8a2d\u7f6e\u7232\u201cUnmasked\u201d\uff0c\u5247 GKE \u6703\u81ea\u52d5\u5c07\u5176\u66ff\u63db\u7232\u201cDefault\u201d\u3002                                                                   |\n| seccomp \u914d\u7f6e\u6587\u4ef6 | nan    | nan    | Autopilot \u5c07RuntimeDefault seccomp \u914d\u7f6e\u6587\u4ef6\u61c9\u7528\u65bc\u6240\u6709\u5de5\u4f5c\u8ca0\u8f09\u3002\u60a8\u53ef\u4ee5\u901a\u904e\u5728 Pod \u898f\u7bc4\u4e2d\u5c07\u914d\u7f6e\u6587\u4ef6\u8a2d\u7f6e\u7232 Unconfined \u4f86\u624b\u52d5\u66ff\u63db\u6b64\u8a2d\u7f6e\u3002                                                                 |\n| sysctls   | nan    | nan    | GKE \u4e0d\u6703\u8a2d\u7f6e --allowed-unsafe-sysctls kubelet \u6a19\u8a8c\uff0c\u56e0\u6b64\u5177\u6709\u4e0d\u5b89\u5168 sysctl \u7684 Pod \u7121\u6cd5\u8abf\u5ea6\u3002\u7232\u4e86\u63d0\u4f9b\u984d\u5916\u7684\u4fdd\u8b77\uff0c\u5f9e 2023 \u5e74 7 \u6708 11 \u65e5\u8d77\uff0c1.27 \u53ca\u66f4\u9ad8\u7248\u672c\u7684\u65b0\u96c6\u7fa3\u9084\u6709\u4e00\u500b\u653f\u7b56\u898f\u5247\uff0c\u7528\u65bc\u5f37\u5236\u57f7\u884c securityContext \u8a2d\u7f6e\u4e26\u62d2\u7d55\u90a3\u4e9b\u4f7f\u7528\u4e0d\u5b89\u5168 sysctl \u7684 Pod\u3002                                    |\n| \u5377\u985e\u578b    | nan    | nan    | Autopilot \u50c5\u5141\u8a31\u53d7\u9650\u653f\u7b56\u4e2d\u7684\u5377\u985e\u578b\uff0c\u4f46\u6dfb\u52a0\u4e86\u4ee5\u4e0b\u5167\u5bb9\uff1aHostPath \u5377\uff08\u5177\u6709\u7528\u65bc\u8abf\u8a66\u7684 /var/log \u7684\u53ea\u8b80\u6b0a\u9650\uff09\u3001gcePersistentDisk\uff08\u7528\u65bc Compute Engine \u6c38\u4e45\u6027\u78c1\u76e4\uff09\u548c nfs\uff08\u7528\u65bc\u7db2\u7d61\u6587\u4ef6\u7cfb\u7d71\u5377\uff09\u3002                                                   |\n| \u63d0\u5347\u6b0a\u9650   | nan    | nan    | \u6b64\u8a2d\u7f6e\u53ea\u80fd\u7232\u672a\u4ee5\u6839\u7528\u6236\u8eab\u4efd\u904b\u884c\u7684\u5bb9\u5668\u63d0\u4f9b\u4fdd\u8b77\u3002\u884c\u696d\u8abf\u67e5\u986f\u793a\uff0c76% \u7684\u5bb9\u5668\u4ee5\u6839\u7528\u6236\u8eab\u4efd\u904b\u884c\uff0c\u56e0\u6b64 Autopilot \u5141\u8a31\u4ee5\u6839\u7528\u6236\u8eab\u4efd\u904b\u884c\uff0c\u4ee5\u652f\u6301\u5927\u591a\u6578\u5de5\u4f5c\u8ca0\u8f09\u3002\u6b64\u8a2d\u7f6e\u76ee\u524d\u9084\u5141\u8a31\u4f7f\u7528\u6587\u4ef6\u7cfb\u7d71\u529f\u80fd\u4f86\u89e3\u6c7a Kubernetes \u6839\u529f\u80fd\u8655\u7406\u5b58\u5728\u7684\u7f3a\u9677\uff0c\u5728\u5c07\u5de5\u4f5c\u8ca0\u8f09\u6b0a\u9650\u5206\u96e2\u5230\u975e\u6839\u7528\u6236\u7684\u904e\u7a0b\u4e2d\u4e5f\u5f88\u6709\u7528\u3002                               |\n| \u4ee5\u975e\u6839\u7528\u6236\u8eab\u4efd\u904b\u884c | nan    | nan    | \u884c\u696d\u8abf\u67e5\u8868\u660e\uff0c76% \u7684\u5bb9\u5668\u4ee5\u6839\u7528\u6236\u8eab\u4efd\u904b\u884c\uff0c\u56e0\u6b64 Autopilot \u5141\u8a31\u4ee5\u6839\u7528\u6236\u8eab\u4efd\u904b\u884c\uff0c\u4ee5\u652f\u6301\u5927\u591a\u6578\u5de5\u4f5c\u8ca0\u8f09\u3002                                                                         |\n| \u4ee5\u975e\u6839\u7528\u6236\u8eab\u4efd\u904b\u884c | nan    | nan    | \u5bb9\u5668\u53ef\u4ee5\u5c07 runAsUser \u8a2d\u7f6e\u7232 0\u3002 \u884c\u696d\u8abf\u67e5\u8868\u660e\uff0c76% \u7684\u5bb9\u5668\u4ee5\u6839\u7528\u6236\u8eab\u4efd\u904b\u884c\uff0c\u56e0\u6b64 Autopilot \u5141\u8a31\u4ee5\u6839\u7528\u6236\u8eab\u4efd\u904b\u884c\uff0c\u4ee5\u652f\u6301\u5927\u591a\u6578\u5de5\u4f5c\u8ca0\u8f09                                                                 |\n### \u5167\u7f6e\u5b89\u5168\u914d\u7f6e\n\u6839\u64da\u884c\u696d\u6700\u4f73\u5be6\u8e10\u548c\u6211\u5011\u7684\u5c08\u696d\u77e5\u8b58\uff0cGoogle \u5c07\u8a31\u591a\u5167\u7f6e\u5b89\u5168\u8a2d\u7f6e\u61c9\u7528\u65bc Autopilot \u96c6\u7fa3\u3002\u4e0b\u8868\u4ecb\u7d39\u4e86 Autopilot \u7232\u60a8\u61c9\u7528\u7684\u4e00\u4e9b\u5b89\u5168\u914d\u7f6e\uff1a\n| \u914d\u7f6e      | \u8aaa\u660e                                                                                                                                                                                                                                                                                          |\n|:-------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| \u4e3b\u6a5f\u9078\u9805     | \u6c92\u6709 hostNetwork\uff0c\u56e0\u7232 GKE \u6703\u7ba1\u7406\u60a8\u7684\u7bc0\u9ede\u3002 \u96a8\u6a5f hostPort \u5206\u914d\u3002 \u5beb\u5165\u6a21\u5f0f\u4e0b\u6c92\u6709 hostPath \u5377\u3002\u60a8\u53ef\u4ee5\u5728\u8b80\u53d6\u6a21\u5f0f\u4e0b\u5c07 hostPath \u5377\u7528\u65bc /var/log/ \u8def\u5f91\u524d\u7db4\u3002 \u6c92\u6709\u4e3b\u6a5f\u547d\u540d\u7a7a\u9593\u3002                                                                                                                                                                                                                                                |\n| Linux \u529f\u80fd    | \u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b Linux \u529f\u80fd\uff1a \"SETPCAP\", \"MKNOD\", \"AUDIT_WRITE\", \"CHOWN\", \"DAC_OVERRIDE\", \"FOWNER\", \"FSETID\", \"KILL\", \"SETGID\", \"SETUID\", \"NET_BIND_SERVICE\", \"SYS_CHROOT\", \"SETFCAP\", \"SYS_PTRACE\" \u60a8\u9084\u53ef\u4ee5\u624b\u52d5\u5553\u7528\u4ee5\u4e0b\u529f\u80fd\uff1a NET_RAW\uff08\u7528\u65bc ping \u64cd\u4f5c\uff09\uff1a\u6dfb\u52a0\u5230 Pod SecurityContext\u3002 SYS_PTRACE\uff08\u7528\u65bc\u8abf\u8a66\uff09\uff1a\u6dfb\u52a0\u5230 Pod SecurityContext\u3002 NET_ADMIN\uff08\u7528\u65bc Istio \u7b49\u670d\u52d9\u7db2\u683c\uff09\uff1a\u5275\u5efa\u96c6\u7fa3\u6216\u66f4\u65b0\u73fe\u6709\u96c6\u7fa3\u6642\u4f7f\u7528 --workload-policies=allow-net-admin\u3002\u4e4b\u5f8c\uff0c\u5411 Pod SecurityContext \u6dfb\u52a0\u8a72\u529f\u80fd\u3002\u9069\u7528\u65bc GKE 1.27 \u7248\u53ca\u66f4\u9ad8\u7248\u672c\u3002 \u6b64\u529f\u80fd\u53ef\u4ee5\u6388\u4e88\u5ee3\u6cdb\u7684\u7db2\u7d61\u64cd\u4f5c\u8a2a\u554f\u6b0a\u9650\uff0c\u4f8b\u5982\u8def\u7531\u8868\u548c\u9632\u706b\u7246\u7684\u5beb\u5165\u6b0a\u9650\u3002\u653b\u64ca\u8005\u53ef\u80fd\u6703\u5229\u7528\u6b64\u8a2a\u554f\u6b0a\u9650\u5728\u60a8\u7684\u96c6\u7fa3\u4e2d\u57f7\u884c\u63d0\u5347\u6b0a\u9650\u653b\u64ca\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 CAP_NET_ADMIN \u806f\u6a5f\u5e6b\u52a9\u9801\u3002 \u5728 1.21 \u4e4b\u524d\u7684 GKE \u7248\u672c\u4e2d\uff0c\u4e0d\u652f\u6301 \"SYS_PTRACE\" \u529f\u80fd\u3002                                                                                                    |\n| \u7279\u6b0a\u5bb9\u5668     | \u9664\u975e\u5bb9\u5668\u7531 Google Cloud \u5408\u4f5c\u4f19\u4f34\u90e8\u7f72\uff0c\u5426\u5247\u5bb9\u5668\u7121\u6cd5\u5728\u7279\u6b0a\u6a21\u5f0f\u4e0b\u904b\u884c\u3002 \u7279\u6b0a\u5bb9\u5668\u53ef\u4ee5\u66f4\u6539\u5e95\u5c64\u7bc0\u9ede\uff0c\u4f8b\u5982\u66f4\u6539 kubelet\u3002\u6b64\u8a2a\u554f\u6b0a\u9650\u53ef\u80fd\u6703\u589e\u52a0 Pod \u88ab\u7834\u89e3\u7684\u5f71\u97ff\u3002                                                                                                                                                                                                                                                    |\n| GKE \u7ba1\u7406\u7684\u547d\u540d\u7a7a\u9593  | \u7232\u5b89\u5168\u8d77\u898b\uff0cAutopilot \u4e0d\u5141\u8a31\u5728 GKE \u7ba1\u7406\u7684\u547d\u540d\u7a7a\u9593\uff08\u5982 kube-system\uff09\u4e2d\u90e8\u7f72\u5de5\u4f5c\u8ca0\u8f09\u3002                                                                                                                                                                                                                                                                      |\n| \u5bb9\u5668\u9694\u96e2     | Autopilot \u5c0d\u5bb9\u5668\u5be6\u65bd\u4ee5\u4e0b\u9650\u5236\uff0c\u4ee5\u9650\u5236\u5bb9\u5668\u9003\u9038\u6f0f\u6d1e\u7684\u5f71\u97ff\uff1a Linux \u529f\u80fd\u548c\u5167\u6838\u5b89\u5168 Autopilot \u5c07 RuntimeDefault seccomp \u914d\u7f6e\u6587\u4ef6\u61c9\u7528\u65bc\u96c6\u7fa3\u4e2d\u7684\u6240\u6709 Pod\uff0c\u9664\u975e Pod \u4f7f\u7528 GKE Sandbox\u3002 GKE Sandbox \u6703\u5f37\u5236\u57f7\u884c\u4e3b\u6a5f\u9694\u96e2\uff0c\u4e26\u5ffd\u7565 Pod \u6e05\u55ae\u4e2d\u6307\u5b9a\u7684 seccomp \u898f\u5247\u3002\u6c99\u76d2\u88ab\u8996\u7232 GKE Sandbox Pod \u7684\u5b89\u5168\u908a\u754c\u3002 Autopilot \u6703\u4e1f\u68c4\u6240\u6709\u5bb9\u5668\u7684 CAP_NET_RAW Linux \u529f\u80fd\u3002\u6b64\u6b0a\u9650\u4e26\u4e0d\u5e38\u7528\uff0c\u4e00\u76f4\u662f\u591a\u7a2e\u8f49\u7fa9\u6f0f\u6d1e\u7684\u4e3b\u984c\u3002ping \u547d\u4ee4\u53ef\u80fd\u6703\u5728\u5bb9\u5668\u5167\u5931\u6557\uff0c\u56e0\u7232\u6b64\u529f\u80fd\u5df2\u88ab\u4e1f\u68c4\u3002 \u60a8\u53ef\u4ee5\u901a\u904e\u5728 Pod SecurityContext \u4e2d\u9032\u884c\u8a2d\u7f6e\uff0c\u624b\u52d5\u91cd\u65b0\u5553\u7528\u6b64\u529f\u80fd\u3002 Autopilot \u6703\u4e1f\u68c4\u6240\u6709\u5bb9\u5668\u7684 CAP_NET_ADMIN Linux \u529f\u80fd\u3002\u5982\u9700\u91cd\u65b0\u5553\u7528\u6b64\u529f\u80fd\uff0c\u8acb\u5728\u96c6\u7fa3\u5275\u5efa\u6216\u66f4\u65b0\u547d\u4ee4\u4e2d\u6307\u5b9a --workload-policies=allow-net-admin \u6a19\u8a8c\u3002\u67d0\u4e9b\u5de5\u4f5c\u8ca0\u8f09\uff08\u4f8b\u5982 Istio\uff09\u9700\u8981 NET_ADMIN\u3002 Autopilot \u6703\u5553\u7528 GKE \u7684\u5de5\u4f5c\u8ca0\u8f09\u8eab\u4efd\u806f\u5408\uff0c\u4ee5\u9632 Pod \u8a2a\u554f\u7bc0\u9ede\u4e0a\u7684\u654f\u611f\u5143\u6578\u64da\u3002 Autopilot \u6703\u963b\u6b62\u8a2d\u7f6e spec.externalIPs \u5b57\u6bb5\u7684 Kubernetes \u670d\u52d9\uff0c\u4ee5\u9632\u7bc4 CVE-2020-8554\u3002 Autopilot \u50c5\u5141\u8a31\u4f7f\u7528\u4ee5\u4e0b\u5377\u985e\u578b\uff1a \"configMap\", \"csi\", \"downwardAPI\", \"emptyDir\", \"gcePersistentDisk\", \"nfs\", \"persistentVolumeClaim\", \"projected\", \"secret\" \u5176\u4ed6\u985e\u578b\u7684\u5377\u6703\u88ab\u963b\u6b62\uff0c\u56e0\u7232\u5b83\u5011\u9700\u8981\u7bc0\u9ede\u7279\u6b0a\u3002\u9ed8\u8a8d\u60c5\u6cc1\u4e0b\uff0cHostPath \u5377\u6703\u88ab\u963b\u6b62\uff0c\u4f46\u5bb9\u5668\u53ef\u4ee5\u8acb\u6c42\u53ea\u8b80\u6b0a\u9650\u4f86\u8a2a\u554f\u7528\u65bc\u8abf\u8a66\u7684 /var/log \u8def\u5f91\u3002 |\n| Pod \u7d1a\u5c64\u5b89\u5168\u653f\u7b56\u5f37\u5236\u57f7\u884c | Autopilot \u652f\u6301\u7232 Pod \u7d1a\u5b89\u5168\u653f\u7b56\u4f7f\u7528\u5f37\u5236\u57f7\u884c\u6a5f\u5236\uff0c\u4f8b\u5982 PodSecurity \u51c6\u5165\u63a7\u5236\u5668\u3001Gatekeeper \u6216 Policy Controller\u3002 \u4f46\u662f\uff0c\u5982\u679c\u672c\u9801\u9762\u4e2d\u4ecb\u7d39\u7684\u5167\u7f6e\u5b89\u5168\u914d\u7f6e\u5df2\u7d93\u6eff\u8db3\u60a8\u7684\u8981\u6c42\uff0c\u60a8\u53ef\u80fd\u5c31\u4e0d\u9700\u8981\u4f7f\u7528\u4ee5\u4e0a\u4efb\u4f55\u6a5f\u5236\u3002                                                                                                                                                                                                                                         |\n| \u901a\u904e SSH \u9023\u63a5\u5230\u7bc0\u9ede  | Autopilot \u6703\u963b\u6b62\u5c0d\u7bc0\u9ede\u7684 SSH \u8a2a\u554f\u3002GKE \u6703\u8655\u7406\u7bc0\u9ede\u7684\u6240\u6709\u64cd\u4f5c\u65b9\u9762\uff0c\u5305\u62ec\u7bc0\u9ede\u904b\u884c\u72c0\u6cc1\u548c\u7bc0\u9ede\u4e0a\u904b\u884c\u7684\u6240\u6709 Kubernetes \u7d44\u4ef6\u3002 \u60a8\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528 Kubernetes exec \u529f\u80fd\u9060\u7a0b\u9023\u63a5\u5230\u6b63\u5728\u904b\u884c\u7684\u5bb9\u5668\uff0c\u4ee5\u5728\u5bb9\u5668\u4e2d\u57f7\u884c\u8abf\u8a66\u547d\u4ee4\uff0c\u5305\u62ec\u9023\u63a5\u5230\u4ea4\u4e92\u5f0f shell\uff08\u4f8b\u5982\u4f7f\u7528 kubectl exec -it deploy/YOUR_DEPLOYMENT -- sh\uff09\u3002                                                                                                                                                                                                                   |\n| \u7528\u6236\u6a21\u64ec     | GKE 1.22.4-gke.1501 \u53ca\u66f4\u9ad8\u7248\u672c\u652f\u6301\u91dd\u5c0d\u6240\u6709\u7528\u6236\u5b9a\u7fa9\u7684\u7528\u6236\u548c\u7fa3\u7d44\u7684\u7528\u6236\u6a21\u64ec\u3002\u7121\u6cd5\u6a21\u64ec\u7cfb\u7d71\u7528\u6236\u548c\u7fa3\u7d44\uff08\u4f8b\u5982 kube-apiserver \u7528\u6236\u548c system:masters \u7fa3\u7d44\uff09\u3002                                                                                                                                                                                                                                                      |\n| \u8b8a\u66f4\u52d5\u614b\u51c6\u5165 webhook  | Autopilot \u6703\u4fee\u6539\u8b8a\u66f4 webhook\uff0c\u4ee5\u9632\u6b62\u4ee3\u7ba1\u5f0f\u547d\u540d\u7a7a\u9593\u4e2d\u7684\u8cc7\u6e90\uff08\u4f8b\u5982 kube-system\uff09\u88ab\u6514\u622a\u3002 Autopilot \u9084\u6703\u62d2\u7d55\u53ef\u6307\u5b9a\u4ee5\u4e0b\u4e00\u9805\u6216\u591a\u9805\u8cc7\u6e90\u4ee5\u53ca\u9019\u4e9b\u8cc7\u6e90\u7684\u4efb\u4f55\u5b50\u8cc7\u6e90\u7684 webhook\u3002 - group: \"\" resource: nodes - group: \"\" resource: persistentVolumes - group: certificates.k8s.io resource: certificatesigningrequests - group: authentication.k8s.io resource: tokenreviews \u60a8\u4e0d\u80fd\u5c0d\u8cc7\u6e90\u6216\u7fa3\u7d44\u4f7f\u7528 * \u901a\u914d\u7b26\u4f86\u7e5e\u904e\u6b64\u9650\u5236\u3002                                                                                                                                                                                      |\n| \u8b49\u66f8\u7c64\u540d\u8acb\u6c42    | \u60a8\u53ef\u4ee5\u5728 Autopilot \u4e2d\u5275\u5efa CertificateSigningRequests\uff0c\u4ee5\u5275\u5efa\u7531\u96c6\u7fa3\u8b49\u66f8\u6388\u6b0a\u6a5f\u69cb\u7c3d\u540d\u7684\u8b49\u66f8\u3002\u7232\u4e86\u9632\u6b62\u5c0d\u7cfb\u7d71\u7d44\u4ef6\u9020\u6210\u5e72\u64fe\uff0cAutopilot \u6703\u62d2\u7d55\u5df2\u77e5\u7279\u6b0a\u8eab\u4efd\uff08\u4f8b\u5982\u7cfb\u7d71\u7fa3\u7d44\u3001\u7cfb\u7d71\u4ee3\u7406\u6216 Google \u7ba1\u7406\u7684 IAM \u670d\u52d9\u4ee3\u7406\uff09\u7684 CertificateSigningRequests\u3002                                                                                                                                                                                                                                 |\n| GKE \u5b89\u5168\u529f\u80fd    | Autopilot \u96c6\u7fa3\u53ef\u7232\u60a8\u5553\u7528\u63a8\u85a6\u7684 GKE \u5b89\u5168\u529f\u80fd\u3002\u5982\u9700\u67e5\u770b\u5df2\u5553\u7528\u548c\u53ef\u9078\u7684\u5b89\u5168\u529f\u80fd\u7684\u5217\u8868\uff0c\u8acb\u53c3\u95b1 Autopilot \u4e2d\u7684\u5b89\u5168\u529f\u80fd\u3002                                                                                                                                                                                                                                                              |\n| \u7bc0\u9ede\u64cd\u4f5c\u7cfb\u7d71    | Autopilot \u96c6\u7fa3\u4f7f\u7528 containerd \u4f5c\u7232\u7bc0\u9ede\u64cd\u4f5c\u7cfb\u7d71\u7684 Container-Optimized OS\u3002Container-Optimized OS \u7531 Google \u5275\u5efa\u548c\u7ba1\u7406\u3002                                                                                                                                                                                                                                                             |\n| GKE \u7248\u672c\u5347\u7d1a    | Autopilot \u96c6\u7fa3\u5728\u5275\u5efa\u5f8c\u6703\u5728 GKE \u767c\u4f48\u6e20\u9053\u4e2d\u8a3b\u518a\uff0c\u4e26\u4e14\u59cb\u7d42\u5553\u7528\u81ea\u52d5\u5347\u7d1a\u3002Google \u6703\u5728\u4e00\u6bb5\u6642\u9593\u5167\u81ea\u52d5\u5c07\u63a7\u5236\u5c64\u9762\u548c\u7bc0\u9ede\u5347\u7d1a\u5230\u767c\u4f48\u6e20\u9053\u4e2d\u7684\u6700\u65b0\u5408\u683c\u7248\u672c\u3002                                                                                                                                                                                                                                                       |\n### Autopilot \u4e2d\u7684\u5b89\u5168\u908a\u754c\nAutopilot \u63d0\u4f9b\u5c0d Kubernetes API \u7684\u8a2a\u554f\u6b0a\u9650\uff0c\u4f46\u79fb\u9664\u4e86\u4f7f\u7528\u67d0\u4e9b\u9ad8\u6b0a\u9650 Kubernetes \u529f\u80fd\uff08\u4f8b\u5982\u7279\u6b0a Pod\uff09\u7684\u6b0a\u9650\u3002\u76ee\u6a19\u662f\u7232\u4e86\u9650\u5236\u8a2a\u554f\u3001\u4fee\u6539\u6216\u76f4\u63a5\u63a7\u5236\u7bc0\u9ede\u865b\u64ec\u6a5f\u3002Autopilot \u901a\u904e\u5be6\u65bd\u9019\u4e9b\u9650\u5236\u4f86\u9650\u5236\u5de5\u4f5c\u8ca0\u8f09\u5c0d\u7bc0\u9ede\u865b\u64ec\u6a5f\u9032\u884c\u4f4e\u7d1a\u5c64\u8a2a\u554f\uff0c\u5f9e\u800c\u4f7f Google Cloud \u80fd\u5920\u5b8c\u5168\u7ba1\u7406\u7bc0\u9ede\u4ee5\u53ca Pod \u7d1a\u5c64\u7684 [SLA](https://cloud.google.com/kubernetes-engine/sla?hl=zh-cn) \u3002\n**\u91cd\u8981\u63d0\u793a** \uff1aGKE \u7bc0\u9ede\u7684\u5b89\u5168\u908a\u754c\u662f\u55ae\u79df\u6236\u865b\u64ec\u6a5f\u3002\u5f9e Pod \u8a2a\u554f\u7bc0\u9ede\u865b\u64ec\u6a5f\u7684\u80fd\u529b\u4e26\u4e0d\u6703\u88ab\u8996\u7232 Autopilot \u7684\u5b89\u5168\u908a\u754c\u3002\u4efb\u4f55\u7bc0\u9ede\u7d1a\u5c64\u8a2a\u554f\u6b0a\u9650\u90fd\u8207 GKE Autopilot \u7684\u5b89\u5168\u76ee\u6a19\u4e0d\u4e00\u81f4\uff0c\u4e26\u4e14\u4e0d\u53d7\u652f\u6301\u3002Google \u53ef\u80fd\u6703\u5728\u4e0d\u4e8b\u5148\u901a\u77e5\u7684\u60c5\u6cc1\u4e0b\u79fb\u9664\u4efb\u4f55\u7bc0\u9ede\u7d1a\u5c64\u7684\u8a2a\u554f\u6b0a\u9650\u3002\n\u9019\u6a23\u505a\u7684\u76ee\u7684\u662f\u9632\u6b62\u610f\u5916\u8a2a\u554f\u7bc0\u9ede\u865b\u64ec\u6a5f\u3002\u6211\u5011\u63a5\u53d7\u51fa\u65bc\u6b64\u76ee\u7684\u901a\u904e [Google \u7684\u6f0f\u6d1e\u734e\u52f5\u8a08\u5283 (VRP)](https://www.google.com/about/appsecurity/reward-program/?hl=zh-cn) \u63d0\u4ea4\u7684\u5831\u544a\u5167\u5bb9\uff0c\u4e26\u5c07\u6839\u64da Google VRP \u734e\u52f5\u5c0f\u7d44\u7684\u6c7a\u5b9a\u5c0d\u63d0\u4ea4\u7684\u5831\u544a\u9032\u884c\u734e\u52f5\u3002\n\u5f9e\u8a2d\u8a08\u4e0a\u8b1b\uff0c\u7279\u6b0a\u7528\u6236\uff08\u4f8b\u5982\u96c6\u7fa3\u7ba1\u7406\u54e1\uff09\u64c1\u6709\u5c0d\u4efb\u4f55 GKE \u96c6\u7fa3\u7684\u5b8c\u5168\u63a7\u5236\u6b0a\u3002\u7232\u4fdd\u8b49\u5b89\u5168\u6027\uff0c\u6211\u5011\u5efa\u8b70\u60a8\u907f\u514d\u5ee3\u6cdb\u6388\u4e88\u5f37\u5927\u7684 GKE \u6216 Kubernetes \u7279\u6b0a\uff0c\u800c\u662f\u5118\u53ef\u80fd\u4f7f\u7528\u547d\u540d\u7a7a\u9593\u7ba1\u7406\u54e1\u59d4\u4efb\uff0c\u5982 [\u591a\u79df\u6236\u6307\u5357](https://cloud.google.com/kubernetes-engine/docs/best-practices/enterprise-multitenancy?hl=zh-cn) \u4e2d\u6240\u8ff0\u3002\nAutopilot \u53ef\u4ee5\u5728\u60a8\u7684\u9805\u76ee\u4e2d\u9810\u914d\u55ae\u79df\u6236\u865b\u64ec\u6a5f\uff0c\u5c08\u4f9b\u60a8\u4f7f\u7528\u3002\u5728\u6bcf\u500b\u865b\u64ec\u6a5f\u4e0a\uff0c\u60a8\u7684 Autopilot \u5de5\u4f5c\u8ca0\u8f09\u53ef\u80fd\u6703\u4e00\u8d77\u904b\u884c\uff0c\u5b83\u5011\u5171\u7528\u4e00\u500b\u5b89\u5168\u5f37\u5316\u578b\u5167\u6838\u3002\u7531\u65bc\u5171\u4eab\u6838\u5fc3\u8868\u793a\u55ae\u500b\u5b89\u5168\u908a\u754c\uff0c\u56e0\u6b64\u6211\u5011\u5efa\u8b70\u60a8\u5728\u8981\u6c42\u9ad8\u5ea6\u9694\u96e2\uff08\u4f8b\u5982\u9ad8\u98a8\u96aa\u6216\u4e0d\u53d7\u4fe1\u4efb\u7684\u5de5\u4f5c\u8ca0\u8f09\uff09\u7684\u60c5\u6cc1\u4e0b\uff0c\u5728\u53ef\u63d0\u4f9b\u591a\u5c64\u5b89\u5168\u4fdd\u8b77\u7684 [GKE Sandbox](https://cloud.google.com/kubernetes-engine/docs/concepts/sandbox-pods?hl=zh-cn) Pod \u4e0a\u904b\u884c\u5de5\u4f5c\u8ca0\u8f09\u3002\n## \u57fa\u65bc\u61c9\u7528\u5834\u666f\u7684\u5b89\u5168\u8cc7\u6e90\n\u4ee5\u4e0b\u90e8\u5206\u63d0\u4f9b\u4e86\u76f8\u95dc\u93c8\u63a5\u548c\u5efa\u8b70\uff0c\u4f9b\u60a8\u6839\u64da\u81ea\u5df1\u7684\u61c9\u7528\u5834\u666f\u898f\u5283\u3001\u5be6\u73fe\u548c\u7ba1\u7406 Autopilot \u96c6\u7fa3\u7684\u5b89\u5168\u6027\u3002\n### \u898f\u5283\u96c6\u7fa3\u5b89\u5168\n| \u61c9\u7528\u5834\u666f           | \u8cc7\u6e90                                      |\n|:-------------------------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------|\n| \u77ad\u89e3 GKE \u4f5c\u7232\u5e73\u81fa\u5982\u4f55\u4fdd\u969c\u5b89\u5168\u6027     | \u5982\u9700\u5927\u81f4\u77ad\u89e3\u96c6\u7fa3\u5b89\u5168\uff0c\u8acb\u53c3\u95b1 GKE \u5b89\u5168\u6982\u89bd\u3002 \u5982\u9700\u77ad\u89e3\u6211\u5011\u5982\u4f55\u4fdd\u8b77 Kubernetes \u63a7\u5236\u5c64\u9762\uff0c\u8acb\u53c3\u95b1\u63a7\u5236\u5c64\u9762\u5b89\u5168\u3002 \u5982\u9700\u77ad\u89e3 GKE \u96c6\u7fa3\u5167\u4fe1\u4efb\u6a21\u578b\uff0c\u8acb\u95b1\u8b80\u96c6\u7fa3\u4fe1\u4efb\u3002 |\n| \u77ad\u89e3\u60a8\u5728\u5f37\u5316\u74b0\u5883\u5b89\u5168\u65b9\u9762\u767c\u63ee\u7684\u4f5c\u7528    | \u77ad\u89e3\u8cac\u4efb\u5171\u64d4\u6a21\u578b\u3002                                  |\n| \u67e5\u770b Google \u95dc\u65bc\u5b89\u5168\u5f37\u5316\u63aa\u65bd\u548c\u7a81\u767c\u4e8b\u4ef6\u97ff\u61c9\u7684\u5efa\u8b70 | \u5982\u9700\u77ad\u89e3\u5b89\u5168\u5f37\u5316\u6700\u4f73\u5be6\u8e10\uff0c\u8acb\u53c3\u95b1 GKE \u5b89\u5168\u5f37\u5316\u6307\u5357\u3002 \u5982\u9700\u77ad\u89e3\u5982\u4f55\u97ff\u61c9\u5b89\u5168\u4e8b\u4ef6\uff0c\u8acb\u53c3\u95b1\u7de9\u89e3\u5b89\u5168\u4e8b\u4ef6\u3002              |\n| \u77ad\u89e3 GKE \u5982\u4f55\u5553\u7528\u5be9\u8988\u65e5\u8a8c      | \u95b1\u8b80 GKE \u5be9\u8988\u653f\u7b56\u3002 \u77ad\u89e3 GKE \u5275\u5efa\u7684\u5be9\u8988\u65e5\u8a8c\u3002                           |\n### \u8eab\u4efd\u9a57\u8b49\u548c\u6388\u6b0a\n\u8a2d\u7f6e Autopilot \u96c6\u7fa3\u540e\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u5c0d\u7528\u6236\u548c\u61c9\u7528\u9032\u884c\u8eab\u4efd\u9a57\u8b49\u624d\u80fd\u4f7f\u7528 Kubernetes API \u6216 Google Cloud API \u7b49\u8cc7\u6e90\u3002\n| \u61c9\u7528\u5834\u666f         | \u8cc7\u6e90                                                    |\n|:-----------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| \u5411\u96c6\u7fa3 API \u670d\u52d9\u5668\u9a57\u8b49\u7528\u6236\u6216\u61c9\u7528   | \u5982\u9700\u5c0d\u7528\u6236\u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u53c3\u95b1\u5c0d\u7528\u6236\u9032\u884c\u8eab\u4efd\u9a57\u8b49\u3002 \u5982\u9700\u5c0d\u61c9\u7528\u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u95b1\u8b80\u5c0d\u61c9\u7528\u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u5176\u4e2d\u4ecb\u7d39\u4e86\u5f9e\u540c\u4e00\u96c6\u7fa3\u3001\u5176\u4ed6 Google Cloud \u74b0\u5883\u6216\u5916\u90e8\u74b0\u5883\u4e2d\u7684\u61c9\u7528\u9032\u884c\u8eab\u4efd\u9a57\u8b49\u7684\u6b65\u9a5f\u3002        |\n| \u5411 Google Cloud API \u548c\u670d\u52d9\u9a57\u8b49\u61c9\u7528\u7684\u8eab\u4efd | Autopilot \u96c6\u7fa3\u8b93\u60a8\u53ef\u4ee5\u4f7f\u7528 GKE \u7684\u5de5\u4f5c\u8ca0\u8f09\u8eab\u4efd\u806f\u5408\u5c07 Kubernetes \u670d\u52d9\u8cec\u865f\u914d\u7f6e\u7232\u5145\u7576 IAM \u670d\u52d9\u8cec\u865f\uff0c\u5f9e\u800c\u5b89\u5168\u5730\u5411 Google Cloud API \u9a57\u8b49\u5de5\u4f5c\u8ca0\u8f09\u3002\u5982\u9700\u77ad\u89e3\u76f8\u95dc\u8aaa\u660e\uff0c\u8acb\u53c3\u95b1\u5c07\u61c9\u7528\u914d\u7f6e\u7232\u4f7f\u7528\u9069\u7528\u65bc GKE \u7684\u5de5\u4f5c\u8ca0\u8f09\u8eab\u4efd\u806f\u5408\u3002 |\n| \u5728\u9805\u76ee\u7d1a\u6388\u6b0a\u64cd\u4f5c       | \u5982\u9700\u5728\u9805\u76ee\u7d1a\u8de8\u96c6\u7fa3\u6388\u6b0a\u64cd\u4f5c\uff0c\u8acb\u4f7f\u7528 IAM\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 IAM \u89d2\u8272\u548c\u6b0a\u9650\u6388\u4e88\u6216\u62d2\u7d55\u5c0d\u7279\u5b9a GKE \u548c Kubernetes API \u8cc7\u6e90\u7684\u8a2a\u554f\u6b0a\u9650\u3002\u5982\u9700\u77ad\u89e3\u76f8\u95dc\u8aaa\u660e\uff0c\u8acb\u53c3\u95b1\u5275\u5efa IAM \u653f\u7b56\u3002              |\n| \u5728\u96c6\u7fa3\u7d1a\u5c64\u6388\u6b0a\u64cd\u4f5c      | \u5982\u9700\u6388\u6b0a\u64cd\u4f5c\u7279\u5b9a\u96c6\u7fa3\u4e2d\u7684 Kubernetes API \u8cc7\u6e90\uff0c\u8acb\u4f7f\u7528\u5167\u7f6e\u7684 Kubernetes \u57fa\u65bc\u89d2\u8272\u7684\u8a2a\u554f\u6b0a\u9650\u63a7\u5236 (RBAC) \u6a5f\u5236\u3002 \u5982\u9700\u77ad\u89e3\u76f8\u95dc\u8aaa\u660e\uff0c\u8acb\u53c3\u95b1\u4f7f\u7528 RBAC \u6388\u6b0a\u96c6\u7fa3\u4e2d\u7684\u64cd\u4f5c\u3002             |\n| \u5728\u7d44\u7e54\u7d1a\u5c64\u6388\u6b0a\u64cd\u4f5c      | \u60a8\u53ef\u4ee5\u4f7f\u7528 Google Cloud \u7d44\u7e54\u653f\u7b56\u670d\u52d9\u5c0d Google Cloud \u7d44\u7e54\u4e2d GKE \u8cc7\u6e90\u4e0a\u7684\u7279\u5b9a\u64cd\u4f5c\u5f37\u5236\u5be6\u65bd\u9650\u5236\u689d\u4ef6\u3002\u5982\u9700\u77ad\u89e3\u76f8\u95dc\u8aaa\u660e\uff0c\u8acb\u53c3\u95b1\u4f7f\u7528\u81ea\u5b9a\u7fa9\u7d44\u7e54\u653f\u7b56\u9650\u5236\u5c0d GKE \u8cc7\u6e90\u7684\u64cd\u4f5c\u3002             |\n### \u5f37\u5316\u96c6\u7fa3\u548c\u5de5\u4f5c\u8ca0\u8f09\u7684\u5b89\u5168\n\u9664\u4e86\u9810\u5148\u914d\u7f6e\u7684 Autopilot \u63aa\u65bd\u4e4b\u5916\uff0c\u5982\u679c\u60a8\u9084\u6709\u5c08\u9580\u7684\u9694\u96e2\u6216\u5b89\u5168\u5f37\u5316\u8981\u6c42\uff0c\u8acb\u8003\u616e\u4ee5\u4e0b\u8cc7\u6e90\uff1a\n| \u61c9\u7528\u5834\u666f      | \u8cc7\u6e90                                                                     |\n|:-----------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| \u9650\u5236\u5c0d\u96c6\u7fa3\u7aef\u9ede\u7684\u516c\u5171\u8a2a\u554f\u6b0a\u9650 | \u5c07 Autopilot \u96c6\u7fa3\u5275\u5efa\u7232\u5c08\u7528\u96c6\u7fa3\uff0c\u9019\u6a23\u53ef\u505c\u7528\u96c6\u7fa3\u63a7\u5236\u5c64\u9762\u7684\u516c\u5171 IP \u5730\u5740\u3002\u5982\u9700\u77ad\u89e3\u76f8\u95dc\u8aaa\u660e\uff0c\u8acb\u53c3\u95b1\u5c08\u7528\u96c6\u7fa3\u3002                                            |\n| \u50c5\u9650\u7279\u5b9a\u7db2\u7d61\u8a2a\u554f\u96c6\u7fa3   | \u4f7f\u7528\u63a7\u5236\u5c64\u9762\u6388\u6b0a\u7684\u7db2\u7d61\u6307\u5b9a\u53ef\u4ee5\u8a2a\u554f\u96c6\u7fa3\u7684 IP \u5730\u5740\u7bc4\u570d\u3002                                                        |\n| \u5c07\u654f\u611f\u4fe1\u606f\u5b58\u5132\u5728\u96c6\u7fa3\u5916\u90e8  | \u5c07\u654f\u611f\u6578\u64da\u5b58\u5132\u5728\u5553\u7528\u4e86\u7248\u672c\u63a7\u5236\u7684\u5916\u90e8\u52a0\u5bc6\u5b58\u5132\u7a7a\u9593\u670d\u52d9\u4e2d\u662f\u4e00\u7a2e\u5e38\u898b\u7684\u5408\u898f\u6027\u8981\u6c42\u548c\u6700\u4f73\u505a\u6cd5\u3002 \u4f7f\u7528 Secret Manager \u5b58\u5132\u6578\u64da\uff0c\u4e26\u4f7f\u7528\u9069\u7528\u65bc GKE \u7684\u5de5\u4f5c\u8ca0\u8f09\u8eab\u4efd\u806f\u5408\u5f9e Autopilot \u96c6\u7fa3\u8a2a\u554f\u9019\u4e9b\u6578\u64da\u3002\u5982\u9700\u77ad\u89e3\u76f8\u95dc\u8aaa\u660e\uff0c\u8acb\u53c3\u95b1\u4f7f\u7528\u9069\u7528\u65bc GKE \u7684\u5de5\u4f5c\u8ca0\u8f09\u8eab\u4efd\u806f\u5408\u8a2a\u554f\u5b58\u5132\u5728 GKE \u96c6\u7fa3\u5916\u90e8\u7684 Secret\u3002 |\n| \u5728\u90e8\u7f72\u5230\u96c6\u7fa3\u4e4b\u524d\u9a57\u8b49\u5bb9\u5668\u6620\u50cf | \u4f7f\u7528 Binary Authorization \u5728\u90e8\u7f72\u6642\u6aa2\u67e5 Pod \u6e05\u55ae\u4e2d\u5f15\u7528\u7684\u5bb9\u5668\u6620\u50cf\u7684\u5b8c\u6574\u6027\u3002\u5982\u9700\u77ad\u89e3\u76f8\u95dc\u8aaa\u660e\uff0c\u8acb\u53c3\u95b1\u4f7f\u7528 Binary Authorization \u5728\u90e8\u7f72\u6642\u9a57\u8b49\u5bb9\u5668\u6620\u50cf\u3002                                  |\n### \u76e3\u63a7\u5b89\u5168\u72c0\u6cc1\n\u8a2d\u7f6e\u96c6\u7fa3\u4e26\u90e8\u7f72\u5de5\u4f5c\u8ca0\u8f09\u5f8c\uff0c\u60a8\u61c9\u8a72\u8a2d\u7f6e\u4e26\u914d\u7f6e\u76e3\u63a7\u548c\u65e5\u8a8c\u8a18\u9304\uff0c\u4ee5\u4fbf\u5c0d\u96c6\u7fa3\u5b89\u5168\u72c0\u6cc1\u9032\u884c\u76e3\u6e2c\u3002\u6211\u5011\u5efa\u8b70\u60a8\u57f7\u884c\u4ee5\u4e0b\u6240\u6709\u64cd\u4f5c\uff1a\n- \u5728 [GKE \u5b89\u5168\u72c0\u6cc1\u4fe1\u606f\u4e2d\u5fc3](https://cloud.google.com/kubernetes-engine/docs/concepts/about-security-posture-dashboard?hl=zh-cn) \u4e2d\u8a3b\u518a\u96c6\u7fa3\uff0c\u4ee5\u5be9\u8988\u5de5\u4f5c\u8ca0\u8f09\u662f\u5426\u5b58\u5728\u554f\u984c\uff08\u4f8b\u5982\uff0c\u5b89\u5168\u914d\u7f6e\u6709\u554f\u984c\u6216\u5bb9\u5668\u64cd\u4f5c\u7cfb\u7d71\u8edf\u4ef6\u5305\u5b58\u5728\u6f0f\u6d1e\uff09\u4e26\u7372\u5f97\u5207\u5be6\u53ef\u884c\u7684\u7de9\u89e3\u63aa\u65bd\u4fe1\u606f\u3002\n- \u4f7f\u7528 [\u96c6\u7fa3\u901a\u77e5](https://cloud.google.com/kubernetes-engine/docs/how-to/cluster-notifications?hl=zh-cn) \u63a5\u6536\u6709\u95dc\u65b0\u5b89\u5168\u516c\u544a\u548c\u5347\u7d1a\u4e8b\u4ef6\u7684\u901a\u77e5\u3002\n- \u4f7f\u7528 Cloud Monitoring \u4e2d\u7684 [GKE \u4fe1\u606f\u4e2d\u5fc3](https://cloud.google.com/stackdriver/docs/solutions/gke/observing?hl=zh-cn) \u6216 GKE \u4e2d\u7684 [\u201c\u53ef\u89c0\u6e2c\u6027\u201d\u6a19\u7c64\u9801](https://cloud.google.com/kubernetes-engine/docs/how-to/view-observability-metrics?hl=zh-cn) \u89c0\u5bdf\u96c6\u7fa3\u3002\n- \u77ad\u89e3\u5982\u4f55\u5728 Cloud Logging \u4e2d [\u67e5\u770b](https://cloud.google.com/stackdriver/docs/solutions/gke/using-logs?hl=zh-cn) \u548c [\u7ba1\u7406](https://cloud.google.com/stackdriver/docs/solutions/gke/managing-logs?hl=zh-cn) GKE \u5be9\u8988\u65e5\u8a8c\u3002## \u5f8c\u7e8c\u6b65\u9a5f\n- \u95b1\u8b80 [GKE \u5b89\u5168\u6982\u89bd](https://cloud.google.com/kubernetes-engine/docs/concepts/security-overview?hl=zh-cn) \u3002\n- \u95b1\u8b80 [GKE \u5b89\u5168\u5f37\u5316\u6307\u5357](https://cloud.google.com/kubernetes-engine/docs/how-to/hardening-your-cluster?hl=zh-cn) \n- \u8a02\u95b1 [\u5b89\u5168\u516c\u544a](https://cloud.google.com/anthos/clusters/docs/security-bulletins?hl=zh-cn) \u548c [\u7248\u672c\u8aaa\u660e](https://cloud.google.com/kubernetes-engine/docs/release-notes?hl=zh-cn) \u3002", "guide": "Google Kubernetes Engine (GKE)"}