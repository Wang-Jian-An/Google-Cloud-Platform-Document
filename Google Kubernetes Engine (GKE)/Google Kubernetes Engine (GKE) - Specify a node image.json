{"title": "Google Kubernetes Engine (GKE) - Specify a node image", "url": "https://cloud.google.com/kubernetes-engine/docs/how-to/node-images", "abstract": "# Google Kubernetes Engine (GKE) - Specify a node image\nThis page shows you how to specify a node image for nodes in Google Kubernetes Engine (GKE) Standard mode clusters. To learn about how node images work, and the types of node images that are available, see [Node images](/kubernetes-engine/docs/concepts/node-images) .\nNodes in GKE Autopilot clusters always use the [Container-Optimized OS with containerd](/kubernetes-engine/docs/concepts/using-containerd#about_containerd) ( `cos_containerd` ) node image.\n", "content": "## Before you begin\nBefore you start, make sure you have performed the following tasks:\n- Enable    the Google Kubernetes Engine API.\n- [    Enable Google Kubernetes Engine API   ](https://console.cloud.google.com/flows/enableapi?apiid=container.googleapis.com) \n- If you want to use the Google Cloud CLI for this task, [install](/sdk/docs/install) and then [initialize](/sdk/docs/initializing) the  gcloud CLI. If you previously installed the gcloud CLI, get the latest  version by running`gcloud components update`. **Note:** For existing gcloud CLI  installations, make sure to set the`compute/region`and`compute/zone` [properties](/sdk/docs/properties#setting_properties) . By setting default locations,  you can avoid errors in gcloud CLI like the following:`One of [--zone, --region] must be supplied: Please specify location`.## Specifying a node image\nYou can select the node image you want to use when you create a new cluster, or you can change the node image for an existing cluster.\n**Note:** Starting with GKE node version 1.19, the default node image for Linux nodes is the Container-Optimized OS with Containerd ( `cos_containerd` ) variant instead of the Container-Optimized OS with Docker ( `cos` ) variant.\n**Warning: ** In GKE version 1.24 and later, Docker-based node image types are not supported. In GKE version 1.23, you also cannot create new node pools with Docker node image types. You must migrate to a containerd node image type. To learn more about this change, see [About the Docker node image deprecation](/kubernetes-engine/docs/deprecations/docker-containerd) .\n### Creating a new cluster\nTo create a new cluster with a specific node image, run the following command:\n```\ngcloud container clusters create CLUSTER_NAME --image-type IMAGE_TYPE\n```\nReplace the following:- ``: the name you choose for the cluster.\n- ``: the name of your [node image type](/kubernetes-engine/docs/concepts/node-images#available_node_images) .\n- Go to the **Google Kubernetes Engine** page in the Google Cloud console. [Go to Google Kubernetes Engine](https://console.cloud.google.com/kubernetes/list) \n- Click **Create** .\n- Configure your cluster as desired.\n- From the navigation pane, under **Node Pools** , click **Nodes** .\n- In the **Image type** drop-down list, select the desired [node image](/kubernetes-engine/docs/concepts/node-images) .\n- Click **Create** .\n### Upgrading an existing cluster\n**Warning: ** In GKE version 1.24 and later, Docker-based node image types are not supported. In GKE version 1.23, you also cannot create new node pools with Docker node image types. You must migrate to a containerd node image type. To learn more about this change, see [About the Docker node image deprecation](/kubernetes-engine/docs/deprecations/docker-containerd) .\nGKE uses the selected node upgrade strategy and configuration to upgrade a node's image. To learn more about choosing the optimal node upgrade strategy and configuration for your environment, see [Node upgradestrategies](/kubernetes-engine/docs/concepts/node-pool-upgrade-strategies#choose-blue-green-upgrades) .\nYou can upgrade an existing cluster to use a specific node image by using the `gcloud container clusters upgrade` command. You can upgrade all node pools in the cluster, or you can specify specific a node pool using `--node-pool` .\nTo upgrade an existing cluster to use a specific node image, run the following command:\n```\ngcloud container clusters upgrade CLUSTER_NAME --image-type IMAGE_TYPE \\\u00a0 \u00a0 [--node-pool POOL_NAME]\n```\nReplace the following:- ``: the name of your existing cluster.\n- ``: the name of the node pool you want to update.\n- ``: the name of your [node image type](/kubernetes-engine/docs/concepts/node-images#available_node_images) .\n- Go to the **Google Kubernetes Engine** page in the Google Cloud console. [Go to Google Kubernetes Engine](https://console.cloud.google.com/kubernetes/list) \n- In the cluster list, click the name of the cluster you want to modify.\n- Click the **Nodes** tab.\n- Under **Node Pools** , click the name of the node pool you want to upgrade.\n- On the **Node pool details** page, click **Edit** .\n- Under **Node version** , click **Change** .\n- Select the desired [node version](/kubernetes-engine/versioning#versioning) and click **Change** to start the upgrade.## What's next\n- [Learn more about node images](/kubernetes-engine/docs/concepts/node-images) .\n- [Learn more about node pools](/kubernetes-engine/docs/concepts/node-pools) .", "guide": "Google Kubernetes Engine (GKE)"}