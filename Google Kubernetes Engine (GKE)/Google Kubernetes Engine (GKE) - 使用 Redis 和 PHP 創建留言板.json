{"title": "Google Kubernetes Engine (GKE) - \u4f7f\u7528 Redis \u548c PHP \u5275\u5efa\u7559\u8a00\u677f", "url": "https://cloud.google.com/kubernetes-engine/docs/tutorials/guestbook?hl=zh-cn", "abstract": "# Google Kubernetes Engine (GKE) - \u4f7f\u7528 Redis \u548c PHP \u5275\u5efa\u7559\u8a00\u677f\n\u672c\u6559\u7a0b\u6f14\u793a\u77ad\u5982\u4f55\u4f7f\u7528 Google Kubernetes Engine (GKE) \u69cb\u5efa\u591a\u5c64 Web \u61c9\u7528\u3002\u672c\u6559\u7a0b\u4e2d\u7684\u61c9\u7528\u662f\u4e00\u500b\u7559\u8a00\u677f\uff0c\u8a2a\u554f\u8005\u53ef\u5728\u4e00\u4efd\u65e5\u8a8c\u4e2d\u8f38\u5165\u6587\u5b57\uff0c\u4e26\u67e5\u770b\u5176\u4e2d\u6700\u65b0\u7684\u5e7e\u500b\u65e5\u8a8c\u689d\u76ee\u3002\n\u672c\u6559\u7a0b\u4ecb\u7d39\u5982\u4f55\u4f7f\u7528\u8ca0\u8f09\u5e73\u8861\u5668\u5728\u5916\u90e8 IP \u4e0a\u8a2d\u7f6e\u7559\u8a00\u677f Web \u670d\u52d9\uff0c\u4ee5\u53ca\u5982\u4f55\u4f7f\u7528\u55ae\u500b\u4e3b\u5be6\u4f8b (Leader) \u548c\u591a\u500b [\u526f\u672c\uff08\u95dc\u6ce8\u8005\uff09](https://redis.io/topics/replication) \u904b\u884c [Redis](http://redis.io/) \u96c6\u7fa3\u3002\n\u8a72\u793a\u4f8b\u5f37\u8abf\u4e86\u4e00\u4e9b\u91cd\u8981\u7684 GKE \u6982\u5ff5\uff1a- \u4f7f\u7528 YAML \u6e05\u55ae\u6587\u4ef6\u7684 [\u8072\u660e\u5f0f\u914d\u7f6e](https://kubernetes.io/docs/tutorials/object-management-kubectl/declarative-object-management-configuration/) \n- [Deployment](https://kubernetes.io/docs/concepts/workloads/controllers/deployment/) \uff0c\u9019\u662f Kubernetes \u8cc7\u6e90\uff0c\u7528\u65bc\u78ba\u5b9a\u4e00\u7d44\u526f\u672c [Pod](https://kubernetes.io/docs/concepts/workloads/pods/pod/) \u7684\u914d\u7f6e\n- [Service](https://kubernetes.io/docs/concepts/services-networking/service/) \uff0c\u7528\u65bc\u7232\u4e00\u7d44 Pod \u5275\u5efa\u5167\u90e8\u548c\u5916\u90e8\u8ca0\u8f09\u5e73\u8861\u5668", "content": "## \u76ee\u6a19\n\u5982\u9700\u5728 GKE \u4e0a\u90e8\u7f72\u548c\u904b\u884c\u7559\u8a00\u677f\u61c9\u7528\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- \u8a2d\u7f6e Redis Leader\n- \u8a2d\u7f6e\u5169\u500b Redis \u95dc\u6ce8\u8005\n- \u8a2d\u7f6e\u7559\u8a00\u677f Web \u524d\u7aef\n- \u8a2a\u554f\u7559\u8a00\u677f\u7db2\u7ad9\n- \u64f4\u5c55\u7559\u8a00\u677f\u7db2\u7d61\u524d\u7aef\n\u4e0b\u5716\u5c55\u793a\u4e86\u5b8c\u6210\u4e0a\u8ff0\u76ee\u6a19\u5f8c\u5275\u5efa\u7684\u96c6\u7fa3\u67b6\u69cb\u6982\u89bd\uff1a \n## \u8cbb\u7528\nTitles in dynamic includes are not used anywhere, and we should avoid paying to translate them\u5728\u672c\u6587\u6a94\u4e2d\uff0c\u60a8\u5c07\u4f7f\u7528 Google Cloud \u7684\u4ee5\u4e0b\u6536\u8cbb\u7d44\u4ef6\uff1a- [GKE](https://cloud.google.com/kubernetes-engine/pricing?hl=zh-cn) \n\u60a8\u53ef\u4f7f\u7528 [\u50f9\u683c\u8a08\u7b97\u5668](https://cloud.google.com/products/calculator?hl=zh-cn) \u6839\u64da\u60a8\u7684\u9810\u8a08\u4f7f\u7528\u60c5\u6cc1\u4f86\u4f30\u7b97\u8cbb\u7528\u3002 \nTitles in dynamic includes are not used anywhere, and we should avoid paying to translate them\u5b8c\u6210\u672c\u6587\u6a94\u4e2d\u63cf\u8ff0\u7684\u4efb\u52d9\u5f8c\uff0c\u60a8\u53ef\u4ee5\u901a\u904e\u522a\u9664\u6240\u5275\u5efa\u7684\u8cc7\u6e90\u4f86\u907f\u514d\u7e7c\u7e8c\u8a08\u8cbb\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u6e05\u7406](#clean-up) \u3002## \u6e96\u5099\u5de5\u4f5c\n\u8acb\u6309\u7167\u4ee5\u4e0b\u6b65\u9a5f\u5553\u7528 Kubernetes Engine API\uff1a\n- \u8a2a\u554f Google Cloud \u63a7\u5236\u6aaf\u4e2d\u7684 [Kubernetes Engine \u9801\u9762](https://console.cloud.google.com/projectselector/kubernetes?hl=zh-cn) \u3002\n- \u5275\u5efa\u6216\u9078\u64c7\u9805\u76ee\u3002\n- \u7a0d\u4f5c\u7b49\u5f85\uff0c\u8b93 API \u548c\u76f8\u95dc\u670d\u52d9\u5b8c\u6210\u5553\u7528\u904e\u7a0b\u3002  \u6b64\u904e\u7a0b\u53ef\u80fd\u8017\u6642\u5e7e\u5206\u9418\u3002\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- [\u78ba\u4fdd\u60a8\u7684 Google Cloud \u9805\u76ee\u5df2\u5553\u7528\u7d50\u7b97\u529f\u80fd](https://cloud.google.com/billing/docs/how-to/verify-billing-enabled?hl=zh-cn#console) \u3002\n\u5b89\u88dd\u672c\u6559\u7a0b\u4e2d\u4f7f\u7528\u7684\u4ee5\u4e0b\u547d\u4ee4\u884c\u5de5\u5177\uff1a- `gcloud`\u7528\u65bc\u5275\u5efa\u548c\u522a\u9664 Kubernetes Engine \u96c6\u7fa3\u3002`gcloud`\u5305\u542b\u5728 [gcloud CLI](https://cloud.google.com/sdk/docs/install?hl=zh-cn) \u4e2d\u3002\n- `kubectl`\u7528\u65bc\u7ba1\u7406 Kubernetes\uff08\u5373 Kubernetes Engine \u4f7f\u7528\u7684\u96c6\u7fa3\u7de8\u6392\u7cfb\u7d71\uff09\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528`gcloud`\u5b89\u88dd`kubectl`\uff1a```\ngcloud components install kubectl\n```\n### \u8a2d\u7f6e Google Cloud CLI \u7684\u9ed8\u8a8d\u503c\n\u7232\u4e86\u7bc0\u7701\u60a8\u5728 gcloud CLI \u4e2d\u8f38\u5165\n [\u9805\u76ee ID](https://support.google.com/cloud/answer/6158840?hl=zh-cn) \n\u548c\n [Compute Engine \u53ef\u7528\u5340\u6216\u5340\u57df](https://cloud.google.com/compute/docs/zones?hl=zh-cn#available) \n\u9078\u9805\u7684\u6642\u9593\uff0c\u60a8\u53ef\u4ee5\u8a2d\u7f6e\u9ed8\u8a8d\u503c\uff1a\n```\ngcloud config set project project-id\n```\n\u6839\u64da\u60a8\u5728 GKE \u4e2d\u9078\u64c7\u4f7f\u7528\u7684 [\u64cd\u4f5c\u6a21\u5f0f](https://cloud.google.com/kubernetes-engine/docs/concepts/types-of-clusters?hl=zh-cn#modes) \uff0c\u7136\u5f8c\u6307\u5b9a\u9ed8\u8a8d\u7684 [\u53ef\u7528\u5340\u6216\u5340\u57df](https://cloud.google.com/compute/docs/regions-zones?hl=zh-cn#identifying_a_region_or_zone) \u3002\u5982\u679c\u60a8\u4f7f\u7528\u6a19\u6e96\u6a21\u5f0f\uff0c\u60a8\u7684\u96c6\u7fa3\u662f\u53ef\u7528\u5340\u7d1a\uff08\u5c0d\u65bc\u672c\u6559\u7a0b\uff09\uff0c\u56e0\u6b64\u8acb\u8a2d\u7f6e\u60a8\u7684\u9ed8\u8a8d\u8a08\u7b97 [\u53ef\u7528\u5340](https://cloud.google.com/compute/docs/regions-zones?hl=zh-cn#available) \u3002\u5982\u679c\u60a8\u4f7f\u7528 Autopilot \u6a21\u5f0f\uff0c\u60a8\u7684\u96c6\u7fa3\u662f\u5340\u57df\u7d1a\uff0c\u56e0\u6b64\u8acb\u8a2d\u7f6e\u60a8\u7684\u9ed8\u8a8d\u8a08\u7b97 [\u5340\u57df](https://cloud.google.com/compute/docs/regions-zones?hl=zh-cn#available) \u3002\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5c07 `` \u66ff\u63db\u7232\u60a8\u7684\u8a08\u7b97\u5340\u57df\uff0c\u4f8b\u5982 `us-west1` \uff1a\n```\n gcloud config set compute/region compute-region\n```\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5c07 `` \u66ff\u63db\u7232\u60a8\u7684\u8a08\u7b97\u53ef\u7528\u5340\uff0c\u4f8b\u5982 `us-west1-a` \uff1a\n```\ngcloud config set compute/zone compute-zone\n```\n### \u5275\u5efa GKE \u96c6\u7fa3\u7b2c\u4e00\u6b65\u662f\u5275\u5efa\u7528\u65bc\u904b\u884c\u7559\u8a00\u677f\u61c9\u7528\u548c Redis \u670d\u52d9\u7684 GKE [\u96c6\u7fa3](https://cloud.google.com/kubernetes-engine/docs/concepts/cluster-architecture?hl=zh-cn) \u3002\n\u5275\u5efa\u540d\u7232 `guestbook` \u7684 GKE \u96c6\u7fa3\uff1a\n```\n\u00a0gcloud container clusters create-auto guestbook\n```\n```\ngcloud container clusters create guestbook --num-nodes=4\n```\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5217\u51fa\u9805\u76ee\u4e2d\u904b\u884c\u7684\u96c6\u7fa3\uff1a\n```\ngcloud container clusters list\ngcloud container clusters describe guestbook\n```\n **\u6ce8\u610f** \uff1a\u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f\u73fe\u6709 Google Kubernetes Engine \u96c6\u7fa3\uff0c\u6216\u8005\u5df2\u901a\u904e Google Cloud \u63a7\u5236\u6aaf\u5275\u5efa\u96c6\u7fa3\uff0c\u5247\u9700\u8981\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\u4f86\u6aa2\u7d22\u96c6\u7fa3\u6191\u64da\uff0c\u4e26\u4f7f\u7528\u9019\u4e9b\u6191\u64da\u914d\u7f6e`kubectl`\u547d\u4ee4\u884c\u5de5\u5177\uff1a```\ngcloud container clusters get-credentials guestbook\n```\u5982\u679c\u60a8\u5df2\u4f7f\u7528\u4e0a\u9762\u5217\u51fa\u7684`gcloud container clusters create`\u547d\u4ee4\u5275\u5efa\u96c6\u7fa3\uff0c\u5247\u7121\u9700\u57f7\u884c\u6b64\u6b65\u9a5f\u3002\n## \u8a2d\u7f6e Redis Leader\u7559\u8a00\u677f\u61c9\u7528\u4f7f\u7528 Redis \u4f86\u5b58\u5132\u5176\u6578\u64da\u3002\u8a72\u61c9\u7528\u5c07\u6578\u64da\u5beb\u5165 Redis Leader \u5be6\u4f8b\uff0c\u4e26\u5f9e\u591a\u500b Redis \u95dc\u6ce8\u8005\u5be6\u4f8b\u4e2d\u8b80\u53d6\u6578\u64da\u3002\u7b2c\u4e00\u6b65\u662f\u90e8\u7f72 Redis Leader\u3002\n\u9996\u5148\uff0c\u514b\u9686\u793a\u4f8b\u6e05\u55ae\uff1a\n```\ngit clone https://github.com/GoogleCloudPlatform/kubernetes-engine-samples\ncd kubernetes-engine-samples/guestbook\n```\n\u4f7f\u7528\u540d\u7232 `redis-leader-deployment` \u7684\u6e05\u55ae\u6587\u4ef6\u90e8\u7f72 Redis Leader\u3002\u6b64\u6e05\u55ae\u6587\u4ef6\u6307\u5b9a\u904b\u884c\u55ae\u500b\u526f\u672c Redis Leader Pod \u7684 Kubernetes Deployment\uff1a\n [  guestbook/redis-leader-deployment.yaml ](https://github.com/GoogleCloudPlatform/kubernetes-engine-samples/blob/HEAD/guestbook/redis-leader-deployment.yaml) [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/kubernetes-engine-samples/blob/HEAD/guestbook/redis-leader-deployment.yaml) \n```\n# Copyright 2021 Google LLC\n## Licensed under the Apache License, Version 2.0 (the \"License\");# you may not use this file except in compliance with the License.# You may obtain a copy of the License at\n## \u00a0 \u00a0 \u00a0http://www.apache.org/licenses/LICENSE-2.0\n## Unless required by applicable law or agreed to in writing, software# distributed under the License is distributed on an \"AS IS\" BASIS,# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.# See the License for the specific language governing permissions and# limitations under the License.apiVersion: apps/v1kind: Deploymentmetadata:\u00a0 name: redis-leader\u00a0 labels:\u00a0 \u00a0 app: redis\u00a0 \u00a0 role: leader\u00a0 \u00a0 tier: backendspec:\u00a0 replicas: 1\u00a0 selector:\u00a0 \u00a0 matchLabels:\u00a0 \u00a0 \u00a0 app: redis\u00a0 template:\u00a0 \u00a0 metadata:\u00a0 \u00a0 \u00a0 labels:\u00a0 \u00a0 \u00a0 \u00a0 app: redis\u00a0 \u00a0 \u00a0 \u00a0 role: leader\u00a0 \u00a0 \u00a0 \u00a0 tier: backend\u00a0 \u00a0 spec:\u00a0 \u00a0 \u00a0 containers:\u00a0 \u00a0 \u00a0 - name: leader\u00a0 \u00a0 \u00a0 \u00a0 image: \"docker.io/redis:6.0.5\"\u00a0 \u00a0 \u00a0 \u00a0 resources:\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 requests:\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 cpu: 100m\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 memory: 100Mi\u00a0 \u00a0 \u00a0 \u00a0 ports:\u00a0 \u00a0 \u00a0 \u00a0 - containerPort: 6379--```\n\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\u4ee5\u90e8\u7f72 Redis Leader\uff1a\n```\nkubectl apply -f redis-leader-deployment.yaml\n```\n\u9a57\u8b49 Redis Leader Pod \u662f\u5426\u6b63\u5728\u904b\u884c\uff1a\n```\nkubectl get pods\n```\n\u8f38\u51fa\uff1a\n```\nNAME       READY  STATUS RESTARTS AGE\nredis-leader-343230949-qfvrq 1/1  Running 0   43s\n```\n\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\u4ee5\u67e5\u770b Redis Leader Pod \u4e2d\u7684\u65e5\u8a8c\uff1a\n```\nkubectl logs deployment/redis-leader\n```\n\u8f38\u51fa\uff1a\n```\n1:M 24 Jun 2020 14:48:20.917 * Ready to accept connections\n```### \u5275\u5efa Redis Leader \u670d\u52d9\u7559\u8a00\u677f\u61c9\u7528\u9700\u8981\u8207 Redis Leader \u901a\u4fe1\u624d\u80fd\u5beb\u5165\u5176\u6578\u64da\u3002\u60a8\u53ef\u4ee5\u5275\u5efa\u4e00\u500b [Service](https://cloud.google.com/kubernetes-engine/docs/services?hl=zh-cn) \u4f86\u4ee3\u7406\u50b3\u8f38\u5230 Redis Leader Pod \u7684\u6d41\u91cf\u3002\n [Service](https://cloud.google.com/kubernetes-engine/docs/services?hl=zh-cn) \u662f Kubernetes \u62bd\u8c61\uff0c\u5b9a\u7fa9\u4e86\u4e00\u500b\u908f\u8f2f Pod \u96c6\u53ca\u5be6\u73fe\u5176\u8a2a\u554f\u6b0a\u9650\u7684\u653f\u7b56\u3002Service \u5be6\u969b\u4e0a\u662f\u4e00\u500b\u547d\u540d\u7684\u8ca0\u8f09\u5e73\u8861\u5668\uff0c\u53ef\u5c07\u6d41\u91cf\u4ee3\u7406\u50b3\u8f38\u5230\u4e00\u500b\u6216\u591a\u500b Pod\u3002 \u8a2d\u7f6e Service \u6642\uff0c\u60a8\u9700\u8981\u6839\u64da Pod \u6a19\u7c64\u4f86\u8aaa\u660e\u8981\u4ee3\u7406\u54ea\u4e9b Pod\u3002\n\u67e5\u770b `redis-leader-service.yaml` \u6e05\u55ae\u6587\u4ef6\uff0c\u8a72\u6587\u4ef6\u63cf\u8ff0\u4e86 Redis Leader \u7684 Service \u8cc7\u6e90\uff1a\n [  guestbook/redis-leader-service.yaml ](https://github.com/GoogleCloudPlatform/kubernetes-engine-samples/blob/HEAD/guestbook/redis-leader-service.yaml) [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/kubernetes-engine-samples/blob/HEAD/guestbook/redis-leader-service.yaml) \n```\n# Copyright 2021 Google LLC\n## Licensed under the Apache License, Version 2.0 (the \"License\");# you may not use this file except in compliance with the License.# You may obtain a copy of the License at\n## \u00a0 \u00a0 \u00a0http://www.apache.org/licenses/LICENSE-2.0\n## Unless required by applicable law or agreed to in writing, software# distributed under the License is distributed on an \"AS IS\" BASIS,# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.# See the License for the specific language governing permissions and# limitations under the License.apiVersion: v1kind: Servicemetadata:\u00a0 name: redis-leader\u00a0 labels:\u00a0 \u00a0 app: redis\u00a0 \u00a0 role: leader\u00a0 \u00a0 tier: backendspec:\u00a0 ports:\u00a0 - port: 6379\u00a0 \u00a0 targetPort: 6379\u00a0 selector:\u00a0 \u00a0 app: redis\u00a0 \u00a0 role: leader\u00a0 \u00a0 tier: backend--```\n\u6b64\u6e05\u55ae\u6587\u4ef6\u5275\u5efa\u4e86\u4e00\u9805\u540d\u7232 `redis-leader` \u7684 Service\uff0c\u8a72 Service \u5e36\u6709\u4e00\u7d44\u6a19\u7c64\u9078\u64c7\u5668\u3002\u9019\u4e9b\u6a19\u7c64\u8207\u4e0a\u4e00\u6b65\u4e2d\u90e8\u7f72\u7684\u6a19\u7c64\u96c6\u5339\u914d\u3002\u56e0\u6b64\uff0c\u8a72 Service \u5c07\u7db2\u7d61\u6d41\u91cf\u8def\u7531\u5230\u4e0a\u4e00\u6b65\u4e2d\u5275\u5efa\u7684 Redis Leader Pod\u3002\n\u6e05\u55ae\u7684 `ports` \u90e8\u5206\u8072\u660e\u77ad\u55ae\u500b\u7aef\u53e3\u6620\u5c04\u3002\u5728\u672c\u4f8b\u4e2d\uff0c\u6b64 Service \u5c07 `port: 6379` \u4e0a\u7684\u6d41\u91cf\u8def\u7531\u5230\u5339\u914d\u6307\u5b9a `selector` \u6a19\u7c64\u7684\u5bb9\u5668\u7684 `targetPort: 6379` \u3002\u8acb\u6ce8\u610f\uff0cDeployment \u4e2d\u4f7f\u7528\u7684 `containerPort` \u5fc5\u9808\u8207 `targetPort` \u5339\u914d\u624d\u80fd\u5c07\u6d41\u91cf\u8def\u7531\u5230 Deployment\u3002\n\u901a\u904e\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\u4f86\u5553\u52d5 Redis Leader Service\uff1a\n```\nkubectl apply -f redis-leader-service.yaml\n```\n\u9a57\u8b49 Service \u5df2\u6210\u529f\u5275\u5efa\uff1a\n```\nkubectl get service\n```\n\u8f38\u51fa\uff1a\n```\nNAME   CLUSTER-IP  EXTERNAL-IP PORT(S) AGE\nkubernetes  10.51.240.1  <none>  443/TCP 42s\nredis-leader 10.51.242.233 <none>  6379/TCP 12s\n```## \u8a2d\u7f6e Redis \u95dc\u6ce8\u8005\u96d6\u7136 Redis Leader \u5c6c\u65bc\u55ae\u500b Pod\uff0c\u4f46\u60a8\u53ef\u4ee5\u901a\u904e\u6dfb\u52a0\u4e00\u4e9b Redis \u95dc\u6ce8\u8005\u526f\u672c\u4f86\u7232\u5176\u5be6\u73fe\u9ad8\u53ef\u7528\u6027\uff0c\u4e26\u6eff\u8db3\u6d41\u91cf\u9700\u6c42\u3002\n\u67e5\u770b `redis-follower-deployment.yaml` \u6e05\u55ae\u6587\u4ef6\uff0c\u8a72\u6587\u4ef6\u63cf\u8ff0\u4e86 Redis \u95dc\u6ce8\u8005 Pod \u7684 Deployment\uff1a\n [  guestbook/redis-follower-deployment.yaml ](https://github.com/GoogleCloudPlatform/kubernetes-engine-samples/blob/HEAD/guestbook/redis-follower-deployment.yaml) [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/kubernetes-engine-samples/blob/HEAD/guestbook/redis-follower-deployment.yaml) \n```\n# Copyright 2021 Google LLC\n## Licensed under the Apache License, Version 2.0 (the \"License\");# you may not use this file except in compliance with the License.# You may obtain a copy of the License at\n## \u00a0 \u00a0 \u00a0http://www.apache.org/licenses/LICENSE-2.0\n## Unless required by applicable law or agreed to in writing, software# distributed under the License is distributed on an \"AS IS\" BASIS,# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.# See the License for the specific language governing permissions and# limitations under the License.apiVersion: apps/v1kind: Deploymentmetadata:\u00a0 name: redis-follower\u00a0 labels:\u00a0 \u00a0 app: redis\u00a0 \u00a0 role: follower\u00a0 \u00a0 tier: backendspec:\u00a0 replicas: 2\u00a0 selector:\u00a0 \u00a0 matchLabels:\u00a0 \u00a0 \u00a0 app: redis\u00a0 template:\u00a0 \u00a0 metadata:\u00a0 \u00a0 \u00a0 labels:\u00a0 \u00a0 \u00a0 \u00a0 app: redis\u00a0 \u00a0 \u00a0 \u00a0 role: follower\u00a0 \u00a0 \u00a0 \u00a0 tier: backend\u00a0 \u00a0 spec:\u00a0 \u00a0 \u00a0 containers:\u00a0 \u00a0 \u00a0 - name: follower\u00a0 \u00a0 \u00a0 \u00a0 image: us-docker.pkg.dev/google-samples/containers/gke/gb-redis-follower:v2\u00a0 \u00a0 \u00a0 \u00a0 resources:\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 requests:\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 cpu: 100m\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 memory: 100Mi\u00a0 \u00a0 \u00a0 \u00a0 ports:\u00a0 \u00a0 \u00a0 \u00a0 - containerPort: 6379--```\n\u5982\u9700\u5275\u5efa Redis \u95dc\u6ce8\u8005 Deployment\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\nkubectl apply -f redis-follower-deployment.yaml\n```\n\u901a\u904e\u67e5\u8a62 Pod \u5217\u8868\uff0c\u9a57\u8b49\u9019\u5169\u500b Redis \u95dc\u6ce8\u8005\u526f\u672c\u662f\u5426\u6b63\u5728\u904b\u884c\uff1a\n```\nkubectl get pods\n```\n\u8f38\u51fa\uff1a\n```\nNAME        READY STATUS RESTARTS AGE\nredis-follower-76588f55b7-bnsq6 1/1  Running 0   27s\nredis-follower-76588f55b7-qvtws 1/1  Running 0   27s\nredis-leader-dd446dc55-kl7nl  1/1  Running 0   119s\n```\n\u7372\u53d6\u5176\u4e2d\u4e00\u500b Redis \u95dc\u6ce8\u8005\u7684 Pod \u65e5\u8a8c\u3002\n```\nkubectl logs deployment/redis-follower\n```\n\u8f38\u51fa\uff1a\n```\n1:M 24 Jun 2020 14:50:43.617 * Background saving terminated with success\n1:M 24 Jun 2020 14:50:43.617 * Synchronization with replica 10.12.3.4:6379 succeeded\n```\n### \u5275\u5efa Redis \u95dc\u6ce8\u8005\u670d\u52d9\u7559\u8a00\u677f\u61c9\u7528\u9700\u8981\u8207 Redis \u95dc\u6ce8\u8005\u901a\u4fe1\u4ee5\u8b80\u53d6\u6578\u64da\u3002\u5982\u9700\u8b93 Redis \u95dc\u6ce8\u8005\u66f4\u5bb9\u6613\u88ab\u767c\u73fe\uff0c\u60a8\u5fc5\u9808\u8a2d\u7f6e\u5176\u4ed6 Service\u3002\n`redis-follower-service.yaml` \u5b9a\u7fa9\u4e86 Redis \u95dc\u6ce8\u8005\u7684 Service \u914d\u7f6e\uff1a\n [  guestbook/redis-follower-service.yaml ](https://github.com/GoogleCloudPlatform/kubernetes-engine-samples/blob/HEAD/guestbook/redis-follower-service.yaml) [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/kubernetes-engine-samples/blob/HEAD/guestbook/redis-follower-service.yaml) \n```\n# Copyright 2021 Google LLC\n## Licensed under the Apache License, Version 2.0 (the \"License\");# you may not use this file except in compliance with the License.# You may obtain a copy of the License at\n## \u00a0 \u00a0 \u00a0http://www.apache.org/licenses/LICENSE-2.0\n## Unless required by applicable law or agreed to in writing, software# distributed under the License is distributed on an \"AS IS\" BASIS,# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.# See the License for the specific language governing permissions and# limitations under the License.apiVersion: v1kind: Servicemetadata:\u00a0 name: redis-follower\u00a0 labels:\u00a0 \u00a0 app: redis\u00a0 \u00a0 role: follower\u00a0 \u00a0 tier: backendspec:\u00a0 ports:\u00a0 \u00a0 # the port that this service should serve on\u00a0 - port: 6379\u00a0 selector:\u00a0 \u00a0 app: redis\u00a0 \u00a0 role: follower\u00a0 \u00a0 tier: backend--```\n\u6b64\u6587\u4ef6\u5b9a\u7fa9\u4e00\u9805\u5728\u7aef\u53e3 6379 \u4e0a\u904b\u884c\u7684\u540d\u7232 `redis-follower` \u7684 Service\u3002\u8acb\u6ce8\u610f\uff0cService \u7684 `selector` \u5b57\u6bb5\u8207\u4e0a\u4e00\u6b65\u4e2d\u5275\u5efa\u7684 Redis \u95dc\u6ce8\u8005 Pod \u5339\u914d\u3002\n\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\u4f86\u5275\u5efa `redis-follower` Service\uff1a\n```\nkubectl apply -f redis-follower-service.yaml\n```\n\u9a57\u8b49 Service \u5df2\u6210\u529f\u5275\u5efa\uff1a\n```\nkubectl get service\n```\n\u8f38\u51fa\uff1a\n```\nNAME   CLUSTER-IP  EXTERNAL-IP PORT(S) AGE\nkubernetes  10.51.240.1  <none>  443/TCP 1m\nredis-leader 10.51.242.233 <none>  6379/TCP 49s\nredis-follower 10.51.247.238 <none>  6379/TCP 3s\n```## \u8a2d\u7f6e\u7559\u8a00\u677f Web \u524d\u7aef\u5728\u5553\u52d5\u4e26\u904b\u884c\u4e86\u7559\u8a00\u677f\u7684 Redis \u5b58\u5132\u5f8c\uff0c\u53ef\u4ee5\u5553\u52d5\u7559\u8a00\u677f Web \u670d\u52d9\u5668\u3002\u8207 Redis \u95dc\u6ce8\u8005\u4e00\u6a23\uff0c\u8a72\u524d\u7aef\u5c07\u4f7f\u7528 Kubernetes Deployment \u9032\u884c\u90e8\u7f72\u3002\n\u7559\u8a00\u677f\u61c9\u7528\u4f7f\u7528 PHP \u524d\u7aef\u3002\u8a72\u524d\u7aef\u914d\u7f6e\u7232\u6839\u64da\u8acb\u6c42\u5c6c\u65bc\u8b80\u53d6\u8acb\u6c42\u9084\u662f\u5beb\u5165\u8acb\u6c42\uff0c\u8207 Redis \u95dc\u6ce8\u8005 Service \u6216 Redis Leader Service \u9032\u884c\u901a\u4fe1\u3002\u8a72\u524d\u7aef\u516c\u958b\u4e86\u4e00\u500b JSON \u63a5\u53e3\uff0c\u4e26\u63d0\u4f9b\u57fa\u65bc jQuery-Ajax \u7684\u7528\u6236\u9ad4\u9a57\u3002\n\u67e5\u770b `frontend-deployment.yaml` \u6e05\u55ae\u6587\u4ef6\uff0c\u8a72\u6587\u4ef6\u63cf\u8ff0\u4e86\u7559\u8a00\u677f Web \u670d\u52d9\u5668\u7684 Deployment\uff1a\n [  guestbook/frontend-deployment.yaml ](https://github.com/GoogleCloudPlatform/kubernetes-engine-samples/blob/HEAD/guestbook/frontend-deployment.yaml) [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/kubernetes-engine-samples/blob/HEAD/guestbook/frontend-deployment.yaml) \n```\n# Copyright 2021 Google LLC\n## Licensed under the Apache License, Version 2.0 (the \"License\");# you may not use this file except in compliance with the License.# You may obtain a copy of the License at\n## \u00a0 \u00a0 \u00a0http://www.apache.org/licenses/LICENSE-2.0\n## Unless required by applicable law or agreed to in writing, software# distributed under the License is distributed on an \"AS IS\" BASIS,# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.# See the License for the specific language governing permissions and# limitations under the License.apiVersion: apps/v1kind: Deploymentmetadata:\u00a0 name: frontendspec:\u00a0 replicas: 3\u00a0 selector:\u00a0 \u00a0 matchLabels:\u00a0 \u00a0 \u00a0 \u00a0 app: guestbook\u00a0 \u00a0 \u00a0 \u00a0 tier: frontend\u00a0 template:\u00a0 \u00a0 metadata:\u00a0 \u00a0 \u00a0 labels:\u00a0 \u00a0 \u00a0 \u00a0 app: guestbook\u00a0 \u00a0 \u00a0 \u00a0 tier: frontend\u00a0 \u00a0 spec:\u00a0 \u00a0 \u00a0 containers:\u00a0 \u00a0 \u00a0 - name: php-redis\u00a0 \u00a0 \u00a0 \u00a0 image: us-docker.pkg.dev/google-samples/containers/gke/gb-frontend:v5\u00a0 \u00a0 \u00a0 \u00a0 env:\u00a0 \u00a0 \u00a0 \u00a0 - name: GET_HOSTS_FROM\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 value: \"dns\"\u00a0 \u00a0 \u00a0 \u00a0 resources:\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 requests:\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 cpu: 100m\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 memory: 100Mi\u00a0 \u00a0 \u00a0 \u00a0 ports:\u00a0 \u00a0 \u00a0 \u00a0 - containerPort: 80--```\n\u5982\u9700\u5275\u5efa\u7559\u8a00\u677f Web \u524d\u7aef Deployment\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\nkubectl apply -f frontend-deployment.yaml\n```\n\u5982\u9700\u9a57\u8b49\u9019\u4e09\u500b\u526f\u672c\u6b63\u5728\u904b\u884c\uff0c\u8acb\u67e5\u8a62\u7528\u65bc\u6a19\u8b58 Web \u524d\u7aef\u7684\u6a19\u7c64\u5217\u8868\uff1a\n```\nkubectl get pods -l app=guestbook -l tier=frontend\n```\n\u8f38\u51fa\uff1a\n```\nNAME      READY STATUS RESTARTS AGE\nfrontend-7b78458576-8kp8s 1/1  Running 0   37s\nfrontend-7b78458576-gg86q 1/1  Running 0   37s\nfrontend-7b78458576-hz87g 1/1  Running 0   37s\n```\n\u6e05\u55ae\u6587\u4ef6\u6307\u5b9a\u4e86\u74b0\u5883\u8b8a\u91cf `GET_HOSTS_FROM=dns` \u3002\u7576\u60a8\u5c07\u914d\u7f6e\u63d0\u4f9b\u7d66\u7559\u8a00\u677f Web \u524d\u7aef\u61c9\u7528\u6642\uff0c\u524d\u7aef\u61c9\u7528\u6703\u4f7f\u7528\u4e3b\u6a5f\u540d `redis-follower` \u548c `redis-leader` \u4f86\u57f7\u884c DNS \u67e5\u627e\u3002DNS \u67e5\u627e\u5c07\u67e5\u627e\u60a8\u5728\u5148\u524d\u6b65\u9a5f\u4e2d\u5275\u5efa\u7684\u9069\u7576 Service \u7684 IP \u5730\u5740\u3002\u6b64\u6982\u5ff5\u7a31\u7232 DNS \u670d\u52d9\u767c\u73fe\u3002\n### \u5728\u5916\u90e8 IP \u5730\u5740\u516c\u958b\u524d\u7aef\u60a8\u5728\u5148\u524d\u6b65\u9a5f\u4e2d\u5275\u5efa\u7684 `redis-follower` \u548c `redis-leader` Service \u53ea\u80fd\u5728 GKE \u96c6\u7fa3\u4e2d\u8a2a\u554f\uff0c\u56e0\u7232 Service \u7684\u9ed8\u8a8d\u985e\u578b\u662f [ClusterIP](https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types) \u3002 `ClusterIP` \u7232 Service \u6307\u5411\u7684 Pod \u96c6\u63d0\u4f9b\u55ae\u500b IP \u5730\u5740\u3002\u6b64 IP \u5730\u5740\u53ea\u80fd\u5728\u96c6\u7fa3\u5167\u8a2a\u554f\u3002\n\u4f46\u662f\uff0c\u60a8\u9700\u8981\u8b93\u7559\u8a00\u677f Web \u524d\u7aef Service \u53ef\u4f9b\u5916\u90e8\u7528\u6236\u67e5\u770b\u3002 \u4e5f\u5c31\u662f\u8aaa\uff0c\u60a8\u5e0c\u671b\u5ba2\u6236\u7aef\u80fd\u5920\u5f9e GKE \u96c6\u7fa3\u5916\u90e8\u8acb\u6c42 Service\u3002\u5982\u9700\u5b8c\u6210\u6b64\u8acb\u6c42\uff0c\u60a8\u53ef\u4ee5\u6839\u64da\u9700\u6c42 [\u5728 Service \u914d\u7f6e\u4e2d\u6307\u5b9a type: LoadBalancer \u6216 type: NodePort](https://cloud.google.com/kubernetes-engine/docs/how-to/exposing-apps?hl=zh-cn) \u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u60a8\u5c07\u4f7f\u7528 `type: LoadBalancer` \u3002\u6307\u5b9a\u6b64\u914d\u7f6e\u7684 `frontend-service.yaml` \u6e05\u55ae\u6587\u4ef6\u5982\u4e0b\u6240\u793a\uff1a\n [  guestbook/frontend-service.yaml ](https://github.com/GoogleCloudPlatform/kubernetes-engine-samples/blob/HEAD/guestbook/frontend-service.yaml) [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/kubernetes-engine-samples/blob/HEAD/guestbook/frontend-service.yaml) \n```\n# Copyright 2021 Google LLC\n## Licensed under the Apache License, Version 2.0 (the \"License\");# you may not use this file except in compliance with the License.# You may obtain a copy of the License at\n## \u00a0 \u00a0 \u00a0http://www.apache.org/licenses/LICENSE-2.0\n## Unless required by applicable law or agreed to in writing, software# distributed under the License is distributed on an \"AS IS\" BASIS,# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.# See the License for the specific language governing permissions and# limitations under the License.apiVersion: v1kind: Servicemetadata:\u00a0 name: frontend\u00a0 labels:\u00a0 \u00a0 app: guestbook\u00a0 \u00a0 tier: frontendspec:\u00a0 type: LoadBalancer\u00a0 ports:\u00a0 \u00a0 # the port that this service should serve on\u00a0 - port: 80\u00a0 selector:\u00a0 \u00a0 app: guestbook\u00a0 \u00a0 tier: frontend--```\n\u5275\u5efa `frontend` Service \u6642\uff0cGKE \u6703\u5275\u5efa\u4e00\u500b [\u8ca0\u8f09\u5e73\u8861\u5668](https://cloud.google.com/load-balancing?hl=zh-cn) \u548c\u4e00\u500b\u5916\u90e8 IP \u5730\u5740\u3002\u8acb\u6ce8\u610f\uff0c\u9019\u4e9b\u8cc7\u6e90 [\u9700\u8981\u4ed8\u8cbb](https://cloud.google.com/compute/pricing?hl=zh-cn#lb) \u3002 `ports` \u90e8\u5206\u4e0b\u65b9\u7684\u7aef\u53e3\u8072\u660e\u6307\u5b9a\u4e86 `port: 80` \uff0c\u672a\u6307\u5b9a `targetPort` \u3002\u5982\u679c\u5ffd\u7565 `targetPort` \u5c6c\u6027\uff0c\u5247\u9ed8\u8a8d\u7232 `port` \u5b57\u6bb5\u7684\u503c\u3002\u5728\u672c\u4f8b\u4e2d\uff0c\u6b64 Service \u5c07\u7aef\u53e3 80 \u4e0a\u7684\u5916\u90e8\u6d41\u91cf\u8def\u7531\u5230 `frontend` Deployment \u4e2d\u5bb9\u5668\u7684\u7aef\u53e3 80\u3002\n\u8981\u5275\u5efa Service\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\nkubectl apply -f frontend-service.yaml\n```## \u8a2a\u554f\u7559\u8a00\u677f\u7db2\u7ad9\u5982\u9700\u8a2a\u554f\u7559\u8a00\u677f Service\uff0c\u8acb\u901a\u904e\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\u627e\u5230\u60a8\u8a2d\u7f6e\u7684 Service \u7684\u5916\u90e8 IP \u5730\u5740\uff1a\n```\nkubectl get service frontend\n```\n\u8f38\u51fa\uff1a\n```\nNAME  CLUSTER-IP  EXTERNAL-IP  PORT(S)  AGE\nfrontend 10.51.242.136 109.197.92.229  80:32372/TCP 1m\n```\n **\u6ce8\u610f** \uff1a\u5275\u5efa\u8ca0\u8f09\u5e73\u8861\u5668\u6642\uff0cEXTERNAL-IP \u5217\u53ef\u80fd\u6703\u986f\u793a `<pending>` \u3002\u53ef\u80fd\u9700\u8981\u5e7e\u5206\u9418\u6642\u9593\u624d\u80fd\u5275\u5efa\u8ca0\u8f09\u5e73\u8861\u5668\u3002\n\u8907\u88fd EXTERNAL-IP \u5217\u4e2d\u7684 IP \u5730\u5740\uff0c\u7136\u5f8c\u5728\u700f\u89bd\u5668\u4e2d\u52a0\u8f09\u9801\u9762\u3002\u5982\u9700\u5617\u8a66\u6dfb\u52a0\u4e00\u4e9b\u7559\u8a00\u677f\u689d\u76ee\uff0c\u8acb\u5617\u8a66\u8f38\u5165\u4fe1\u606f\u5e16\uff0c\u7136\u5f8c\u9ede\u64ca **\u63d0\u4ea4** \u3002\u60a8\u8f38\u5165\u7684\u6d88\u606f\u6703\u986f\u793a\u5728\u524d\u7aef\u3002\u6b64\u6d88\u606f\u8868\u793a\u6578\u64da\u5df2\u901a\u904e\u60a8\u4e4b\u524d\u5275\u5efa\u7684 Service \u6210\u529f\u6dfb\u52a0\u5230 Redis\u3002## \u64f4\u5145 Web \u524d\u7aef\u5047\u8a2d\u60a8\u7684\u7559\u8a00\u677f\u61c9\u7528\u5df2\u7d93\u904b\u884c\u4e86\u4e00\u6bb5\u6642\u9593\uff0c\u516c\u5171\u5ba3\u50b3\u7a81\u7136\u6fc0\u589e\u3002\u60a8\u6c7a\u5b9a\u7232\u524d\u7aef\u6dfb\u52a0\u66f4\u591a Web \u670d\u52d9\u5668\u3002\u7531\u65bc\u60a8\u7684\u670d\u52d9\u5668\u88ab\u5b9a\u7fa9\u7232\u4f7f\u7528 Deployment \u63a7\u5236\u5668\u7684\u670d\u52d9\uff0c\u56e0\u6b64\u60a8\u53ef\u4ee5\u8f15\u9b06\u9032\u884c\u64f4\u5c55\u3002\n\u901a\u904e\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5c07 `frontend` Pod \u6578\u91cf\u64f4\u5c55\u5230 5 \u500b\uff1a\n```\nkubectl scale deployment frontend --replicas=5\n```\n\u8f38\u51fa\uff1a\n```\ndeployment.extensions/frontend scaled\n```\n\u7cfb\u7d71\u6703\u66f4\u65b0 Deployment \u7684\u914d\u7f6e\uff0c\u4ee5\u6307\u5b9a\u73fe\u5728\u61c9\u8a72\u904b\u884c 5 \u500b\u526f\u672c\uff1aDeployment \u6703\u8abf\u6574\u6b63\u5728\u904b\u884c\u7684 Pod \u6578\u91cf\uff0c\u4ee5\u5339\u914d\u914d\u7f6e\u3002\u5982\u9700\u9a57\u8b49\u526f\u672c\u6578\u91cf\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\nkubectl get pods\n```\n\u8f38\u51fa\uff1a\n```\nNAME        READY  STATUS RESTARTS AGE\nfrontend-88237173-3s3sc   1/1  Running 0   1s\nfrontend-88237173-twgvn   1/1  Running 0   1s\nfrontend-88237173-5p257   1/1  Running 0   23m\nfrontend-88237173-84036   1/1  Running 0   23m\nfrontend-88237173-j3rvr   1/1  Running 0   23m\nredis-leader-343230949-qfvrq  1/1  Running 0   54m\nredis-follower-132015689-dp23k 1/1  Running 0   37m\nredis-follower-132015689-xq9v0 1/1  Running 0   37m\n```\n\u60a8\u53ef\u4ee5\u4f7f\u7528\u540c\u4e00\u547d\u4ee4\u7e2e\u6e1b\u524d\u7aef Pod \u7684\u6578\u91cf\u3002\n## \u6e05\u7406\u7232\u907f\u514d\u56e0\u672c\u6559\u7a0b\u4e2d\u4f7f\u7528\u7684\u8cc7\u6e90\u5c0e\u81f4\u60a8\u7684 Google Cloud \u8cec\u865f\u7522\u751f\u8cbb\u7528\uff0c\u8acb\u522a\u9664\u5305\u542b\u9019\u4e9b\u8cc7\u6e90\u7684\u9805\u76ee\uff0c\u6216\u8005\u4fdd\u7559\u9805\u76ee\u4f46\u522a\u9664\u5404\u500b\u8cc7\u6e90\u3002- **\u522a\u9664 Service** \uff1a\u6b64\u6b65\u9a5f\u5c07\u53d6\u6d88\u4e26\u91cb\u653e\u7232 `frontend` Service \u5275\u5efa\u7684 Cloud Load Balancer\uff1a```\nkubectl delete service frontend\n```\n- **\u7b49\u5f85\u7cfb\u7d71\u5b8c\u6210\u522a\u9664\u7232 frontend Service \u9810\u914d\u7684\u8ca0\u8f09\u5e73\u8861\u5668** \uff1a\u7576\u60a8\u904b\u884c `kubectl delete` \u6642\uff0c\u7cfb\u7d71\u6703\u5728\u5f8c\u81fa\u7570\u6b65\u522a\u9664\u8ca0\u8f09\u5e73\u8861\u5668\u3002\u89c0\u5bdf\u4ee5\u4e0b\u547d\u4ee4\u7684\u8f38\u51fa\uff0c\u76f4\u5230\u8ca0\u8f09\u5e73\u8861\u5668\u88ab\u522a\u9664\uff1a```\ngcloud compute forwarding-rules list\n```\n- **\u522a\u9664 GKE \u96c6\u7fa3** \uff1a\u6b64\u6b65\u9a5f\u5c07\u522a\u9664\u69cb\u6210 GKE \u96c6\u7fa3\u7684\u8cc7\u6e90\uff0c\u5982\u8a08\u7b97\u5be6\u4f8b\u3001\u78c1\u76e4\u548c\u7db2\u7d61\u8cc7\u6e90\u3002```\ngcloud container clusters delete guestbook\n```\n## \u5f8c\u7e8c\u6b65\u9a5f\n- \u77ad\u89e3\u5982\u4f55\u4f7f\u7528\u6c34\u5e73 Pod \u81ea\u52d5\u64f4\u7e2e\u529f\u80fd\u7232\u60a8\u7684 Deployment [\u914d\u7f6e\u81ea\u52d5 Pod \u81ea\u52d5\u64f4\u7e2e\u529f\u80fd](https://cloud.google.com/kubernetes-engine/docs/how-to/horizontal-pod-autoscaling?hl=zh-cn) \u3002\n- \u5b78\u7fd2 [MySQL \u548c WordPress](https://cloud.google.com/kubernetes-engine/docs/tutorials/persistent-disk?hl=zh-cn) \u6559\u7a0b\uff0c\u77ad\u89e3\u5982\u4f55\u5728\u61c9\u7528\u4e2d\u5b58\u5132\u6c38\u4e45\u6027\u6578\u64da\u3002\n- \u77ad\u89e3\u5982\u4f55 [\u5c07\u57df\u540d\u6620\u5c04](https://cloud.google.com/kubernetes-engine/docs/tutorials/configuring-domain-name-static-ip?hl=zh-cn) \u5230 GKE Service\u3002\n- \u700f\u89bd\u5176\u4ed6 [Kubernetes Engine \u6559\u7a0b](https://cloud.google.com/kubernetes-engine/docs/tutorials?hl=zh-cn) \u3002", "guide": "Google Kubernetes Engine (GKE)"}