{"title": "Google Kubernetes Engine (GKE) - Increase network traffic speed for GPU nodes", "url": "https://cloud.google.com/kubernetes-engine/docs/how-to/using-gvnic", "abstract": "# Google Kubernetes Engine (GKE) - Increase network traffic speed for GPU nodes\nThis page shows you how to increase network bandwidth for GPU nodes on Google Kubernetes Engine (GKE) clusters by using [Google Virtual NIC (gVNIC)](/compute/docs/networking/using-gvnic) .\n", "content": "## Before you begin\nBefore you start, make sure you have performed the following tasks:\n- Enable    the Google Kubernetes Engine API.\n- [    Enable Google Kubernetes Engine API   ](https://console.cloud.google.com/flows/enableapi?apiid=container.googleapis.com) \n- If you want to use the Google Cloud CLI for this task, [install](/sdk/docs/install) and then [initialize](/sdk/docs/initializing) the  gcloud CLI. If you previously installed the gcloud CLI, get the latest  version by running`gcloud components update`. **Note:** For existing gcloud CLI  installations, make sure to set the`compute/region`and`compute/zone` [properties](/sdk/docs/properties#setting_properties) . By setting default locations,  you can avoid errors in gcloud CLI like the following:`One of [--zone, --region] must be supplied: Please specify location`.\n### Limitations\n- [Compute Engine](/compute/docs/networking/using-gvnic#limitations) limitations apply.\n- The gVNIC API is only supported on [GPU nodes](/kubernetes-engine/docs/how-to/gpus) . To increase bandwidth on non-GPU nodes, consider enabling [Tier-1 bandwidth](/kubernetes-engine/docs/how-to/using-tier-1#enable_tier_1_bandwidth) .\n### Requirements\n- GKE nodes must use a Container-Optimized OS [node image](/kubernetes-engine/docs/concepts/node-images#cos) .## Enable gVNIC\nYou can create a cluster that has node pools that use gVNIC, create a node pool with gVNIC enabled, or update a node pool to use gVNIC.\n### Create a cluster\nCreate a cluster with node pools that use gVNIC:\n```\ngcloud container clusters create CLUSTER_NAME \\\u00a0 \u00a0 --accelerator type=GPU_TYPE,count=AMOUNT \\\u00a0 \u00a0 --machine-type=MACHINE_TYPE \\\u00a0 \u00a0 --enable-gvnic\n```\nReplace the following:\n- ``: the name of the new cluster.\n- ``: the GPU type. Can be one of the following:- `nvidia-tesla-k80`\n- `nvidia-tesla-p100`\n- `nvidia-tesla-p4`\n- `nvidia-tesla-v100`\n- `nvidia-tesla-t4`\n- `nvidia-tesla-a100`\n- `nvidia-a100-80gb`\n- `nvidia-l4`\n- ``: the number of GPUs to attach to nodes in the node pool.\n- ``: the type of machine you want to use. gVNIC is not supported on [memory-optimized machine types](/compute/docs/machine-types#memory-optimized_machine_type_family) .\n### Create a node pool\nCreate a node pool that uses gVNIC:\n```\ngcloud container node-pools create NODEPOOL_NAME \\\u00a0 \u00a0 --cluster=CLUSTER_NAME \\\u00a0 \u00a0 --enable-gvnic\n```\nReplace the following:\n- ``: the name of a new node pool.\n- ``: the name of the existing cluster.\n### Update a node pool\nUpdate a node pool to use gVNIC:\n```\ngcloud container node-pools update NODEPOOL_NAME \\\u00a0 \u00a0 --cluster=CLUSTER_NAME \\\u00a0 \u00a0 --enable-gvnic\n```\nReplace the following:\n- ``: the name of the node pool that you want to update.\n- ``: the name of the existing cluster.## Disable gVNIC\nUpdate the node pool using the `--no-enable-gvnic` flag:\n```\ngcloud container node-pools update NODEPOOL_NAME \\\u00a0 \u00a0 --cluster=CLUSTER_NAME \\\u00a0 \u00a0 --no-enable-gvnic\n```\n## Troubleshooting\nTo troubleshoot gVNIC, see [Troubleshooting Google Virtual NIC](/compute/docs/troubleshooting/gvnic) .\n## What's next\n- Use [network policy logging](/kubernetes-engine/docs/how-to/network-policy-logging) to record when connections to Pods are allowed or denied by your cluster's [network policies](https://kubernetes.io/docs/concepts/services-networking/network-policies/) .", "guide": "Google Kubernetes Engine (GKE)"}