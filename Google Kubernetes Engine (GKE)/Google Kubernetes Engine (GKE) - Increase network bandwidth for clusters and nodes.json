{"title": "Google Kubernetes Engine (GKE) - Increase network bandwidth for clusters and nodes", "url": "https://cloud.google.com/kubernetes-engine/docs/how-to/using-tier-1", "abstract": "# Google Kubernetes Engine (GKE) - Increase network bandwidth for clusters and nodes\nThis page shows you how to increase network bandwidth limit for Google Kubernetes Engine (GKE) clusters and cluster nodes by using [Tier 1 bandwidth](/compute/docs/networking/configure-vm-with-high-bandwidth-configuration#bandwidth-tiers) .\n", "content": "## Pricing\n[Higher bandwidth pricing](/compute/all-pricing#high_bandwidth_configuration) applies when you enable Tier 1 bandwidth.\n## Before you begin\nBefore you start, make sure you have performed the following tasks:\n- Enable    the Google Kubernetes Engine API.\n- [    Enable Google Kubernetes Engine API   ](https://console.cloud.google.com/flows/enableapi?apiid=container.googleapis.com) \n- If you want to use the Google Cloud CLI for this task, [install](/sdk/docs/install) and then [initialize](/sdk/docs/initializing) the  gcloud CLI. If you previously installed the gcloud CLI, get the latest  version by running`gcloud components update`. **Note:** For existing gcloud CLI  installations, make sure to set the`compute/region`and`compute/zone` [properties](/sdk/docs/properties#setting_properties) . By setting default locations,  you can avoid errors in gcloud CLI like the following:`One of [--zone, --region] must be supplied: Please specify location`.\n### Limitations\n- [Compute Engine](/compute/docs/networking/using-gvnic#limitations) limitations apply.\n- When you enable Tier 1 bandwidth, GKE enables [Google Virtual NIC (gVNIC)](/compute/docs/networking/using-gvnic) , and GKE manages gVNIC as long as the node pool has Tier 1 bandwidth enabled.\n- Tier 1 bandwidth is only supported on N2, N2D, C2, C2D, C3, and M3 VMs.\n### Requirements\n- GKE nodes must use a Container-Optimized OS [node image](/kubernetes-engine/docs/concepts/node-images#cos) .## Enable Tier 1 bandwidth on a cluster\nYou can create a cluster that has Tier 1 bandwidth enabled, or you can update a cluster to use Tier 1 bandwidth.\nA Tier 1 bandwidth enabled cluster has node pool Tier 1 bandwidth enabled by default. If you set the node pool bandwidth to `TIER_UNSPECIFIED` , the node pool settings override the cluster bandwidth settings.\n### Create a cluster with Tier 1 bandwidth enabled\nCreate a cluster that uses Tier 1 bandwidth:\n```\ngcloud container clusters create CLUSTER_NAME \\\u00a0 \u00a0 --network-performance-configs=total-egress-bandwidth-tier=TIER_1\n```\nReplace the `` with the name of the cluster.\n### Update a cluster to enable Tier 1 bandwidth\nUpdate a cluster to use Tier 1 bandwidth:\n```\ngcloud container clusters update CLUSTER_NAME \\\u00a0 \u00a0 --network-performance-configs=total-egress-bandwidth-tier=TIER_1\n```\nReplace the `` with the name of the existing cluster.\n**Note:** When you update a cluster to use Tier 1 bandwidth, only the default value of the new node pool changes. The default value of existing node pools remains unchanged.\n## Enable Tier 1 bandwidth on a node pool\nYou can create a node pool that has Tier 1 bandwidth enabled, or you can update a node pool to use Tier 1 bandwidth.\nA Tier 1 bandwidth enabled cluster has node pool Tier 1 bandwidth enabled by default. However, the node pool API overrides your cluster-level configuration for Tier 1.\n### Create a node pool with Tier 1 bandwidth enabled\nCreate a node pool that uses Tier 1 bandwidth:\n```\ngcloud container node-pools create NODEPOOL_NAME \\\u00a0 \u00a0 --cluster=CLUSTER_NAME \\\u00a0 \u00a0 --network-performance-configs=total-egress-bandwidth-tier=TIER_1\n```\nReplace the following:\n- ``: the name of the new node pool.\n- ``: the name of the existing cluster.\n### Update a node pool to enable Tier 1 bandwidth\nUpdate a node pool to use Tier 1 bandwidth:\n```\ngcloud container node-pools update NODEPOOL_NAME \\\u00a0 \u00a0 --cluster=CLUSTER_NAME \\\u00a0 \u00a0 --network-performance-configs=total-egress-bandwidth-tier=TIER_1\n```\nReplace the following:\n- ``: the name of the node pool that you want to update.\n- ``: the name of the existing cluster.## Disable Tier 1 bandwidth on a cluster or a node pool\nYou can disable Tier 1 bandwidth at the cluster level or node pool level. When you disable Tier 1 bandwidth at the cluster level, node pool Tier 1 bandwidth is set to `TIER_UNSPECIFIED` . Disabling Tier 1 bandwidth at cluster level does not disable existing node pool configuration.\nUpdate the cluster to use default bandwidth:\n```\ngcloud container clusters update CLUSTER_NAME \\\u00a0 \u00a0 --cluster=CLUSTER_NAME \\\u00a0 \u00a0 --network-performance-configs=total-egress-bandwidth-tier=TIER_UNSPECIFIED\n```\nUpdate the node pool to use default bandwidth:\n```\ngcloud container node-pools update NODEPOOL_NAME \\\u00a0 \u00a0 --cluster=CLUSTER_NAME \\\u00a0 \u00a0 --network-performance-configs=total-egress-bandwidth-tier=TIER_UNSPECIFIED\n```\n## What's next\n- Use [network policy logging](/kubernetes-engine/docs/how-to/network-policy-logging) to record when connections to Pods are allowed or denied by your cluster's [network policies](https://kubernetes.io/docs/concepts/services-networking/network-policies/) .\n- Learn how to [set the network tier](/network-tiers/docs/set-network-tier) .\n- Know more about the highest [maximum transmission unit (MTU)](/compute/docs/networking/benchmarking-higher-bandwidth-vms#setup-benchmark-vms) setting.", "guide": "Google Kubernetes Engine (GKE)"}