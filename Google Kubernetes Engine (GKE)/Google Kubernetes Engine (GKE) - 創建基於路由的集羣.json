{"title": "Google Kubernetes Engine (GKE) - \u5275\u5efa\u57fa\u65bc\u8def\u7531\u7684\u96c6\u7fa3", "url": "https://cloud.google.com/kubernetes-engine/docs/how-to/routes-based-cluster?hl=zh-cn", "abstract": "# Google Kubernetes Engine (GKE) - \u5275\u5efa\u57fa\u65bc\u8def\u7531\u7684\u96c6\u7fa3\n\u672c\u9801\u9762\u4ecb\u7d39\u5982\u4f55\u5728 Google Kubernetes Engine (GKE) \u4e2d\u5275\u5efa\u57fa\u65bc\u8def\u7531\u7684\u96c6\u7fa3\u3002\n", "content": "## \u6982\u89bd\n\u5728 GKE \u4e2d\uff0c\u7cfb\u7d71\u53ef\u4ee5\u6839\u64da\u96c6\u7fa3\u5c07\u6d41\u91cf\u5f9e\u4e00\u500b Pod \u8def\u7531\u5230\u53e6\u4e00\u500b Pod \u7684\u65b9\u5f0f\u4f86\u5340\u5206\u96c6\u7fa3\u3002\u4f7f\u7528 [Google Cloud \u8def\u7531](https://cloud.google.com/vpc/docs/routes?hl=zh-cn) \u7684\u96c6\u7fa3\u7a31\u7232\u57fa\u65bc\u8def\u7531\u7684\u96c6\u7fa3 \u3002\u4f7f\u7528\u5225\u540d IP \u7684\u96c6\u7fa3\u7a31\u7232 VPC \u539f\u751f\u96c6\u7fa3 \u3002\n[VPC \u539f\u751f](https://cloud.google.com/kubernetes-engine/docs/how-to/alias-ips?hl=zh-cn) \u7232\u63a8\u85a6\u985e\u578b\uff0c\u4e26\u4e14\u662f GKE 1.21.0-gke.1500 \u53ca\u66f4\u9ad8\u7248\u672c\u4e2d\u65b0\u96c6\u7fa3\u7684\u9ed8\u8a8d\u985e\u578b\u3002\u8981\u5275\u5efa\u57fa\u65bc\u8def\u7531\u7684\u96c6\u7fa3\uff0c\u60a8\u5fc5\u9808 [\u660e\u78ba\u95dc\u9589 VPC \u539f\u751f\u9078\u9805](#creating_a_routes_based_cluster) \u3002\n## \u6e96\u5099\u5de5\u4f5c\n\u5728\u958b\u59cb\u4e4b\u524d\uff0c\u8acb\u78ba\u4fdd\u60a8\u5df2\u57f7\u884c\u4ee5\u4e0b\u4efb\u52d9\uff1a\n- \u5553\u7528 Google Kubernetes Engine API\u3002\n- [  \u5553\u7528 Google Kubernetes Engine API ](https://console.cloud.google.com/flows/enableapi?apiid=container.googleapis.com&hl=zh-cn) \n- \u5982\u679c\u60a8\u8981\u4f7f\u7528 Google Cloud CLI \u57f7\u884c\u6b64\u4efb\u52d9\uff0c\u8acb [\u5b89\u88dd](https://cloud.google.com/sdk/docs/install?hl=zh-cn) \u4e26 [\u521d\u59cb\u5316](https://cloud.google.com/sdk/docs/initializing?hl=zh-cn) gcloud CLI\u3002 \u5982\u679c\u60a8\u4e4b\u524d\u5b89\u88dd\u4e86 gcloud CLI\uff0c\u8acb\u904b\u884c`gcloud components update`\u4ee5\u7372\u53d6\u6700\u65b0\u7248\u672c\u3002 **\u6ce8\u610f** \uff1a\u5c0d\u65bc\u73fe\u6709 gcloud CLI \u5b89\u88dd\uff0c\u8acb\u52d9\u5fc5\u8a2d\u7f6e`compute/region`\u548c`compute/zone` [\u5c6c\u6027](https://cloud.google.com/sdk/docs/properties?hl=zh-cn#setting_properties) \u3002\u901a\u904e\u8a2d\u7f6e\u9ed8\u8a8d\u4f4d\u7f6e\uff0c\u60a8\u53ef\u4ee5\u907f\u514d gcloud CLI \u4e2d\u51fa\u73fe\u4ee5\u4e0b\u932f\u8aa4\uff1a`One of [--zone, --region] must be supplied: Please specify location`\u3002## \u5275\u5efa\u57fa\u65bc\u8def\u7531\u7684\u96c6\u7fa3\n\u60a8\u53ef\u4ee5\u4f7f\u7528 gcloud CLI \u6216 Google Cloud \u63a7\u5236\u6aaf\u5275\u5efa\u57fa\u65bc\u8def\u7531\u7684\u96c6\u7fa3\u3002\n\u8981\u5275\u5efa\u57fa\u65bc\u8def\u7531\u7684\u96c6\u7fa3\uff0c\u8acb\u5728\u96c6\u7fa3\u5275\u5efa\u547d\u4ee4\u4e2d\u6dfb\u52a0 `--no-enable-ip-alias` \u6a19\u8a8c\uff1a\n```\ngcloud container clusters create CLUSTER_NAME --no-enable-ip-alias\n```\n\u5c07 `` \u66ff\u63db\u7232\u60a8\u7232\u96c6\u7fa3\u9078\u64c7\u7684\u540d\u7a31\u3002- \u8f49\u5230 Google Cloud \u63a7\u5236\u6aaf\u4e2d\u7684 **Google Kubernetes Engine** \u9801\u9762\u3002 [\u8f49\u5230 Google Kubernetes Engine](https://console.cloud.google.com/kubernetes/list?hl=zh-cn) \n- \u9ede\u64ca **\u5275\u5efa** \u3002\n- \u8f38\u5165\u96c6\u7fa3\u7684\u540d\u7a31\u3002\n- \u5728\u5c0e\u822a\u7a97\u683c\u7684 **\u96c6\u7fa3** \u4e0b\uff0c\u9ede\u64ca **\u7db2\u7d61** \u3002\n- \u5728 **\u9ad8\u7d1a\u7db2\u7d61\u9078\u9805** \u4e0b\uff0c\u53d6\u6d88\u9078\u4e2d **\u5553\u7528 VPC \u539f\u751f\u6d41\u91cf\u8def\u7531\uff08\u4f7f\u7528\u5225\u540d IP\uff09** \u8907\u9078\u6846\u3002\n- \u9ede\u64ca **\u5275\u5efa** \u3002\n### \u5275\u5efa\u57fa\u65bc\u8def\u7531\u7684\u96c6\u7fa3\u4e26\u9078\u64c7\u63a7\u5236\u5c64\u9762 IP \u7bc4\u570d\n\u9ed8\u8a8d\u60c5\u6cc1\u4e0b\uff0c\u5177\u6709 [Private Service Connect](https://cloud.google.com/kubernetes-engine/docs/concepts/network-overview?hl=zh-cn#public-cluster-psc) \u7684\u96c6\u7fa3\u4f7f\u7528\u4e3b\u8981\u5b50\u7db2\u7bc4\u570d\u4f86\u9810\u914d\u5206\u914d\u7d66\u63a7\u5236\u5e73\u9762\u7aef\u9ede\u7684\u5167\u90e8 IP \u5730\u5740\u3002\u60a8\u53ef\u4ee5\u66ff\u63db\u6b64\u9ed8\u8a8d\u8a2d\u7f6e\uff0c\u65b9\u6cd5\u662f\u50c5\u5728\u5275\u5efa\u96c6\u7fa3\u671f\u9593\u9078\u64c7\u5176\u4ed6\u5b50\u7db2\u7bc4\u570d\u3002\u4ee5\u4e0b\u90e8\u5206\u4ecb\u7d39\u77ad\u5982\u4f55\u4f7f\u7528 Private Service Connect \u5275\u5efa\u96c6\u7fa3\u4e26\u66ff\u63db\u5b50\u7db2\u7bc4\u570d\u3002\n\u4f7f\u7528 Private Service Connect \u5275\u5efa\u96c6\u7fa3\uff1a\n```\ngcloud container clusters create CLUSTER_NAME --no-enable-ip-alias \\\u00a0 \u00a0 --private-endpoint-subnetwork=SUBNET_NAME \\\u00a0 \u00a0 --region=COMPUTE_REGION\n```\n\u66ff\u63db\u4ee5\u4e0b\u5167\u5bb9\uff1a- ``\uff1aGKE \u96c6\u7fa3\u7684\u540d\u7a31\u3002\n- ``\uff1a\u73fe\u6709\u5b50\u7db2\u7684\u540d\u7a31\u3002\n- ``\uff1a\u96c6\u7fa3\u7684 [\u8a08\u7b97\u5340\u57df](https://cloud.google.com/compute/docs/regions-zones?hl=zh-cn#available) \u3002\u5982\u9700\u5275\u5efa\u53ef\u7528\u5340\u7d1a\u96c6\u7fa3\uff0c\u8acb\u5c07\u6b64\u6a19\u8a8c\u66ff\u63db\u7232`--zone=` ``\uff0c\u5176\u4e2d``\u7232 [\u8a08\u7b97\u53ef\u7528\u5340](https://cloud.google.com/compute/docs/regions-zones?hl=zh-cn#available) \u3002\n\u5982\u9700\u5411\u65b0\u96c6\u7fa3\u7684\u63a7\u5236\u5c64\u9762\u5206\u914d\u5b50\u7db2\uff0c\u60a8\u5fc5\u9808\u5148 [\u6dfb\u52a0\u5b50\u7db2](https://cloud.google.com/vpc/docs/using-vpc?hl=zh-cn#add-subnets) \u3002\n- \u8f49\u5230 Google Cloud \u63a7\u5236\u6aaf\u4e2d\u7684 **Google Kubernetes Engine** \u9801\u9762\u3002 [\u8f49\u5230 Google Kubernetes Engine](https://console.cloud.google.com/kubernetes/list?hl=zh-cn) \n- \u9ede\u64ca **\u5275\u5efa** \u3002\n- \u8f38\u5165\u96c6\u7fa3\u7684\u540d\u7a31\u3002\n- \u5728\u5c0e\u822a\u7a97\u683c\u7684 **\u96c6\u7fa3** \u4e0b\uff0c\u9ede\u64ca **\u7db2\u7d61** \u3002\n- \u5728 **IPv4 \u7db2\u7d61\u8a2a\u554f** \u90e8\u5206\uff0c\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a- \u5982\u9700\u5275\u5efa\u516c\u5171 GKE \u96c6\u7fa3\uff0c\u8acb\u9078\u64c7 **\u516c\u5171\u96c6\u7fa3** \u55ae\u9078\u6309\u9215\u3002\n- \u5982\u9700\u5275\u5efa\u5c08\u7528 GKE \u96c6\u7fa3\uff0c\u8acb\u9078\u64c7 **\u5c08\u7528\u96c6\u7fa3** \u55ae\u9078\u6309\u9215\u3002\n\u5728\u9019\u5169\u7a2e\u60c5\u6cc1\u4e0b\uff0c\u60a8\u4ee5\u5f8c\u90fd\u53ef\u4ee5\u5728\u4fee\u6539\u96c6\u7fa3\u914d\u7f6e\u6642 [\u66f4\u6539\u96c6\u7fa3\u9694\u96e2\u6a21\u5f0f](https://cloud.google.com/kubernetes-engine/docs/how-to/change-cluster-isolation?hl=zh-cn#why_change_cluster_isolation) \u3002\n- \u5728 **\u9ad8\u7d1a\u7db2\u7d61\u9078\u9805** \u90e8\u5206\u4e2d\uff0c\u9078\u4e2d **\u66ff\u63db\u63a7\u5236\u5c64\u9762\u7684\u9ed8\u8a8d\u5c08\u7528\u7aef\u9ede\u5b50\u7db2** \u8907\u9078\u6846\u3002\n- \u5728 **\u5c08\u7528\u7aef\u9ede\u5b50\u7db2** \u5217\u8868\u4e2d\uff0c\u9078\u64c7\u60a8\u5275\u5efa\u7684\u5b50\u7db2\u3002\n- \u53d6\u6d88\u52fe\u9078 **\u5553\u7528 VPC \u539f\u751f\u6d41\u91cf\u8def\u7531\uff08\u4f7f\u7528\u5225\u540d IP\uff09** \u8907\u9078\u6846\u3002\n- \u9ede\u64ca **\u5275\u5efa** \u3002## \u9a57\u8b49\u96c6\u7fa3\u662f\u5426\u4f7f\u7528\u8def\u7531\n\u5217\u51fa\u96c6\u7fa3\u7bc0\u9ede\uff1a\n```\nkubectl get nodes\n```\n\u8f38\u51fa\u986f\u793a\u7bc0\u9ede\u7684\u540d\u7a31\uff1a\n```\nNAME         STATUS ...  AGE VERSION\ngke-xxx-default-pool-83e239a7-kcg8 Ready ...  42m v1.9.7-gke.6\ngke-xxx-default-pool-83e239a7-qm6b Ready ...  42m v1.9.7-gke.6\ngke-xxx-default-pool-83e239a7-wnrq Ready ...  42m 1.9.7-gke.6\n```\n\u5217\u51fa\u8def\u7531\uff1a\n```\ngcloud compute routes list\n```\n\u5728\u6b64\u8f38\u51fa\u7684 **\u4e0b\u4e00\u500b\u8e8d\u9ede** \u5217\u4e2d\uff0c\u67e5\u627e\u5176\u4e2d\u4e00\u500b\u96c6\u7fa3\u7bc0\u9ede\u7684\u540d\u7a31\uff1a\n```\nNAME     NETWORK  DEST_RANGE   NEXT_HOP\n...\n[ROUTE_NAME]   default  10.24.0.0/24  [YOUR_NODE_NAME]\n...\n```\n\u5728\u6b64\u8f38\u51fa\u4e2d\uff0c\u8def\u7531\u7232\u4efb\u4f55\u767c\u5f80\u7279\u5b9a Pod \u5730\u5740\u7bc4\u570d\u7684\u6578\u64da\u5305\u63d0\u4f9b\u4e0b\u4e00\u500b\u8e8d\u9ede\u3002- \u8f49\u5230 Google Cloud \u63a7\u5236\u6aaf\u4e2d\u7684 **Google Kubernetes Engine** \u9801\u9762\u3002 [\u8f49\u5230 Google Kubernetes Engine](https://console.cloud.google.com/kubernetes/list?hl=zh-cn) \n- \u5728\u96c6\u7fa3\u5217\u8868\u4e2d\uff0c\u9ede\u64ca\u60a8\u8981\u6aa2\u67e5\u7684\u96c6\u7fa3\u7684\u540d\u7a31\u3002\n- \u5728 **\u96c6\u7fa3\u8a73\u60c5** \u9801\u9762\u4e0a\uff0c\u9ede\u64ca **\u7bc0\u9ede** \u6a19\u7c64\u9801\u3002\n- \u5728 **\u7bc0\u9ede** \u90e8\u5206\u4e2d\uff0c\u8a18\u4e0b\u4efb\u4f55\u7bc0\u9ede\u7684\u540d\u7a31\u3002\n- \u8f49\u5230 Google Cloud \u63a7\u5236\u6aaf\u4e2d\u7684 **\u8def\u7531** \u9801\u9762\u3002 [\u8f49\u5230\u201c\u8def\u7531\u201d](https://console.cloud.google.com/networking/routes/list?hl=zh-cn) \n- \u5728\u8def\u7531\u5217\u8868\u7684 **\u4e0b\u4e00\u500b\u8e8d\u9ede** \u5217\u4e2d\uff0c\u67e5\u627e\u5176\u4e2d\u4e00\u500b\u96c6\u7fa3\u7bc0\u9ede\u7684\u540d\u7a31\u3002\u9ede\u64ca\u8a72\u884c\u4e2d\u7684\u8def\u7531\u540d\u7a31\u3002\n- \u5728 **\u8def\u7531\u8a73\u8acb** \u9801\u9762\u4e0a\uff0c\u6aa2\u67e5 **\u4e0b\u4e00\u500b\u8e8d\u9ede** \u90e8\u5206\uff0c\u9a57\u8b49\u8def\u7531\u662f\u5426\u63d0\u4f9b\u4efb\u4f55\u767c\u5f80\u7279\u5b9a Pod \u5730\u5740\u7bc4\u570d\u7684\u6578\u64da\u5305\u7684\u4e0b\u4e00\u500b\u8e8d\u9ede\u3002## \u6bcf\u500b\u7bc0\u9ede\u7684 Pod \u6578\n\u5728\u57fa\u65bc\u8def\u7531\u7684\u96c6\u7fa3\u4e2d\uff0c\u6bcf\u500b\u7bc0\u9ede\u90fd\u5206\u914d\u6709\u4e00\u500b /24 \u7bc4\u570d\u5167\u7684\u9069\u7528\u65bc Pod \u7684 IP \u5730\u5740\u3002/24 \u7bc4\u570d\u5167\u6709 256 \u500b\u5730\u5740\uff0c\u4f46\u6bcf\u500b\u7bc0\u9ede\u7684 Pod \u6578\u76ee\u4e0a\u9650\u662f 110\u3002Kubernetes \u80fd\u5c07\u53ef\u7528 IP \u5730\u5740\u6578\u91cf\u8a2d\u7232 Pod \u6578\u91cf\u7684\u5c07\u8fd1\u5169\u500d\uff0c\u7576 Pod \u6dfb\u52a0\u5230\u7bc0\u9ede\u4ee5\u53ca\u5f9e\u7bc0\u9ede\u4e2d\u79fb\u9664\u6642\uff0cKubernetes \u80fd\u5920\u6e1b\u5c11 IP \u5730\u5740\u7684\u91cd\u7528\u3002\n## Pod \u5730\u5740\u7bc4\u570d\n\u57fa\u65bc\u8def\u7531\u7684\u96c6\u7fa3\u6709\u4e00\u7cfb\u5217 IP \u5730\u5740\u53ef\u7528\u65bc Pod \u548c\u670d\u52d9\u3002\u96d6\u7136\u8a72\u7bc4\u570d\u540c\u6642\u7528\u65bc Pod \u548c\u670d\u52d9\uff0c\u4f46\u5b83\u7a31\u7232\u201cPod \u5730\u5740\u7bc4\u570d\u201d \u3002Pod \u5730\u5740\u7bc4\u570d\u6700\u5f8c\u7684 /20 \u7528\u65bc\u670d\u52d9\u3002\u4e00\u500b /20 \u7bc4\u570d\u6709 2 = 4096 \u500b\u5730\u5740\u3002\u56e0\u6b64\uff0c4096 \u500b\u5730\u5740\u7528\u65bc\u670d\u52d9\uff0c\u5269\u9918\u7bc4\u570d\u7528\u65bc Pod\u3002\n\u5728\u547d\u4ee4\u8f38\u51fa\u4e2d\uff0cPod \u5730\u5740\u7bc4\u570d\u7a31\u7232 `clusterIpv4Cidr` \uff0c\u7528\u65bc\u670d\u52d9\u7684\u5730\u5740\u7bc4\u570d\u7a31\u7232 `servicesIpv4Cidr` \u3002\u4f8b\u5982\uff0c `gcloud container clusters describe` \u7684\u8f38\u51fa\u5305\u62ec\u5982\u4e0b\u6240\u793a\u7684\u8f38\u51fa\uff1a\n```\nclusterIpv4Cidr: 10.96.0.0/16\n...\nservicesIpv4Cidr: 10.96.240.0/20\n```\nPod \u5730\u5740\u7bc4\u570d\u53ef\u4ee5\u4f86\u81ea\u4e0b\u5217\u4efb\u610f RFC 1918 \u584a\uff1a `10.0.0.0/8` \u3001 `172.16.0.0/12` \u6216 `192.168.0.0/16` \u3002\n\u60a8\u53ef\u901a\u904e\u6307\u5b9a CIDR \u7bc4\u570d\u4f86\u81ea\u5b9a\u7fa9 Pod \u5730\u5740\u7bc4\u570d\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u6307\u5b9a\u7bc4\u570d `10.96.0.0/16` \u3002\n```\ngcloud container clusters create CLUSTER_NAME \\\u00a0 \u00a0 --no-enable-ip-alias \\\u00a0 \u00a0 --cluster-ipv4-cidr 10.96.0.0/16\n```\n\u5c07 `` \u66ff\u63db\u7232\u60a8\u7232\u96c6\u7fa3\u9078\u64c7\u7684\u540d\u7a31\u3002- \u8f49\u5230 Google Cloud \u63a7\u5236\u6aaf\u4e2d\u7684 **Google Kubernetes Engine** \u9801\u9762\u3002 [\u8f49\u5230 Google Kubernetes Engine](https://console.cloud.google.com/kubernetes/list?hl=zh-cn) \n- \u9ede\u64ca **\u5275\u5efa** \u3002\n- \u8f38\u5165\u96c6\u7fa3\u7684\u540d\u7a31\u3002\n- \u5728\u5c0e\u822a\u7a97\u683c\u7684 **\u96c6\u7fa3** \u4e0b\uff0c\u9ede\u64ca **\u7db2\u7d61** \u3002\n- \u5728 **\u9ad8\u7d1a\u7db2\u7d61\u9078\u9805** \u4e0b\uff0c\u53d6\u6d88\u9078\u4e2d **\u5553\u7528 VPC \u539f\u751f\u6d41\u91cf\u8def\u7531\uff08\u4f7f\u7528\u5225\u540d IP\uff09** \u8907\u9078\u6846\u3002\n- \u5728 **Pod \u5730\u5740\u7bc4\u570d** \u5b57\u6bb5\u4e2d\uff0c\u8f38\u5165 `10.96.0.0/16` \u3002\n- \u9ede\u64ca **\u5275\u5efa** \u3002\n### \u96c6\u7fa3\u5927\u5c0f\u8abf\u6574\u7684\u6ce8\u610f\u4e8b\u9805\n\u7d66\u5b9a GKE \u96c6\u7fa3\u7684\u6700\u5927\u7bc0\u9ede\u6578\u3001Pod \u6578\u548c\u670d\u52d9\u6578\u7531\u96c6\u7fa3\u5b50\u7db2\u5927\u5c0f\u548c Pod \u5730\u5740\u7bc4\u570d\u7684\u5927\u5c0f\u6c7a\u5b9a\u3002\u5275\u5efa\u96c6\u7fa3\u540e\uff0cPod \u5730\u5740\u7bc4\u570d\u5927\u5c0f\u4fbf\u7121\u6cd5\u518d\u66f4\u6539\u3002\u5275\u5efa\u96c6\u7fa3\u6642\uff0c\u8acb\u78ba\u4fdd\u9078\u64c7\u8db3\u5920\u5927\u7684 Pod \u5730\u5740\u7bc4\u570d\u4ee5\u9069\u61c9\u96c6\u7fa3\u7684\u9810\u671f\u589e\u9577\u3002\n\u4e0b\u8868\u8aaa\u660e\u4e86\u5982\u4f55\u7232\u5177\u6709 900 \u500b\u7bc0\u9ede\u7684\u96c6\u7fa3\u9078\u64c7\u8db3\u5920\u7684\u5730\u5740\u7bc4\u570d\uff1a\n| \u7bc4\u570d   | \u6307\u5357                                                                                                             |\n|:-------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| \u7bc0\u9ede   | \u7bc0\u9ede IP \u5730\u5740\u53d6\u81ea\u96c6\u7fa3\u5b50\u7db2\u7684\u4e3b\u8981\u7bc4\u570d\u3002\u96c6\u7fa3\u5b50\u7db2\u5fc5\u9808\u8db3\u5920\u5927\uff0c\u4ee5\u5bb9\u7d0d\u96c6\u7fa3\u4e2d\u7684\u5168\u90e8\u7bc0\u9ede\u3002 \u4f8b\u5982\uff0c\u5982\u679c\u60a8\u8a08\u5283\u5275\u5efa\u4e00\u500b\u542b 900 \u500b\u7bc0\u9ede\u7684\u96c6\u7fa3\uff0c\u5247\u96c6\u7fa3\u5b50\u7db2\u7684\u5927\u5c0f\u5fc5\u9808\u81f3\u5c11\u7232 /22\u3002\u4e00\u500b /22 \u7bc4\u570d\u6709 210 = 1024 \u500b\u5730\u5740\u3002\u6e1b\u53bb 4 \u500b\u4e0d\u53ef\u7528\u7684 IP \u5730\u5740\u5f8c\uff0c\u60a8\u9084\u6709 1020 \u500b\u5730\u5740\uff0c\u9019\u8db3\u4ee5\u5bb9\u7d0d 900 \u500b\u7bc0\u9ede\u3002                                            |\n| Pod \u5730\u5740\u7bc4\u570d | \u6bcf\u500b\u7bc0\u9ede\u90fd\u6709\u4e00\u500b /24 \u7bc4\u570d\u5167\u7684\u9069\u7528\u65bc Pod \u7684 IP \u5730\u5740\u3002\u4e00\u500b /24 \u7bc4\u570d\u6709 28 = 256 \u500b\u5730\u5740\u3002\u56de\u60f3\u4e00\u4e0b\uff0cPod \u5730\u5740\u7bc4\u570d\u4e2d\u6709 4096 \u500b\u7528\u65bc\u670d\u52d9\u3002Pod \u5730\u5740\u7bc4\u570d\u7684\u5269\u9918\u90e8\u5206\u7528\u65bc Pod\uff0c\u4e26\u4e14\u5927\u5c0f\u5fc5\u9808\u8db3\u4ee5\u5bb9\u7d0d\u7bc0\u9ede\u6578 x 256 \u5f97\u51fa\u7684\u5730\u5740\u6578\u76ee\u3002 \u5047\u8a2d\u60a8\u8a08\u5283\u5275\u5efa\u4e00\u500b\u542b 900 \u500b\u7bc0\u9ede\u7684\u96c6\u7fa3\u3002\u90a3\u9ebc Pod \u9700\u8981 900 x 256 = 230,400 \u500b\u5730\u5740\u3002\u73fe\u5728\u5047\u8a2d\u60a8\u7684 Pod \u5730\u5740\u7bc4\u570d\u7232 /14\u3002\u4e00\u500b /14 \u7bc4\u570d\u6709 218 = 262,144 \u500b\u5730\u5740\u3002\u6e1b\u53bb\u7528\u65bc\u670d\u52d9\u7684 4096 \u500b\u5730\u5740\u5f8c\uff0c\u60a8\u9084\u6709 258048 \u500b\u5730\u5740\uff0c\u9019\u8db3\u4ee5\u5bb9\u7d0d 900 \u500b\u7bc0\u9ede\u3002 |\n## \u7bc4\u570d\u5927\u5c0f\u7684\u9ed8\u8a8d\u503c\u548c\u9650\u5236\n\u4e0b\u8868\u7d66\u51fa\u4e86\u96c6\u7fa3\u5b50\u7db2\u548c Pod \u5730\u5740\u7bc4\u570d\u7684\u5927\u5c0f\u4e0b\u9650\u3001\u5927\u5c0f\u4e0a\u9650\u548c\u9ed8\u8a8d\u5927\u5c0f\u3002\n| \u7bc4\u570d   | \u9ed8\u8a8d\u5927\u5c0f                   | \u5927\u5c0f\u4e0b\u9650                 | \u5927\u5c0f\u4e0a\u9650            |\n|:-------------|:-----------------------------------------------------------------------------------|:----------------------------------------------------------------------------|:--------------------------------------------------------|\n| \u7bc0\u9ede   | /20\uff0c\u5305\u62ec 212 = 4096 \u500b\u5730\u5740\u3002\u6e1b\u53bb 4 \u500b\u4fdd\u7559\u5730\u5740\u5f8c\uff0c\u60a8\u9084\u6709 4092 \u500b\u5730\u5740\u7528\u4f86\u5bb9\u7d0d\u7bc0\u9ede\u3002 | /29\uff0c\u5305\u62ec 23 = 8 \u500b\u5730\u5740\u3002\u6e1b\u53bb 4 \u500b\u4fdd\u7559\u5730\u5740\u5f8c\uff0c\u60a8\u9084\u6709 4 \u500b\u5730\u5740\u7528\u4f86\u5bb9\u7d0d\u7bc0\u9ede\u3002 | /7\uff0c\u5305\u62ec 225 \u500b\u5730\u5740\u3002\u5927\u7d04\u6709 3300 \u842c\u500b\u5730\u5740\u7528\u4f86\u5bb9\u7d0d\u7bc0\u9ede\u3002 |\n| Pod \u5730\u5740\u7bc4\u570d | /14\uff0c\u5305\u62ec 218 = 262,144 \u500b\u5730\u5740\u3002             | /19\uff0c\u5305\u62ec 213 = 8192 \u500b\u5730\u5740\u3002            | /9\uff0c\u5305\u62ec 223 = 8388608 \u500b\u5730\u5740\u3002       |\n## \u9650\u5236\n- \u7121\u6cd5\u5c07 VPC \u539f\u751f\u96c6\u7fa3\u9077\u79fb\u5230\u57fa\u65bc\u8def\u7531\u7684\u96c6\u7fa3\u3002\n- \u7121\u6cd5\u5c07\u57fa\u65bc\u8def\u7531\u7684\u96c6\u7fa3\u9077\u79fb\u5230 VPC \u539f\u751f\u96c6\u7fa3\u3002\n- \u57fa\u65bc\u8def\u7531\u7684\u96c6\u7fa3\u53ea\u80fd\u5c07 [RFC 1918](https://tools.ietf.org/html/rfc1918) \u7bc4\u570d\u5167\u7684\u5730\u5740\u7528\u65bc\u5c08\u7528 IP \u5730\u5740\u3002VPC \u539f\u751f\u96c6\u7fa3\u5177\u6709 [\u66f4\u5927\u7bc4\u570d](https://cloud.google.com/vpc/docs/subnets?hl=zh-cn#valid-ranges) \u7684\u53ef\u7528\u5730\u5740\u3002\n- \u57fa\u65bc\u8def\u7531\u7684\u96c6\u7fa3\u4e0d\u652f\u6301\u96d9\u68e7\u7db2\u7d61\u3002## \u5f8c\u7e8c\u6b65\u9a5f\n- [\u5275\u5efa VPC \u539f\u751f\u96c6\u7fa3](https://cloud.google.com/kubernetes-engine/docs/how-to/alias-ips?hl=zh-cn) \n- [\u5275\u5efa\u53ef\u7528\u5340\u7d1a\u96c6\u7fa3](https://cloud.google.com/kubernetes-engine/docs/how-to/creating-a-zonal-cluster?hl=zh-cn) \n- [\u5225\u540d IP \u5730\u5740\u7bc4\u570d\u6982\u89bd](https://cloud.google.com/vpc/docs/alias-ip?hl=zh-cn)", "guide": "Google Kubernetes Engine (GKE)"}