{"title": "Vertex AI Search and Conversation - Create a healthcare search data store", "url": "https://cloud.google.com/generative-ai-app-builder/docs/create-data-store-hc?hl=zh-cn", "abstract": "# Vertex AI Search and Conversation - Create a healthcare search data store\n**Caution:** - Restrictions for healthcare: As a customer, you will not, and will not allow End Users to, use the Generative AI Services for clinical purposes (for clarity, non-clinical research, scheduling, or other administrative tasks is not restricted), as a substitute for professional medical advice, or in any manner that is overseen by or requires clearance or approval from any applicable regulatory authority. For more information, see [Service Specific Terms](https://cloud.google.com/terms/service-terms) .\n- The generated output may not always be completely reliable. Due to the nature of LLMs and Generative AI, outputs may have incorrect or biased (for example, stereotypes or other harmful content) information and should be reviewed. All summaries or answers should be considered draft and not final.\n- This product's intended usage is not to provide information pertaining to the prevention, diagnosis or treatment of illness or disease. Questions regarding diagnosis or treatment recommendations are not intended to be addressed by the product. This product's intended use is to retrieve and summarize existing medical information provided by users.\n- Due to limited test data, this product may or may not be applicable to age group 0-18 and to age group 85 and above. Therefore, when reviewing the generated output, customers must consider the representativeness of subpopulations within their source data.To search clinical data in Vertex AI Search, you can follow one of these workflows:\n- Create a healthcare data store, import FHIR R4 data into the data store, connect it to a healthcare search app, and query the clinical data.\n- Create a healthcare search app, create a healthcare data store and import FHIR R4 data into the data store during the app creation process, and query the clinical data. For more information, see [Create a healthcare search app](/generative-ai-app-builder/docs/create-app-hc) .\nThis page describes the first method.\n", "content": "## Before you begin\nBefore you create the healthcare data store and import data into it, complete these requirements:\n- Understand the relationship between apps and data stores for healthcare search. For more information, see [About apps and data stores](/generative-ai-app-builder/docs/create-datastore-ingest) .\n- [Prepare your FHIR data for ingestion](/generative-ai-app-builder/docs/prepare-data#hc-fhir-data) .\n- Vertex AI Search for healthcare provides search services only in the US multi-region ( `us` ). Therefore, your healthcare search app and data stores must reside in the `us` multi-region.## Create a data store\nYou can create a data store either in the Google Cloud console or using the API. The two approaches differ in the following way:\n- In the Google Cloud console: The source FHIR store must be in the same Google Cloud project as the Vertex AI Search app and data store. Select the source FHIR store in the Cloud Healthcare API and import FHIR data as part of the healthcare search data store creation process.\n- Through the REST API: You can import FHIR data from a Cloud Healthcare API FHIR store that's in the same Google Cloud project or a different one.- Use the [dataStores.create](/generative-ai-app-builder/docs/reference/rest/v1alpha/projects.locations.collections.dataStores/create) method to create a healthcare data store.\n- Use the [documents.import](/generative-ai-app-builder/docs/reference/rest/v1alpha/projects.locations.dataStores.branches.documents/import) method to specify the FHIR store in Cloud Healthcare API and import FHIR R4 data.To create a healthcare data store, complete the following steps.- In the Google Cloud console, go to the **Search and Conversation** page. [Search and Conversation](https://console.cloud.google.com/gen-app-builder/) \n- In the navigation menu, click **Data stores** .\n- Click **New data store** .\n- In the **Select a data source** pane, select **Healthcare API (FHIR)** as your data source.\n- To import data from your FHIR store, do one of the following:- Select the FHIR store from the list of available FHIR stores:- Expand the **FHIR store** field.\n- In this list, select a dataset that resides in a [permitted location](/generative-ai-app-builder/docs/prepare-data#hc-fhir-data) and then select a FHIR store that uses FHIR version R4.\n- Enter the FHIR store manually:- Expand the **FHIR store** field.\n- Click **Enter FHIR store manually** .\n- In the **FHIR store name** dialog, enter the full name of the FHIR store in the following format: `project/` `` `/locations/` `` `/datasets/` `` `/fhirStores/` `` `` \n- Click **Save** .\n- Click **Continue** .\n- In the **Your data store name** field, enter a name for your data store.\n- Click **Create** .\n- The data store you created is listed on the **Data Stores** page.\n- Create a data store.```\ncurl -X POST\\\n -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\\n -H \"Content-Type: application/json\"\\\n -H \"X-Goog-User-Project: PROJECT_ID\" \\\n\"https://us-discoveryengine.googleapis.com/v1alpha/projects/PROJECT_ID/locations/us/collections/default_collection/dataStores?dataStoreId=DATA_STORE_ID\" \\\n -d '{\n \"displayName\": \"DATA_STORE_DISPLAY_NAME\",\n \"industryVertical\": \"HEALTHCARE_FHIR\",\n \"solutionTypes\": [\"SOLUTION_TYPE_SEARCH\"],\n \"searchTier\": \"STANDARD\",\n \"searchAddOns\": [\"LLM\"]\n}'\n```Replace the following:- ``: the ID of your Google Cloud project\n- ``: the ID of the Vertex AI Search healthcare data store that you want to create\n- ``: the display name of the Vertex AI Search data store that you want to create\n- If the source FHIR store and the target Vertex AI Search data store are in the same Google Cloud project, call the following method. If they're not, move to the next step.```\ncurl -X POST \\\n-H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\\n-H \"Content-Type: application/json; charset=utf-8\" \\\n-H \"X-Goog-User-Project: PROJECT_ID\" \\\n\"https://us-discoveryengine.googleapis.com/v1alpha/projects/PROJECT_ID/locations/us/dataStores/DATA_STORE_ID/branches/0/documents:import\" \\\n-d '{\n \"reconciliation_mode\": \"FULL\",\n \"fhir_store_source\": {\"fhir_store\": \"projects/PROJECT_ID/locations/CLOUD_HEALTHCARE_DATASET_LOCATION/datasets/CLOUD_HEALTHCARE_DATASET_ID/fhirStores/FHIR_STORE_ID\"}\n}'\n```Replace the following:- ``: the ID of your Google Cloud project\n- ``: the ID of the Vertex AI Search data store\n- ``: the ID of the Cloud Healthcare API dataset that contains the source FHIR store\n- ``: the location of the Cloud Healthcare API dataset that contains the source FHIR store\n- ``: the ID of the Cloud Healthcare API FHIR R4 store\n- If the source FHIR store and the target Vertex AI Search data store are in different Google Cloud projects, call the following method. If they're not, go back to the previous step.```\ncurl -X POST \\\n-H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\\n-H \"Content-Type: application/json; charset=utf-8\" \\\n-H \"X-Goog-User-Project: TARGET_PROJECT_ID\" \\\n\"https://us-discoveryengine.googleapis.com/v1alpha/projects/TARGET_PROJECT_ID/locations/us/dataStores/DATA_STORE_ID/branches/0/documents:import\" \\\n-d '{\n \"reconciliation_mode\": \"FULL\",\n \"fhir_store_source\": {\"fhir_store\": \"projects/SOURCE_PROJECT_ID/locations/CLOUD_HEALTHCARE_DATASET_LOCATION/datasets/CLOUD_HEALTHCARE_DATASET_ID/fhirStores/FHIR_STORE_ID\"}\n}'\n```Replace the following:- ``: the ID of the Google Cloud project that contains the Vertex AI Search data store.\n- ``: the ID of the Vertex AI Search data store\n- ``: the ID of the Google Cloud project that contains the Cloud Healthcare API dataset and FHIR store.\n- ``: the ID of the Cloud Healthcare API dataset that contains the source FHIR store\n- ``: the location of the Cloud Healthcare API dataset that contains the source FHIR store\n- ``: the ID of the Cloud Healthcare API FHIR R4 store\n## Verify data store creation and FHIR data import\nThis task shows you how to verify whether a data store was created successfully and whether FHIR data was imported into the data store successfully.\n- In the Google Cloud console: Select the data store and verify its details.\n- Through the REST API:- Use the [dataStores.get](/generative-ai-app-builder/docs/reference/rest/v1alpha/projects.locations.collections.dataStores/get) method to get the healthcare data store details.\n- Use the [operations.get](/generative-ai-app-builder/docs/reference/rest/v1alpha/projects.locations.dataStores.branches.operations/get) method to get the details of the import operation.To verify data store creation and data import, complete the following steps.\n- In the Google Cloud console, go to the **Search and Conversation** page. [Search and Conversation](https://console.cloud.google.com/gen-app-builder/) \n- In the navigation menu, click **Data stores** .The **Data stores** page displays a list of data stores in your Google Cloud project with their details.\n- Verify whether the data store that you created is in the data stores list.\n- Select the data store and verify its details.- The summary table lists the following details:- The data store ID, type, and region\n- The number of documents indicating the number of FHIR resources imported\n- The timestamp when the last document was imported\n- Optionally, click **View details** to see the document import details, such as the details about a successful, partial, or failed import\n- The **Documents** tab lists the resource IDs of the imported FHIR resources and their resource types in a paginated table. You can filter this table to verify whether a particular resource was imported.\n- The **Activity** tab lists the document import details, such as the details about a successful, partial, or failed import.\n- Verify the data store creation.```\ncurl -X GET -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\\n -H \"Content-Type: application/json\"\\\n -H \"X-Goog-User-Project: PROJECT_ID\" \\\n \"https://us-discoveryengine.googleapis.com/v1alpha/projects/PROJECT_ID/locations/us/collections/default_collection/dataStores/DATA_STORE_ID\"\n```Replace the following:- ``: the ID of your Google Cloud project\n- ``: the ID of the Vertex AI Search data store\n- Verify whether the FHIR data import operation is complete.```\ncurl -X GET \\\n-H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\\n\"https://us-discoveryengine.googleapis.com/v1alpha/projects/PROJECT_ID/locations/us/collections/default_collection/dataStores/DATA_STORE_ID/branches/0/operations/IMPORT_OPERATION_ID\"\n```Replace the following:- ``: the ID of your Google Cloud project\n- ``: the ID of the Vertex AI Search data store\n- ``: the operation ID of the long-running operation that's returned when you call the`import`method\n## What's next\n- [Create a healthcare search app](/generative-ai-app-builder/docs/create-app-hc) and connect your data store to it.\n- [Search for healthcare data](/generative-ai-app-builder/docs/search-hc-data) in your healthcare search app.\n- [Refresh healthcare data](/generative-ai-app-builder/docs/refresh-hc-data) .", "guide": "Vertex AI Search and Conversation"}