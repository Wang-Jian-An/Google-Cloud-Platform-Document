{"title": "Vertex AI Search and Conversation - Get an estimate of monthly storage costs", "url": "https://cloud.google.com/generative-ai-app-builder/docs/estimate-size-web-data?hl=zh-cn", "abstract": "# Vertex AI Search and Conversation - Get an estimate of monthly storage costs\n[Advanced website indexing](/generative-ai-app-builder/docs/about-advanced-features#advanced-website-indexing) incurs monthly data storage charges based on the size of the web data that you import into your data store. To get an estimate of the size of your web data before importing it, you can call the [estimateDataSize](/generative-ai-app-builder/docs/reference/rest/v1alpha/projects.locations/estimateDataSize) method and specify the web pages that you want to import. The `estimateDataSize` method is a [long-runningoperation](https://google.aip.dev/151) that runs until the process for estimating the data size is complete. This can take from a few minutes to over an hour, depending on the number of web pages that you specify. After you have an estimate of the size of your web data, you can get an estimate of your monthly data storage costs using the Vertex AI Search and Conversation pricing page (see the [Data Indexpricing](https://cloud.google.com/generative-ai-app-builder/pricing#data_index_pricing) section) or the [Google Cloud's pricingcalculator](https://cloud.google.com/products/calculator) (search for Vertex AI Search and Conversation).\n**Important:** You are permitted to use the `estimateDataSize` method only on web domains that your company owns or is authorized to utilize.\n", "content": "## Before you begin\nDetermine the URL patterns for the websites that you intend to include (and optionally exclude) when you import web data into your data store. You specify these URL patterns when you call the `estimateDataSize` method.\n## Procedure\nTo get an estimate of the size of your web data, follow these steps:\n- Call the [estimateDataSize](/generative-ai-app-builder/docs/reference/rest/v1alpha/projects.locations/estimateDataSize) method.```\ncurl -X POST \\-H \"Authorization: Bearer $(gcloud auth application-default print-access-token)\" \\-H \"Content-Type: application/json\" \\\"https://discoveryengine.googleapis.com/v1alpha/projects/PROJECT_ID/locations/global:estimateDataSize\" \\-d '{\u00a0 \"website_data_source\": {\u00a0 \u00a0 \"estimator_uri_patterns\": {\u00a0 \u00a0 \u00a0 provided_uri_pattern: \"URI_PATTERN_TO_INCLUDE\",\u00a0 \u00a0 \u00a0 exact_match: EXACT_MATCH_BOOLEAN\u00a0 \u00a0 },\u00a0 \u00a0 \"estimator_uri_patterns\": {\u00a0 \u00a0 \u00a0 provided_uri_pattern: \"URI_PATTERN_TO_EXCLUDE\",\u00a0 \u00a0 \u00a0 exact_match: EXACT_MATCH_BOOLEAN,\u00a0 \u00a0 \u00a0 exclusive: EXCLUSIVE_BOOLEAN\u00a0 \u00a0 }\u00a0 }}'\n```Replace the following:- `` : The ID of your project.\n- `` : The URL patterns for the websites that you want to include in your data size estimate.\n- `` : (Optional) The URL patterns for the websites that you want to exclude from your data size estimate.For `` and `` , you can use patterns similar to the following:- Entire website:`www.mysite.com`\n- Parts of a website:`www.mysite.com/faq`\n- Entire domain:`mysite.com`or`*.mysite.com`\n- `` : (Optional) If `true` , then the provided URI pattern represents web pages that are excluded from your data size estimate. The default is `false` , which means that the provided URI pattern represents web pages that are included in your data size estimate.\n- `` : (Optional) If `true` , then the provided URI pattern represents a single web page, instead of the web page and all of its children. The default is `false` , which means that the provided URI pattern represents the web page and all of its children.\nThe output is similar to the following:```\n{\u00a0 \"name\": \"projects/PROJECT_ID/locations/global/operations/estimate-data-size-01234567890123456789\",\u00a0 \"metadata\": {\u00a0 \u00a0 \"@type\": \u00a0\"type.googleapis.com/google.cloud.discoveryengine.v1alpha.EstimateDataSizeMetadata\"\u00a0 }}\n```This output includes the `name` field, which is the name of the long-running operation. Save the `name` value to use in the following step.\n- Poll the [operations.get](/generative-ai-app-builder/docs/reference/rest/v1/projects.operations/get) method.```\ncurl -X GET \\-H \"Authorization: Bearer $(gcloud auth application-default print-access-token)\" \\\"https://discoveryengine.googleapis.com/v1/OPERATION_NAME\"\n```Replace `` with the `name` value that you saved in the previous step. You can also get the operation name by [listing long-runningoperations](/generative-ai-app-builder/docs/long-running-operations#list-lros) .\n- Evaluate each response.- If a response does not contain `\"done\": true` , then the process for estimating the data size is not complete. Continue polling.The output is similar to the following:```\n{\u00a0 \"name\": \"projects/PROJECT_ID/locations/global/operations/estimate-data-size-01234567890123456789\",\u00a0 \"metadata\": {\u00a0 \u00a0 \"@type\": \"type.googleapis.com/google.cloud.discoveryengine.v1alpha.EstimateDataSizeMetadata\"\u00a0 }}\n```\n- If a response contains `\"done\": true` , then the process for estimating the data size is complete. Save the `` value from the response to use in the following step.The output is similar to the following:```\n{\u00a0 \"name\": \"projects/PROJECT_ID/locations/global/operations/estimate-data-size-01234567890123456789\",\u00a0 \"metadata\": {\u00a0 \u00a0 \"@type\": \"type.googleapis.com/google.cloud.discoveryengine.v1alpha.EstimateDataSizeMetadata\",\u00a0 \u00a0 \"createTime\": \"2023-12-08T19:54:06.911248Z\"\u00a0 },\u00a0 \"done\": true,\u00a0 \"response\": {\u00a0 \u00a0 \"@type\": \"type.googleapis.com/google.cloud.discoveryengine.v1alpha.EstimateDataSizeResponse\",\u00a0 \u00a0 \"dataSizeBytes\": DATA_SIZE_BYTES,\u00a0 \u00a0 \"documentCount\": DOCUMENT_COUNT\u00a0 }}\n```This output includes the following values:- `` : The estimated size of your web data, in bytes.\n- `` : The estimated number of web pages in your web data.\n- Divide the `` value from the previous step by 1,000,000,000 to get gigabytes. Save this value for the following step.\n- To get an estimate for your monthly data storage costs:- Go [Google Cloud's pricing calculator](https://cloud.google.com/products/calculator) .\n- Click **Add to estimate** .\n- Search for `Vertex AI Search and Conversation` and then click the **Vertex AI Search and Conversation** box.\n- In the **Data Index** box, enter the estimated size of your web data, in gigabytes, from the previous step.See the **Estimated cost** box for your estimated data storage cost.", "guide": "Vertex AI Search and Conversation"}