{"title": "Cloud Deploy - Create a pipeline and release in the Google Cloud console", "url": "https://cloud.google.com/deploy/docs/deploy-app-in-console", "abstract": "# Cloud Deploy - Create a pipeline and release in the Google Cloud console\n# Create a pipeline and release in the Google Cloud console\nThis page shows you how to use the Google Cloud console to create a Cloud Deploy delivery pipeline, and then create a release for that pipeline.\nIn this quickstart, you'll do the following:- Create two GKE clusters or configure two Cloud Run services.\n- Create a [delivery pipeline](/deploy/docs/terminology/delivery_pipeline) and two [targets](/deploy/docs/terminology/target) using the Google Cloud console.\n- Instantiate your delivery pipeline by creating a release using the Google Cloud console.After you create this release, the application is automatically deployed to the target.\n- See the results in Google Cloud console.\n", "content": "## Before you begin- If you already have the CLI installed, make sure you're running the latest version:\n- ```\ngcloud components update\n```\n## Create your runtime environment **If you're deploying to Cloud Run, you can skip this command** .\nFor GKE, create two clusters: `quickstart-cluster-for-console-staging` and `quickstart-cluster-for-console-prod` , with default settings. The clusters' Kubernetes API endpoints must be network-reachable from the public internet. GKE clusters are externally accessible by default.\n```\ngcloud container clusters create-auto quickstart-cluster-for-console-staging \\\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0--project=PROJECT_ID \\\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0--region=us-central1 && \\gcloud container clusters create-auto quickstart-cluster-for-console-prod \\\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0--project=PROJECT_ID \\\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0--region=us-central1\n```## Create a delivery pipeline and two targetsYou can use Cloud Deploy to [create a delivery pipeline and targets](/deploy/docs/create-pipeline-targets) based on configuration specified in one or more YAML files. But you can also create a delivery pipeline using the Google Cloud console.\nIn this section, you use Google Cloud console to create a delivery pipeline and two targets. When you use Google Cloud console, you don't need to create any YAML files; Cloud Deploy creates your [skaffold.yaml](/deploy/docs/using-skaffold/getting-started-skaffold) and manifest for you.- In the Google Cloud console, navigate to the Cloud Deploy main page. [Open the Delivery pipelines page](https://console.cloud.google.com/deploy/delivery-pipelines) \n- Click **Create** The **Create a delivery pipeline** form is displayed.\n- In the **Pipeline name** field, replace the default text with `in-console-quickstart-pipeline` .\n- Optionally, enter a description for this delivery pipeline.\n- In the **Region** drop-down, select `us-central1` .\n- Select your runtime.If you're deploying to GKE, select **Google KubernetesEngine** . Otherwise, select **Cloud Run** .\n- Create your targets:\n- Under **New target** , in the **Target name** field, replace the default text with `console-staging` .\n- From the **Kubernetes Engine cluster** drop-down, select `quickstart-cluster-for-console-staging` .\n- Click **Done** .\n- Click **Add target** .Replace the default text for **Target name** with `console-prod` .\n- Select `quickstart-cluster-for-console-prod` from the **Kubernetes Engine cluster** drop-down.\n- Select **Require approval for rollouts** .For this quickstart, we're requiring approval on the second target but not on the first target.\n- Click **Create** to create this delivery pipeline.\n- Under **New target** , in the **Target name** field, replace the default text with `console-staging` .\n- From the **Region** drop-down, select `us-central1` .\n- Click **Done** .\n- Click **Add target** .\n- Replace the default text for **Target name** with `console-prod` .\n- Activate the **Require approval for rollouts** checkbox for this target.For this quickstart, we're requiring approval on the second target but not on the first target.\n- Click **Create** to create this delivery pipeline.\n **Note:** If the default Compute Engine service account doesn't have the necessary permissions, you can click the **Grant** button to add them, when prompted.You now have a delivery pipeline with two targets, ready to create a release. The pipeline's page is displayed, showing both targets, with no rollouts.\n## Create a releaseNow that you have a delivery pipeline, with two targets, pointing to two GKE clusters or two Cloud Run services, you can create a release to deploy your application to the first target.- If you're not already on the delivery pipeline page, showing the new delivery pipeline `in-console-quickstart-pipeline` , navigate there now.The pipeline visualization is shown, with no rollouts.\n- Click the **Create release** button.The **Create a release** dialog is shown. Most of the fields are pre-populated. Keep these default values.You can click the **View manifest** button to view the manifest the automatically generated manifest, for either target, and you can click **View Skaffold file** to view the generated `skaffold.yaml` . You can also edit them, but for this quickstart leave them as they are.\n- Optionally, add a description for this release, in the **Description** field.\n- Click **Create** to start the release.The rollout details page is shown, for the rollout to the first target, and you can watch the progress of this rollout. It will take a few minutes to complete. It may take a few seconds for the rollout to start.\n- After the first rollout finishes, click the delivery pipeline name to go to the delivery pipeline page.The pipeline visualization is shown, with the rollout complete to the first target.\n- Click **Promote** to start the rollout to the next target.The **Promote** dialog is shown.\n- Keep the default values, add a **Rollout description** if you want, then click **Promote** .Because we selected **Require approval for rollouts** when we created the second target, this promotion is waiting for approval.\n- Click **Review** , in the delivery pipeline visualization.The approval page is shown.\n- Click **Review** again, and in the approval dialog, click **Approve** .The rollout is started for the second target. You can click the delivery pipeline name again to watch the progress in the pipeline visualization.\nWhen the second rollout is finished, the application is deployed in the second target, and your delivery pipeline has completed.## Clean upTo avoid incurring charges to your Google Cloud account for   the resources used on this page, follow these steps.- Delete the GKE clusters or Cloud Run services:\n```\ngcloud container clusters delete quickstart-cluster-for-console-staging --region=us-central1 --project=PROJECT_ID \\&& gcloud container clusters delete quickstart-cluster-for-console-prod --region=us-central1 --project=PROJECT_ID\n```\n```\ngcloud run services delete in-console-quickstart-pipeline-target-1 --region=us-central1 --project=PROJECT_ID \\&& gcloud run services delete in-console-quickstart-pipeline-target-2 --region=us-central1 --project=PROJECT_ID\n```\n- From the delivery pipeline page, click **Delete** to delete the delivery pipeline, the release, and rollouts.Type the pipeline name in the field provided, and click **Confirm** to finish deleting the resources.\n- Delete both targets:```\ngcloud deploy targets delete console-staging --region=us-central1 \u00a0&& \\gcloud deploy targets delete console-prod --region=us-central1\n```\n- Delete the Cloud Storage buckets that Cloud Deploy created.One ends with `_clouddeploy` , and the other is `[region].deploy-artifacts.[project].appspot.com` . [Open the Cloud Storage browser page](https://console.cloud.google.com/storage/browser) \nThat's it, you completed this quickstart!## What's next\n- [Learn more about Cloud Deploy](/deploy/docs/overview) .\n- [Learn the basics of deploying applications](/deploy/docs/deploying-application) .\n- [Try out the Cloud Deploy walkthrough](https://shell.cloud.google.com/?show=ide%2Cterminal&walkthrough_id=deploy--cloud-deploy-e2e-gke) .\n- Learn how to [manage your manifests](/deploy/docs/skaffold) .\n- [Learn how to combine Google Cloud CI/CD tools to develop and deliversoftware effectively to GKE](https://cloud.google.com/architecture/app-development-and-delivery-with-cloud-code-gcb-cd-and-gke) .", "guide": "Cloud Deploy"}