{"title": "Cloud Deploy - \u5728\u90e8\u7f72\u524d\u5f8c\u904b\u884c\u9264\u5b50", "url": "https://cloud.google.com/deploy/docs/hooks?hl=zh-cn", "abstract": "# Cloud Deploy - \u5728\u90e8\u7f72\u524d\u5f8c\u904b\u884c\u9264\u5b50\n\u672c\u6587\u6a94\u4ecb\u7d39\u77ad\u5982\u4f55\u5728\u90e8\u7f72\u4e4b\u524d\u548c/\u6216\u4e4b\u5f8c\u904b\u884c\u4efb\u610f\u7a0b\u5e8f\u6216\u64cd\u4f5c\u3002\n\u60a8\u53ef\u4ee5\u5c07 Cloud Deploy \u548c Skaffold \u914d\u7f6e\u7232\u904b\u884c [\u64cd\u4f5c](#configure_in_skaffold) \uff0c\u4ee5\u57f7\u884c\u90e8\u7f72\u524d\u64cd\u4f5c\u548c/\u6216\u90e8\u7f72\u5f8c\u64cd\u4f5c\u3002\u4ee5\u9019\u7a2e\u65b9\u5f0f\u904b\u884c\u7684\u7a0b\u5e8f\u7a31\u7232\u201c\u9264\u5b50\u201d\u3002\u90e8\u7f72\u524d\u9264\u5b50\u548c\u90e8\u7f72\u5f8c\u9264\u5b50\u5728\u767c\u4f48\u6642\u4f5c\u7232\u90e8\u7f72\u524d [\u4f5c\u696d](https://cloud.google.com/deploy/docs/deployment-strategies/manage-rollout?hl=zh-cn#jobs_and_job_runs) \u90e8\u7f72\u5f8c\u904b\u884c\u3002\n\u60a8\u53ef\u4ee5\u5c07\u6bcf\u500b\u9264\u5b50\u914d\u7f6e\u7232\u5728\u6307\u5b9a\u7684 Cloud Deploy [\u57f7\u884c\u74b0\u5883](https://cloud.google.com/deploy/docs/execution-environment?hl=zh-cn) \u4e2d\u904b\u884c\uff0c\u4f46\u5982\u679c\u8981\u90e8\u7f72\u5230 Google Kubernetes Engine\uff0c\u5247\u53ef\u4ee5\u9078\u64c7\u5c07\u5176\u914d\u7f6e\u7232\u5728\u60a8\u8981\u90e8\u7f72\u61c9\u7528\u7684 GKE \u96c6\u7fa3\u4e0a\u904b\u884c\u3002\n\u6211\u5011\u5047\u5b9a\u90e8\u7f72\u9264\u5b50\u5177\u6709\u51aa\u7b49\u6027\u3002\u5982\u679c\u6307\u5b9a\u64cd\u4f5c\u591a\u6b21\u904b\u884c\uff0c\u5247\u4e0d\u6703\u7522\u751f\u984d\u5916\u5f71\u97ff\u3002\n**\u6ce8\u610f** \uff1a\u63d0\u4f9b\u8981\u904b\u884c\u7684\u7a0b\u5e8f\u7684\u7528\u6236\u8ca0\u8cac\u8a72\u7a0b\u5e8f\u7684\u884c\u7232\uff0c\u5305\u62ec\u51aa\u7b49\u6027\u3002\n", "content": "## \u90e8\u7f72\u9264\u5b50\u7684\u5de5\u4f5c\u539f\u7406\u662f\u4ec0\u9ebc\uff1f\n\u4e0b\u9762\u4ecb\u7d39\u4e86\u914d\u7f6e\u90e8\u7f72\u9264\u5b50\u7684\u6b65\u9a5f\uff0c\u4ee5\u53ca\u904b\u884c\u9019\u4e9b\u9264\u5b50\u7684 Skaffold \u548c Cloud Deploy \u6d41\u7a0b\uff1a\n- \u60a8\u53ef\u4ee5\u5c07\u7528\u65bc\u7d66\u5b9a\u7248\u672c\u7684 `skaffold.yaml` \u914d\u7f6e\u7232\u5305\u542b `customActions` \uff0c\u7528\u65bc\u6a19\u8b58\u7528\u65bc\u904b\u884c\u9264\u5b50\u7684\u5bb9\u5668\u6620\u50cf\uff0c\u4ee5\u53ca\u8981\u5728\u6bcf\u500b\u5bb9\u5668\u4e0a\u904b\u884c\u7684\u7279\u5b9a\u547d\u4ee4\u6216\u8173\u672c\u3002\n- \u5728\u4ea4\u4ed8\u6d41\u6c34\u7dda\u9032\u5ea6\u7684\u4e00\u500b\u6216\u591a\u500b\u968e\u6bb5\u4e2d\uff0c\u60a8\u53ef\u4ee5\u914d\u7f6e\u9264\u5b50\uff0c\u6bcf\u500b\u968e\u6bb5\u90fd\u6703\u5f15\u7528\u60a8\u5728 `skaffold.yaml` \u4e2d\u914d\u7f6e\u7684\u5176\u4e2d\u4e00\u500b `customActions` \u3002\n- \u5728\u767c\u4f48\u7684\u90e8\u7f72\u4f5c\u696d\u904b\u884c\u4e4b\u524d\uff0cSkaffold \u6703\u904b\u884c\u5728 `skaffold.yaml` \u4e2d\u914d\u7f6e\u3001\u4e14\u5728\u6d41\u6c34\u7dda\u904b\u884c\u904e\u7a0b\u4e2d\u7684 `predeploy` \u7bc0\u4e2d\u5f15\u7528\u7684\u6240\u6709\u547d\u4ee4\u3002`predeploy` \u9264\u5b50\u59cb\u7d42\u4f5c\u7232\u968e\u6bb5\u4e2d\u7684\u7b2c\u4e00\u500b\u4f5c\u696d\u904b\u884c\u3002\n- \u767c\u4f48\u4f5c\u696d\u7684\u90e8\u7f72\u4f5c\u696d\u904b\u884c\u5f8c\uff0cCloud Deploy \u6703\u904b\u884c\u5728 `skaffold.yaml` \u4e2d\u914d\u7f6e\u4e14\u6d41\u6c34\u7dda\u57f7\u884c\u904e\u7a0b\u4e2d `postdeploy` Stanza \u4e2d\u5f15\u7528\u7684\u6240\u6709\u547d\u4ee4\u3002 **\u6ce8\u610f** \uff1a\u5982\u679c\u7232\u968e\u6bb5\u914d\u7f6e\u4e86 `verify` \u4f5c\u696d\uff0c\u5247 [\u9a57\u8b49](https://cloud.google.com/deploy/docs/deploy/docs/verify-deployment?hl=zh-cn) \u6703\u5728 `postdeploy` \u4f5c\u696d\u4e4b\u524d\u904b\u884c\u3002", "guide": "Cloud Deploy"}