{"title": "Cloud Deploy - Audit logging", "url": "https://cloud.google.com/deploy/docs/audit-logs", "abstract": "# Cloud Deploy - Audit logging\nThis page describes the audit logs created for Cloud Deploy activity.\n", "content": "## Audit logging summary\nGoogle Cloud services write audit logs to help you answer the questions of \"who did what, where, and when?\" within your Google Cloud projects and organizations.\nFor Cloud Deploy, only admin activity is logged for auditing purposes. This audit information is provided by default. Admin activity consists of operations that modify the configuration or metadata of a Cloud Deploy resource. Any API call that creates, updates, or deletes a Cloud Deploy resource is not included in admin logging.\nFor more information, see [Cloud Audit Logs](/logging/docs/audit) .\n## Audited operations\nThe following is a list of the Cloud Deploy operations that are logged for auditing:\n- `projects.locations.customTargetTypes.create`\n- `projects.locations.customTargetTypes.delete`\n- `projects.locations.customTargetTypes.update`\n- `projects.locations.deliveryPipelines.create`\n- `projects.locations.deliveryPipelines.delete`\n- `projects.locations.deliveryPipelines.setIamPolicy`\n- `projects.locations.deliveryPipelines.update`\n- `projects.locations.deliveryPipelines.automation.create`\n- `projects.locations.deliveryPipelines.automation.delete`\n- `projects.locations.deliveryPipelines.automation.setIamPolicy`\n- `projects.locations.deliveryPipelines.automation.update`\n- `projects.locations.deliveryPipelines.automationRuns.cancel`\n- `projects.locations.deliveryPipelines.releases.create`\n- `projects.locations.deliveryPipelines.releases.rollouts.advance`\n- `projects.locations.deliveryPipelines.releases.rollouts.approve`\n- `projects.locations.deliveryPipelines.releases.rollouts.cancel`\n- `projects.locations.deliveryPipelines.releases.rollouts.create`\n- `projects.locations.deliveryPipelines.releases.rollouts.ignoreJob`\n- `projects.locations.deliveryPipelines.releases.rollouts.jobRuns.terminate`\n- `projects.locations.deliveryPipelines.releases.rollouts.retryJob`\n- `projects.locations.targets.create`\n- `projects.locations.targets.delete`\n- `projects.locations.targets.setIamPolicy`\n- `projects.locations.targets.update`\nUnlike audit logs for other services, Cloud Deploy only has `ADMIN_READ` and `ADMIN_WRITE` data access logs and does not offer `DATA_READ` and `DATA_WRITE` logs. `DATA_READ` and `DATA_WRITE` logs are only used for services that store and manage user data, and Cloud Deploy considers its resources to be administrative configuration information.\n## Permissions for accessing the logs\nThe following users can view admin activity logs:\n- [Project owners, editors, and viewers](/iam/docs/understanding-roles#basic) .\n- Users with the [Logs Viewer](/logging/docs/access-control#permissions_and_roles) IAM role.\n- Users with the`logging.logEntries.list`IAM permission.\nSee [IAM roles and permissions](/deploy/docs/iam-roles-permissions) for more information.\n## Audit log format\nAudit log entries have the following structure:\n- An object of type [LogEntry](/logging/docs/reference/v2/rest/v2/LogEntry) that contains the entire log entry.\n- An object of type [AuditLog](/logging/docs/reference/audit/auditlog/rest/Shared.Types/AuditLog) that is held in the`protoPayload`field of the`LogEntry`object.\nKnowing what information is held in these objects helps you understand and retrieve your audit log entries using the Logs Explorer and the Cloud Logging API.\nAll audit log entries contain the name of an audit log, a resource, and a service:\n- **logName** : This field indicates whether the log is an Admin Activity or Data Access audit log. For Cloud Deploy, these are admin activity only. For example:```\nprojects/[PROJECT_ID]/logs/cloudaudit.googleapis.com/activityorganizations/[ORGANIZATION_ID]/logs/cloudaudit.googleapis.com/activity\n```Within a project or organization, these log names are suffixed with the abbreviated `activity` .\n- **serviceName** : For Cloud Deploy, the field contains `clouddeploy.googleapis.com` .Resource types belong to a single service, but a service can have several resource types. For a list of services and resources, see [Mapping services to resources](/logging/docs/api/v2/resource-list#service-names) .\nFor more details, see [Audit Log Datatypes](/logging/docs/audit/api) .\n## Enabling logs\nAdmin activity logs are enabled and logged by default. These logs do not count toward your [log ingestion quota](/logging/quota-policy) . By default, data access logs are not recorded, but you can [configure them](/logging/docs/audit/configure-data-access) to be recorded.\n## Quotas and limits\nFor information about limitations on Logging, see [Quotas and Limits](/logging/quotas) .\n## Viewing logs\nTo view a summary of your Admin Activity:\n- Open Google **Cloud Activity** : [Go to Activity](https://console.cloud.google.com/home/activity) \nTo select and filter your logs and view them in detail:\n- Open the **Logs Explorer page** : [Go to the Logs Explorer page](https://console.cloud.google.com/logs/query) \n- In the Logs Explorer, select the **Resource** whose audit logs you want to see.\n- In the **Log name** drop-down, select the name of the log you want to see.Select **Activity** for Admin Activity audit logs, and **data_access** for Data Access audit logs (if the logs are available).The audit logs are shown in the Logs Explorer.\nYou can also use the Logs Explorer advanced filter interface to specify the resource type and log name. For more information, see [Retrieving audit logs](/logging/docs/audit/api#retrieving_audit_logs) .\n## Exporting your audit logs\nYou can export copies of some or all of your logs to other applications, other repositories, or third parties. To export your logs, see [Exporting logs](/logging/docs/export) .\nAn organization can create an aggregated sink that can export log entries from all the projects, folders, and billing accounts of the organization. Like any sink, your aggregated sink contains a filter that selects individual log entries. To aggregate and export your audit logs, see [Aggregated sinks](/logging/docs/export/aggregated_sinks) .\nTo read your log entries through the API, see [entries.list](/logging/docs/reference/v2/rest/v2/entries/list) . To read your log entries using the SDK, see [Reading log entries](/sdk/gcloud/reference/logging/read) .\n## What's next\n- Read the [Logs Explorer](/logging/docs/view/logs_viewer) page for instructions on filtering logs.\n- Read [Configure and manage sinks](/logging/docs/export/configure_export_v2) page for instructions on exporting logs.", "guide": "Cloud Deploy"}