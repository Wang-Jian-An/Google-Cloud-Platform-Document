{"title": "Generative AI on Vertex AI - \u767c\u9001\u804a\u5929\u63d0\u793a\u8acb\u6c42 (Gemini)", "url": "https://cloud.google.com/vertex-ai/generative-ai/docs/multimodal/send-chat-prompts-gemini?hl=zh-cn", "abstract": "# Generative AI on Vertex AI - \u767c\u9001\u804a\u5929\u63d0\u793a\u8acb\u6c42 (Gemini)\n\u672c\u9801\u9762\u4ecb\u7d39\u77ad\u5982\u4f55\u4f7f\u7528 Google Cloud \u63a7\u5236\u6aaf\u3001REST API \u548c\u53d7\u652f\u6301\u7684 SDK \u5411 Gemini 1.0 Pro ( `gemini-1.0-pro` ) \u6a21\u578b\u767c\u9001\u804a\u5929\u63d0\u793a\u3002Gemini 1.0 Pro \u652f\u6301\u50c5\u542b\u6587\u672c\u7684\u8f38\u5165\uff0c\u5305\u62ec\u81ea\u7136\u8a9e\u8a00\u4efb\u52d9\u3001\u591a\u8f2a\u6587\u672c\u548c\u4ee3\u78bc\u804a\u5929\u4ee5\u53ca\u4ee3\u78bc\u751f\u6210\u3002\u53ef\u8f38\u51fa\u6587\u672c\u548c\u4ee3\u78bc\u3002\nGemini 1.0 Pro \u57fa\u790e\u6a21\u578b\u662f\u4e00\u7a2e\u5927\u8a9e\u8a00\u6a21\u578b\uff0c\u64c5\u9577\u7406\u89e3\u548c\u751f\u6210\u8a9e\u8a00\u3002\u901a\u904e\u55ae\u8f2a\u63d0\u793a\u548c\u56de\u8986\uff0c\u8207 Gemini Pro \u4e92\u52d5\uff0c\u6216\u8005\u5728\u591a\u8f2a\u9023\u7e8c\u5c0d\u8a71\u4e2d\u8207\u5b83\u804a\u5929\uff0c\u751a\u81f3\u7528\u65bc\u7406\u89e3\u548c\u751f\u6210\u4ee3\u78bc\u3002\n\u5982\u9700\u67e5\u770b Gemini 1.0 Pro \u652f\u6301\u7684\u8a9e\u8a00\u5217\u8868\uff0c\u8acb\u53c3\u95b1\u6a21\u578b\u4fe1\u606f [\u8a9e\u8a00\u652f\u6301](https://cloud.google.com/vertex-ai/generative-ai/docs/learn/models?hl=zh-cn#language-support) \u3002\n\u5982\u9700\u5728\u63a7\u5236\u6aaf\u4e2d\u63a2\u7d22\u6b64\u6a21\u578b\uff0c\u8acb\u9078\u64c7 Model Garden \u4e2d\u7684 `gemini-1.0-pro` \u6a21\u578b\u5361\u7247\u3002\n[\u524d\u5f80 Model Garden](https://console.cloud.google.com/vertex-ai/publishers/google/model-garden/gemini-1.0-pro?hl=zh-cn)\n\u5982\u679c\u60a8\u6b63\u5728\u5c0b\u627e\u4e00\u7a2e\u76f4\u63a5\u5728\u79fb\u52d5\u61c9\u7528\u548c Web \u61c9\u7528\u4e2d\u4f7f\u7528 Gemini \u7684\u65b9\u6cd5\uff0c\u8acb\u67e5\u770b\u9069\u7528\u65bc Android\u3001Swift \u548c Web \u7684 [Google AI SDK](https://ai.google.dev/docs?hl=zh-cn) \u3002\n", "content": "## \u4f7f\u7528\u5834\u666f\nGemini 1.0 Pro \u652f\u6301\u901a\u904e\u6587\u672c\u63d0\u793a\u751f\u6210\u6587\u672c\u548c\u4ee3\u78bc\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u65bc\u4ee5\u4e0b\u61c9\u7528\u5834\u666f\uff1a\n- **\u5f59\u7e3d\uff1a** \u5275\u5efa\u5305\u542b\u539f\u59cb\u6587\u672c\u4e2d\u76f8\u95dc\u4fe1\u606f\u7684\u7c21\u77ed\u6587\u6a94\u7248\u672c\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u80fd\u60f3\u7e3d\u7d50\u4e00\u4e0b\u6559\u79d1\u66f8\u7684\u7ae0\u7bc0\u5167\u5bb9\u3002\u6216\u8005\uff0c\u60a8\u53ef\u4ee5\u6839\u64da\u8a73\u7d30\u63cf\u8ff0\u7522\u54c1\u7684\u9577\u7bc7\u6bb5\u843d\u4f86\u5275\u5efa\u4e00\u7bc7\u7c21\u6f54\u7684\u7522\u54c1\u63cf\u8ff0\u3002\n- **\u554f\u7b54\uff1a** \u4ee5\u6587\u5b57\u7684\u5f62\u5f0f\u56de\u7b54\u554f\u984c\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u4ee5\u6839\u64da\u77e5\u8b58\u5eab\u5167\u5bb9\u81ea\u52d5\u5275\u5efa\u5e38\u898b\u554f\u984c\u89e3\u7b54 (FAQ) \u6587\u6a94\u3002\n- **\u5206\u985e\uff1a** \u7232\u63d0\u4f9b\u7684\u6587\u672c\u5206\u914d\u6a19\u7c64\u3002\u4f8b\u5982\uff0c\u6a19\u7c64\u53ef\u4ee5\u61c9\u7528\u65bc\u6587\u672c\uff0c\u4ee5\u63cf\u8ff0\u8a72\u6587\u672c\u7684\u8a9e\u6cd5\u6b63\u78ba\u7a0b\u5ea6\u3002\n- **\u60c5\u611f\u5206\u6790\uff1a** \u9019\u662f\u4e00\u7a2e\u8b58\u5225\u6587\u672c\u60c5\u611f\u7684\u5206\u985e\u5f62\u5f0f\u3002\u60c5\u611f\u6703\u8f49\u8b8a\u7232\u61c9\u7528\u65bc\u6587\u672c\u7684\u6a19\u7c64\u3002\u4f8b\u5982\uff0c\u6587\u672c\u7684\u60c5\u611f\u53ef\u4ee5\u662f\u50cf\u7a4d\u6975\u6216\u6d88\u6975\u9019\u6a23\u7684\u5169\u6975\u5c0d\u7acb\uff0c\u4e5f\u53ef\u4ee5\u662f\u50cf\u61a4\u6012\u6216\u9ad8\u8208\u9019\u6a23\u7684\u60c5\u7dd2\u3002\n- **\u5be6\u9ad4\u63d0\u53d6\uff1a** \u5f9e\u6587\u672c\u4e2d\u63d0\u53d6\u4e00\u689d\u4fe1\u606f\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u4ee5\u5f9e\u6587\u7ae0\u4e2d\u63d0\u53d6\u96fb\u5f71\u540d\u7a31\u3002\n- **\u5167\u5bb9\u5275\u5efa\uff1a** \u901a\u904e\u6307\u5b9a\u4e00\u7d44\u8981\u6c42\u548c\u80cc\u666f\u4f86\u751f\u6210\u6587\u672c\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u80fd\u5e0c\u671b\u5728\u7d66\u5b9a\u4e0a\u4e0b\u6587\u4e2d\u4f7f\u7528\u7279\u5b9a\u57fa\u8abf\u64b0\u5beb\u96fb\u5b50\u90f5\u4ef6\u3002\n- **\u4ee3\u78bc\u751f\u6210** \uff1a\u6839\u64da\u8aaa\u660e\u751f\u6210\u4ee3\u78bc\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u4ee5\u8981\u6c42\u6a21\u578b\u7de8\u5beb\u4e00\u500b\u51fd\u6578\uff0c\u7528\u65bc\u6aa2\u67e5\u5e74\u4efd\u662f\u5426\u662f\u958f\u5e74\u3002\n- **\u591a\u8f2a\u804a\u5929** \uff1a\u5305\u542b\u820a\u6d88\u606f\u4f5c\u7232\u751f\u6210\u65b0\u56de\u8986\u7684\u4e0a\u4e0b\u6587\u7684\u63d0\u793a\u3002\n\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u5982\u4f55\u91dd\u5c0d\u5404\u7a2e\u7528\u9014\u8a2d\u8a08\u63d0\u793a\uff0c\u8acb\u53c3\u95b1\u4ee5\u4e0b\u9801\u9762\uff1a\n- [\u6587\u672c\u63d0\u793a](https://cloud.google.com/vertex-ai/generative-ai/docs/text/text-prompts?hl=zh-cn) \n- [\u804a\u5929\u63d0\u793a](https://cloud.google.com/vertex-ai/generative-ai/docs/chat/chat-prompts?hl=zh-cn) \n- [\u4ee3\u78bc\u804a\u5929\u63d0\u793a](https://cloud.google.com/vertex-ai/generative-ai/docs/code/code-chat-prompts?hl=zh-cn) \n- [\u4ee3\u78bc\u751f\u6210\u63d0\u793a](https://cloud.google.com/vertex-ai/generative-ai/docs/code/code-generation-prompts?hl=zh-cn) ## \u767c\u9001\u804a\u5929\u63d0\u793a\n\u5982\u9700\u6e2c\u8a66\u548c\u8fed\u4ee3\u804a\u5929\u63d0\u793a\uff0c\u6211\u5011\u5efa\u8b70\u4f7f\u7528 Google Cloud \u63a7\u5236\u6aaf\u3002\u5982\u9700\u4ee5\u7de8\u7a0b\u65b9\u5f0f\u5c07\u63d0\u793a\u767c\u9001\u5230\u6a21\u578b\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 REST API\u3001Python \u7248 Vertex AI SDK \u6216\u4ee5\u4e0b\u6a19\u7c64\u9801\u4e2d\u986f\u793a\u7684\u5176\u4ed6\u53d7\u652f\u6301\u7684\u5eab\u548c SDK\u3002\n\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u6216\u66f4\u65b0 Python \u7248 Vertex AI SDK\uff0c\u8acb\u53c3\u95b1 [\u5b89\u88dd Python \u7248 Vertex AI SDK](https://cloud.google.com/vertex-ai/docs/start/use-vertex-ai-python-sdk?hl=zh-cn#install-vertex-ai-python-sdk) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Python \u7248 Vertex AI SDK API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/python/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n### \u6d41\u5f0f\u56de\u7b54\u548c\u975e\u6d41\u5f0f\u56de\u7b54\u60a8\u53ef\u4ee5\u9078\u64c7\u6a21\u578b\u662f\u751f\u6210\u6d41\u5f0f\u56de\u7b54\u9084\u662f\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u6d41\u5f0f\u50b3\u8f38\u6d89\u53ca\u5728\u751f\u6210\u5c0d\u63d0\u793a\u7684\u56de\u7b54\u6642\u63a5\u6536\u9019\u4e9b\u56de\u7b54\u3002\u4e5f\u5c31\u662f\u8aaa\uff0c\u53ea\u8981\u6a21\u578b\u751f\u6210\u8f38\u51fa\u8a5e\u5143\uff0c\u5c31\u6703\u767c\u9001\u9019\u4e9b\u8f38\u51fa\u8a5e\u5143\u3002\u53ea\u6709\u5728\u751f\u6210\u6240\u6709\u8f38\u51fa\u8a5e\u5143\u540e\uff0c\u7e94\u6703\u767c\u9001\u5c0d\u63d0\u793a\u7684\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u5c0d\u65bc\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u4f7f\u7528 [generate_content](https://cloud.google.com/python/docs/reference/aiplatform/latest/vertexai.preview.generative_models?hl=zh-cn#content) \u4e2d\u7684 `stream` \u53c3\u6578\u3002```\n response = model.generate_content(contents=[...], stream = True)\n \n```\u5c0d\u65bc\u975e\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u79fb\u9664\u8a72\u53c3\u6578\u6216\u5c07\u53c3\u6578\u8a2d\u7f6e\u7232 `False` \u3002\n### \u793a\u4f8b\u4ee3\u78bc [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/python-docs-samples/blob/HEAD/generative_ai/gemini_chat_example.py) \n```\nimport vertexaifrom vertexai.generative_models import GenerativeModel, ChatSession# TODO(developer): Update and un-comment below lines# project_id = \"PROJECT_ID\"# location = \"us-central1\"vertexai.init(project=project_id, location=location)model = GenerativeModel(\"gemini-1.0-pro\")chat = model.start_chat()def get_chat_response(chat: ChatSession, prompt: str) -> str:\u00a0 \u00a0 text_response = []\u00a0 \u00a0 responses = chat.send_message(prompt, stream=True)\u00a0 \u00a0 for chunk in responses:\u00a0 \u00a0 \u00a0 \u00a0 text_response.append(chunk.text)\u00a0 \u00a0 return \"\".join(text_response)prompt = \"Hello.\"print(get_chat_response(chat, prompt))prompt = \"What are all the colors in a rainbow?\"print(get_chat_response(chat, prompt))prompt = \"Why does it appear when it rains?\"print(get_chat_response(chat, prompt))\n```\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300a\u751f\u6210\u5f0f AI \u5feb\u901f\u5165\u9580\uff1a\u4f7f\u7528 Node.js SDK\u300b](https://cloud.google.com/nodejs/docs/reference/vertexai/latest?hl=zh-cn#before-you-begin) \u4e2d\u7684 Node.js \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u9069\u7528\u65bc Gemini \u7684 Node.js SDK \u53c3\u8003\u6587\u6a94](https://cloud.google.com/nodejs/docs/reference/vertexai/latest?hl=zh-cn) \u3002\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n### \u6d41\u5f0f\u56de\u7b54\u548c\u975e\u6d41\u5f0f\u56de\u7b54\u60a8\u53ef\u4ee5\u9078\u64c7\u6a21\u578b\u662f\u751f\u6210\u6d41\u5f0f\u56de\u7b54\u9084\u662f\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u6d41\u5f0f\u50b3\u8f38\u6d89\u53ca\u5728\u751f\u6210\u5c0d\u63d0\u793a\u7684\u56de\u7b54\u6642\u63a5\u6536\u9019\u4e9b\u56de\u7b54\u3002\u4e5f\u5c31\u662f\u8aaa\uff0c\u53ea\u8981\u6a21\u578b\u751f\u6210\u8f38\u51fa\u8a5e\u5143\uff0c\u5c31\u6703\u767c\u9001\u9019\u4e9b\u8f38\u51fa\u8a5e\u5143\u3002\u53ea\u6709\u5728\u751f\u6210\u6240\u6709\u8f38\u51fa\u8a5e\u5143\u540e\uff0c\u7e94\u6703\u767c\u9001\u5c0d\u63d0\u793a\u7684\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u5c0d\u65bc\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u4f7f\u7528 [generateContentStream](https://cloud.google.com/nodejs/docs/reference/vertexai/latest?hl=zh-cn#streaming-content-generation) \u65b9\u6cd5\u3002```\n const streamingResp = await generativeModel.generateContentStream(request);\n \n```\u5c0d\u65bc\u975e\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u4f7f\u7528 [generateContent](https://cloud.google.com/nodejs/docs/reference/vertexai/latest?hl=zh-cn#content-generation-non-streaming) \u65b9\u6cd5\u3002```\n const streamingResp = await generativeModel.generateContent(request);\n \n```\n### \u793a\u4f8b\u4ee3\u78bc [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/nodejs-docs-samples/blob/HEAD/generative-ai/snippets/streamChat.js) \n```\nconst {VertexAI} = require('@google-cloud/vertexai');/**\u00a0* TODO(developer): Update these variables before running the sample.\u00a0*/async function createStreamChat(\u00a0 projectId = 'PROJECT_ID',\u00a0 location = 'us-central1',\u00a0 model = 'gemini-1.0-pro') {\u00a0 // Initialize Vertex with your Cloud project and location\u00a0 const vertexAI = new VertexAI({project: projectId, location: location});\u00a0 // Instantiate the model\u00a0 const generativeModel = vertexAI.getGenerativeModel({\u00a0 \u00a0 model: model,\u00a0 });\u00a0 const chat = generativeModel.startChat({});\u00a0 const chatInput1 = 'How can I learn more about that?';\u00a0 console.log(`User: ${chatInput1}`);\u00a0 const result1 = await chat.sendMessageStream(chatInput1);\u00a0 for await (const item of result1.stream) {\u00a0 \u00a0 console.log(item.candidates[0].content.parts[0].text);\u00a0 }}\n```\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300aVertex AI \u5feb\u901f\u5165\u9580\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Java \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u9069\u7528\u65bc Gemini \u7684 Vertex AI Java SDK \u53c3\u8003\u6587\u6a94](https://cloud.google.com/java/docs/reference/google-cloud-vertexai/latest/overview?hl=zh-cn) \u3002\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n### \u6d41\u5f0f\u56de\u7b54\u548c\u975e\u6d41\u5f0f\u56de\u7b54\u60a8\u53ef\u4ee5\u9078\u64c7\u6a21\u578b\u662f\u751f\u6210\u6d41\u5f0f\u56de\u7b54\u9084\u662f\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u6d41\u5f0f\u50b3\u8f38\u6d89\u53ca\u5728\u751f\u6210\u5c0d\u63d0\u793a\u7684\u56de\u7b54\u6642\u63a5\u6536\u9019\u4e9b\u56de\u7b54\u3002\u4e5f\u5c31\u662f\u8aaa\uff0c\u53ea\u8981\u6a21\u578b\u751f\u6210\u8f38\u51fa\u8a5e\u5143\uff0c\u5c31\u6703\u767c\u9001\u9019\u4e9b\u8f38\u51fa\u8a5e\u5143\u3002\u53ea\u6709\u5728\u751f\u6210\u6240\u6709\u8f38\u51fa\u8a5e\u5143\u540e\uff0c\u7e94\u6703\u767c\u9001\u5c0d\u63d0\u793a\u7684\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u5c0d\u65bc\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u4f7f\u7528 [generateContentStream](https://cloud.google.com/java/docs/reference/google-cloud-vertexai/latest/com.google.cloud.vertexai.generativeai.preview.GenerativeModel?hl=zh-cn#com_google_cloud_vertexai_generativeai_preview_GenerativeModel_generateContentStream_com_google_cloud_vertexai_api_Content_) \u65b9\u6cd5\u3002```\n public ResponseStream generateContentStream(Content content)\n \n```\u5c0d\u65bc\u975e\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u4f7f\u7528 [generateContent](https://cloud.google.com/java/docs/reference/google-cloud-vertexai/latest/com.google.cloud.vertexai.generativeai.preview.GenerativeModel?hl=zh-cn#com_google_cloud_vertexai_generativeai_preview_GenerativeModel_generateContent_com_google_cloud_vertexai_api_Content_) \u65b9\u6cd5\u3002```\n public GenerateContentResponse generateContent(Content content)\n \n```\n### \u793a\u4f8b\u4ee3\u78bc [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/java-docs-samples/blob/HEAD/vertexai/snippets/src/main/java/vertexai/gemini/ChatDiscussion.java) \n```\nimport com.google.cloud.vertexai.VertexAI;import com.google.cloud.vertexai.api.GenerateContentResponse;import com.google.cloud.vertexai.generativeai.ChatSession;import com.google.cloud.vertexai.generativeai.GenerativeModel;import com.google.cloud.vertexai.generativeai.ResponseHandler;import java.io.IOException;public class ChatDiscussion {\u00a0 public static void main(String[] args) throws IOException {\u00a0 \u00a0 // TODO(developer): Replace these variables before running the sample.\u00a0 \u00a0 String projectId = \"your-google-cloud-project-id\";\u00a0 \u00a0 String location = \"us-central1\";\u00a0 \u00a0 String modelName = \"gemini-1.0-pro\";\u00a0 \u00a0 chatDiscussion(projectId, location, modelName);\u00a0 }\u00a0 // Ask interrelated questions in a row using a ChatSession object.\u00a0 public static void chatDiscussion(String projectId, String location, String modelName)\u00a0 \u00a0 \u00a0 throws IOException {\u00a0 \u00a0 // Initialize client that will be used to send requests. This client only needs\u00a0 \u00a0 // to be created once, and can be reused for multiple requests.\u00a0 \u00a0 try (VertexAI vertexAI = new VertexAI(projectId, location)) {\u00a0 \u00a0 \u00a0 GenerateContentResponse response;\u00a0 \u00a0 \u00a0 GenerativeModel model = new GenerativeModel(modelName, vertexAI);\u00a0 \u00a0 \u00a0 // Create a chat session to be used for interactive conversation.\u00a0 \u00a0 \u00a0 ChatSession chatSession = new ChatSession(model);\u00a0 \u00a0 \u00a0 response = chatSession.sendMessage(\"Hello.\");\u00a0 \u00a0 \u00a0 System.out.println(ResponseHandler.getText(response));\u00a0 \u00a0 \u00a0 response = chatSession.sendMessage(\"What are all the colors in a rainbow?\");\u00a0 \u00a0 \u00a0 System.out.println(ResponseHandler.getText(response));\u00a0 \u00a0 \u00a0 response = chatSession.sendMessage(\"Why does it appear when it rains?\");\u00a0 \u00a0 \u00a0 System.out.println(ResponseHandler.getText(response));\u00a0 \u00a0 \u00a0 System.out.println(\"Chat Ended.\");\u00a0 \u00a0 }\u00a0 }}\n```\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300aVertex AI \u5feb\u901f\u5165\u9580\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Go \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u9069\u7528\u65bc Gemini \u7684 Vertex AI Go SDK \u53c3\u8003\u6587\u6a94](https://cloud.google.com/go/docs/reference/cloud.google.com/go/vertexai/latest?hl=zh-cn) \u3002\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n### \u6d41\u5f0f\u56de\u7b54\u548c\u975e\u6d41\u5f0f\u56de\u7b54\u60a8\u53ef\u4ee5\u9078\u64c7\u6a21\u578b\u662f\u751f\u6210\u6d41\u5f0f\u56de\u7b54\u9084\u662f\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u6d41\u5f0f\u50b3\u8f38\u6d89\u53ca\u5728\u751f\u6210\u5c0d\u63d0\u793a\u7684\u56de\u7b54\u6642\u63a5\u6536\u9019\u4e9b\u56de\u7b54\u3002\u4e5f\u5c31\u662f\u8aaa\uff0c\u53ea\u8981\u6a21\u578b\u751f\u6210\u8f38\u51fa\u8a5e\u5143\uff0c\u5c31\u6703\u767c\u9001\u9019\u4e9b\u8f38\u51fa\u8a5e\u5143\u3002\u53ea\u6709\u5728\u751f\u6210\u6240\u6709\u8f38\u51fa\u8a5e\u5143\u540e\uff0c\u7e94\u6703\u767c\u9001\u5c0d\u63d0\u793a\u7684\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u5c0d\u65bc\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u4f7f\u7528 [GenerateContentStream](https://pkg.go.dev/cloud.google.com/go/vertexai/genai#GenerativeModel.GenerateContentStream) \u65b9\u6cd5\u3002```\n iter := model.GenerateContentStream(ctx, genai.Text(\"Tell me a story about a lumberjack and his giant ox. Keep it very short.\"))\n \n```\u5c0d\u65bc\u975e\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u4f7f\u7528 [GenerateContent](https://pkg.go.dev/cloud.google.com/go/vertexai/genai#GenerativeModel.GenerateContent) \u65b9\u6cd5\u3002```\n resp, err := model.GenerateContent(ctx, genai.Text(\"What is the average size of a swallow?\"))\n \n```\n### \u793a\u4f8b\u4ee3\u78bc [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/golang-samples/blob/HEAD/vertexai/chat/chat.go) \n```\nimport (\u00a0 \u00a0 \u00a0 \u00a0 \"context\"\u00a0 \u00a0 \u00a0 \u00a0 \"encoding/json\"\u00a0 \u00a0 \u00a0 \u00a0 \"fmt\"\u00a0 \u00a0 \u00a0 \u00a0 \"cloud.google.com/go/vertexai/genai\")var projectId = \"PROJECT_ID\"var region = \"us-central1\"var modelName = \"gemini-1.0-pro-vision\"func makeChatRequests(projectId string, region string, modelName string) error {\u00a0 \u00a0 \u00a0 \u00a0 ctx := context.Background()\u00a0 \u00a0 \u00a0 \u00a0 client, err := genai.NewClient(ctx, projectId, region)\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return fmt.Errorf(\"error creating client: %v\", err)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 defer client.Close()\u00a0 \u00a0 \u00a0 \u00a0 gemini := client.GenerativeModel(modelName)\u00a0 \u00a0 \u00a0 \u00a0 chat := gemini.StartChat()\u00a0 \u00a0 \u00a0 \u00a0 r, err := chat.SendMessage(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ctx,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 genai.Text(\"Hello\"))\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return err\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 rb, _ := json.MarshalIndent(r, \"\", \" \u00a0\")\u00a0 \u00a0 \u00a0 \u00a0 fmt.Println(string(rb))\u00a0 \u00a0 \u00a0 \u00a0 r, err = chat.SendMessage(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ctx,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 genai.Text(\"What are all the colors in a rainbow?\"))\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return err\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 rb, _ = json.MarshalIndent(r, \"\", \" \u00a0\")\u00a0 \u00a0 \u00a0 \u00a0 fmt.Println(string(rb))\u00a0 \u00a0 \u00a0 \u00a0 r, err = chat.SendMessage(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ctx,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 genai.Text(\"Why does it appear when it rains?\"))\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return err\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 rb, _ = json.MarshalIndent(r, \"\", \" \u00a0\")\u00a0 \u00a0 \u00a0 \u00a0 fmt.Println(string(rb))\u00a0 \u00a0 \u00a0 \u00a0 return nil}\n```\u60a8\u53ef\u4ee5\u4f7f\u7528 REST \u767c\u9001\u804a\u5929\u63d0\u793a\uff0c\u65b9\u6cd5\u662f\u4f7f\u7528 Vertex AI API \u5411\u767c\u4f48\u65b9\u6a21\u578b\u7aef\u9ede\u767c\u9001 POST \u8acb\u6c42\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a\u60a8\u5e0c\u671b\u6a21\u578b\u751f\u6210\u7684\u56de\u7b54\u985e\u578b\u3002\u9078\u64c7\u4e00\u7a2e\u65b9\u6cd5\u4f86\u751f\u6210\u60a8\u5e0c\u671b\u8fd4\u56de\u6a21\u578b\u56de\u7b54\u7684\u65b9\u5f0f\uff1a- `streamGenerateContent`\uff1a\u5728\u751f\u6210\u56de\u7b54\u6642\u9032\u884c\u6d41\u5f0f\u50b3\u8f38\uff0c\u4ee5\u964d\u4f4e\u771f\u4eba\u53d7\u8846\u7fa3\u9ad4\u5c0d\u65bc\u5ef6\u9072\u7684\u611f\u77e5\u5ea6\u3002\n- `generateContent`\uff1a\u56de\u7b54\u5728\u5b8c\u5168\u751f\u6210\u5f8c\u8fd4\u56de\u3002\n- \uff1a\u8655\u7406\u8acb\u6c42\u7684\u5340\u57df\u3002\u53ef\u7528\u7684\u9078\u9805\u5305\u62ec\uff1a\n- \uff1a\u60a8\u7684 [\u9805\u76ee ID](https://cloud.google.com/resource-manager/docs/creating-managing-projects?hl=zh-cn#identifiers) \u3002\n- \uff1a\u60a8\u8981\u4f7f\u7528\u7684\u591a\u6a21\u614b\u6a21\u578b ID\u3002\u9078\u9805\u5305\u62ec\uff1a- `gemini-1.0-pro`\n- \uff1a\u8207\u5167\u5bb9\u95dc\u806f\u7684\u5c0d\u8a71\u4e2d\u7684\u89d2\u8272\u3002\u5373\u4f7f\u5728\u55ae\u8f2a\u61c9\u7528\u5834\u666f\u4e2d\uff0c\u4e5f\u9700\u8981\u6307\u5b9a\u89d2\u8272\u3002 \u53ef\u63a5\u53d7\u7684\u503c\u5305\u62ec\uff1a- `USER`\uff1a\u6307\u5b9a\u7531\u60a8\u767c\u9001\u7684\u5167\u5bb9\u3002\n- `MODEL`\uff1a\u6307\u5b9a\u6a21\u578b\u7684\u97ff\u61c9\u3002- \uff1a\u8981\u5305\u542b\u5728\u63d0\u793a\u4e2d\u7684\u6587\u672c\u8aaa\u660e\u3002\n- \uff1a\u8981\u7232\u5176\u914d\u7f6e\u95be\u503c\u7684\u5b89\u5168\u985e\u5225\u3002\u53ef\u63a5\u53d7\u7684\u503c\u5305\u62ec\uff1a\n- \uff1a\u57fa\u65bc\u6982\u7387\u963b\u6b62\u5c6c\u65bc\u6307\u5b9a\u5b89\u5168\u985e\u5225\u7684\u97ff\u61c9\u7684\u95be\u503c\u3002\u53ef\u63a5\u53d7\u7684\u503c\u5305\u62ec\uff1a`BLOCK_LOW_AND_ABOVE`\u5c4f\u853d\u5f97\u6700\u591a\uff0c\u800c`BLOCK_ONLY_HIGH`\u5c4f\u853d\u5f97\u6700\u5c11\u3002\n- \uff1a\u6eab\u5ea6 (temperature) \u5728\u751f\u6210\u56de\u8986\u671f\u9593\u7528\u65bc\u63a1\u6a23\uff0c\u5728\u61c9\u7528`topP`\u548c`topK`\u6642\u6703\u751f\u6210\u56de\u8986\u3002\u6eab\u5ea6\u53ef\u4ee5\u63a7\u5236\u8a5e\u5143\u9078\u64c7\u7684\u96a8\u6a5f\u6027\u3002 \u8f03\u4f4e\u7684\u6eab\u5ea6\u6709\u5229\u65bc\u9700\u8981\u66f4\u5c11\u958b\u653e\u6027\u6216\u5275\u9020\u6027\u56de\u8986\u7684\u63d0\u793a\uff0c\u800c\u8f03\u9ad8\u7684\u6eab\u5ea6\u53ef\u4ee5\u5e36\u4f86\u66f4\u5177\u591a\u6a23\u6027\u6216\u5275\u9020\u6027\u7684\u7d50\u679c\u3002\u6eab\u5ea6\u7232`0`\u8868\u793a\u59cb\u7d42\u9078\u64c7\u6982\u7387\u6700\u9ad8\u7684\u8a5e\u5143\u3002\u5728\u9019\u7a2e\u60c5\u6cc1\u4e0b\uff0c\u7d66\u5b9a\u63d0\u793a\u7684\u56de\u8986\u5927\u591a\u662f\u78ba\u5b9a\u7684\uff0c\u4f46\u53ef\u80fd\u4ecd\u7136\u6709\u5c11\u91cf\u8b8a\u5316\u3002\u5982\u679c\u6a21\u578b\u8fd4\u56de\u7684\u56de\u7b54\u904e\u65bc\u7c60\u7d71\u3001\u904e\u65bc\u7c21\u77ed\uff0c\u6216\u8005\u6a21\u578b\u7d66\u51fa\u5f8c\u5099\u56de\u7b54\uff0c\u8acb\u5617\u8a66\u63d0\u9ad8\u6eab\u5ea6\u3002\n- \uff1aTop-P \u53ef\u66f4\u6539\u6a21\u578b\u9078\u64c7\u8f38\u51fa\u8a5e\u5143\u7684\u65b9\u5f0f\u3002\u7cfb\u7d71\u6703\u6309\u7167\u6982\u7387\u5f9e\u6700\u9ad8\uff08\u898b top-K\uff09\u5230\u6700\u4f4e\u7684\u9806\u5e8f\u9078\u64c7\u8a5e\u5143\uff0c\u76f4\u5230\u6240\u9078\u8a5e\u5143\u7684\u6982\u7387\u7e3d\u548c\u7b49\u65bc top-P \u7684\u503c\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8a5e\u5143 A\u3001B \u548c C \u7684\u6982\u7387\u5206\u5225\u7232 0.3\u30010.2 \u548c 0.1\uff0c\u4e26\u4e14 top-P \u503c\u7232`0.5`\uff0c\u5247\u6a21\u578b\u5c07\u9078\u64c7 A \u6216 B \u4f5c\u7232\u4e0b\u4e00\u500b\u8a5e\u5143\uff08\u901a\u904e\u6eab\u5ea6\u78ba\u5b9a\uff09\uff0c\u4e26\u6703\u6392\u9664 C\uff0c\u5c07\u5176\u4f5c\u7232\u5019\u9078\u8a5e\u5143\u3002\u6307\u5b9a\u8f03\u4f4e\u7684\u503c\u53ef\u7372\u5f97\u96a8\u6a5f\u7a0b\u5ea6\u8f03\u4f4e\u7684\u56de\u7b54\uff0c\u6307\u5b9a\u8f03\u9ad8\u7684\u503c\u53ef\u7372\u5f97\u96a8\u6a5f\u7a0b\u5ea6\u8f03\u9ad8\u7684\u56de\u7b54\u3002\n- \uff1aTop-K \u53ef\u66f4\u6539\u6a21\u578b\u9078\u64c7\u8f38\u51fa\u8a5e\u5143\u7684\u65b9\u5f0f\u3002\u5982\u679c top-K \u8a2d\u7232`1`\uff0c\u8868\u793a\u6240\u9078\u8a5e\u5143\u662f\u6a21\u578b\u8a5e\u5f59\u8868\u7684\u6240\u6709\u8a5e\u5143\u4e2d\u6982\u7387\u6700\u9ad8\u7684\u8a5e\u5143\uff08\u4e5f\u7a31\u7232\u8caa\u5fc3\u89e3\u78bc\uff09\u3002\u5982\u679c top-K \u8a2d\u7232`3`\uff0c\u5247\u8868\u793a\u7cfb\u7d71\u5c07\u5f9e 3 \u500b\u6982\u7387\u6700\u9ad8\u7684\u8a5e\u5143\uff08\u901a\u904e\u6eab\u5ea6\u78ba\u5b9a\uff09\u4e2d\u9078\u64c7\u4e0b\u4e00\u500b\u8a5e\u5143\u3002\u5728\u6bcf\u500b\u8a5e\u5143\u9078\u64c7\u6b65\u9a5f\u4e2d\uff0c\u7cfb\u7d71\u90fd\u6703\u5c0d\u6982\u7387\u6700\u9ad8\u7684 top-K \u8a5e\u5143\u9032\u884c\u63a1\u6a23\u3002\u7136\u5f8c\uff0c\u7cfb\u7d71\u6703\u6839\u64da top-P \u9032\u4e00\u6b65\u904e\u6ffe\u8a5e\u5143\uff0c\u4e26\u4f7f\u7528\u6eab\u5ea6\u63a1\u6a23\u9078\u64c7\u6700\u7d42\u7684\u8a5e\u5143\u3002\u6307\u5b9a\u8f03\u4f4e\u7684\u503c\u53ef\u7372\u5f97\u96a8\u6a5f\u7a0b\u5ea6\u8f03\u4f4e\u7684\u56de\u7b54\uff0c\u6307\u5b9a\u8f03\u9ad8\u7684\u503c\u53ef\u7372\u5f97\u96a8\u6a5f\u7a0b\u5ea6\u8f03\u9ad8\u7684\u56de\u7b54\u3002\n- \uff1a\u97ff\u61c9\u4e2d\u53ef\u751f\u6210\u7684\u8a5e\u5143\u6578\u91cf\u4e0a\u9650\u3002\u8a5e\u5143\u7d04\u7232 4 \u500b\u5b57\u7b26\u3002100 \u500b\u8a5e\u5143\u5c0d\u61c9\u5927\u7d04 60-80 \u500b\u55ae\u8a5e\u3002\u6307\u5b9a\u8f03\u4f4e\u7684\u503c\u53ef\u7372\u5f97\u8f03\u77ed\u7684\u56de\u8986\uff0c\u6307\u5b9a\u8f03\u9ad8\u7684\u503c\u53ef\u7372\u5f97\u53ef\u80fd\u8f03\u9577\u7684\u56de\u8986\u3002\n- \uff1a \u6307\u5b9a\u4e00\u500b\u5b57\u7b26\u4e32\u5217\u8868\uff0c\u544a\u77e5\u6a21\u578b\u5728\u97ff\u61c9\u4e2d\u9047\u5230\u5176\u4e2d\u4e00\u500b\u5b57\u7b26\u4e32\u6642\uff0c\u505c\u6b62\u751f\u6210\u6587\u672c\u3002\u5982\u679c\u67d0\u500b\u5b57\u7b26\u4e32\u5728\u97ff\u61c9\u4e2d\u591a\u6b21\u51fa\u73fe\uff0c\u5247\u97ff\u61c9\u6703\u5728\u9996\u6b21\u51fa\u73fe\u7684\u4f4d\u7f6e\u622a\u65b7\u3002\u5b57\u7b26\u4e32\u5340\u5206\u5927\u5c0f\u5beb\u3002\u4f8b\u5982\uff0c\u672a\u6307\u5b9a`stopSequences`\u6642\uff0c\u5982\u679c\u4e0b\u9762\u7684\u5167\u5bb9\u662f\u8fd4\u56de\u7684\u56de\u8986\uff1a`public static string reverse(string myString)`\u5247\u8fd4\u56de\u7684\u56de\u8986\u7232\u4ee5\u4e0b\u5167\u5bb9\uff0c\u5176\u4e2d`stopSequences`\u8a2d\u7f6e\u7232`[\"Str\", \"reverse\"]`\uff1a`public static string`\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nPOST https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/publishers/google/models/MODEL_ID:GENERATE_RESPONSE_METHOD\n```\n\u8acb\u6c42 JSON \u6b63\u6587\uff1a\n```\n{\n \"contents\": {\n \"role\": \"ROLE\",\n \"parts\": { \"text\": \"TEXT\" }\n },\n \"safety_settings\": {\n \"category\": \"SAFETY_CATEGORY\",\n \"threshold\": \"THRESHOLD\"\n },\n \"generation_config\": {\n \"temperature\": TEMPERATURE,\n \"topP\": TOP_P,\n \"topK\": TOP_K,\n \"candidateCount\": 1,\n \"maxOutputTokens\": MAX_OUTPUT_TOKENS,\n \"stopSequences\": STOP_SEQUENCES,\n }\n}\n```\n\u5982\u9700\u767c\u9001\u8acb\u6c42\uff0c\u8acb\u9078\u64c7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\uff1a\n **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/publishers/google/models/MODEL_ID:GENERATE_RESPONSE_METHOD\"\n``` **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/publishers/google/models/MODEL_ID:GENERATE_RESPONSE_METHOD\" | Select-Object -Expand Content\n```\n\u60a8\u61c9\u8a72\u6536\u5230\u985e\u4f3c\u4ee5\u4e0b\u5167\u5bb9\u7684 JSON \u97ff\u61c9\u3002```\nLOCATION=\"us-central1\"MODEL_ID=\"gemini-1.0-pro\"PROJECT_ID=\"test-project\"GENERATE_RESPONSE_METHOD=\"generateContent\"curl \\-X POST \\-H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\-H \"Content-Type: application/json\" \\https://${LOCATION}-aiplatform.googleapis.com/v1/projects/${PROJECT_ID}/locations/${LOCATION}/publishers/google/models/${MODEL_ID}:${GENERATE_RESPONSE_METHOD} -d \\$'{\u00a0 \"contents\": [\u00a0 \u00a0 {\u00a0 \u00a0 \"role\": \"user\",\u00a0 \u00a0 \"parts\": { \"text\": \"Hello!\" }\u00a0 \u00a0 },\u00a0 \u00a0 {\u00a0 \u00a0 \"role\": \"model\",\u00a0 \u00a0 \"parts\": { \"text\": \"Argh! What brings ye to my ship?\" }\u00a0 \u00a0 },\u00a0 \u00a0 {\u00a0 \u00a0 \"role\": \"user\",\u00a0 \u00a0 \"parts\": { \"text\": \"Wow! You are a real-life pirate!\" }\u00a0 \u00a0 }\u00a0 ],\u00a0 \"safety_settings\": {\u00a0 \u00a0 \"category\": \"HARM_CATEGORY_SEXUALLY_EXPLICIT\",\u00a0 \u00a0 \"threshold\": \"BLOCK_LOW_AND_ABOVE\"\u00a0 },\u00a0 \"generation_config\": {\u00a0 \u00a0 \"temperature\": 0.9,\u00a0 \u00a0 \"topP\": 1,\u00a0 \u00a0 \"candidateCount\": 1,\u00a0 \u00a0 \"maxOutputTokens\": 2048\u00a0 }}'\n```\u5982\u9700\u4f7f\u7528 Vertex AI Studio \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\u767c\u9001\u804a\u5929\u63d0\u793a\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a- \u5728 Google Cloud \u63a7\u5236\u6aaf\u7684\u751f\u6210\u6642 AI \u90e8\u5206\uff0c\u9032\u5165 **Vertex AI Studio** \u7684 **\u8a9e\u8a00** \u90e8\u5206\u3002 [\u9032\u5165 Vertex AI Studio](https://console.cloud.google.com/vertex-ai/generative/language?hl=zh-cn) \n- \u9ede\u64ca **\u6587\u672c\u804a\u5929** \u3002\n- \u914d\u7f6e\u6a21\u578b\u548c\u53c3\u6578\uff1a- **\u5340\u57df** \uff1a\u9078\u64c7\u60a8\u8981\u4f7f\u7528\u7684\u5340\u57df\u3002\n- **\u6a21\u578b** \uff1a\u9078\u64c7 **Gemini Pro** \u3002\n- **\u6eab\u5ea6** \uff1a\u4f7f\u7528\u6ed1\u584a\u6216\u6587\u672c\u6846\u8f38\u5165\u6eab\u5ea6\u503c\u3002\u6eab\u5ea6 (temperature) \u5728\u751f\u6210\u56de\u8986\u671f\u9593\u7528\u65bc\u63a1\u6a23\uff0c\u5728\u61c9\u7528`topP`\u548c`topK`\u6642\u6703\u751f\u6210\u56de\u8986\u3002\u6eab\u5ea6\u53ef\u4ee5\u63a7\u5236\u8a5e\u5143\u9078\u64c7\u7684\u96a8\u6a5f\u6027\u3002 \u8f03\u4f4e\u7684\u6eab\u5ea6\u6709\u5229\u65bc\u9700\u8981\u66f4\u5c11\u958b\u653e\u6027\u6216\u5275\u9020\u6027\u56de\u8986\u7684\u63d0\u793a\uff0c\u800c\u8f03\u9ad8\u7684\u6eab\u5ea6\u53ef\u4ee5\u5e36\u4f86\u66f4\u5177\u591a\u6a23\u6027\u6216\u5275\u9020\u6027\u7684\u7d50\u679c\u3002\u6eab\u5ea6\u7232`0`\u8868\u793a\u59cb\u7d42\u9078\u64c7\u6982\u7387\u6700\u9ad8\u7684\u8a5e\u5143\u3002\u5728\u9019\u7a2e\u60c5\u6cc1\u4e0b\uff0c\u7d66\u5b9a\u63d0\u793a\u7684\u56de\u8986\u5927\u591a\u662f\u78ba\u5b9a\u7684\uff0c\u4f46\u53ef\u80fd\u4ecd\u7136\u6709\u5c11\u91cf\u8b8a\u5316\u3002\u5982\u679c\u6a21\u578b\u8fd4\u56de\u7684\u56de\u7b54\u904e\u65bc\u7c60\u7d71\u3001\u904e\u65bc\u7c21\u77ed\uff0c\u6216\u8005\u6a21\u578b\u7d66\u51fa\u5f8c\u5099\u56de\u7b54\uff0c\u8acb\u5617\u8a66\u63d0\u9ad8\u6eab\u5ea6\u3002\n- **\u8a5e\u5143\u4e0a\u9650** \uff1a\u4f7f\u7528\u6ed1\u584a\u6216\u6587\u672c\u6846\u8f38\u5165\u8f38\u51fa\u4e0a\u9650\u503c\u3002\u56de\u7b54\u4e2d\u53ef\u751f\u6210\u7684\u8a5e\u5143\u6578\u91cf\u4e0a\u9650\u3002\u8a5e\u5143\u7d04\u7232 4 \u500b\u5b57\u7b26\u3002100 \u500b\u8a5e\u5143\u5c0d\u61c9\u5927\u7d04 60-80 \u500b\u55ae\u8a5e\u3002\u6307\u5b9a\u8f03\u4f4e\u7684\u503c\u53ef\u7372\u5f97\u8f03\u77ed\u7684\u56de\u8986\uff0c\u6307\u5b9a\u8f03\u9ad8\u7684\u503c\u53ef\u7372\u5f97\u53ef\u80fd\u8f03\u9577\u7684\u56de\u8986\u3002\n- **\u6dfb\u52a0\u505c\u6b62\u5e8f\u5217** \uff1a\u8f38\u5165\u505c\u6b62\u5e8f\u5217\uff0c\u5373\u6a21\u578b\u9047\u5230\u6642\u505c\u6b62\u56de\u8986\u7684\u4e00\u7cfb\u5217\u5b57\u7b26\uff08\u5305\u62ec\u7a7a\u683c\uff09\u3002\u8a72\u5e8f\u5217\u4e0d\u5305\u542b\u5728\u56de\u8986\u4e2d\u3002\u60a8\u6700\u591a\u53ef\u4ee5\u6dfb\u52a0\u4e94\u500b\u505c\u6b62\u5e8f\u5217\u3002- \u53ef\u9078\uff1a\u5982\u9700\u914d\u7f6e\u9ad8\u7d1a\u53c3\u6578\uff0c\u8acb\u9ede\u64ca **\u9ad8\u7d1a** \uff0c\u7136\u5f8c\u6309\u5982\u4e0b\u65b9\u5f0f\u9032\u884c\u914d\u7f6e\uff1a\n- Google Cloud \u63a7\u5236\u6aaf\u50c5\u652f\u6301\u6d41\u5f0f\u50b3\u8f38\uff0c\u6d89\u53ca\u5728\u751f\u6210\u5c0d\u63d0\u793a\u7684\u56de\u7b54\u6642\u63a5\u6536\u9019\u4e9b\u56de\u7b54\u3002\u60a8\u73fe\u5728\u53ef\u4ee5\u5728\u6d88\u606f\u6846\u4e2d\u8f38\u5165\u6d88\u606f\uff0c\u4ee5\u958b\u59cb\u8207\u6a21\u578b\u5c0d\u8a71\u3002\u96a8\u5f8c\uff0c\u6a21\u578b\u6703\u4f7f\u7528\u4e4b\u524d\u7684\u6d88\u606f\u4f5c\u7232\u65b0\u56de\u7b54\u7684\u8a9e\u5883\u3002\n- \u53ef\u9078\uff1a\u5982\u9700\u5c07\u63d0\u793a\u4fdd\u5b58\u5230 **\u6211\u7684\u63d0\u793a** \uff0c\u8acb\u9ede\u64casave_alt **\u4fdd\u5b58** \u3002\n- \u53ef\u9078\uff1a\u5982\u9700\u7372\u53d6\u63d0\u793a\u7684 Python \u4ee3\u78bc\u6216 curl \u547d\u4ee4\uff0c\u8acb\u9ede\u64cacode **\u7372\u53d6\u4ee3\u78bc** \u3002\n- \u53ef\u9078\uff1a\u5982\u9700\u6e05\u9664\u4e4b\u524d\u7684\u6240\u6709\u6d88\u606f\uff0c\u8acb\u9ede\u64cadelete **\u6e05\u9664\u5c0d\u8a71**\n## \u5f8c\u7e8c\u6b65\u9a5f\n- \u77ad\u89e3\u5982\u4f55 [\u767c\u9001\u591a\u6a21\u614b\u63d0\u793a\u8acb\u6c42](https://cloud.google.com/vertex-ai/generative-ai/docs/multimodal/send-multimodal-prompts?hl=zh-cn) \u3002\n- \u77ad\u89e3 [Responsible AI \u6700\u4f73\u5be6\u8e10\u548c Vertex AI \u7684\u5b89\u5168\u904e\u6ffe\u689d\u4ef6](https://cloud.google.com/vertex-ai/generative-ai/docs/learn/responsible-ai?hl=zh-cn) \u3002", "guide": "Generative AI on Vertex AI"}