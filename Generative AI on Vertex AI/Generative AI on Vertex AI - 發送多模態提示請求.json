{"title": "Generative AI on Vertex AI - \u767c\u9001\u591a\u6a21\u614b\u63d0\u793a\u8acb\u6c42", "url": "https://cloud.google.com/vertex-ai/generative-ai/docs/multimodal/send-multimodal-prompts?hl=zh-cn", "abstract": "# Generative AI on Vertex AI - \u767c\u9001\u591a\u6a21\u614b\u63d0\u793a\u8acb\u6c42\n\u672c\u9801\u9762\u4ecb\u7d39\u77ad\u5982\u4f55\u4f7f\u7528 Google Cloud \u63a7\u5236\u6aaf\u3001REST API \u548c\u53d7\u652f\u6301\u7684 SDK \u5411 Gemini 1.0 Pro Vision ( `gemini-1.0-pro-vision` ) \u6a21\u578b\u767c\u9001\u591a\u6a21\u614b\u63d0\u793a\u3002Gemini 1.0 Pro Vision \u6a21\u578b\u652f\u6301\u5305\u542b\u6587\u672c\u3001\u4ee3\u78bc\u3001\u5716\u7247\u548c\u8996\u983b\u7684\u63d0\u793a\uff0c\u4e26\u4e14\u53ef\u4ee5\u8f38\u51fa\u6587\u672c\u548c\u4ee3\u78bc\u3002\n\u5982\u9700\u67e5\u770b Gemini 1.0 Pro Vision \u652f\u6301\u7684\u8a9e\u8a00\u5217\u8868\uff0c\u8acb\u53c3\u95b1\u6a21\u578b\u4fe1\u606f [\u8a9e\u8a00\u652f\u6301](https://cloud.google.com/vertex-ai/generative-ai/docs/learn/models?hl=zh-cn#language-support) \u3002\n\u5982\u9700\u5728\u63a7\u5236\u6aaf\u4e2d\u63a2\u7d22\u6b64\u6a21\u578b\uff0c\u8acb\u9078\u64c7 Model Garden \u4e2d\u7684 `gemini-1.0-pro-vision` \u6a21\u578b\u5361\u7247\u3002\n[\u524d\u5f80 Model Garden](https://console.cloud.google.com/vertex-ai/publishers/google/model-garden/gemini-1.0-pro-vision?hl=zh-cn)\n\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u5982\u4f55\u8a2d\u8a08\u591a\u6a21\u614b\u63d0\u793a\uff0c\u8acb\u53c3\u95b1 [\u8a2d\u8a08\u591a\u6a21\u614b\u63d0\u793a](https://cloud.google.com/vertex-ai/generative-ai/docs/multimodal/design-multimodal-prompts?hl=zh-cn) \u3002\n\u5982\u679c\u60a8\u6b63\u5728\u5c0b\u627e\u4e00\u7a2e\u76f4\u63a5\u5728\u79fb\u52d5\u61c9\u7528\u548c Web \u61c9\u7528\u4e2d\u4f7f\u7528 Gemini \u7684\u65b9\u6cd5\uff0c\u8acb\u67e5\u770b\u9069\u7528\u65bc Android\u3001Swift \u548c Web \u7684 [Google AI SDK](https://ai.google.dev/docs?hl=zh-cn) \u3002\n", "content": "## \u767c\u9001\u5305\u542b\u5716\u7247\u7684\u591a\u6a21\u614b\u63d0\u793a\u8acb\u6c42\n\u5982\u9700\u6e2c\u8a66\u548c\u8fed\u4ee3\u5305\u542b\u5716\u7247\u7684\u591a\u6a21\u614b\u63d0\u793a\uff0c\u5efa\u8b70\u60a8\u4f7f\u7528 Google Cloud \u63a7\u5236\u6aaf\u3002\u5982\u9700\u4ee5\u7de8\u7a0b\u65b9\u5f0f\u5411\u6a21\u578b\u767c\u9001\u5305\u542b\u5716\u7247\u7684\u591a\u6a21\u614b\u63d0\u793a\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 REST API\u3001Python \u7248 Vertex AI SDK \u6216\u4ee5\u4e0b\u6a19\u7c64\u9801\u4e2d\u986f\u793a\u7684\u5176\u4ed6\u53d7\u652f\u6301\u7684\u5eab\u548c SDK\uff1a\n\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u6216\u66f4\u65b0 Python \u7248 Vertex AI SDK\uff0c\u8acb\u53c3\u95b1 [\u5b89\u88dd Python \u7248 Vertex AI SDK](https://cloud.google.com/vertex-ai/docs/start/use-vertex-ai-python-sdk?hl=zh-cn#install-vertex-ai-python-sdk) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Python \u7248 Vertex AI SDK API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/python/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n### \u6d41\u5f0f\u56de\u7b54\u548c\u975e\u6d41\u5f0f\u56de\u7b54\u60a8\u53ef\u4ee5\u9078\u64c7\u6a21\u578b\u662f\u751f\u6210\u6d41\u5f0f\u56de\u7b54\u9084\u662f\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u6d41\u5f0f\u50b3\u8f38\u6d89\u53ca\u5728\u751f\u6210\u5c0d\u63d0\u793a\u7684\u56de\u7b54\u6642\u63a5\u6536\u9019\u4e9b\u56de\u7b54\u3002\u4e5f\u5c31\u662f\u8aaa\uff0c\u53ea\u8981\u6a21\u578b\u751f\u6210\u8f38\u51fa\u8a5e\u5143\uff0c\u5c31\u6703\u767c\u9001\u9019\u4e9b\u8f38\u51fa\u8a5e\u5143\u3002\u53ea\u6709\u5728\u751f\u6210\u6240\u6709\u8f38\u51fa\u8a5e\u5143\u540e\uff0c\u7e94\u6703\u767c\u9001\u5c0d\u63d0\u793a\u7684\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u5c0d\u65bc\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u4f7f\u7528 [generate_content](https://cloud.google.com/python/docs/reference/aiplatform/latest/vertexai.preview.generative_models?hl=zh-cn#content) \u4e2d\u7684 `stream` \u53c3\u6578\u3002```\n response = model.generate_content(contents=[...], stream = True)\n \n```\u5c0d\u65bc\u975e\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u79fb\u9664\u8a72\u53c3\u6578\u6216\u5c07\u53c3\u6578\u8a2d\u7f6e\u7232 `False` \u3002\n### \u793a\u4f8b\u4ee3\u78bc [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/python-docs-samples/blob/HEAD/generative_ai/gemini_multi_image_example.py) \n```\nimport http.clientimport typingimport urllib.requestfrom vertexai.generative_models import GenerativeModel, Image# create helper functiondef load_image_from_url(image_url: str) -> Image:\u00a0 \u00a0 with urllib.request.urlopen(image_url) as response:\u00a0 \u00a0 \u00a0 \u00a0 response = typing.cast(http.client.HTTPResponse, response)\u00a0 \u00a0 \u00a0 \u00a0 image_bytes = response.read()\u00a0 \u00a0 return Image.from_bytes(image_bytes)# Load images from Cloud Storage URIlandmark1 = load_image_from_url(\u00a0 \u00a0 \"https://storage.googleapis.com/cloud-samples-data/vertex-ai/llm/prompts/landmark1.png\")landmark2 = load_image_from_url(\u00a0 \u00a0 \"https://storage.googleapis.com/cloud-samples-data/vertex-ai/llm/prompts/landmark2.png\")landmark3 = load_image_from_url(\u00a0 \u00a0 \"https://storage.googleapis.com/cloud-samples-data/vertex-ai/llm/prompts/landmark3.png\")# Pass multimodal promptmodel = GenerativeModel(\"gemini-1.0-pro-vision\")response = model.generate_content(\u00a0 \u00a0 [\u00a0 \u00a0 \u00a0 \u00a0 landmark1,\u00a0 \u00a0 \u00a0 \u00a0 \"city: Rome, Landmark: the Colosseum\",\u00a0 \u00a0 \u00a0 \u00a0 landmark2,\u00a0 \u00a0 \u00a0 \u00a0 \"city: Beijing, Landmark: Forbidden City\",\u00a0 \u00a0 \u00a0 \u00a0 landmark3,\u00a0 \u00a0 ])print(response)\n```\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300a\u751f\u6210\u5f0f AI \u5feb\u901f\u5165\u9580\uff1a\u4f7f\u7528 Node.js SDK\u300b](https://cloud.google.com/nodejs/docs/reference/vertexai/latest?hl=zh-cn#before-you-begin) \u4e2d\u7684 Node.js \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u9069\u7528\u65bc Gemini \u7684 Node.js SDK \u53c3\u8003\u6587\u6a94](https://cloud.google.com/nodejs/docs/reference/vertexai/latest?hl=zh-cn) \u3002\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n### \u6d41\u5f0f\u56de\u7b54\u548c\u975e\u6d41\u5f0f\u56de\u7b54\u60a8\u53ef\u4ee5\u9078\u64c7\u6a21\u578b\u662f\u751f\u6210\u6d41\u5f0f\u56de\u7b54\u9084\u662f\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u6d41\u5f0f\u50b3\u8f38\u6d89\u53ca\u5728\u751f\u6210\u5c0d\u63d0\u793a\u7684\u56de\u7b54\u6642\u63a5\u6536\u9019\u4e9b\u56de\u7b54\u3002\u4e5f\u5c31\u662f\u8aaa\uff0c\u53ea\u8981\u6a21\u578b\u751f\u6210\u8f38\u51fa\u8a5e\u5143\uff0c\u5c31\u6703\u767c\u9001\u9019\u4e9b\u8f38\u51fa\u8a5e\u5143\u3002\u53ea\u6709\u5728\u751f\u6210\u6240\u6709\u8f38\u51fa\u8a5e\u5143\u540e\uff0c\u7e94\u6703\u767c\u9001\u5c0d\u63d0\u793a\u7684\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u5c0d\u65bc\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u4f7f\u7528 [generateContentStream](https://cloud.google.com/nodejs/docs/reference/vertexai/latest?hl=zh-cn#streaming-content-generation) \u65b9\u6cd5\u3002```\n const streamingResp = await generativeModel.generateContentStream(request);\n \n```\u5c0d\u65bc\u975e\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u4f7f\u7528 [generateContent](https://cloud.google.com/nodejs/docs/reference/vertexai/latest?hl=zh-cn#content-generation-non-streaming) \u65b9\u6cd5\u3002```\n const streamingResp = await generativeModel.generateContent(request);\n \n```\n### \u793a\u4f8b\u4ee3\u78bc [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/nodejs-docs-samples/blob/HEAD/generative-ai/snippets/sendMultiModalPromptWithImage.js) \n```\nconst {VertexAI} = require('@google-cloud/vertexai');const axios = require('axios');async function getBase64(url) {\u00a0 const image = await axios.get(url, {responseType: 'arraybuffer'});\u00a0 return Buffer.from(image.data).toString('base64');}/**\u00a0* TODO(developer): Update these variables before running the sample.\u00a0*/async function sendMultiModalPromptWithImage(\u00a0 projectId = 'PROJECT_ID',\u00a0 location = 'us-central1',\u00a0 model = 'gemini-1.0-pro-vision') {\u00a0 // For images, the SDK supports base64 strings\u00a0 const landmarkImage1 = await getBase64(\u00a0 \u00a0 'https://storage.googleapis.com/cloud-samples-data/vertex-ai/llm/prompts/landmark1.png'\u00a0 );\u00a0 const landmarkImage2 = await getBase64(\u00a0 \u00a0 'https://storage.googleapis.com/cloud-samples-data/vertex-ai/llm/prompts/landmark2.png'\u00a0 );\u00a0 const landmarkImage3 = await getBase64(\u00a0 \u00a0 'https://storage.googleapis.com/cloud-samples-data/vertex-ai/llm/prompts/landmark3.png'\u00a0 );\u00a0 // Initialize Vertex with your Cloud project and location\u00a0 const vertexAI = new VertexAI({project: projectId, location: location});\u00a0 const generativeVisionModel = vertexAI.getGenerativeModel({\u00a0 \u00a0 model: model,\u00a0 });\u00a0 // Pass multimodal prompt\u00a0 const request = {\u00a0 \u00a0 contents: [\u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 role: 'user',\u00a0 \u00a0 \u00a0 \u00a0 parts: [\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 inlineData: {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 data: landmarkImage1,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 mimeType: 'image/png',\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 text: 'city: Rome, Landmark: the Colosseum',\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 inlineData: {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 data: landmarkImage2,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 mimeType: 'image/png',\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 text: 'city: Beijing, Landmark: Forbidden City',\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 inlineData: {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 data: landmarkImage3,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 mimeType: 'image/png',\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 ],\u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 ],\u00a0 };\u00a0 // Create the response\u00a0 const response = await generativeVisionModel.generateContent(request);\u00a0 // Wait for the response to complete\u00a0 const aggregatedResponse = await response.response;\u00a0 // Select the text from the response\u00a0 const fullTextResponse =\u00a0 \u00a0 aggregatedResponse.candidates[0].content.parts[0].text;\u00a0 console.log(fullTextResponse);}\n```\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300aVertex AI \u5feb\u901f\u5165\u9580\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Java \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u9069\u7528\u65bc Gemini \u7684 Vertex AI Java SDK \u53c3\u8003\u6587\u6a94](https://cloud.google.com/java/docs/reference/google-cloud-vertexai/latest/overview?hl=zh-cn) \u3002\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n### \u6d41\u5f0f\u56de\u7b54\u548c\u975e\u6d41\u5f0f\u56de\u7b54\u60a8\u53ef\u4ee5\u9078\u64c7\u6a21\u578b\u662f\u751f\u6210\u6d41\u5f0f\u56de\u7b54\u9084\u662f\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u6d41\u5f0f\u50b3\u8f38\u6d89\u53ca\u5728\u751f\u6210\u5c0d\u63d0\u793a\u7684\u56de\u7b54\u6642\u63a5\u6536\u9019\u4e9b\u56de\u7b54\u3002\u4e5f\u5c31\u662f\u8aaa\uff0c\u53ea\u8981\u6a21\u578b\u751f\u6210\u8f38\u51fa\u8a5e\u5143\uff0c\u5c31\u6703\u767c\u9001\u9019\u4e9b\u8f38\u51fa\u8a5e\u5143\u3002\u53ea\u6709\u5728\u751f\u6210\u6240\u6709\u8f38\u51fa\u8a5e\u5143\u540e\uff0c\u7e94\u6703\u767c\u9001\u5c0d\u63d0\u793a\u7684\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u5c0d\u65bc\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u4f7f\u7528 [generateContentStream](https://cloud.google.com/java/docs/reference/google-cloud-vertexai/latest/com.google.cloud.vertexai.generativeai.preview.GenerativeModel?hl=zh-cn#com_google_cloud_vertexai_generativeai_preview_GenerativeModel_generateContentStream_com_google_cloud_vertexai_api_Content_) \u65b9\u6cd5\u3002```\n public ResponseStream generateContentStream(Content content)\n \n```\u5c0d\u65bc\u975e\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u4f7f\u7528 [generateContent](https://cloud.google.com/java/docs/reference/google-cloud-vertexai/latest/com.google.cloud.vertexai.generativeai.preview.GenerativeModel?hl=zh-cn#com_google_cloud_vertexai_generativeai_preview_GenerativeModel_generateContent_com_google_cloud_vertexai_api_Content_) \u65b9\u6cd5\u3002```\n public GenerateContentResponse generateContent(Content content)\n \n```\n### \u793a\u4f8b\u4ee3\u78bc [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/java-docs-samples/blob/HEAD/vertexai/snippets/src/main/java/vertexai/gemini/MultimodalMultiImage.java) \n```\nimport com.google.cloud.vertexai.VertexAI;import com.google.cloud.vertexai.api.Content;import com.google.cloud.vertexai.api.GenerateContentResponse;import com.google.cloud.vertexai.generativeai.ContentMaker;import com.google.cloud.vertexai.generativeai.GenerativeModel;import com.google.cloud.vertexai.generativeai.PartMaker;import com.google.cloud.vertexai.generativeai.ResponseHandler;import java.io.ByteArrayOutputStream;import java.io.IOException;import java.io.InputStream;import java.net.HttpURLConnection;import java.net.URL;public class MultimodalMultiImage {\u00a0 public static void main(String[] args) throws IOException {\u00a0 \u00a0 // TODO(developer): Replace these variables before running the sample.\u00a0 \u00a0 String projectId = \"your-google-cloud-project-id\";\u00a0 \u00a0 String location = \"us-central1\";\u00a0 \u00a0 String modelName = \"gemini-1.0-pro-vision\";\u00a0 \u00a0 multimodalMultiImage(projectId, location, modelName);\u00a0 }\u00a0 // Generates content from multiple input images.\u00a0 public static void multimodalMultiImage(String projectId, String location, String modelName)\u00a0 \u00a0 \u00a0 throws IOException {\u00a0 \u00a0 // Initialize client that will be used to send requests. This client only needs\u00a0 \u00a0 // to be created once, and can be reused for multiple requests.\u00a0 \u00a0 try (VertexAI vertexAI = new VertexAI(projectId, location)) {\u00a0 \u00a0 \u00a0 GenerativeModel model = new GenerativeModel(modelName, vertexAI);\u00a0 \u00a0 \u00a0 Content content = ContentMaker.fromMultiModalData(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 PartMaker.fromMimeTypeAndData(\"image/png\", readImageFile(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"https://storage.googleapis.com/cloud-samples-data/vertex-ai/llm/prompts/landmark1.png\")),\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"city: Rome, Landmark: the Colosseum\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 PartMaker.fromMimeTypeAndData(\"image/png\", readImageFile(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"https://storage.googleapis.com/cloud-samples-data/vertex-ai/llm/prompts/landmark2.png\")),\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"city: Beijing, Landmark: Forbidden City\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 PartMaker.fromMimeTypeAndData(\"image/png\", readImageFile(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"https://storage.googleapis.com/cloud-samples-data/vertex-ai/llm/prompts/landmark3.png\"))\u00a0 \u00a0 \u00a0 );\u00a0 \u00a0 \u00a0 GenerateContentResponse response = model.generateContent(content);\u00a0 \u00a0 \u00a0 String output = ResponseHandler.getText(response);\u00a0 \u00a0 \u00a0 System.out.println(output);\u00a0 \u00a0 }\u00a0 }\u00a0 // Reads the image data from the given URL.\u00a0 public static byte[] readImageFile(String url) throws IOException {\u00a0 \u00a0 URL urlObj = new URL(url);\u00a0 \u00a0 HttpURLConnection connection = (HttpURLConnection) urlObj.openConnection();\u00a0 \u00a0 connection.setRequestMethod(\"GET\");\u00a0 \u00a0 int responseCode = connection.getResponseCode();\u00a0 \u00a0 if (responseCode == HttpURLConnection.HTTP_OK) {\u00a0 \u00a0 \u00a0 InputStream inputStream = connection.getInputStream();\u00a0 \u00a0 \u00a0 ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\u00a0 \u00a0 \u00a0 byte[] buffer = new byte[1024];\u00a0 \u00a0 \u00a0 int bytesRead;\u00a0 \u00a0 \u00a0 while ((bytesRead = inputStream.read(buffer)) != -1) {\u00a0 \u00a0 \u00a0 \u00a0 outputStream.write(buffer, 0, bytesRead);\u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 return outputStream.toByteArray();\u00a0 \u00a0 } else {\u00a0 \u00a0 \u00a0 throw new RuntimeException(\"Error fetching file: \" + responseCode);\u00a0 \u00a0 }\u00a0 }}\n```\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300aVertex AI \u5feb\u901f\u5165\u9580\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Go \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u9069\u7528\u65bc Gemini \u7684 Vertex AI Go SDK \u53c3\u8003\u6587\u6a94](https://cloud.google.com/go/docs/reference/cloud.google.com/go/vertexai/latest?hl=zh-cn) \u3002\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n### \u6d41\u5f0f\u56de\u7b54\u548c\u975e\u6d41\u5f0f\u56de\u7b54\u60a8\u53ef\u4ee5\u9078\u64c7\u6a21\u578b\u662f\u751f\u6210\u6d41\u5f0f\u56de\u7b54\u9084\u662f\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u6d41\u5f0f\u50b3\u8f38\u6d89\u53ca\u5728\u751f\u6210\u5c0d\u63d0\u793a\u7684\u56de\u7b54\u6642\u63a5\u6536\u9019\u4e9b\u56de\u7b54\u3002\u4e5f\u5c31\u662f\u8aaa\uff0c\u53ea\u8981\u6a21\u578b\u751f\u6210\u8f38\u51fa\u8a5e\u5143\uff0c\u5c31\u6703\u767c\u9001\u9019\u4e9b\u8f38\u51fa\u8a5e\u5143\u3002\u53ea\u6709\u5728\u751f\u6210\u6240\u6709\u8f38\u51fa\u8a5e\u5143\u540e\uff0c\u7e94\u6703\u767c\u9001\u5c0d\u63d0\u793a\u7684\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u5c0d\u65bc\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u4f7f\u7528 [GenerateContentStream](https://pkg.go.dev/cloud.google.com/go/vertexai/genai#GenerativeModel.GenerateContentStream) \u65b9\u6cd5\u3002```\n iter := model.GenerateContentStream(ctx, genai.Text(\"Tell me a story about a lumberjack and his giant ox. Keep it very short.\"))\n \n```\u5c0d\u65bc\u975e\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u4f7f\u7528 [GenerateContent](https://pkg.go.dev/cloud.google.com/go/vertexai/genai#GenerativeModel.GenerateContent) \u65b9\u6cd5\u3002```\n resp, err := model.GenerateContent(ctx, genai.Text(\"What is the average size of a swallow?\"))\n \n```\n### \u793a\u4f8b\u4ee3\u78bc [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/golang-samples/blob/HEAD/vertexai/multimodal-multiple/multiple-multimodal.go) \n```\nimport (\u00a0 \u00a0 \u00a0 \u00a0 \"context\"\u00a0 \u00a0 \u00a0 \u00a0 \"fmt\"\u00a0 \u00a0 \u00a0 \u00a0 \"io\"\u00a0 \u00a0 \u00a0 \u00a0 \"log\"\u00a0 \u00a0 \u00a0 \u00a0 \"net/http\"\u00a0 \u00a0 \u00a0 \u00a0 \"net/url\"\u00a0 \u00a0 \u00a0 \u00a0 \"os\"\u00a0 \u00a0 \u00a0 \u00a0 \"strings\"\u00a0 \u00a0 \u00a0 \u00a0 \"cloud.google.com/go/vertexai/genai\")func main() {\u00a0 \u00a0 \u00a0 \u00a0 projectID := os.Getenv(\"GOOGLE_CLOUD_PROJECT\")\u00a0 \u00a0 \u00a0 \u00a0 location := \"us-central1\"\u00a0 \u00a0 \u00a0 \u00a0 modelName := \"gemini-1.0-pro-vision\"\u00a0 \u00a0 \u00a0 \u00a0 temperature := 0.4\u00a0 \u00a0 \u00a0 \u00a0 if projectID == \"\" {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 log.Fatal(\"require environment variable GOOGLE_CLOUD_PROJECT\")\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 // construct this multimodal prompt:\u00a0 \u00a0 \u00a0 \u00a0 // [image of colosseum] city: Rome, Landmark: the Colosseum\u00a0 \u00a0 \u00a0 \u00a0 // [image of forbidden city] \u00a0city: Beijing, Landmark: the Forbidden City\u00a0 \u00a0 \u00a0 \u00a0 // [new image]\u00a0 \u00a0 \u00a0 \u00a0 // create prompt image parts\u00a0 \u00a0 \u00a0 \u00a0 // colosseum\u00a0 \u00a0 \u00a0 \u00a0 colosseum, err := partFromImageURL(\"https://storage.googleapis.com/cloud-samples-data/vertex-ai/llm/prompts/landmark1.png\")\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 log.Fatalf(\"unable to read image: %v\", err)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 // forbidden city\u00a0 \u00a0 \u00a0 \u00a0 forbiddenCity, err := partFromImageURL(\"https://storage.googleapis.com/cloud-samples-data/vertex-ai/llm/prompts/landmark2.png\")\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 log.Fatalf(\"unable to read image: %v\", err)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 // new image\u00a0 \u00a0 \u00a0 \u00a0 newImage, err := partFromImageURL(\"https://storage.googleapis.com/cloud-samples-data/vertex-ai/llm/prompts/landmark3.png\")\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 log.Fatalf(\"unable to read image: %v\", err)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 // create a multimodal (multipart) prompt\u00a0 \u00a0 \u00a0 \u00a0 prompt := []genai.Part{\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 colosseum,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 genai.Text(\"city: Rome, Landmark: the Colosseum \"),\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 forbiddenCity,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 genai.Text(\"city: Beijing, Landmark: the Forbidden City \"),\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 newImage,\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 // generate the response\u00a0 \u00a0 \u00a0 \u00a0 err = generateMultimodalContent(os.Stdout, prompt, projectID, location, modelName, float32(temperature))\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 log.Fatalf(\"unable to generate: %v\", err)\u00a0 \u00a0 \u00a0 \u00a0 }}// generateMultimodalContent provide a generated response using multimodal inputfunc generateMultimodalContent(w io.Writer, parts []genai.Part, projectID, location, modelName string, temperature float32) error {\u00a0 \u00a0 \u00a0 \u00a0 ctx := context.Background()\u00a0 \u00a0 \u00a0 \u00a0 client, err := genai.NewClient(ctx, projectID, location)\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 log.Fatal(err)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 defer client.Close()\u00a0 \u00a0 \u00a0 \u00a0 model := client.GenerativeModel(modelName)\u00a0 \u00a0 \u00a0 \u00a0 model.SetTemperature(temperature)\u00a0 \u00a0 \u00a0 \u00a0 res, err := model.GenerateContent(ctx, parts...)\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return fmt.Errorf(\"unable to generate contents: %v\", err)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 fmt.Fprintf(w, \"generated response: %s\\n\", res.Candidates[0].Content.Parts[0])\u00a0 \u00a0 \u00a0 \u00a0 return nil}// partFromImageURL create a multimodal prompt part from an image URLfunc partFromImageURL(image string) (genai.Part, error) {\u00a0 \u00a0 \u00a0 \u00a0 var img genai.Blob\u00a0 \u00a0 \u00a0 \u00a0 imageURL, err := url.Parse(image)\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return img, err\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 res, err := http.Get(image)\u00a0 \u00a0 \u00a0 \u00a0 if err != nil || res.StatusCode != 200 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return img, err\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 defer res.Body.Close()\u00a0 \u00a0 \u00a0 \u00a0 data, err := io.ReadAll(res.Body)\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return img, fmt.Errorf(\"unable to read from http: %v\", err)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 position := strings.LastIndex(imageURL.Path, \".\")\u00a0 \u00a0 \u00a0 \u00a0 if position == -1 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return img, fmt.Errorf(\"couldn't find a period to indicate a file extension\")\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 ext := imageURL.Path[position+1:]\u00a0 \u00a0 \u00a0 \u00a0 img = genai.ImageData(ext, data)\u00a0 \u00a0 \u00a0 \u00a0 return img, nil}\n```\u60a8\u53ef\u4ee5\u4f7f\u7528 REST \u6e2c\u8a66\u6587\u672c\u63d0\u793a\uff0c\u65b9\u6cd5\u662f\u4f7f\u7528 Vertex AI API \u5411\u767c\u4f48\u8005\u6a21\u578b\u7aef\u9ede\u767c\u9001 POST \u8acb\u6c42\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a\u60a8\u5e0c\u671b\u6a21\u578b\u751f\u6210\u7684\u56de\u7b54\u985e\u578b\u3002\u9078\u64c7\u4e00\u7a2e\u65b9\u6cd5\u4f86\u751f\u6210\u60a8\u5e0c\u671b\u8fd4\u56de\u6a21\u578b\u56de\u7b54\u7684\u65b9\u5f0f\uff1a- `streamGenerateContent`\uff1a\u5728\u751f\u6210\u56de\u7b54\u6642\u9032\u884c\u6d41\u5f0f\u50b3\u8f38\uff0c\u4ee5\u964d\u4f4e\u771f\u4eba\u53d7\u8846\u7fa3\u9ad4\u5c0d\u65bc\u5ef6\u9072\u7684\u611f\u77e5\u5ea6\u3002\n- `generateContent`\uff1a\u56de\u7b54\u5728\u5b8c\u5168\u751f\u6210\u5f8c\u8fd4\u56de\u3002\n- \uff1a\u8655\u7406\u8acb\u6c42\u7684\u5340\u57df\u3002\u53ef\u7528\u7684\u9078\u9805\u5305\u62ec\uff1a\n- \uff1a\u60a8\u7684 [\u9805\u76ee ID](https://cloud.google.com/resource-manager/docs/creating-managing-projects?hl=zh-cn#identifiers) \u3002\n- \uff1a\u60a8\u8981\u4f7f\u7528\u7684\u591a\u6a21\u614b\u6a21\u578b ID\u3002\u9078\u9805\u5305\u62ec\uff1a- `gemini-1.0-pro-vision`\n- \uff1a\u8207\u5167\u5bb9\u95dc\u806f\u7684\u5c0d\u8a71\u4e2d\u7684\u89d2\u8272\u3002\u5373\u4f7f\u5728\u55ae\u8f2a\u61c9\u7528\u5834\u666f\u4e2d\uff0c\u4e5f\u9700\u8981\u6307\u5b9a\u89d2\u8272\u3002 \u53ef\u63a5\u53d7\u7684\u503c\u5305\u62ec\uff1a- `USER`\uff1a\u6307\u5b9a\u7531\u60a8\u767c\u9001\u7684\u5167\u5bb9\u3002- \uff1a\u8981\u5305\u542b\u5728\u63d0\u793a\u4e2d\u7684\u6587\u672c\u8aaa\u660e\u3002\n- \uff1a\u8981\u5728\u63d0\u793a\u4e2d\u5305\u542b\u5167\u5d4c\u7684\u5716\u7247\u6216\u8996\u983b\u7684 [base64 \u7de8\u78bc](https://cloud.google.com/vertex-ai/generative-ai/docs/image/base64-encode?hl=zh-cn) \u3002\u6dfb\u52a0\u5a92\u9ad4\u5167\u5d4c\u6642\uff0c\u60a8\u9084\u5fc5\u9808\u6307\u5b9a\u3002\n- \uff1a\u8981\u5305\u542b\u5728\u63d0\u793a\u4e2d\u7684\u5716\u7247\u6216\u8996\u983b\u7684 Cloud Storage URI\u3002\u5b58\u5132\u8a72\u6587\u4ef6\u7684\u5b58\u5132\u6876\u5fc5\u9808\u4f4d\u65bc\u767c\u9001\u8acb\u6c42\u7684 Google Cloud \u9805\u76ee\u4e2d\u3002\u60a8\u9084\u5fc5\u9808\u6307\u5b9a\u3002\n- \uff1a\u5728`data`\u6216`fileUri`\u5b57\u6bb5\u4e2d\u6307\u5b9a\u7684\u5716\u7247\u6216\u8996\u983b\u7684\u5a92\u9ad4\u985e\u578b\u3002\u53ef\u63a5\u53d7\u7684\u503c\u5305\u62ec\uff1a\n- \uff1a\u8981\u7232\u5176\u914d\u7f6e\u95be\u503c\u7684\u5b89\u5168\u985e\u5225\u3002\u53ef\u63a5\u53d7\u7684\u503c\u5305\u62ec\uff1a\n- \uff1a\u57fa\u65bc\u6982\u7387\u963b\u6b62\u5c6c\u65bc\u6307\u5b9a\u5b89\u5168\u985e\u5225\u7684\u97ff\u61c9\u7684\u95be\u503c\u3002\u53ef\u63a5\u53d7\u7684\u503c\u5305\u62ec\uff1a`BLOCK_LOW_AND_ABOVE`\u5c4f\u853d\u5f97\u6700\u591a\uff0c\u800c`BLOCK_ONLY_HIGH`\u5c4f\u853d\u5f97\u6700\u5c11\u3002\n- \uff1a\u6eab\u5ea6 (temperature) \u5728\u751f\u6210\u56de\u8986\u671f\u9593\u7528\u65bc\u63a1\u6a23\uff0c\u5728\u61c9\u7528`topP`\u548c`topK`\u6642\u6703\u751f\u6210\u56de\u8986\u3002\u6eab\u5ea6\u53ef\u4ee5\u63a7\u5236\u8a5e\u5143\u9078\u64c7\u7684\u96a8\u6a5f\u6027\u3002 \u8f03\u4f4e\u7684\u6eab\u5ea6\u6709\u5229\u65bc\u9700\u8981\u66f4\u5c11\u958b\u653e\u6027\u6216\u5275\u9020\u6027\u56de\u8986\u7684\u63d0\u793a\uff0c\u800c\u8f03\u9ad8\u7684\u6eab\u5ea6\u53ef\u4ee5\u5e36\u4f86\u66f4\u5177\u591a\u6a23\u6027\u6216\u5275\u9020\u6027\u7684\u7d50\u679c\u3002\u6eab\u5ea6\u7232`0`\u8868\u793a\u59cb\u7d42\u9078\u64c7\u6982\u7387\u6700\u9ad8\u7684\u8a5e\u5143\u3002\u5728\u9019\u7a2e\u60c5\u6cc1\u4e0b\uff0c\u7d66\u5b9a\u63d0\u793a\u7684\u56de\u8986\u5927\u591a\u662f\u78ba\u5b9a\u7684\uff0c\u4f46\u53ef\u80fd\u4ecd\u7136\u6709\u5c11\u91cf\u8b8a\u5316\u3002\u5982\u679c\u6a21\u578b\u8fd4\u56de\u7684\u56de\u7b54\u904e\u65bc\u7c60\u7d71\u3001\u904e\u65bc\u7c21\u77ed\uff0c\u6216\u8005\u6a21\u578b\u7d66\u51fa\u5f8c\u5099\u56de\u7b54\uff0c\u8acb\u5617\u8a66\u63d0\u9ad8\u6eab\u5ea6\u3002\n- \uff1aTop-P \u53ef\u66f4\u6539\u6a21\u578b\u9078\u64c7\u8f38\u51fa\u8a5e\u5143\u7684\u65b9\u5f0f\u3002\u7cfb\u7d71\u6703\u6309\u7167\u6982\u7387\u5f9e\u6700\u9ad8\uff08\u898b top-K\uff09\u5230\u6700\u4f4e\u7684\u9806\u5e8f\u9078\u64c7\u8a5e\u5143\uff0c\u76f4\u5230\u6240\u9078\u8a5e\u5143\u7684\u6982\u7387\u7e3d\u548c\u7b49\u65bc top-P \u7684\u503c\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8a5e\u5143 A\u3001B \u548c C \u7684\u6982\u7387\u5206\u5225\u7232 0.3\u30010.2 \u548c 0.1\uff0c\u4e26\u4e14 top-P \u503c\u7232`0.5`\uff0c\u5247\u6a21\u578b\u5c07\u9078\u64c7 A \u6216 B \u4f5c\u7232\u4e0b\u4e00\u500b\u8a5e\u5143\uff08\u901a\u904e\u6eab\u5ea6\u78ba\u5b9a\uff09\uff0c\u4e26\u6703\u6392\u9664 C\uff0c\u5c07\u5176\u4f5c\u7232\u5019\u9078\u8a5e\u5143\u3002\u6307\u5b9a\u8f03\u4f4e\u7684\u503c\u53ef\u7372\u5f97\u96a8\u6a5f\u7a0b\u5ea6\u8f03\u4f4e\u7684\u56de\u7b54\uff0c\u6307\u5b9a\u8f03\u9ad8\u7684\u503c\u53ef\u7372\u5f97\u96a8\u6a5f\u7a0b\u5ea6\u8f03\u9ad8\u7684\u56de\u7b54\u3002\n- \uff1aTop-K \u53ef\u66f4\u6539\u6a21\u578b\u9078\u64c7\u8f38\u51fa\u8a5e\u5143\u7684\u65b9\u5f0f\u3002\u5982\u679c top-K \u8a2d\u7232`1`\uff0c\u8868\u793a\u6240\u9078\u8a5e\u5143\u662f\u6a21\u578b\u8a5e\u5f59\u8868\u7684\u6240\u6709\u8a5e\u5143\u4e2d\u6982\u7387\u6700\u9ad8\u7684\u8a5e\u5143\uff08\u4e5f\u7a31\u7232\u8caa\u5fc3\u89e3\u78bc\uff09\u3002\u5982\u679c top-K \u8a2d\u7232`3`\uff0c\u5247\u8868\u793a\u7cfb\u7d71\u5c07\u5f9e 3 \u500b\u6982\u7387\u6700\u9ad8\u7684\u8a5e\u5143\uff08\u901a\u904e\u6eab\u5ea6\u78ba\u5b9a\uff09\u4e2d\u9078\u64c7\u4e0b\u4e00\u500b\u8a5e\u5143\u3002\u5728\u6bcf\u500b\u8a5e\u5143\u9078\u64c7\u6b65\u9a5f\u4e2d\uff0c\u7cfb\u7d71\u90fd\u6703\u5c0d\u6982\u7387\u6700\u9ad8\u7684 top-K \u8a5e\u5143\u9032\u884c\u63a1\u6a23\u3002\u7136\u5f8c\uff0c\u7cfb\u7d71\u6703\u6839\u64da top-P \u9032\u4e00\u6b65\u904e\u6ffe\u8a5e\u5143\uff0c\u4e26\u4f7f\u7528\u6eab\u5ea6\u63a1\u6a23\u9078\u64c7\u6700\u7d42\u7684\u8a5e\u5143\u3002\u6307\u5b9a\u8f03\u4f4e\u7684\u503c\u53ef\u7372\u5f97\u96a8\u6a5f\u7a0b\u5ea6\u8f03\u4f4e\u7684\u56de\u7b54\uff0c\u6307\u5b9a\u8f03\u9ad8\u7684\u503c\u53ef\u7372\u5f97\u96a8\u6a5f\u7a0b\u5ea6\u8f03\u9ad8\u7684\u56de\u7b54\u3002\n- \uff1a\u97ff\u61c9\u4e2d\u53ef\u751f\u6210\u7684\u8a5e\u5143\u6578\u91cf\u4e0a\u9650\u3002\u8a5e\u5143\u7d04\u7232 4 \u500b\u5b57\u7b26\u3002100 \u500b\u8a5e\u5143\u5c0d\u61c9\u5927\u7d04 60-80 \u500b\u55ae\u8a5e\u3002\u6307\u5b9a\u8f03\u4f4e\u7684\u503c\u53ef\u7372\u5f97\u8f03\u77ed\u7684\u56de\u8986\uff0c\u6307\u5b9a\u8f03\u9ad8\u7684\u503c\u53ef\u7372\u5f97\u53ef\u80fd\u8f03\u9577\u7684\u56de\u8986\u3002\n- \uff1a \u6307\u5b9a\u4e00\u500b\u5b57\u7b26\u4e32\u5217\u8868\uff0c\u544a\u77e5\u6a21\u578b\u5728\u97ff\u61c9\u4e2d\u9047\u5230\u5176\u4e2d\u4e00\u500b\u5b57\u7b26\u4e32\u6642\uff0c\u505c\u6b62\u751f\u6210\u6587\u672c\u3002\u5982\u679c\u67d0\u500b\u5b57\u7b26\u4e32\u5728\u97ff\u61c9\u4e2d\u591a\u6b21\u51fa\u73fe\uff0c\u5247\u97ff\u61c9\u6703\u5728\u9996\u6b21\u51fa\u73fe\u7684\u4f4d\u7f6e\u622a\u65b7\u3002\u5b57\u7b26\u4e32\u5340\u5206\u5927\u5c0f\u5beb\u3002\u4f8b\u5982\uff0c\u672a\u6307\u5b9a`stopSequences`\u6642\uff0c\u5982\u679c\u4e0b\u9762\u7684\u5167\u5bb9\u662f\u8fd4\u56de\u7684\u56de\u8986\uff1a`public static string reverse(string myString)`\u5247\u8fd4\u56de\u7684\u56de\u8986\u7232\u4ee5\u4e0b\u5167\u5bb9\uff0c\u5176\u4e2d`stopSequences`\u8a2d\u7f6e\u7232`[\"Str\", \"reverse\"]`\uff1a`public static string`\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nPOST https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/publishers/google/models/MODEL_ID:GENERATE_RESPONSE_METHOD\n```\n\u8acb\u6c42 JSON \u6b63\u6587\uff1a\n```\n{\n \"contents\": {\n \"role\": \"ROLE\",\n \"parts\": [  {\n  \"inlineDATA\": {\n   \"mimeType\": \"MIME_TYPE\",\n   \"data\": \"B64_BASE_IMAGE\"\n  }\n  },\n  {\n  \"fileData\": {\n   \"mimeType\": \"MIME_TYPE\",\n   \"fileUri\": \"FILE_URI\"\n  }\n  },\n  {\n  \"text\": \"TEXT\"\n  }\n ]\n },\n \"safety_settings\": {\n \"category\": \"SAFETY_CATEGORY\",\n \"threshold\": \"THRESHOLD\"\n },\n \"generation_config\": {\n \"temperature\": TEMPERATURE,\n \"topP\": TOP_P,\n \"topK\": TOP_K,\n \"candidateCount\": 1,\n \"maxOutputTokens\": MAX_OUTPUT_TOKENS,\n \"stopSequences\": STOP_SEQUENCES,\n }\n}\n```\n\u5982\u9700\u767c\u9001\u8acb\u6c42\uff0c\u8acb\u9078\u64c7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\uff1a\n **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/publishers/google/models/MODEL_ID:GENERATE_RESPONSE_METHOD\"\n``` **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/publishers/google/models/MODEL_ID:GENERATE_RESPONSE_METHOD\" | Select-Object -Expand Content\n```\n\u60a8\u61c9\u8a72\u6536\u5230\u985e\u4f3c\u4ee5\u4e0b\u5167\u5bb9\u7684 JSON \u97ff\u61c9\u3002```\nLOCATION=\"us-central1\"MODEL_ID=\"gemini-1.0-pro-vision\"PROJECT_ID=\"test-project\"curl \\-X POST \\-H \"Authorization: Bearer $(gcloud auth application-default print-access-token)\" \\-H \"Content-Type: application/json\"https://${LOCATION}-aiplatform.googleapis.com/v1/projects/${PROJECT_ID}/locations/${LOCATION}/publishers/google/models/${MODEL_ID}:${GENERATE_RESPONSE_METHOD} -d \\$'{\u00a0 \"contents\": {\u00a0 \u00a0 \"role\": \"user\",\u00a0 \u00a0 \"parts\": [\u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \"fileData\": {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"mimeType\": \"image/png\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"fileUri\": \"gs://my-bucket/images/cat.png\"\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \"text\": \"Describe this picture.\"\u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 ]\u00a0 },\u00a0 \"safety_settings\": {\u00a0 \u00a0 \"category\": \"HARM_CATEGORY_SEXUALLY_EXPLICIT\",\u00a0 \u00a0 \"threshold\": \"BLOCK_LOW_AND_ABOVE\"\u00a0 },\u00a0 \"generation_config\": {\u00a0 \u00a0 \"temperature\": 0.4,\u00a0 \u00a0 \"topP\": 1,\u00a0 \u00a0 \"topK\": 32,\u00a0 \u00a0 \"maxOutputTokens\": 2048,\u00a0 }}'\n```\u5982\u9700\u4f7f\u7528 Google Cloud \u63a7\u5236\u6aaf\u767c\u9001\u591a\u6a21\u614b\u63d0\u793a\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a- \u5728 Google Cloud \u63a7\u5236\u6aaf\u7684\u201c\u751f\u6210\u5f0f AI\u201d\u90e8\u5206\uff0c\u9032\u5165 **Vertex AI Studio** \u9801\u9762\u3002 [\u9032\u5165 Vertex AI Studio](https://console.cloud.google.com/vertex-ai/generative/multimodal?hl=zh-cn) \n- \u5728 **\u63d0\u793a\u8a2d\u8a08\uff08\u55ae\u8f2a\uff09** \u4e0b\uff0c\u9ede\u64ca **\u6253\u958b** \u3002\n- \u914d\u7f6e\u6a21\u578b\u548c\u53c3\u6578\uff1a- **\u5340\u57df** \uff1a\u9078\u64c7\u60a8\u8981\u4f7f\u7528\u7684\u5340\u57df\u3002\n- **\u6a21\u578b** \uff1a\u9078\u64c7 **Gemini Pro Vision** \u3002\n- **\u6eab\u5ea6** \uff1a\u4f7f\u7528\u6ed1\u584a\u6216\u6587\u672c\u6846\u8f38\u5165\u6eab\u5ea6\u503c\u3002\u6eab\u5ea6 (temperature) \u5728\u751f\u6210\u56de\u8986\u671f\u9593\u7528\u65bc\u63a1\u6a23\uff0c\u5728\u61c9\u7528`topP`\u548c`topK`\u6642\u6703\u751f\u6210\u56de\u8986\u3002\u6eab\u5ea6\u53ef\u4ee5\u63a7\u5236\u8a5e\u5143\u9078\u64c7\u7684\u96a8\u6a5f\u6027\u3002 \u8f03\u4f4e\u7684\u6eab\u5ea6\u6709\u5229\u65bc\u9700\u8981\u66f4\u5c11\u958b\u653e\u6027\u6216\u5275\u9020\u6027\u56de\u8986\u7684\u63d0\u793a\uff0c\u800c\u8f03\u9ad8\u7684\u6eab\u5ea6\u53ef\u4ee5\u5e36\u4f86\u66f4\u5177\u591a\u6a23\u6027\u6216\u5275\u9020\u6027\u7684\u7d50\u679c\u3002\u6eab\u5ea6\u7232`0`\u8868\u793a\u59cb\u7d42\u9078\u64c7\u6982\u7387\u6700\u9ad8\u7684\u8a5e\u5143\u3002\u5728\u9019\u7a2e\u60c5\u6cc1\u4e0b\uff0c\u7d66\u5b9a\u63d0\u793a\u7684\u56de\u8986\u5927\u591a\u662f\u78ba\u5b9a\u7684\uff0c\u4f46\u53ef\u80fd\u4ecd\u7136\u6709\u5c11\u91cf\u8b8a\u5316\u3002\u5982\u679c\u6a21\u578b\u8fd4\u56de\u7684\u56de\u7b54\u904e\u65bc\u7c60\u7d71\u3001\u904e\u65bc\u7c21\u77ed\uff0c\u6216\u8005\u6a21\u578b\u7d66\u51fa\u5f8c\u5099\u56de\u7b54\uff0c\u8acb\u5617\u8a66\u63d0\u9ad8\u6eab\u5ea6\u3002\n- **\u8a5e\u5143\u4e0a\u9650** \uff1a\u4f7f\u7528\u6ed1\u584a\u6216\u6587\u672c\u6846\u8f38\u5165\u8f38\u51fa\u4e0a\u9650\u503c\u3002\u56de\u7b54\u4e2d\u53ef\u751f\u6210\u7684\u8a5e\u5143\u6578\u91cf\u4e0a\u9650\u3002\u8a5e\u5143\u7d04\u7232 4 \u500b\u5b57\u7b26\u3002100 \u500b\u8a5e\u5143\u5c0d\u61c9\u5927\u7d04 60-80 \u500b\u55ae\u8a5e\u3002\u6307\u5b9a\u8f03\u4f4e\u7684\u503c\u53ef\u7372\u5f97\u8f03\u77ed\u7684\u56de\u8986\uff0c\u6307\u5b9a\u8f03\u9ad8\u7684\u503c\u53ef\u7372\u5f97\u53ef\u80fd\u8f03\u9577\u7684\u56de\u8986\u3002\n- **\u6dfb\u52a0\u505c\u6b62\u5e8f\u5217** \uff1a\u8f38\u5165\u505c\u6b62\u5e8f\u5217\uff0c\u5373\u6a21\u578b\u9047\u5230\u6642\u505c\u6b62\u56de\u8986\u7684\u4e00\u7cfb\u5217\u5b57\u7b26\uff08\u5305\u62ec\u7a7a\u683c\uff09\u3002\u8a72\u5e8f\u5217\u4e0d\u5305\u542b\u5728\u56de\u8986\u4e2d\u3002\u60a8\u6700\u591a\u53ef\u4ee5\u6dfb\u52a0\u4e94\u500b\u505c\u6b62\u5e8f\u5217\u3002- \u53ef\u9078\uff1a\u5982\u9700\u914d\u7f6e\u9ad8\u7d1a\u53c3\u6578\uff0c\u8acb\u9ede\u64ca **\u9ad8\u7d1a** \uff0c\u7136\u5f8c\u6309\u5982\u4e0b\u65b9\u5f0f\u9032\u884c\u914d\u7f6e\uff1a\n- Google Cloud \u63a7\u5236\u6aaf\u50c5\u652f\u6301\u6d41\u5f0f\u50b3\u8f38\uff0c\u6d89\u53ca\u5728\u751f\u6210\u5c0d\u63d0\u793a\u7684\u56de\u7b54\u6642\u63a5\u6536\u9019\u4e9b\u56de\u7b54\u3002\u60a8\u73fe\u5728\u53ef\u4ee5\u5728\u6d88\u606f\u6846\u4e2d\u8f38\u5165\u6d88\u606f\uff0c\u4ee5\u958b\u59cb\u8207\u6a21\u578b\u5c0d\u8a71\u3002\u96a8\u5f8c\uff0c\u6a21\u578b\u6703\u4f7f\u7528\u4e4b\u524d\u7684\u6d88\u606f\u4f5c\u7232\u65b0\u56de\u8986\u7684\u8a9e\u5883\u3002\u5982\u9700\u5728\u63d0\u793a\u4e2d\u6dfb\u52a0\u5716\u7247\u6216\u8996\u983b\uff0c\u8acb\u9ede\u64ca add_photo_alternate \u5716\u6a19\u3002\u5982\u9700\u77ad\u89e3\u591a\u6a21\u614b\u63d0\u793a\uff0c\u8acb\u53c3\u95b1 [\u8a2d\u8a08\u591a\u6a21\u614b\u63d0\u793a](https://cloud.google.com/vertex-ai/generative-ai/docs/multimodal/design-multimodal-prompts?hl=zh-cn) \u3002\n- \u53ef\u9078\uff1a\u5982\u9700\u5c07\u63d0\u793a\u4fdd\u5b58\u5230 **\u6211\u7684\u63d0\u793a** \uff0c\u8acb\u9ede\u64casave_alt **\u4fdd\u5b58** \u3002\n- \u53ef\u9078\uff1a\u5982\u9700\u7372\u53d6\u63d0\u793a\u7684 Python \u4ee3\u78bc\u6216 curl \u547d\u4ee4\uff0c\u8acb\u9ede\u64cacode **\u7372\u53d6\u4ee3\u78bc** \u3002\n- \u53ef\u9078\uff1a\u5982\u9700\u6e05\u9664\u4e4b\u524d\u7684\u6240\u6709\u6d88\u606f\uff0c\u8acb\u9ede\u64cadelete **\u6e05\u9664\u5c0d\u8a71**\n## \u767c\u9001\u5305\u542b\u8996\u983b\u7684\u591a\u6a21\u614b\u63d0\u793a\u8acb\u6c42\n\u5982\u9700\u6e2c\u8a66\u548c\u8fed\u4ee3\u591a\u6a21\u614b\u63d0\u793a\uff0c\u6211\u5011\u5efa\u8b70\u4f7f\u7528 Google Cloud \u63a7\u5236\u6aaf\u3002\u5982\u9700\u4ee5\u7de8\u7a0b\u65b9\u5f0f\u5411\u6a21\u578b\u767c\u9001\u5305\u542b\u8996\u983b\u7684\u591a\u6a21\u614b\u63d0\u793a\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 REST API\u3001Python \u7248 Vertex AI SDK \u6216\u4ee5\u4e0b\u6a19\u7c64\u9801\u4e2d\u986f\u793a\u7684\u5176\u4ed6\u53d7\u652f\u6301\u7684\u5eab\u548c SDK\uff1a\n\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u6216\u66f4\u65b0 Python \u7248 Vertex AI SDK\uff0c\u8acb\u53c3\u95b1 [\u5b89\u88dd Python \u7248 Vertex AI SDK](https://cloud.google.com/vertex-ai/docs/start/use-vertex-ai-python-sdk?hl=zh-cn#install-vertex-ai-python-sdk) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Python \u7248 Vertex AI SDK API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/python/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n### \u6d41\u5f0f\u56de\u7b54\u548c\u975e\u6d41\u5f0f\u56de\u7b54\u60a8\u53ef\u4ee5\u9078\u64c7\u6a21\u578b\u662f\u751f\u6210\u6d41\u5f0f\u56de\u7b54\u9084\u662f\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u6d41\u5f0f\u50b3\u8f38\u6d89\u53ca\u5728\u751f\u6210\u5c0d\u63d0\u793a\u7684\u56de\u7b54\u6642\u63a5\u6536\u9019\u4e9b\u56de\u7b54\u3002\u4e5f\u5c31\u662f\u8aaa\uff0c\u53ea\u8981\u6a21\u578b\u751f\u6210\u8f38\u51fa\u8a5e\u5143\uff0c\u5c31\u6703\u767c\u9001\u9019\u4e9b\u8f38\u51fa\u8a5e\u5143\u3002\u53ea\u6709\u5728\u751f\u6210\u6240\u6709\u8f38\u51fa\u8a5e\u5143\u540e\uff0c\u7e94\u6703\u767c\u9001\u5c0d\u63d0\u793a\u7684\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u5c0d\u65bc\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u4f7f\u7528 [generate_content](https://cloud.google.com/python/docs/reference/aiplatform/latest/vertexai.preview.generative_models?hl=zh-cn#content) \u4e2d\u7684 `stream` \u53c3\u6578\u3002```\n response = model.generate_content(contents=[...], stream = True)\n \n```\u5c0d\u65bc\u975e\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u79fb\u9664\u8a72\u53c3\u6578\u6216\u5c07\u53c3\u6578\u8a2d\u7f6e\u7232 `False` \u3002\n### \u793a\u4f8b\u4ee3\u78bc [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/python-docs-samples/blob/HEAD/generative_ai/gemini_single_turn_video_example.py) \n```\nimport vertexaifrom vertexai.generative_models import GenerativeModel, Partdef generate_text(project_id: str, location: str) -> str:\u00a0 \u00a0 # Initialize Vertex AI\u00a0 \u00a0 vertexai.init(project=project_id, location=location)\u00a0 \u00a0 # Load the model\u00a0 \u00a0 vision_model = GenerativeModel(\"gemini-1.0-pro-vision\")\u00a0 \u00a0 # Generate text\u00a0 \u00a0 response = vision_model.generate_content(\u00a0 \u00a0 \u00a0 \u00a0 [\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Part.from_uri(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"gs://cloud-samples-data/video/animals.mp4\", mime_type=\"video/mp4\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ),\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"What is in the video?\",\u00a0 \u00a0 \u00a0 \u00a0 ]\u00a0 \u00a0 )\u00a0 \u00a0 print(response)\u00a0 \u00a0 return response.text\n```\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300a\u751f\u6210\u5f0f AI \u5feb\u901f\u5165\u9580\uff1a\u4f7f\u7528 Node.js SDK\u300b](https://cloud.google.com/nodejs/docs/reference/vertexai/latest?hl=zh-cn#before-you-begin) \u4e2d\u7684 Node.js \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u9069\u7528\u65bc Gemini \u7684 Node.js SDK \u53c3\u8003\u6587\u6a94](https://cloud.google.com/nodejs/docs/reference/vertexai/latest?hl=zh-cn) \u3002\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n### \u6d41\u5f0f\u56de\u7b54\u548c\u975e\u6d41\u5f0f\u56de\u7b54\u60a8\u53ef\u4ee5\u9078\u64c7\u6a21\u578b\u662f\u751f\u6210\u6d41\u5f0f\u56de\u7b54\u9084\u662f\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u6d41\u5f0f\u50b3\u8f38\u6d89\u53ca\u5728\u751f\u6210\u5c0d\u63d0\u793a\u7684\u56de\u7b54\u6642\u63a5\u6536\u9019\u4e9b\u56de\u7b54\u3002\u4e5f\u5c31\u662f\u8aaa\uff0c\u53ea\u8981\u6a21\u578b\u751f\u6210\u8f38\u51fa\u8a5e\u5143\uff0c\u5c31\u6703\u767c\u9001\u9019\u4e9b\u8f38\u51fa\u8a5e\u5143\u3002\u53ea\u6709\u5728\u751f\u6210\u6240\u6709\u8f38\u51fa\u8a5e\u5143\u540e\uff0c\u7e94\u6703\u767c\u9001\u5c0d\u63d0\u793a\u7684\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u5c0d\u65bc\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u4f7f\u7528 [generateContentStream](https://cloud.google.com/nodejs/docs/reference/vertexai/latest?hl=zh-cn#streaming-content-generation) \u65b9\u6cd5\u3002```\n const streamingResp = await generativeModel.generateContentStream(request);\n \n```\u5c0d\u65bc\u975e\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u4f7f\u7528 [generateContent](https://cloud.google.com/nodejs/docs/reference/vertexai/latest?hl=zh-cn#content-generation-non-streaming) \u65b9\u6cd5\u3002```\n const streamingResp = await generativeModel.generateContent(request);\n \n```\n### \u793a\u4f8b\u4ee3\u78bc [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/nodejs-docs-samples/blob/HEAD/generative-ai/snippets/sendMultiModalPromptWithVideo.js) \n```\nconst {VertexAI} = require('@google-cloud/vertexai');/**\u00a0* TODO(developer): Update these variables before running the sample.\u00a0*/async function sendMultiModalPromptWithVideo(\u00a0 projectId = 'PROJECT_ID',\u00a0 location = 'us-central1',\u00a0 model = 'gemini-1.0-pro-vision') {\u00a0 // Initialize Vertex with your Cloud project and location\u00a0 const vertexAI = new VertexAI({project: projectId, location: location});\u00a0 const generativeVisionModel = vertexAI.getGenerativeModel({\u00a0 \u00a0 model: model,\u00a0 });\u00a0 // Pass multimodal prompt\u00a0 const request = {\u00a0 \u00a0 contents: [\u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 role: 'user',\u00a0 \u00a0 \u00a0 \u00a0 parts: [\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 fileData: {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 fileUri: 'gs://cloud-samples-data/video/animals.mp4',\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 mimeType: 'video/mp4',\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 text: 'What is in the video?',\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 ],\u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 ],\u00a0 };\u00a0 // Create the response\u00a0 const response = await generativeVisionModel.generateContent(request);\u00a0 // Wait for the response to complete\u00a0 const aggregatedResponse = await response.response;\u00a0 // Select the text from the response\u00a0 const fullTextResponse =\u00a0 \u00a0 aggregatedResponse.candidates[0].content.parts[0].text;\u00a0 console.log(fullTextResponse);}\n```\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300aVertex AI \u5feb\u901f\u5165\u9580\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Java \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u9069\u7528\u65bc Gemini \u7684 Vertex AI Java SDK \u53c3\u8003\u6587\u6a94](https://cloud.google.com/java/docs/reference/google-cloud-vertexai/latest/overview?hl=zh-cn) \u3002\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n### \u6d41\u5f0f\u56de\u7b54\u548c\u975e\u6d41\u5f0f\u56de\u7b54\u60a8\u53ef\u4ee5\u9078\u64c7\u6a21\u578b\u662f\u751f\u6210\u6d41\u5f0f\u56de\u7b54\u9084\u662f\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u6d41\u5f0f\u50b3\u8f38\u6d89\u53ca\u5728\u751f\u6210\u5c0d\u63d0\u793a\u7684\u56de\u7b54\u6642\u63a5\u6536\u9019\u4e9b\u56de\u7b54\u3002\u4e5f\u5c31\u662f\u8aaa\uff0c\u53ea\u8981\u6a21\u578b\u751f\u6210\u8f38\u51fa\u8a5e\u5143\uff0c\u5c31\u6703\u767c\u9001\u9019\u4e9b\u8f38\u51fa\u8a5e\u5143\u3002\u53ea\u6709\u5728\u751f\u6210\u6240\u6709\u8f38\u51fa\u8a5e\u5143\u540e\uff0c\u7e94\u6703\u767c\u9001\u5c0d\u63d0\u793a\u7684\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u5c0d\u65bc\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u4f7f\u7528 [generateContentStream](https://cloud.google.com/java/docs/reference/google-cloud-vertexai/latest/com.google.cloud.vertexai.generativeai.preview.GenerativeModel?hl=zh-cn#com_google_cloud_vertexai_generativeai_preview_GenerativeModel_generateContentStream_com_google_cloud_vertexai_api_Content_) \u65b9\u6cd5\u3002```\n public ResponseStream generateContentStream(Content content)\n \n```\u5c0d\u65bc\u975e\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u4f7f\u7528 [generateContent](https://cloud.google.com/java/docs/reference/google-cloud-vertexai/latest/com.google.cloud.vertexai.generativeai.preview.GenerativeModel?hl=zh-cn#com_google_cloud_vertexai_generativeai_preview_GenerativeModel_generateContent_com_google_cloud_vertexai_api_Content_) \u65b9\u6cd5\u3002```\n public GenerateContentResponse generateContent(Content content)\n \n```\n### \u793a\u4f8b\u4ee3\u78bc [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/java-docs-samples/blob/HEAD/vertexai/snippets/src/main/java/vertexai/gemini/MultimodalVideoInput.java) \n```\nimport com.google.cloud.vertexai.VertexAI;import com.google.cloud.vertexai.api.GenerateContentResponse;import com.google.cloud.vertexai.generativeai.ContentMaker;import com.google.cloud.vertexai.generativeai.GenerativeModel;import com.google.cloud.vertexai.generativeai.PartMaker;import com.google.cloud.vertexai.generativeai.ResponseHandler;import java.io.IOException;public class MultimodalVideoInput {\u00a0 public static void main(String[] args) throws IOException {\u00a0 \u00a0 // TODO(developer): Replace these variables before running the sample.\u00a0 \u00a0 String projectId = \"your-google-cloud-project-id\";\u00a0 \u00a0 String location = \"us-central1\";\u00a0 \u00a0 String modelName = \"gemini-1.0-pro-vision\";\u00a0 \u00a0 multimodalVideoInput(projectId, location, modelName);\u00a0 }\u00a0 // Analyzes the given video input.\u00a0 public static void multimodalVideoInput(String projectId, String location, String modelName)\u00a0 \u00a0 \u00a0 throws IOException {\u00a0 \u00a0 // Initialize client that will be used to send requests. This client only needs\u00a0 \u00a0 // to be created once, and can be reused for multiple requests.\u00a0 \u00a0 try (VertexAI vertexAI = new VertexAI(projectId, location)) {\u00a0 \u00a0 \u00a0 String videoUri = \"gs://cloud-samples-data/video/animals.mp4\";\u00a0 \u00a0 \u00a0 GenerativeModel model = new GenerativeModel(modelName, vertexAI);\u00a0 \u00a0 \u00a0 GenerateContentResponse response = model.generateContent(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ContentMaker.fromMultiModalData(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"What is in the video?\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 PartMaker.fromMimeTypeAndData(\"video/mp4\", videoUri)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ));\u00a0 \u00a0 \u00a0 String output = ResponseHandler.getText(response);\u00a0 \u00a0 \u00a0 System.out.println(output);\u00a0 \u00a0 }\u00a0 }}\n```\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300aVertex AI \u5feb\u901f\u5165\u9580\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Go \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u9069\u7528\u65bc Gemini \u7684 Vertex AI Go SDK \u53c3\u8003\u6587\u6a94](https://cloud.google.com/go/docs/reference/cloud.google.com/go/vertexai/latest?hl=zh-cn) \u3002\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n### \u6d41\u5f0f\u56de\u7b54\u548c\u975e\u6d41\u5f0f\u56de\u7b54\u60a8\u53ef\u4ee5\u9078\u64c7\u6a21\u578b\u662f\u751f\u6210\u6d41\u5f0f\u56de\u7b54\u9084\u662f\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u6d41\u5f0f\u50b3\u8f38\u6d89\u53ca\u5728\u751f\u6210\u5c0d\u63d0\u793a\u7684\u56de\u7b54\u6642\u63a5\u6536\u9019\u4e9b\u56de\u7b54\u3002\u4e5f\u5c31\u662f\u8aaa\uff0c\u53ea\u8981\u6a21\u578b\u751f\u6210\u8f38\u51fa\u8a5e\u5143\uff0c\u5c31\u6703\u767c\u9001\u9019\u4e9b\u8f38\u51fa\u8a5e\u5143\u3002\u53ea\u6709\u5728\u751f\u6210\u6240\u6709\u8f38\u51fa\u8a5e\u5143\u540e\uff0c\u7e94\u6703\u767c\u9001\u5c0d\u63d0\u793a\u7684\u975e\u6d41\u5f0f\u56de\u7b54\u3002\u5c0d\u65bc\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u4f7f\u7528 [GenerateContentStream](https://pkg.go.dev/cloud.google.com/go/vertexai/genai#GenerativeModel.GenerateContentStream) \u65b9\u6cd5\u3002```\n iter := model.GenerateContentStream(ctx, genai.Text(\"Tell me a story about a lumberjack and his giant ox. Keep it very short.\"))\n \n```\u5c0d\u65bc\u975e\u6d41\u5f0f\u56de\u7b54\uff0c\u8acb\u4f7f\u7528 [GenerateContent](https://pkg.go.dev/cloud.google.com/go/vertexai/genai#GenerativeModel.GenerateContent) \u65b9\u6cd5\u3002```\n resp, err := model.GenerateContent(ctx, genai.Text(\"What is the average size of a swallow?\"))\n \n```\n### \u793a\u4f8b\u4ee3\u78bc [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/golang-samples/blob/HEAD/vertexai/multimodal-video/multimodalvideo.go) \n```\nimport (\u00a0 \u00a0 \u00a0 \u00a0 \"context\"\u00a0 \u00a0 \u00a0 \u00a0 \"errors\"\u00a0 \u00a0 \u00a0 \u00a0 \"fmt\"\u00a0 \u00a0 \u00a0 \u00a0 \"io\"\u00a0 \u00a0 \u00a0 \u00a0 \"mime\"\u00a0 \u00a0 \u00a0 \u00a0 \"path/filepath\"\u00a0 \u00a0 \u00a0 \u00a0 \"cloud.google.com/go/vertexai/genai\")// generateMultimodalContent generates a response into w, based upon the prompt// and video provided.// video is a Google Cloud Storage path starting with \"gs://\"func generateMultimodalContent(w io.Writer, prompt, video, projectID, location, modelName string) error {\u00a0 \u00a0 \u00a0 \u00a0 // prompt := \"What is in this video?\"\u00a0 \u00a0 \u00a0 \u00a0 // video := \"gs://cloud-samples-data/video/animals.mp4\"\u00a0 \u00a0 \u00a0 \u00a0 // location := \"us-central1\"\u00a0 \u00a0 \u00a0 \u00a0 // modelName := \"gemini-1.0-pro-vision\"\u00a0 \u00a0 \u00a0 \u00a0 ctx := context.Background()\u00a0 \u00a0 \u00a0 \u00a0 client, err := genai.NewClient(ctx, projectID, location)\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return fmt.Errorf(\"unable to create client: %v\", err)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 defer client.Close()\u00a0 \u00a0 \u00a0 \u00a0 model := client.GenerativeModel(modelName)\u00a0 \u00a0 \u00a0 \u00a0 model.SetTemperature(0.4)\u00a0 \u00a0 \u00a0 \u00a0 // Given a video file URL, prepare video file as genai.Part\u00a0 \u00a0 \u00a0 \u00a0 img := genai.FileData{\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 MIMEType: mime.TypeByExtension(filepath.Ext(video)),\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 FileURI: \u00a0video,\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 res, err := model.GenerateContent(ctx, img, genai.Text(prompt))\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return fmt.Errorf(\"unable to generate contents: %v\", err)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 if len(res.Candidates) == 0 ||\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 len(res.Candidates[0].Content.Parts) == 0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return errors.New(\"empty response from model\")\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 fmt.Fprintf(w, \"generated response: %s\\n\", res.Candidates[0].Content.Parts[0])\u00a0 \u00a0 \u00a0 \u00a0 return nil}\n```\u60a8\u53ef\u4ee5\u4f7f\u7528 REST \u6e2c\u8a66\u6587\u672c\u63d0\u793a\uff0c\u65b9\u6cd5\u662f\u4f7f\u7528 Vertex AI API \u5411\u767c\u4f48\u8005\u6a21\u578b\u7aef\u9ede\u767c\u9001 POST \u8acb\u6c42\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a\u60a8\u5e0c\u671b\u6a21\u578b\u751f\u6210\u7684\u56de\u7b54\u985e\u578b\u3002\u9078\u64c7\u4e00\u7a2e\u65b9\u6cd5\u4f86\u751f\u6210\u60a8\u5e0c\u671b\u8fd4\u56de\u6a21\u578b\u56de\u7b54\u7684\u65b9\u5f0f\uff1a- `streamGenerateContent`\uff1a\u5728\u751f\u6210\u56de\u7b54\u6642\u9032\u884c\u6d41\u5f0f\u50b3\u8f38\uff0c\u4ee5\u964d\u4f4e\u771f\u4eba\u53d7\u8846\u7fa3\u9ad4\u5c0d\u65bc\u5ef6\u9072\u7684\u611f\u77e5\u5ea6\u3002\n- `generateContent`\uff1a\u56de\u7b54\u5728\u5b8c\u5168\u751f\u6210\u5f8c\u8fd4\u56de\u3002\n- \uff1a\u8655\u7406\u8acb\u6c42\u7684\u5340\u57df\u3002\u53ef\u7528\u7684\u9078\u9805\u5305\u62ec\uff1a\n- \uff1a\u60a8\u7684 [\u9805\u76ee ID](https://cloud.google.com/resource-manager/docs/creating-managing-projects?hl=zh-cn#identifiers) \u3002\n- \uff1a\u60a8\u8981\u4f7f\u7528\u7684\u591a\u6a21\u614b\u6a21\u578b ID\u3002\u9078\u9805\u5305\u62ec\uff1a- `gemini-1.0-pro-vision`\n- \uff1a\u8207\u5167\u5bb9\u95dc\u806f\u7684\u5c0d\u8a71\u4e2d\u7684\u89d2\u8272\u3002\u5373\u4f7f\u5728\u55ae\u8f2a\u61c9\u7528\u5834\u666f\u4e2d\uff0c\u4e5f\u9700\u8981\u6307\u5b9a\u89d2\u8272\u3002 \u53ef\u63a5\u53d7\u7684\u503c\u5305\u62ec\uff1a- `USER`\uff1a\u6307\u5b9a\u7531\u60a8\u767c\u9001\u7684\u5167\u5bb9\u3002- \uff1a\u8981\u5305\u542b\u5728\u63d0\u793a\u4e2d\u7684\u6587\u672c\u8aaa\u660e\u3002\n- \uff1a\u8981\u5728\u63d0\u793a\u4e2d\u5305\u542b\u5167\u5d4c\u7684\u5716\u7247\u6216\u8996\u983b\u7684 [base64 \u7de8\u78bc](https://cloud.google.com/vertex-ai/generative-ai/docs/image/base64-encode?hl=zh-cn) \u3002\u6dfb\u52a0\u5a92\u9ad4\u5167\u5d4c\u6642\uff0c\u60a8\u9084\u5fc5\u9808\u6307\u5b9a\u3002\n- \uff1a\u8981\u5305\u542b\u5728\u63d0\u793a\u4e2d\u7684\u5716\u7247\u6216\u8996\u983b\u7684 Cloud Storage URI\u3002\u5b58\u5132\u8a72\u6587\u4ef6\u7684\u5b58\u5132\u6876\u5fc5\u9808\u4f4d\u65bc\u767c\u9001\u8acb\u6c42\u7684 Google Cloud \u9805\u76ee\u4e2d\u3002\u60a8\u9084\u5fc5\u9808\u6307\u5b9a\u3002\n- \uff1a\u5728`data`\u6216`fileUri`\u5b57\u6bb5\u4e2d\u6307\u5b9a\u7684\u5716\u7247\u6216\u8996\u983b\u7684\u5a92\u9ad4\u985e\u578b\u3002\u53ef\u63a5\u53d7\u7684\u503c\u5305\u62ec\uff1a\n- \uff1a\u8981\u7232\u5176\u914d\u7f6e\u95be\u503c\u7684\u5b89\u5168\u985e\u5225\u3002\u53ef\u63a5\u53d7\u7684\u503c\u5305\u62ec\uff1a\n- \uff1a\u57fa\u65bc\u6982\u7387\u963b\u6b62\u5c6c\u65bc\u6307\u5b9a\u5b89\u5168\u985e\u5225\u7684\u97ff\u61c9\u7684\u95be\u503c\u3002\u53ef\u63a5\u53d7\u7684\u503c\u5305\u62ec\uff1a`BLOCK_LOW_AND_ABOVE`\u5c4f\u853d\u5f97\u6700\u591a\uff0c\u800c`BLOCK_ONLY_HIGH`\u5c4f\u853d\u5f97\u6700\u5c11\u3002\n- \uff1a\u6eab\u5ea6 (temperature) \u5728\u751f\u6210\u56de\u8986\u671f\u9593\u7528\u65bc\u63a1\u6a23\uff0c\u5728\u61c9\u7528`topP`\u548c`topK`\u6642\u6703\u751f\u6210\u56de\u8986\u3002\u6eab\u5ea6\u53ef\u4ee5\u63a7\u5236\u8a5e\u5143\u9078\u64c7\u7684\u96a8\u6a5f\u6027\u3002 \u8f03\u4f4e\u7684\u6eab\u5ea6\u6709\u5229\u65bc\u9700\u8981\u66f4\u5c11\u958b\u653e\u6027\u6216\u5275\u9020\u6027\u56de\u8986\u7684\u63d0\u793a\uff0c\u800c\u8f03\u9ad8\u7684\u6eab\u5ea6\u53ef\u4ee5\u5e36\u4f86\u66f4\u5177\u591a\u6a23\u6027\u6216\u5275\u9020\u6027\u7684\u7d50\u679c\u3002\u6eab\u5ea6\u7232`0`\u8868\u793a\u59cb\u7d42\u9078\u64c7\u6982\u7387\u6700\u9ad8\u7684\u8a5e\u5143\u3002\u5728\u9019\u7a2e\u60c5\u6cc1\u4e0b\uff0c\u7d66\u5b9a\u63d0\u793a\u7684\u56de\u8986\u5927\u591a\u662f\u78ba\u5b9a\u7684\uff0c\u4f46\u53ef\u80fd\u4ecd\u7136\u6709\u5c11\u91cf\u8b8a\u5316\u3002\u5982\u679c\u6a21\u578b\u8fd4\u56de\u7684\u56de\u7b54\u904e\u65bc\u7c60\u7d71\u3001\u904e\u65bc\u7c21\u77ed\uff0c\u6216\u8005\u6a21\u578b\u7d66\u51fa\u5f8c\u5099\u56de\u7b54\uff0c\u8acb\u5617\u8a66\u63d0\u9ad8\u6eab\u5ea6\u3002\n- \uff1aTop-P \u53ef\u66f4\u6539\u6a21\u578b\u9078\u64c7\u8f38\u51fa\u8a5e\u5143\u7684\u65b9\u5f0f\u3002\u7cfb\u7d71\u6703\u6309\u7167\u6982\u7387\u5f9e\u6700\u9ad8\uff08\u898b top-K\uff09\u5230\u6700\u4f4e\u7684\u9806\u5e8f\u9078\u64c7\u8a5e\u5143\uff0c\u76f4\u5230\u6240\u9078\u8a5e\u5143\u7684\u6982\u7387\u7e3d\u548c\u7b49\u65bc top-P \u7684\u503c\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8a5e\u5143 A\u3001B \u548c C \u7684\u6982\u7387\u5206\u5225\u7232 0.3\u30010.2 \u548c 0.1\uff0c\u4e26\u4e14 top-P \u503c\u7232`0.5`\uff0c\u5247\u6a21\u578b\u5c07\u9078\u64c7 A \u6216 B \u4f5c\u7232\u4e0b\u4e00\u500b\u8a5e\u5143\uff08\u901a\u904e\u6eab\u5ea6\u78ba\u5b9a\uff09\uff0c\u4e26\u6703\u6392\u9664 C\uff0c\u5c07\u5176\u4f5c\u7232\u5019\u9078\u8a5e\u5143\u3002\u6307\u5b9a\u8f03\u4f4e\u7684\u503c\u53ef\u7372\u5f97\u96a8\u6a5f\u7a0b\u5ea6\u8f03\u4f4e\u7684\u56de\u7b54\uff0c\u6307\u5b9a\u8f03\u9ad8\u7684\u503c\u53ef\u7372\u5f97\u96a8\u6a5f\u7a0b\u5ea6\u8f03\u9ad8\u7684\u56de\u7b54\u3002\n- \uff1aTop-K \u53ef\u66f4\u6539\u6a21\u578b\u9078\u64c7\u8f38\u51fa\u8a5e\u5143\u7684\u65b9\u5f0f\u3002\u5982\u679c top-K \u8a2d\u7232`1`\uff0c\u8868\u793a\u6240\u9078\u8a5e\u5143\u662f\u6a21\u578b\u8a5e\u5f59\u8868\u7684\u6240\u6709\u8a5e\u5143\u4e2d\u6982\u7387\u6700\u9ad8\u7684\u8a5e\u5143\uff08\u4e5f\u7a31\u7232\u8caa\u5fc3\u89e3\u78bc\uff09\u3002\u5982\u679c top-K \u8a2d\u7232`3`\uff0c\u5247\u8868\u793a\u7cfb\u7d71\u5c07\u5f9e 3 \u500b\u6982\u7387\u6700\u9ad8\u7684\u8a5e\u5143\uff08\u901a\u904e\u6eab\u5ea6\u78ba\u5b9a\uff09\u4e2d\u9078\u64c7\u4e0b\u4e00\u500b\u8a5e\u5143\u3002\u5728\u6bcf\u500b\u8a5e\u5143\u9078\u64c7\u6b65\u9a5f\u4e2d\uff0c\u7cfb\u7d71\u90fd\u6703\u5c0d\u6982\u7387\u6700\u9ad8\u7684 top-K \u8a5e\u5143\u9032\u884c\u63a1\u6a23\u3002\u7136\u5f8c\uff0c\u7cfb\u7d71\u6703\u6839\u64da top-P \u9032\u4e00\u6b65\u904e\u6ffe\u8a5e\u5143\uff0c\u4e26\u4f7f\u7528\u6eab\u5ea6\u63a1\u6a23\u9078\u64c7\u6700\u7d42\u7684\u8a5e\u5143\u3002\u6307\u5b9a\u8f03\u4f4e\u7684\u503c\u53ef\u7372\u5f97\u96a8\u6a5f\u7a0b\u5ea6\u8f03\u4f4e\u7684\u56de\u7b54\uff0c\u6307\u5b9a\u8f03\u9ad8\u7684\u503c\u53ef\u7372\u5f97\u96a8\u6a5f\u7a0b\u5ea6\u8f03\u9ad8\u7684\u56de\u7b54\u3002\n- \uff1a\u97ff\u61c9\u4e2d\u53ef\u751f\u6210\u7684\u8a5e\u5143\u6578\u91cf\u4e0a\u9650\u3002\u8a5e\u5143\u7d04\u7232 4 \u500b\u5b57\u7b26\u3002100 \u500b\u8a5e\u5143\u5c0d\u61c9\u5927\u7d04 60-80 \u500b\u55ae\u8a5e\u3002\u6307\u5b9a\u8f03\u4f4e\u7684\u503c\u53ef\u7372\u5f97\u8f03\u77ed\u7684\u56de\u8986\uff0c\u6307\u5b9a\u8f03\u9ad8\u7684\u503c\u53ef\u7372\u5f97\u53ef\u80fd\u8f03\u9577\u7684\u56de\u8986\u3002\n- \uff1a \u6307\u5b9a\u4e00\u500b\u5b57\u7b26\u4e32\u5217\u8868\uff0c\u544a\u77e5\u6a21\u578b\u5728\u97ff\u61c9\u4e2d\u9047\u5230\u5176\u4e2d\u4e00\u500b\u5b57\u7b26\u4e32\u6642\uff0c\u505c\u6b62\u751f\u6210\u6587\u672c\u3002\u5982\u679c\u67d0\u500b\u5b57\u7b26\u4e32\u5728\u97ff\u61c9\u4e2d\u591a\u6b21\u51fa\u73fe\uff0c\u5247\u97ff\u61c9\u6703\u5728\u9996\u6b21\u51fa\u73fe\u7684\u4f4d\u7f6e\u622a\u65b7\u3002\u5b57\u7b26\u4e32\u5340\u5206\u5927\u5c0f\u5beb\u3002\u4f8b\u5982\uff0c\u672a\u6307\u5b9a`stopSequences`\u6642\uff0c\u5982\u679c\u4e0b\u9762\u7684\u5167\u5bb9\u662f\u8fd4\u56de\u7684\u56de\u8986\uff1a`public static string reverse(string myString)`\u5247\u8fd4\u56de\u7684\u56de\u8986\u7232\u4ee5\u4e0b\u5167\u5bb9\uff0c\u5176\u4e2d`stopSequences`\u8a2d\u7f6e\u7232`[\"Str\", \"reverse\"]`\uff1a`public static string`\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nPOST https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/publishers/google/models/MODEL_ID:GENERATE_RESPONSE_METHOD\n```\n\u8acb\u6c42 JSON \u6b63\u6587\uff1a\n```\n{\n \"contents\": {\n \"role\": \"ROLE\",\n \"parts\": [  {\n  \"inlineDATA\": {\n   \"mimeType\": \"MIME_TYPE\",\n   \"data\": \"B64_BASE_IMAGE\"\n  }\n  },\n  {\n  \"fileData\": {\n   \"mimeType\": \"MIME_TYPE\",\n   \"fileUri\": \"FILE_URI\"\n  }\n  },\n  {\n  \"text\": \"TEXT\"\n  }\n ]\n },\n \"safety_settings\": {\n \"category\": \"SAFETY_CATEGORY\",\n \"threshold\": \"THRESHOLD\"\n },\n \"generation_config\": {\n \"temperature\": TEMPERATURE,\n \"topP\": TOP_P,\n \"topK\": TOP_K,\n \"candidateCount\": 1,\n \"maxOutputTokens\": MAX_OUTPUT_TOKENS,\n \"stopSequences\": STOP_SEQUENCES,\n }\n}\n```\n\u5982\u9700\u767c\u9001\u8acb\u6c42\uff0c\u8acb\u9078\u64c7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\uff1a\n **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/publishers/google/models/MODEL_ID:GENERATE_RESPONSE_METHOD\"\n``` **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/publishers/google/models/MODEL_ID:GENERATE_RESPONSE_METHOD\" | Select-Object -Expand Content\n```\n\u60a8\u61c9\u8a72\u6536\u5230\u985e\u4f3c\u4ee5\u4e0b\u5167\u5bb9\u7684 JSON \u97ff\u61c9\u3002```\nLOCATION=\"us-central1\"MODEL_ID=\"gemini-1.0-pro-vision\"PROJECT_ID=\"test-project\"curl \\-X POST \\-H \"Authorization: Bearer $(gcloud auth application-default print-access-token)\" \\-H \"Content-Type: application/json\"https://${LOCATION}-aiplatform.googleapis.com/v1/projects/${PROJECT_ID}/locations/${LOCATION}/publishers/google/models/${MODEL_ID}:${GENERATE_RESPONSE_METHOD} -d \\$'{\u00a0 \"contents\": {\u00a0 \u00a0 \"role\": \"user\",\u00a0 \u00a0 \"parts\": [\u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \"fileData\": {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"mimeType\": \"image/png\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"fileUri\": \"gs://my-bucket/images/cat.png\"\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \"text\": \"Describe this picture.\"\u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 ]\u00a0 },\u00a0 \"safety_settings\": {\u00a0 \u00a0 \"category\": \"HARM_CATEGORY_SEXUALLY_EXPLICIT\",\u00a0 \u00a0 \"threshold\": \"BLOCK_LOW_AND_ABOVE\"\u00a0 },\u00a0 \"generation_config\": {\u00a0 \u00a0 \"temperature\": 0.4,\u00a0 \u00a0 \"topP\": 1,\u00a0 \u00a0 \"topK\": 32,\u00a0 \u00a0 \"maxOutputTokens\": 2048,\u00a0 }}'\n```\u5982\u9700\u4f7f\u7528 Google Cloud \u63a7\u5236\u6aaf\u767c\u9001\u591a\u6a21\u614b\u63d0\u793a\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a- \u5728 Google Cloud \u63a7\u5236\u6aaf\u7684\u201c\u751f\u6210\u5f0f AI\u201d\u90e8\u5206\uff0c\u9032\u5165 **Vertex AI Studio** \u9801\u9762\u3002 [\u9032\u5165 Vertex AI Studio](https://console.cloud.google.com/vertex-ai/generative/multimodal?hl=zh-cn) \n- \u5728 **\u63d0\u793a\u8a2d\u8a08\uff08\u55ae\u8f2a\uff09** \u4e0b\uff0c\u9ede\u64ca **\u6253\u958b** \u3002\n- \u914d\u7f6e\u6a21\u578b\u548c\u53c3\u6578\uff1a- **\u5340\u57df** \uff1a\u9078\u64c7\u60a8\u8981\u4f7f\u7528\u7684\u5340\u57df\u3002\n- **\u6a21\u578b** \uff1a\u9078\u64c7 **Gemini Pro Vision** \u3002\n- **\u6eab\u5ea6** \uff1a\u4f7f\u7528\u6ed1\u584a\u6216\u6587\u672c\u6846\u8f38\u5165\u6eab\u5ea6\u503c\u3002\u6eab\u5ea6 (temperature) \u5728\u751f\u6210\u56de\u8986\u671f\u9593\u7528\u65bc\u63a1\u6a23\uff0c\u5728\u61c9\u7528`topP`\u548c`topK`\u6642\u6703\u751f\u6210\u56de\u8986\u3002\u6eab\u5ea6\u53ef\u4ee5\u63a7\u5236\u8a5e\u5143\u9078\u64c7\u7684\u96a8\u6a5f\u6027\u3002 \u8f03\u4f4e\u7684\u6eab\u5ea6\u6709\u5229\u65bc\u9700\u8981\u66f4\u5c11\u958b\u653e\u6027\u6216\u5275\u9020\u6027\u56de\u8986\u7684\u63d0\u793a\uff0c\u800c\u8f03\u9ad8\u7684\u6eab\u5ea6\u53ef\u4ee5\u5e36\u4f86\u66f4\u5177\u591a\u6a23\u6027\u6216\u5275\u9020\u6027\u7684\u7d50\u679c\u3002\u6eab\u5ea6\u7232`0`\u8868\u793a\u59cb\u7d42\u9078\u64c7\u6982\u7387\u6700\u9ad8\u7684\u8a5e\u5143\u3002\u5728\u9019\u7a2e\u60c5\u6cc1\u4e0b\uff0c\u7d66\u5b9a\u63d0\u793a\u7684\u56de\u8986\u5927\u591a\u662f\u78ba\u5b9a\u7684\uff0c\u4f46\u53ef\u80fd\u4ecd\u7136\u6709\u5c11\u91cf\u8b8a\u5316\u3002\u5982\u679c\u6a21\u578b\u8fd4\u56de\u7684\u56de\u7b54\u904e\u65bc\u7c60\u7d71\u3001\u904e\u65bc\u7c21\u77ed\uff0c\u6216\u8005\u6a21\u578b\u7d66\u51fa\u5f8c\u5099\u56de\u7b54\uff0c\u8acb\u5617\u8a66\u63d0\u9ad8\u6eab\u5ea6\u3002\n- **\u8a5e\u5143\u4e0a\u9650** \uff1a\u4f7f\u7528\u6ed1\u584a\u6216\u6587\u672c\u6846\u8f38\u5165\u8f38\u51fa\u4e0a\u9650\u503c\u3002\u56de\u7b54\u4e2d\u53ef\u751f\u6210\u7684\u8a5e\u5143\u6578\u91cf\u4e0a\u9650\u3002\u8a5e\u5143\u7d04\u7232 4 \u500b\u5b57\u7b26\u3002100 \u500b\u8a5e\u5143\u5c0d\u61c9\u5927\u7d04 60-80 \u500b\u55ae\u8a5e\u3002\u6307\u5b9a\u8f03\u4f4e\u7684\u503c\u53ef\u7372\u5f97\u8f03\u77ed\u7684\u56de\u8986\uff0c\u6307\u5b9a\u8f03\u9ad8\u7684\u503c\u53ef\u7372\u5f97\u53ef\u80fd\u8f03\u9577\u7684\u56de\u8986\u3002\n- **\u6dfb\u52a0\u505c\u6b62\u5e8f\u5217** \uff1a\u8f38\u5165\u505c\u6b62\u5e8f\u5217\uff0c\u5373\u6a21\u578b\u9047\u5230\u6642\u505c\u6b62\u56de\u8986\u7684\u4e00\u7cfb\u5217\u5b57\u7b26\uff08\u5305\u62ec\u7a7a\u683c\uff09\u3002\u8a72\u5e8f\u5217\u4e0d\u5305\u542b\u5728\u56de\u8986\u4e2d\u3002\u60a8\u6700\u591a\u53ef\u4ee5\u6dfb\u52a0\u4e94\u500b\u505c\u6b62\u5e8f\u5217\u3002- \u53ef\u9078\uff1a\u5982\u9700\u914d\u7f6e\u9ad8\u7d1a\u53c3\u6578\uff0c\u8acb\u9ede\u64ca **\u9ad8\u7d1a** \uff0c\u7136\u5f8c\u6309\u5982\u4e0b\u65b9\u5f0f\u9032\u884c\u914d\u7f6e\uff1a\n- Google Cloud \u63a7\u5236\u6aaf\u50c5\u652f\u6301\u6d41\u5f0f\u50b3\u8f38\uff0c\u6d89\u53ca\u5728\u751f\u6210\u5c0d\u63d0\u793a\u7684\u56de\u7b54\u6642\u63a5\u6536\u9019\u4e9b\u56de\u7b54\u3002\u60a8\u73fe\u5728\u53ef\u4ee5\u5728\u6d88\u606f\u6846\u4e2d\u8f38\u5165\u6d88\u606f\uff0c\u4ee5\u958b\u59cb\u8207\u6a21\u578b\u5c0d\u8a71\u3002\u96a8\u5f8c\uff0c\u6a21\u578b\u6703\u4f7f\u7528\u4e4b\u524d\u7684\u6d88\u606f\u4f5c\u7232\u65b0\u56de\u8986\u7684\u8a9e\u5883\u3002\u5982\u9700\u5728\u63d0\u793a\u4e2d\u6dfb\u52a0\u5716\u7247\u6216\u8996\u983b\uff0c\u8acb\u9ede\u64ca add_photo_alternate \u5716\u6a19\u3002\u5982\u9700\u77ad\u89e3\u591a\u6a21\u614b\u63d0\u793a\uff0c\u8acb\u53c3\u95b1 [\u8a2d\u8a08\u591a\u6a21\u614b\u63d0\u793a](https://cloud.google.com/vertex-ai/generative-ai/docs/multimodal/design-multimodal-prompts?hl=zh-cn) \u3002\n- \u53ef\u9078\uff1a\u5982\u9700\u5c07\u63d0\u793a\u4fdd\u5b58\u5230 **\u6211\u7684\u63d0\u793a** \uff0c\u8acb\u9ede\u64casave_alt **\u4fdd\u5b58** \u3002\n- \u53ef\u9078\uff1a\u5982\u9700\u7372\u53d6\u63d0\u793a\u7684 Python \u4ee3\u78bc\u6216 curl \u547d\u4ee4\uff0c\u8acb\u9ede\u64cacode **\u7372\u53d6\u4ee3\u78bc** \u3002\n- \u53ef\u9078\uff1a\u5982\u9700\u6e05\u9664\u4e4b\u524d\u7684\u6240\u6709\u6d88\u606f\uff0c\u8acb\u9ede\u64cadelete **\u6e05\u9664\u5c0d\u8a71**\n## \u63d0\u793a\u7684\u5716\u7247\u8981\u6c42\n\u4f7f\u7528\u5716\u7247\u6578\u64da\u7684\u63d0\u793a\u5177\u6709\u4ee5\u4e0b\u9650\u5236\u548c\u8981\u6c42\uff1a\n- Google \u5716\u7247\u5fc5\u9808\u662f\u4ee5\u4e0b\u5716\u7247\u6578\u64da MIME \u985e\u578b\u4e4b\u4e00\uff1a- PNG - image/png\n- JPEG - image/jpeg\n- \u6700\u591a 16 \u5f35\u55ae\u7368\u7684\u5716\u7247\u3002\n- \u6574\u500b\u63d0\u793a\uff08\u5305\u62ec\u5716\u7247\u548c\u6587\u5b57\uff09\u7684\u5927\u5c0f\u4e0a\u9650\u7232 4MB\u3002\n- \u5c0d\u5716\u7247\u4e2d\u7684\u50cf\u7d20\u6578\u91cf\u6c92\u6709\u5177\u9ad4\u9650\u5236\u3002\u4e0d\u904e\uff0c\u8f03\u5927\u7684\u5716\u7247\u6703\u88ab\u7e2e\u5c0f\u548c\u586b\u5145\uff0c\u4ee5\u9069\u61c9\u6700\u5927\u5206\u8fa8\u7387 (3072 x 3072)\uff0c\u540c\u6642\u4fdd\u7559\u5176\u539f\u59cb\u5bec\u9ad8\u6bd4\u3002\n- \u6bcf\u5f35\u5716\u7247\u4f54 258 \u500b\u8a5e\u5143\u3002\n### \u5716\u7247\u6700\u4f73\u505a\u6cd5\n\u5728\u63d0\u793a\u4e2d\u4f7f\u7528\u5716\u7247\u6642\uff0c\u8acb\u9075\u5faa\u4ee5\u4e0b\u5efa\u8b70\u4ee5\u7372\u5f97\u6700\u4f73\u7d50\u679c\uff1a\n- \u5305\u542b\u55ae\u5f35\u5716\u7247\u7684\u63d0\u793a\u5f80\u5f80\u53ef\u4ee5\u7522\u751f\u66f4\u597d\u7684\u7d50\u679c\u3002\n- \u5982\u679c\u63d0\u793a\u5305\u542b\u55ae\u5f35\u5716\u7247\uff0c\u5247\u5c07\u8a72\u5716\u7247\u653e\u5728\u6587\u672c\u63d0\u793a\u4e4b\u524d\u53ef\u80fd\u6703\u7522\u751f\u66f4\u597d\u7684\u7d50\u679c\u3002\n- \u5982\u679c\u63d0\u793a\u4e2d\u6709\u591a\u500b\u5716\u7247\uff0c\u4e26\u4e14\u60a8\u5e0c\u671b\u7a0d\u5f8c\u5728\u63d0\u793a\u4e2d\u5f15\u7528\u9019\u4e9b\u5716\u7247\uff0c\u6216\u8005\u5e0c\u671b\u6a21\u578b\u5728\u6a21\u578b\u97ff\u61c9\u4e2d\u5f15\u7528\u9019\u4e9b\u5716\u7247\uff0c\u5247\u5728\u5716\u7247\u4e4b\u524d\u7232\u6bcf\u5f35\u5716\u7247\u63d0\u4f9b\u7d22\u5f15\u6703\u6709\u6240\u5e6b\u52a9\u3002\u5c0d\u65bc\u7d22\u5f15\uff0c\u8acb\u4f7f\u7528 `a` `b` `c` \u6216 `image 1` `image 2` `image 3` \u3002\u4ee5\u4e0b\u662f\u5728\u63d0\u793a\u4e2d\u4f7f\u7528\u5df2\u7de8\u5165\u7d22\u5f15\u7684\u5716\u7247\u7684\u793a\u4f8b\uff1a```\nimage 1 <piano_recital.jpeg>\nimage 2 <family_dinner.jpeg>\nimage 3 <coffee_shop.jpeg>\nWrite a blogpost about my day using image 1 and image 2. Then, give me ideas\nfor tomorrow based on image 3.\n```\n- \u5716\u7247\u5206\u8fa8\u7387\u8d8a\u9ad8\uff0c\u6548\u679c\u8d8a\u597d\u3002\n- \u5728\u63d0\u793a\u4e2d\u6dfb\u52a0\u4e00\u4e9b\u793a\u4f8b\u3002\n- \u8acb\u5148\u5c07\u5716\u7247\u65cb\u8f49\u5230\u9069\u7576\u65b9\u5411\uff0c\u7136\u5f8c\u518d\u5c07\u5176\u6dfb\u52a0\u5230\u63d0\u793a\u4e2d\u3002\n\u5982\u9700\u77ad\u89e3\u66f4\u591a\u591a\u6a21\u614b\u63d0\u793a\uff0c\u8acb\u53c3\u95b1 [\u8a2d\u8a08\u591a\u6a21\u614b\u63d0\u793a](https://cloud.google.com/vertex-ai/generative-ai/docs/multimodal/design-multimodal-prompts?hl=zh-cn) \u3002\n## \u63d0\u793a\u7684\u8996\u983b\u9650\u5236\u548c\u8981\u6c42\n\u4f7f\u7528\u8996\u983b\u6578\u64da\u7684\u63d0\u793a\u53d7\u5230\u4ee5\u4e0b\u9650\u5236\u548c\u8981\u6c42\u7684\u7d04\u675f\uff1a\n- \u8996\u983b\u5fc5\u9808\u662f\u4ee5\u4e0b\u5716\u7247\u6578\u64da MIME \u985e\u578b\u4e4b\u4e00\uff1a- MOV - video/mov\n- MPEG - video/mpeg\n- MP4 - video/mp4\n- MPG - video/mpg\n- AVI - video/avi\n- WMV - video/wmv\n- MPEGPS - video/mpegps\n- FLS - video/flv\n- \u6211\u5011\u5efa\u8b70\u6bcf\u500b\u63d0\u793a\u4e0d\u8d85\u904e\u4e00\u500b\u8996\u983b\u3002\n- \u6a21\u578b\u5c07\u8996\u983b\u4f5c\u7232\u8996\u983b\u4e2d\u7684\u975e\u9023\u7e8c\u5716\u7247\u5e40\u8655\u7406\u3002\u97f3\u983b\u4e0d\u5305\u62ec\u97f3\u983b\u3002\u5982\u679c\u60a8\u767c\u73fe\u6a21\u578b\u5f9e\u8996\u983b\u4e2d\u7f3a\u5c11\u67d0\u4e9b\u5167\u5bb9\uff0c\u8acb\u5617\u8a66\u7e2e\u77ed\u8996\u983b\uff0c\u4ee5\u4fbf\u6a21\u578b\u6355\u7372\u66f4\u591a\u8996\u983b\u5167\u5bb9\u3002\n- \u7cfb\u7d71\u53ea\u6703\u8655\u7406\u524d 2 \u5206\u9418\u5167\u7684\u4fe1\u606f\u3002\n- \u6bcf\u500b\u8996\u983b\u4f54 1,032 \u500b\u8a5e\u5143\u3002\n- \u7cfb\u7d71\u4e0d\u6703\u5206\u6790\u4efb\u4f55\u97f3\u983b\u4fe1\u606f\u6216\u6642\u9593\u6233\u5143\u6578\u64da\u3002\u56e0\u6b64\uff0c\u5728\u9700\u8981\u97f3\u983b\u8f38\u5165\uff08\u4f8b\u5982\u7232\u97f3\u983b\u6dfb\u52a0\u5b57\u5e55\uff09\u6216\u6642\u9593\u76f8\u95dc\u4fe1\u606f\uff08\u4f8b\u5982\u901f\u5ea6\u6216\u7bc0\u594f\uff09\u7684\u7528\u4f8b\u4e2d\uff0c\u6a21\u578b\u53ef\u80fd\u8868\u73fe\u4e0d\u4f73\u3002\n\u5982\u9700\u77ad\u89e3\u66f4\u591a\u591a\u6a21\u614b\u63d0\u793a\uff0c\u8acb\u53c3\u95b1 [\u8a2d\u8a08\u591a\u6a21\u614b\u63d0\u793a](https://cloud.google.com/vertex-ai/generative-ai/docs/multimodal/design-multimodal-prompts?hl=zh-cn) \u3002\n## \u5f8c\u7e8c\u6b65\u9a5f\n- \u77ad\u89e3\u5982\u4f55 [\u767c\u9001\u804a\u5929\u63d0\u793a\u8acb\u6c42](https://cloud.google.com/vertex-ai/generative-ai/docs/multimodal/send-chat-prompts-gemini?hl=zh-cn) \u3002\n- \u77ad\u89e3 [\u8ca0\u8cac\u4efb\u7684 AI \u6700\u4f73\u5be6\u8e10\u548c Vertex AI \u7684\u5b89\u5168\u904e\u6ffe\u689d\u4ef6](https://cloud.google.com/vertex-ai/generative-ai/docs/learn/responsible-ai?hl=zh-cn) \u3002", "guide": "Generative AI on Vertex AI"}