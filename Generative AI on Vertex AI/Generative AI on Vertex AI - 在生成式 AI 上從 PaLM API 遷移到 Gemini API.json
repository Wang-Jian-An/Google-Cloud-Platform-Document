{"title": "Generative AI on Vertex AI - \u5728\u751f\u6210\u5f0f AI \u4e0a\u5f9e PaLM API \u9077\u79fb\u5230 Gemini API", "url": "https://cloud.google.com/vertex-ai/generative-ai/docs/migrate/migrate-palm-to-gemini?hl=zh-cn", "abstract": "# Generative AI on Vertex AI - \u5728\u751f\u6210\u5f0f AI \u4e0a\u5f9e PaLM API \u9077\u79fb\u5230 Gemini API\n\u672c\u6307\u5357\u4ecb\u7d39\u5982\u4f55\u5c07 Python \u7248 Vertex AI SDK \u4ee3\u78bc\u5f9e\u4f7f\u7528 PaLM API \u9077\u79fb\u5230 Gemini API\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 Gemini \u751f\u6210\u6587\u672c\u5c0d\u8a71\u548c\u591a\u8f2a\u5c0d\u8a71\uff08\u804a\u5929\uff09\uff0c\u4f46\u8acb\u52d9\u5fc5\u67e5\u770b\u60a8\u7684\u56de\u8986\uff0c\u56e0\u7232\u5b83\u5011\u53ef\u80fd\u8207 PaLM \u8f38\u51fa\u4e0d\u540c\u3002\n", "content": "## \u9077\u79fb\u4ee3\u78bc\n- \u5c07\u5c0e\u5165\u64cd\u4f5c\u66f4\u6539\u7232\u5f9e`vertexai.preview.generative_models`\u8abf\u7528`GenerativeModel`\uff0c\u5f9e\u800c\u5c07`TextGenerationModel`\u548c`ChatModel`\u985e\u7528\u6cd5\u66ff\u63db\u7232`GenerativeModel`\u985e\u3002\n- \u4f7f\u7528\u69cb\u9020\u51fd\u6578\u5be6\u4f8b\u5316`GenerativeModel`\uff0c\u800c\u4e0d\u662f\u4f7f\u7528`from_pretrained`\u985e\u65b9\u6cd5\u3002\u5c07`TextGenerationModel.from_pretrained('text-bison')`\u66ff\u63db\u7232`GenerativeModel('gemini-1.0-pro')`\u3002\n- \u5c07`TextGenerationModel.predict`\u66ff\u63db\u7232`GenerativeModel.generate_content`\u3002\n- \u5c0d\u65bc\u76f8\u95dc\u65b9\u6cd5\uff0c\u8acb\u5f9e`GenerativeModel`\u8abf\u7528\u76f8\u540c\u7684\u65b9\u6cd5\u3002\u4f8b\u5982\uff0c\u5c07`ChatModel.start_chat`\u66ff\u63db\u7232`GenerativeModel.start_chat`\u3002\n- \u66f4\u65b0\u8a9e\u6cd5\uff0c\u5982\u672c\u9801\u9762\u4e0a\u7684\u793a\u4f8b\u6240\u793a\u3002- \u8f38\u51fa\u56de\u8986\u7d50\u69cb\u5df2\u66f4\u6539\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Gemini API \u6a21\u578b\u53c3\u8003\u56de\u8986\u6b63\u6587](https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/gemini?hl=zh-cn#response_body) \u3002\n- \u5b89\u5168\u8a2d\u7f6e\u985e\u5225\u5df2\u66f4\u6539\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Gemini API \u6a21\u578b\u53c3\u8003\u8acb\u6c42\u6b63\u6587](https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/gemini?hl=zh-cn#request_body) \u3002\n## \u5e38\u7528\u8a2d\u7f6e\u8aaa\u660e\n\u5c0d\u65bc\u751f\u6210\u5f0f AI \u4e2d\u7684 PaLM API \u548c Gemini API\uff0c\u8a2d\u7f6e\u904e\u7a0b\u76f8\u540c\uff1a\n```\npip install google-cloud-aiplatformimport vertexaivertexai.init(project=\"PROJECT_ID\", location=\"LOCATION\")\n```\n\u5176\u4e2d\uff1a\n- \u662f\u60a8\u7684 Google Cloud \u9805\u76ee ID\u3002\n- \u662f\u60a8\u7684 Google Cloud \u9805\u76ee\u7684\u4f4d\u7f6e\u3002\u4f8b\u5982 `us-central1` \u3002## \u6587\u672c\u751f\u6210\uff1a\u57fa\u672c\n\u4ee5\u4e0b\u4ee3\u78bc\u793a\u4f8b\u5c55\u793a\u4e86\u7528\u65bc\u5275\u5efa\u6587\u672c\u751f\u6210\u6a21\u578b\u7684 PaLM API \u548c Gemini API \u4e4b\u9593\u7684\u5340\u5225\u3002\n| PaLM                                                   | Gemini                                                        |\n|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| from vertexai.language_models import TextGenerationModel model = TextGenerationModel.from_pretrained(\"text-bison@002\") response = model.predict(prompt=\"The opposite of hot is\") print(response.text) # 'cold.' | from vertexai.preview.generative_models import GenerativeModel model = GenerativeModel(\"gemini-1.0-pro\") responses = model.generate_content(\"The opposite of hot is\", stream=True) for response in responses: print(response.text) |\n## \u6587\u672c\u751f\u6210\uff1a\u53ef\u9078\u53c3\u6578\n\u4ee5\u4e0b\u4ee3\u78bc\u793a\u4f8b\u986f\u793a\u4e86\u7528\u65bc\u5275\u5efa\u6587\u672c\u751f\u6210\u6a21\u578b\u7684 PaLM API \u548c Gemini API \u4e4b\u9593\u7684\u5340\u5225\uff0c\u5176\u4e2d\u63d0\u4f9b\u53ef\u9078\u7684 [\u53c3\u6578](https://cloud.google.com/vertex-ai/generative-ai/docs/start/quickstarts/api-quickstart?hl=zh-cn#parameter_definitions) \u3002\n| PaLM                                                                                                                                              | Gemini                                                                                                                                                               |\n|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| from vertexai.language_models import TextGenerationModel model = TextGenerationModel.from_pretrained(\"text-bison@002\") prompt = \"\"\" You are an expert at solving word problems. Solve the following problem: I have three houses, each with three cats. each cat owns 4 mittens, and a hat. Each mitten was knit from 7m of yarn, each hat from 4m. How much yarn was needed to make all the items? Think about it step by step, and show your work. \"\"\" response = model.predict( prompt=prompt, temperature=0.1, max_output_tokens=800, top_p=1.0, top_k=40 ) print(response.text) | from vertexai.preview.generative_models import GenerativeModel model = GenerativeModel(\"gemini-1.0-pro\") prompt = \"\"\" You are an expert at solving word problems. Solve the following problem: I have three houses, each with three cats. each cat owns 4 mittens, and a hat. Each mitten was knit from 7m of yarn, each hat from 4m. How much yarn was needed to make all the items? Think about it step by step, and show your work. \"\"\" responses = model.generate_content( prompt, generation_config={ \"temperature\": 0.1, \"max_output_tokens\": 800, \"top_p\": 1.0, \"top_k\": 40, }, stream=True ) for response in responses: print(response.text) |\n## \u804a\u5929\uff1a\u57fa\u672c\n\u4ee5\u4e0b\u4ee3\u78bc\u793a\u4f8b\u5c55\u793a\u4e86\u7528\u65bc\u5275\u5efa\u804a\u5929\u6a21\u578b\u7684 PaLM API \u548c Gemini API \u4e4b\u9593\u7684\u5340\u5225\u3002\n| PaLM                                                                                           | Gemini                                                                                                                             |\n|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| from vertexai.language_models import ChatModel model = ChatModel.from_pretrained(\"chat-bison@002\") chat = model.start_chat() print( chat.send_message( \"\"\" Hello! Can you write a 300 word abstract for a research paper I need to write about the impact of AI on society? \"\"\" ) ) print( chat.send_message( \"\"\" Could you give me a catchy title for the paper? \"\"\" ) ) | from vertexai.preview.generative_models import GenerativeModel model = GenerativeModel(\"gemini-1.0-pro\") chat = model.start_chat() responses = chat.send_message( \"\"\" Hello! Can you write a 300 word abstract for a research paper I need to write about the impact of AI on society? \"\"\", stream=True ) for response in responses: print(response.text) responses = chat.send_message( \"\"\" Could you give me a catchy title for the paper? \"\"\", stream=True ) for response in responses: print(response.text) |\n## \u5f8c\u7e8c\u6b65\u9a5f\n- \u5982\u9700\u8a73\u7d30\u77ad\u89e3\u6700\u65b0\u6a21\u578b\u548c\u529f\u80fd\uff0c\u8acb\u53c3\u95b1 [Vertex AI Gemini API \u6982\u89bd](https://cloud.google.com/vertex-ai/generative-ai/docs/multimodal/overview?hl=zh-cn) \u3002", "guide": "Generative AI on Vertex AI"}