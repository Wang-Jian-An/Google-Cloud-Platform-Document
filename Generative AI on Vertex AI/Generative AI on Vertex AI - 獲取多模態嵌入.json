{"title": "Generative AI on Vertex AI - \u7372\u53d6\u591a\u6a21\u614b\u5d4c\u5165", "url": "https://cloud.google.com/vertex-ai/generative-ai/docs/embeddings/get-multimodal-embeddings?hl=zh-cn", "abstract": "# Generative AI on Vertex AI - \u7372\u53d6\u591a\u6a21\u614b\u5d4c\u5165\n\u591a\u6a21\u614b\u5d4c\u5165\u6a21\u578b\u6703\u6839\u64da\u60a8\u63d0\u4f9b\u7684\u8f38\u5165\u751f\u6210 1408 \u7dad\u5411\u91cf*\uff0c\u53ef\u4ee5\u5305\u542b\u5716\u7247\u3001\u6587\u672c\u548c\u8996\u983b\u6578\u64da\u7684\u7d44\u5408\u3002\u7136\u5f8c\uff0c\u5d4c\u5165\u5411\u91cf\u53ef\u7528\u65bc\u5f8c\u7e8c\u4efb\u52d9\uff0c\u4f8b\u5982\u5716\u7247\u5206\u985e\u6216\u8996\u983b\u5167\u5bb9\u5be9\u8988\u3002\n\u5716\u7247\u5d4c\u5165\u5411\u91cf\u548c\u6587\u672c\u5d4c\u5165\u5411\u91cf\u4f4d\u65bc\u540c\u4e00\u7dad\u5ea6\u7a7a\u9593\u4e2d\uff0c\u4e26\u4e14\u5177\u6709\u76f8\u540c\u7684\u7dad\u5ea6\u3002\u56e0\u6b64\uff0c\u9019\u4e9b\u5411\u91cf\u53ef\u4ee5\u4e92\u63db\u7528\u65bc\u61c9\u7528\u5834\u666f\uff0c\u4f8b\u5982\u6309\u6587\u672c\u641c\u7d22\u5716\u7247\u6216\u6309\u5716\u7247\u641c\u7d22\u8996\u983b\u3002\n\u5c0d\u65bc\u7d14\u6587\u672c\u5d4c\u5165\u7528\u4f8b\uff0c\u6211\u5011\u5efa\u8b70\u6539\u7528 Vertex AI \u4e0a\u7684\u751f\u6210\u5f0f AI \u6587\u672c\u5d4c\u5165 API\u3002\u4f8b\u5982\uff0ctext-embeddings API \u53ef\u80fd\u66f4\u9069\u5408\u57fa\u65bc\u6587\u672c\u7684\u8a9e\u7fa9\u641c\u7d22\u3001\u805a\u985e\u3001\u9577\u6587\u6a94\u5206\u6790\u4ee5\u53ca\u5176\u4ed6\u6587\u672c\u6aa2\u7d22\u6216\u554f\u7b54\u7528\u4f8b\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7372\u53d6\u6587\u672c\u5d4c\u5165](https://cloud.google.com/vertex-ai/generative-ai/docs/embeddings/get-text-embeddings?hl=zh-cn) \u3002\n* \u9ed8\u8a8d\u503c\u3002\n#", "content": "## \u4f7f\u7528\u5834\u666f\n\u5716\u7247\u548c\u6587\u672c\uff1a\n- **\u5716\u7247\u5206\u985e** \uff1a\u5c07\u5716\u7247\u7528\u4f5c\u8f38\u5165\u4e26\u9810\u6e2c\u4e00\u500b\u6216\u591a\u500b\u985e\u5225\uff08\u6a19\u7c64\uff09\u3002\n- **\u5716\u7247\u641c\u7d22** \uff1a\u641c\u7d22\u76f8\u95dc\u6216\u985e\u4f3c\u7684\u5716\u7247\u3002\n- **\u5efa\u8b70** \uff1a\u6839\u64da\u5716\u7247\u751f\u6210\u7522\u54c1\u6216\u5ee3\u544a\u63a8\u85a6\u3002\n\u5716\u7247\u3001\u6587\u672c\u548c\u8996\u983b\uff1a\n- **\u63a8\u85a6** \uff1a\u6839\u64da\u8996\u983b\u751f\u6210\u7522\u54c1\u6216\u5ee3\u544a\u63a8\u85a6\uff08\u76f8\u4f3c\u5ea6\u641c\u7d22\uff09\u3002\n- **\u8996\u983b\u5167\u5bb9\u641c\u7d22** - **\u4f7f\u7528\u8a9e\u7fa9\u641c\u7d22** \uff1a\u5c07\u6587\u672c\u4f5c\u7232\u8f38\u5165\uff0c\u4e26\u8fd4\u56de\u4e00\u7d44\u8207\u67e5\u8a62\u5339\u914d\u7684\u5df2\u6392\u5e8f\u5e40\u3002\n- **\u4f7f\u7528\u76f8\u4f3c\u5ea6\u641c\u7d22\u529f\u80fd** \uff1a- \u5c07\u8996\u983b\u4f5c\u7232\u8f38\u5165\uff0c\u4e26\u8fd4\u56de\u4e00\u7d44\u8207\u67e5\u8a62\u5339\u914d\u7684\u8996\u983b\u3002\n- \u5c07\u4e00\u5f35\u5716\u7247\u4f5c\u7232\u8f38\u5165\uff0c\u4e26\u8fd4\u56de\u4e00\u7d44\u8207\u67e5\u8a62\u5339\u914d\u7684\u8996\u983b\u3002\n- **\u8996\u983b\u5206\u985e** \uff1a\u5c07\u8996\u983b\u63d0\u53d6\u7232\u8f38\u5165\u4e26\u9810\u6e2c\u4e00\u500b\u6216\u591a\u500b\u985e\u5225\u3002## \u652f\u6301\u7684\u6a21\u578b\n\u60a8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u6a21\u578b\u7372\u53d6\u591a\u6a21\u614b\u5d4c\u5165\uff1a\n- `multimodalembedding`## \u6700\u4f73\u5be6\u8e10\n\u4f7f\u7528\u591a\u6a21\u614b\u5d4c\u5165\u6a21\u578b\u6642\uff0c\u8acb\u8003\u616e\u4ee5\u4e0b\u8f38\u5165\u65b9\u9762\uff1a\n- **\u5716\u7247\u4e2d\u7684\u6587\u672c** - \u6a21\u578b\u53ef\u4ee5\u5340\u5206\u5716\u7247\u4e2d\u7684\u6587\u672c\uff0c\u985e\u4f3c\u65bc\u5149\u5b78\u5b57\u7b26\u8b58\u5225 (OCR)\u3002\u5982\u679c\u60a8\u9700\u8981\u5340\u5206\u5716\u7247\u5167\u5bb9\u7684\u8aaa\u660e\u548c\u5716\u7247\u4e2d\u7684\u6587\u672c\uff0c\u8acb\u8003\u616e\u4f7f\u7528\u63d0\u793a\u5de5\u7a0b\u4f86\u6307\u5b9a\u76ee\u6a19\u5167\u5bb9\u3002\u4f8b\u5982\uff1a\u6839\u64da\u60a8\u7684\u7528\u4f8b\uff0c\u6307\u5b9a\u201cpicture of a cat\u201d\u6216\u201cthe text 'cat\u201d\uff0c\u800c\u4e0d\u53ea\u662f\u201ccat\u201d\u3002| 0    | 1          |\n|:-----------------|:---------------------------------------|\n| the text 'cat' | nan         |\n| picture of a cat | \u5716\u7247\u4f86\u6e90\uff1aManja Vitolic on Unsplash\u3002 |\n- **\u5d4c\u5165\u76f8\u4f3c\u5ea6** - \u5d4c\u5165\u7684\u9ede\u7a4d\u4e0d\u662f\u6821\u6e96\u7684\u6982\u7387\u3002\u9ede\u7a4d\u662f\u76f8\u4f3c\u5ea6\u6307\u6a19\uff0c\u4e0d\u540c\u7528\u4f8b\u7684\u5f97\u5206\u5206\u4f48\u53ef\u80fd\u4e0d\u540c\u3002\u56e0\u6b64\uff0c\u8acb\u907f\u514d\u4f7f\u7528\u56fa\u5b9a\u503c\u95be\u503c\u4f86\u8861\u91cf\u8cea\u91cf\u3002\u8acb\u6539\u7528\u6392\u540d\u65b9\u6cd5\u9032\u884c\u6aa2\u7d22\uff0c\u6216\u4f7f\u7528 sigmoid \u9032\u884c\u5206\u985e\u3002## API \u7528\u91cf\n### API \u9650\u984d\n\u4f7f\u7528 `multimodalembedding` \u6a21\u578b\u9032\u884c\u6587\u672c\u548c\u5716\u7247\u5d4c\u5165\u6642\uff0c\u5b58\u5728\u4ee5\u4e0b\u9650\u5236\uff1a\n| \u9650\u5236       | \u503c\u548c\u8aaa\u660e                                                             |\n|:------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| nan       | \u6587\u672c\u548c\u5716\u7247\u6578\u64da                                                           |\n| \u6bcf\u9805\u76ee\u6bcf\u5206\u9418\u7684 API \u8acb\u6c42\u6578\u4e0a\u9650 | 120                                                              |\n| \u6587\u672c\u9577\u5ea6\u4e0a\u9650     | 32 \u500b\u8a5e\u6cd5\u55ae\u5143\uff08\u7d04 32 \u500b\u5b57\uff09 \u6700\u5927\u6587\u672c\u9577\u5ea6\u7232 32 \u500b\u8a5e\u6cd5\u55ae\u5143\uff08\u7d04 32 \u500b\u8a5e\uff09\u3002\u5982\u679c\u8f38\u5165\u8d85\u904e 32 \u500b\u8a5e\u6cd5\u55ae\u5143\uff0c\u5247\u6a21\u578b\u6703\u5728\u5167\u90e8\u5c07\u8f38\u5165\u7e2e\u77ed\u5230\u6b64\u9577\u5ea6\u3002                             |\n| \u8a9e\u8a00       | \u82f1\u8a9e                                                              |\n| \u5716\u7247\u683c\u5f0f      | BMP\u3001GIF\u3001JPG\u3001PNG                                                          |\n| \u6620\u50cf\u5927\u5c0f      | \u63a1\u7528 Base64 \u7de8\u78bc\u7684\u5716\u7247\uff1a20 MB\uff08\u8f49\u78bc\u7232 PNG \u6642\uff09 Cloud Storage \u5716\u7247\uff1a20 MB\uff08\u539f\u59cb\u6587\u4ef6\u683c\u5f0f\uff09 \u63a5\u53d7\u7684\u5716\u7247\u5927\u5c0f\u4e0a\u9650\u7232 20 MB\u3002\u7232\u907f\u514d\u589e\u52a0\u7db2\u7d61\u5ef6\u9072\u6642\u9593\uff0c\u8acb\u4f7f\u7528\u8f03\u5c0f\u7684\u5716\u7247\u3002\u6b64\u5916\uff0c\u8a72\u6a21\u578b\u6703\u5c07\u5716\u7247\u7684\u5927\u5c0f\u8abf\u6574\u7232 512 x 512 \u50cf\u7d20\u5206\u8fa8\u7387\u3002\u56e0\u6b64\uff0c\u60a8\u7121\u9700\u63d0\u4f9b\u5206\u8fa8\u7387\u66f4\u9ad8\u7684\u5716\u7247\u3002 |\n| nan       | \u8996\u983b\u6578\u64da                                                             |\n| \u652f\u6301\u97f3\u983b      | \u4e0d\u9069\u7528 - \u6a21\u578b\u5728\u751f\u6210\u8996\u983b\u5d4c\u5165\u6642\u4e0d\u6703\u8003\u616e\u97f3\u983b\u5167\u5bb9                                                   |\n| \u8996\u983b\u683c\u5f0f      | AVI\u3001FLV\u3001MKV\u3001MOV\u3001MP4\u3001MPEG\u3001MPG\u3001WEBM \u548c WMV                                                   |\n| \u8996\u983b\u6642\u9577\u4e0a\u9650 (Cloud Storage) | \u7121\u9650\u5236\u3002\u4f46\u662f\uff0c\u4e00\u6b21\u53ea\u80fd\u5206\u6790 2 \u5206\u9418\u7684\u5167\u5bb9\u3002                                                    |\n### \u6e96\u5099\u5de5\u4f5c\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- \u751f\u6210\u5f0f AI \u4e2d\u7684\u67d0\u4e9b\u4efb\u52d9\u8981\u6c42\u60a8\u4f7f\u7528\u751f\u6210\u5f0f AI \u4e4b\u5916\u7684\u5176\u4ed6 Google Cloud \u7522\u54c1\u3002\u4f8b\u5982\uff0c\u5728\u5927\u591a\u6578\u60c5\u6cc1\u4e0b\uff0c\u60a8\u5fc5\u9808\u5728\u5275\u5efa\u81ea\u5b9a\u7fa9\u8a13\u7df4\u6d41\u6c34\u7dda\u6642\u4f7f\u7528 Cloud Storage \u548c Artifact Registry\u3002\u60a8\u53ef\u80fd\u9700\u8981\u57f7\u884c\u984d\u5916\u7684\u8a2d\u7f6e\u4efb\u52d9\u624d\u80fd\u4f7f\u7528\u5176\u4ed6 Google Cloud \u7522\u54c1\u3002\n- \u7232\u60a8\u7684\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49\u3002Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\u9078\u64c7\u6a19\u7c64\u9801\u4ee5\u77ad\u89e3\u60a8\u6253\u7b97\u5982\u4f55\u4f7f\u7528\u672c\u9801\u9762\u4e0a\u7684\u793a\u4f8b\uff1a\u5982\u9700\u5f9e\u672c\u5730\u958b\u767c\u74b0\u5883\u4f7f\u7528\u672c\u9801\u9762\u4e0a\u7684 Java \u793a\u4f8b\uff0c\u8acb\u5b89\u88dd\u4e26\u521d\u59cb\u5316 gcloud CLI\uff0c\u7136\u5f8c\u4f7f\u7528\u7528\u6236\u6191\u64da\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- [\u5b89\u88dd](https://cloud.google.com/sdk/docs/install?hl=zh-cn) Google Cloud CLI\u3002\n- \u5982\u9700 [\u521d\u59cb\u5316](https://cloud.google.com/sdk/docs/initializing?hl=zh-cn) gcloud CLI\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a```\ngcloud init\n```\n- \u66f4\u65b0\u4e26\u5b89\u88dd`gcloud`\u7d44\u4ef6\uff1a```\ngcloud components updategcloud components install beta\n```\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- \u7232\u60a8\u7684 Google \u8cec\u865f\u5275\u5efa\u672c\u5730\u8eab\u4efd\u9a57\u8b49\u6191\u64da\uff1a```\ngcloud auth application-default login\n```\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 Google Cloud \u8eab\u4efd\u9a57\u8b49\u6587\u6a94\u4e2d\u7684 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\u5982\u9700\u5f9e\u672c\u5730\u958b\u767c\u74b0\u5883\u4f7f\u7528\u672c\u9801\u9762\u4e0a\u7684 Node.js \u793a\u4f8b\uff0c\u8acb\u5b89\u88dd\u4e26\u521d\u59cb\u5316 gcloud CLI\uff0c\u7136\u5f8c\u4f7f\u7528\u7528\u6236\u6191\u64da\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- [\u5b89\u88dd](https://cloud.google.com/sdk/docs/install?hl=zh-cn) Google Cloud CLI\u3002\n- \u5982\u9700 [\u521d\u59cb\u5316](https://cloud.google.com/sdk/docs/initializing?hl=zh-cn) gcloud CLI\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a```\ngcloud init\n```\n- \u66f4\u65b0\u4e26\u5b89\u88dd`gcloud`\u7d44\u4ef6\uff1a```\ngcloud components updategcloud components install beta\n```\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- \u7232\u60a8\u7684 Google \u8cec\u865f\u5275\u5efa\u672c\u5730\u8eab\u4efd\u9a57\u8b49\u6191\u64da\uff1a```\ngcloud auth application-default login\n```\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 Google Cloud \u8eab\u4efd\u9a57\u8b49\u6587\u6a94\u4e2d\u7684 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\u5982\u9700\u5f9e\u672c\u5730\u958b\u767c\u74b0\u5883\u4f7f\u7528\u672c\u9801\u9762\u4e0a\u7684 Python \u793a\u4f8b\uff0c\u8acb\u5b89\u88dd\u4e26\u521d\u59cb\u5316 gcloud CLI\uff0c\u7136\u5f8c\u4f7f\u7528\u7528\u6236\u6191\u64da\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- [\u5b89\u88dd](https://cloud.google.com/sdk/docs/install?hl=zh-cn) Google Cloud CLI\u3002\n- \u5982\u9700 [\u521d\u59cb\u5316](https://cloud.google.com/sdk/docs/initializing?hl=zh-cn) gcloud CLI\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a```\ngcloud init\n```\n- \u66f4\u65b0\u4e26\u5b89\u88dd`gcloud`\u7d44\u4ef6\uff1a```\ngcloud components updategcloud components install beta\n```\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- \u7232\u60a8\u7684 Google \u8cec\u865f\u5275\u5efa\u672c\u5730\u8eab\u4efd\u9a57\u8b49\u6191\u64da\uff1a```\ngcloud auth application-default login\n```\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 Google Cloud \u8eab\u4efd\u9a57\u8b49\u6587\u6a94\u4e2d\u7684 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\u5982\u9700\u5728\u672c\u5730\u958b\u767c\u74b0\u5883\u4e2d\u4f7f\u7528\u672c\u9801\u9762\u4e0a\u7684 REST API \u793a\u4f8b\uff0c\u8acb\u4f7f\u7528\u60a8\u63d0\u4f9b\u7d66 gcloud CLI \u7684\u6191\u64da\u3002- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- [\u5b89\u88dd](https://cloud.google.com/sdk/docs/install?hl=zh-cn) Google Cloud CLI\u3002\n- \u5982\u9700 [\u521d\u59cb\u5316](https://cloud.google.com/sdk/docs/initializing?hl=zh-cn) gcloud CLI\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a```\ngcloud init\n```\n- \u66f4\u65b0\u4e26\u5b89\u88dd`gcloud`\u7d44\u4ef6\uff1a```\ngcloud components updategcloud components install beta\n```\n- \u5982\u9700\u4f7f\u7528 Python SDK\uff0c\u8acb\u6309\u7167 [\u5b89\u88dd Python \u7248 Vertex AI SDK](https://cloud.google.com/vertex-ai/docs/start/install-sdk?hl=zh-cn) \u4e2d\u7684\u8aaa\u660e\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Python \u7248 Vertex AI SDK API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/python/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n- \u53ef\u9078\u3002\u67e5\u770b\u6b64\u529f\u80fd\u7684 [\u50f9\u683c](https://cloud.google.com/vertex-ai/generative-ai/pricing?hl=zh-cn) \u3002\u5d4c\u5165\u7684\u50f9\u683c\u53d6\u6c7a\u65bc\u60a8\u767c\u9001\u7684\u6578\u64da\u985e\u578b\uff08\u4f8b\u5982\u5716\u7247\u6216\u6587\u672c\uff09\uff0c\u9084\u53d6\u6c7a\u65bc\u60a8\u7528\u65bc\u67d0\u4e9b\u6578\u64da\u985e\u578b\uff08\u4f8b\u5982 Video Plus\u3001Video Standard \u6216 Video Essential\uff09\u7684\u6a21\u5f0f\u3002\n### \u4f4d\u7f6e\n\u4f4d\u7f6e\u662f\u60a8\u53ef\u4ee5\u5728\u8acb\u6c42\u4e2d\u6307\u5b9a\u7684 [\u5340\u57df](https://cloud.google.com/about/locations?hl=zh-cn) \uff0c\u7528\u65bc\u63a7\u5236\u975c\u614b\u6578\u64da\u7684\u5b58\u5132\u4f4d\u7f6e\u3002\u5982\u9700\u67e5\u770b\u53ef\u7528\u5340\u57df\u7684\u5217\u8868\uff0c\u8acb\u53c3\u95b1 [Vertex AI \u4e0a\u7684\u751f\u6210\u5f0f AI \u4f4d\u7f6e](https://cloud.google.com/vertex-ai/generative-ai/docs/learn/locations-genai?hl=zh-cn) \u3002\n### \u932f\u8aa4\u6d88\u606f\n```\ngoogle.api_core.exceptions.ResourceExhausted: 429 Quota exceeded foraiplatform.googleapis.com/online_prediction_requests_per_base_model with basemodel: multimodalembedding. Please submit a quota increase request.\n```\n\u5982\u679c\u9019\u662f\u60a8\u7b2c\u4e00\u6b21\u6536\u5230\u6b64\u932f\u8aa4\uff0c\u8acb\u4f7f\u7528 Google Cloud \u63a7\u5236\u6aaf\u7232\u60a8\u7684\u9805\u76ee [\u7533\u8acb\u589e\u52a0\u914d\u984d](https://cloud.google.com/docs/quotas/view-manage?hl=zh-cn#requesting_higher_quota) \u3002\u5728\u7533\u8acb\u589e\u52a0\u914d\u984d\u4e4b\u524d\uff0c\u8acb\u4f7f\u7528\u4ee5\u4e0b\u904e\u6ffe\u689d\u4ef6\uff1a\n- `Service ID: aiplatform.googleapis.com`\n- `metric: aiplatform.googleapis.com/online_prediction_requests_per_base_model`\n- `base_model:multimodalembedding`\n[\u524d\u5f80\u914d\u984d](https://console.cloud.google.com/iam-admin/quotas?service=aiplatform.googleapis.com&%3Bmetric=aiplatform.googleapis.com%2Fonline_prediction_requests_per_base_model&%3Bbase_model=multimodalembedding&hl=zh-cn)\n\u5982\u679c\u60a8\u5df2\u767c\u9001\u914d\u984d\u589e\u52a0\u8acb\u6c42\uff0c\u8acb\u7b49\u5f85\u53e6\u4e00\u500b\u8acb\u6c42\u3002\u5982\u679c\u60a8\u9700\u8981\u9032\u4e00\u6b65\u589e\u52a0\u914d\u984d\uff0c\u8acb\u91cd\u8907\u589e\u52a0\u914d\u984d\u7533\u8acb\uff0c\u4e26\u63d0\u4f9b\u6301\u7e8c\u914d\u984d\u7533\u8acb\u7684\u7406\u7531\u3002\n### \u6307\u5b9a\u4f4e\u7dad\u5d4c\u5165\n\u9ed8\u8a8d\u60c5\u6cc1\u4e0b\uff0c\u5d4c\u5165\u8acb\u6c42\u6703\u7232\u4e00\u500b\u6578\u64da\u985e\u578b\u8fd4\u56de 1408 \u6d6e\u9ede\u77e2\u91cf\u3002\u60a8\u9084\u53ef\u4ee5\u7232\u6587\u672c\u548c\u5716\u7247\u6578\u64da\u6307\u5b9a\u4f4e\u7dad\u5d4c\u5165\uff08128\u3001256 \u6216 512 \u6d6e\u9ede\u5411\u91cf\uff09\u3002\u901a\u904e\u6b64\u9078\u9805\uff0c\u60a8\u53ef\u4ee5\u6839\u64da\u8a08\u5283\u4f7f\u7528\u5d4c\u5165\u7684\u65b9\u5f0f\u91dd\u5c0d\u5ef6\u9072\u6642\u9593\u548c\u5b58\u5132\u6216\u8cea\u91cf\u9032\u884c\u512a\u5316\u3002\u4f4e\u7dad\u5d4c\u5165\u7232\u5f8c\u7e8c\u5d4c\u5165\u4efb\u52d9\uff08\u4f8b\u5982\u641c\u7d22\u6216\u63a8\u85a6\uff09\u63d0\u4f9b\u4e86\u8f03\u4f4e\u7684\u5b58\u5132\u9700\u6c42\u548c\u66f4\u4f4e\u7684\u5ef6\u9072\uff0c\u800c\u9ad8\u7dad\u5d4c\u5165\u53ef\u7232\u76f8\u540c\u4efb\u52d9\u63d0\u4f9b\u66f4\u9ad8\u7684\u6e96\u78ba\u7387\u3002\n\u53ef\u4ee5\u901a\u904e\u6dfb\u52a0 `parameters.dimension` \u5b57\u6bb5\u4f86\u7372\u5f97\u8f03\u4f4e\u7dad\u5ea6\u3002\u8a72\u53c3\u6578\u63a5\u53d7\u4ee5\u4e0b\u503c\u4e4b\u4e00\uff1a `128` \u3001 `256` \u3001 `512` \u6216 `1408` \u3002\u97ff\u61c9\u5305\u542b\u8a72\u7dad\u5ea6\u7684\u5d4c\u5165\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a\u60a8\u7684\u9805\u76ee\u7684\u5340\u57df\u3002 \u4f8b\u5982`us-central1`\u3001`europe-west2`\u6216`asia-northeast3`\u3002\u5982\u9700\u67e5\u770b\u53ef\u7528\u5340\u57df\u7684\u5217\u8868\uff0c\u8acb\u53c3\u95b1 [Vertex AI \u4e0a\u7684\u751f\u6210\u5f0f AI \u4f4d\u7f6e](https://cloud.google.com/vertex-ai/generative-ai/docs/learn/locations-genai?hl=zh-cn) \u3002\n- \uff1a\u60a8\u7684 Google Cloud [\u9805\u76ee ID](https://cloud.google.com/resource-manager/docs/creating-managing-projects?hl=zh-cn#identifiers) \u3002\n- \uff1a\u8981\u7232\u5176\u7372\u53d6\u5d4c\u5165\u7684\u76ee\u6a19\u8996\u983b\u7684 Cloud Storage URI\u3002 \u4f8b\u5982`gs://my-bucket/embeddings/supermarket-img.png`\u3002\n- \uff1a\u8981\u7372\u53d6\u5d4c\u5165\u7684\u76ee\u6a19\u6587\u672c\u3002\u4f8b\u5982\uff1a`a cat`\u3002\n- \uff1a\u5d4c\u5165\u7dad\u5ea6\u7684\u6578\u91cf\u3002\u503c\u8d8a\u5c0f\uff0c\u5f8c\u7e8c\u4efb\u52d9\u4f7f\u7528\u9019\u4e9b\u5d4c\u5165\u6642\u7684\u5ef6\u9072\u6642\u9593\u5c31\u8d8a\u77ed\uff0c\u800c\u503c\u8d8a\u5927\uff0c\u6e96\u78ba\u7387\u5c31\u8d8a\u9ad8\u3002\u53ef\u7528\u503c\uff1a`128`\u3001`256`\u3001`512`\u548c`1408`\uff08\u9ed8\u8a8d\u503c\uff09\u3002\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nPOST https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/publishers/google/models/multimodalembedding@001:predict\n```\n\u8acb\u6c42 JSON \u6b63\u6587\uff1a\n```\n{\n \"instances\": [ {\n  \"image\": {\n  \"gcsUri\": \"IMAGE_URI\"\n  },\n  \"text\": \"TEXT\"\n }\n ],\n \"parameters\": {\n \"dimension\": EMBEDDING_DIMENSION\n }\n}\n```\n\u5982\u9700\u767c\u9001\u8acb\u6c42\uff0c\u8acb\u9078\u64c7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\uff1a\n **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/publishers/google/models/multimodalembedding@001:predict\"\n``` **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/publishers/google/models/multimodalembedding@001:predict\" | Select-Object -Expand Content\n```\n## \u767c\u9001\u5d4c\u5165\u8acb\u6c42\uff08\u5716\u7247\u548c\u6587\u672c\uff09\n**\u6ce8\u610f\uff1a** \u5c0d\u65bc\u7d14\u6587\u672c\u5d4c\u5165\u7528\u4f8b\uff0c\u6211\u5011\u5efa\u8b70\u6539\u7528 Vertex AI \u4e0a\u7684\u751f\u6210\u5f0f AI \u6587\u672c\u5d4c\u5165 API\u3002\u4f8b\u5982\uff0ctext-embeddings API \u53ef\u80fd\u66f4\u9069\u5408\u57fa\u65bc\u6587\u672c\u7684\u8a9e\u7fa9\u641c\u7d22\u3001\u805a\u985e\u3001\u9577\u6587\u6a94\u5206\u6790\u4ee5\u53ca\u5176\u4ed6\u6587\u672c\u6aa2\u7d22\u6216\u554f\u7b54\u7528\u4f8b\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7372\u53d6\u6587\u672c\u5d4c\u5165](https://cloud.google.com/vertex-ai/generative-ai/docs/embeddings/get-text-embeddings?hl=zh-cn) \u3002\n\u4f7f\u7528\u4ee5\u4e0b\u4ee3\u78bc\u793a\u4f8b\u767c\u9001\u5305\u542b\u5716\u7247\u548c\u6578\u64da\u7684\u5d4c\u5165\u8acb\u6c42\u3002\u9019\u4e9b\u793a\u4f8b\u5c55\u793a\u77ad\u5982\u4f55\u540c\u6642\u767c\u9001\u9019\u5169\u7a2e\u6578\u64da\u985e\u578b\u7684\u8acb\u6c42\uff0c\u4f46\u60a8\u4e5f\u53ef\u4ee5\u5c07\u8a72\u670d\u52d9\u7528\u65bc\u500b\u5225\u6578\u64da\u985e\u578b\u3002\n### \u7372\u53d6\u6587\u672c\u548c\u5716\u7247\u5d4c\u5165\n\u5982\u9700\u8a73\u7d30\u77ad\u89e3 `multimodalembedding` \u6a21\u578b\u8acb\u6c42\uff0c\u8acb\u53c3\u95b1 [multimodalembedding \u6a21\u578b API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/multimodal-embeddings?hl=zh-cn) \u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a\u60a8\u7684\u9805\u76ee\u7684\u5340\u57df\u3002 \u4f8b\u5982`us-central1`\u3001`europe-west2`\u6216`asia-northeast3`\u3002\u5982\u9700\u67e5\u770b\u53ef\u7528\u5340\u57df\u7684\u5217\u8868\uff0c\u8acb\u53c3\u95b1 [Vertex AI \u4e0a\u7684\u751f\u6210\u5f0f AI \u4f4d\u7f6e](https://cloud.google.com/vertex-ai/generative-ai/docs/learn/locations-genai?hl=zh-cn) \u3002\n- \uff1a\u60a8\u7684 Google Cloud [\u9805\u76ee ID](https://cloud.google.com/resource-manager/docs/creating-managing-projects?hl=zh-cn#identifiers) \u3002\n- \uff1a\u8981\u7372\u53d6\u5d4c\u5165\u7684\u76ee\u6a19\u6587\u672c\u3002\u4f8b\u5982\uff1a`a cat`\u3002\n- \uff1a\u8981\u7372\u53d6\u5d4c\u5165\u7684\u76ee\u6a19\u5716\u7247\u3002\u5716\u7247\u5fc5\u9808\u6307\u5b9a\u7232 [base64 \u7de8\u78bc](https://cloud.google.com/vertex-ai/generative-ai/docs/image/base64-encode?hl=zh-cn) \u7684\u5b57\u7bc0\u5b57\u7b26\u4e32\u3002\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nPOST https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/publishers/google/models/multimodalembedding@001:predict\n```\n\u8acb\u6c42 JSON \u6b63\u6587\uff1a\n```\n{\n \"instances\": [ {\n  \"text\": \"TEXT\",\n  \"image\": {\n  \"bytesBase64Encoded\": \"B64_ENCODED_IMG\"\n  }\n }\n ]\n}\n```\n\u5982\u9700\u767c\u9001\u8acb\u6c42\uff0c\u8acb\u9078\u64c7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\uff1a\n **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/publishers/google/models/multimodalembedding@001:predict\"\n``` **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/publishers/google/models/multimodalembedding@001:predict\" | Select-Object -Expand Content\n```\u6a21\u578b\u8fd4\u56de\u7684\u5d4c\u5165\u662f 1408 \u500b\u6d6e\u9ede\u77e2\u91cf\u3002\u4ee5\u4e0b\u793a\u4f8b\u97ff\u61c9\u6703\u7e2e\u77ed\u3002\n```\n{\n \"predictions\": [ {\n  \"textEmbedding\": [  0.010477379,\n  -0.00399621,\n  0.00576670747,\n  [...]\n  -0.00823613815,\n  -0.0169572588,\n  -0.00472954148\n  ],\n  \"imageEmbedding\": [  0.00262696808,\n  -0.00198890246,\n  0.0152047109,\n  -0.0103145819,\n  [...]\n  0.0324628279,\n  0.0284924973,\n  0.011650892,\n  -0.00452344026\n  ]\n }\n ],\n \"deployedModelId\": \"DEPLOYED_MODEL_ID\"\n}\n```\n\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u6216\u66f4\u65b0 Python\uff0c\u8acb\u53c3\u95b1 [\u5b89\u88dd Python \u7248 Vertex AI SDK](https://cloud.google.com/vertex-ai/docs/start/use-vertex-ai-python-sdk?hl=zh-cn) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Python API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/python/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/python-docs-samples/blob/HEAD/generative_ai/multimodal_embedding_image.py) \n```\nfrom typing import Optionalimport vertexaifrom vertexai.vision_models import (\u00a0 \u00a0 Image,\u00a0 \u00a0 MultiModalEmbeddingModel,\u00a0 \u00a0 MultiModalEmbeddingResponse,)def get_image_embeddings(\u00a0 \u00a0 project_id: str,\u00a0 \u00a0 location: str,\u00a0 \u00a0 image_path: str,\u00a0 \u00a0 contextual_text: Optional[str] = None,\u00a0 \u00a0 dimension: int = 1408,) -> MultiModalEmbeddingResponse:\u00a0 \u00a0 \"\"\"Example of how to generate multimodal embeddings from image and text.\u00a0 \u00a0 Args:\u00a0 \u00a0 \u00a0 \u00a0 project_id: Google Cloud Project ID, used to initialize vertexai\u00a0 \u00a0 \u00a0 \u00a0 location: Google Cloud Region, used to initialize vertexai\u00a0 \u00a0 \u00a0 \u00a0 image_path: Path to image (local or Google Cloud Storage) to generate embeddings for.\u00a0 \u00a0 \u00a0 \u00a0 contextual_text: Text to generate embeddings for.\u00a0 \u00a0 \u00a0 \u00a0 dimension: Dimension for the returned embeddings.\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 https://cloud.google.com/vertex-ai/docs/generative-ai/embeddings/get-multimodal-embeddings#low-dimension\u00a0 \u00a0 \"\"\"\u00a0 \u00a0 vertexai.init(project=project_id, location=location)\u00a0 \u00a0 model = MultiModalEmbeddingModel.from_pretrained(\"multimodalembedding\")\u00a0 \u00a0 image = Image.load_from_file(image_path)\u00a0 \u00a0 embeddings = model.get_embeddings(\u00a0 \u00a0 \u00a0 \u00a0 image=image,\u00a0 \u00a0 \u00a0 \u00a0 contextual_text=contextual_text,\u00a0 \u00a0 \u00a0 \u00a0 dimension=dimension,\u00a0 \u00a0 )\u00a0 \u00a0 print(f\"Image Embedding: {embeddings.image_embedding}\")\u00a0 \u00a0 print(f\"Text Embedding: {embeddings.text_embedding}\")\n```\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300a\u751f\u6210\u5f0f AI \u5feb\u901f\u5165\u9580\uff1a\u4f7f\u7528\u5ba2\u6236\u7aef\u5eab\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Node.js \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u751f\u6210\u5f0f AI Node.js API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/nodejs/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n\u5982\u9700\u5411\u751f\u6210\u5f0f AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/nodejs-docs-samples/blob/HEAD/ai-platform/snippets/predict-image-from-image-and-text.js) \n```\n/**\u00a0* TODO(developer): Uncomment these variables before running the sample.\\\u00a0* (Not necessary if passing values as arguments)\u00a0*/// const project = 'YOUR_PROJECT_ID';// const location = 'YOUR_PROJECT_LOCATION';// const bastImagePath = \"YOUR_BASED_IMAGE_PATH\"// const textPrompt = 'YOUR_TEXT_PROMPT';const aiplatform = require('@google-cloud/aiplatform');// Imports the Google Cloud Prediction service clientconst {PredictionServiceClient} = aiplatform.v1;// Import the helper module for converting arbitrary protobuf.Value objects.const {helpers} = aiplatform;// Specifies the location of the api endpointconst clientOptions = {\u00a0 apiEndpoint: 'us-central1-aiplatform.googleapis.com',};const publisher = 'google';const model = 'multimodalembedding@001';// Instantiates a clientconst predictionServiceClient = new PredictionServiceClient(clientOptions);async function predictImageFromImageAndText() {\u00a0 // Configure the parent resource\u00a0 const endpoint = `projects/${project}/locations/${location}/publishers/${publisher}/models/${model}`;\u00a0 const fs = require('fs');\u00a0 const imageFile = fs.readFileSync(baseImagePath);\u00a0 // Convert the image data to a Buffer and base64 encode it.\u00a0 const encodedImage = Buffer.from(imageFile).toString('base64');\u00a0 const prompt = {\u00a0 \u00a0 text: textPrompt,\u00a0 \u00a0 image: {\u00a0 \u00a0 \u00a0 bytesBase64Encoded: encodedImage,\u00a0 \u00a0 },\u00a0 };\u00a0 const instanceValue = helpers.toValue(prompt);\u00a0 const instances = [instanceValue];\u00a0 const parameter = {\u00a0 \u00a0 sampleCount: 1,\u00a0 };\u00a0 const parameters = helpers.toValue(parameter);\u00a0 const request = {\u00a0 \u00a0 endpoint,\u00a0 \u00a0 instances,\u00a0 \u00a0 parameters,\u00a0 };\u00a0 // Predict request\u00a0 const [response] = await predictionServiceClient.predict(request);\u00a0 console.log('Get image embedding response');\u00a0 const predictions = response.predictions;\u00a0 console.log('\\tPredictions :');\u00a0 for (const prediction of predictions) {\u00a0 \u00a0 console.log(`\\t\\tPrediction : ${JSON.stringify(prediction)}`);\u00a0 }}await predictImageFromImageAndText();\n```\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300a\u751f\u6210\u5f0f AI \u5feb\u901f\u5165\u9580\uff1a\u4f7f\u7528\u5ba2\u6236\u7aef\u5eab\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Java \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u751f\u6210\u5f0f AI Java API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/java/docs/reference/google-cloud-aiplatform/latest/com.google.cloud.aiplatform.v1?hl=zh-cn) \u3002\n\u5982\u9700\u5411\u751f\u6210\u5f0f AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/java-docs-samples/blob/HEAD/aiplatform/src/main/java/aiplatform/PredictImageFromImageAndTextSample.java) \n```\nimport com.google.cloud.aiplatform.v1beta1.EndpointName;import com.google.cloud.aiplatform.v1beta1.PredictResponse;import com.google.cloud.aiplatform.v1beta1.PredictionServiceClient;import com.google.cloud.aiplatform.v1beta1.PredictionServiceSettings;import com.google.gson.Gson;import com.google.gson.JsonObject;import com.google.protobuf.InvalidProtocolBufferException;import com.google.protobuf.Value;import com.google.protobuf.util.JsonFormat;import java.io.IOException;import java.nio.charset.StandardCharsets;import java.nio.file.Files;import java.nio.file.Paths;import java.util.ArrayList;import java.util.Base64;import java.util.HashMap;import java.util.List;import java.util.Map;public class PredictImageFromImageAndTextSample {\u00a0 public static void main(String[] args) throws IOException {\u00a0 \u00a0 // TODO(developer): Replace this variable before running the sample.\u00a0 \u00a0 String project = \"YOUR_PROJECT_ID\";\u00a0 \u00a0 String textPrompt = \"YOUR_TEXT_PROMPT\";\u00a0 \u00a0 String baseImagePath = \"YOUR_BASE_IMAGE_PATH\";\u00a0 \u00a0 // Learn how to use text prompts to update an image:\u00a0 \u00a0 // https://cloud.google.com/vertex-ai/docs/generative-ai/image/edit-images\u00a0 \u00a0 Map<String, Object> parameters = new HashMap<String, Object>();\u00a0 \u00a0 parameters.put(\"sampleCount\", 1);\u00a0 \u00a0 String location = \"us-central1\";\u00a0 \u00a0 String publisher = \"google\";\u00a0 \u00a0 String model = \"multimodalembedding@001\";\u00a0 \u00a0 predictImageFromImageAndText(\u00a0 \u00a0 \u00a0 \u00a0 project, location, publisher, model, textPrompt, baseImagePath, parameters);\u00a0 }\u00a0 // Update images using text prompts\u00a0 public static void predictImageFromImageAndText(\u00a0 \u00a0 \u00a0 String project,\u00a0 \u00a0 \u00a0 String location,\u00a0 \u00a0 \u00a0 String publisher,\u00a0 \u00a0 \u00a0 String model,\u00a0 \u00a0 \u00a0 String textPrompt,\u00a0 \u00a0 \u00a0 String baseImagePath,\u00a0 \u00a0 \u00a0 Map<String, Object> parameters)\u00a0 \u00a0 \u00a0 throws IOException {\u00a0 \u00a0 final String endpoint = String.format(\"%s-aiplatform.googleapis.com:443\", location);\u00a0 \u00a0 final PredictionServiceSettings predictionServiceSettings =\u00a0 \u00a0 \u00a0 \u00a0 PredictionServiceSettings.newBuilder().setEndpoint(endpoint).build();\u00a0 \u00a0 // Initialize client that will be used to send requests. This client only needs to be created\u00a0 \u00a0 // once, and can be reused for multiple requests.\u00a0 \u00a0 try (PredictionServiceClient predictionServiceClient =\u00a0 \u00a0 \u00a0 \u00a0 PredictionServiceClient.create(predictionServiceSettings)) {\u00a0 \u00a0 \u00a0 final EndpointName endpointName =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 EndpointName.ofProjectLocationPublisherModelName(project, location, publisher, model);\u00a0 \u00a0 \u00a0 // Convert the image to Base64\u00a0 \u00a0 \u00a0 byte[] imageData = Base64.getEncoder().encode(Files.readAllBytes(Paths.get(baseImagePath)));\u00a0 \u00a0 \u00a0 String encodedImage = new String(imageData, StandardCharsets.UTF_8);\u00a0 \u00a0 \u00a0 JsonObject jsonInstance = new JsonObject();\u00a0 \u00a0 \u00a0 jsonInstance.addProperty(\"text\", textPrompt);\u00a0 \u00a0 \u00a0 JsonObject jsonImage = new JsonObject();\u00a0 \u00a0 \u00a0 jsonImage.addProperty(\"bytesBase64Encoded\", encodedImage);\u00a0 \u00a0 \u00a0 jsonInstance.add(\"image\", jsonImage);\u00a0 \u00a0 \u00a0 Value instanceValue = stringToValue(jsonInstance.toString());\u00a0 \u00a0 \u00a0 List<Value> instances = new ArrayList<>();\u00a0 \u00a0 \u00a0 instances.add(instanceValue);\u00a0 \u00a0 \u00a0 Gson gson = new Gson();\u00a0 \u00a0 \u00a0 String gsonString = gson.toJson(parameters);\u00a0 \u00a0 \u00a0 Value parameterValue = stringToValue(gsonString);\u00a0 \u00a0 \u00a0 PredictResponse predictResponse =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 predictionServiceClient.predict(endpointName, instances, parameterValue);\u00a0 \u00a0 \u00a0 System.out.println(\"Predict Response\");\u00a0 \u00a0 \u00a0 System.out.println(predictResponse);\u00a0 \u00a0 \u00a0 for (Value prediction : predictResponse.getPredictionsList()) {\u00a0 \u00a0 \u00a0 \u00a0 System.out.format(\"\\tPrediction: %s\\n\", prediction);\u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 }\u00a0 }\u00a0 // Convert a Json string to a protobuf.Value\u00a0 static Value stringToValue(String value) throws InvalidProtocolBufferException {\u00a0 \u00a0 Value.Builder builder = Value.newBuilder();\u00a0 \u00a0 JsonFormat.parser().merge(value, builder);\u00a0 \u00a0 return builder.build();\u00a0 }}\n```\n## \u767c\u9001\u5d4c\u5165\u8acb\u6c42\uff08\u8996\u983b\u3001\u5716\u7247\u6216\u6587\u672c\uff09\n\u767c\u9001\u5d4c\u5165\u8acb\u6c42\u6642\uff0c\u60a8\u53ef\u4ee5\u55ae\u7368\u6307\u5b9a\u8f38\u5165\u8996\u983b\uff0c\u4e5f\u53ef\u4ee5\u6307\u5b9a\u8996\u983b\u3001\u5716\u7247\u548c\u6587\u672c\u6578\u64da\u7684\u7d44\u5408\u3002\n### \u8996\u983b\u5d4c\u5165\u6a21\u5f0f\n\u6709\u4e09\u7a2e\u6a21\u5f0f\u53ef\u7528\u65bc\u8996\u983b\u5d4c\u5165\uff1aEssential\u3001Standard \u6216 Plus\u3002\u8a72\u6a21\u5f0f\u8207\u751f\u6210\u7684\u5d4c\u5165\u7684\u5bc6\u5ea6\u76f8\u5c0d\u61c9\uff0c\u53ef\u4ee5\u7531\u8acb\u6c42\u4e2d\u7684 `interval_sec` \u914d\u7f6e\u6307\u5b9a\u3002\u5c0d\u65bc\u6642\u9577\u7232 `interval_sec` \u7684\u6bcf\u500b\u8996\u983b\u9593\u9694\uff0c\u7cfb\u7d71\u6703\u751f\u6210\u4e00\u500b\u5d4c\u5165\u3002\u8996\u983b\u9593\u9694\u6642\u9577\u4e0b\u9650\u7232 4 \u79d2\u3002\u9593\u9694\u6642\u9577\u8d85\u904e 120 \u79d2\u53ef\u80fd\u6703\u5c0d\u751f\u6210\u7684\u5d4c\u5165\u7684\u8cea\u91cf\u7522\u751f\u8ca0\u9762\u5f71\u97ff\u3002\n\u8996\u983b\u5d4c\u5165\u7684\u50f9\u683c\u53d6\u6c7a\u65bc\u60a8\u4f7f\u7528\u7684\u6a21\u5f0f\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u50f9\u683c](https://cloud.google.com/vertex-ai/generative-ai/pricing?hl=zh-cn) \u3002\n\u4e0b\u8868\u7e3d\u7d50\u4e86\u53ef\u7528\u65bc\u8996\u983b\u5d4c\u5165\u7684\u4e09\u7a2e\u6a21\u5f0f\uff1a\n| \u6a21\u5f0f | \u6bcf\u5206\u9418\u7684\u5d4c\u5165\u6578\u4e0a\u9650 | \u8996\u983b\u5d4c\u5165\u9593\u9694\uff08\u6700\u5c0f\u503c\uff09   |\n|:-------|---------------------:|:----------------------------------|\n| \u5fc5\u8981\u7684 |     4 | 15 \u9019\u5c0d\u61c9\u65bc\uff1aintervalSec >= 15 |\n| \u6a19\u6e96 |     8 | 8 \u9019\u5c0d\u61c9\u65bc\uff1a8 <= intervalSec < 15 |\n| Plus |     15 | 4 \u9019\u5c0d\u61c9\u65bc\uff1a4 <= intervalSec < 8 |\n### \u8996\u983b\u5d4c\u5165\u6700\u4f73\u5be6\u8e10\n\u767c\u9001\u8996\u983b\u5d4c\u5165\u8acb\u6c42\u6642\uff0c\u8acb\u8003\u616e\u4ee5\u4e0b\u4e8b\u9805\uff1a\n- \u5982\u9700\u7232\u4efb\u610f\u6642\u9577\u7684\u8f38\u5165\u8996\u983b\u7684\u524d\u5169\u5206\u9418\u751f\u6210\u55ae\u500b\u5d4c\u5165\uff0c\u8acb\u4f7f\u7528\u4ee5\u4e0b `videoSegmentConfig` \u8a2d\u7f6e\uff1a`request.json` \uff1a```\n// other request body content\"videoSegmentConfig\": {\u00a0 \"intervalSec\": 120}// other request body content\n```\n- \u5982\u9700\u7232\u6642\u9577\u8d85\u904e\u5169\u5206\u9418\u7684\u8996\u983b\u751f\u6210\u5d4c\u5165\uff0c\u60a8\u53ef\u4ee5\u767c\u9001\u591a\u500b\u5728 `videoSegmentConfig` \u4e2d\u6307\u5b9a\u958b\u59cb\u6642\u9593\u548c\u7d50\u675f\u6642\u9593\u7684\u8acb\u6c42\uff1a`request1.json` \uff1a```\n// other request body content\"videoSegmentConfig\": {\u00a0 \"startOffsetSec\": 0,\u00a0 \"endOffsetSec\": 120}// other request body content\n````request2.json` \uff1a```\n// other request body content\"videoSegmentConfig\": {\u00a0 \"startOffsetSec\": 120,\u00a0 \"endOffsetSec\": 240}// other request body content\n```\n### \u7372\u53d6\u8996\u983b\u5d4c\u5165\n\u4f7f\u7528\u4ee5\u4e0b\u793a\u4f8b\u55ae\u7368\u7372\u53d6\u8996\u983b\u5167\u5bb9\u7684\u5d4c\u5165\u3002\n\u5982\u9700\u8a73\u7d30\u77ad\u89e3 `multimodalembedding` \u6a21\u578b\u8acb\u6c42\uff0c\u8acb\u53c3\u95b1 [multimodalembedding \u6a21\u578b API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/multimodal-embeddings?hl=zh-cn) \u3002\n\u4ee5\u4e0b\u793a\u4f8b\u4f7f\u7528\u4f4d\u65bc Cloud Storage \u4e2d\u7684\u8996\u983b\u3002\u60a8\u9084\u53ef\u4ee5\u4f7f\u7528 `video.bytesBase64Encoded` \u5b57\u6bb5\u63d0\u4f9b\u8996\u983b\u7684 [base64 \u7de8\u78bc](https://cloud.google.com/vertex-ai/generative-ai/docs/image/base64-encode?hl=zh-cn) \u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a\u60a8\u7684\u9805\u76ee\u7684\u5340\u57df\u3002 \u4f8b\u5982`us-central1`\u3001`europe-west2`\u6216`asia-northeast3`\u3002\u5982\u9700\u67e5\u770b\u53ef\u7528\u5340\u57df\u7684\u5217\u8868\uff0c\u8acb\u53c3\u95b1 [Vertex AI \u4e0a\u7684\u751f\u6210\u5f0f AI \u4f4d\u7f6e](https://cloud.google.com/vertex-ai/generative-ai/docs/learn/locations-genai?hl=zh-cn) \u3002\n- \uff1a\u60a8\u7684 Google Cloud [\u9805\u76ee ID](https://cloud.google.com/resource-manager/docs/creating-managing-projects?hl=zh-cn#identifiers) \u3002\n- \uff1a\u8981\u7232\u5176\u7372\u53d6\u5d4c\u5165\u7684\u76ee\u6a19\u8996\u983b\u7684 Cloud Storage URI\u3002 \u4f8b\u5982`gs://my-bucket/embeddings/supermarket-video.mp4`\u3002\n- `videoSegmentConfig`\uff08\u3001\u3001\uff09\u3002\u53ef\u9078\u3002\u7232\u5176\u751f\u6210\u5d4c\u5165\u7684\u7279\u5b9a\u8996\u983b\u7247\u6bb5\uff08\u4ee5\u79d2\u7232\u55ae\u4f4d\uff09\u3002\u60a8\u7232`videoSegmentConfig.intervalSec`\u8a2d\u7f6e\u7684\u503c\u6703\u5f71\u97ff\u6536\u8cbb\u7684\u50f9\u683c\u5c64\u7d1a\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u8996\u983b\u5d4c\u5165\u6a21\u5f0f](https://cloud.google.com/vertex-ai/generative-ai/docs/embeddings/get-multimodal-embeddings?hl=zh-cn#video-modes) \u90e8\u5206\u548c [\u50f9\u683c](https://cloud.google.com/vertex-ai/generative-ai/pricing?hl=zh-cn) \u9801\u9762\u3002\u4f8b\u5982\uff1a```\n[...]\n\"videoSegmentConfig\": {\n \"startOffsetSec\": 10,\n \"endOffsetSec\": 60,\n \"intervalSec\": 10\n}\n[...]\n```\u4f7f\u7528\u6b64\u914d\u7f6e\u53ef\u6307\u5b9a\u5f9e 10 \u79d2\u5230 60 \u79d2\u7684\u8996\u983b\u6578\u64da\uff0c\u4f75\u7232\u4ee5\u4e0b 10 \u79d2\u7684\u8996\u983b\u9593\u9694\u751f\u6210\u5d4c\u5165\uff1a[10, 20), [20, 30), [30, 40), [40, 50), [50, 60)\u3002  \u6b64\u8996\u983b\u9593\u9694 ( `\"intervalSec\": 10` ) \u5c6c\u65bc [\u6a19\u6e96\u8996\u983b\u5d4c\u5165\u6a21\u5f0f](https://cloud.google.com/vertex-ai/generative-ai/docs/embeddings/get-multimodal-embeddings?hl=zh-cn#video-modes) \uff0c\u7528\u6236\u6309 [\u6a19\u6e96\u6a21\u5f0f\u50f9\u683c\u8cbb\u7387](https://cloud.google.com/vertex-ai/generative-ai/pricing?hl=zh-cn) \u8a08\u8cbb\u3002\u5982\u679c\u7701\u7565 `videoSegmentConfig` \uff0c\u5247\u670d\u52d9\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8a8d\u503c\uff1a `\"videoSegmentConfig\": { \"startOffsetSec\": 0, \"endOffsetSec\": 120, \"intervalSec\": 16 }` \u3002  \u6b64\u8996\u983b\u9593\u9694 ( `\"intervalSec\": 16` ) \u5c6c\u65bc [\u57fa\u672c\u8996\u983b\u5d4c\u5165\u6a21\u5f0f](https://cloud.google.com/vertex-ai/generative-ai/docs/embeddings/get-multimodal-embeddings?hl=zh-cn#video-modes) \uff0c\u7528\u6236\u6309 [\u57fa\u672c\u6a21\u5f0f\u50f9\u683c\u8cbb\u7387](https://cloud.google.com/vertex-ai/generative-ai/pricing?hl=zh-cn) \u8a08\u8cbb\u3002\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nPOST https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/publishers/google/models/multimodalembedding@001:predict\n```\n\u8acb\u6c42 JSON \u6b63\u6587\uff1a\n```\n{\n \"instances\": [ {\n  \"video\": {\n  \"gcsUri\": \"VIDEO_URI\",\n  \"videoSegmentConfig\": {\n   \"startOffsetSec\": START_SECOND,\n   \"endOffsetSec\": END_SECOND,\n   \"intervalSec\": INTERVAL_SECONDS\n  }\n  }\n }\n ]\n}\n```\n\u5982\u9700\u767c\u9001\u8acb\u6c42\uff0c\u8acb\u9078\u64c7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\uff1a\n **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/publishers/google/models/multimodalembedding@001:predict\"\n``` **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/publishers/google/models/multimodalembedding@001:predict\" | Select-Object -Expand Content\n```\u6a21\u578b\u8fd4\u56de\u7684\u5d4c\u5165\u662f 1408 \u500b\u6d6e\u9ede\u77e2\u91cf\u3002\u4ee5\u4e0b\u97ff\u61c9\u793a\u4f8b\u7e2e\u77ed\u4e86\u7a7a\u9593\u3002\n **\u97ff\u61c9\uff087 \u79d2\u8996\u983b\uff0c\u672a\u6307\u5b9a videoSegmentConfig\uff09\uff1a** \n```\n{\n \"predictions\": [ {\n  \"videoEmbeddings\": [  {\n   \"endOffsetSec\": 7,\n   \"embedding\": [   -0.0045467657,\n   0.0258095954,\n   0.0146885719,\n   0.00945400633,\n   [...]\n   -0.0023291884,\n   -0.00493789,\n   0.00975185353,\n   0.0168156829\n   ],\n   \"startOffsetSec\": 0\n  }\n  ]\n }\n ],\n \"deployedModelId\": \"DEPLOYED_MODEL_ID\"\n}\n```\n **\u97ff\u61c9\uff0859 \u79d2\u8996\u983b\uff0c\u63a1\u7528\u4ee5\u4e0b\u8996\u983b\u7247\u6bb5\u914d\u7f6e\uff1a\"videoSegmentConfig\": { \"startOffsetSec\": 0, \"endOffsetSec\": 60, \"intervalSec\": 10 }\uff09\uff1a** \n```\n{\n \"predictions\": [ {\n  \"videoEmbeddings\": [  {\n   \"endOffsetSec\": 10,\n   \"startOffsetSec\": 0,\n   \"embedding\": [   -0.00683252793,\n   0.0390476175,\n   [...]\n   0.00657121744,\n   0.013023301\n   ]\n  },\n  {\n   \"startOffsetSec\": 10,\n   \"endOffsetSec\": 20,\n   \"embedding\": [   -0.0104404651,\n   0.0357737206,\n   [...]\n   0.00509833824,\n   0.0131902946\n   ]\n  },\n  {\n   \"startOffsetSec\": 20,\n   \"embedding\": [   -0.0113538112,\n   0.0305239167,\n   [...]\n   -0.00195809244,\n   0.00941874553\n   ],\n   \"endOffsetSec\": 30\n  },\n  {\n   \"embedding\": [   -0.00299320649,\n   0.0322436653,\n   [...]\n   -0.00993082579,\n   0.00968887936\n   ],\n   \"startOffsetSec\": 30,\n   \"endOffsetSec\": 40\n  },\n  {\n   \"endOffsetSec\": 50,\n   \"startOffsetSec\": 40,\n   \"embedding\": [   -0.00591270532,\n   0.0368893594,\n   [...]\n   -0.00219071587,\n   0.0042470959\n   ]\n  },\n  {\n   \"embedding\": [   -0.00458270218,\n   0.0368121453,\n   [...]\n   -0.00317760976,\n   0.00595594104\n   ],\n   \"endOffsetSec\": 59,\n   \"startOffsetSec\": 50\n  }\n  ]\n }\n ],\n \"deployedModelId\": \"DEPLOYED_MODEL_ID\"\n}\n```\n\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u6216\u66f4\u65b0 Python\uff0c\u8acb\u53c3\u95b1 [\u5b89\u88dd Python \u7248 Vertex AI SDK](https://cloud.google.com/vertex-ai/docs/start/use-vertex-ai-python-sdk?hl=zh-cn) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Python API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/python/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/python-docs-samples/blob/HEAD/generative_ai/multimodal_embedding_video.py) \n```\nfrom typing import Optionalimport vertexaifrom vertexai.vision_models import (\u00a0 \u00a0 MultiModalEmbeddingModel,\u00a0 \u00a0 MultiModalEmbeddingResponse,\u00a0 \u00a0 Video,\u00a0 \u00a0 VideoSegmentConfig,)def get_video_embeddings(\u00a0 \u00a0 project_id: str,\u00a0 \u00a0 location: str,\u00a0 \u00a0 video_path: str,\u00a0 \u00a0 contextual_text: Optional[str] = None,\u00a0 \u00a0 dimension: Optional[int] = 1408,\u00a0 \u00a0 video_segment_config: Optional[VideoSegmentConfig] = None,) -> MultiModalEmbeddingResponse:\u00a0 \u00a0 \"\"\"Example of how to generate multimodal embeddings from video and text.\u00a0 \u00a0 Args:\u00a0 \u00a0 \u00a0 \u00a0 project_id: Google Cloud Project ID, used to initialize vertexai\u00a0 \u00a0 \u00a0 \u00a0 location: Google Cloud Region, used to initialize vertexai\u00a0 \u00a0 \u00a0 \u00a0 video_path: Path to video (local or Google Cloud Storage) to generate embeddings for.\u00a0 \u00a0 \u00a0 \u00a0 contextual_text: Text to generate embeddings for.\u00a0 \u00a0 \u00a0 \u00a0 dimension: Dimension for the returned embeddings.\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 https://cloud.google.com/vertex-ai/docs/generative-ai/embeddings/get-multimodal-embeddings#low-dimension\u00a0 \u00a0 \u00a0 \u00a0 video_segment_config: Define specific segments to generate embeddings for.\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 https://cloud.google.com/vertex-ai/docs/generative-ai/embeddings/get-multimodal-embeddings#video-best-practices\u00a0 \u00a0 \"\"\"\u00a0 \u00a0 vertexai.init(project=project_id, location=location)\u00a0 \u00a0 model = MultiModalEmbeddingModel.from_pretrained(\"multimodalembedding\")\u00a0 \u00a0 video = Video.load_from_file(video_path)\u00a0 \u00a0 embeddings = model.get_embeddings(\u00a0 \u00a0 \u00a0 \u00a0 video=video,\u00a0 \u00a0 \u00a0 \u00a0 video_segment_config=video_segment_config,\u00a0 \u00a0 \u00a0 \u00a0 contextual_text=contextual_text,\u00a0 \u00a0 \u00a0 \u00a0 dimension=dimension,\u00a0 \u00a0 )\u00a0 \u00a0 # Video Embeddings are segmented based on the video_segment_config.\u00a0 \u00a0 print(\"Video Embeddings:\")\u00a0 \u00a0 for video_embedding in embeddings.video_embeddings:\u00a0 \u00a0 \u00a0 \u00a0 print(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 f\"Video Segment: {video_embedding.start_offset_sec} - {video_embedding.end_offset_sec}\"\u00a0 \u00a0 \u00a0 \u00a0 )\u00a0 \u00a0 \u00a0 \u00a0 print(f\"Embedding: {video_embedding.embedding}\")\u00a0 \u00a0 print(f\"Text Embedding: {embeddings.text_embedding}\")\n```### \u7372\u53d6\u5716\u7247\u3001\u6587\u672c\u548c\u8996\u983b\u5d4c\u5165\n\u4f7f\u7528\u4ee5\u4e0b\u793a\u4f8b\u7372\u53d6\u8996\u983b\u3001\u6587\u672c\u548c\u5716\u7247\u5167\u5bb9\u7684\u5d4c\u5165\u3002\n\u5982\u9700\u8a73\u7d30\u77ad\u89e3 `multimodalembedding` \u6a21\u578b\u8acb\u6c42\uff0c\u8acb\u53c3\u95b1 [multimodalembedding \u6a21\u578b API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/multimodal-embeddings?hl=zh-cn) \u3002\n\u4ee5\u4e0b\u793a\u4f8b\u4f7f\u7528\u5716\u7247\u3001\u6587\u672c\u548c\u8996\u983b\u6578\u64da\u3002\u60a8\u53ef\u4ee5\u5728\u8acb\u6c42\u6b63\u6587\u4e2d\u4f7f\u7528\u9019\u4e9b\u6578\u64da\u985e\u578b\u7684\u4efb\u610f\u7d44\u5408\u3002\n\u6b64\u5916\uff0c\u6b64\u793a\u4f8b\u9084\u6703\u4f7f\u7528 Cloud Storage \u4e2d\u7684\u8996\u983b\u3002\u60a8\u9084\u53ef\u4ee5\u4f7f\u7528 `video.bytesBase64Encoded` \u5b57\u6bb5\u63d0\u4f9b\u8996\u983b\u7684 [base64 \u7de8\u78bc](https://cloud.google.com/vertex-ai/generative-ai/docs/image/base64-encode?hl=zh-cn) \u5b57\u7b26\u4e32\u8868\u793a\u5f62\u5f0f\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a\u60a8\u7684\u9805\u76ee\u7684\u5340\u57df\u3002 \u4f8b\u5982`us-central1`\u3001`europe-west2`\u6216`asia-northeast3`\u3002\u5982\u9700\u67e5\u770b\u53ef\u7528\u5340\u57df\u7684\u5217\u8868\uff0c\u8acb\u53c3\u95b1 [Vertex AI \u4e0a\u7684\u751f\u6210\u5f0f AI \u4f4d\u7f6e](https://cloud.google.com/vertex-ai/generative-ai/docs/learn/locations-genai?hl=zh-cn) \u3002\n- \uff1a\u60a8\u7684 Google Cloud [\u9805\u76ee ID](https://cloud.google.com/resource-manager/docs/creating-managing-projects?hl=zh-cn#identifiers) \u3002\n- \uff1a\u8981\u7372\u53d6\u5d4c\u5165\u7684\u76ee\u6a19\u6587\u672c\u3002\u4f8b\u5982\uff1a`a cat`\u3002\n- \uff1a\u8981\u7232\u5176\u7372\u53d6\u5d4c\u5165\u7684\u76ee\u6a19\u8996\u983b\u7684 Cloud Storage URI\u3002 \u4f8b\u5982`gs://my-bucket/embeddings/supermarket-img.png`\u3002\n- \uff1a\u8981\u7232\u5176\u7372\u53d6\u5d4c\u5165\u7684\u76ee\u6a19\u8996\u983b\u7684 Cloud Storage URI\u3002 \u4f8b\u5982`gs://my-bucket/embeddings/supermarket-video.mp4`\u3002\n- `videoSegmentConfig`\uff08\u3001\u3001\uff09\u3002\u53ef\u9078\u3002\u7232\u5176\u751f\u6210\u5d4c\u5165\u7684\u7279\u5b9a\u8996\u983b\u7247\u6bb5\uff08\u4ee5\u79d2\u7232\u55ae\u4f4d\uff09\u3002\u60a8\u7232`videoSegmentConfig.intervalSec`\u8a2d\u7f6e\u7684\u503c\u6703\u5f71\u97ff\u6536\u8cbb\u7684\u50f9\u683c\u5c64\u7d1a\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u8996\u983b\u5d4c\u5165\u6a21\u5f0f](https://cloud.google.com/vertex-ai/generative-ai/docs/embeddings/get-multimodal-embeddings?hl=zh-cn#video-modes) \u90e8\u5206\u548c [\u50f9\u683c](https://cloud.google.com/vertex-ai/generative-ai/pricing?hl=zh-cn) \u9801\u9762\u3002\u4f8b\u5982\uff1a```\n[...]\n\"videoSegmentConfig\": {\n \"startOffsetSec\": 10,\n \"endOffsetSec\": 60,\n \"intervalSec\": 10\n}\n[...]\n```\u4f7f\u7528\u6b64\u914d\u7f6e\u53ef\u6307\u5b9a\u5f9e 10 \u79d2\u5230 60 \u79d2\u7684\u8996\u983b\u6578\u64da\uff0c\u4f75\u7232\u4ee5\u4e0b 10 \u79d2\u7684\u8996\u983b\u9593\u9694\u751f\u6210\u5d4c\u5165\uff1a[10, 20), [20, 30), [30, 40), [40, 50), [50, 60)\u3002  \u6b64\u8996\u983b\u9593\u9694 ( `\"intervalSec\": 10` ) \u5c6c\u65bc [\u6a19\u6e96\u8996\u983b\u5d4c\u5165\u6a21\u5f0f](https://cloud.google.com/vertex-ai/generative-ai/docs/embeddings/get-multimodal-embeddings?hl=zh-cn#video-modes) \uff0c\u7528\u6236\u6309 [\u6a19\u6e96\u6a21\u5f0f\u50f9\u683c\u8cbb\u7387](https://cloud.google.com/vertex-ai/generative-ai/pricing?hl=zh-cn) \u8a08\u8cbb\u3002\u5982\u679c\u7701\u7565 `videoSegmentConfig` \uff0c\u5247\u670d\u52d9\u4f7f\u7528\u4ee5\u4e0b\u9ed8\u8a8d\u503c\uff1a `\"videoSegmentConfig\": { \"startOffsetSec\": 0, \"endOffsetSec\": 120, \"intervalSec\": 16 }` \u3002  \u6b64\u8996\u983b\u9593\u9694 ( `\"intervalSec\": 16` ) \u5c6c\u65bc [\u57fa\u672c\u8996\u983b\u5d4c\u5165\u6a21\u5f0f](https://cloud.google.com/vertex-ai/generative-ai/docs/embeddings/get-multimodal-embeddings?hl=zh-cn#video-modes) \uff0c\u7528\u6236\u6309 [\u57fa\u672c\u6a21\u5f0f\u50f9\u683c\u8cbb\u7387](https://cloud.google.com/vertex-ai/generative-ai/pricing?hl=zh-cn) \u8a08\u8cbb\u3002\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nPOST https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/publishers/google/models/multimodalembedding@001:predict\n```\n\u8acb\u6c42 JSON \u6b63\u6587\uff1a\n```\n{\n \"instances\": [ {\n  \"text\": \"TEXT\",\n  \"image\": {\n  \"gcsUri\": \"IMAGE_URI\"\n  },\n  \"video\": {\n  \"gcsUri\": \"VIDEO_URI\",\n  \"videoSegmentConfig\": {\n   \"startOffsetSec\": START_SECOND,\n   \"endOffsetSec\": END_SECOND,\n   \"intervalSec\": INTERVAL_SECONDS\n  }\n  }\n }\n ]\n}\n```\n\u5982\u9700\u767c\u9001\u8acb\u6c42\uff0c\u8acb\u9078\u64c7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\uff1a\n **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/publishers/google/models/multimodalembedding@001:predict\"\n``` **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/publishers/google/models/multimodalembedding@001:predict\" | Select-Object -Expand Content\n```\u6a21\u578b\u8fd4\u56de\u7684\u5d4c\u5165\u662f 1408 \u500b\u6d6e\u9ede\u77e2\u91cf\u3002\u4ee5\u4e0b\u793a\u4f8b\u97ff\u61c9\u6703\u7e2e\u77ed\u3002\n```\n{\n \"predictions\": [ {\n  \"textEmbedding\": [  0.0105433334,\n  -0.00302835181,\n  0.00656806398,\n  0.00603460241,\n  [...]\n  0.00445805816,\n  0.0139605571,\n  -0.00170318608,\n  -0.00490092579\n  ],\n  \"videoEmbeddings\": [  {\n   \"startOffsetSec\": 0,\n   \"endOffsetSec\": 7,\n   \"embedding\": [   -0.00673126569,\n   0.0248149596,\n   0.0128901172,\n   0.0107588246,\n   [...]\n   -0.00180952181,\n   -0.0054573305,\n   0.0117037306,\n   0.0169312079\n   ]\n  }\n  ],\n  \"imageEmbedding\": [  -0.00728622358,\n  0.031021487,\n  -0.00206603738,\n  0.0273937676,\n  [...]\n  -0.00204976718,\n  0.00321615417,\n  0.0121978866,\n  0.0193375275\n  ]\n }\n ],\n \"deployedModelId\": \"DEPLOYED_MODEL_ID\"\n}\n```\n\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u6216\u66f4\u65b0 Python\uff0c\u8acb\u53c3\u95b1 [\u5b89\u88dd Python \u7248 Vertex AI SDK](https://cloud.google.com/vertex-ai/docs/start/use-vertex-ai-python-sdk?hl=zh-cn) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Python API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/python/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/python-docs-samples/blob/HEAD/generative_ai/multimodal_embedding_image_video_text.py) \n```\nfrom typing import Optionalimport vertexaifrom vertexai.vision_models import (\u00a0 \u00a0 Image,\u00a0 \u00a0 MultiModalEmbeddingModel,\u00a0 \u00a0 MultiModalEmbeddingResponse,\u00a0 \u00a0 Video,\u00a0 \u00a0 VideoSegmentConfig,)def get_image_video_text_embeddings(\u00a0 \u00a0 project_id: str,\u00a0 \u00a0 location: str,\u00a0 \u00a0 image_path: str,\u00a0 \u00a0 video_path: str,\u00a0 \u00a0 contextual_text: Optional[str] = None,\u00a0 \u00a0 dimension: Optional[int] = 1408,\u00a0 \u00a0 video_segment_config: Optional[VideoSegmentConfig] = None,) -> MultiModalEmbeddingResponse:\u00a0 \u00a0 \"\"\"Example of how to generate multimodal embeddings from image, video, and text.\u00a0 \u00a0 Args:\u00a0 \u00a0 \u00a0 \u00a0 project_id: Google Cloud Project ID, used to initialize vertexai\u00a0 \u00a0 \u00a0 \u00a0 location: Google Cloud Region, used to initialize vertexai\u00a0 \u00a0 \u00a0 \u00a0 image_path: Path to image (local or Google Cloud Storage) to generate embeddings for.\u00a0 \u00a0 \u00a0 \u00a0 video_path: Path to video (local or Google Cloud Storage) to generate embeddings for.\u00a0 \u00a0 \u00a0 \u00a0 contextual_text: Text to generate embeddings for.\u00a0 \u00a0 \u00a0 \u00a0 dimension: Dimension for the returned embeddings.\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 https://cloud.google.com/vertex-ai/docs/generative-ai/embeddings/get-multimodal-embeddings#low-dimension\u00a0 \u00a0 \u00a0 \u00a0 video_segment_config: Define specific segments to generate embeddings for.\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 https://cloud.google.com/vertex-ai/docs/generative-ai/embeddings/get-multimodal-embeddings#video-best-practices\u00a0 \u00a0 \"\"\"\u00a0 \u00a0 vertexai.init(project=project_id, location=location)\u00a0 \u00a0 model = MultiModalEmbeddingModel.from_pretrained(\"multimodalembedding\")\u00a0 \u00a0 image = Image.load_from_file(image_path)\u00a0 \u00a0 video = Video.load_from_file(video_path)\u00a0 \u00a0 embeddings = model.get_embeddings(\u00a0 \u00a0 \u00a0 \u00a0 image=image,\u00a0 \u00a0 \u00a0 \u00a0 video=video,\u00a0 \u00a0 \u00a0 \u00a0 video_segment_config=video_segment_config,\u00a0 \u00a0 \u00a0 \u00a0 contextual_text=contextual_text,\u00a0 \u00a0 \u00a0 \u00a0 dimension=dimension,\u00a0 \u00a0 )\u00a0 \u00a0 print(f\"Image Embedding: {embeddings.image_embedding}\")\u00a0 \u00a0 # Video Embeddings are segmented based on the video_segment_config.\u00a0 \u00a0 print(\"Video Embeddings:\")\u00a0 \u00a0 for video_embedding in embeddings.video_embeddings:\u00a0 \u00a0 \u00a0 \u00a0 print(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 f\"Video Segment: {video_embedding.start_offset_sec} - {video_embedding.end_offset_sec}\"\u00a0 \u00a0 \u00a0 \u00a0 )\u00a0 \u00a0 \u00a0 \u00a0 print(f\"Embedding: {video_embedding.embedding}\")\u00a0 \u00a0 print(f\"Text Embedding: {embeddings.text_embedding}\")\n```\n## \u5f8c\u7e8c\u6b65\u9a5f\n- \u95b1\u8b80\u535a\u5ba2 [\u201c\u4ec0\u9ebc\u662f\u591a\u6a21\u5f0f\u641c\u7d22\uff1a\u2018\u6709\u9060\u898b\u7684\u6cd5\u5b78\u78a9\u58eb\u2019\u6539\u8b8a\u696d\u52d9\u201d](https://cloud.google.com/blog/products/ai-machine-learning/multimodal-generative-ai-search?hl=zh-cn) \u3002\n- \u5982\u9700\u77ad\u89e3\u7d14\u6587\u672c\u7528\u4f8b\uff08\u57fa\u65bc\u6587\u672c\u7684\u8a9e\u7fa9\u641c\u7d22\u3001\u805a\u985e\u3001\u9577\u6587\u6a94\u5206\u6790\u4ee5\u53ca\u5176\u4ed6\u6587\u672c\u6aa2\u7d22\u6216\u554f\u7b54\u7528\u4f8b\uff09\uff0c\u8acb\u53c3\u95b1 [\u7372\u53d6\u6587\u672c\u5d4c\u5165](https://cloud.google.com/vertex-ai/generative-ai/docs/embeddings/get-text-embeddings?hl=zh-cn) \u3002\n- \u5728 [Imagen on Vertex AI \u6982\u89bd](https://cloud.google.com/vertex-ai/generative-ai/docs/image/overview?hl=zh-cn) \u4e2d\u67e5\u770b\u6240\u6709 Vertex AI \u5716\u7247\u751f\u6210\u5f0f AI \u7522\u54c1\u3002\n- \u5728 [Model Garden](https://cloud.google.com/vertex-ai/docs/start/explore-models?hl=zh-cn) \u4e2d\u63a2\u7d22\u66f4\u591a\u9810\u8a13\u7df4\u6a21\u578b\u3002\n- \u77ad\u89e3 [Vertex AI \u4e2d Responsible AI \u6700\u4f73\u5be6\u8e10\u548c\u5b89\u5168\u904e\u6ffe\u689d\u4ef6](https://cloud.google.com/vertex-ai/generative-ai/docs/learn/responsible-ai?hl=zh-cn) \u3002", "guide": "Generative AI on Vertex AI"}