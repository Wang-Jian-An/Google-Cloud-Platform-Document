{"title": "Generative AI on Vertex AI - \u57f7\u884c\u81ea\u52d5\u4e26\u6392\u8a55\u4f30", "url": "https://cloud.google.com/vertex-ai/generative-ai/docs/models/side-by-side-eval?hl=zh-cn", "abstract": "# Generative AI on Vertex AI - \u57f7\u884c\u81ea\u52d5\u4e26\u6392\u8a55\u4f30\n**\u9810\u89bd** \u6b64\u529f\u80fd\u7232\u9810\u89bd\u7248\uff0c\u53d7 [GCP \u670d\u52d9\u5c08\u7528\u689d\u6b3e](https://cloud.google.com/terms/service-terms?hl=zh-cn) \u7684\u6b63\u5f0f\u767c\u4f48\u524d\u7522\u54c1\u689d\u6b3e\u7d04\u675f\u3002\u6211\u5011\u5c0d\u6b63\u5f0f\u767c\u4f48\u524d\u7522\u54c1\u548c\u529f\u80fd\u7684\u652f\u6301\u53ef\u80fd\u6bd4\u8f03\u6709\u9650\uff0c\u4e26\u4e14\u5c0d\u6b63\u5f0f\u767c\u4f48\u524d\u7522\u54c1\u548c\u529f\u80fd\u7684\u66f4\u6539\u53ef\u80fd\u8207\u5176\u4ed6\u6b63\u5f0f\u767c\u4f48\u524d\u7248\u672c\u4e0d\u517c\u5bb9\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u767c\u4f48\u968e\u6bb5\u8aaa\u660e](https://cloud.google.com/products?hl=zh-cn#product-launch-stages) \u3002  \u6b64\u5916\uff0c\u4f7f\u7528 PaLM API on Vertex AI \u5373\u8868\u793a\u60a8\u540c\u610f\u751f\u6210\u5f0f AI \u9810\u89bd\u7248 [\u689d\u6b3e\u53ca\u689d\u4ef6](https://cloud.google.com/trustedtester/aitos?hl=zh-CN) \uff08\u201c\u9810\u89bd\u7248\u689d\u6b3e\u201d\uff09\u3002\u5c0d\u65bc\u975e\u6b63\u5f0f\u7248 PaLM API on Vertex AI\uff0c\u60a8\u53ef\u4ee5\u6309\u7167\u300a\u96f2\u7aef\u6578\u64da\u8655\u7406\u9644\u9304\u300b\u4e2d\u7684\u8aaa\u660e\u8655\u7406\u500b\u4eba\u6578\u64da\uff0c\u4f46\u53d7\u5230\u5354\u8b70\u4e2d\u7684\u9069\u7528\u9650\u5236\u548c\u7fa9\u52d9\uff08\u5982\u201c\u9810\u89bd\u7248\u689d\u6b3e\u201d\u4e2d\u6240\u5b9a\u7fa9\uff09\u7684\u7d04\u675f\u3002\n\u5982\u9700\u67e5\u770b\u4f7f\u7528 AutoSxS \u9032\u884c\u8a55\u4f30\u7684\u793a\u4f8b\uff0c\u8acb\u5728\u4ee5\u4e0b\u67d0\u500b\u74b0\u5883\u4e2d\u904b\u884c\u201cAutoSxS\uff1a\u91dd\u5c0d\u7b2c\u4e09\u65b9\u6a21\u578b\u8a55\u4f30 Vertex AI Model Registry \u4e2d\u7684 LLM\u201dJupyter \u7b46\u8a18\u672c\uff1a [\u5728 Colab \u4e2d\u904b\u884c](https://colab.research.google.com/github/GoogleCloudPlatform/vertex-ai-samples/blob/main/notebooks/official/model_evaluation/model_based_llm_evaluation/autosxs_llm_evaluation_for_summarization_task.ipynb?hl=zh-cn) | [\u5728 Vertex AI Workbench \u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u4e2d\u6253\u958b](https://console.cloud.google.com/vertex-ai/workbench/deploy-notebook?download_url=https%3A%2F%2Fraw.githubusercontent.com%2FGoogleCloudPlatform%2Fvertex-ai-samples%2Fmain%2Fnotebooks%2Fofficial%2Fmodel_evaluation%2Fmodel_based_llm_evaluation%2Fautosxs_llm_evaluation_for_summarization_task.ipynb&hl=zh-cn) | [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/vertex-ai-samples/blob/main/notebooks/official/model_evaluation/model_based_llm_evaluation/autosxs_llm_evaluation_for_summarization_task.ipynb)\n\u672c\u9801\u9762\u4ecb\u7d39\u4e86 AutoSxS\uff08\u4e00\u7a2e\u7528\u65bc\u8a55\u4f30\u5f7c\u6b64\u76f8\u5c0d\u6a21\u578b\u7684\u5de5\u5177\uff09\uff0c\u4e26\u8aaa\u660e\u4e86\u5982\u4f55\u901a\u904e Vertex AI API \u6216 Python \u7248 Vertex AI SDK \u4f7f\u7528\u8a72\u5de5\u5177\u3002\n", "content": "## AutoSxS\n\u81ea\u52d5\u4e26\u6392\u8a55\u4f30 (AutoSxS) \u662f\u4e00\u7a2e\u6a21\u578b\u8f14\u52a9\u8a55\u4f30\u5de5\u5177\uff0c\u7528\u65bc\u4e26\u6392\u6bd4\u8f03\u5169\u500b\u5927\u8a9e\u8a00\u6a21\u578b (LLM)\u3002AutoSxS \u53ef\u7528\u65bc\u8a55\u4f30 [Vertex AI Model Registry](https://console.cloud.google.com/vertex-ai/?hl=zh-cn) \u4e2d\u7684\u751f\u6210\u5f0f AI \u6a21\u578b\u6216\u9810\u751f\u6210\u7684\u9810\u6e2c\u7684\u6027\u80fd\uff0c\u9019\u652f\u6301 Vertex AI \u57fa\u790e\u6a21\u578b\u3001\u8abf\u6574\u7684\u751f\u6210\u5f0f AI \u6a21\u578b\u548c\u7b2c\u4e09\u65b9\u8a9e\u8a00\u6a21\u578b\u3002AutoSxS \u4f7f\u7528\u81ea\u52d5\u8a55\u4f30\u5668\u4f86\u6c7a\u5b9a\u54ea\u500b\u6a21\u578b\u80fd\u91dd\u5c0d\u63d0\u793a\u7d66\u51fa\u66f4\u597d\u7684\u56de\u7b54\u3002\u5b83\u6309\u9700\u63d0\u4f9b\uff0c\u7528\u65bc\u8a55\u4f30\u8a9e\u8a00\u6a21\u578b\uff0c\u8207\u4eba\u985e\u6a19\u8a3b\u8005\u7684\u8a55\u4f30\u6548\u679c\u76f8\u7576\u3002\n### \u81ea\u52d5\u8a55\u4f30\u5668\n\u6982\u62ec\u4f86\u8b1b\uff0c\u4e0b\u5716\u986f\u793a\u4e86 AutoSxS \u5982\u4f55\u5c07\u6a21\u578b A \u548c B \u7684\u9810\u6e2c\u8207\u7b2c\u4e09\u500b\u6a21\u578b\uff08\u5373\u81ea\u52d5\u8a55\u4f30\u5668\uff09\u9032\u884c\u6bd4\u8f03\u3002\n\u6a21\u578b A \u548c B \u6703\u6536\u5230\u8f38\u5165\u63d0\u793a\uff0c\u6bcf\u500b\u6a21\u578b\u90fd\u6703\u751f\u6210\u767c\u9001\u5230\u81ea\u52d5\u8a55\u4f30\u5668\u7684\u56de\u7b54\u3002\u8207\u4eba\u5de5\u6a19\u8a3b\u8005\u985e\u4f3c\uff0c\u81ea\u52d5\u8a55\u4f30\u5668\u662f\u4e00\u7a2e\u8a9e\u8a00\u6a21\u578b\uff0c\u53ef\u6839\u64da\u539f\u59cb\u63a8\u7406\u63d0\u793a\u5224\u65b7\u6a21\u578b\u56de\u7b54\u7684\u8cea\u91cf\u3002\u85c9\u52a9 AutoSxS\uff0c\u81ea\u52d5\u8a55\u4f30\u5668\u6703\u4f7f\u7528 [\u4e00\u7d44\u6a19\u6e96](#tasks-and-criteria) \uff0c\u6839\u64da\u63a8\u7406\u6307\u4ee4\u6bd4\u8f03\u5169\u500b\u6a21\u578b\u56de\u7b54\u7684\u8cea\u91cf\u3002\u6a19\u6e96\u901a\u904e\u5c07\u6a21\u578b A \u7684\u7d50\u679c\u8207\u6a21\u578b B \u7684\u7d50\u679c\u9032\u884c\u6bd4\u8f03\u4f86\u78ba\u5b9a\u54ea\u500b\u6a21\u578b\u7684\u6027\u80fd\u6700\u597d\u3002\u81ea\u52d5\u8a55\u4f30\u5668\u6703\u5c07\u56de\u7b54\u504f\u597d\u8a2d\u7f6e\u8f38\u51fa\u7232 [\u805a\u5408\u6307\u6a19](#aggregate-metrics) \uff0c\u4f75\u7232\u6bcf\u500b\u793a\u4f8b\u8f38\u51fa\u504f\u597d\u8a2d\u7f6e\u8aaa\u660e\u548c\u7f6e\u4fe1\u5ea6\u5206\u6578\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u5224\u65b7\u8868](#judgments) \u3002\n\u4f7f\u7528 AutoSxS \u53ef\u4ee5\u5be6\u73fe\u4ee5\u4e0b\u512a\u52e2\uff1a\n- \u4e0d\u4f7f\u7528\u4eba\u985e\u504f\u597d\u6578\u64da\u8a55\u4f30\u81ea\u7136\u8a9e\u8a00\u6a21\u578b\u3002\n- \u8207\u4eba\u5de5\u6a19\u8a3b\u8005\u8a55\u4f30\u8a9e\u8a00\u6a21\u578b\u76f8\u6bd4\uff0c\u5176\u64f4\u7e2e\u6027\u66f4\u597d\u3001\u53ef\u7528\u6027\u66f4\u9ad8\u4e14\u8cbb\u7528\u66f4\u4f4e\u3002\n- \u901a\u904e\u6355\u7372\u504f\u597d\u8aaa\u660e\u548c\u7f6e\u4fe1\u5ea6\u5206\u6578\u4f86\u5be6\u73fe\u8a55\u5206\u900f\u660e\u5ea6\u3002## \u652f\u6301\u7684\u6a21\u578b\n\u5982\u679c\u63d0\u4f9b\u9810\u5148\u751f\u6210\u7684\u9810\u6e2c\uff0c\u5247 AutoSxS \u652f\u6301\u5c0d\u4efb\u4f55\u6a21\u578b\u9032\u884c\u8a55\u4f30\u3002AutoSxS \u9084\u652f\u6301\u7232\u652f\u6301 Vertex AI \u6279\u91cf\u9810\u6e2c\u7684 [Vertex AI Model Registry](https://console.cloud.google.com/vertex-ai/?hl=zh-cn) \u4e2d\u7684\u4efb\u4f55\u6a21\u578b\u81ea\u52d5\u751f\u6210\u56de\u7b54\u3002\n\u5982\u679c [Vertex AI Model Registry](https://console.cloud.google.com/vertex-ai/?hl=zh-cn) \u4e0d\u652f\u6301\u60a8\u7684 [\u6587\u672c\u6a21\u578b](https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/text?hl=zh-cn) \uff0cAutoSxS \u4e5f\u63a5\u53d7\u4ee5 JSONL \u5f62\u5f0f\u5b58\u5132\u5728 Cloud Storage \u4e2d\u7684\u9810\u751f\u6210\u9810\u6e2c\u6216 BigQuery \u8868\u3002\u5982\u9700\u77ad\u89e3\u50f9\u683c\uff0c\u8acb\u53c3\u95b1 [\u6587\u672c\u751f\u6210](https://cloud.google.com/vertex-ai/generative-ai/pricing?hl=zh-cn#text_generation) \u3002\n## \u652f\u6301\u7684\u4efb\u52d9\u548c\u689d\u4ef6\nAutoSxS \u652f\u6301\u8a55\u4f30\u6a21\u578b\u4ee5\u57f7\u884c\u6458\u8981\u548c\u554f\u7b54\u4efb\u52d9\u3002\u7cfb\u7d71\u6703\u7232\u6bcf\u500b\u4efb\u52d9\u9810\u5b9a\u7fa9\u8a55\u4f30\u6a19\u6e96\uff0c\u4f7f\u8a9e\u8a00\u8a55\u4f30\u66f4\u52a0\u5ba2\u89c0\u4e26\u63d0\u9ad8\u56de\u7b54\u8cea\u91cf\u3002\n\u6a19\u6e96\u6309\u4efb\u52d9\u5217\u51fa\u3002\n`summarization@001` \u4efb\u52d9\u7684\u8f38\u5165 [\u8a5e\u5143\u4e0a\u9650](https://cloud.google.com/vertex-ai/generative-ai/docs/compute-token?hl=zh-cn) \u7232 4,096 \u500b\u3002\n`summarization@001` \u7684\u8a55\u4f30\u6a19\u6e96\u5217\u8868\u5982\u4e0b\uff1a\n| \u689d\u4ef6   | Unnamed: 1           |\n|:----------------|:---------------------------------------------------|\n| 1. \u6309\u7167\u6307\u4ee4\u64cd\u4f5c | \u6a21\u578b\u7684\u56de\u7b54\u5728\u591a\u5927\u7a0b\u5ea6\u4e0a\u9ad4\u73fe\u4e86\u5c0d\u63d0\u793a\u4e2d\u6307\u4ee4\u7684\u7406\u89e3\uff1f |\n| 2. \u4ee5\u4e8b\u5be6\u7232\u4f9d\u64da | \u56de\u7b54\u662f\u5426\u50c5\u5305\u542b\u4f86\u81ea\u63a8\u7406\u4e0a\u4e0b\u6587\u548c\u63a8\u7406\u6307\u4ee4\u7684\u4fe1\u606f\uff1f  |\n| 3. \u7d9c\u5408\u5168\u9762  | \u6a21\u578b\u5728\u5f59\u7e3d\u904e\u7a0b\u4e2d\u6355\u7372\u95dc\u9375\u8a73\u7d30\u4fe1\u606f\u7684\u7a0b\u5ea6\u5982\u4f55\uff1f  |\n| 4.\u7c21\u8981   | \u6458\u8981\u662f\u5426\u8a73\u7d30\uff1f\u662f\u5426\u5305\u542b\u904e\u591a\u4fee\u98fe\u8fad\u85fb\uff1f\u662f\u5426\u904e\u65bc\u7c21\u6f54\uff1f |\n`question_answer@001` \u4efb\u52d9\u7684\u8f38\u5165 [\u8a5e\u5143\u4e0a\u9650](https://cloud.google.com/vertex-ai/generative-ai/docs/compute-token?hl=zh-cn) \u7232 4,096 \u500b\u3002\n`question_answer@001` \u7684\u8a55\u4f30\u6a19\u6e96\u5217\u8868\u5982\u4e0b\uff1a\n| \u689d\u4ef6   | Unnamed: 1          |\n|:----------------|:-----------------------------------------------|\n| 1. \u5b8c\u6574\u56de\u7b54\u554f\u984c | \u7b54\u6848\u5b8c\u6574\u56de\u7b54\u4e86\u554f\u984c\u3002       |\n| 2. \u4ee5\u4e8b\u5be6\u7232\u4f9d\u64da | \u56de\u7b54\u662f\u5426\u50c5\u5305\u542b\u4f86\u81ea\u6307\u4ee4\u4e0a\u4e0b\u6587\u548c\u63a8\u7406\u6307\u4ee4\u7684\u4fe1\u606f\uff1f |\n| 3. \u76f8\u95dc\u6027  | \u7b54\u6848\u7684\u5167\u5bb9\u662f\u5426\u8207\u554f\u984c\u76f8\u95dc\uff1f      |\n| 4.\u7d9c\u5408\u5168\u9762  | \u6a21\u578b\u6355\u7372\u554f\u984c\u95dc\u9375\u8a73\u7d30\u4fe1\u606f\u7684\u7a0b\u5ea6\u5982\u4f55\uff1f   |\n## \u6e96\u5099\u8a55\u4f30\u6578\u64da\u96c6\n\u672c\u90e8\u5206\u8a73\u7d30\u4ecb\u7d39\u4e86\u60a8\u61c9\u8a72\u5728\u8a55\u4f30\u6578\u64da\u96c6\u4e2d\u63d0\u4f9b\u7684\u6578\u64da\u4ee5\u53ca\u6578\u64da\u96c6\u69cb\u5efa\u7684\u6700\u4f73\u505a\u6cd5\u3002\u9019\u4e9b\u793a\u4f8b\u61c9\u53cd\u6620\u60a8\u7684\u6a21\u578b\u5728\u751f\u7522\u74b0\u5883\u4e2d\u53ef\u80fd\u9047\u5230\u7684\u771f\u5be6\u8f38\u5165\uff0c\u4e26\u8207\u5be6\u6642\u6a21\u578b\u7684\u884c\u7232\u9032\u884c\u6700\u4f73\u5c0d\u6bd4\u3002\n### \u6578\u64da\u96c6\u683c\u5f0f\nAutoSxS \u63a5\u53d7\u5177\u6709\u9748\u6d3b\u67b6\u69cb\u7684\u55ae\u500b\u8a55\u4f30\u6578\u64da\u96c6\u3002\u8a72\u6578\u64da\u96c6\u53ef\u4ee5\u662f BigQuery \u8868\uff0c\u4e5f\u53ef\u4ee5\u4f5c\u7232 [JSON \u884c](https://jsonlines.org/) \u5b58\u5132\u5728 Cloud Storage \u4e2d\u3002\n\u8a55\u4f30\u6578\u64da\u96c6\u7684\u6bcf\u4e00\u884c\u8868\u793a\u4e00\u500b\u6a23\u672c\uff0c\u5217\u662f\u4ee5\u4e0b\u5176\u4e2d\u4e00\u9805\uff1a\n- **ID \u5217** \uff1a\u7528\u65bc\u6a19\u8b58\u6bcf\u500b\u552f\u4e00\u6a23\u672c\u3002\n- **\u6578\u64da\u5217** \uff1a\u7528\u65bc\u586b\u5beb\u63d0\u793a\u6a21\u677f\u3002\u8acb\u53c3\u95b1 [\u63d0\u793a\u53c3\u6578](#prompt-params) \u3002\n- **\u9810\u5148\u751f\u6210\u7684\u9810\u6e2c** \uff1a\u7531\u540c\u4e00\u6a21\u578b\u4f7f\u7528\u76f8\u540c\u63d0\u793a\u9032\u884c\u7684\u9810\u6e2c\u3002\u4f7f\u7528\u9810\u5148\u751f\u6210\u7684\u9810\u6e2c\u53ef\u4ee5\u7bc0\u7701\u6642\u9593\u548c\u8cc7\u6e90\u3002\n- **\u6a19\u6e96\u7b54\u6848\u4eba\u985e\u504f\u597d** \uff1a\u5728\u7232\u9019\u5169\u500b\u6a21\u578b\u63d0\u4f9b\u9810\u5148\u751f\u6210\u7684\u9810\u6e2c\u6642\uff0c\u7528\u65bc\u6839\u64da\u6a19\u6e96\u7b54\u6848\u504f\u597d\u6578\u64da\u5c0d AutoSxS \u9032\u884c\u57fa\u6e96\u6e2c\u8a66\u3002\n\u4e0b\u9762\u662f\u4e00\u500b\u8a55\u4f30\u6578\u64da\u96c6\u793a\u4f8b\uff0c\u5176\u4e2d `context` \u548c `question` \u662f\u6578\u64da\u5217\uff0c `model_b_response` \u5305\u542b\u9810\u5148\u751f\u6210\u7684\u9810\u6e2c\u3002\n| context              | question   | model_b_response     |\n|:---------------------------------------------------------------|:-------------------|:-----------------------------------|\n| \u6709\u4e9b\u4eba\u53ef\u80fd\u8a8d\u7232\u92fc\u6216\u9226\u662f\u6700\u786c\u7684\u6750\u6599\uff0c\u4f46\u5be6\u969b\u4e0a\u947d\u77f3\u7e94\u662f\u6700\u786c\u7684\u6750\u6599\u3002 | \u6700\u786c\u7684\u6750\u6599\u662f\u4ec0\u9ebc\uff1f | \u947d\u77f3\u662f\u6700\u786c\u7684\u6750\u6599\uff0c\u6bd4\u92fc\u6216\u9226\u9084\u8981\u786c\u3002 |\n\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u5982\u4f55\u8abf\u7528 AutoSxS\uff0c\u8acb\u53c3\u95b1 [\u57f7\u884c\u6a21\u578b\u8a55\u4f30](#perform-eval) \u3002\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u8a5e\u5143\u9577\u5ea6\uff0c\u8acb\u53c3\u95b1 [\u652f\u6301\u7684\u4efb\u52d9\u548c\u6a19\u6e96](#tasks-and-criteria) \u3002\u5982\u9700\u5c07\u6578\u64da\u4e0a\u50b3\u5230 Cloud Storage\uff0c\u8acb\u53c3\u95b1 [\u5c07\u8a55\u4f30\u6578\u64da\u96c6\u4e0a\u50b3\u5230 Cloud Storage](https://cloud.google.com/vertex-ai/generative-ai/docs/models/evaluate-models?hl=zh-cn#upload-to-storage) \u3002\n### \u63d0\u793a\u53c3\u6578\n\u8a31\u591a\u8a9e\u8a00\u6a21\u578b\u5c07\u63d0\u793a\u53c3\u6578\u800c\u4e0d\u662f\u55ae\u500b\u63d0\u793a\u5b57\u7b26\u4e32\u4f5c\u7232\u8f38\u5165\u3002\u4f8b\u5982\uff0c [chat-bison](https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/text-chat?hl=zh-cn#request_body) \u63a1\u7528\u591a\u500b\u63d0\u793a\u53c3\u6578\uff08 \u6d88\u606f\u3001\u793a\u4f8b\u3001\u4e0a\u4e0b\u6587\uff09\uff0c\u9019\u4e9b\u53c3\u6578\u69cb\u6210\u63d0\u793a\u7684\u4e00\u90e8\u5206\u3002\u4f46\u662f\uff0c [text-bison](https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/text?hl=zh-cn) \u53ea\u6709\u4e00\u500b\u540d\u7232 **prompt** \u7684\u63d0\u793a\u53c3\u6578\uff0c\u5176\u4e2d\u5305\u542b\u6574\u500b\u63d0\u793a\u3002\n\u6211\u5011\u6982\u8ff0\u77ad\u5982\u4f55\u5728\u63a8\u7406\u548c\u8a55\u4f30\u6642\u9748\u6d3b\u6307\u5b9a\u6a21\u578b\u63d0\u793a\u53c3\u6578\u3002AutoSxS \u53ef\u8b93\u60a8\u901a\u904e\u6a21\u677f\u5316\u63d0\u793a\u53c3\u6578\u9748\u6d3b\u5730\u8abf\u7528\u5177\u6709\u4e0d\u540c\u9810\u671f\u8f38\u5165\u7684\u8a9e\u8a00\u6a21\u578b\u3002\n\u5982\u679c\u4efb\u4f55\u6a21\u578b\u6c92\u6709\u9810\u5148\u751f\u6210\u7684\u9810\u6e2c\uff0c\u5247 AutoSxS \u6703\u4f7f\u7528 Vertex AI \u6279\u91cf\u9810\u6e2c\u4f86\u751f\u6210\u56de\u7b54\u3002\u5fc5\u9808\u6307\u5b9a\u6bcf\u500b\u6a21\u578b\u7684\u63d0\u793a\u53c3\u6578\u3002\n\u5728 AutoSxS \u4e2d\uff0c\u60a8\u53ef\u4ee5\u63d0\u4f9b\u8a55\u4f30\u6578\u64da\u96c6\u7684\u55ae\u500b\u5217\u4f5c\u7232\u63d0\u793a\u53c3\u6578\u3002\n```\n{'some_parameter': {'column': 'my_column'}}\n```\n\u6216\u8005\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u8a55\u4f30\u6578\u64da\u96c6\u4e2d\u7684\u5217\u4f5c\u7232\u8b8a\u91cf\u4f86\u5b9a\u7fa9\u6a21\u677f\uff0c\u4ee5\u6307\u5b9a\u63d0\u793a\u53c3\u6578\uff1a\n```\n{'some_parameter': {'template': 'Summarize the following: {{ my_column }}.'}}\n```\n\u5728\u63d0\u4f9b\u63a8\u7406\u7684\u6a21\u578b\u63d0\u793a\u53c3\u6578\u6642\uff0c\u7528\u6236\u53ef\u4ee5\u4f7f\u7528\u53d7\u4fdd\u8b77\u7684 `default_instruction` \u95dc\u9375\u5b57\u4f5c\u7232\u6a21\u677f\u53c3\u6578\uff0c\u53d6\u800c\u4ee3\u4e4b\u7684\u662f\u7d66\u5b9a\u4efb\u52d9\u7684\u9ed8\u8a8d\u63a8\u7406\u6307\u4ee4\uff1a\n```\nmodel_prompt_parameters = {\u00a0 \u00a0 \u00a0 \u00a0 'prompt': {'template': '{{ default_instruction }}: {{ context }}'},}\n```\n\u5982\u679c\u751f\u6210\u9810\u6e2c\uff0c\u8acb\u63d0\u4f9b\u6a21\u578b\u63d0\u793a\u53c3\u6578\u548c\u8f38\u51fa\u5217\u3002\u4f8b\u5982\uff0c [text-bison \u4f7f\u7528\u201c\u63d0\u793a\u201d\u8868\u793a\u8f38\u5165\uff0c\u4f7f\u7528\u201c\u5167\u5bb9\u201d\u8868\u793a\u8f38\u51fa](https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/text?hl=zh-cn#sample_response) \u3002\u8acb\u6309\u7167\u4ee5\u4e0b\u6b65\u9a5f\u64cd\u4f5c\uff1a\n- \u78ba\u5b9a\u5f85\u8a55\u4f30\u6a21\u578b\u6240\u9700\u7684\u8f38\u5165\u548c\u8f38\u51fa\u3002\n- \u5c07\u8f38\u5165\u5b9a\u7fa9\u7232\u6a21\u578b\u63d0\u793a\u53c3\u6578\u3002\n- \u5c07\u8f38\u51fa\u50b3\u905e\u7d66\u56de\u7b54\u5217\u3002\n```\nmodel_a_prompt_parameters={\u00a0 \u00a0 'prompt': {\u00a0 \u00a0 \u00a0 \u00a0 'template': {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 'Answer the following question from the point of view of a college professor: {{ context }}\\n{{ question }}'\u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 },},response_column_a='content', \u00a0# Column in Model A response.response_column_b='model_b_response', \u00a0# Column in eval dataset.\n```\n\u5c31\u50cf\u60a8\u5fc5\u9808\u63d0\u4f9b\u7528\u65bc\u63a8\u7406\u7684\u63d0\u793a\u53c3\u6578\u4e00\u6a23\uff0c\u60a8\u9084\u5fc5\u9808\u63d0\u4f9b\u7528\u65bc\u8a55\u4f30\u7684\u63d0\u793a\u53c3\u6578\u3002 [\u81ea\u52d5\u8a55\u4f30\u5668](#autorater) \u9700\u8981\u4ee5\u4e0b\u63d0\u793a\u53c3\u6578\uff1a\n| \u81ea\u52d5\u8a55\u4f30\u5668\u63d0\u793a\u53c3\u6578 | \u662f\u5426\u53ef\u7531\u7528\u6236\u914d\u7f6e\uff1f | \u8aaa\u660e             | \u793a\u4f8b                        |\n|:---------------------|:---------------------|:-----------------------------------------------------|:-------------------------------------------------------------------------------------------------|\n| \u81ea\u52d5\u8a55\u4f30\u5668\u6307\u4ee4  | \u5426     | \u63cf\u8ff0\u81ea\u52d5\u8a55\u4f30\u5668\u61c9\u8a72\u7528\u4f86\u5224\u65b7\u7d66\u5b9a\u56de\u7b54\u7684\u689d\u4ef6\u7684\u6821\u6e96\u6307\u4ee4\u3002 | \u8acb\u9078\u64c7\u5c0d\u554f\u984c\u505a\u51fa\u56de\u7b54\u4e26\u4e14\u9075\u5faa\u6307\u4ee4\u7684\u6548\u679c\u6700\u597d\u7684\u56de\u7b54\u3002            |\n| \u63a8\u7406\u6307\u4ee4    | \u662f     | \u6bcf\u500b\u5019\u9078\u6a21\u578b\u61c9\u57f7\u884c\u7684\u4efb\u52d9\u7684\u8aaa\u660e\u3002      | \u6e96\u78ba\u56de\u7b54\u554f\u984c\uff1a\u54ea\u7a2e\u6750\u6599\u6700\u786c\uff1f                  |\n| \u63a8\u7406\u4e0a\u4e0b\u6587   | \u662f     | \u8981\u57f7\u884c\u7684\u4efb\u52d9\u7684\u5176\u4ed6\u4e0a\u4e0b\u6587\u3002       | \u96d6\u7136\u9226\u548c\u947d\u77f3\u7684\u786c\u5ea6\u90fd\u9ad8\u65bc\u9285\uff0c\u4f46\u947d\u77f3\u7684\u786c\u5ea6\u8a55\u5206\u7232 98\uff0c\u800c\u9226\u7684\u786c\u5ea6\u8a55\u5206\u7232 36\u3002\u8a55\u5206\u8d8a\u9ad8\uff0c\u8868\u793a\u786c\u5ea6\u8d8a\u9ad8\u3002 |\n| \u56de\u7b54     | \u54261     | \u9700\u8981\u8a55\u4f30\u7684\u4e00\u5c0d\u56de\u7b54\uff0c\u5206\u5225\u4f86\u81ea\u6bcf\u500b\u5019\u9078\u6a21\u578b\u3002   | \u83f1\u5f62                        |\n\u60a8\u53ea\u80fd\u901a\u904e\u9810\u5148\u751f\u6210\u7684\u56de\u7b54\u914d\u7f6e\u63d0\u793a\u53c3\u6578\u3002\n\u4f7f\u7528\u53c3\u6578\u7684\u793a\u4f8b\u4ee3\u78bc\uff1a\n```\nautorater_prompt_parameters={\u00a0 \u00a0 'inference_instruction': {\u00a0 \u00a0 \u00a0 \u00a0 'template': 'Answer the following question from the point of view of a college professor: {{ question }}.'\u00a0 \u00a0 },\u00a0 \u00a0 'inference_context': {\u00a0 \u00a0 \u00a0 \u00a0 'column': 'context'\u00a0 \u00a0 }}\n```\n\u7121\u8ad6\u662f\u5426\u63d0\u4f9b\u76f8\u540c\u7684\u4fe1\u606f\uff0c\u6a21\u578b A \u548c B \u7684\u63a8\u7406\u6307\u4ee4\u548c\u4e0a\u4e0b\u6587\u7684\u683c\u5f0f\u90fd\u53ef\u80fd\u4e0d\u540c\u3002\u9019\u610f\u5473\u7740\u81ea\u52d5\u8a55\u4f30\u5668\u6703\u63a1\u7528\u55ae\u7368\u7684\u63a8\u7406\u6307\u4ee4\u548c\u4e0a\u4e0b\u6587\u3002\n### \u8a55\u4f30\u6578\u64da\u96c6\u793a\u4f8b\n\u672c\u90e8\u5206\u63d0\u4f9b\u4e86\u4e00\u500b\u554f\u7b54\u4efb\u52d9\u8a55\u4f30\u6578\u64da\u96c6\u793a\u4f8b\uff0c\u5176\u4e2d\u5305\u62ec\u7232\u6a21\u578b B \u9810\u5148\u751f\u6210\u7684\u9810\u6e2c\u7d50\u679c\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0cAutoSxS \u50c5\u5c0d\u6a21\u578b A \u57f7\u884c\u63a8\u7406\u3002\u6211\u5011\u63d0\u4f9b `id` \u5217\u4f86\u5340\u5206\u5177\u6709\u76f8\u540c\u554f\u984c\u548c\u4e0a\u4e0b\u6587\u7684\u6a23\u672c\u3002\n```\n{\u00a0\"id\": 1,\u00a0\"question\": \"What is the hardest material?\",\u00a0 \"context\": \"Some might think that steel is the hardest material, or even titanium. However, diamond is actually the hardest material.\",\u00a0 \"model_b_response\": \"Diamond is the hardest material. It is harder than steel or titanium.\"}{\u00a0 \"id\": 2,\u00a0 \"question\": \"What is the highest mountain in the world?\",\u00a0 \"context\": \"K2 and Everest are the two tallest mountains, with K2 being just over 28k feet and Everest being 29k feet tall.\",\u00a0 \"model_b_response\": \"Mount Everest is the tallest mountain, with a height of 29k feet.\"}{\u00a0 \"id\": 3,\u00a0 \"question\": \"Who directed The Godfather?\",\u00a0 \"context\": \"Mario Puzo and Francis Ford Coppola co-wrote the screenplay for The Godfather, and the latter directed it as well.\",\u00a0 \"model_b_response\": \"Francis Ford Coppola directed The Godfather.\"}{\u00a0 \"id\": 4,\u00a0 \"question\": \"Who directed The Godfather?\",\u00a0 \"context\": \"Mario Puzo and Francis Ford Coppola co-wrote the screenplay for The Godfather, and the latter directed it as well.\",\u00a0 \"model_b_response\": \"John Smith.\"}\n```\n### \u6700\u4f73\u5be6\u8e10\n\u5b9a\u7fa9\u8a55\u4f30\u6578\u64da\u96c6\u6642\uff0c\u8acb\u9075\u5faa\u4ee5\u4e0b\u6700\u4f73\u505a\u6cd5\uff1a\n- \u63d0\u4f9b\u4ee3\u8868\u8f38\u5165\u985e\u578b\u7684\u6a23\u672c\uff0c\u60a8\u7684\u6a21\u578b\u5728\u751f\u7522\u74b0\u5883\u4e2d\u6703\u8655\u7406\u9019\u4e9b\u6a23\u672c\u3002\n- \u60a8\u7684\u6578\u64da\u96c6\u5fc5\u9808\u81f3\u5c11\u5305\u542b\u4e00\u500b\u8a55\u4f30\u6a23\u672c\u3002\u6211\u5011\u5efa\u8b70\u81f3\u5c11\u4f7f\u7528 400 \u500b\u6a23\u672c\uff0c\u4ee5\u78ba\u4fdd\u7372\u5f97\u9ad8\u8cea\u91cf\u7684\u805a\u5408\u6307\u6a19\u3002\u5982\u679c\u63d0\u4f9b\u7684\u793a\u4f8b\u8d85\u904e 600 \u500b\uff0c\u5247\u805a\u5408\u6307\u6a19\u8cea\u91cf\u7684\u63d0\u5347\u5f80\u5f80\u6703\u964d\u4f4e\u3002\n- \u5982\u9700\u67e5\u770b\u7de8\u5beb\u63d0\u793a\u7684\u6307\u5357\uff0c\u8acb\u53c3\u95b1 [\u8a2d\u8a08\u6587\u672c\u63d0\u793a](https://cloud.google.com/vertex-ai/generative-ai/docs/text/text-prompts?hl=zh-cn) \u3002\n- \u5982\u679c\u60a8\u8981\u7232\u4efb\u4e00\u6a21\u578b\u4f7f\u7528\u9810\u5148\u751f\u6210\u7684\u9810\u6e2c\uff0c\u8acb\u5728\u8a55\u4f30\u6578\u64da\u96c6\u7684\u5217\u4e2d\u5305\u542b\u9810\u5148\u751f\u6210\u7684\u9810\u6e2c\u3002\u63d0\u4f9b\u9810\u5148\u751f\u6210\u7684\u9810\u6e2c\u975e\u5e38\u6709\u7528\uff0c\u56e0\u7232\u60a8\u53ef\u4ee5\u6bd4\u8f03\u4e0d\u5728 [Vertex Model Registry](https://console.cloud.google.com/vertex-ai/?hl=zh-cn) \u4e2d\u7684\u6a21\u578b\u7684\u8f38\u51fa\uff0c\u4e26\u91cd\u5fa9\u4f7f\u7528\u56de\u7b54\u3002## \u57f7\u884c\u6a21\u578b\u8a55\u4f30\n\u60a8\u53ef\u4ee5\u4f7f\u7528 REST API \u6216 Python \u7248 Vertex AI SDK \u8a55\u4f30\u6a21\u578b\u3002\n\u4f7f\u7528\u6b64\u8a9e\u6cd5\u6307\u5b9a\u6a21\u578b\u7684\u8def\u5f91\uff1a\n- **\u767c\u4f48\u65b9\u6a21\u578b** \uff1a`publishers/` `` `/models/` ``\u793a\u4f8b\uff1a`publishers/google/models/text-bison`\n- **\u7d93\u8abf\u512a\u7684\u6a21\u578b** \uff1a `projects/` `` `/locations/` `` `/models/` `` `@` `` \u793a\u4f8b\uff1a `projects/123456789012/locations/us-central1/models/1234567890123456789`\n\u5982\u9700\u5275\u5efa\u6a21\u578b\u8a55\u4f30\u4f5c\u696d\uff0c\u8acb\u4f7f\u7528 [pipelineJobs](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/projects.locations.pipelineJobs/create?hl=zh-cn) \u65b9\u6cd5\u767c\u9001 `POST` \u8acb\u6c42\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a`pipelineJob`\u7684\u986f\u793a\u540d\u7a31\u3002\n- \uff1a\u904b\u884c\u6d41\u6c34\u7dda\u7d44\u4ef6\u7684 Google Cloud \u9805\u76ee\u3002\n- \uff1a\u7528\u65bc\u904b\u884c\u6d41\u6c34\u7dda\u7d44\u4ef6\u7684\u5340\u57df\u3002\u652f\u6301`us-central1`\u3002\n- \uff1a\u7528\u65bc\u5b58\u5132\u8a55\u4f30\u8f38\u51fa\u7684 Cloud Storage URI\u3002\n- \uff1aBigQuery \u8868\u6216\u4ee5\u9017\u865f\u5206\u9694\u7684 Cloud Storage \u8def\u5f91\uff08\u5305\u542b\u8a55\u4f30\u793a\u4f8b\u7684 JSONL \u6578\u64da\u96c6\u8def\u5f91\uff09\u5217\u8868\u3002\n- \uff1a\u8a55\u4f30\u4efb\u52d9\uff0c\u683c\u5f0f\u7232`{task}@{version}`\u3002`task`\u53ef\u4ee5\u662f`[summarization, question_answer]`\u4e4b\u4e00\u3002`version`\u662f\u4e00\u500b\u4e09\u4f4d\u6578\u6574\u6578\u6216 latest\u3002\u4f8b\u5982\uff1a`summarization@001`\u6216`question_answer@latest`\u3002\n- \uff1a\u7528\u65bc\u5340\u5206\u552f\u4e00\u8a55\u4f30\u793a\u4f8b\u7684\u5217\u3002\n- \uff1a\u6620\u5c04\u5230\u5217\u6216\u6a21\u677f\u7684\u81ea\u52d5\u8a55\u4f30\u5668\u63d0\u793a\u53c3\u6578\u3002\u9810\u671f\u53c3\u6578\u7232\uff1a`inference_instruction`\uff08\u6709\u95dc\u5982\u4f55\u57f7\u884c\u4efb\u52d9\u7684\u8a73\u7d30\u4fe1\u606f\uff09\u548c`inference_context`\uff08\u57f7\u884c\u4efb\u52d9\u6642\u53c3\u8003\u7684\u5167\u5bb9\uff09\u3002\u4f8b\u5982\uff0c`{'inference_context': {'column': 'my_prompt'}}`\u6703\u5c07\u8a55\u4f30\u6578\u64da\u96c6\u7684\u201cmy_prompt\u201d\u5217\u7528\u4f5c\u81ea\u52d5\u8a55\u4f30\u5668\u7684\u4e0a\u4e0b\u6587\u3002\n- \uff1a\u8a55\u4f30\u6578\u64da\u96c6\u4e2d\u5305\u542b\u9810\u5b9a\u7fa9\u9810\u6e2c\u7684\u5217\u7684\u540d\u7a31\uff0c\u6216\u6a21\u578b A \u8f38\u51fa\u4e2d\u5305\u542b\u9810\u6e2c\u7684\u5217\u7684\u540d\u7a31\u3002\u5982\u679c\u672a\u63d0\u4f9b\u503c\uff0c\u5c07\u5617\u8a66\u63a8\u7406\u6b63\u78ba\u7684\u6a21\u578b\u8f38\u51fa\u5217\u540d\u7a31\u3002\n- \uff1a\u8a55\u4f30\u6578\u64da\u96c6\u4e2d\u5305\u542b\u9810\u5b9a\u7fa9\u9810\u6e2c\u7684\u5217\u7684\u540d\u7a31\uff0c\u6216\u6a21\u578b B \u8f38\u51fa\u4e2d\u5305\u542b\u9810\u6e2c\u7684\u5217\u7684\u540d\u7a31\u3002\u5982\u679c\u672a\u63d0\u4f9b\u503c\uff0c\u5c07\u5617\u8a66\u63a8\u7406\u6b63\u78ba\u7684\u6a21\u578b\u8f38\u51fa\u5217\u540d\u7a31\u3002\n- \uff08\u53ef\u9078\uff09\uff1a\u5b8c\u5168\u9650\u5b9a\u7684\u6a21\u578b\u8cc7\u6e90\u540d\u7a31 (`projects/{project}/locations/{location}/models/{model}@{version}`) \u6216\u767c\u4f48\u65b9\u6a21\u578b\u8cc7\u6e90\u540d\u7a31 (`publishers/{publisher}/models/{model}`)\u3002\u5982\u679c\u6307\u5b9a\u4e86\u6a21\u578b A \u56de\u7b54\uff0c\u5247\u4e0d\u61c9\u63d0\u4f9b\u6b64\u53c3\u6578\u3002\n- \uff08\u53ef\u9078\uff09\uff1a\u5b8c\u5168\u9650\u5b9a\u7684\u6a21\u578b\u8cc7\u6e90\u540d\u7a31 (`projects/{project}/locations/{location}/models/{model}@{version}`) \u6216\u767c\u4f48\u65b9\u6a21\u578b\u8cc7\u6e90\u540d\u7a31 (`publishers/{publisher}/models/{model}`)\u3002\u5982\u679c\u6307\u5b9a\u4e86\u6a21\u578b B \u56de\u7b54\uff0c\u5247\u4e0d\u61c9\u63d0\u4f9b\u6b64\u53c3\u6578\u3002\n- \uff08\u53ef\u9078\uff09\uff1a\u6a21\u578b A \u7684\u6620\u5c04\u5230\u5217\u6216\u6a21\u677f\u7684\u63d0\u793a\u6a21\u677f\u53c3\u6578\u3002\u5982\u679c\u6a21\u578b A \u7684\u56de\u7b54\u662f\u9810\u5148\u5b9a\u7fa9\u7684\uff0c\u5247\u4e0d\u61c9\u63d0\u4f9b\u6b64\u53c3\u6578\u3002\u793a\u4f8b\uff1a`{'prompt': {'column': 'my_prompt'}}`\u5c07\u8a55\u4f30\u6578\u64da\u96c6\u7684`my_prompt`\u5217\u7528\u65bc\u540d\u7232`prompt`\u7684\u63d0\u793a\u53c3\u6578\u3002\n- \uff08\u53ef\u9078\uff09\uff1a\u6a21\u578b B \u7684\u6620\u5c04\u5230\u5217\u6216\u6a21\u677f\u7684\u63d0\u793a\u6a21\u677f\u53c3\u6578\u3002\u5982\u679c\u6a21\u578b B \u7684\u56de\u7b54\u662f\u9810\u5b9a\u7fa9\u7684\uff0c\u5247\u4e0d\u61c9\u63d0\u4f9b\u6b64\u53c3\u6578\u3002\u793a\u4f8b\uff1a`{'prompt': {'column': 'my_prompt'}}`\u5c07\u8a55\u4f30\u6578\u64da\u96c6\u7684`my_prompt`\u5217\u7528\u65bc\u540d\u7232`prompt`\u7684\u63d0\u793a\u53c3\u6578\u3002\n\u8acb\u6c42 JSON \u6b63\u6587\n```\n\u00a0 {\u00a0 \u00a0 \"displayName\": \"PIPELINEJOB_DISPLAYNAME\",\u00a0 \u00a0 \"runtimeConfig\": {\u00a0 \u00a0 \u00a0 \u00a0 \"gcsOutputDirectory\": \"gs://OUTPUT_DIR\",\u00a0 \u00a0 \u00a0 \u00a0 \"parameterValues\": {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"evaluation_dataset\": \"EVALUATION_DATASET\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"id_columns\": [\"ID_COLUMNS\"],\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"task\": \"TASK\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"autorater_prompt_parameters\": AUTORATER_PROMPT_PARAMETERS,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"response_column_a\": \"RESPONSE_COLUMN_A\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"response_column_b\": \"RESPONSE_COLUMN_B\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"model_a\": \"MODEL_A\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"model_a_prompt_parameters\": MODEL_A_PROMPT_PARAMETERS,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"model_b\": \"MODEL_B\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"model_b_prompt_parameters\": MODEL_B_PROMPT_PARAMETERS,\u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 },\u00a0 \u00a0 \"templateUri\": \"https://us-kfp.pkg.dev/ml-pipeline/google-cloud-registry/autosxs-template/default\"\u00a0 }\n```\n\u4f7f\u7528 `curl` \u767c\u9001\u8acb\u6c42\u3002\n```\ncurl -X POST \\\u00a0 \u00a0 -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\\u00a0 \u00a0 -H \"Content-Type: application/json; charset=utf-8\" \\\u00a0 \u00a0 -d @request.json \\\u00a0 \u00a0 \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/pipelineJobs\"\n```\n\u97ff\u61c9\n```\n\u00a0 \"state\": \"PIPELINE_STATE_PENDING\",\u00a0 \"labels\": {\u00a0 \u00a0 \"vertex-ai-pipelines-run-billing-id\": \"1234567890123456789\"\u00a0 },\u00a0 \"runtimeConfig\": {\u00a0 \u00a0 \"gcsOutputDirectory\": \"gs://my-evaluation-bucket/output\",\u00a0 \u00a0 \"parameterValues\": {\u00a0 \u00a0 \u00a0 \"evaluation_dataset\": \"gs://my-evaluation-bucket/output/data.json\",\u00a0 \u00a0 \u00a0 \"id_columns\": [\u00a0 \u00a0 \u00a0 \u00a0 \"context\"\u00a0 \u00a0 \u00a0 ],\u00a0 \u00a0 \u00a0 \"task\": \"question_answer@001\",\u00a0 \u00a0 \u00a0 \"autorater_prompt_parameters\": {\u00a0 \u00a0 \u00a0 \u00a0 \"inference_instruction\": {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"template\": \"Answer the following question: {{ question }} }.\"\u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 \"inference_context\": {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"column\": \"context\"\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \"response_column_a\": \"\",\u00a0 \u00a0 \u00a0 \"response_column_b\": \"response_b\",\u00a0 \u00a0 \u00a0 \"model_a\": \"publishers/google/models/text-bison@001\",\u00a0 \u00a0 \u00a0 \"model_a_prompt_parameters\": {\u00a0 \u00a0 \u00a0 \u00a0 \"prompt\": {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"template\": \"Answer the following question from the point of view of a college professor: {{ question }}\\n{{ context }} }\"\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \"model_b\": \"\",\u00a0 \u00a0 \u00a0 \"model_b_prompt_parameters\": {}\u00a0 \u00a0 }\u00a0 },\u00a0 \"serviceAccount\": \"123456789012-compute@developer.gserviceaccount.com\",\u00a0 \"templateUri\": \"https://us-kfp.pkg.dev/ml-pipeline/google-cloud-registry/autosxs-template/default\",\u00a0 \"templateMetadata\": {\u00a0 \u00a0 \"version\": \"sha256:7366b784205551ed28f2c076e841c0dbeec4111b6df16743fc5605daa2da8f8a\"\u00a0 }}\n```\n\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u6216\u66f4\u65b0 Python \u7248 Vertex AI SDK\uff0c\u8acb\u53c3\u95b1 [\u5b89\u88dd Python \u7248 Vertex AI SDK](https://cloud.google.com/vertex-ai/docs/python-sdk/use-vertex-ai-python-sdk?hl=zh-cn) \u3002\u5982\u9700\u8a73\u7d30\u77ad\u89e3 Python API\uff0c\u8acb\u53c3\u95b1 [Python \u7248 Vertex AI SDK API](https://cloud.google.com/python/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u6d41\u6c34\u7dda\u53c3\u6578\uff0c\u8acb\u53c3\u95b1 [Google Cloud \u6d41\u6c34\u7dda\u7d44\u4ef6\u53c3\u8003\u6587\u6a94](https://google-cloud-pipeline-components.readthedocs.io/en/google-cloud-pipeline-components-2.8.0/_modules/google_cloud_pipeline_components/preview/model_evaluation/model_based_llm_evaluation/autosxs/autosxs_pipeline.html#autosxs_pipeline) \u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a`pipelineJob`\u7684\u986f\u793a\u540d\u7a31\u3002\n- \uff1a\u904b\u884c\u6d41\u6c34\u7dda\u7d44\u4ef6\u7684 Google Cloud \u9805\u76ee\u3002\n- \uff1a\u7528\u65bc\u904b\u884c\u6d41\u6c34\u7dda\u7d44\u4ef6\u7684\u5340\u57df\u3002\u652f\u6301`us-central1`\u3002\n- \uff1a\u7528\u65bc\u5b58\u5132\u8a55\u4f30\u8f38\u51fa\u7684 Cloud Storage URI\u3002\n- \uff1aBigQuery \u8868\u6216\u4ee5\u9017\u865f\u5206\u9694\u7684 Cloud Storage \u8def\u5f91\uff08\u5305\u542b\u8a55\u4f30\u793a\u4f8b\u7684 JSONL \u6578\u64da\u96c6\u8def\u5f91\uff09\u5217\u8868\u3002\n- \uff1a\u8a55\u4f30\u4efb\u52d9\uff0c\u683c\u5f0f\u7232`{task}@{version}`\u3002`task`\u53ef\u4ee5\u662f`[summarization, question_answer]`\u4e4b\u4e00\u3002`version`\u662f\u4e00\u500b\u4e09\u4f4d\u6578\u6574\u6578\u6216 latest\u3002\u4f8b\u5982\uff1a`summarization@001`\u6216`question_answer@latest`\u3002\n- \uff1a\u7528\u65bc\u5340\u5206\u552f\u4e00\u8a55\u4f30\u793a\u4f8b\u7684\u5217\u3002\n- \uff1a\u6620\u5c04\u5230\u5217\u6216\u6a21\u677f\u7684\u81ea\u52d5\u8a55\u4f30\u5668\u63d0\u793a\u53c3\u6578\u3002\u9810\u671f\u53c3\u6578\u7232\uff1a`inference_instruction`\uff08\u6709\u95dc\u5982\u4f55\u57f7\u884c\u4efb\u52d9\u7684\u8a73\u7d30\u4fe1\u606f\uff09\u548c`inference_context`\uff08\u57f7\u884c\u4efb\u52d9\u6642\u53c3\u8003\u7684\u5167\u5bb9\uff09\u3002\u4f8b\u5982\uff0c`{'inference_context': {'column': 'my_prompt'}}`\u6703\u5c07\u8a55\u4f30\u6578\u64da\u96c6\u7684\u201cmy_prompt\u201d\u5217\u7528\u4f5c\u81ea\u52d5\u8a55\u4f30\u5668\u7684\u4e0a\u4e0b\u6587\u3002\n- \uff1a\u8a55\u4f30\u6578\u64da\u96c6\u4e2d\u5305\u542b\u9810\u5b9a\u7fa9\u9810\u6e2c\u7684\u5217\u7684\u540d\u7a31\uff0c\u6216\u6a21\u578b A \u8f38\u51fa\u4e2d\u5305\u542b\u9810\u6e2c\u7684\u5217\u7684\u540d\u7a31\u3002\u5982\u679c\u672a\u63d0\u4f9b\u503c\uff0c\u5c07\u5617\u8a66\u63a8\u7406\u6b63\u78ba\u7684\u6a21\u578b\u8f38\u51fa\u5217\u540d\u7a31\u3002\n- \uff1a\u8a55\u4f30\u6578\u64da\u96c6\u4e2d\u5305\u542b\u9810\u5b9a\u7fa9\u9810\u6e2c\u7684\u5217\u7684\u540d\u7a31\uff0c\u6216\u6a21\u578b B \u8f38\u51fa\u4e2d\u5305\u542b\u9810\u6e2c\u7684\u5217\u7684\u540d\u7a31\u3002\u5982\u679c\u672a\u63d0\u4f9b\u503c\uff0c\u5c07\u5617\u8a66\u63a8\u7406\u6b63\u78ba\u7684\u6a21\u578b\u8f38\u51fa\u5217\u540d\u7a31\u3002\n- \uff08\u53ef\u9078\uff09\uff1a\u5b8c\u5168\u9650\u5b9a\u7684\u6a21\u578b\u8cc7\u6e90\u540d\u7a31 (`projects/{project}/locations/{location}/models/{model}@{version}`) \u6216\u767c\u4f48\u65b9\u6a21\u578b\u8cc7\u6e90\u540d\u7a31 (`publishers/{publisher}/models/{model}`)\u3002\u5982\u679c\u6307\u5b9a\u4e86\u6a21\u578b A \u56de\u7b54\uff0c\u5247\u4e0d\u61c9\u63d0\u4f9b\u6b64\u53c3\u6578\u3002\n- \uff08\u53ef\u9078\uff09\uff1a\u5b8c\u5168\u9650\u5b9a\u7684\u6a21\u578b\u8cc7\u6e90\u540d\u7a31 (`projects/{project}/locations/{location}/models/{model}@{version}`) \u6216\u767c\u4f48\u65b9\u6a21\u578b\u8cc7\u6e90\u540d\u7a31 (`publishers/{publisher}/models/{model}`)\u3002\u5982\u679c\u6307\u5b9a\u4e86\u6a21\u578b B \u56de\u7b54\uff0c\u5247\u4e0d\u61c9\u63d0\u4f9b\u6b64\u53c3\u6578\u3002\n- \uff08\u53ef\u9078\uff09\uff1a\u6a21\u578b A \u7684\u6620\u5c04\u5230\u5217\u6216\u6a21\u677f\u7684\u63d0\u793a\u6a21\u677f\u53c3\u6578\u3002\u5982\u679c\u6a21\u578b A \u7684\u56de\u7b54\u662f\u9810\u5148\u5b9a\u7fa9\u7684\uff0c\u5247\u4e0d\u61c9\u63d0\u4f9b\u6b64\u53c3\u6578\u3002\u793a\u4f8b\uff1a`{'prompt': {'column': 'my_prompt'}}`\u5c07\u8a55\u4f30\u6578\u64da\u96c6\u7684`my_prompt`\u5217\u7528\u65bc\u540d\u7232`prompt`\u7684\u63d0\u793a\u53c3\u6578\u3002\n- \uff08\u53ef\u9078\uff09\uff1a\u6a21\u578b B \u7684\u6620\u5c04\u5230\u5217\u6216\u6a21\u677f\u7684\u63d0\u793a\u6a21\u677f\u53c3\u6578\u3002\u5982\u679c\u6a21\u578b B \u7684\u56de\u7b54\u662f\u9810\u5b9a\u7fa9\u7684\uff0c\u5247\u4e0d\u61c9\u63d0\u4f9b\u6b64\u53c3\u6578\u3002\u793a\u4f8b\uff1a`{'prompt': {'column': 'my_prompt'}}`\u5c07\u8a55\u4f30\u6578\u64da\u96c6\u7684`my_prompt`\u5217\u7528\u65bc\u540d\u7232`prompt`\u7684\u63d0\u793a\u53c3\u6578\u3002\n```\nimport osfrom google.cloud import aiplatformparameters = {\u00a0 \u00a0 'evaluation_dataset': 'EVALUATION_DATASET',\u00a0 \u00a0 'id_columns': ['ID_COLUMNS'],\u00a0 \u00a0 'task': 'TASK',\u00a0 \u00a0 'autorater_prompt_parameters': AUTORATER_PROMPT_PARAMETERS,\u00a0 \u00a0 'response_column_a': 'RESPONSE_COLUMN_A',\u00a0 \u00a0 'response_column_b': 'RESPONSE_COLUMN_B',\u00a0 \u00a0 'model_a': 'MODEL_A',\u00a0 \u00a0 'model_a_prompt_parameters': MODEL_A_PROMPT_PARAMETERS,\u00a0 \u00a0 'model_b': 'MODEL_B',\u00a0 \u00a0 'model_b_prompt_parameters': MODEL_B_PROMPT_PARAMETERS,}aiplatform.init(project='PROJECT_ID', location='LOCATION', staging_bucket='gs://OUTPUT_DIR')aiplatform.PipelineJob(\u00a0 \u00a0 display_name='PIPELINEJOB_DISPLAYNAME',\u00a0 \u00a0 pipeline_root=os.path.join('gs://OUTPUT_DIR', 'PIPELINEJOB_DISPLAYNAME'),\u00a0 \u00a0 template_path=(\u00a0 \u00a0 \u00a0 'https://us-kfp.pkg.dev/ml-pipeline/google-cloud-registry/autosxs-template/default'),\u00a0 \u00a0 parameter_values=parameters,).run()\n```\n## \u67e5\u770b\u8a55\u4f30\u7d50\u679c\n\u60a8\u53ef\u4ee5\u901a\u904e\u6aa2\u67e5 AutoSxS \u6d41\u6c34\u7dda\u751f\u6210\u7684\u4ee5\u4e0b\u5de5\u4ef6\uff0c\u5728 [Vertex AI Pipelines](https://console.cloud.google.com/vertex-ai/pipelines/runs?hl=zh-cn) \u4e2d\u627e\u5230\u8a55\u4f30\u7d50\u679c\uff1a\n- [\u5224\u65b7](#judgments) \u8868\u7531 AutoSxS \u4ef2\u88c1\u8005\u751f\u6210\u3002\n- [\u805a\u5408\u6307\u6a19](#aggregate-metrics) \u7531 AutoSxS \u6307\u6a19\u7d44\u4ef6\u751f\u6210\u3002\n- [\u4eba\u985e\u504f\u597d\u6821\u6e96\u6307\u6a19](#human-metrics) \u7531 AutoSxS \u6307\u6a19\u7d44\u4ef6\u751f\u6210\u3002\n### \u5224\u65b7\nAutoSxS \u6703\u8f38\u51fa\u5224\u65b7\uff08\u793a\u4f8b\u7d1a\u6307\u6a19\uff09\uff0c\u5e6b\u52a9\u7528\u6236\u77ad\u89e3\u793a\u4f8b\u7d1a\u5225\u7684\u6a21\u578b\u6027\u80fd\u3002\u5224\u65b7\u5305\u62ec\u4ee5\u4e0b\u4fe1\u606f\uff1a\n- \u63a8\u7406\u63d0\u793a\n- \u6a21\u578b\u56de\u7b54\n- \u81ea\u52d5\u8a55\u4f30\u5668\u6c7a\u7b56\n- \u8a55\u5206\u8aaa\u660e\n- \u7f6e\u4fe1\u5ea6\u5206\u6578\n\u60a8\u53ef\u4ee5\u7528 JSONL \u683c\u5f0f\u5c07\u5224\u65b7\u5beb\u5165 Cloud Storage \u4e2d\u6216\u5beb\u5165\u5305\u542b\u4ee5\u4e0b\u5217\u7684 BigQuery \u8868\u4e2d\uff1a\n| \u5217     | \u8aaa\u660e                                |\n|:----------------------|:-----------------------------------------------------------------------------------------------------------------------------------|\n| ID \u5217     | \u5340\u5206\u552f\u4e00\u8a55\u4f30\u793a\u4f8b\u7684\u5217\u3002                            |\n| inference_instruction | \u7528\u65bc\u751f\u6210\u6a21\u578b\u56de\u7b54\u7684\u6307\u4ee4\u3002                           |\n| inference_context  | \u7528\u65bc\u751f\u6210\u6a21\u578b\u56de\u7b54\u7684\u4e0a\u4e0b\u6587\u3002                           |\n| response_a   | \u6a21\u578b A \u7684\u56de\u7b54\u3001\u7d66\u5b9a\u63a8\u7406\u6307\u4ee4\u548c\u4e0a\u4e0b\u6587\u3002                        |\n| response_b   | \u6a21\u578b B \u7684\u56de\u7b54\u3001\u7d66\u5b9a\u63a8\u7406\u6307\u4ee4\u548c\u4e0a\u4e0b\u6587\u3002                        |\n| choice    | \u56de\u7b54\u66f4\u597d\u7684\u6a21\u578b\u3002\u53ef\u80fd\u7684\u503c\u7232 Model A\u3001Model B \u6216 Error\u3002Error \u8868\u793a\u932f\u8aa4\u5c0e\u81f4\u81ea\u52d5\u8a55\u4f30\u5668\u7121\u6cd5\u78ba\u5b9a\u6a21\u578b A \u7684\u56de\u7b54\u9084\u662f\u6a21\u578b B \u7684\u56de\u7b54\u662f\u6700\u597d\u7684\u3002 |\n| confidence   | 0 \u5230 1 \u4e4b\u9593\u7684\u5f97\u5206\uff0c\u8868\u793a\u81ea\u52d5\u8a55\u4f30\u5668\u5c0d\u81ea\u5df1\u6240\u4f5c\u9078\u64c7\u7684\u7f6e\u4fe1\u5ea6\u3002                   |\n| explanation   | \u81ea\u52d5\u8a55\u4f30\u5668\u4f5c\u51fa\u9078\u64c7\u7684\u539f\u56e0\u3002                           |\n### \u5f59\u7e3d\u6307\u6a19\nAutoSxS \u4f7f\u7528 [\u5224\u65b7\u8868](#judgments) \u8a08\u7b97\u805a\u5408\uff08\u52dd\u51fa\u7387\uff09\u6307\u6a19\u3002\u5982\u679c\u672a\u63d0\u4f9b\u4eba\u985e\u504f\u597d\u6578\u64da\uff0c\u5247\u751f\u6210\u4ee5\u4e0b\u5f59\u7e3d\u6307\u6a19\uff1a\n| \u6307\u6a19     | \u8aaa\u660e           |\n|:------------------------|:------------------------------------------------|\n| \u81ea\u52d5\u8a55\u4f30\u5668\u6a21\u578b A \u52dd\u51fa\u7387 | \u81ea\u52d5\u8a55\u4f30\u5668\u78ba\u5b9a\u6a21\u578b A \u63d0\u4f9b\u66f4\u597d\u56de\u7b54\u7684\u6642\u9593\u767e\u5206\u6bd4\u3002 |\n| \u81ea\u52d5\u8a55\u4f30\u5668\u6a21\u578b B \u52dd\u51fa\u7387 | \u81ea\u52d5\u8a55\u4f30\u5668\u78ba\u5b9a\u6a21\u578b B \u63d0\u4f9b\u66f4\u597d\u56de\u7b54\u7684\u6642\u9593\u767e\u5206\u6bd4\u3002 |\n\u7232\u4e86\u66f4\u597d\u5730\u77ad\u89e3\u52dd\u51fa\u7387\uff0c\u8acb\u67e5\u770b\u57fa\u65bc\u884c\u7684\u7d50\u679c\u548c\u81ea\u52d5\u8a55\u4f30\u5668\u7684\u8aaa\u660e\uff0c\u4ee5\u78ba\u5b9a\u7d50\u679c\u548c\u8aaa\u660e\u662f\u5426\u7b26\u5408\u60a8\u7684\u9810\u671f\u3002\n### \u4eba\u985e\u504f\u597d\u6821\u6e96\u6307\u6a19\n\u5982\u9700\u67e5\u770b\u6839\u64da\u4eba\u985e\u504f\u597d\u6578\u64da\u5c0d AutoSxS \u9032\u884c\u57fa\u6e96\u5316\u5206\u6790\u7684\u793a\u4f8b\uff0c\u8acb\u5728\u4ee5\u4e0b\u67d0\u500b\u74b0\u5883\u4e2d\u904b\u884c\u201cAutoSxS\uff1a\u6839\u64da\u4eba\u985e\u504f\u597d\u6578\u64da\u96c6\u6aa2\u67e5\u81ea\u52d5\u8a55\u4f30\u5668\u6821\u6e96\u201dJupyter \u7b46\u8a18\u672c\uff1a [\u5728 Colab \u4e2d\u904b\u884c](https://colab.research.google.com/github/GoogleCloudPlatform/vertex-ai-samples/blob/main/notebooks/official/model_evaluation/model_based_llm_evaluation/autosxs_check_alignment_against_human_preference_data.ipynb?hl=zh-cn) | [\u5728 Vertex AI Workbench \u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u4e2d\u6253\u958b](https://console.cloud.google.com/vertex-ai/workbench/deploy-notebook?download_url=https%3A%2F%2Fraw.githubusercontent.com%2FGoogleCloudPlatform%2Fvertex-ai-samples%2Fmain%2Fnotebooks%2Fofficial%2Fmodel_evaluation%2Fmodel_based_llm_evaluation%2Fautosxs_check_alignment_against_human_preference_data.ipynb&hl=zh-cn) | [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/vertex-ai-samples/blob/main/notebooks/official/model_evaluation/model_based_llm_evaluation/autosxs_check_alignment_against_human_preference_data.ipynb)\n\u5982\u679c\u63d0\u4f9b\u4e86\u4eba\u985e\u504f\u597d\u6578\u64da\uff0c\u5247 AutoSxS \u6703\u8f38\u51fa\u4ee5\u4e0b\u6307\u6a19\uff1a\n| \u6307\u6a19     | \u8aaa\u660e                                                       |\n|:------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| \u81ea\u52d5\u8a55\u4f30\u5668\u6a21\u578b A \u52dd\u51fa\u7387 | \u81ea\u52d5\u8a55\u4f30\u5668\u78ba\u5b9a\u6a21\u578b A \u63d0\u4f9b\u66f4\u597d\u56de\u7b54\u7684\u6642\u9593\u767e\u5206\u6bd4\u3002                                            |\n| \u81ea\u52d5\u8a55\u4f30\u5668\u6a21\u578b B \u52dd\u51fa\u7387 | \u81ea\u52d5\u8a55\u4f30\u5668\u78ba\u5b9a\u6a21\u578b B \u63d0\u4f9b\u66f4\u597d\u56de\u7b54\u7684\u6642\u9593\u767e\u5206\u6bd4\u3002                                            |\n| \u4eba\u985e\u504f\u597d\u6a21\u578b A \u52dd\u51fa\u7387 | \u4eba\u985e\u78ba\u5b9a\u6a21\u578b A \u63d0\u4f9b\u66f4\u597d\u56de\u7b54\u7684\u6642\u9593\u767e\u5206\u6bd4\u3002                                             |\n| \u4eba\u985e\u504f\u597d\u6a21\u578b B \u52dd\u51fa\u7387 | \u4eba\u985e\u78ba\u5b9a\u6a21\u578b B \u63d0\u4f9b\u66f4\u597d\u56de\u7b54\u7684\u6642\u9593\u767e\u5206\u6bd4\u3002                                             |\n| TP      | \u81ea\u52d5\u8a55\u4f30\u5668\u548c\u4eba\u985e\u504f\u597d\u6578\u64da\u78ba\u5b9a\u6a21\u578b A \u63d0\u4f9b\u66f4\u597d\u56de\u7b54\u7684\u793a\u4f8b\u6578\u91cf\u3002                                         |\n| FP      | \u81ea\u52d5\u8a55\u4f30\u5668\u78ba\u5b9a\u6a21\u578b A \u63d0\u4f9b\u66f4\u597d\u56de\u7b54\u4f46\u4eba\u985e\u504f\u597d\u6578\u64da\u78ba\u5b9a\u6a21\u578b B \u63d0\u4f9b\u66f4\u597d\u56de\u7b54\u7684\u793a\u4f8b\u6578\u91cf\u3002                                   |\n| TN      | \u81ea\u52d5\u8a55\u4f30\u5668\u548c\u4eba\u985e\u504f\u597d\u6578\u64da\u78ba\u5b9a\u6a21\u578b B \u63d0\u4f9b\u66f4\u597d\u56de\u7b54\u7684\u793a\u4f8b\u6578\u91cf\u3002                                         |\n| FN      | \u81ea\u52d5\u8a55\u4f30\u5668\u78ba\u5b9a\u6a21\u578b B \u63d0\u4f9b\u66f4\u597d\u56de\u7b54\u4f46\u4eba\u985e\u504f\u597d\u6578\u64da\u78ba\u5b9a\u6a21\u578b A \u63d0\u4f9b\u66f4\u597d\u56de\u7b54\u7684\u793a\u4f8b\u6578\u91cf\u3002                                   |\n| \u6e96\u78ba\u7387     | \u81ea\u52d5\u8a55\u4f30\u5668\u8207\u4eba\u5de5\u6a19\u8a3b\u8005\u9054\u6210\u5171\u8b58\u7684\u6642\u9593\u767e\u5206\u6bd4\u3002                                             |\n| \u7cbe\u78ba\u7387     | \u5728\u81ea\u52d5\u8a55\u4f30\u5668\u8a8d\u7232\u6a21\u578b A \u63d0\u4f9b\u66f4\u597d\u56de\u7b54\u7684\u6240\u6709\u60c5\u6cc1\u4e2d\uff0c\u81ea\u52d5\u8a55\u4f30\u5668\u548c\u4eba\u985e\u90fd\u8a8d\u7232\u6a21\u578b A \u63d0\u4f9b\u66f4\u597d\u56de\u7b54\u7684\u6642\u9593\u767e\u5206\u6bd4\u3002                              |\n| \u53ec\u56de\u7387     | \u5728\u4eba\u985e\u8a8d\u7232\u6a21\u578b A \u63d0\u4f9b\u66f4\u597d\u56de\u7b54\u7684\u6240\u6709\u60c5\u6cc1\u4e2d\uff0c\u81ea\u52d5\u8a55\u4f30\u5668\u548c\u4eba\u985e\u90fd\u8a8d\u7232\u6a21\u578b A \u63d0\u4f9b\u66f4\u597d\u56de\u7b54\u7684\u6642\u9593\u767e\u5206\u6bd4\u3002                               |\n| F1      | \u7cbe\u78ba\u7387\u548c\u53ec\u56de\u7387\u7684\u8abf\u548c\u5e73\u5747\u6578\u3002                                                 |\n| Cohen's Kappa   | \u8861\u91cf\u81ea\u52d5\u8a55\u4f30\u5668\u548c\u4eba\u5de5\u6a19\u8a3b\u8005\u9054\u6210\u7684\u5171\u8b58\uff0c\u9019\u7a2e\u8861\u91cf\u65b9\u5f0f\u6703\u8003\u616e\u96a8\u6a5f\u5171\u8b58\u3002Cohen \u63a8\u85a6\u4e86\u4ee5\u4e0b\u89e3\u91cb\uff1a 0.0\u7b49\u540c\u65bc\u96a8\u6a5f\u6982\u7387\u7684\u5171\u8b580.0 - 0.2\u7565\u6709\u4e00\u4e9b\u5171\u8b580.2 - 0.4\u6709\u4e00\u4e9b\u5171\u8b580.4 - 0.6\u4e2d\u7b49\u5171\u8b580.6 - 0.8\u9ad8\u5ea6\u5171\u8b580.8 - 1.0\u5e7e\u4e4e\u5b8c\u7f8e\u7684\u5171\u8b581.0\u5b8c\u7f8e\u5171\u8b58 |\n| 0.0      | \u7b49\u540c\u65bc\u96a8\u6a5f\u6982\u7387\u7684\u5171\u8b58                                                   |\n| 0.0 - 0.2    | \u7565\u6709\u4e00\u4e9b\u5171\u8b58                                                     |\n| 0.2 - 0.4    | \u6709\u4e00\u4e9b\u5171\u8b58                                                     |\n| 0.4 - 0.6    | \u4e2d\u7b49\u5171\u8b58                                                      |\n| 0.6 - 0.8    | \u9ad8\u5ea6\u5171\u8b58                                                      |\n| 0.8 - 1.0    | \u5e7e\u4e4e\u5b8c\u7f8e\u7684\u5171\u8b58                                                    |\n| 1.0      | \u5b8c\u7f8e\u5171\u8b58                                                      |\n## AutoSxS \u4f7f\u7528\u5834\u666f\n\u60a8\u53ef\u4ee5\u901a\u904e\u4e09\u500b\u61c9\u7528\u5834\u666f\u4f86\u63a2\u7d22\u5982\u4f55\u4f7f\u7528 AutoSxS\u3002\n\u6839\u64da\u53c3\u8003\u7b2c\u4e00\u65b9 (1p) \u6a21\u578b\u8a55\u4f30\u8abf\u6574\u5f8c\u7684\u7b2c\u4e00\u65b9\u6a21\u578b\u3002\n\u60a8\u53ef\u4ee5\u6307\u5b9a\u540c\u6642\u5728\u5169\u500b\u6a21\u578b\u4e0a\u904b\u884c\u63a8\u7406\u3002\n \n\u6b64\u4ee3\u78bc\u793a\u4f8b\u91dd\u5c0d\u4f86\u81ea\u540c\u4e00\u8a3b\u518a\u8868\u7684\u53c3\u8003\u6a21\u578b\u8a55\u4f30 [Vertex Model Registry](https://console.cloud.google.com/vertex-ai/?hl=zh-cn) \u4e2d\u7684\u8abf\u6574\u6a21\u578b\u3002\n```\n# Evaluation dataset schema:# \u00a0 my_question: str# \u00a0 my_context: strparameters = {\u00a0 \u00a0 'evaluation_dataset': DATASET,\u00a0 \u00a0 'id_columns': ['my_context'],\u00a0 \u00a0 'task': 'question_answer@001',\u00a0 \u00a0 'autorater_prompt_parameters': {\u00a0 \u00a0 \u00a0 'inference_instruction': {'column': 'my_question'},\u00a0 \u00a0 \u00a0 'inference_context': {'column': 'my_context'},\u00a0 },\u00a0 \u00a0 'model_a': 'publishers/google/models/text-bison@001',\u00a0 \u00a0 'model_a_prompt_parameters': {QUESTION: {'template': '{{my_question}}\\nCONTEXT: {{my_context}}'}},\u00a0 'response_column_a': 'content',\u00a0 \u00a0 'model_b': 'projects/abc/locations/abc/models/tuned_bison',\u00a0 \u00a0 'model_b_prompt_parameters': {'prompt': {'template': '{{my_context}}\\n{{my_question}}'}},\u00a0 'response_column_b': 'content',}\n```\n\u6839\u64da\u53c3\u8003\u7b2c\u4e09\u65b9 (3p) \u6a21\u578b\u8a55\u4f30\u8abf\u6574\u5f8c\u7684\u7b2c\u4e09\u65b9\u6a21\u578b\u3002\n\u60a8\u53ef\u4ee5\u901a\u904e\u76f4\u63a5\u63d0\u4f9b\u6a21\u578b\u56de\u7b54\u4f86\u8df3\u904e\u63a8\u7406\u3002\n \n\u6b64\u4ee3\u78bc\u793a\u4f8b\u6839\u64da\u7b2c\u4e09\u65b9\u53c3\u8003\u6a21\u578b\u8a55\u4f30\u7d93\u904e\u8abf\u512a\u7684\u7b2c\u4e09\u65b9\u6a21\u578b\u3002\n```\n# Evaluation dataset schema:# \u00a0 my_question: str# \u00a0 my_context: str# \u00a0 response_b: strparameters = {\u00a0 \u00a0 'evaluation_dataset': DATASET,\u00a0 \u00a0 'id_columns': ['my_context'],\u00a0 \u00a0 'task': 'question_answer@001',\u00a0 \u00a0 'autorater_prompt_parameters':\u00a0 \u00a0 \u00a0 \u00a0 'inference_instruction': {'column': 'my_question'},\u00a0 \u00a0 \u00a0 \u00a0 'inference_context': {'column': 'my_context'},\u00a0 \u00a0 },\u00a0 \u00a0 'response_column_a': 'content',\u00a0 \u00a0 'response_column_b': 'response_b',}\n```\n\u6240\u6709\u652f\u6301\u7684\u4efb\u52d9\u90fd\u4f7f\u7528\u4eba\u5de5\u6a19\u8a3b\u8005\u6578\u64da\u9032\u884c\u57fa\u6e96\u5316\u5206\u6790\uff0c\u4ee5\u78ba\u4fdd\u81ea\u52d5\u8a55\u4f30\u5668\u7684\u56de\u7b54\u8207\u4eba\u985e\u504f\u597d\u6578\u64da\u4fdd\u6301\u4e00\u81f4\u3002\u5982\u679c\u8981\u6839\u64da\u60a8\u7684\u4f7f\u7528\u5834\u666f\u5c0d AutoSxS \u9032\u884c\u57fa\u6e96\u5316\u6e2c\u8a66\uff0c\u8acb\u76f4\u63a5\u5411 AutoSxS \u63d0\u4f9b\u4eba\u985e\u504f\u597d\u6578\u64da\uff0c\u4ee5\u8f38\u51fa\u6821\u6e96\u805a\u5408\u7d71\u8a08\u4fe1\u606f\u3002\n\u5982\u9700\u6839\u64da\u4eba\u985e\u504f\u597d\u6578\u64da\u96c6\u6aa2\u67e5\u5c0d\u9f4a\u60c5\u6cc1\uff0c\u60a8\u53ef\u4ee5\u5411\u81ea\u52d5\u8a55\u4f30\u5668\u6307\u5b9a\u9019\u5169\u500b\u8f38\u51fa\uff08\u9810\u6e2c\u7d50\u679c\uff09\u3002\u60a8\u9084\u53ef\u4ee5\u63d0\u4f9b\u63a8\u7406\u7d50\u679c\u3002\n \n\u6b64\u4ee3\u78bc\u793a\u4f8b\u9a57\u8b49\u81ea\u52d5\u8a55\u4f30\u5668\u7684\u7d50\u679c\u548c\u8aaa\u660e\u662f\u5426\u7b26\u5408\u60a8\u7684\u9810\u671f\u3002\n```\n# Evaluation dataset schema:# \u00a0my_question: str# \u00a0my_context: str# \u00a0 response_a: str# \u00a0 response_b: str# \u00a0 actual: strparameters = {\u00a0 \u00a0 'evaluation_dataset': DATASET,\u00a0 \u00a0 'id_columns': ['my_context'],\u00a0 \u00a0 'task': 'question_answer@001',\u00a0 \u00a0 'autorater_prompt_parameters': {\u00a0 \u00a0 \u00a0 'inference_instruction': {'column': 'my_question'},\u00a0 \u00a0 \u00a0 'inference_context': {'column': 'my_context'},\u00a0 },\u00a0 'response_column_a': 'response_a',\u00a0 'response_column_b': 'response_b',\u00a0 'human_preference_column': 'actual',}\n```\n## \u5f8c\u7e8c\u6b65\u9a5f\n- \u8a73\u7d30\u77ad\u89e3 [\u57fa\u65bc\u6307\u6a19\u7684\u8a55\u4f30](https://cloud.google.com/vertex-ai/generative-ai/docs/models/evaluate-models?hl=zh-cn) \u3002\n- \u77ad\u89e3\u5982\u4f55 [\u8abf\u6574\u8a9e\u8a00\u57fa\u790e\u6a21\u578b](https://cloud.google.com/vertex-ai/generative-ai/docs/models/tune-models?hl=zh-cn) \u3002", "guide": "Generative AI on Vertex AI"}