{"title": "Generative AI on Vertex AI - Gemini \u6a21\u578b\u7684\u57fa\u672c\u56de\u7b54", "url": "https://cloud.google.com/vertex-ai/generative-ai/docs/multimodal/ground-gemini?hl=zh-cn", "abstract": "# Generative AI on Vertex AI - Gemini \u6a21\u578b\u7684\u57fa\u672c\u56de\u7b54\n**\u9810\u89bd** Vertex AI Gemini API \u662f\u9810\u89bd\u7248\u7522\u54c1\uff0c\u53d7 [\u670d\u52d9\u5c08\u7528\u689d\u6b3e](https://cloud.google.com/terms/service-terms?hl=zh-cn) \u7684\u901a\u7528\u670d\u52d9\u689d\u6b3e\u90e8\u5206\u4e2d\u7684\u201c\u6b63\u5f0f\u767c\u4f48\u524d\u7522\u54c1\u689d\u6b3e\u201d\u7684\u7d04\u675f\u3002\u6b63\u5f0f\u767c\u4f48\u524d\u7522\u54c1\u548c\u529f\u80fd\u201c\u6309\u539f\u6a23\u201d\u63d0\u4f9b\uff0c\u53ef\u80fd\u652f\u6301\u6709\u9650\uff0c\u4e26\u4e14\u5c0d\u6b63\u5f0f\u767c\u4f48\u524d\u7522\u54c1\u548c\u529f\u80fd\u7684\u66f4\u6539\u53ef\u80fd\u8207\u5176\u4ed6\u6b63\u5f0f\u767c\u4f48\u524d\u7248\u672c\u4e0d\u517c\u5bb9\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u767c\u4f48\u968e\u6bb5\u8aaa\u660e](https://cloud.google.com/products?hl=zh-cn#product-launch-stages) \u3002\u6b64\u5916\uff0c\u4f7f\u7528 Vertex AI ADT API \u5373\u8868\u793a\u60a8\u540c\u610f\u540c\u610f\u751f\u6210 AI \u9810\u89bd\u7248\u7522\u54c1\u7684 [\u9644\u52a0\u689d\u6b3e](https://cloud.google.com/trustedtester/aitos?hl=zh-cn) \u3002\n\u672c\u9801\u9762\u4ecb\u7d39\u77ad\u5982\u4f55\u4f7f\u7528 Vertex AI API \u5c07 Gemini 1.0 Pro \u6587\u672c\u56de\u7b54\u9023\u63a5\u5230 Vertex AI Search \u6578\u64da\u5b58\u5132\u5340\u3002\n", "content": "## \u6982\u89bd\n\u5728\u751f\u6210\u5f0f AI \u7684\u4e0a\u4e0b\u6587\u4e2d\uff0c\u9023\u63a5\u529f\u80fd\u662f\u6307\u5c07\u6a21\u578b\u8f38\u51fa\u9023\u63a5\u5230\u53ef\u9a57\u8b49\u7684\u4fe1\u606f\u6e90\u7684\u80fd\u529b\u3002\u901a\u904e\u7232\u6a21\u578b\u63d0\u4f9b\u8a2a\u554f\u6578\u64da\u6e90\u7684\u6b0a\u9650\uff0c\u9023\u63a5\u529f\u80fd\u53ef\u4ee5\u5171\u4eab\u5176\u8f38\u51fa\u5230\u7279\u5b9a\u6578\u64da\uff0c\u4e26\u964d\u4f4e\u5167\u5bb9\u5275\u9020\u7684\u53ef\u80fd\u6027\u3002\u5728\u8ca1\u52d9\u548c\u53ef\u9760\u6027\u7b49\u91cd\u8981\u6578\u64da\uff08\u4f8b\u5982\u8ca1\u52d9\u5831\u544a\u548c\u5065\u5eb7\u5831\u544a\uff09\u4e2d\uff0c\u9019\u4e00\u9ede\u5c24\u7232\u91cd\u8981\u3002\n\u9023\u63a5\u529f\u80fd\u5177\u6709\u4ee5\u4e0b\u512a\u52e2\uff1a\n- \u6e1b\u5c11\u6a21\u578b\u8aa4\u5340\uff0c\u5373\u6a21\u578b\u751f\u6210\u4e0d\u771f\u5be6\u5167\u5bb9\u7684\u60c5\u6cc1\u3002\n- \u5c07\u6a21\u578b\u97ff\u61c9\u56fa\u5b9a\u5230\u7279\u5b9a\u4fe1\u606f\u3002\n- \u63d0\u9ad8\u751f\u6210\u5167\u5bb9\u7684\u53ef\u4fe1\u5ea6\u548c\u9069\u7528\u6027\u3002## \u652f\u6301\u7684\u6a21\u578b\n**\u91cd\u8981\u63d0\u793a\uff1a** \u60a8\u53ea\u80fd\u9023\u63a5 \u6587\u672c\u56de\u7b54\n\u4ee5\u4e0b\u6a21\u578b\u652f\u6301\u9023\u63a5\u529f\u80fd\uff1a\n- Gemini 1.0 Pro## \u6e96\u5099\u5de5\u4f5c\n\u4f7f\u7528\u5145\u7576\u5167\u5bb9\u7684\u6578\u64da\u5b58\u5132\u5340\u7684 Vertex AI Search \u652f\u6301\u9023\u63a5 Gemini 1.0 Pro\u3002\n\u9700\u8981\u6eff\u8db3\u4e00\u4e9b\u524d\u63d0\u689d\u4ef6\u624d\u80fd\u9023\u63a5 Gemini 1.0 Pro\u3002\n- \u5553\u7528 Vertex AI Search \u4e26\u6fc0\u6d3b\u6b64 API\u3002\n- \u5275\u5efa Vertex AI Search \u6578\u64da\u6e90\u548c\u61c9\u7528\u3002\n- \u5728 Vertex AI Search \u4e2d\u5c07\u60a8\u7684\u6578\u64da\u5b58\u5132\u5340\u8207\u61c9\u7528\u76f8\u95dc\u806f\u3002\u6578\u64da\u6e90\u7528\u4f5c\u5728 Vertex AI \u4e0a\u7684\u751f\u6210\u5f0f AI \u4e2d\u9023\u63a5 Gemini 1.0 Pro \u7684\u57fa\u790e\u3002\n- \u7232\u60a8\u7684\u6578\u64da\u5b58\u5132\u5340\u5553\u7528\u4f01\u696d\u7248\u3002\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Vertex AI Search \u7c21\u4ecb](https://cloud.google.com/generative-ai-app-builder/docs/enterprise-search-introduction?hl=zh-cn) \u3002\n### \u5553\u7528 Vertex AI Search\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u9032\u5165 **Search & Conversation** \u9801\u9762\u3002 [Search & Conversation](https://console.cloud.google.com/gen-app-builder/engines?hl=zh-cn) \n- \u95b1\u8b80\u4e26\u540c\u610f\u670d\u52d9\u689d\u6b3e\uff0c\u7136\u5f8c\u9ede\u64ca **\u7e7c\u7e8c\u4e26\u6fc0\u6d3b API** \u3002 **\u91cd\u8981\u63d0\u793a\uff1a** \u5c0d\u65bc\u8981\u8207 Vertex AI Search \u642d\u914d\u4f7f\u7528\u7684\u6bcf\u500b\u9805\u76ee\uff0c\u60a8\u5fc5\u9808\u63a5\u53d7 Discovery Solutions \u6578\u64da\u4f7f\u7528\u689d\u6b3e\u3002\nVertex AI Search \u5728 `global` \u4f4d\u7f6e\u6216 `eu` \u548c `us` \u591a\u5340\u57df\u63d0\u4f9b\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Vertex AI Search \u4f4d\u7f6e](https://cloud.google.com/generative-ai-app-builder/docs/locations?hl=zh-cn#multi-regions)\n### \u5728 Vertex AI Search \u4e2d\u5275\u5efa\u6578\u64da\u5b58\u5132\u5340\n\u5982\u9700\u5c07\u6a21\u578b\u9023\u63a5\u5230\u6e90\u6578\u64da\uff0c\u60a8\u9700\u8981\u6e96\u5099\u597d\u6578\u64da\u4e26\u5c07\u5176\u4fdd\u5b58\u5230 Vertex AI Search\u3002\u7232\u6b64\uff0c\u60a8\u9700\u8981 [\u5728 Vertex AI Search \u4e2d\u5275\u5efa\u6578\u64da\u5b58\u5132\u5340](https://cloud.google.com/generative-ai-app-builder/docs/create-datastore-ingest?hl=zh-cn#datastores-engines) \u3002\n\u5982\u679c\u60a8\u5f9e\u982d\u958b\u59cb\uff0c\u5247\u9700\u8981\u6e96\u5099\u6578\u64da\u4ee5\u6ce8\u5165\u5230 Vertex AI Search \u4e2d\u3002\u5982\u9700\u958b\u59cb\u64cd\u4f5c\uff0c\u8acb\u53c3\u95b1 [\u6e96\u5099\u6578\u64da\u4ee5\u9032\u884c\u6ce8\u5165](https://cloud.google.com/generative-ai-app-builder/docs/prepare-data?hl=zh-cn) \u3002\u6ce8\u5165\u904e\u7a0b\u53ef\u80fd\u9700\u8981\u5e7e\u5206\u9418\u5230\u5e7e\u5c0f\u6642\u624d\u80fd\u5b8c\u6210\uff0c\u5177\u9ad4\u53d6\u6c7a\u65bc\u6578\u64da\u7684\u5927\u5c0f\u3002\u53ea\u6709\u975e\u7d50\u69cb\u5316\u6578\u64da\u5b58\u5132\u5340\u652f\u6301\u9023\u63a5\u529f\u80fd\u3002\n\u6e96\u5099\u597d\u8981\u6ce8\u5165\u7684\u6578\u64da\u5f8c\uff0c\u60a8\u53ef\u4ee5 [\u5275\u5efa\u641c\u7d22\u6578\u64da\u5b58\u5132\u5340](https://cloud.google.com/generative-ai-app-builder/docs/create-data-store-es?hl=zh-cn) \u3002\u6210\u529f\u5275\u5efa\u6578\u64da\u5b58\u5132\u5340\u5f8c\uff0c [\u5275\u5efa\u641c\u7d22\u61c9\u7528](https://cloud.google.com/generative-ai-app-builder/docs/create-engine-es?hl=zh-cn) \u4ee5\u95dc\u806f\u5230\u8a72\u5b58\u5132\u5340\u4e26 [\u5553\u7528\u4f01\u696d\u7248](https://cloud.google.com/generative-ai-app-builder/docs/enterprise-edition?hl=zh-cn) \u3002\n## \u9023\u63a5 Gemini 1.0 Pro \u6a21\u578b\n\u5982\u679c\u60a8\u4e0d\u77e5\u9053\u6578\u64da\u5b58\u5132\u5340 ID\uff0c\u8acb\u6309\u4ee5\u4e0b\u6b65\u9a5f\u64cd\u4f5c\uff1a\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u8f49\u5230 **Vertex AI Search** \u9801\u9762\uff0c\u7136\u5f8c\u5728\u5c0e\u822a\u83dc\u55ae\u4e2d\u9ede\u64ca **\u6578\u64da\u5b58\u5132\u5340** \u3002  <a{: class=\"button button-primary\" l10n-attrs-original-order=\"href,target,class,track-name,track-type\" l10n-encrypted-href=\"BU2UnTd/bvXw0I31NoHStFtigmNHgUGOXn/QVSGplOhB4J1rwNxdLslXsSNCBkPOFvWIDj0tv6yobddHSWXSow==\" target=\"console\" track-name=\"consoleLink\" track-type=\"tasks\" }=\"\">\u8f49\u5230\u201c\u6578\u64da\u5b58\u5132\u5340\u201d\u9801\u9762</a{:>\n- \u9ede\u64ca\u60a8\u7684\u6578\u64da\u5b58\u5132\u5340\u7684\u540d\u7a31\u3002\n- \u5728\u6578\u64da\u5b58\u5132\u5340\u7684 **\u6578\u64da** \u9801\u9762\u4e0a\uff0c\u7372\u53d6\u6578\u64da\u5b58\u5132\u5340 ID\u3002\n\u5982\u9700\u4f7f\u7528 Vertex AI API \u6e2c\u8a66\u6587\u672c\u63d0\u793a\uff0c\u8acb\u5411\u767c\u4f48\u65b9\u6a21\u578b\u7aef\u9ede\u767c\u9001 POST \u8acb\u6c42\u3002\n```\nPROJECT_ID=PROJECT_ID\ncurl -X POST -H \"Authorization: Bearer $(gcloud auth print-access-token)\" -H \"Content-Type: application/json\" https://us-central1-aiplatform.googleapis.com/v1beta1/projects/PROJECT_ID/locations/us-central1/publishers/google/models/gemini-1.0-pro:generateContent -d '{\n \"contents\": [{\n \"role\": \"user\",\n \"parts\": [{\n  \"text\": \"How many days of vacation have I taken this year, and how many do I have remaining??\"\n }]\n }],\n \"model\": \"projects/PROJECT_ID/locations/us-central1/publishers/google/models/gemini-1.0-pro\",\n \"tools\": [{\n \"retrieval\": {\n  \"vertexAiSearch\": {\n  \"datastore\": projects/PROJECT_ID/locations/global/collections/default_collection/dataStores/DATA_STORE_ID\n  }\n }\n }]\n}\n```\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u6216\u66f4\u65b0 Python\uff0c\u8acb\u53c3\u95b1 [\u5b89\u88dd Python \u7248 Vertex AI SDK](https://cloud.google.com/vertex-ai/docs/start/use-vertex-ai-python-sdk?hl=zh-cn) \u3002   \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [   Python API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/python/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/python-docs-samples/blob/HEAD/generative_ai/gemini_grounding_example.py) \n```\nfrom typing import Optionalimport vertexaifrom vertexai.preview.generative_models import (\u00a0 \u00a0 GenerationResponse,\u00a0 \u00a0 GenerativeModel,\u00a0 \u00a0 grounding,\u00a0 \u00a0 Tool,)def generate_text_with_grounding(\u00a0 \u00a0 project_id: str, location: str, data_store_path: Optional[str] = None) -> GenerationResponse:\u00a0 \u00a0 # Initialize Vertex AI\u00a0 \u00a0 vertexai.init(project=project_id, location=location)\u00a0 \u00a0 # Load the model\u00a0 \u00a0 model = GenerativeModel(model_name=\"gemini-1.0-pro\")\u00a0 \u00a0 # Create Tool for grounding\u00a0 \u00a0 if data_store_path:\u00a0 \u00a0 \u00a0 \u00a0 # Use Vertex AI Search data store\u00a0 \u00a0 \u00a0 \u00a0 # Format: projects/{project_id}/locations/{location}/collections/default_collection/dataStores/{data_store_id}\u00a0 \u00a0 \u00a0 \u00a0 tool = Tool.from_retrieval(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 grounding.Retrieval(grounding.VertexAISearch(datastore=data_store_path))\u00a0 \u00a0 \u00a0 \u00a0 )\u00a0 \u00a0 else:\u00a0 \u00a0 \u00a0 \u00a0 # Use Google Search for grounding (Private Preview)\u00a0 \u00a0 \u00a0 \u00a0 tool = Tool.from_google_search_retrieval(grounding.GoogleSearchRetrieval())\u00a0 \u00a0 prompt = \"What are the price, available colors, and storage size options of a Pixel Tablet?\"\u00a0 \u00a0 response = model.generate_content(prompt, tools=[tool])\u00a0 \u00a0 print(response)\n```\n## \u50f9\u683c\u548c\u914d\u984d\n\u9023\u63a5 Gemini 1.0 Pro \u6642\uff0c\u60a8\u9700\u8981\u652f\u4ed8 Vertex AI \u4e0a\u7684\u751f\u6210\u5f0f AI \u548c Vertex AI Search \u7684\u4f7f\u7528\u8cbb\u3002\n## \u5f8c\u7e8c\u6b65\u9a5f\n- \u77ad\u89e3\u5982\u4f55 [\u767c\u9001\u804a\u5929\u63d0\u793a\u8acb\u6c42](https://cloud.google.com/vertex-ai/generative-ai/docs/multimodal/send-chat-prompts-gemini?hl=zh-cn) \u3002\n- \u77ad\u89e3 [Responsible AI \u6700\u4f73\u5be6\u8e10\u548c Vertex AI \u7684\u5b89\u5168\u904e\u6ffe\u689d\u4ef6](https://cloud.google.com/vertex-ai/generative-ai/docs/learn/responsible-ai?hl=zh-cn) \u3002\n- \u5982\u9700\u77ad\u89e3\u5982\u4f55\u9023\u63a5 PaLM \u6a21\u578b\uff0c\u8acb\u53c3\u95b1 [Vertex AI \u4e2d\u7684\u9023\u63a5\u529f\u80fd](https://cloud.google.com/vertex-ai/generative-ai/docs/grounding/ground-language-models?hl=zh-cn)", "guide": "Generative AI on Vertex AI"}