{"title": "Apigee - StorageClass configuration", "url": "https://cloud.google.com/apigee/docs/api-platform/get-started/what-apigee", "abstract": "# Apigee - StorageClass configuration\nYou are currently viewing version 1.1 of the Apigee hybrid documentation. **This version is end of life.** You should upgrade to a newer version. For more information, see [Supported versions](/apigee/docs/hybrid/supported-platforms#supported-versions) .\nFor the Cassandra database, hybrid runtime uses [ dynamically created](https://kubernetes.io/docs/concepts/storage/persistent-volumes/#dynamic) persistent volumes to store data. To configure Cassandra properly, you must configure a [StorageClass](https://kubernetes.io/docs/concepts/storage/storage-classes) definition that is backed by a solid-state drive (SSD).\nThis topic explains how to create a new StorageClass that uses SSD and make it the default class. When Cassandra starts, it will use this default StorageClass.\n**KEY POINT:** For performance reasons, it is important that the StorageClass uses an SSD backend.\n", "content": "## \n Change the default StorageClass\nThe following steps explain how to create a StorageClass and make it the default class. For more information, see [ Change the default storage class](https://kubernetes.io/docs/tasks/administer-cluster/change-default-storage-class/) in the Kubernetes documentation.\n- Get the name of the current default StorageClass:```\nkubectl get sc\n```For example:```\nkubectl get sc\n NAME     PROVISIONER   AGE\n standard (default) kubernetes.io/gce-pd 98d\n```\n- Describe the StorageClass named`standard`. Note that its type is`pd-standard`:```\nkubectl describe sc standard\n```For example:```\nkubectl describe sc standard\n Name:     standard\n IsDefaultClass:  Yes\n Annotations:   storageclass.beta.kubernetes.io/is-default-class=true\n Provisioner:   kubernetes.io/gce-pd\n Parameters:   type=pd-standard\n AllowVolumeExpansion: <unset>\n MountOptions:   <none>\n ReclaimPolicy:   Delete\n VolumeBindingMode:  Immediate\n Events:    <none>\n```\n- Create a new file called`storageclass.yaml`.\n- Add this code to the file. Note that the name of the new class  is`apigee-sc`. You can use any name you like. Also, note that  the storage type is`pd-ssd`:```\n--kind: StorageClass\napiVersion: storage.k8s.io/v1\nmetadata:\n name: \"apigee-sc\"\nprovisioner: kubernetes.io/gce-pd\nparameters:\n type: pd-ssd\n replication-type: none\nvolumeBindingMode: WaitForFirstConsumer\nallowVolumeExpansion: true\n```\n- Apply the new StorageClass to your Kubernetes cluster:```\nkubectl apply -f storageclass.yaml\n```\n- Execute the following two commands to change the default StorageClass:```\nkubectl patch storageclass standard \\\n -p '{\"metadata\": {\"annotations\":{\"storageclass.kubernetes.io/is-default-class\":\"false\"}}}'\n``````\nkubectl patch storageclass apigee-sc \\\n -p '{\"metadata\": {\"annotations\":{\"storageclass.kubernetes.io/is-default-class\":\"true\"}}}'\n```\n- Execute this command to verify that the new default StorageClass is called`apigee-sc`:```\nkubectl get sc\n```For example:```\nkubectl get sc\n NAME     PROVISIONER   AGE\n apigee-sc (default) kubernetes.io/gce-pd 1d\n standard    kubernetes.io/gce-pd 98d\n```", "guide": "Apigee"}