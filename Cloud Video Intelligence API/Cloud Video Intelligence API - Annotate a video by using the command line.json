{"title": "Cloud Video Intelligence API - Annotate a video by using the command line", "url": "https://cloud.google.com/video-intelligence/docs/annotate-video-command-line", "abstract": "# Cloud Video Intelligence API - Annotate a video by using the command line\n# Annotate a video by using the command line\nThis page shows how to make a Video Intelligence API request with `curl` for projects that you own.\nYou can follow the steps on this page or try this quickstart as a Google Cloud Training lab.\n [Try it with a lab](https://www.cloudskillsboost.google/catalog_lab/804?qlcampaign=77-18-gcpd-921&utm_source=gcp&utm_medium=documentation&utm_campaign=vintelligence) ", "content": "## Before you begin\n## Make an Annotate Video Request\nUse the gcloud CLI to call the\n`detect-labels`\ncommand on the path of the video to be analyzed.\n```\ngcloud ml video detect-labels gs://YOUR_BUCKET/YOUR_OBJECT\n```\n- Use `curl` to make a POST request to the `videos:annotate` method, using the `gcloud auth application-default print-access-token` command to paste in an access token to your service account:```\ncurl -X POST \\\u00a0 -H \"Authorization: Bearer \"$(gcloud auth application-default print-access-token) \\\u00a0 -H \"Content-Type: application/json; charset=utf-8\" \\\u00a0 --data '{\"inputUri\":\"gs://YOUR_BUCKET/YOUR_OBJECT\",\"features\":[\"LABEL_DETECTION\"]}'\\\u00a0 \"https://videointelligence.googleapis.com/v1/videos:annotate\"\n```\n- The Video Intelligence API creates an to process your request. The response includes the operation name:```\n{\u00a0 \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION_ID/operations/OPERATION_ID\"}\n```\n- You can request information on the operation by calling the `v1.operations` endpoint, replacing in the example below with the name returned in the previous step:```\n\u00a0curl -X GET \\\u00a0 \u00a0-H \"Authorization: Bearer \"$(gcloud auth application-default print-access-token) \\\u00a0 \u00a0https://videointelligence.googleapis.com/v1/OPERATION_NAME\n```\n- You'll see information related to your operation. If the operation has completed, a `done` field is included and set to `true` :```\n{\u00a0 \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION_ID/operations/OPERATION_ID\",\u00a0 \"metadata\": {\u00a0 \"@type\": \"type.googleapis.com/google.cloud.videointelligence.v1.AnnotateVideoProgress\",\u00a0 \u00a0 \"annotationProgress\": [\u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \"inputUri\": \"/YOUR_BUCKET/YOUR_OBJECT\",\u00a0 \u00a0 \u00a0 \u00a0 \"progressPercent\": 100,\u00a0 \u00a0 \u00a0 \u00a0 \"startTime\": \"2020-04-01T22:13:17.978847Z\",\u00a0 \u00a0 \u00a0 \u00a0 \"updateTime\": \"2020-04-01T22:13:29.576004Z\"\u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 ]\u00a0 },\u00a0 \"done\": true,\u00a0...}\n```After giving the request some time (about a minute, typically), the same request returns annotation results:\n```\n{\u00a0 \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION_ID/operations/OPERATION_ID\",\u00a0 \"metadata\": {\u00a0 \u00a0 \"@type\": \"type.googleapis.com/google.cloud.videointelligence.v1.AnnotateVideoProgress\",\u00a0 \u00a0 \"annotationProgress\": [\u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \"inputUri\": \"YOUR_BUCKET/YOUR_OBJECT\",\u00a0 \u00a0 \u00a0 \u00a0 \"progressPercent\": 100,\u00a0 \u00a0 \u00a0 \u00a0 \"startTime\": \"2020-04-01T22:13:17.978847Z\",\u00a0 \u00a0 \u00a0 \u00a0 \"updateTime\": \"2020-04-01T22:13:29.576004Z\"\u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 ]\u00a0 },\u00a0 \"done\": true,\u00a0 \"response\": {\u00a0 \u00a0 \"@type\": \"type.googleapis.com/google.cloud.videointelligence.v1.AnnotateVideoResponse\",\u00a0 \u00a0 \"annotationResults\": [\u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \"inputUri\": \"/YOUR_BUCKET/YOUR_OBJECT\",\u00a0 \u00a0 \u00a0 \u00a0 \"segmentLabelAnnotations\": [\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"entity\": {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"entityId\": \"/m/07bsy\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"description\": \"transport\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"languageCode\": \"en-US\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"segments\": [\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"segment\": {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"startTimeOffset\": \"0s\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"endTimeOffset\": \"38.757872s\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"confidence\": 0.81231534\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ]\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 \u00a0{\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"entity\": {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"entityId\": \"/m/01n32\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"description\": \"city\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"languageCode\": \"en-US\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"categoryEntities\": [\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"entityId\": \"/m/043rvww\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"description\": \"geographical feature\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"languageCode\": \"en-US\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ],\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"segments\": [\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"segment\": {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"startTimeOffset\": \"0s\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"endTimeOffset\": \"38.757872s\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"confidence\": 0.3942462\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ]\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ...\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"entity\": {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"entityId\": \"/m/06gfj\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"description\": \"road\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"languageCode\": \"en-US\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"segments\": [\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"segment\": {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"startTimeOffset\": \"0s\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"endTimeOffset\": \"38.757872s\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"confidence\": 0.86698604\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ]\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 ]\u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 ]\u00a0 }}\u00a0 \u00a0\n```\nCongratulations! You've sent your first request to the Video Intelligence API.## Clean upTo avoid unnecessary Google Cloud charges, use the [Google Cloud console](https://console.cloud.google.com/) to delete your project if you do not need it.## What's next\n- Work through the [How-To Guides](/video-intelligence/docs/how-to) .\n- Work through the [Samples & Tutorials](/video-intelligence/docs/tutorials) .\n- Consult the [API Reference](/video-intelligence/docs/reference/rest) for complete information on all API calls.", "guide": "Cloud Video Intelligence API"}