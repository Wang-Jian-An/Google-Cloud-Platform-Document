{"title": "Cloud Video Intelligence API - Using Docker & Kubernetes", "url": "https://cloud.google.com/video-intelligence/docs/streaming/docker-kubernetes", "abstract": "# Cloud Video Intelligence API - Using Docker & Kubernetes\n**    Beta     ** This feature is subject to the \"Pre-GA Offerings Terms\" in the General Service Terms section   of the [Service Specific Terms](/terms/service-terms#1) .     Pre-GA features are available \"as is\" and might have limited support.    For more information, see the [launch stage descriptions](/products#product-launch-stages) .\nA [Docker image](https://github.com/google/aistreamer/blob/master/ingestion/env/Dockerfile) is provided for you to evaluate these features. You can download this image as part of the [AIStreamer](https://github.com/google/aistreamer/tree/master/ingestion) .\nPlease note that use of third-party software is solely at your discretion. Google does not own the copyright of third-party software.\n", "content": "## Prerequistes\n- Install [Docker](https://docs.docker.com/install) .\n- Install [Google Cloud CLI](/sdk) .\n- Install [Kubernetes](https://kubernetes.io/docs/tasks/tools/install-kubectl/#download-as-part-of-the-google-cloud-sdk) .## Build Docker image\nGo into the [ingestion directory](https://github.com/google/aistreamer/tree/master/ingestion) and run the following command line on your host machine:\n```\n$ export DOCKER_IMAGE=gcr.io/gcp-project-name/docker-image-name:version$ docker build -t $DOCKER_IMAGE -f env/Dockerfile .\n```\n## Try Docker image on your local host\nRun following command in the terminal for your host machine:\n```\n$ docker run -it $DOCKER_IMAGE /bin/bash\n```\nThe command returns a response similar to the following example.\n```\nroot@e504724e76fc:/#\n```\nTo open another terminal connecting to Docker, run the following command on the host machine:\n```\n$ docker exec -it e504724e76fc /bin/bash\n```\nNow, you have both host terminals that are in the same Docker container.\n## Docker image environment setting\nSome environment settings can be customized in the [Docker image](https://github.com/google/aistreamer/blob/master/ingestion/env/Dockerfile) .\n```\n#set up environment for Google Video Intelligence Streaming APIENV SRC_DIR /googlesrc \u00a0#Source code directoryENV BIN_DIR /google \u00a0 \u00a0 #Binary directory\n```\n## Push Docker image to Google Cloud container registry\nRun the following command in the terminal for your host machine:\n```\n$ gcloud docker --verbosity debug -- push $DOCKER_IMAGE\n```\nYou might need to set access control.\n## Deploy to Google Cloud\nRun the following commands in the terminal for your host machine:\n```\n$ export KUBE_ID=any_string_you_like$ kubectl run -it $KUBE_ID --image=$DOCKER_IMAGE -- /bin/bash\n```\nThis returns a response similar to the following:\n```\nroot@$KUBE_ID-215855480-c4sqp:/#\n```\nTo open another terminal connecting to the same Kubernetes container on Google Cloud, run the following command line on host machine:\n```\n$ kubectl exec -it $KUBE_ID-215855480-c4sqp -- /bin/bash\n```\nNow, you have both host terminals that are in the same Kubernetes container on Google Cloud.", "guide": "Cloud Video Intelligence API"}