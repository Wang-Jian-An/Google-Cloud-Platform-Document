{"title": "Cloud Video Intelligence API - \u4f7f\u7528 Docker \u548c Kubernetes", "url": "https://cloud.google.com/video-intelligence/docs/streaming/docker-kubernetes?hl=zh-cn", "abstract": "# Cloud Video Intelligence API - \u4f7f\u7528 Docker \u548c Kubernetes\n**    Beta \u7248     ** \u6b64\u529f\u80fd\u9808\u9075\u5b88 [\u670d\u52d9\u5c08\u7528\u689d\u6b3e](https://cloud.google.com/terms/service-terms?hl=zh-cn#1) \u7684\u201c\u901a\u7528\u670d\u52d9\u689d\u6b3e\u201d\u90e8\u5206\u4e2d\u7684\u201c\u975e\u6b63\u5f0f\u7248\u7522\u54c1\u689d\u6b3e\u201d\u3002 \u975e\u6b63\u5f0f\u7248\u529f\u80fd\u201c\u6309\u539f\u6a23\u201d\u63d0\u4f9b\uff0c\u53ef\u80fd\u53ea\u80fd\u7372\u5f97\u6709\u9650\u7684\u652f\u6301\u3002 \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u767c\u4f48\u968e\u6bb5\u8aaa\u660e](https://cloud.google.com/products?hl=zh-cn#product-launch-stages) \u3002\nGoogle \u7232\u60a8\u63d0\u4f9b\u4e86 [Docker \u6620\u50cf](https://github.com/google/aistreamer/blob/master/ingestion/env/Dockerfile) \u4f86\u8a55\u4f30\u9019\u4e9b\u529f\u80fd\u3002\u60a8\u53ef\u4ee5\u4e0b\u8f09\u6b64\u6620\u50cf\u4f5c\u7232 [AIStreamer](https://github.com/google/aistreamer/tree/master/ingestion) \u7684\u4e00\u90e8\u5206\u3002\n\u8acb\u6ce8\u610f\uff0c\u662f\u5426\u4f7f\u7528\u7b2c\u4e09\u65b9\u8edf\u4ef6\u7531\u60a8\u81ea\u884c\u6c7a\u5b9a\u3002Google \u4e0d\u64c1\u6709\u7b2c\u4e09\u65b9\u8edf\u4ef6\u7684\u7248\u6b0a\u3002\n", "content": "## \u524d\u63d0\u689d\u4ef6\n- \u5b89\u88dd [Docker](https://docs.docker.com/install) \u3002\n- \u5b89\u88dd [Google Cloud CLI](https://cloud.google.com/sdk?hl=zh-cn) \u3002\n- \u5b89\u88dd [Kubernetes](https://kubernetes.io/docs/tasks/tools/install-kubectl/#download-as-part-of-the-google-cloud-sdk) \u3002## \u69cb\u5efa Docker \u6620\u50cf\n\u8f49\u5230 [\u63d0\u53d6\u76ee\u9304](https://github.com/google/aistreamer/tree/master/ingestion) \u4e26\u5728\u5bbf\u4e3b\u6a5f\u4e0a\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\u884c\uff1a\n```\n$ export DOCKER_IMAGE=gcr.io/gcp-project-name/docker-image-name:version$ docker build -t $DOCKER_IMAGE -f env/Dockerfile .\n```\n## \u5728\u672c\u5730\u4e3b\u6a5f\u4e0a\u8a66\u7528 Docker \u6620\u50cf\n\u5728\u5bbf\u4e3b\u6a5f\u7684\u7d42\u7aef\u4e2d\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$ docker run -it $DOCKER_IMAGE /bin/bash\n```\n\u8a72\u547d\u4ee4\u6703\u8fd4\u56de\u985e\u4f3c\u65bc\u5982\u4e0b\u793a\u4f8b\u7684\u97ff\u61c9\u3002\n```\nroot@e504724e76fc:/#\n```\n\u8981\u6253\u958b\u9023\u63a5\u5230 Docker \u7684\u53e6\u4e00\u500b\u7d42\u7aef\uff0c\u8acb\u5728\u5bbf\u4e3b\u6a5f\u4e0a\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$ docker exec -it e504724e76fc /bin/bash\n```\n\u73fe\u5728\uff0c\u60a8\u5df2\u7d93\u6709\u5169\u500b\u4f4d\u65bc\u540c\u4e00\u500b Docker \u5bb9\u5668\u4e2d\u7684\u4e3b\u6a5f\u7d42\u7aef\u4e86\u3002\n## Docker \u6620\u50cf\u74b0\u5883\u8a2d\u7f6e\n\u4e00\u4e9b\u74b0\u5883\u8a2d\u7f6e\u53ef\u5728 [Docker \u6620\u50cf](https://github.com/google/aistreamer/blob/master/ingestion/env/Dockerfile) \u4e2d\u9032\u884c\u81ea\u5b9a\u7fa9\u3002\n```\n#set up environment for Google Video Intelligence Streaming APIENV SRC_DIR /googlesrc \u00a0#Source code directoryENV BIN_DIR /google \u00a0 \u00a0 #Binary directory\n```\n## \u5c07 Docker \u6620\u50cf\u63a8\u9001\u5230 Google Cloud Container Registry\n\u5728\u5bbf\u4e3b\u6a5f\u7684\u7d42\u7aef\u4e2d\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$ gcloud docker --verbosity debug -- push $DOCKER_IMAGE\n```\n\u60a8\u53ef\u80fd\u9700\u8981\u8a2d\u7f6e\u8a2a\u554f\u6b0a\u9650\u63a7\u5236\u3002\n## \u90e8\u7f72\u5230 Google Cloud\n\u5728\u5bbf\u4e3b\u6a5f\u7684\u7d42\u7aef\u4e2d\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$ export KUBE_ID=any_string_you_like$ kubectl run -it $KUBE_ID --image=$DOCKER_IMAGE -- /bin/bash\n```\n\u6703\u8fd4\u56de\u985e\u4f3c\u65bc\u5982\u4e0b\u6240\u793a\u7684\u97ff\u61c9\uff1a\n```\nroot@$KUBE_ID-215855480-c4sqp:/#\n```\n\u5982\u9700\u6253\u958b\u9023\u63a5\u5230 Google Cloud \u4e0a\u540c\u4e00 Kubernetes \u5bb9\u5668\u7684\u53e6\u4e00\u500b\u7d42\u7aef\uff0c\u8acb\u5728\u5bbf\u4e3b\u6a5f\u4e0a\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\u884c\uff1a\n```\n$ kubectl exec -it $KUBE_ID-215855480-c4sqp -- /bin/bash\n```\n\u73fe\u5728\uff0c\u60a8\u5df2\u7d93\u6709\u5169\u500b\u4f4d\u65bc Google Cloud \u4e0a\u540c\u4e00\u500b Kubernetes \u5bb9\u5668\u4e2d\u7684\u4e3b\u6a5f\u7d42\u7aef\u4e86\u3002", "guide": "Cloud Video Intelligence API"}