{"title": "Compute Engine - Renew commitments automatically", "url": "https://cloud.google.com/compute/docs/instances", "abstract": "# Compute Engine - Renew commitments automatically\nIf you have workloads with predictable resource requirements, you can lower your costs through [resource-based committed use discounts (CUDs)](/compute/docs/instances/signing-up-committed-use-discounts) . You can receive resource-based CUDs by purchasing resource-based for a term of either 1 or 3 years. By default, resource-based commitments expire at the end of their term. After a commitment's expiry, you must purchase a new commitment to continue receiving CUDs. of your resource-based commitment removes the need for you to manually repurchase the commitment every time it expires. Auto-renewal of a commitment allows you to indefinitely extend an existing commitment and continue receiving CUDs for those committed resources.\nThis document explains how auto-renewal works and shows you how to do the following:\n- Enable auto-renewal when you purchase new commitments.\n- Enable and disable auto-renewal on your existing active commitments.", "content": "## Limitations\n- You can enable auto-renewal only on your resource-based commitments.\n- You can enable auto-renewal only on your active commitments.\n- To create a commitment that renews automatically, you must use the gcloud CLI and the Compute Engine API. You can't do so by using the Google Cloud console. However, you can enable auto-renewal on an already active commitment by using the gcloud CLI, the Compute Engine API, or the Google Cloud console.## How auto-renewal works\nWhen you enable auto-renewal on a resource-based commitment, each time your commitment reaches the end of its term, Compute Engine automatically renews that commitment for a new term. After you enable auto-renewal on a commitment, the setting remains enabled until you manually disable it. You can disable auto-renewal on your commitment anytime before 12 AM US and Canadian Pacific Time (UTC-8, or UTC-7 during daylight saving time) on its renewal date.\nYou can enable auto-renewal on your commitments on both new and existing commitments.\n- For **new commitments** , when you purchase a commitment, you have the option to specify whether you want the commitment to renew automatically.\n- For **existing commitments** that are active and don't have auto-renewal enabled, you can modify the commitment's properties and enable auto-renewal. You can't enable auto-renewal for expired commitments.\nYou must enable auto-renewal separately on each commitment that you want to automatically renew in a project.\nAfter you enable auto-renewal on a commitment, the current end date of your commitment becomes its renewal date. All other properties of your commitment remain the same. At 12 AM US and Canadian Pacific Time (UTC-8, or UTC-7) on the current end date (the renewal date), your commitment's renewed term automatically begins. The term length of your renewed commitment remains the same as the original commitment and you receive the same discount percentage. At the end of the renewed term, Compute Engine again renews your commitment for a new term, unless you manually disable auto-renewal during the commitment's term.\nBy activating auto-renewal on a commitment, you agree to the following:\n- You have your commitment automatically renew for a new term on its current end date.\n- You continue paying for your committed resources over the new term.\n### Example of auto-renewal\nConsider an example 1-year commitment `my-commitment-1` that does not renew automatically. Suppose you purchase this commitment on January 1, 2020 for 100 N2 vCPUs. The term of your commitment is scheduled to end on January 1, 2021. Suppose you perform the following series of operations on this commitment:\n- You enable auto-renewal on this commitment before its end date.\n- After the commitment's term gets renewed 2 times, you disable auto-renewal on the commitment and let your commitment expire on its new end date.\nThe following table shows how the commitment's properties behave throughout the lifetime of this commitment:\n| Unnamed: 0      | Original term (Before enabling auto-renewal) | Original term (After enabling auto-renewal) | First automatically renewed term (Auto-renewal remains enabled) | Second automatically renewed term (Before disabling auto-renewal) | Second automatically renewed term (After disabling auto-renewal) |\n|:----------------------------------|:-----------------------------------------------|:----------------------------------------------|:------------------------------------------------------------------|:--------------------------------------------------------------------|:-------------------------------------------------------------------|\n| Term duration      | 1 year           | 1 year          | 1 year               | 1 year                | 1 year                |\n| Discount       | 37%           | 37%           | 37%                | 37%\u2021                | 37%\u2021                |\n| Start date*      | January 1, 2020        | January 1, 2020        | January 1, 2020             | January 1, 2020              | January 1, 2020             |\n| End date or renewal date\u2020   | January 1, 2021        | January 1, 2021        | January 1, 2022             | January 1, 2023              | January 1, 2023             |\n| Action on the end or renewal date | Commitment scheduled to end     | Commitment scheduled to renew     | Commitment scheduled to renew          | Commitment scheduled to renew          | Commitment scheduled to end          |\nThe commitment starts at 12 AM US and Canadian Pacific Time (UTC-8, or UTC-7) on the specified start date. The commitment ends or gets renewed at 12 AM US and Canadian Pacific Time (UTC-8, or UTC-7) on the specified end date. Even if the total duration of your commitment period becomes 3 years or more, the discount percentage for your auto-renewed commitment remains unchanged because the duration of each term is still 1 year.\n### Quota implications for auto-renewal\nYou do not need to request additional quota because renewed commitments use the same quota as the original commitment. For more information about quota for commitments, see [Quotas for commitments and committed resources](/compute/docs/instances/signing-up-committed-use-discounts#quota) .\n## Pricing implications for auto renewal\nYour commitment fee is the sum of the discounted prices of all your committed resources. When you renew your commitment's term, the discounted prices of all your committed resources are recalculated and might change. To do this recalculation, Compute Engine uses the prevailing on-demand prices of the resources on the day your renewed term becomes active. You retain these prices for your resources throughout your new term, even if the on-demand prices change.\n**Note:** If you merge or split your commitments, then the discounted prices for your committed resources might change on the day your merged or split commitments become active.\n## Purchase a commitment that renews automatically\nPurchase a commitment that renews automatically by using the gcloud CLI or the Compute Engine API.\nTo perform this task, you must have the following [permissions](/iam/docs/overview#permissions) :\n- `compute.commitments.create`on the project\nPurchase a commitment that renews automatically by using the [gcloudcommitments create command](/sdk/gcloud/reference/compute/commitments/create) .\nFor example, the following gcloud CLI command creates a 3-year commitment that renews automatically.\n```\ngcloud compute commitments create COMMITMENT \\\n --auto-renew \\\n --plan=36-month \\\n --region=us-west1 \\\n --project=PROJECT_ID \\\n --resources=vcpu=4,memory=9\n```\nReplace the following:- ``: the name of the new commitment.\n- ``: the project ID of the project where you want to create the commitment.\nPurchase a commitment that renews automatically by using the [regionCommitments.insert method](/compute/docs/reference/rest/v1/regionCommitments/insert) .\nFor example, the following Compute Engine API request creates a 3-year commitment that renews automatically.\n```\nPOST https://compute.googleapis.com/compute/v1/projects/PROJECT_ID/regions/us-west1/commitments\n{\n \"name\": \"COMMITMENT\",\n \"plan\": \"THIRTY_SIX_MONTH\",\n \"resources\": [ {\n  \"type\": \"VCPU\",\n  \"amount\": 4\n },\n {\n  \"type\": \"MEMORY\",\n  \"amount\": 9\n }\n ],\n \"autoRenew\": true\n}\n```\nReplace the following:- ``: the name of the new commitment.\n- ``: the project ID of the project where you want to create the commitment.## Purchase a commitment that does not renew automatically\nPurchase a commitment that does not renew automatically by using the Google Cloud console, gcloud CLI or the Compute Engine API.\nTo perform this task, you must have the following [permissions](/iam/docs/overview#permissions) :\n- `compute.commitments.create`on the project or organization\n- In the Google Cloud console, go to the **Committed use discounts** page. [Go to Committed use discounts](https://console.cloud.google.com/compute/commitments) \n- Click **Purchase commitment** .\n- Specify the details of the commitment. For more information, see [Purchase commitments for machine types](/compute/docs/instances/signing-up-committed-use-discounts#purchasecommitment) .\n- Click **Purchase** .\nPurchase a commitment that does not renew automatically by using the [gcloudcommitments create command](/sdk/gcloud/reference/compute/commitments/create) .\nFor example, using the following gcloud CLI, you purchase a new 3-year commitment that does not renew automatically.\n```\ngcloud compute commitments create COMMITMENT \\\n --plan=36-month \\\n --region=us-west1 \\\n --project=PROJECT_ID \\\n --resources=vcpu=4,memory=9\n```\nReplace the following:- ``: the name of the new commitment.\n- ``: the project ID of the project where you want to create the commitment.\nPurchase a commitment that does not renew automatically by using the [regionCommitments.insert](/compute/docs/reference/rest/v1/regionCommitments/insert) method.\nFor example, the following Compute Engine API request creates a new 3-year commitment that does not renew automatically.\n```\nPOST https://compute.googleapis.com/compute/v1/projects/PROJECT_ID/regions/us-west1/commitments\n{\n \"name\": \"COMMITMENT\",\n \"plan\": \"THIRTY_SIX_MONTH\",\n \"resources\": [ {\n  \"type\": \"VCPU\",\n  \"amount\": 4\n },\n {\n  \"type\": \"MEMORY\",\n  \"amount\": 9\n }\n ],\n}\n```\nReplace the following:- ``: the name of the new commitment.\n- ``: the project ID of the project where you want to create the commitment.## Enable auto-renewal on an existing commitment\nEnable auto-renewal on an existing commitment by using the Google Cloud console, gcloud CLI, or the Compute Engine API.\nTo perform this task, you must have the following [permissions](/iam/docs/overview#permissions) :\n- `compute.commitments.update`on the project or organization\n- In the Google Cloud console, go to the **Committed use discounts** page. [Go to Committed use discounts](https://console.cloud.google.com/compute/commitments) \n- In the **Commitment list** , under **Hardware commitments** , click the **Name** of the commitment.\n- On the **Hardware commitment details** page, click the **Auto renew** toggle.\nEnable auto-renewal on an existing commitment by using the [gcloudcommitments update command](/sdk/gcloud/reference/compute/commitments/update) .\n```\ngcloud compute commitments update COMMITMENT \\\n --auto-renew\n```\nReplace `` with the name of the commitment.\nEnable auto-renewal on an existing commitment by using the [regionCommitments.update](/compute/docs/reference/rest/v1/regionCommitments/update) method.\nFor example, the following Compute Engine API request enables auto-renew for a commitment in the `us-west1` region.\n```\nPATCH https://compute.googleapis.com/compute/v1/projects/PROJECT_ID/regions/us-west1/commitments\n{\n \"name\": \"COMMITMENT\",\n \"autoRenew\": true\n}\n```\nReplace the following:- ``: the name of the commitment to update.\n- ``: the project ID of the project where you want to update the commitment.## Disable auto-renewal on an existing commitment\nDisable auto-renewal on an existing commitment by using the Google Cloud console, gcloud CLI, or the Compute Engine API.\nTo perform this task, you must have the following [permissions](/iam/docs/overview#permissions) :\n- `compute.commitments.update`on the project or organization\n- In the Google Cloud console, go to the **Committed use discounts** page. [Go to Committed use discounts](https://console.cloud.google.com/compute/commitments) \n- In the **Commitment list** , under **Hardware commitments** , click the **Name** of the commitment.\n- On the **Hardware commitment details** page, click the **Auto renew** toggle.\nDisable auto-renewal on an existing commitment by using the [gcloudcommitments update command](/sdk/gcloud/reference/compute/commitments/update) .\n```\ngcloud compute commitments update COMMITMENT --no-auto-renew\n```\nReplace `` with the name of the commitment.\nDisable auto-renewal on an existing commitment by using the [regionCommitments.update](/compute/docs/reference/rest/v1/regionCommitments/update) method.\nFor example, the following Compute Engine API request disables auto-renewal for a commitment in the `us-west1` region.\n```\nPATCH https://compute.googleapis.com/compute/v1/projects/PROJECT_ID/regions/us-west1/commitments\n{\n \"name\": \"COMMITMENT\",\n \"autoRenew\": false\n}\n```\nReplace the following:- ``: the name of the commitment to update.\n- ``: the project ID of the project where you want to update the commitment.## What's next\n- Learn how to [troubleshoot auto renewal for resource-based commitments](/compute/docs/troubleshooting/automatic-commitment-renewal) .\n- Learn how to [merge and split resource-based commitments](/compute/docs/instances/merge-and-split-commitments) .\n- Learn how to [upgrade the term of resource-based commitments](/compute/docs/instances/upgrade-commitment-term) .\n- Learn how to [analyze the effectiveness of your resource-based committed use discounts](/billing/docs/how-to/cud-analysis-resource-based) .", "guide": "Compute Engine"}