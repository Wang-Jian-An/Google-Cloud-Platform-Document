{"title": "Compute Engine - Enabling Virtio RNG", "url": "https://cloud.google.com/compute/docs/instances", "abstract": "# Compute Engine - Enabling Virtio RNG\nVirtio RNG is a paravirtualized random number generator. Virtio RNG provides random numbers from an entropy pool generated by the host machine of your virtual machine (VM) instance. The entropy pool collects random bits of information from the system and uses that information to generate truly random numbers, which you can use for sensitive information, such as SSH keys or unique IDs.\n", "content": "## Before you begin\n- If you haven't already, set up authentication. [Authentication](/compute/docs/authentication) is the process by which your identity is verified for access to Google Cloud services and APIs. To run code or samples from a local development environment, you can authenticate to Compute Engine as follows.\n- [Install](/sdk/docs/install) the Google Cloud CLI, then [initialize](/sdk/docs/initializing) it by running the following command:```\ngcloud init\n``` **Note:** If you installed the gcloud CLI  previously, make sure you have the latest version by running`gcloud components  update`.\n- [ Set a default region and zone](/compute/docs/gcloud-compute#set_default_zone_and_region_in_your_local_client) .\n## Limitations\n- Virtio RNG is not available for Windows images.\n- By default, Compute Engine VMs use Virtio RNG instead of a daemon to refill the guest entropy pool. If you prefer to use an entropy gathering daemon instead of or along with Virtio RNG, you must install one. For an example of an entropy gathering daemon, see the [rng-tools](https://git.kernel.org/pub/scm/utils/kernel/rng-tools/rng-tools.git/about/) documentation.## Checking if Virtio RNG is enabled\n**Note:** Virtio RNG comes pre-enabled on all Linux VMs.\nYou can check whether Virtio RNG is enabled on your VM by running the following command:\n```\nlsmod | grep rng\n```\nWhen Virtio RNG is enabled, your output is similar to the following:\n```\nvirtio_rng    16384 0\nrng_core    16384 2 virtio_rng\nvirtio_ring   28672 4 virtio_rng,virtio_scsi,virtio_pci,virtio_net\nvirtio     16384 4 virtio_rng,virtio_scsi,virtio_pci,virtio_net\n```\n## Testing Virtio RNG\nYou can test Virtio RNG by using the `/dev/random` device.\n**Note:** Testing is not supported on SLES 15 for SAP.\n- Connect to the VM by using SSH. For example, you can use the gcloud CLI to connect:```\ngcloud compute ssh VM_NAME\n```Replace `` with the name of your VM.\n- Install `rng-tools` :\nUse the following command to install `rng-tools` :\n```\nsudo yum install rng-tools\n```\nUse the following command to install `rng-tools` :\n```\nsudo apt install rng-tools\n```\nUse the following command to install `rng-tools` :\n```\nsudo yum install rng-tools\n```\nUse the following command to install `rng-tools` :\n```\nsudo yum install rng-tools\n```\nUse the following command to install `rng-tools` :\n```\nsudo zypper install rng-tools\n```\nUse the following command to install `rng-tools` :\n```\nsudo apt install rng-tools\n```\nSome Ubuntu images return a `Package 'rng-tools' has no installation candidate` error. If you receive this error, run the following commands:\n```\nsudo apt update\nsudo apt install rng-tools\n```\n- On the VM, run the `rngtest` command:```\ncat /dev/random | rngtest -c 1000\n```\nIf Virtio RNG isn't enabled, the command doesn't return anything. If it is enabled, you receive a response similar to the following:\n```\nrngtest 2-unofficial-mt.14..\nrngtest: starting FIPS tests...\nrngtest: bits received from input: 20000032\nrngtest: FIPS 140-2 successes: 1000\nrngtest: FIPS 140-2 failures: 0\nrngtest: FIPS 140-2(2001-10-10) Monobit: 0\nrngtest: FIPS 140-2(2001-10-10) Poker: 0\nrngtest: FIPS 140-2(2001-10-10) Runs: 0\nrngtest: FIPS 140-2(2001-10-10) Long run: 0\nrngtest: FIPS 140-2(2001-10-10) Continuous run: 0\nrngtest: input channel speed: (min=4.801; avg=7.318; max=7.839)Mibits/s\nrngtest: FIPS tests speed: (min=39.005; avg=69.557; max=72.523)Mibits/s\nrngtest: Program run time: 2880954 microseconds\n```\n## What's next\n- Learn more about [Virtio RNG](https://www.redhat.com/en/blog/red-hat-enterprise-linux-virtual-machines-access-random-numbers-made-easy) \n- Learn more about [/dev/random](https://wikipedia.org/wiki//dev/random) \n- View [Operating system details](/compute/docs/images/os-details) to learn more about the images available on Compute Engine", "guide": "Compute Engine"}