{"title": "Dataproc - Dataproc \u7248\u672c\u63a7\u5236", "url": "https://cloud.google.com/dataproc/docs/concepts/versioning/overview?hl=zh-cn", "abstract": "# Dataproc - Dataproc \u7248\u672c\u63a7\u5236\nDataproc \u4f7f\u7528\u6620\u50cf\u5c07\u6709\u7528\u7684 Google Cloud Platform \u9023\u63a5\u5668\u3001Apache Spark \u548c Apache Hadoop \u7d44\u4ef6\u6346\u7d81\u5230\u4e00\u500b\u53ef\u90e8\u7f72\u5728 Dataproc \u96c6\u7fa3\u4e0a\u7684\u8edf\u4ef6\u5305\u4e2d\u3002\u9019\u4e9b\u6620\u50cf\u5305\u542b\u96c6\u7fa3\u7684\u57fa\u672c\u64cd\u4f5c\u7cfb\u7d71\uff08Debian \u6216 Ubuntu\uff09\uff0c\u4ee5\u53ca\u904b\u884c\u4f5c\u696d\u6240\u9700\u7684 [\u6838\u5fc3\u7d44\u4ef6\u548c\u53ef\u9078\u7d44\u4ef6](https://cloud.google.com/dataproc/docs/concepts/components/overview?hl=zh-cn) \uff0c\u4f8b\u5982 Spark\u3001Hadoop \u548c Hive\u3002 \u9019\u4e9b\u6620\u50cf\u5c07\u5b9a\u671f\u5347\u7d1a\uff0c\u4ee5\u5f15\u5165\u65b0\u7684\u6539\u9032\u548c\u529f\u80fd\u3002\u901a\u904e Dataproc \u7248\u672c\u63a7\u5236\u529f\u80fd\uff0c\u60a8\u53ef\u4ee5\u5728\u5275\u5efa\u96c6\u7fa3\u6642\u9078\u64c7\u8edf\u4ef6\u7248\u672c\u96c6\u3002\n", "content": "## \u7248\u672c\u63a7\u5236\u7684\u5de5\u4f5c\u539f\u7406\n\u5275\u5efa\u6620\u50cf\u5f8c\uff0c\u8a72\u6620\u50cf\u6703\u7372\u5f97\u4e0b\u5217\u683c\u5f0f\u7684 [\u6620\u50cf\u7248\u672c](https://cloud.google.com/dataproc/docs/concepts/versioning/dataproc-versions?hl=zh-cn) \u865f\uff1a\n`version_major.version_minor.version_sub_minor-os_distribution`\n\u76ee\u524d\u63a5\u53d7\u7dad\u8b77\u7684\u662f\u4ee5\u4e0b\u64cd\u4f5c\u7cfb\u7d71\u767c\u884c\u7248\uff1a\n| \u64cd\u4f5c\u7cfb\u7d71\u767c\u884c\u7248\u4ee3\u78bc | \u64cd\u4f5c\u7cfb\u7d71\u767c\u884c\u7248 |\n|:---------------------|:-----------------|\n| debian12    | Debian 12  |\n| debian10    | Debian 10  |\n| debian11    | Debian 11  |\n| rocky8    | Rocky Linux 8 |\n| rocky9    | Rocky Linux 9 |\n| ubuntu18    | Ubuntu 18.04 LTS |\n| ubuntu20    | Ubuntu 20.04 LTS |\n| ubuntu22    | Ubuntu 22.04 LTS |\n\u5982\u9700\u67e5\u770b\u4ee5\u524d\u652f\u6301\u7684\u64cd\u4f5c\u7cfb\u7d71\u767c\u884c\u7248\uff0c\u8acb\u53c3\u95b1 [\u820a\u6620\u50cf\u7248\u672c](#old_image_versions) \u3002\n\u5efa\u8b70\u7684\u505a\u6cd5\u662f\u7232\u751f\u7522\u74b0\u5883\u6307\u5b9a `major.minor` \u6620\u50cf\u7248\u672c\uff0c\u6216\u8005\u7576\u8207\u7279\u5b9a\u7d44\u4ef6\u7248\u672c\u7684\u517c\u5bb9\u6027\u5f88\u91cd\u8981\u6642\u6307\u5b9a\u6b64\u6620\u50cf\u7248\u672c\u3002\u6b21\u8981\u767c\u884c\u7248\u548c\u64cd\u4f5c\u7cfb\u7d71\u767c\u884c\u7248\u90fd\u5c07\u81ea\u52d5\u8a2d\u7f6e\u7232\u6700\u65b0\u7684\u6bcf\u9031\u7248\u672c\u3002\n## \u9078\u64c7\u7248\u672c\n\u5275\u5efa\u65b0\u7684 Dataproc \u96c6\u7fa3\u6642\uff0c\u9ed8\u8a8d\u60c5\u6cc1\u4e0b\u5c07\u4f7f\u7528\u6700\u65b0\u53ef\u7528\u7684 **Debian** \u6620\u50cf\u7248\u672c\u3002\u60a8\u53ef\u4ee5\u5728\u5275\u5efa\u96c6\u7fa3\u6642\u9078\u64c7 Debian\u3001Rocky Linux \u6216 Ubuntu \u6620\u50cf\u7248\u672c\uff08\u8acb\u53c3\u95b1 [Dataproc \u6620\u50cf\u7248\u672c\u5217\u8868](https://cloud.google.com/dataproc/docs/concepts/versioning/dataproc-versions?hl=zh-cn) \uff09\u3002\u6307\u5b9a\u57fa\u65bc Debian \u7684\u6620\u50cf\u6642\uff0c\u60a8\u53ef\u4ee5\u7701\u7565\u64cd\u4f5c\u7cfb\u7d71\u767c\u884c\u7248\u4ee3\u78bc\u5f8c\u7db4\uff0c\u4f8b\u5982\u901a\u904e\u6307\u5b9a `2.0` \u4f86\u9078\u64c7 `2.0-debian10` \u6620\u50cf\u3002\u5982\u9700\u9078\u64c7\u57fa\u65bc Rocky Linux \u6216 Ubuntu \u7684\u6620\u50cf\uff0c **\u5fc5\u9808** \u4f7f\u7528\u64cd\u4f5c\u7cfb\u7d71\u5f8c\u7db4\uff0c\u4f8b\u5982\u6307\u5b9a `2.0-ubuntu18` \u3002\n\u4f7f\u7528 `gcloud dataproc clusters create` \u547d\u4ee4\u6642\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 `--image-version` \u53c3\u6578\u6307\u5b9a\u65b0\u96c6\u7fa3\u7684\u6620\u50cf\u7248\u672c\u3002\n **Debian \u6620\u50cf\u793a\u4f8b\uff1a** \n```\ngcloud dataproc clusters create cluster-name \\\n\u00a0\u00a0\u00a0\u00a0--image-version=2.0 \\\n\u00a0\u00a0\u00a0\u00a0--region=region\n```\n **Ubuntu \u6620\u50cf\u793a\u4f8b\uff1a** \n```\ngcloud dataproc clusters create cluster-name \\\n\u00a0\u00a0\u00a0\u00a0--image-version=2.0-ubuntu18 \\\n\u00a0\u00a0\u00a0\u00a0--region=region\n```\n\u6700\u4f73\u505a\u6cd5\u662f\u7701\u7565\u6b21\u8981\u7248\u672c\uff0c\u4ee5\u4fbf\u4f7f\u7528\u6700\u65b0\u7684\u6b21\u8981\u7248\u672c\u3002\u4f46\u662f\uff0c\u5982\u6709\u5fc5\u8981\uff0c\u53ef\u4ee5\u6307\u5b9a\u6b21\u8981\u7248\u672c\uff0c\u4f8b\u5982\u201c2.0.20\u201d\u3002\n\u60a8\u53ef\u4ee5\u4f7f\u7528 Google Cloud CLI \u6aa2\u67e5\u7576\u524d\u7248\u672c\u3002\n```\ngcloud dataproc clusters describe cluster-name \\\n\u00a0\u00a0\u00a0\u00a0--region=region\n```\u60a8\u53ef\u4ee5\u5c07 `SoftwareConfig` [imageVersion](https://cloud.google.com/dataproc/docs/reference/rest/v1/ClusterConfig?hl=zh-cn#SoftwareConfig) \u5b57\u6bb5\u6307\u5b9a\u7232 [cluster.create](https://cloud.google.com/dataproc/docs/reference/rest/v1/projects.regions.clusters/create?hl=zh-cn) API \u8acb\u6c42\u7684\u4e00\u90e8\u5206\u3002\n **\u793a\u4f8b** \n```\nPOST /v1/projects/project-id/regions/us-central1/clusters/\n{\n \"projectId\": \"project-id\",\n \"clusterName\": \"example-cluster\",\n \"config\": {\n \"configBucket\": \"\",\n \"gceClusterConfig\": {\n  \"subnetworkUri\": \"default\",\n  \"zoneUri\": \"us-central1-b\"\n },\n \"masterConfig\": {\n  ...\n  }\n },\n \"workerConfig\": {\n  ...\n  }\n },\n \"softwareConfig\": {\n  \"imageVersion\": \"2.0\"\n }\n }\n}\n \n```\u6253\u958b Dataproc [\u5275\u5efa\u96c6\u7fa3](https://console.cloud.google.com/dataproc/clustersAdd?hl=zh-cn) \u9801\u9762\u3002\u9078\u4e2d\u201c\u8a2d\u7f6e\u96c6\u7fa3\u201d\u9762\u677f\u3002\u201c\u7248\u672c\u63a7\u5236\u201d\u90e8\u5206\u7684\u201c\u6620\u50cf\u985e\u578b\u548c\u7248\u672c\u201d\u5b57\u6bb5\u986f\u793a\u5275\u5efa\u96c6\u7fa3\u6642\u5c07\u4f7f\u7528\u7684\u6620\u50cf\u3002\u9084\u6703\u986f\u793a\u6620\u50cf\u7684\u767c\u4f48\u65e5\u671f\u3002\u6700\u521d\uff0c\u9ed8\u8a8d\u6620\u50cf\uff08\u6700\u65b0\u7684\u53ef\u7528 Debian \u7248\u672c\uff09\u986f\u793a\u7232\u5df2\u9078\u9805\u3002\u9ede\u64ca\u201c\u8b8a\u66f4\u201d\uff0c\u986f\u793a\u53ef\u7528\u6620\u50cf\u7684\u5217\u8868\u3002\u9078\u64c7\u8981\u7528\u65bc\u96c6\u7fa3\u7684\u6a19\u6e96\u6216 [\u81ea\u5b9a\u7fa9\u6620\u50cf](https://cloud.google.com/dataproc/docs/guides/dataproc-images?hl=zh-cn) \u3002\n## \u4f55\u6642\u5275\u5efa\u65b0\u7248\u672c\n\u6211\u5011\u6703\u5b9a\u671f\u5275\u5efa\u65b0\u7684 **\u4e3b\u8981** \u7248\u672c\uff0c\u4ee5\u6574\u5408\u4ee5\u4e0b\u4e00\u9805\u6216\u591a\u9805\u5167\u5bb9\uff1a\n- \u4ee5\u4e0b\u5404\u9805\u7684\u4e3b\u8981\u7248\u672c\uff1a- Spark\u3001Hadoop \u548c\u5176\u4ed6\u5927\u6578\u64da\u7d44\u4ef6\n- Google Cloud \u9023\u63a5\u5668\n- Dataproc \u529f\u80fd\u7684\u91cd\u5927\u66f4\u6539\u6216\u66f4\u65b0\n\u65b0\u7684 **preview** \u7248\u672c\uff08\u5e36\u6709 `-RC` \u5f8c\u7db4\uff09\u662f\u5728\u65b0\u7684\u4e3b\u8981\u7248\u672c\u767c\u4f48\u4e4b\u524d\u767c\u4f48\u7684\uff1a\n- \u9810\u89bd\u7248\u6620\u50cf\u4e0d\u9069\u5408\u7528\u65bc\u751f\u7522\u5de5\u4f5c\u8ca0\u8f09\u3002\n- \u9810\u89bd\u7248\u6620\u50cf\u7d44\u4ef6\u7248\u672c\u53ef\u80fd\u6703\u5347\u7d1a\u5230\u9810\u89bd\u7248\u5f8c GA \u6620\u50cf\u7248\u672c\u4e2d\u7684\u6700\u65b0\u53ef\u7528\u7d44\u4ef6\u7248\u672c\u3002\n\u6211\u5011\u6703\u5b9a\u671f\u5275\u5efa\u65b0\u7684 **\u6b21\u8981** \u7248\u672c\uff0c\u4ee5\u6574\u5408\u4ee5\u4e0b\u4e00\u9805\u6216\u591a\u9805\u5167\u5bb9\uff1a\n- \u4ee5\u4e0b\u5404\u9805\u7684\u6b21\u8981\u7248\u672c\u548c\u66f4\u65b0\uff1a- Spark\u3001Hadoop \u548c\u5176\u4ed6\u5927\u6578\u64da\u7d44\u4ef6\n- Google Cloud \u9023\u63a5\u5668\n- Dataproc \u529f\u80fd\u7684\u7d30\u5fae\u8b8a\u66f4\u6216\u66f4\u65b0\n\u5275\u5efa\u65b0\u7684\u6b21\u8981\u7248\u672c\u5f8c\uff0c\u8a72\u7248\u672c\u7684 Debian \u6620\u50cf\u5c07\u6210\u7232\u4e3b\u8981\u7248\u672c\u7684\u9ed8\u8a8d\u7248\u672c\uff0c\u4e26\u4ee3\u8868\u4e3b\u8981\u7248\u672c\u7684\u6700\u65b0\u7248\u672c\u3002\n\u6211\u5011\u6703\u5b9a\u671f\u5275\u5efa\u65b0\u7684 *\u6b21\u8981\u7248\u672c\uff0c\u4ee5\u6574\u5408\u4ee5\u4e0b\u4e00\u9805\u6216\u591a\u9805\u5167\u5bb9\uff1a\n- \u6620\u50cf\u4e2d\u7d44\u4ef6\u7684\u88dc\u4e01\u7a0b\u5e8f\u6216\u4fee\u5fa9\u7a0b\u5e8f\n- \u7d44\u4ef6\u6b21\u8981\u7248\u672c\u5347\u7d1a## \u6620\u50cf\u7248\u672c\u548c Dataproc \u652f\u6301\n\u6b63\u5f0f\u7248\u9996\u6b21\u767c\u4f48\u5f8c\uff0c\u6b21\u8981\u6620\u50cf\u7248\u672c\u652f\u6301 24 \u500b\u6708\u3002\u5728\u6b64\u671f\u9593\uff0c\u4f7f\u7528\u9019\u4e9b\u6620\u50cf\u7248\u672c\u7684\u96c6\u7fa3\u6709\u8cc7\u683c\u7372\u5f97\u652f\u6301\uff08\u7232\u4e86\u7372\u5f97\u4fee\u5fa9\u7a0b\u5e8f\uff0c\u8acb\u4f7f\u7528\u6700\u65b0\u652f\u6301\u7684\u6b21\u8981\u6620\u50cf\u7248\u672c\u91cd\u65b0\u5275\u5efa\u60a8\u7684\u96c6\u7fa3\uff09\u3002\u652f\u6301\u671f\u7d50\u675f\u5f8c\uff0c\u4f7f\u7528\u9019\u4e9b\u6620\u50cf\u7248\u672c\u7684\u96c6\u7fa3\u5c07\u4e0d\u518d\u7372\u5f97\u652f\u6301\u3002\n## \u820a\u6620\u50cf\u7248\u672c\n### \u4ee5\u524d\u652f\u6301\u7684\u64cd\u4f5c\u7cfb\u7d71\u767c\u884c\u7248\n\u4e4b\u524d\uff0c\u4ee5\u4e0b\u64cd\u4f5c\u7cfb\u7d71\u767c\u884c\u7248\u53d7\u652f\u6301\uff1a\n| \u64cd\u4f5c\u7cfb\u7d71\u767c\u884c\u7248\u4ee3\u78bc | \u64cd\u4f5c\u7cfb\u7d71\u767c\u884c\u7248 | \u4e0a\u6b21\u4fee\u88dc\u65e5\u671f\uff08\u652f\u6301\u7d42\u6b62\u65e5\u671f\uff09 |\n|:---------------------|:-----------------|:-------------------------------|\n| debian9    | Debian 9   | 2020 \u5e74 7 \u6708 10 \u65e5    |\n| deb8     | Debian 8   | 2018 \u5e74 10 \u6708 26 \u65e5   |\n## \u6c92\u6709\u660e\u78ba\u7684\u64cd\u4f5c\u7cfb\u7d71\u767c\u884c\u7248\u7684\u6620\u50cf\u7248\u672c\n\u5728 2018 \u5e74 8 \u6708 16 \u65e5\u4e4b\u524d\uff0c\u6620\u50cf\u7248\u672c\u662f\u4f7f\u7528 Debian 8 \u69cb\u5efa\u7684\uff0c\u4e26\u7701\u7565\u4e86\u64cd\u4f5c\u7cfb\u7d71\u767c\u884c\u7248\u4ee3\u78bc\u3002\u9019\u4e9b\u7248\u672c\u662f\u901a\u904e\u4ee5\u4e0b\u683c\u5f0f\u6307\u5b9a\u7684\uff1a\n`version_major.version_minor.version_sub_minor`\n### 0.1 \u548c 0.2\n\u5728 Dataproc \u7248\u672c `1.0` \u6b63\u5f0f\u767c\u4f48\u4e4b\u524d\uff0c\u4f5c\u7232 Alpha \u7248\u6216 Beta \u7248\u767c\u4f48\u7684\u6620\u50cf\u7248\u672c\u90fd\u4e0d\u5728 [Dataproc \u652f\u6301\u653f\u7b56](#image_version_and_support) \u7684\u6db5\u84cb\u7bc4\u570d\u5167\u3002\n## \u6709\u95dc\u7248\u672c\u63a7\u5236\u7684\u91cd\u8981\u8aaa\u660e\n- \u6620\u50cf\u7248\u672c\u5305\u542b\u6240\u6709\u96c6\u7fa3\u4e0a\u5b89\u88dd\u7684\u6838\u5fc3\u7d44\u4ef6\uff08\u4f8b\u5982 Spark\u3001Hadoop \u548c Hive\uff09\u4ee5\u53ca\u7528\u6236\u53ef\u4ee5\u9078\u64c7\u5b89\u88dd\u7684\u53ef\u9078\u7d44\u4ef6\uff08\u8acb\u53c3\u95b1 [Dataproc \u7d44\u4ef6](https://cloud.google.com/dataproc/docs/concepts/components/overview?hl=zh-cn) \uff09\u3002\n- \u5275\u5efa\u96c6\u7fa3\u540e\uff0c\u7576\u65b0\u7684\u6620\u50cf\u7248\u672c\u767c\u4f48\u6642\uff0c\u6b63\u5728\u904b\u884c\u7684\u96c6\u7fa3\u4e0d\u6703\u81ea\u52d5\u66f4\u65b0\u3002\n- \u5728\u4f7f\u7528\u65b0\u7684\u6620\u50cf\u7248\u672c\uff08\u5c24\u5176\u662f\u65b0\u7684\u4e3b\u8981\u7248\u672c\uff09\u6642\uff0c\u61c9\u6e2c\u8a66\u4e26\u9a57\u8b49\u61c9\u7528\u662f\u5426\u6b63\u5e38\u904b\u884c\u3002", "guide": "Dataproc"}