{"title": "Dataproc - Dataproc optional Presto component", "url": "https://cloud.google.com/dataproc/docs/concepts/components/presto", "abstract": "# Dataproc - Dataproc optional Presto component\n**Note:** The [Presto Optional Component](/dataproc/docs/concepts/components/presto) is available as [Trino Optional Component](/dataproc/docs/concepts/components/trino) in 2.1 and later image versions.\nYou can install additional components like Presto when you create a Dataproc cluster using the [Optional components](/dataproc/docs/concepts/components/overview#available_optional_components) feature. This page describes how you can optionally install Presto component on a Dataproc cluster.\nPresto ( [Trino](https://trino.io/) ) is an open source distributed SQL query engine. The Presto server and Web UI are by default available on port `8060` (or port `7778` if Kerberos is enabled) on the cluster's first master node.\nBy default, Presto on Dataproc is configured to work with `Hive` , `BigQuery` , `Memory` , `TPCH` and `TPCDS` [connectors](https://trino.io/docs/current/connector.html) .\nAfter creating a cluster with the Presto component, you can run queries:\n- from a local terminal with the [gcloud dataproc jobs submit presto](/sdk/gcloud/reference/dataproc/jobs/submit/presto) command\n- from a terminal window on the cluster's first master node using the`presto`CLI (Command Line Interface)\u2014see [Use Trino with Dataproc](/dataproc/docs/tutorials/trino-dataproc) ", "content": "## Install the component\nInstall the component when you create a Dataproc cluster. Components can be added to clusters created with Dataproc [version 1.3](/dataproc/docs/concepts/versioning/dataproc-release-1.3) and later.\nSee [Supported Dataproc versions](/dataproc/docs/concepts/versioning/dataproc-versions#supported_cloud_dataproc_versions) for the component version included in each Dataproc image release.\nTo create a Dataproc cluster that includes the Presto component, use the [gcloud dataproc clusters create](/sdk/gcloud/reference/dataproc/clusters/create)  command with the `--optional-components` flag.\nWhen creating the cluster, use [gcloud dataproc clusters create](/sdk/gcloud/reference/dataproc/clusters/create) command with the`--enable-component-gateway`flag, as shown below, to enable connecting to the Presto Web UI using the [Component Gateway](/dataproc/docs/concepts/accessing/dataproc-gateways) .\n```\ngcloud dataproc clusters create cluster-name \\\n\u00a0\u00a0\u00a0\u00a0--optional-components=PRESTO \\\n\u00a0\u00a0\u00a0\u00a0--region=region \\\n\u00a0\u00a0\u00a0\u00a0--enable-component-gateway \\\n\u00a0\u00a0\u00a0\u00a0... other flags\n```Add the [--properties ](/dataproc/docs/concepts/configuring-clusters/cluster-properties#how_the_properties_flag_works) flag to the `gcloud dataproc clusters create` command to set presto, presto-jvm and presto-catalog config properties.- **Application properties:** Use cluster properties with the`presto:`prefix to configure [Presto application properties](https://trino.io/docs/current/admin/properties.html) \u2014for example,`--properties=\"presto:join-distribution-type=AUTOMATIC\"`.\n- **JVM configuration properties:** Use cluster properties with the`presto-jvm:`prefix to configure JVM properties for Presto coordinator and worker Java processes\u2014for example,`--properties=\"presto-jvm:XX:+HeapDumpOnOutOfMemoryError\"`.\n- **Creating new catalogs and adding catalog properties:** Use`presto-catalog:` `` `.` ``to configure Presto catalogs. **Example:** The following `properties` flag can be used with the `gcloud dataproc clusters create` command to create a Presto cluster with a \"prodhive\" Hive catalog. A `prodhive.properties` file will be created under `/usr/lib/presto/etc/catalog/` to enable the prodhive catalog.```\n--properties=\"presto-catalog:prodhive.connector.name=hive-hadoop2,presto-catalog:prodhive.hive.metastore.uri=thrift://localhost:9083\n```\nThe Presto component can be specified through the Dataproc API using [SoftwareConfig.Component](/dataproc/docs/reference/rest/v1/ClusterConfig#Component) as part of a [clusters.create](/dataproc/docs/reference/rest/v1/projects.regions.clusters/create) request.\nUsing the [Dataproc v1 API](/dataproc/docs/reference/rest) , set the [EndpointConfig.enableHttpPortAccess](/dataproc/docs/reference/rest/v1/ClusterConfig#endpointconfig) property to`true`as part of the clusters.create request to enable connecting to the Presto Web UI using the [Component Gateway](/dataproc/docs/concepts/accessing/dataproc-gateways) .\n- Enable the component and component gateway.- In the Google Cloud console, open the Dataproc [Create a cluster](https://console.cloud.google.com/dataproc/clustersAdd) page. The Set up cluster panel is selected.\n- In the Components section:- Under Optional components, select Presto and other optional    components to install on your cluster.\n- Under Component Gateway, select Enable component gateway    (see [Viewing and Accessing Component Gateway URLs](/dataproc/docs/concepts/accessing/dataproc-gateways#viewing_and_accessing_component_gateway_urls) ).", "guide": "Dataproc"}