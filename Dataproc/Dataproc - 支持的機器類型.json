{"title": "Dataproc - \u652f\u6301\u7684\u6a5f\u5668\u985e\u578b", "url": "https://cloud.google.com/dataproc/docs/concepts/compute/supported-machine-types?hl=zh-cn", "abstract": "# Dataproc - \u652f\u6301\u7684\u6a5f\u5668\u985e\u578b\nDataproc \u96c6\u7fa3\u662f\u5728 [Compute Engine](https://cloud.google.com/compute?hl=zh-cn) \u5be6\u4f8b\u4e0a\u69cb\u5efa\u7684\u3002 [\u6a5f\u5668\u985e\u578b](https://cloud.google.com/compute/docs/machine-types?hl=zh-cn) \u5b9a\u7fa9\u4e86\u5be6\u4f8b\u53ef\u7528\u7684\u865b\u64ec\u5316\u786c\u4ef6\u8cc7\u6e90\u3002Compute Engine \u63d0\u4f9b\u4e86 [\u9810\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b](https://cloud.google.com/compute/docs/machine-types?hl=zh-cn#predefined_machine_types) \u548c [\u81ea\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b](https://cloud.google.com/compute/docs/machine-types?hl=zh-cn#custom_machine_types) \u3002Dataproc \u96c6\u7fa3\u53ef\u4ee5\u5c0d\u4e3b\u5be6\u4f8b\u7bc0\u9ede\u548c/\u6216\u5de5\u4f5c\u5668\u7bc0\u9ede\u4f7f\u7528\u9810\u5b9a\u7fa9\u985e\u578b\u548c\u81ea\u5b9a\u7fa9\u985e\u578b\u3002\nDataproc \u96c6\u7fa3\u652f\u6301\u4ee5\u4e0b Compute Engine \u9810\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b\uff08\u6a5f\u5668\u985e\u578b\u53ef\u7528\u6027\u56e0 [\u5340\u57df](https://cloud.google.com/compute/docs/regions-zones?hl=zh-cn#available) \u800c\u7570\uff09\uff1a\n- [\u901a\u7528\u6a5f\u5668\u985e\u578b](https://cloud.google.com/compute/docs/machine-types?hl=zh-cn#general_purpose) \uff0c\u5305\u62ec N1\u3001N2\u3001N2D \u548c E2 \u6a5f\u5668\u985e\u578b\uff08Dataproc \u9084\u652f\u6301 N1\u3001N2\u3001N2D \u548c E2 [\u81ea\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b](#custom_machine_types) \uff09\u3002 **\u9650\u5236\uff1a** - 2.0 \u53ca\u66f4\u9ad8\u7248\u672c\u7684\u6620\u50cf **\u4e0d\u652f\u6301** n1-standard-1 \u6a5f\u5668\u985e\u578b\uff08\u5c0d\u65bc 2.0 \u53ca\u4ee5\u4e0a\u7248\u672c\u7684\u6620\u50cf\uff0c **\u4e0d\u5efa\u8b70** \u4f7f\u7528 n1-standard-1 \u6a5f\u5668\u985e\u578b\uff1b\u8acb\u6539\u7528\u5177\u6709\u66f4\u9ad8\u5167\u5b58\u7684\u6a5f\u5668\u985e\u578b\u3002\n- **\u4e0d\u652f\u6301** \u5171\u4eab\u6838\u5fc3\u6a5f\u5668\u985e\u578b\uff0c\u5176\u4e2d\u5305\u62ec\u4ee5\u4e0b\u4e0d\u53d7\u652f\u6301\u7684\u6a5f\u5668\u985e\u578b\uff1a- E2\uff1ae2-micro\u3001e2-small \u548c e2-medium \u5171\u4eab\u6838\u5fc3\u6a5f\u5668\u985e\u578b\uff0c\u4ee5\u53ca\n- N1\uff1af1-micro \u548c g1-small \u5171\u4eab\u6838\u5fc3\u6a5f\u5668\u985e\u578b\u3002\n- [\u8a08\u7b97\u512a\u5316\u6a5f\u5668\u985e\u578b](https://cloud.google.com/compute/docs/machine-types?hl=zh-cn#compute-optimized_machine_type_family) \uff0c\u5305\u62ec [C2](https://cloud.google.com/compute/docs/compute-optimized-machines?hl=zh-cn#c2_machine_types) \u548c [C2D](https://cloud.google.com/compute/docs/compute-optimized-machines?hl=zh-cn#c2d_machine_types) \u6a5f\u5668\u985e\u578b\u3002\n- [\u5167\u5b58\u512a\u5316\u6a5f\u5668\u985e\u578b](https://cloud.google.com/compute/docs/machine-types?hl=zh-cn#memory-optimized_machine_type_family) \uff0c\u5305\u62ec M1 \u548c M2 \u6a5f\u5668\u985e\u578b\u3002\n- [ARM \u6a5f\u5668\u985e\u578b](#arm_machine_types) \uff0c\u5305\u62ec [T2A](https://cloud.google.com/compute/docs/instances/arm-on-compute?hl=zh-cn#tau_t2a_machine_series) \u6a5f\u5668\u985e\u578b\u3002\n\u5982\u9700\u6709\u95dc\u9078\u64c7\u6a5f\u5668\u985e\u578b\u7684\u5e6b\u52a9\uff0c\u8acb\u53c3\u95b1 [\u4f7f\u7528\u865b\u64ec\u6a5f\u6a5f\u5668\u985e\u578b\u512a\u5316 Dataproc \u8cbb\u7528](https://cloud.google.com/blog/products/data-analytics/optimize-dataproc-costs-using-vm-machine-type?hl=zh-cn) \u3002\n", "content": "## \u81ea\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b\nDataproc \u652f\u6301 **N1 \u7cfb\u5217**  [\u81ea\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b](https://cloud.google.com/compute/docs/instances/creating-instance-with-custom-machine-type?hl=zh-cn) \u3002\n\u81ea\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b\u975e\u5e38\u9069\u5408\u4ee5\u4e0b\u5de5\u4f5c\u8ca0\u8f09\uff1a\n- \u4e0d\u9069\u5408\u4f7f\u7528\u9810\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b\u7684\u5de5\u4f5c\u8ca0\u8f09\u3002\n- \u9700\u8981\u66f4\u9ad8\u7684\u8655\u7406\u80fd\u529b\u6216\u66f4\u5927\u7684\u5167\u5b58\u3001\u4f46\u53c8\u4e0d\u9700\u8981\u66f4\u9ad8\u7d1a\u5225\u7684\u6a5f\u5668\u985e\u578b\u6240\u63d0\u4f9b\u7684\u5168\u9762\u5347\u7d1a\u7684\u5de5\u4f5c\u8ca0\u8f09\u3002\n\u4f8b\u5982\uff0c\u5982\u679c\u60a8\u5de5\u4f5c\u8ca0\u8f09\u9700\u8981\u7684\u8655\u7406\u80fd\u529b\u6bd4 `n1-standard-4` \u5be6\u4f8b\u63d0\u4f9b\u7684\u591a\uff0c\u4f46\u4e0b\u4e00\u6b65 `n1-standard-8` \u5be6\u4f8b\u5c07\u63d0\u4f9b\u904e\u591a\u5bb9\u91cf\u3002\u85c9\u52a9\u81ea\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b\uff0c\u60a8\u53ef\u4ee5\u5275\u5efa\u5c07\u4e3b\u5be6\u4f8b\u7bc0\u9ede\u548c/\u6216\u5de5\u4f5c\u5668\u7bc0\u9ede\u7f6e\u65bc\u4e2d\u9593\u7bc4\u570d\u7684 Dataproc \u96c6\u7fa3\uff08\u5177\u6709 6 \u500b\u865b\u64ec CPU \u548c 25 GB \u5167\u5b58\uff09\u3002\n### \u6307\u5b9a\u81ea\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b\n\u81ea\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b\u4f7f\u7528\u7279\u6b8a\u7684 `machine type` \u898f\u7bc4\uff0c\u4e26\u4e14\u53d7 [\u9650\u5236](https://cloud.google.com/compute/docs/instances/creating-instance-with-custom-machine-type?hl=zh-cn#specifications) \u7684\u7d04\u675f\u3002\u4f8b\u5982\uff0c\u5177\u6709 6 \u500b\u865b\u64ec CPU \u548c 22.5 GB \u5167\u5b58\u7684\u81ea\u5b9a\u7fa9\u865b\u64ec\u6a5f\u7684\u81ea\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b\u898f\u683c\u7232 `custom-6-23040` \u3002\n\u6a5f\u5668\u985e\u578b\u898f\u7bc4\u4e2d\u7684\u6578\u5b57\u8207\u6a5f\u5668\u4e2d\u7684\u865b\u64ec CPU (vCPU) \u6578\u91cf ( `6` ) \u548c\u5167\u5b58\u91cf ( `23040` ) \u5c0d\u61c9\u3002\u5167\u5b58\u91cf\u662f\u4ee5 GB \u7232\u55ae\u4f4d\u7684\u5167\u5b58\u91cf\u4e58\u4ee5 `1024` \u4f86\u8a08\u7b97\uff08\u8acb\u53c3\u95b1 [\u4ee5 GB \u6216 MB \u8868\u793a\u5167\u5b58](https://cloud.google.com/compute/docs/instances/creating-instance-with-custom-machine-type?hl=zh-cn#memory_units) \uff09\u3002\u5728\u4ee5\u4e0b\u793a\u4f8b\u4e2d\uff0c22.5 (GB) \u4e58\u4ee5 1024\uff1a `22.5 * 1024 = 23040` \u3002\n**\u6ce8\u610f** \uff1aDataproc \u8981\u6c42\u6a5f\u5668\u985e\u578b\u81f3\u5c11\u6709 3.5GB (3584) \u5167\u5b58\u3002\n\u4e0a\u8ff0\u8a9e\u6cd5\u53ef\u7528\u65bc\u7232\u60a8\u7684\u96c6\u7fa3\u6307\u5b9a\u81ea\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b\u3002\u60a8\u53ef\u4ee5\u5728\u5275\u5efa\u96c6\u7fa3\u6642\u7232\u4e3b\u7bc0\u9ede\u6216/\u6216\u5de5\u4f5c\u5668\u7bc0\u9ede\u8a2d\u7f6e\u6a5f\u5668\u985e\u578b\u3002\u5982\u679c\u540c\u6642\u8a2d\u7f6e\u5169\u8005\uff0c\u5247\u4e3b\u5be6\u4f8b\u7bc0\u9ede\u53ef\u4ee5\u4f7f\u7528\u8207\u5de5\u4f5c\u5668\u7bc0\u9ede\u4e0d\u540c\u7684\u81ea\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b\u3002\u4efb\u4f55\u8f14\u52a9\u5de5\u4f5c\u5668\u4f7f\u7528\u7684\u6a5f\u5668\u985e\u578b\u8a2d\u7f6e\u4ee5\u4e3b\u8981\u5de5\u4f5c\u5668\u7684\u8a2d\u7f6e\u7232\u6e96\uff0c\u4e0d\u80fd\u55ae\u7368\u9032\u884c\u8a2d\u7f6e\uff08\u8acb\u53c3\u95b1 [\u8f14\u52a9\u5de5\u4f5c\u5668 - \u6436\u4f54\u5f0f\u865b\u64ec\u6a5f\u548c\u975e\u6436\u4f54\u5f0f\u865b\u64ec\u6a5f](https://cloud.google.com/dataproc/docs/concepts/compute/secondary-vms?hl=zh-cn) \uff09\u3002\n\u8acb\u53c3\u95b1 [\u4f7f\u7528\u5177\u6709\u64f4\u5c55\u5167\u5b58\u7684\u81ea\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b\u5275\u5efa Dataproc \u96c6\u7fa3](#create_a_cluster_with_custom_machine_type_with_extended_memory) \uff0c\u4ee5\u5c07 CPU \u5167\u5b58\u63d0\u9ad8\u5230\u6a19\u6e96\u9650\u5236\u4ee5\u4e0a\u3002\n### \u81ea\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b\u50f9\u683c\n[\u81ea\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b\u50f9\u683c](https://cloud.google.com/compute/pricing?hl=zh-cn#custommachinetypepricing) \u57fa\u65bc\u81ea\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b\u4e2d\u4f7f\u7528\u7684\u8cc7\u6e90\u3002 [Dataproc \u50f9\u683c](https://cloud.google.com/dataproc/pricing?hl=zh-cn) \u6703\u6dfb\u52a0\u5230\u8a08\u7b97\u8cc7\u6e90\u7684\u8cbb\u7528\u4e2d\uff0c\u4e26\u57fa\u65bc\u96c6\u7fa3\u4e2d\u4f7f\u7528\u7684\u865b\u64ec CPU (vCPU) \u7e3d\u6578\u3002\n### \u4f7f\u7528\u6307\u5b9a\u6a5f\u5668\u985e\u578b\u5275\u5efa Dataproc \u96c6\u7fa3\n\u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u5f9e Dataproc [\u5275\u5efa\u96c6\u7fa3](https://console.cloud.google.com/dataproc/clustersAdd?hl=zh-cn) \u9801\u9762\u7684 **\u914d\u7f6e\u7bc0\u9ede** \u9762\u677f\u4e2d\uff0c\u7232\u96c6\u7fa3\u7684\u4e3b\u7bc0\u9ede\u548c\u5de5\u4f5c\u5668\u7bc0\u9ede\u9078\u64c7\u6a5f\u5668\u7cfb\u5217\u3001\u7cfb\u5217\u548c\u985e\u578b\u3002\u904b\u884c\u5e36\u6709\u4ee5\u4e0b\u6a19\u8a8c\u7684 [gcloud dataproc clusters create](https://cloud.google.com/sdk/gcloud/reference/dataproc/clusters/create?hl=zh-cn) \u547d\u4ee4\uff0c\u4ee5\u5275\u5efa\u5177\u6709\u4e3b\u5be6\u4f8b\u548c/\u6216\u5de5\u4f5c\u5668\u6a5f\u5668\u985e\u578b\u7684 Dataproc \u96c6\u7fa3\uff1a- `--master-machine-type` ``\u6a19\u8a8c\u8b93\u60a8\u53ef\u8a2d\u7f6e\u96c6\u7fa3\u4e2d\u4e3b\u865b\u64ec\u6a5f\u5be6\u4f8b\uff08\u5982\u679c\u5275\u5efa [HA \u96c6\u7fa3](https://cloud.google.com/dataproc/docs/concepts/configuring-clusters/high-availability?hl=zh-cn) \uff0c\u5247\u7232\u4e3b\u5be6\u4f8b\uff09\u6240\u7528\u7684\u9810\u5b9a\u7fa9\u6216\u81ea\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b\n- `--worker-machine-type` ``\u6a19\u8a8c\u8b93\u60a8\u53ef\u8a2d\u7f6e\u96c6\u7fa3\u4e2d\u5de5\u4f5c\u5668\u865b\u64ec\u6a5f\u5be6\u4f8b\u6240\u7528\u7684\u9810\u5b9a\u7fa9\u6216\u81ea\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b\n **\u793a\u4f8b** \uff1a\n```\ngcloud dataproc clusters create test-cluster /\n\u00a0\u00a0\u00a0\u00a0--master-machine-type custom-6-23040 /\n\u00a0\u00a0\u00a0\u00a0--worker-machine-type custom-6-23040 /\n\u00a0\u00a0\u00a0\u00a0other args\n```\n\u6aa2\u67e5\u548c\u69cb\u5efa`gcloud cluster create`\u547d\u4ee4\u7684\u4e00\u7a2e\u7c21\u55ae\u65b9\u6cd5\u662f\u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\u6253\u958b Dataproc [\u5275\u5efa\u96c6\u7fa3](https://console.cloud.google.com/dataproc/clustersAdd?hl=zh-cn) \u9801\u9762\uff0c\u586b\u5beb\u9801\u9762\u4e0a\u7684\u9069\u7528\u5b57\u6bb5\uff0c\u7136\u5f8c\u9ede\u64ca\u201c\u5275\u5efa\u96c6\u7fa3\u201d\u9801\u9762\u5de6\u5074\u7a97\u683c\u5e95\u90e8\u7684 **\u7b49\u6548\u547d\u4ee4\u884c** \uff0c\u4ee5\u67e5\u770b\u3001\u8907\u88fd\u548c\u7c98\u8cbc\u5b8c\u6210\u5f8c\u7684`gcloud`\u547d\u4ee4\u3002\nDataproc \u96c6\u7fa3\u5553\u52d5\u5f8c\uff0c\u96c6\u7fa3\u8a73\u7d30\u4fe1\u606f\u5c07\u986f\u793a\u5728\u7d42\u7aef\u7a97\u53e3\u4e2d\u3002\u7d42\u7aef\u7a97\u53e3\u4e2d\u986f\u793a\u7684\u96c6\u7fa3\u5c6c\u6027\u7684\u90e8\u5206\u793a\u4f8b\u5217\u8868\u5982\u4e0b\uff1a\n```\n...\nproperties:\n distcp:mapreduce.map.java.opts: -Xmx1638m\n distcp:mapreduce.map.memory.mb: '2048'\n distcp:mapreduce.reduce.java.opts: -Xmx4915m\n distcp:mapreduce.reduce.memory.mb: '6144'\n mapred:mapreduce.map.cpu.vcores: '1'\n mapred:mapreduce.map.java.opts: -Xmx1638m\n...\n```\u5982\u9700\u5275\u5efa\u4f7f\u7528\u81ea\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b\u7684\u96c6\u7fa3\uff0c\u8acb\u5728 `masterConfig` \u548c/\u6216 [cluster.create](https://cloud.google.com/dataproc/docs/reference/rest/v1/projects.regions.clusters/create?hl=zh-cn) API \u8acb\u6c42\u7684 `workerConfig` [InstanceGroupConfig](https://cloud.google.com/dataproc/docs/reference/rest/v1/ClusterConfig?hl=zh-cn#InstanceGroupConfig.FIELDS.machine_type_uri) \u4e2d\u8a2d\u7f6e `machineTypeUri` \u3002\n **\u793a\u4f8b** \uff1a\n```\nPOST /v1/projects/my-project-id/regions/is-central1/clusters/\n{\n \"projectId\": \"my-project-id\",\n \"clusterName\": \"test-cluster\",\n \"config\": {\n \"configBucket\": \"\",\n \"gceClusterConfig\": {\n  \"subnetworkUri\": \"default\",\n  \"zoneUri\": \"us-central1-a\"\n },\n \"masterConfig\": {\n  \"numInstances\": 1,\n  \"machineTypeUri\": \"n1-highmem-4\",\n  \"diskConfig\": {\n  \"bootDiskSizeGb\": 500,\n  \"numLocalSsds\": 0\n  }\n },\n \"workerConfig\": {\n  \"numInstances\": 2,\n  \"machineTypeUri\": \"n1-highmem-4\",\n  \"diskConfig\": {\n  \"bootDiskSizeGb\": 500,\n  \"numLocalSsds\": 0\n  }\n }\n }\n}\n```\n\u8981\u6aa2\u67e5\u548c\u69cb\u5efa Dataproc API \u96c6\u7fa3\u5275\u5efa\u8acb\u6c42\u7684 JSON \u6b63\u6587\uff0c\u4e00\u7a2e\u7c21\u55ae\u7684\u65b9\u6cd5\u662f\u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\u6253\u958b Dataproc [\u5275\u5efa\u96c6\u7fa3](https://console.cloud.google.com/dataproc/clustersAdd?hl=zh-cn) \u9801\u9762\uff0c\u586b\u5beb\u9801\u9762\u4e0a\u7684\u9069\u7528\u5b57\u6bb5\uff0c\u7136\u5f8c\u9ede\u64ca\u201c\u5275\u5efa\u96c6\u7fa3\u201d\u9801\u9762\u5de6\u5074\u7a97\u683c\u5e95\u90e8\u7684 **\u7b49\u6548 REST** \uff0c\u4ee5\u67e5\u770b\u3001\u8907\u88fd\u548c\u7c98\u8cbc POST \u8acb\u6c42\u4ee5\u53ca\u5df2\u5b8c\u6210\u7684 JSON \u8acb\u6c42\u6b63\u6587\u3002\n### \u4f7f\u7528\u5177\u6709\u64f4\u5c55\u5167\u5b58\u7684\u81ea\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b\u5275\u5efa Dataproc \u96c6\u7fa3\nDataproc \u652f\u6301\u6eff\u8db3\u4ee5\u4e0b\u689d\u4ef6\u7684\u81ea\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b\uff1a [\u64f4\u5c55\u5167\u5b58](https://cloud.google.com/compute/docs/instances/creating-instance-with-custom-machine-type?hl=zh-cn#extendedmemory) \u8d85\u904e [\u6bcf\u500b vCPU 6.5 GB \u5167\u5b58\u7684\u9650\u5236](https://cloud.google.com/compute/docs/instances/creating-instance-with-custom-machine-type?hl=zh-cn#create) \uff08\u8acb\u53c3\u95b1 [\u64f4\u5c55\u5167\u5b58\u50f9\u683c](https://cloud.google.com/compute/pricing?hl=zh-cn#extendedmemory) \uff09\u3002\n\u96d6\u7136\u6bcf\u500b CPU \u7684\u64f4\u5c55\u5167\u5b58\u91cf\u6c92\u6709\u9650\u5236\uff0c\u4f46 [\u6bcf\u500b\u865b\u64ec\u6a5f\u5be6\u4f8b\u7684\u64f4\u5c55\u5167\u5b58](https://cloud.google.com/compute/docs/instances/creating-instance-with-custom-machine-type?hl=en_US&_ga=2.43164131.-736957322.1515206173#limitations) \u7e3d\u91cf\u5b58\u5728\u9650\u5236\u3002\n\u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d Dataproc [\u5275\u5efa\u96c6\u7fa3](https://console.cloud.google.com/dataproc/clustersAdd?hl=zh-cn) \u9801\u9762\u4e0a\u7684 **\u914d\u7f6e\u7bc0\u9ede** \u9762\u677f\u4e2d\uff0c\u5728\u4e3b\u7bc0\u9ede\u548c/\u6216\u5de5\u4f5c\u5668\u7bc0\u9ede\u90e8\u5206\u81ea\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b\u5167\u5b58\u6642\uff0c\u8acb\u9ede\u64ca **\u64f4\u5c55\u5167\u5b58** \u3002\u8981\u901a\u904e\u5177\u6709\u64f4\u5c55\u5167\u5b58\u7684\u81ea\u5b9a\u7fa9 CPU \u7684 gcloud \u547d\u4ee4\u884c\u5275\u5efa\u96c6\u7fa3\uff0c\u8acb\u5411 `\u2011\u2011master-machine-type` \u548c/\u6216 `\u2011\u2011worker-machine-type` \u6a19\u8a8c\u6dfb\u52a0 `-ext` \u5f8c\u7db4\u3002\n **\u793a\u4f8b** \n\u4ee5\u4e0b gcloud \u547d\u4ee4\u884c\u793a\u4f8b\u53ef\u5275\u5efa\u4e00\u500b Dataproc \u96c6\u7fa3\uff0c\u8a72\u96c6\u7fa3\u7684\u6bcf\u500b\u7bc0\u9ede\u5177\u6709 1 \u500b CPU \u548c 50 GB \u5167\u5b58 (50 * 1024 = 51200)\uff1a\n```\ngcloud dataproc clusters create test-cluster /\n\u00a0\u00a0\u00a0\u00a0--master-machine-type custom-1-51200-ext /\n\u00a0\u00a0\u00a0\u00a0--worker-machine-type custom-1-51200-ext /\n\u00a0\u00a0\u00a0\u00a0other args\n```\u4ee5\u4e0b\u793a\u4f8b [](https://cloud.google.com/dataproc/docs/reference/rest/v1/ClusterConfig?hl=zh-cn#InstanceGroupConfig) Dataproc REST API [clusters.create](https://cloud.google.com/dataproc/docs/reference/rest/v1/projects.regions.clusters/create?hl=zh-cn) \u8acb\u6c42\u4e2d\u7684 JSON \u4ee3\u78bc\u6bb5\u6307\u5b9a\u6bcf\u500b\u7bc0\u9ede\u4e2d\u7684 1 \u500b CPU \u548c 50 GB \u5167\u5b58 (50 * 1024 = 51200)\uff1a\n```\n...\n \"masterConfig\": {\n  \"numInstances\": 1,\n  \"machineTypeUri\": \"custom-1-51200-ext\",\n ...\n },\n \"workerConfig\": {\n  \"numInstances\": 2,\n  \"machineTypeUri\": \"custom-1-51200-ext\",\n  ...\n...\n```\n## ARM \u6a5f\u5668\u985e\u578b\nDataproc \u652f\u6301\u5275\u5efa\u96c6\u7fa3\uff0c\u5176\u4e2d\u5305\u542b\u4f7f\u7528 [ARM \u6a5f\u5668\u985e\u578b](https://cloud.google.com/dataproc/docs/concepts/compute/supported-machine-types?hl=zh-cn) \uff08\u4f8b\u5982 [T2A \u6a5f\u5668\u985e\u578b](https://cloud.google.com/compute/docs/machine-resource?hl=zh-cn#arm) \uff09\u7684\u7bc0\u9ede\u3002\n\u8981\u6c42\u548c\u9650\u5236\uff1a\n- Dataproc \u6620\u50cf\u5fc5\u9808\u8207 ARM \u82af\u7247\u7d44\u517c\u5bb9\uff08\u76ee\u524d\uff0c\u53ea\u6709 Dataproc **2.1-ubuntu20-arm** \u6620\u50cf\u8207 ARM \u82af\u7247\u7d44\u517c\u5bb9\uff09\u3002\u8acb\u6ce8\u610f\uff0c\u6b64\u6620\u50cf\u4e0d\u652f\u6301\u8a31\u591a\u53ef\u9078\u548c\u521d\u59cb\u5316\u64cd\u4f5c\u7d44\u4ef6\uff08\u8acb\u53c3\u95b1 [2.1.x \u767c\u4f48\u7248\u672c](https://cloud.google.com/dataproc/docs/concepts/versioning/dataproc-release-2.1?hl=zh-cn) \uff09\u3002\n- \u7531\u65bc\u5fc5\u9808\u7232\u96c6\u7fa3\u6307\u5b9a\u4e00\u500b\u6620\u50cf\uff0c\u56e0\u6b64\u4e3b\u7bc0\u9ede\u3001\u5de5\u4f5c\u5668\u7bc0\u9ede\u548c\u8f14\u52a9\u5de5\u4f5c\u5668\u7bc0\u9ede\u5fc5\u9808\u4f7f\u7528\u8207\u6240\u9078 Dataproc ARM \u6620\u50cf\u517c\u5bb9\u7684 ARM \u6a5f\u5668\u985e\u578b\u3002\n- \u8207 ARM \u6a5f\u5668\u985e\u578b\u4e0d\u517c\u5bb9\u7684 Dataproc \u529f\u80fd\u4e0d\u53ef\u7528\uff08\u4f8b\u5982\uff0cT2A \u6a5f\u5668\u985e\u578b\u4e0d\u652f\u6301 [\u672c\u5730 SSD](https://cloud.google.com/dataproc/docs/concepts/compute/dataproc-local-ssds?hl=zh-cn) \uff09\u3002## \u5275\u5efa\u5177\u6709 ARM \u6a5f\u5668\u985e\u578b\u7684 Dataproc \u96c6\u7fa3\n\u76ee\u524d\uff0cGoogle Cloud \u63a7\u5236\u6aaf\u4e0d\u652f\u6301\u5275\u5efa Dataproc ARM \u6a5f\u5668\u985e\u578b\u96c6\u7fa3\u3002\u5982\u9700\u5275\u5efa\u4f7f\u7528 ARM `t2a-standard-4` \u6a5f\u5668\u985e\u578b\u7684 Dataproc \u96c6\u7fa3\uff0c\u8acb\u5728\u7d42\u7aef\u7a97\u53e3\u6216 [Cloud Shell](https://console.cloud.google.com/?cloudshell=true&hl=zh-cn) \u4e2d\u672c\u5730\u904b\u884c\u4ee5\u4e0b `gcloud` \u547d\u4ee4\u3002\n```\ngcloud dataproc clusters create cluster-name \\\n\u00a0\u00a0\u00a0\u00a0--region=REGION \\\n\u00a0\u00a0\u00a0\u00a0--image-version=2.1-ubuntu20-arm \\\n\u00a0\u00a0\u00a0\u00a0--master-machine-type=t2a-standard-4 \\\n\u00a0\u00a0\u00a0\u00a0--worker-machine-type=t2a-standard-4\n```\n\u5099\u8a3b\uff1a- \uff1a\u96c6\u7fa3\u6240\u5728\u7684 [\u5340\u57df](https://cloud.google.com/compute/docs/regions-zones?hl=zh-cn#available) \u3002\n- ARM \u6620\u50cf\u5f9e `2.1.18-ubuntu20-arm` \u958b\u59cb\u63d0\u4f9b\u3002\n- \u5982\u9700\u77ad\u89e3\u53ef\u7528\u65bc\u81ea\u5b9a\u7fa9\u96c6\u7fa3\u7684\u5176\u4ed6\u547d\u4ee4\u884c\u6a19\u8a8c\uff0c\u8acb\u53c3\u95b1 [gcloud dataproc clusters create](https://cloud.google.com/sdk/gcloud/reference/dataproc/clusters/create?hl=zh-cn) \u53c3\u8003\u6587\u6a94\u3002\n- `*-arm images` \u50c5\u652f\u6301\u5df2\u5b89\u88dd\u7684\u7d44\u4ef6\u548c [2.1.x \u767c\u4f48\u7248\u672c](https://cloud.google.com/dataproc/docs/concepts/versioning/dataproc-release-2.1?hl=zh-cn) \u9801\u9762\u4e0a\u5217\u51fa\u7684\u4ee5\u4e0b\u53ef\u9078\u7d44\u4ef6\uff08\u4e0d\u652f\u6301\u8a72\u9801\u9762\u4e0a\u5217\u51fa\u7684\u5176\u9918 2.1 \u53ef\u9078\u7d44\u4ef6\u548c\u6240\u6709\u521d\u59cb\u5316\u64cd\u4f5c\uff09\uff1a- Apache Hive WebHCat\n- Docker\n- Zookeeper\uff08\u5b89\u88dd\u5728 [\u9ad8\u53ef\u7528\u6027\u96c6\u7fa3](https://cloud.google.com/dataproc/docs/concepts/configuring-clusters/high-availability?hl=zh-cn) \u4e2d\uff1b\u975e\u9ad8\u53ef\u7528\u6027\u96c6\u7fa3\u4e2d\u7684\u53ef\u9078\u7d44\u4ef6\uff09\n\u4ee5\u4e0b\u793a\u4f8b Dataproc REST API [clusters.create](https://cloud.google.com/dataproc/docs/reference/rest/v1/projects.regions.clusters/create?hl=zh-cn) \u8acb\u6c42\u6703\u5275\u5efa\u4e00\u500b ARM \u6a5f\u5668\u985e\u578b\u96c6\u7fa3\u3002\n```\nPOST /v1/projects/my-project-id/regions/is-central1/clusters/\n{\n \"projectId\": \"my-project-id\",\n \"clusterName\": \"sample-cluster\",\n \"config\": {\n \"configBucket\": \"\",\n \"gceClusterConfig\": {\n  \"subnetworkUri\": \"default\",\n  \"zoneUri\": \"us-central1-a\"\n },\n \"masterConfig\": {\n  \"numInstances\": 1,\n  \"machineTypeUri\": \"t2a-standard-4\",\n  \"diskConfig\": {\n  \"bootDiskSizeGb\": 500,\n  }\n },\n \"workerConfig\": {\n  \"numInstances\": 2,\n  \"machineTypeUri\": \"t2a-standard-4\",\n  \"diskConfig\": {\n  \"bootDiskSizeGb\": 500,\n  \"numLocalSsds\": 0\n  }\n },\n \"softwareConfig\": {\n  \"imageVersion\": \"2.1-ubuntu20-arm\"\n }\n }\n}\n```\n **\n** \n **\n**\n**\n\u5982\u9700\u6df1\u5165\u77ad\u89e3\n\u8acb\u53c3\u95b1\u4f7f\u7528\u81ea\u5b9a\u7fa9\u6a5f\u5668\u985e\u578b\u5275\u5efa\u865b\u64ec\u6a5f\u5be6\u4f8b\u3002\n\u8acb\u53c3\u95b1\u5275\u5efa\u548c\u5553\u52d5 Arm \u865b\u64ec\u6a5f\u5be6\u4f8b\u3002\n**", "guide": "Dataproc"}