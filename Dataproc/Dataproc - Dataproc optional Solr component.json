{"title": "Dataproc - Dataproc optional Solr component", "url": "https://cloud.google.com/dataproc/docs/concepts/components/solr", "abstract": "# Dataproc - Dataproc optional Solr component\nYou can install additional components like Solr when you create a Dataproc cluster using the [Optional components](/dataproc/docs/concepts/components/overview#available_optional_components) feature. This page describes the Solr component.\nThe [Apache Solr](https://lucene.apache.org/solr/) component is an open source enterprise search platform. The Solr server and Web UI are available on port `8983` on the cluster's master node(s).\n**Persisting Solr files:** By default, Solr writes and reads the index and transaction log files in [HDFS](https://hadoop.apache.org/docs/r1.2.1/hdfs_design.html) . To persist Solr files, use a Cloud Storage path as the Solr home directory by setting the `dataproc:solr.gcs.path` [cluster property](/dataproc/docs/concepts/configuring-clusters/cluster-properties#dataproc-properties) when you [install the component](#install_the_component) .\n", "content": "## Install the component\nInstall the component when you create a Dataproc cluster. Components can be added to clusters created with Dataproc [version 1.3](/dataproc/docs/concepts/versioning/dataproc-release-1.3) and later.\nSee [Supported Dataproc versions](/dataproc/docs/concepts/versioning/dataproc-versions#supported_cloud_dataproc_versions) for the component version included in each Dataproc image release.\nTo create a Dataproc cluster that includes the Solr component, use the [gcloud dataproc clusters create](/sdk/gcloud/reference/dataproc/clusters/create)  command with the `--optional-components` flag. The sample command below uses the optional `properties` flag to set a Cloud Storage path as the Solr home directory.\nWhen creating the cluster, use [gcloud dataproc clusters create](/sdk/gcloud/reference/dataproc/clusters/create) command with the`--enable-component-gateway`flag, as shown below, to enable connecting to the Solr Web UI using the [Component Gateway](/dataproc/docs/concepts/accessing/dataproc-gateways) .\n```\ngcloud dataproc clusters create cluster-name \\\n\u00a0\u00a0\u00a0\u00a0--region=region \\\n\u00a0\u00a0\u00a0\u00a0--optional-components=SOLR \\\n\u00a0\u00a0\u00a0\u00a0--enable-component-gateway \\\n\u00a0\u00a0\u00a0\u00a0... other flags\n```The Solr component can be specified through the Dataproc API using [SoftwareConfig.Component](/dataproc/docs/reference/rest/v1/ClusterConfig#Component) as part of a [clusters.create](/dataproc/docs/reference/rest/v1/projects.regions.clusters/create) request.\nAs part of your`clusters.create`request, you can:- Set the [EndpointConfig.enableHttpPortAccess](/dataproc/docs/reference/rest/v1/ClusterConfig#EndpointConfig.description) property to`true`to enable connecting to the Solr Web UI using the [Component Gateway](/dataproc/docs/concepts/accessing/dataproc-gateways) .\n- Set the`\"dataproc:solr.gcs.path=gs://` `` `\"` [  cluster property](/dataproc/docs/concepts/configuring-clusters/cluster-properties#service_properties) in the [SoftwareConfig.Component.properties](/static/dataproc/docs/reference/rest/v1/ClusterConfig#SoftwareConfig.FIELDS.properties) field to set a Cloud Storage bucket where Solr documents will be stored (Solr home directory).\n- Enable the component and component gateway.- In the Google Cloud console, open the Dataproc [Create a cluster](https://console.cloud.google.com/dataproc/clustersAdd) page. The Set up cluster panel is selected.\n- In the Components section:- Under Optional components, select Solr and other optional    components to install on your cluster.\n- Under Component Gateway, select Enable component gateway    (see [Viewing and Accessing Component Gateway URLs](/dataproc/docs/concepts/accessing/dataproc-gateways#viewing_and_accessing_component_gateway_urls) ).", "guide": "Dataproc"}