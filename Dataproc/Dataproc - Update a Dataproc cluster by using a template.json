{"title": "Dataproc - Update a Dataproc cluster by using a template", "url": "https://cloud.google.com/dataproc/docs/quickstarts/update-cluster-template", "abstract": "# Dataproc - Update a Dataproc cluster by using a template\n# Update a Dataproc cluster by using a template\nThis page shows you how to use an [Google APIs Explorer](https://developers.google.com/apis-explorer/#p/) template to update a Dataproc cluster to change the number of workers in a cluster. [Scaling a cluster](/dataproc/docs/concepts/configuring-clusters/scaling-clusters) up to include more workers is a common task when additional workers are needed to process larger jobs.\nFor other ways to update a Dataproc cluster, see:- [Create a Dataproc cluster by using the Google Cloud console](/dataproc/docs/quickstarts/create-cluster-console#update_a_cluster) \n- [Create a Dataproc cluster by using the Google Cloud CLI](/dataproc/docs/quickstarts/create-cluster-gcloud#update_a_cluster) \n- [Create a Dataproc cluster by using client libraries](/dataproc/docs/quickstarts/create-cluster-client-libraries) \n", "content": "## Before you begin\nThis quickstart assumes you have already created a Dataproc cluster. You can use the\n [APIs Explorer](/dataproc/docs/quickstarts/create-cluster-template) \n, the\n [Google Cloud console](/dataproc/docs/quickstarts/update-cluster-console#create_a_cluster) \n, the gcloud CLI\n [gcloud](/dataproc/docs/quickstarts/update-cluster-gcloud#create_a_cluster) \ncommand-line tool, or the\n [Quickstarts using Cloud Client Libraries](/dataproc/docs/quickstarts/create-cluster-client-libraries) \nto create a cluster.\n## Update a clusterTo update the number of workers in your cluster, fill in and execute the Google APIs Explorer **Try this API** template.\n **Note:** The `region` , `clusterName` and `updateMask` and `config.workerConfig.numInstances` parameter values are filled in for you. Confirm or replace the `region` and `clusterName` parameter values to match your cluster's region and name. The `updateMask` parameter value is required to update the number of workers in your cluster. You can accept or change the `config.workerConfig.numInstances` parameter value.- **Request parameters:** - Insert your [projectId](https://console.cloud.google.com/) .\n- Specify the [region](/compute/docs/regions-zones/regions-zones#available) where your cluster is located (confirm or replace \"us-central1\"). Your cluster's region is listed on the Dataproc [Clusters](https://console.cloud.google.com/dataproc/clusters) page in the Google Cloud console.\n- Specify the [clusterName](/dataproc/docs/reference/rest/v1/projects.regions.clusters/patch#body.PATH_PARAMETERS.cluster_name) of the existing cluster that you are updating (confirm or replace \"example-cluster\").\n- [updateMask](/dataproc/docs/reference/rest/v1/projects.regions.clusters/patch) : \"config.worker_config.num_instances\". This is the JSON PATH relative to the [Cluster](/dataproc/docs/reference/rest/v1/projects.regions.clusters#resource:-cluster) resource to the`numInstances`parameter to be updated (see the Request body instructions).\n- **Request body:** - [config.workerConfig.numInstances](/dataproc/docs/reference/rest/v1/ClusterConfig#InstanceGroupConfig.FIELDS.num_instances) : (\"3\": the new number of workers). You can change this value to add fewer or more workers. For example, if your standard cluster has the default number of 2 workers, specifying \"3\" will add 1 worker; specifying \"4 will add 2). A standard Dataproc cluster must have at least 2 workers.\n- Click **EXECUTE** . The first time you run the API template, you may be asked to choose and sign into your Google account, then authorize the Google APIs Explorer to access your account. If the request is successful, the JSON response shows that cluster update is pending.\n- To confirm that the number of workers in the cluster has been updated, open the Dataproc [Clusters](https://console.cloud.google.com/dataproc/clusters) page in the Google Cloud console and view the cluster's **Total worker nodes** column. You may need to click REFRESH at the top of the page to view the updated value after the cluster update completes.\n## Clean upTo avoid incurring charges to your Google Cloud account for   the resources used on this page, follow these steps.- If you don't need the cluster to explore the other quickstarts or to run other jobs, use the [APIs Explorer](/dataproc/docs/quickstarts/quickstart-explorer-delete) , the [Google Cloud console](/dataproc/docs/quickstarts/update-cluster-console#delete_a_cluster) , the gcloud CLI [gcloud](/dataproc/docs/quickstarts/update-cluster-gcloud#delete_a_cluster) command-line tool, or the [Quickstarts using Cloud Client Libraries](/dataproc/docs/quickstarts/create-cluster-client-libraries) to delete the cluster.\n## What's next\n- You can use this quickstart template to restore the cluster to its previous `workerConfig.numInstances` value.\n- Learn how to [write and run a Spark Scala job](/dataproc/docs/tutorials/spark-scala) .", "guide": "Dataproc"}