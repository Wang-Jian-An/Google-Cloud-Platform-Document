{"title": "Dataproc - Diagnose Dataproc on GKE clusters", "url": "https://cloud.google.com/dataproc/docs/guides/dpgke/dataproc-gke-diagnose-cluster", "abstract": "# Dataproc - Diagnose Dataproc on GKE clusters\nDataproc provides a [gcloud CLI dataproc clusters diagnose](/sdk/gcloud/reference/dataproc/clusters/diagnose) command to help you troubleshoot Dataproc on GKE cluster and job issues. This command gathers and archives cluster-related configuration files, logs, and outputs into an archive file. and then uploads the archive to the Cloud Storage staging bucket you specified when you [created your Dataproc on GKE cluster](/dataproc/docs/guides/dpgke/quickstarts/dataproc-gke-quickstart-create-cluster#create_a_on_cluster) .\n", "content": "## Diagnose archive file\nThe following tables list metrics and other information included in the `dataproc clusters diagnose` command archive file.\n### System information\n| Item              | Archive location  |\n|:----------------------------------------------------------|:-----------------------|\n| GKE node metrics where virtual Dataproc on GKE pods run: | nan     |\n| CPU usage Memory usage         | /system/NODE_NAME.json |\n| Network metrics and file system status of running pods: | nan     |\n| CPU usage Memory usage Network status Filesystem status | /system/POD_NAME.json |\n### Configuration information\n| Item        | Archive location        |\n|:---------------------------------|:-----------------------------------------------|\n| Cluster configmap    | /conf/configmap        |\n| Kubernetes deployment   | /conf/deployment        |\n| Role Based Access Control (RBAC) | /conf/role /conf/rolebind /conf/serviceaccount |\n### Logs\n| Item                | Archive location  |\n|:-------------------------------------------------------------------|:----------------------|\n| Agent log               | /logs/agent.log  |\n| Spark engine log             | /logs/sparkengine.log |\n| Spark driver running and completed job logs over the last 24 hours | /logs/DRIVER_ID  |\n## Job and pod information\n| Item     | Archive location |\n|:----------------------|:-------------------|\n| JobAttempt object  | /jobattempts  |\n| Kubernetes Pod object | /pods    |\n## For more information\n- See [Diagnose Dataproc clusters](/dataproc/docs/support/diagnose-command#sharing_the_data_gathered_by_diagnose) .", "guide": "Dataproc"}