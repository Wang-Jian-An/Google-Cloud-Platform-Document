{"title": "Dataproc - Create a Dataproc cluster by using the gcloud CLI", "url": "https://cloud.google.com/dataproc/docs/quickstarts/create-cluster-gcloud", "abstract": "# Dataproc - Create a Dataproc cluster by using the gcloud CLI\n# Create a Dataproc cluster by using the gcloud CLI\nThis page shows you how to use the Google Cloud CLI [gcloud](/sdk/gcloud/reference/dataproc) command-line tool to create a Google Cloud Dataproc cluster, run a simple [Apache Spark](http://spark.apache.org/) job in the cluster, then modify the number of workers in the cluster.\nAn easy way to run the`gcloud`command-line tool is from [Cloud Shell](https://console.cloud.google.com/?cloudshell=true) , which has the Google Cloud CLI pre-installed. Cloud Shell is free for Google Cloud customers (you need a Google Cloud project to use Cloud Shell).\nYou can find out how to do the same or similar tasks with [Quickstarts Using the API Explorer](/dataproc/docs/quickstarts#quickstarts-using-the-apis-explorer) , the Google Cloud console in [Create a Dataproc cluster by using the Google Cloud console](/dataproc/docs/quickstarts/create-cluster-console) , and using the Client Libraries in [Create a Dataproc cluster by using client libraries](/dataproc/docs/quickstarts/create-cluster-client-libraries) .", "content": "## Before you begin\n## Create a clusterRun the following command to create a cluster called `example-cluster` . See [Available regions & zones](/compute/docs/regions-zones/regions-zones#available) for information on selecting a region (you can also run the `gcloud compute regions list` command to see a listing of available regions). Also see [Regional endpoints](/dataproc/docs/concepts/regional-endpoints) to learn about regional endpoints.\n```\ngcloud dataproc clusters create example-cluster --region=region\n```\nCluster creation is confirmed in the command output:\n```\n...\nWaiting for cluster creation operation...done.\nCreated [... example-cluster]\n```\n## Submit a jobTo submit a sample Spark job that calculates a rough value for pi, run the following command:\n```\ngcloud dataproc jobs submit spark --cluster example-cluster \\\n\u00a0\u00a0\u00a0\u00a0--region=region \\\n\u00a0\u00a0\u00a0\u00a0--class org.apache.spark.examples.SparkPi \\\n\u00a0\u00a0\u00a0\u00a0--jars file:///usr/lib/spark/examples/jars/spark-examples.jar -- 1000\n```\nThis command specifies:- That you want to run a [spark](/sdk/gcloud/reference/dataproc/jobs/submit/spark) job on the`example-cluster`cluster in the specified region\n- The`class`containing the main method for the job's pi-calculating application\n- The location of the jar file containing your job's code\n- Any parameters you want to pass to the job\u2014in this case the number of tasks, which is`1000`\nParameters passed to the job must follow a double dash (`--`). See the [gcloud documentation](/sdk/gcloud/reference/dataproc/jobs/submit/spark) for more information.\nThe job's running and final output is displayed in the terminal window:\n```\nWaiting for job output...\n...\nPi is roughly 3.14118528\n...\nJob finished successfully.\n```## Update a clusterTo change the number of workers in the cluster to five, run the following command:\n```\ngcloud dataproc clusters update example-cluster \\\n\u00a0\u00a0\u00a0\u00a0--region=region \\\n\u00a0\u00a0\u00a0\u00a0--num-workers 5\n```\nYour cluster's details are displayed in the command's output:\n```\nworkerConfig:\n...\n instanceNames:\n - example-cluster-w-0\n - example-cluster-w-1\n - example-cluster-w-2\n - example-cluster-w-3\n - example-cluster-w-4\n numInstances: 5\nstatusHistory:\n...\n- detail: Add 3 workers.\n```\nYou can use the same command to decrease the number of worker nodes to the original value:\n```\ngcloud dataproc clusters update example-cluster \\\n\u00a0\u00a0\u00a0\u00a0--region=region \\\n\u00a0\u00a0\u00a0\u00a0--num-workers 2\n```## Clean upTo avoid incurring charges to your Google Cloud account for   the resources used on this page, follow these steps.- Run [clusters delete](/sdk/gcloud/reference/dataproc/clusters/delete) to delete your example cluster.```\ngcloud dataproc clusters delete example-cluster \\\n\u00a0\u00a0\u00a0\u00a0--region=region\n```You are prompted to confirm that you want to delete the cluster. Type`y`to complete the deletion.\n## What's next\n- Learn how to [write and run a Spark Scala job](/dataproc/docs/tutorials/spark-scala) .", "guide": "Dataproc"}