{"title": "Dataproc - Sole-tenant node clusters", "url": "https://cloud.google.com/dataproc/docs/concepts/configuring-clusters/sole-tenant-nodes", "abstract": "# Dataproc - Sole-tenant node clusters\nDataproc clusters can be created on Compute Engine [sole-tenant nodes](/compute/docs/nodes/sole-tenant-nodes) . A sole-tenant node is a Compute Engine server that is dedicated to hosting your project's VMs only. Creating a Dataproc cluster on a sole tenant node keeps the cluster's VMs physically separate from VMs in other projects. The clusters function as standard Dataproc clusters, but with additional hardware isolation to address security and compliance concerns.\nDataproc sole-tenant node clusters are created in a user-specified . Each cluster's master, worker, and secondary worker instances will be created within this sole-tenant node group.\n**Caution:** Dataproc defaults to preemptible VMs for [secondary workers](/dataproc/docs/concepts/compute/secondary-vms) , which are not supported by Compute Engine sole-tenant nodes. If you plan to use secondary workers with your sole-tenant cluster, by [manuallyadding them](/dataproc/docs/concepts/compute/secondary-vms#using_secondary_workers) or using an [autoscaling policy](/dataproc/docs/concepts/configuring-clusters/autoscaling#gcloud-command) that scales up secondary workers, you must set your secondary worker type to non-preemptible.\n", "content": "## First steps\n- See [Before you begin](/compute/docs/nodes/provisioning-sole-tenant-vms#before-you-begin) .\n- [Create a sole-tenant node template](/compute/docs/nodes/provisioning-sole-tenant-vms#creating_a_sole-tenant_node_template) .\n- [Create a sole-tenant node group](/compute/docs/nodes/provisioning-sole-tenant-vms#creating_a_soletenant_node_group) .- Use [autoscaling node groups](/compute/docs/nodes/autoscaling-node-groups) if you will create [autoscaling clusters](/dataproc/docs/concepts/configuring-clusters/autoscaling) in the sole-tenant node group. [](None) **Node group autoscaling recommendations:** - Make sure the node group's`max-nodes`is sufficient for the`maxInstances`of clusters you will create in the sole-tenant node group.\n- Use the default or`migrate-within-node-group`node group maintenance policy; VMs may be unavailable for up to one hour with the`restart-in-place`policy.## Creating a sole-tenant cluster\n- Before creating a sole-tenant cluster, see the [sole-tenant node VM restrictions](/compute/docs/nodes/sole-tenant-nodes#restrictions) .\n- If you create an [autoscaling cluster](/dataproc/docs/concepts/configuring-clusters/autoscaling) in a sole-tenant node group, it is recommended that [node group also use autoscaling](/compute/docs/nodes/autoscaling-node-groups) (see [Node group autoscaling recommendations](#node-autoscaling-recommendations) ).\nTo create a sole-tenant cluster, pass the `--node-group` flag to the [gcloud dataproc clusters create](/sdk/gcloud/reference/dataproc/clusters/create) command.\nFlag notes:- `--region`(required): Must match the region of the sole-tenant-group.\n- `--node-group`(required): You can specify the sole tenant node group name (\"node-group-name\")  or the sole-tenant node group resource URI  (\"projects//zones//nodeGroups/\").\n- `--zone`(required): The cluster zone must match  the sole-tenant node group zone.\n```\ngcloud dataproc clusters create cluster-name \\\n\u00a0\u00a0\u00a0\u00a0--region=region \\\n\u00a0\u00a0\u00a0\u00a0--zone=zone \\\n\u00a0\u00a0\u00a0\u00a0--node-group=node group resource name or URI \\\n\u00a0\u00a0\u00a0\u00a0... other args\n \n```Create a sole-tenant cluster using a [clusters.create](/dataproc/docs/reference/rest/v1/projects.regions.clusters/create) request that specifies the [NodeGroupAffinity.nodeGroupUri](/dataproc/docs/reference/rest/v1/ClusterConfig#NodeGroupAffinity) of the sole-tenant node group.\nNote: the cluster zone specified in the [zoneUri](/dataproc/docs/reference/rest/v1/ClusterConfig#GceClusterConfig.FIELDS.zone_uri) field must match the sole-tenant node group zone.\nAn easy way to examine and construct the JSON body of a Dataproc API clusters request is to open the Dataproc [Create a cluster](https://console.cloud.google.com/dataproc/clustersAdd) Google Cloud console page, fill in the applicable fields on the page, then click the **Equivalent REST** button at the bottom of the left panel to view the POST request with the completed JSON request body.Currently, creating a sole-tenant Dataproc cluster is   not supported in the Google Cloud console.", "guide": "Dataproc"}