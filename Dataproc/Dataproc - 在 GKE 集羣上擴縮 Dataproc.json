{"title": "Dataproc - \u5728 GKE \u96c6\u7fa3\u4e0a\u64f4\u7e2e Dataproc", "url": "https://cloud.google.com/dataproc/docs/guides/dpgke/dataproc-gke-scale-cluster?hl=zh-cn", "abstract": "# Dataproc - \u5728 GKE \u96c6\u7fa3\u4e0a\u64f4\u7e2e Dataproc\n\u5982\u9700\u64f4\u7e2e Dataproc on GKE \u96c6\u7fa3\uff0c\u8acb\u66f4\u65b0\u8207 Spark \u9a45\u52d5\u7a0b\u5e8f\u6216 Spark \u57f7\u884c\u7a0b\u5e8f\u89d2\u8272\u95dc\u806f\u7684 [\u7bc0\u9ede\u6c60](https://cloud.google.com/dataproc/docs/guides/dpgke/dataproc-gke-nodepools?hl=zh-cn) \u7684\u81ea\u52d5\u64f4\u7e2e\u5668\u914d\u7f6e\u3002 [\u5275\u5efa Dataproc on GKE \u96c6\u7fa3](https://cloud.google.com/dataproc/docs/guides/dpgke/quickstarts/dataproc-gke-quickstart-create-cluster?hl=zh-cn#create_a_on_cluster) \u6642\uff0c\u60a8\u9700\u8981\u6307\u5b9a Dataproc on GKE [\u7bc0\u9ede\u6c60\u53ca\u5176\u95dc\u806f\u89d2\u8272](https://cloud.google.com/dataproc/docs/guides/dpgke/dataproc-gke-nodepools?hl=zh-cn#role_to_node_pool_mapping) \u3002\n", "content": "## \u8a2d\u7f6e\u7bc0\u9ede\u6c60\u81ea\u52d5\u64f4\u7e2e\n[\u5275\u5efa Dataproc on GKE \u865b\u64ec\u96c6\u7fa3](https://cloud.google.com/dataproc/docs/guides/dpgke/quickstarts/dataproc-gke-quickstart-create-cluster?hl=zh-cn) \u6642\uff0c\u60a8\u53ef\u4ee5\u7232 Dataproc on GKE \u7bc0\u9ede\u6c60\u81ea\u52d5\u64f4\u7e2e\u8a2d\u7f6e\u908a\u754c\u3002\u5982\u679c\u672a\u6307\u5b9a\uff0c\u7cfb\u7d71\u6703\u4f7f\u7528\u9ed8\u8a8d\u503c\u81ea\u52d5\u64f4\u7e2e Dataproc on GKE \u7bc0\u9ede\u6c60\uff08\u5728 Dataproc on GKE \u6b63\u5f0f\u7248\u767c\u4f48\u6642\uff0c\u9ed8\u8a8d\u503c\u8a2d\u7f6e\u7232\u6700\u5c0f\u503c = 1\uff0c\u6700\u5927\u503c = 10\uff0c\u53ef\u80fd\u6703\u767c\u751f\u8b8a\u5316\uff09\u3002\u5982\u9700\u7372\u53d6\u7279\u5b9a\u7684\u6700\u5c0f\u548c\u6700\u5927\u7bc0\u9ede\u6c60\u81ea\u52d5\u64f4\u7e2e\u503c\uff0c\u8acb\u5728\u5275\u5efa Dataproc on GKE \u865b\u64ec\u96c6\u7fa3\u6642\u8a2d\u7f6e\u9019\u4e9b\u503c\u3002\n## \u66f4\u65b0\u7bc0\u9ede\u6c60\u81ea\u52d5\u64f4\u7e2e\n**\u6ce8\u610f** \uff1a\u4e0d\u5efa\u8b70\u5c07 Dataproc on GKE \u7bc0\u9ede\u6c60\u914d\u7f6e\u66f4\u65b0\u7232 [\u505c\u7528\u81ea\u52d5\u64f4\u7e2e](https://cloud.google.com/kubernetes-engine/docs/concepts/cluster-autoscaler?hl=zh-cn#autoscaling_limits) \u3002\n\u4f7f\u7528\u4ee5\u4e0b GKE [gcloud container node-pools update](https://cloud.google.com/sdk/gcloud/reference/container/node-pools/update?hl=zh-cn) \u547d\u4ee4\u66f4\u6539 Dataproc on GKE \u7bc0\u9ede\u6c60\u7684\u81ea\u52d5\u64f4\u7e2e\u914d\u7f6e\u3002\n```\ngcloud container node-pools update NODE_POOL_NAME \\\n\u00a0\u00a0\u00a0\u00a0--cluster=GKE_CLUSTER_NAME \\\n\u00a0\u00a0\u00a0\u00a0--region=region \\\n\u00a0\u00a0\u00a0\u00a0--enable-autoscaling \\\n\u00a0\u00a0\u00a0\u00a0--min-nodes=min nodes (must be <= max-nodes) \\\n\u00a0\u00a0\u00a0\u00a0--max-nodes=max nodes (must be >= min-nodes) \\\n```\n## Spark \u81ea\u52d5\u64f4\u7e2e\u7684\u5de5\u4f5c\u539f\u7406\n- \u63d0\u4ea4\u4f5c\u696d\u6642\uff0c\u9a45\u52d5\u7a0b\u5e8f Pod \u6703\u5b89\u6392\u5728\u8207 [Spark \u9a45\u52d5\u7a0b\u5e8f\u89d2\u8272](https://cloud.google.com/dataproc/docs/reference/rest/v1/projects.regions.clusters?hl=zh-cn#role) \u95dc\u806f\u7684\u7bc0\u9ede\u6c60\u4e2d\u904b\u884c\u3002\n- \u9a45\u52d5\u7a0b\u5e8f Pod \u6703\u8abf\u7528 GKE \u8abf\u5ea6\u5668\u4f86\u5275\u5efa\u57f7\u884c\u5668 Pod\u3002\n- \u57f7\u884c\u5668 Pod \u6703\u5728\u8207 [Spark Executor \u89d2\u8272](https://cloud.google.com/dataproc/docs/reference/rest/v1/projects.regions.clusters?hl=zh-cn#role) \u95dc\u806f\u7684\u7bc0\u9ede\u6c60\u6c60\u4e0a\u8abf\u5ea6\u3002\n- \u5982\u679c\u7bc0\u9ede\u6c60\u6709\u8db3\u5920\u7684 Pod \u5bb9\u91cf\uff0c\u5247 Pod \u6703\u7acb\u5373\u958b\u59cb\u904b\u884c\u3002\u5982\u679c\u5bb9\u91cf\u4e0d\u8db3\uff0cGKE \u96c6\u7fa3\u81ea\u52d5\u64f4\u7e2e\u5668\u6703\u5c0d\u7bc0\u9ede\u6c60\u9032\u884c\u7e31\u5411\u64f4\u5bb9\u4ee5\u63d0\u4f9b\u8acb\u6c42\u7684\u8cc7\u6e90\uff0c\u76f4\u5230\u9054\u5230\u7528\u6236\u6307\u5b9a\u7684\u9650\u5236\u7232\u6b62\u3002\u7576\u7bc0\u9ede\u6c60\u6709\u591a\u9918\u7684\u5bb9\u91cf\u6642\uff0cGKE \u96c6\u7fa3\u81ea\u52d5\u64f4\u7e2e\u5668\u6703\u5c07\u7bc0\u9ede\u6c60\u7e2e\u5bb9\u5230\u5176\u7528\u6236\u6307\u5b9a\u7684\u9650\u5236\u3002", "guide": "Dataproc"}