{"title": "Dataproc - \u5553\u52d5\u548c\u505c\u6b62\u96c6\u7fa3", "url": "https://cloud.google.com/dataproc/docs/guides/dataproc-start-stop?hl=zh-cn", "abstract": "# Dataproc - \u5553\u52d5\u548c\u505c\u6b62\u96c6\u7fa3\n\u5275\u5efa\u96c6\u7fa3\u540e\uff0c\u60a8\u53ef\u4ee5\u505c\u6b62\u5b83\uff0c\u7136\u5f8c\u5728\u9700\u8981\u6642\u91cd\u5553\u5b83\u3002\u505c\u6b62\u7a7a\u9592\u96c6\u7fa3\u53ef\u907f\u514d\u7522\u751f\u8cbb\u7528\uff0c\u800c\u7121\u9700\u522a\u9664\u7a7a\u9592\u96c6\u7fa3\uff0c\u7136\u5f8c\u53ef\u4ee5\u5275\u5efa\u5177\u6709\u76f8\u540c\u914d\u7f6e\u7684\u96c6\u7fa3\u3002\n**\u529f\u80fd\u8aaa\u660e** \uff1a\n- \u53ea\u6709\u4ee5\u4e0b Dataproc \u6620\u50cf\u7248\u672c\u6216\u66f4\u9ad8\u7248\u672c\u652f\u6301\u96c6\u7fa3\u5553\u52d5/\u505c\u6b62\u529f\u80fd\uff1a\n- 1.4.35-debian10/ubuntu18\n- 1.5.10-debian10/ubuntu18\n- 2.0.0-RC6-debian10/ubuntu18\n- \u4e0d\u5efa\u8b70\u505c\u6b62\u500b\u5225\u96c6\u7fa3\u7bc0\u9ede\uff0c\u56e0\u7232\u5df2\u505c\u6b62\u7684\u865b\u64ec\u6a5f\u7684\u72c0\u614b\u53ef\u80fd\u8207\u96c6\u7fa3\u72c0\u614b\u4e0d\u540c\u6b65\uff0c\u9019\u53ef\u80fd\u6703\u5c0e\u81f4\u932f\u8aa4\u3002", "content": "## \u505c\u6b62\u96c6\u7fa3\n\u505c\u6b62\u4e00\u500b\u96c6\u7fa3\u6703\u505c\u6b62\u6240\u6709\u96c6\u7fa3 Compute Engine \u865b\u64ec\u6a5f\u3002\u5728\u9019\u4e9b\u865b\u64ec\u6a5f\u505c\u6b62\u5f8c\uff0c\u60a8\u7121\u9700\u4ed8\u8cbb\u3002\u4f46\u662f\uff0c\u60a8\u5c07\u7e7c\u7e8c\u7232\u4efb\u4f55\u95dc\u806f\u7684\u96c6\u7fa3\u8cc7\u6e90\u4ed8\u8cbb\uff0c\u4f8b\u5982 [\u6c38\u4e45\u6027\u78c1\u76e4](https://cloud.google.com/dataproc/docs/concepts/compute/dataproc-pd-ssd?hl=zh-cn) \u3002\n\u6ce8\u610f\uff1a\n- **\u6b63\u5728\u904b\u884c\u7684\u64cd\u4f5c** \uff1a\u5982\u679c\u96c6\u7fa3\u6709\u904b\u884c\u64cd\u4f5c\uff08\u4f8b\u5982\u66f4\u65b0\u6216\u8a3a\u65b7\u64cd\u4f5c\uff09\uff0c\u5247\u505c\u6b62\u8acb\u6c42\u5c07\u5931\u6557\u3002\n- **\u6b63\u5728\u904b\u884c\u7684\u4f5c\u696d** \uff1a\u5982\u679c\u96c6\u7fa3\u6709\u6b63\u5728\u904b\u884c\u7684\u4f5c\u696d\uff0c\u5247\u505c\u6b62\u8acb\u6c42\u5c07\u6703\u6210\u529f\uff0c\u865b\u64ec\u6a5f\u5c07\u505c\u6b62\uff0c\u6b63\u5728\u904b\u884c\u7684\u4f5c\u696d\u4e5f\u5c07\u5931\u6557\u3002\n- **\u505c\u6b62\u97ff\u61c9** \uff1a\u7576\u505c\u6b62\u8acb\u6c42\u5728\u97ff\u61c9\u4e2d\u5411\u7528\u6236\u6216\u8abf\u7528\u65b9\u8fd4\u56de\u505c\u6b62\u64cd\u4f5c\u6642\uff0c\u8a72\u96c6\u7fa3\u5c07\u8655\u65bc`STOPPING`\u72c0\u614b\uff0c\u4e26\u4e14\u5c07\u4e0d\u5141\u8a31\u63d0\u4ea4\u66f4\u591a\u4f5c\u696d\uff08`SubmitJob`\u8acb\u6c42\u5c07\u5931\u6557\uff09\u3002\n- **\u81ea\u52d5\u64f4\u7e2e** \uff1a\u5982\u679c\u60a8\u505c\u6b62\u5553\u7528\u4e86 [\u81ea\u52d5\u64f4\u7e2e](https://cloud.google.com/dataproc/docs/concepts/configuring-clusters/autoscaling?hl=zh-cn) \u529f\u80fd\u7684\u96c6\u7fa3\uff0cDataproc \u81ea\u52d5\u64f4\u7e2e\u5668\u5c07\u505c\u6b62\u64f4\u7e2e\u8a72\u96c6\u7fa3\u3002\u96c6\u7fa3\u91cd\u5553\u5f8c\uff0c\u5b83\u5c07\u6062\u5fa9\u64f4\u7e2e\u96c6\u7fa3\u3002\u5982\u679c\u60a8\u7232\u5df2\u505c\u6b62\u7684\u96c6\u7fa3\u5553\u7528\u81ea\u52d5\u64f4\u7e2e\u529f\u80fd\uff0c\u5247\u81ea\u52d5\u64f4\u7e2e\u653f\u7b56\u50c5\u5728\u96c6\u7fa3\u5553\u52d5\u5f8c\u751f\u6548\u3002\n### \u76e3\u63a7\u505c\u6b62\u64cd\u4f5c\n\u60a8\u53ef\u4ee5\u904b\u884c [gcloud dataproc operations describe operation-id](https://cloud.google.com/sdk/gcloud/reference/dataproc/operations/describe?hl=zh-cn) \u4ee5\u76e3\u63a7\u9577\u6642\u9593\u904b\u884c\u7684\u96c6\u7fa3\u505c\u6b62\u64cd\u4f5c\u3002\u60a8\u9084\u53ef\u4ee5\u4f7f\u7528 [gcloud dataproc clusters describe cluster-name](https://cloud.google.com/sdk/gcloud/reference/dataproc/clusters/describe?hl=zh-cn) \u547d\u4ee4\uff0c\u4ee5\u76e3\u63a7\u96c6\u7fa3\u72c0\u614b\u5f9e `RUNNING` \u8f49\u63db\u7232 `STOPPING` \uff0c\u518d\u8f49\u63db\u7232 `STOPPED` \u3002\n### \u9650\u5236\n- \u60a8\u7121\u6cd5\u505c\u6b62\uff1a- \u5177\u6709 [\u8f14\u52a9\u5de5\u4f5c\u5668](https://cloud.google.com/dataproc/docs/concepts/compute/secondary-vms?hl=zh-cn) \u7684\u96c6\u7fa3\n- \u5177\u6709 [\u672c\u5730 SSD](https://cloud.google.com/dataproc/docs/concepts/compute/dataproc-local-ssds?hl=zh-cn) \u7684\u96c6\u7fa3\n- \u5553\u7528\u4e86 Dataproc [\u500b\u4eba\u96c6\u7fa3\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/dataproc/docs/concepts/iam/personal-auth?hl=zh-cn) \u7684\u96c6\u7fa3\n- \u96c6\u7fa3\u505c\u6b62\u5f8c\uff0c\u60a8\u7121\u6cd5\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- \u66f4\u65b0\u96c6\u7fa3\n- \u5c07\u4f5c\u696d\u63d0\u4ea4\u5230\u96c6\u7fa3\n- \u4f7f\u7528 [Dataproc \u7d44\u4ef6\u7db2\u95dc](https://cloud.google.com/dataproc/docs/concepts/accessing/dataproc-gateways?hl=zh-cn) \u8a2a\u554f\u96c6\u7fa3\u4e0a\u7684\u7b46\u8a18\u672c\n## \u5553\u52d5\u96c6\u7fa3\n- \u7576\u60a8\u5553\u52d5\u505c\u6b62\u7684\u96c6\u7fa3\u6642\uff0c\u4efb\u4f55\u521d\u59cb\u5316\u64cd\u4f5c\u90fd\u4e0d\u6703\u91cd\u65b0\u904b\u884c\u3002\u521d\u59cb\u5316\u64cd\u4f5c\u53ea\u80fd\u5728\u5275\u5efa\u96c6\u7fa3\u6642\u4ee5\u53ca\u96c6\u7fa3\u64f4\u5bb9\u6dfb\u52a0\u7bc0\u9ede\u6642\u5728\u96c6\u7fa3\u7bc0\u9ede\u4e0a\u904b\u884c\u3002\n- \u5553\u52d5\u64cd\u4f5c\u5b8c\u6210\u5f8c\uff0c\u60a8\u53ef\u4ee5\u7acb\u5373\u5c07\u4f5c\u696d\u63d0\u4ea4\u5230\u96c6\u7fa3\u3002\u4f46\u662f\uff0c\u9019\u4e9b\u4f5c\u696d\u7684\u57f7\u884c\u53ef\u80fd\u6703\u5ef6\u9072\uff08\u5927\u7d04 30 \u79d2\uff09\uff0c\u4ee5\u4fbf HDFS \u548c YARN \u80fd\u5920\u6b63\u5e38\u904b\u884c\u3002## \u4f7f\u7528\u505c\u6b62/\u5553\u52d5\n\u60a8\u53ef\u4ee5\u4f7f\u7528 `gcloud` CLI \u6216 Dataproc API \u505c\u6b62\u548c\u5553\u52d5\u96c6\u7fa3\u3002\n**\u505c\u6b62\u96c6\u7fa3** \n```\ngcloud dataproc clusters stop cluster-name \\\n\u00a0\u00a0\u00a0\u00a0--region=region\n```\n **\u5553\u52d5\u96c6\u7fa3** \n```\ngcloud dataproc clusters start cluster-name \\\n\u00a0\u00a0\u00a0\u00a0--region=region\n``` **\u505c\u6b62\u96c6\u7fa3** \n\u63d0\u4ea4 [clusters.stop](https://cloud.google.com/dataproc/docs/reference/rest/v1/projects.regions.clusters/stop?hl=zh-cn) \u8acb\u6c42\u3002\n **\u5553\u52d5\u96c6\u7fa3** \n\u63d0\u4ea4 [clusters.start](https://cloud.google.com/dataproc/docs/reference/rest/v1/projects.regions.clusters/start?hl=zh-cn) \u8acb\u6c42\u3002\u5728 Cloud Console \u7684 Dataproc [\u96c6\u7fa3](https://console.cloud.google.com/dataproc/clusters?hl=zh-cn) \u9801\u9762\u4e2d\u9ede\u64ca\u96c6\u7fa3\u540d\u7a31\uff0c\u7136\u5f8c\u9ede\u64ca\u201c\u505c\u6b62\u201d\u4ee5\u505c\u6b62\u96c6\u7fa3\uff0c\u6216\u9ede\u64ca\u201c\u5553\u52d5\u201d\u4ee5\u5553\u52d5\u96c6\u7fa3\u3002", "guide": "Dataproc"}