{"title": "Docs - \u4f7f\u7528 Striim \u5c07 Oracle \u6578\u64da\u5eab\u9077\u79fb\u5230 Cloud SQL for PostgreSQL", "url": "https://cloud.google.com/architecture/migrate-oracle-to-cloudsql-for-postgresql-using-striim?hl=zh-cn", "abstract": "# Docs - \u4f7f\u7528 Striim \u5c07 Oracle \u6578\u64da\u5eab\u9077\u79fb\u5230 Cloud SQL for PostgreSQL\nLast reviewed 2021-06-28 UTC\n\u5728\u672c\u6559\u7a0b\u4e2d\uff0c\u60a8\u5c07\u4f7f\u7528 [Striim](https://www.striim.com/) \u5c07 [Oracle\u00ae Database Enterprise Edition 18c](https://docs.oracle.com/en/database/oracle/oracle-database/18/) \u6216\u66f4\u9ad8\u7248\u672c\u5f9e\u672c\u5730\u74b0\u5883\u6216\u96f2\u74b0\u5883\u9077\u79fb\u5230 Google Cloud \u7684 [Cloud SQL for PostgreSQL](https://cloud.google.com/sql?hl=zh-cn) \u5be6\u4f8b\u4e0a\u3002\u672c\u6559\u7a0b\u4f7f\u7528 Oracle [\u4eba\u529b\u8cc7\u6e90\u793a\u4f8b\u67b6\u69cb](https://docs.oracle.com/en/database/oracle/oracle-database/18/comsc/introduction-to-sample-schemas.html#GUID-4DE9844F-0B28-4713-9AFC-CCD8D6249D76) \u4e2d\u7684\u8868\u3002\n\u672c\u6559\u7a0b\u9069\u7528\u65bc\u8a08\u5283\u4f7f\u7528 Striim \u5c07 Oracle \u6578\u64da\u5eab\u9077\u79fb\u6216\u8907\u88fd\u5230 Cloud SQL for PostgreSQL \u7684\u4f01\u696d\u6578\u64da\u5eab\u67b6\u69cb\u5e2b\u3001\u6578\u64da\u5eab\u5de5\u7a0b\u5e2b\u548c\u6578\u64da\u6240\u6709\u8005\u3002\u60a8\u61c9\u8a72\u5c0d\u5982\u4f55\u4f7f\u7528 Striim \u69cb\u5efa\u6d41\u6c34\u7dda\u6709\u57fa\u672c\u7684\u77ad\u89e3\u3002\u60a8\u9084\u61c9\u8a72\u719f\u6089 [Striim \u7db2\u9801\u754c\u9762](https://www.striim.com/docs/en/web-ui-guide.html) \u3001Striim \u7684 [\u4e3b\u8981\u6982\u5ff5](https://www.striim.com/docs/en/striim-concepts.html) \uff0c\u4ee5\u53ca\u5982\u4f55\u4f7f\u7528 [Striim \u7684 Flow Designer](https://www.striim.com/docs/en/creating-and-modifying-apps-using-the-flow-designer.html) \u5275\u5efa\u61c9\u7528\u3002\nStriim \u662f Google Cloud \u6578\u64da\u5eab\u9077\u79fb\u6280\u8853\u5408\u4f5c\u5925\u4f34\u3002Striim \u4f7f\u7528\u62d6\u653e\u5f0f\u754c\u9762\u5728\u6578\u64da\u5eab\u4e4b\u9593\u8a2d\u7f6e\u6301\u7e8c\u6578\u64da\u9077\u79fb\uff0c\u5f9e\u800c\u7c21\u5316\u4e86\u5728\u7dda\u9077\u79fb\u3002\u9077\u79fb\u5230 Google Cloud \u5f8c\uff0cStriim \u6703\u63d0\u4f9b\u7121\u5e72\u64fe\u7684\u6d41\u5f0f\u63d0\u53d6\u5e73\u81fa\uff0c\u7528\u65bc\u63d0\u53d6\u3001\u8f49\u63db\u548c\u52a0\u8f09 (ETL)\uff0c\u8a72\u5e73\u81fa\u90e8\u7f72\u6548\u7387\u9ad8\u4e14\u6613\u65bc\u8fed\u4ee3\u3002\u5982\u9700\u69cb\u5efa\u9077\u79fb\u6d41\u6c34\u7dda\uff0c\u8acb\u5728\u672c\u6559\u7a0b\u4e2d\u4f7f\u7528 [Striim \u7684 Flow Designer](https://www.striim.com/docs/en/creating-and-modifying-apps-using-the-flow-designer.html) \u3002\n\u5982\u679c\u60a8\u4e0d\u719f\u6089\u6578\u64da\u5eab\u9077\u79fb\uff0c\u8acb\u53c3\u95b1 [Cloud Next '19 \u4e2d\u7684\u9019\u9805\u6280\u8853\u8b1b\u5ea7](https://www.youtube.com/watch?v=PDFC7XpGAVU&hl=zh-cn) \u3002", "content": "## \u67b6\u69cb\u4f7f\u7528 Striim \u9032\u884c\u6578\u64da\u5eab\u9077\u79fb\u6d89\u53ca\u9806\u5e8f\u6578\u64da\u79fb\u52d5\u7684\u5169\u500b\u968e\u6bb5\uff1a- **\u7b2c 1 \u968e\u6bb5** \uff1aOracle \u6578\u64da\u5eab\u7684\u4e00\u6b21\u6027\u521d\u59cb\u8907\u88fd\u3002\n- **\u7b2c 2 \u968e\u6bb5** \uff1a\u6b64\u5f8c\u4f7f\u7528\u8b8a\u66f4\u6578\u64da\u6355\u7372 (CDC) \u6301\u7e8c\u8907\u88fd\u5728\u6e90\u6578\u64da\u5eab\u7cfb\u7d71\u4e0a\u63d0\u4ea4\u7684\u6bcf\u9805\u66f4\u6539\u3002\n\u4e0b\u5716\u5c55\u793a\u4e86\u4e00\u500b\u57fa\u672c\u7684\u90e8\u7f72\u67b6\u69cb\uff1a\u6b64\u67b6\u69cb\u6d89\u53ca\u5728 Compute Engine \u5be6\u4f8b\u4e0a\u904b\u884c Striim \u61c9\u7528\u3002\u5b83\u53ef\u9023\u63a5\u5230\u8a17\u7ba1\u5728\u672c\u5730\u6216\u96f2\u7aef\u7684 Oracle \u6578\u64da\u5eab\uff0c\u4e26\u5c07\u6578\u64da\u5beb\u5165 Google Cloud \u4e0a\u7684 Cloud SQL for PostgreSQL \u5be6\u4f8b\u3002\n\u7232\u907f\u514d Striim \u548c Cloud SQL \u5be6\u4f8b\u4e4b\u9593\u51fa\u73fe\u4efb\u4f55\u7db2\u7d61\u6216\u9023\u63a5\u554f\u984c\uff0c\u8acb\u5c0d\u5169\u500b\u5be6\u4f8b\u4f7f\u7528\u540c\u4e00\u7db2\u7d61\u3002\u60a8\u53ef\u4ee5 [\u5728 Compute Engine \u5be6\u4f8b\u4e0a\u5f9e Google Cloud Marketplace \u90e8\u7f72 Striim](https://www.striim.com/docs/en/subscribe-to-striim-in-the-google-cloud-platform-marketplace.html) \uff1b\u5982\u679c\u60a8\u9700\u8981\u9ad8\u53ef\u7528\u6027\uff0c\u4e5f\u53ef\u4ee5\u5c07 Striim [\u90e8\u7f72\u7232\u96c6\u7fa3](https://www.striim.com/docs/platform/en/creating-a-cluster-in-centos.html) \u3002\n\u5728\u672c\u6559\u7a0b\u4e2d\uff0c\u8acb\u5f9e Cloud Marketplace \u9032\u884c\u90e8\u7f72\u3002\n\u5f9e Cloud Marketplace \u90e8\u7f72 Striim \u7684\u512a\u52e2\u5728\u65bc\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u5176\u5167\u7f6e [\u9069\u914d\u5668](https://www.striim.com/docs/en/using-source-and-target-adapters-in-applications.html) \u9023\u63a5\u5230\u5404\u7a2e\u6578\u64da\u5eab\u548c\u6578\u64da\u6e90\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 Flow Designer\u3001Striim \u7684\u4ea4\u4e92\u5f0f\u62d6\u653e\u754c\u9762\u9023\u63a5\u9069\u914d\u5668\uff0c\u4ee5\u5f62\u6210 [\u975e\u5faa\u74b0\u5716](https://mathworld.wolfram.com/AcyclicGraph.html) \u3002\u6b64\u5716\u4e5f\u7a31\u7232 Striim \u6d41\u6c34\u7dda \u6216 Striim \u61c9\u7528 \u3002\n\u672c\u6559\u7a0b\u4e2d\u7684\u9077\u79fb\u7528\u4f8b\u4f7f\u7528\u4e09\u500b Striim \u9069\u914d\u5668\uff1a- [Database Reader](https://www.striim.com/docs/en/database-reader.html) \uff1a\u5728\u521d\u59cb\u52a0\u8f09\u968e\u6bb5\u5f9e Oracle \u6e90\u6578\u64da\u5eab\u8b80\u53d6\u6578\u64da\u3002\n- [Oracle Reader](https://www.striim.com/docs/en/oracle-database-cdc.html) \uff1a\u5728\u9023\u7e8c\u6578\u64da\u8907\u88fd\u968e\u6bb5\u4f7f\u7528 [LogMiner](https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html) \u5f9e Oracle \u6e90\u6578\u64da\u5eab\u8b80\u53d6\u6578\u64da\u3002\n- [Database Writer](https://www.striim.com/docs/en/database-writer.html) \uff1a\u5728\u521d\u59cb\u52a0\u8f09\u548c\u9023\u7e8c\u6578\u64da\u8907\u88fd\u671f\u9593\u5c07\u6578\u64da\u5beb\u5165 Cloud SQL for PostgreSQL \u6578\u64da\u5eab\u3002\n## \u76ee\u6a19\n- \u6e96\u5099 Oracle \u6578\u64da\u5eab\uff0c\u4f5c\u7232\u9077\u79fb\u6216\u8907\u88fd\u7684\u6e90\u6578\u64da\u5eab\u3002\n- \u6e96\u5099 Cloud SQL for PostgreSQL \u6578\u64da\u5eab\uff0c\u4f5c\u7232\u9077\u79fb\u6216\u8907\u88fd\u7684\u76ee\u6a19\u6578\u64da\u5eab\u3002\n- \u6eff\u8db3\u5b89\u88dd\u548c\u904b\u884c Striim \u7684\u524d\u63d0\u689d\u4ef6\u3002\n- \u5c07 Oracle \u6578\u64da\u5eab\u7684\u67b6\u69cb\u8f49\u63db\u7232 PostgreSQL \u4e2d\u7684\u76f8\u61c9\u67b6\u69cb\u3002\n- \u57f7\u884c\u5f9e Oracle \u6578\u64da\u5eab\u5230 Cloud SQL for PostgreSQL \u7684\u521d\u59cb\u52a0\u8f09\u3002\n- \u8a2d\u7f6e\u5f9e Oracle \u6578\u64da\u5eab\u5230 Cloud SQL for PostgreSQL \u7684\u6301\u7e8c\u8907\u88fd\u3002\n## \u8cbb\u7528  Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them \n\u5728\u672c\u6587\u6a94\u4e2d\uff0c\u60a8\u5c07\u4f7f\u7528 Google Cloud \u7684\u4ee5\u4e0b\u6536\u8cbb\u7d44\u4ef6\uff1a\n- [Compute Engine](https://cloud.google.com/compute/all-pricing?hl=zh-cn) \n- [Cloud SQL for PostgreSQL](https://cloud.google.com/sql/pricing?hl=zh-cn#pg-pricing) \n\u60a8\u53ef\u4f7f\u7528 [\u50f9\u683c\u8a08\u7b97\u5668](https://cloud.google.com/products/calculator?hl=zh-cn) \u6839\u64da\u60a8\u7684\u9810\u8a08\u4f7f\u7528\u60c5\u6cc1\u4f86\u4f30\u7b97\u8cbb\u7528\u3002 \nCloud Marketplace \u4e2d\u7684 Striim \u89e3\u6c7a\u65b9\u6848\u63d0\u4f9b\u9650\u6642\u514d\u8cbb\u8a66\u7528\u8a31\u53ef\u3002\u8a66\u7528\u671f\u7d50\u675f\u5f8c\uff0c\u6211\u5011\u6703\u5411\u60a8\u7684 Google Cloud \u8cec\u865f\u6536\u53d6\u4f7f\u7528\u8cbb\u3002\u60a8\u9084\u53ef\u4ee5\u76f4\u63a5\u5f9e Striim \u7372\u53d6 Striim \u8a31\u53ef\uff0c\u7528\u65bc\u672c\u5730\u90e8\u7f72\u548c Compute Engine \u865b\u64ec\u6a5f\u4e2d\u3002\u60a8\u53ef\u80fd\u9084\u9700\u8981\u652f\u4ed8\u5728 Google Cloud \u5916\u90e8\u904b\u884c Oracle \u6578\u64da\u5eab\u76f8\u95dc\u7684\u8cbb\u7528\u3002## \u6e96\u5099\u5de5\u4f5c- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n\u672c\u6559\u7a0b\u5047\u5b9a\u60a8\u5df2\u5177\u5099\u4ee5\u4e0b\u5404\u9805\uff1a- \u60a8\u8981\u9077\u79fb\u7684 Linux x86-64 \u7684 Oracle Database Enterprise Edition 18c \u6216\u66f4\u9ad8\u7248\u672c\u3002\n- \u904b\u884c\u5df2\u5b89\u88dd Striim \u7684 CentOS \u7684 Compute Engine\u3002\u60a8\u53ef\u4ee5\u901a\u904e [Google Cloud Marketplace](https://console.cloud.google.com/marketplace/product/striim/striim?hl=zh-cn) \u89e3\u6c7a\u65b9\u6848\u90e8\u7f72 Striim\u3002\n## \u6e96\u5099 Oracle \u6578\u64da\u5eab\u4ee5\u4e0b\u90e8\u5206\u8a0e\u8ad6\u4e86\u60a8\u9023\u63a5\u5230 Oracle \u6578\u64da\u5eab\u4e26\u4f7f\u7528 Striim \u9077\u79fb\u6642\u6240\u9700\u7684\u914d\u7f6e\u66f4\u6539\u3002\u5982\u9700\u77ad\u89e3\u914d\u7f6e\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u57fa\u672c Oracle \u914d\u7f6e\u4efb\u52d9](https://www.striim.com/docs/en/oracle-database-cdc.html) \u3002\n### \u9078\u64c7 Oracle CDC \u7684\u4f86\u6e90\u96d6\u7136\u5b58\u5728\u4e0d\u540c\u7684 Oracle CDC \u4f86\u6e90\uff0c\u4f46\u672c\u6559\u7a0b\u4f7f\u7528 [LogMiner](https://docs.oracle.com/en/database/oracle/oracle-database/19/sutil/oracle-logminer-utility.html#GUID-3417B738-374C-4EE3-B15C-3A66E01AE2B5) \u3002\u5982\u9700\u77ad\u89e3\u5099\u7528\u9078\u9805\uff0c\u8acb\u53c3\u95b1 [\u5099\u7528 Oracle CDC \u4f86\u6e90](#alternate_oracle_cdc_sources) \u3002\n### \u6e96\u5099 Oracle Database Enterprise Edition 18c\uff08\u6216\u66f4\u9ad8\u7248\u672c\uff09\u5982\u9700\u6e96\u5099 Oracle \u6578\u64da\u5eab\uff0c\u8acb\u6309\u7167 [Striim \u6587\u6a94\u9801\u9762](https://www.striim.com/docs/en/oracle-database-cdc.html#UUID-abbbed49-2cbf-2e36-0fd9-6771ee8c9e61) \u4e0a\u7684\u4ee5\u4e0b\u6b65\u9a5f\u9032\u884c\u64cd\u4f5c\uff1a- \u5553\u7528 Striim \u7684`archivelog`\u3002\n- \u5553\u7528 Striim \u88dc\u5145\u65e5\u8a8c\u6578\u64da\u3002\n- \u5553\u7528 Striim \u4e3b\u9375\u65e5\u8a8c\u8a18\u9304\u3002\n- \u5275\u5efa\u5177\u6709 Striim \u7684 LogMiner \u6b0a\u9650\u7684 Oracle \u7528\u6236\u3002\u5982\u9700\u904b\u884c\u9019\u4e9b\u6b65\u9a5f\uff0c\u7121\u8ad6\u60a8\u8981\u9077\u79fb CDB \u9084\u662f\u53ef\u63d2\u5165\u6578\u64da\u5eab (PDB)\uff0c\u90fd\u5fc5\u9808\u9023\u63a5\u5230\u5bb9\u5668\u6578\u64da\u5eab (CDB)\u3002 \u6211\u5011\u5efa\u8b70\u5b89\u88dd\u4e26\u4f7f\u7528 [SQL*Plus](https://docs.oracle.com/cd/B14117_01/server.101/b12170/qstart.htm) \u8207 Oracle \u6578\u64da\u5eab\u9032\u884c\u4ea4\u4e92\u3002\n- \u5275\u5efa Striim [quiescemarker \u8868](https://www.striim.com/docs/en/oracle-database-cdc.html#UUID-7203a015-ebec-d36a-cce2-0403a78cccdc) \u3002CDC \u7684 Striim \u7684 Oracle Reader \u9069\u914d\u5668\u9700\u8981\u4e00\u500b\u8868\uff0c\u4ee5\u4fbf\u5728\u61c9\u7528\u8655\u65bc\u975c\u9ed8\u72c0\u614b\u6642\u5b58\u5132\u5143\u6578\u64da\u3002\u5982\u679c\u60a8\u4f7f\u7528 LogMiner \u4f5c\u7232 CDC \u7684\u4f86\u6e90\uff08\u5982\u672c\u6559\u7a0b\u6240\u793a\uff09\uff0c\u5247\u9700\u8981 quiquecemarker \u8868\u3002\u6309\u7167\u6b65\u9a5f\u5275\u5efa\u8868\u6642\uff0c\u60a8\u5fc5\u9808\u9023\u63a5\u5230 CDB\u3002\n- \u5728 Oracle \u6578\u64da\u5eab\u548c Striim \u5be6\u4f8b\u4e4b\u9593\u5efa\u7acb\u7db2\u7d61\u9023\u63a5\u3002\u9ed8\u8a8d\u60c5\u6cc1\u4e0b\uff0c [Oracle \u76e3\u807d\u5668](https://docs.oracle.com/cd/B10501_01/network.920/a96580/listener.htm) \u4f4d\u65bc\u7aef\u53e3 `1521` \u4e0a\u3002\u78ba\u4fdd Striim \u5be6\u4f8b\u7684 IP \u5730\u5740\u53ef\u4ee5\u9023\u63a5\u5230 Oracle \u76e3\u807d\u5668\u7aef\u53e3\uff0c\u4e26\u4e14\u6c92\u6709\u9632\u706b\u7246\u898f\u5247\u963b\u6b62\u5b83\u3002\u914d\u7f6e\u4e86 Oracle \u76e3\u807d\u5668\u7684\u7aef\u53e3\u4f4d\u65bc `$ORACLE_HOME/network/admin/tnsnames.ora` \u6587\u4ef6\u4e2d\u3002\n- \u8a18\u4e0b [Oracle \u6578\u64da\u5eab\u7684\u7cfb\u7d71\u66f4\u6539\u7de8\u865f (SCN)](https://docs.oracle.com/cd/E11882_01/server.112/e40540/transact.htm#CNCPT039) \u3002SCN \u662f\u4e00\u500b\u5167\u90e8\u6642\u9593\u6233\uff0c\u7528\u65bc\u5f15\u7528\u5c0d\u6578\u64da\u5eab\u6240\u505a\u7684\u66f4\u6539\u3002\u5728 Oracle \u6578\u64da\u5eab\u4e0a\uff0c\u7372\u53d6\u6700\u65e9\u7684 SCN\uff1a```\nSELECT MIN(start_scn) FROM gv$transaction;\n```\u8907\u88fd\u6b64\u865f\u78bc\u3002\u60a8\u7a0d\u5f8c\u5c07\u5728\u9023\u7e8c\u8907\u88fd\u6d41\u6c34\u7dda\u6b65\u9a5f\u4e2d\u7528\u5230\u5b83\u3002\n## \u6e96\u5099 Striim \u5be6\u4f8b\u5982\u9700\u77ad\u89e3 Striim \u652f\u6301\u7684\u64cd\u4f5c\u7cfb\u7d71\uff0c\u8acb\u53c3\u95b1 [\u7cfb\u7d71\u8981\u6c42](https://www.striim.com/docs/platform/en/system-requirements.html) \u3002\u5982\u9700\u5c07 Oracle Reader \u8207 LogMiner \u642d\u914d\u4f7f\u7528\uff0c\u8acb\u5728 Striim \u5be6\u4f8b\u7684 [Java \u985e\u8def\u5f91\u4e2d\u653e\u7f6e Oracle JDBC \u9a45\u52d5\u7a0b\u5e8f](https://www.striim.com/docs/en/striim-forwarding-agent-installation-and-configuration.html#UUID-98295fd7-5aa5-4ba8-3fd2-82785fce6592) \u3002\u5728\u904b\u884c Oracle Reader \u9069\u914d\u5668\u7684\u6bcf\u500b Striim \u670d\u52d9\u5668\u4e0a\u57f7\u884c\u4ee5\u4e0b\u6b65\u9a5f\uff1a- \u767b\u9304\u60a8\u7684 [Oracle \u8cec\u865f](https://www.oracle.com/cloud/sign-in.html) \uff0c\u7136\u5f8c\u5728\u672c\u5730\u6a5f\u5668\u4e0a [\u4e0b\u8f09 ojdbc8.jar \u6587\u4ef6](https://www.oracle.com/database/technologies/jdbc-ucp-122-downloads.html#license-lightbox) \u3002- \u5982\u679c\u60a8\u6c92\u6709 Oracle \u8cec\u865f\uff0c\u8acb [\u5275\u5efa\u4e00\u500b](https://profile.oracle.com/myprofile/account/create-account.jspx) \u3002\n- \u9ede\u64ca `ojdbc8.jar` \u6587\u4ef6\u7684 **\u4e0b\u8f09** \u93c8\u63a5\u3002- \u5982\u679c\u60a8\u63a5\u53d7\u8a31\u53ef\u689d\u6b3e\uff0c\u8acb\u9ede\u64ca **\u6211\u5df2\u67e5\u770b\u4e26\u63a5\u53d7 Oracle \u8a31\u53ef\u5354\u8b70** \u4e0b\u8f09\u6587\u4ef6\u3002\n- \u5728 Cloud Shell \u4e2d\uff0c\u5275\u5efa\u4e00\u500b Cloud Storage \u5b58\u5132\u6876\uff0c\u4e26\u5c07 `.jar` \u6587\u4ef6\u4e0a\u50b3\u5230\u8a72\u5b58\u5132\u6876\uff1a```\ngsutil mb -b on -l REGION gs://BUCKET_NAMEgsutil cp PATH/ojdbc8.jar gs://BUCKET_NAME\n```\u8acb\u66ff\u63db\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1a\u8981\u5728\u5176\u4e2d\u5275\u5efa Cloud Storage \u5b58\u5132\u6876\u7684\u5340\u57df\n- \uff1a\u60a8\u8981\u5b58\u5132 [ojdbc8.jar](https://www.oracle.com/database/technologies/jdbc-ucp-122-downloads.html#license-lightbox) \u6587\u4ef6\u7684 Cloud Storage \u5b58\u5132\u6876\u7684\u540d\u7a31\n- \uff1a\u60a8\u4e0b\u8f09`ojdbc8.jar`\u6587\u4ef6\u7684\u8def\u5f91\n\u5c07\u6587\u4ef6\u4fdd\u5b58\u5230\u672c\u5730\u6a5f\u5668\u5f8c\uff0c\u6211\u5011\u5efa\u8b70\u60a8\u5c07 `.jar` \u6587\u4ef6\u4e0a\u50b3\u5230 [Cloud Storage](https://cloud.google.com/storage?hl=zh-cn) \u5b58\u5132\u6876\uff0c\u4ee5\u4fbf\u5c07\u5176\u4e0b\u8f09\u5230\u4efb\u4f55\u5be6\u4f8b\u3002\n- [\u4f7f\u7528 Striim \u5be6\u4f8b\u6253\u958b SSH \u6703\u8a71](https://cloud.google.com/compute/docs/instances/connecting-to-instance?hl=zh-cn#console) \uff0c\u7136\u5f8c\u5c07 `.jar` \u6587\u4ef6\u4e0b\u8f09\u5230 Striim \u5be6\u4f8b\uff0c\u4e26\u5c07\u5176\u653e\u7f6e\u5728 `/opt/striim/lib` \u76ee\u9304\u4e2d\uff1a```\nsudo su - striim gsutil cp gs://BUCKET_NAME/ojdbc8.jar /opt/striim/lib\n```\n- \u9a57\u8b49 `ojdbc8.jar` \u6587\u4ef6\u662f\u5426\u5177\u6709\u6b63\u78ba\u7684\u6587\u4ef6\u6b0a\u9650\uff1a```\n\u00a0sudo ls -l /opt/striim/lib/ojdbc8.jar\n```\u8f38\u51fa\u61c9\u5982\u4e0b\u6240\u793a\uff1a`-rwxrwx--- striim striim`\n- \uff08\u53ef\u9078\uff09\u5982\u679c `.jar` \u6587\u4ef6\u6c92\u6709\u4e0a\u8ff0\u6b0a\u9650\uff0c\u8acb\u8a2d\u7f6e\u6b63\u78ba\u7684\u6b0a\u9650\uff1a```\nsudo chmod 770 /opt/striim/lib/ojdbc8.jarsudo chown striim /opt/striim/lib/ojdbc8.jarsudo chgrp striim /opt/striim/lib/ojdbc8.jar\n```\n- \u505c\u6b62\u4e26\u91cd\u5553 Striim\u3002\u9032\u884c\u4efb\u4f55\u914d\u7f6e\u66f4\u6539\uff08\u4f8b\u5982\u4e0a\u8ff0\u6b0a\u9650\u66f4\u6539\uff09\u5f8c\uff0c\u60a8\u5fc5\u9808\u91cd\u5553 Striim\u3002- \u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f CentOS 7 Linux \u767c\u884c\u7248\uff0c\u8acb\u505c\u6b62 Striim\uff1a```\nsudo systemctl stop striim-nodesudo systemctl stop striim-dbms\n```\n- \u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f CentOS 7 Linux \u767c\u884c\u7248\uff0c\u8acb\u5553\u52d5 Striim\uff1a```\nsudo systemctl start striim-dbmssudo systemctl start striim-node\n```\n\u5982\u679c\u60a8\u60f3\u8a73\u7d30\u77ad\u89e3\u5982\u4f55\u91dd\u5c0d\u4e0d\u540c\u7684\u64cd\u4f5c\u7cfb\u7d71\u505c\u6b62\u548c\u91cd\u5553 Striim\uff0c\u8acb\u53c3\u95b1 [\u5553\u52d5\u548c\u505c\u6b62 Striim](https://www.striim.com/docs/platform/en/starting-and-stopping-striim-platform.html) \n- \u5728 Striim \u5be6\u4f8b\u4e0a [\u5b89\u88dd psql \u5ba2\u6236\u7aef](https://cloud.google.com/sql/docs/postgres/connect-admin-ip?hl=zh-cn#install-mysql-client) \u3002\u60a8\u5c07\u4f7f\u7528\u6b64\u5ba2\u6236\u7aef\u9023\u63a5\u5230 Cloud SQL \u5be6\u4f8b\uff0c\u4e26\u5728\u672c\u6559\u7a0b\u7684\u5f8c\u9762\u90e8\u5206\u5275\u5efa\u67b6\u69cb\u3002\n## \u6e96\u5099 Cloud SQL for PostgreSQL \u67b6\u69cb\u7576\u60a8\u5c07\u8868\u6578\u64da\u5f9e\u4e00\u500b\u6578\u64da\u5eab\u8907\u88fd\u6216\u6301\u7e8c\u8907\u88fd\u5230\u53e6\u4e00\u500b\u6578\u64da\u5eab\u6642\uff0cStriim \u901a\u5e38\u9700\u8981\u5305\u542b\u5177\u6709\u6b63\u78ba\u67b6\u69cb\u7684\u76f8\u61c9\u8868\u7684\u76ee\u6a19\u6578\u64da\u5eab\u3002Google Cloud \u6c92\u6709\u7528\u65bc\u6e96\u5099\u67b6\u69cb\u7684\u5be6\u7528\u7a0b\u5e8f\uff0c\u4f46\u60a8\u53ef\u4ee5\u4f7f\u7528 [Striim \u7684\u67b6\u69cb\u8f49\u63db\u5be6\u7528\u7a0b\u5e8f](https://striim.com/docs/platform/en/using-the-schema-conversion-utility.html) \u6216 [ora2pg](https://cloud.google.com/community/tutorials/migrate-oracle-postgres-using-ora2pg?hl=zh-cn) \u7b49\u958b\u6e90\u5be6\u7528\u7a0b\u5e8f\u3002\n### \u5728\u521d\u59cb\u52a0\u8f09\u671f\u9593\u7dad\u8b77\u5916\u9375\u5728\u521d\u59cb\u52a0\u8f09\u968e\u6bb5\uff0c\u8acb\u6ce8\u610f\u5c0d\u5916\u9375\u7684\u8655\u7406\u65b9\u5f0f\u3002\u5916\u9375\u5728\u95dc\u4fc2\u578b\u6578\u64da\u5eab\u4e2d\u7684\u8868\u4e4b\u9593\u5efa\u7acb\u95dc\u4fc2\u3002\u5728\u76ee\u6a19\u6578\u64da\u5eab\u4e2d\u7121\u5e8f\u5275\u5efa\u548c\u63d2\u5165\u5916\u9375\u53ef\u80fd\u6703\u7834\u58de\u5169\u500b\u8868\u4e4b\u9593\u7684\u95dc\u4fc2\u3002\u5982\u679c\u5169\u500b\u6578\u64da\u5eab\u4e4b\u9593\u7684\u5b8c\u6574\u6027\u88ab\u7834\u89e3\uff0c\u5247\u53ef\u80fd\u6703\u51fa\u73fe\u932f\u8aa4\u3002\u56e0\u6b64\uff0c\u8acb\u52d9\u5fc5\u5728\u672c\u90e8\u5206\u5f8c\u9762\u7684\u67b6\u69cb\u5c0e\u51fa\u671f\u9593\u5c07\u6240\u6709\u5916\u9375\u8072\u660e\u8f38\u51fa\u5230\u55ae\u7368\u7684\u6587\u4ef6\u4e2d\u3002\n\u5728 CDC \u6d41\u6c34\u7dda\u4e2d\u6301\u7e8c\u8907\u88fd\u671f\u9593\uff0c\u6e90\u6578\u64da\u5eab\u4e8b\u4ef6\u6703\u6309\u7167\u767c\u751f\u7684\u9806\u5e8f\u50b3\u64ad\u5230\u76ee\u6a19\u6578\u64da\u5eab\u3002\u5982\u679c\u60a8\u5728\u4f86\u6e90\u4e0a\u6b63\u78ba\u7dad\u8b77\u5916\u9375\uff0c\u5247\u5916\u9375\u64cd\u4f5c\u6703\u6309\u76f8\u540c\u9806\u5e8f\u5f9e\u6e90\u6578\u64da\u5eab\u8907\u88fd\u5230\u76ee\u6a19\u6578\u64da\u5eab\u3002\n\u76f8\u6bd4\u4e4b\u4e0b\uff0c\u521d\u59cb\u52a0\u8f09\u6d41\u6c34\u7dda\u9ed8\u8a8d\u6309\u5b57\u6bcd\u9806\u5e8f\u52a0\u8f09\u60a8\u7684\u8868\u3002\u5982\u679c\u60a8\u672a\u5728\u521d\u59cb\u52a0\u8f09\u4e4b\u524d\u505c\u7528\u5916\u9375\uff0c\u5247\u6703\u51fa\u73fe\u5916\u9375\u9055\u898f\u932f\u8aa4\u3002\u5982\u9700\u5728\u521d\u59cb\u52a0\u8f09\u671f\u9593\u5c07\u6578\u64da\u5f9e\u6e90\u6578\u64da\u5eab\u8868\u8907\u88fd\u5230 Cloud SQL for PostgreSQL \u4e0a\u7684\u76ee\u6a19\u8868\uff0c\u60a8\u5fc5\u9808\u505c\u7528\u8868\u7684\u5916\u9375\u9650\u5236\u689d\u4ef6\u3002\u5426\u5247\uff0c\u5728\u8907\u88fd\u904e\u7a0b\u4e2d\uff0c\u53ef\u80fd\u6703\u9055\u53cd\u9650\u5236\u689d\u4ef6\u3002\n\u5f9e 2021 \u5e74 6 \u6708\u958b\u59cb\uff0cCloud SQL for PostgreSQL \u4e0d\u518d\u652f\u6301\u505c\u7528\u5916\u9375\u9650\u5236\u689d\u4ef6\u7684\u914d\u7f6e\u9078\u9805\u3002\n\u8981\u8655\u7406\u5916\u9375\u9650\u5236\u689d\u4ef6\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a- \u5728\u67b6\u69cb\u5c0e\u51fa\u671f\u9593\uff0c\u5c07\u6240\u6709\u5916\u9375\u8072\u660e\u8f38\u51fa\u5230\u55ae\u7368\u7684\u6587\u4ef6\u4e2d\u3002\n- \u5728 Cloud SQL for PostgreSQL \u6578\u64da\u5eab\u4e2d\u5275\u5efa\u8868\u67b6\u69cb\uff0c\u7121\u9700\u5916\u9375\u9650\u5236\u689d\u4ef6\u3002\n- \u5b8c\u6210\u521d\u59cb\u6578\u64da\u8907\u88fd\u3002\n- \u5c0d\u9336\u61c9\u7528\u5916\u9375\u9650\u5236\u689d\u4ef6\u3002\n- \u5275\u5efa\u6301\u7e8c\u8907\u88fd\u6d41\u6c34\u7dda\u3002\n\u672c\u6559\u7a0b\u63d0\u4f9b\u4e86\u5169\u7a2e\u67b6\u69cb\u8f49\u63db\u9078\u9805\uff0c\u4ee5\u4e0b\u90e8\u5206\u5c07\u5c0d\u6b64\u9032\u884c\u89e3\u91cb\uff1a- [Striim \u67b6\u69cb\u8f49\u63db\u5be6\u7528\u7a0b\u5e8f](https://striim.com/docs/platform/en/using-the-schema-conversion-utility.html) \uff08\u63a8\u85a6\uff09\n- [Oracle \u5230 PostgreSQL \u6578\u64da\u5eab\u67b6\u69cb\u8f49\u63db\u5668 (Ora2Pg)](http://ora2pg.darold.net/documentation.html) \n### \u4f7f\u7528 Striim \u7684\u67b6\u69cb\u8f49\u63db\u5be6\u7528\u7a0b\u5e8f\u8f49\u63db\u67b6\u69cb\u4f7f\u7528 Striim \u7684\u67b6\u69cb\u8f49\u63db\u5be6\u7528\u7a0b\u5e8f\u6e96\u5099 Cloud SQL for PostgreSQL\uff0c\u4ee5\u5c07\u6578\u64da\u8207\u76ee\u6a19\u67b6\u69cb\u96c6\u6210\uff0c\u4e26\u5275\u5efa\u53cd\u6620\u6e90 Oracle \u6578\u64da\u5eab\u7684\u8868\u3002\nStriim \u67b6\u69cb\u8f49\u63db\u5de5\u5177\u6703\u5c07\u4ee5\u4e0b\u6e90\u5c0d\u8c61\u8f49\u63db\u7232\u7b49\u6548\u7684\u76ee\u6a19\u5c0d\u8c61\uff1a- \u8868\n- \u4e3b\u9375\n- \u6578\u64da\u985e\u578b\n- \u552f\u4e00\u7684\u9650\u5236\u689d\u4ef6\n- `NOT NULL`\u9650\u5236\u689d\u4ef6\n- \u5916\u9375\n\u4f7f\u7528 Striim \u7684\u67b6\u69cb\u8f49\u63db\u5be6\u7528\u7a0b\u5e8f\uff0c\u60a8\u53ef\u4ee5\u5206\u6790\u6e90\u6578\u64da\u5eab\u4e26\u751f\u6210 DDL \u8173\u672c\u4ee5\u5728\u76ee\u6a19\u6578\u64da\u5eab\u4e2d\u5275\u5efa\u7b49\u6548\u67b6\u69cb\u3002\n\u6211\u5011\u5efa\u8b70\u60a8\u4f7f\u7528\u751f\u6210\u7684 DDL \u8173\u672c\u5728\u76ee\u6a19\u6578\u64da\u5eab\u4e2d\u624b\u52d5\u5275\u5efa\u67b6\u69cb\u3002\u6700\u7c21\u55ae\u7684\u65b9\u6cd5\u662f\u9078\u64c7\u4e00\u90e8\u5206\u8868\uff0c\u5c0e\u51fa\u67b6\u69cb\uff0c\u7136\u5f8c\u5c07\u67b6\u69cb\u5c0e\u5165\u76ee\u6a19 Cloud SQL for PostgreSQL \u6578\u64da\u5eab\u3002\n\u4ee5\u4e0b\u793a\u4f8b\u6f14\u793a\u77ad\u5982\u4f55\u4f7f\u7528 Striim \u7684\u67b6\u69cb\u8f49\u63db\u5be6\u7528\u7a0b\u5e8f\u5c0e\u5165\u67b6\u69cb\uff0c\u7232\u76ee\u6a19 Cloud SQL for PostgreSQL \u6578\u64da\u5eab\u5b8c\u6210\u521d\u59cb\u52a0\u8f09\uff1a- [\u6253\u958b\u8207 Striim \u5be6\u4f8b\u7684 SSH \u9023\u63a5](https://cloud.google.com/compute/docs/instances/connecting-to-instance?hl=zh-cn#console) \u3002\n- \u8f49\u5230 `/opt/striim` \u76ee\u9304\uff1a```\ncd /opt/striim\n```\n- \u5217\u51fa\u6240\u6709\u53c3\u6578\uff1a```\nbin/schemaConversionUtility.sh --help\n```\n- \u904b\u884c\u67b6\u69cb\u8f49\u63db\u5be6\u7528\u7a0b\u5e8f\u5e77\u5305\u542b\u9069\u5408\u60a8\u7528\u4f8b\u7684\u6a19\u8a8c\uff1a```\nbin/schemaConversionUtility.sh \\-s=oracle \\-d=SOURCE_DATABASE_CONNECTION_URL \\-u=SOURCE_DATABASE_USERNAME \\-p=SOURCE_DATABASE_PASSWORD \\-b=SOURCE_TABLES_TO_CONVERT \\-t=postgres \\-f=false\n```\u8acb\u66ff\u63db\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1aOracle \u6578\u64da\u5eab\u7684\u9023\u63a5\u7db2\u5740\uff0c\u4f8b\u5982`\"jdbc:oracle:thin:@12.123.123.12:1521/APPSPDB.WORLD\"`\u6216`\"jdbc:oracle:thin:@12.123.123.12:1521:XE\"`\n- \uff1a\u7528\u65bc\u9023\u63a5\u5230 Oracle \u6578\u64da\u5eab\u7684 Oracle \u7528\u6236\u540d\n- \uff1a\u7528\u65bc\u9023\u63a5\u5230 Oracle \u6578\u64da\u5eab\u7684 Oracle \u5bc6\u78bc\n- \uff1a\u6e90\u6578\u64da\u5eab\u4e2d\u7528\u65bc\u8f49\u63db\u67b6\u69cb\u7684\u8868\u540d\u7a31\n\u8acb\u52d9\u5fc5\u4f7f\u7528 `-f=false` \u53c3\u6578\u3002\u6b64\u53c3\u6578\u5c07\u5916\u9375\u8072\u660e\u5c0e\u51fa\u5230\u55ae\u7368\u7684\u6587\u4ef6\u3002\u8f38\u51fa\u6587\u4ef6\u593e\u53ef\u80fd\u5305\u542b\u4ee5\u4e0b\u90e8\u5206\u6216\u5168\u90e8\u6587\u4ef6\u3002\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u9019\u4e9b\u6587\u4ef6\uff0c\u8acb\u53c3\u95b1 [Striim \u7684\u67b6\u69cb\u8f49\u63db\u5be6\u7528\u7a0b\u5e8f\u6587\u6a94](https://striim.com/docs/platform/en/using-the-schema-conversion-utility.html) \u3002| \u8f38\u51fa\u6587\u4ef6\u540d         | \u8aaa\u660e          |\n|:----------------------------------------------|:-----------------------------------------|\n| converted_tables.sql       | \u5305\u542b\u6240\u6709\u4e0d\u9700\u8981\u5f37\u5236\u8f49\u63db\u7684\u8f49\u63db\u8868   |\n| converted_tables_with_striim_intelligence.sql | \u5305\u542b\u5df2\u9032\u884c\u4e00\u4e9b\u5f37\u5236\u8f49\u63db\u800c\u7684\u5df2\u8f49\u63db\u7684\u6240\u6709\u8868 |\n| conversion_failed_tables.sql     | \u5305\u542b\u5617\u8a66\u8f49\u63db\u4f46\u672a\u7372\u53d6\u6620\u5c04\u7684\u8868    |\n| converted_foreignkey.sql      | \u5305\u542b\u6240\u6709\u5916\u9375\u9650\u5236\u689d\u4ef6\u8072\u660e     |\n| conversion_failed_foreignkey.sql    | \u5305\u542b\u6240\u6709\u5931\u6557\u7684\u5916\u9375\u8f49\u63db     |\n| conversion_report.txt       | \u5305\u542b\u67b6\u69cb\u8f49\u63db\u7684\u8a73\u7d30\u5831\u544a     |\u5728\u672c\u6559\u7a0b\u4e2d\uff0c\u60a8\u5c07\u4f7f\u7528 `converted_tables.sql` \u6587\u4ef6\u5728 Cloud SQL for PostgreSQL \u6578\u64da\u5eab\u4e2d\u5275\u5efa\u7b49\u6548\u8868\uff0c\u800c\u7121\u9700\u4efb\u4f55\u5916\u9375\u9650\u5236\u689d\u4ef6\u3002\u521d\u59cb\u8907\u88fd\u5f8c\uff0c\u53ef\u4f7f\u7528 `converted_foreignkey.sql` \u6587\u4ef6\u61c9\u7528\u5916\u9375\u9650\u5236\u689d\u4ef6\u3002\n### \u4f7f\u7528 Ora2Pg \u8f49\u63db\u67b6\u69cb\u5c07 Oracle \u8868\u67b6\u69cb\u8f49\u63db\u7232\u7b49\u6548 PostgreSQL \u67b6\u69cb\u7684\u53e6\u4e00\u500b\u9078\u9805\u662f Ora2Pg \u5be6\u7528\u7a0b\u5e8f\u3002\u60a8\u53ef\u4ee5\u5728\u55ae\u7368\u7684 Google Cloud \u865b\u64ec\u6a5f\u4e0a\u5b89\u88dd\u6b64\u5be6\u7528\u7a0b\u5e8f\u3002\nOra2Pg \u5be6\u7528\u7a0b\u5e8f\u8f49\u63db Oracle \u67b6\u69cb\uff0c\u4e26\u5c0e\u51fa\u5728 PostgreSQL \u6578\u64da\u5eab\u4e2d\u5275\u5efa\u7b49\u6548\u8868\u6240\u9700\u7684 DDL \u8a9e\u53e5\u3002\u9019\u4e9b DDL \u8a9e\u53e5\u5728\u540d\u7232 `output.sql` \u7684\u8f38\u51fa\u6587\u4ef6\u4e2d\u5c0e\u51fa\u3002\n\u5728\u67b6\u69cb\u5c0e\u51fa\u671f\u9593\uff0c\u8acb\u5728 Ora2Pg \u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528\u4ee5\u4e0b\u6a19\u8a18\uff0c\u5c07\u6240\u6709\u5916\u9375\u8072\u660e\u5c0e\u51fa\u4e26\u4fdd\u5b58\u5230\u55ae\u7368\u7684\u6587\u4ef6\u4e2d\uff1a\n`FILE_PER_FKEYS 1`\n\u9ed8\u8a8d\u60c5\u6cc1\u4e0b\uff0c\u7cfb\u7d71\u6703\u5c07\u5916\u9375\u5c0e\u51fa\u5230\u4e3b\u8f38\u51fa\u6587\u4ef6 ( `output.sql` )\u3002 \u7576\u5553\u7528 `FILE_PER_FKEYS` \u6a19\u8a8c ( `1` ) \u5f8c\uff0c\u7cfb\u7d71\u6703\u5c07\u5916\u9375\u5c0e\u51fa\u5230\u540d\u7232 `FKEYS_output.sql` \u7684\u55ae\u7368\u6587\u4ef6\u3002\n\u5728\u672c\u6559\u7a0b\u4e2d\uff0c\u60a8\u5c07\u4f7f\u7528 `output.sql` \u6587\u4ef6\u5728 Cloud SQL for PostgreSQL \u6578\u64da\u5eab\u4e2d\u5275\u5efa\u7b49\u6548\u8868\uff0c\u800c\u7121\u9700\u4efb\u4f55\u5916\u9375\u9650\u5236\u689d\u4ef6\u3002\u521d\u59cb\u8907\u88fd\u5f8c\uff0c\u53ef\u4f7f\u7528 `FKEY_output.sql` \u6587\u4ef6\u61c9\u7528\u5916\u9375\u9650\u5236\u689d\u4ef6\u3002## \u6e96\u5099 Cloud SQL for PostgreSQL \u5be6\u4f8b\u5982\u9700\u4f7f Striim \u80fd\u5920\u5c07\u6578\u64da\u5beb\u5165 Cloud SQL for PostgreSQL \u5be6\u4f8b\uff0c\u60a8\u9700\u8981\u5275\u5efa\u4e00\u500b Cloud SQL \u5be6\u4f8b\u3002\u60a8\u9084\u9700\u8981\u5275\u5efa\u6578\u64da\u5eab\u8868\u4ee5\u53ca Striim \u5411\u5176\u5beb\u5165\u6578\u64da\u7684\u67b6\u69cb\uff1a- \u5728 Cloud Shell \u4e2d\uff0c [\u5275\u5efa Cloud SQL for PostgreSQL \u5be6\u4f8b](https://cloud.google.com/sql/docs/postgres/create-instance?hl=zh-cn#gcloud) \u3002\u6211\u5011\u5efa\u8b70\u60a8\u5c07 Cloud SQL \u914d\u7f6e\u7232\u4f7f\u7528 [\u5c08\u7528 IP \u5730\u5740](https://cloud.google.com/sql/docs/postgres/private-ip?hl=zh-cn) \u3002\u4f7f\u7528 [--network \u53c3\u6578](https://cloud.google.com/sql/docs/postgres/configure-private-ip?hl=zh-cn) \u914d\u7f6e\u6b64\u5730\u5740\uff1a```\n$INSTANCE_NAME=INSTANCE_NAME\ngcloud beta sql instances create INSTANCE_NAME \\\n --database-version=POSTGRES_12 \\\n --network=NETWORK \\\n --cpu=NUMBER_CPUS \\\n --memory=MEMORY_SIZE \\\n --region=REGION\n```\u8acb\u66ff\u63db\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1a\u5be6\u4f8b\u540d\u7a31\n- \uff1a\u60a8\u7528\u65bc\u6b64\u5be6\u4f8b\u7684 VPC \u7db2\u7d61\u7684\u540d\u7a31\n- \uff1a\u5be6\u4f8b\u4e2d\u7684 vCPU \u6578\u91cf\n- \uff1a\u5be6\u4f8b\u7684\u5167\u5b58\u91cf\u3002\u4f8b\u5982\uff0c3072MiB \u6216 9GiB\u3002\u5982\u679c\u60a8\u672a\u6307\u5b9a\u55ae\u4f4d\uff0c\u5247\u7cfb\u7d71\u6703\u5047\u5b9a\u7232 GiB\u3002\n- \uff1a\u60a8\u5728\u5176\u4e2d\u5275\u5efa\u4e86 Cloud Storage \u5b58\u5132\u6876\u7684\u5730\u5340\n- \u5728 Cloud SQL \u5be6\u4f8b\u4e0a [\u5275\u5efa\u7528\u6236\u540d\u548c\u5bc6\u78bc](https://cloud.google.com/sql/docs/postgres/create-manage-users?hl=zh-cn#creating) \uff1a```\nCLOUD_SQL_USERNAME=CLOUD_SQL_USERNAMEgcloud sql users create $CLOUD_SQL_USERNAME \\\u00a0 --instance=$INSTANCE_NAME \\\u00a0 --password=CLOUD_SQL_PASSWORD\n```\u8acb\u66ff\u63db\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1a\u60a8\u7684 Cloud SQL \u5be6\u4f8b\u7684\u7528\u6236\u540d\n- \uff1aCloud SQL \u7528\u6236\u540d\u7684\u5bc6\u78bc\n\u6b64\u7528\u6236\u88ab\u6388\u4e88 PostgreSQL \u8868\u7684\u6240\u6709\u6b0a\u3002Striim \u9084\u6703\u4f7f\u7528\u6b64\u7528\u6236\u7684\u6191\u64da\u9023\u63a5\u5230 Cloud SQL for PostgreSQL \u6578\u64da\u5eab\u3002\u5728 [\u67b6\u69cb\u8f49\u63db\u6b65\u9a5f](#convert_the_schema_using_striims_schema_conversion_utility) \u4e2d\u5c0e\u51fa\u7684\u67b6\u69cb\u6587\u4ef6\u53ef\u80fd\u5177\u6709\u6388\u4e88\u7528\u6236\u6240\u6709\u6b0a\u7684 DDL \u8a9e\u53e5\uff0c\u5982\u4ee5\u4e0b\u793a\u4f8b\u6240\u793a\uff1a```\nCREATE SCHEMA <SCHEMA_NAME>;\nALTER SCHEMA <SCHEMA_NAME> OWNER TO <USER>;\n```\u60a8\u53ef\u80fd\u9700\u8981\u5c07 `SCHEMA_NAME` \u66ff\u63db\u7232 `CLOUD_SQL_SCHEMA` \uff0c\u5c07 `USER` \u66ff\u63db\u7232\u4e4b\u524d\u5275\u5efa\u7684 `CLOUD_SQL_USERNAME` \u3002\n- \u5275\u5efa PostgreSQL \u6578\u64da\u5eab```\nCLOUD_SQL_DATABASE_NAME=CLOUD_SQL_DATABASE_NAMEgcloud sql databases create $CLOUD_SQL_DATABASE_NAME \\\u00a0 --instance=$INSTANCE_NAME\n```\u8acb\u66ff\u63db\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1aPostgreSQL \u6578\u64da\u5eab\u540d\u7a31\n- \u914d\u7f6e Cloud SQL for PostgreSQL \u6578\u64da\u5eab\uff0c\u4ee5\u5141\u8a31\u5f9e Striim \u5be6\u4f8b\u8a2a\u554f\u3002\u9023\u63a5\u65b9\u6848\u53d6\u6c7a\u65bc\u60a8\u662f\u5426\u5c07 Cloud SQL \u5be6\u4f8b\u914d\u7f6e\u7232\u4f7f\u7528\u516c\u5171\u6216\u5c08\u7528 IP \u5730\u5740\u3002- \u5982\u679c\u60a8\u914d\u7f6e\u4e86\u516c\u5171 IP \u5730\u5740\uff0c\u8acb [\u5c07 Striim \u7684\u5be6\u4f8b IP \u5730\u5740\u6dfb\u52a0\u7232 Cloud SQL \u5be6\u4f8b\u4e0a\u7684\u6388\u6b0a\u5730\u5740](https://cloud.google.com/sql/docs/mysql/configure-ip?hl=zh-cn#add) \u3002\u4ee5\u4e0b\u5c4f\u5e55\u622a\u5716\u986f\u793a\u77ad\u5982\u4f55\u901a\u904e Google Cloud Console \u57f7\u884c\u6b64\u64cd\u4f5c\uff1a \n- \u5982\u679c\u60a8\u914d\u7f6e\u4e86 [\u5c08\u7528 IP \u5730\u5740](https://cloud.google.com/sql/docs/postgres/private-ip?hl=zh-cn) \uff0c\u5247\u53ef\u7528\u7684 [\u9023\u63a5\u65b9\u6848](https://cloud.google.com/sql/docs/postgres/configure-private-ip?hl=zh-cn#connecting_to_an_instance_using_its_private_ip) \u53d6\u6c7a\u65bc Cloud SQL \u5be6\u4f8b\u548c Striim \u5be6\u4f8b\u662f\u5426\u4f4d\u65bc\u540c\u4e00 VPC \u7db2\u7d61\u4e2d\u3002- \u5982\u679c\u60a8\u7684 Striim \u5be6\u4f8b\u8207 Cloud SQL \u5be6\u4f8b\u4f4d\u65bc\u540c\u4e00 VPC \u7db2\u7d61\u4e2d\uff0c\u5247\u8a72 Striim \u5be6\u4f8b\u53ef\u4ee5\u8207 Cloud SQL \u5be6\u4f8b\u5efa\u7acb\u9023\u63a5\u3002\u4ee5\u4e0b\u5c4f\u5e55\u622a\u5716\u986f\u793a Cloud SQL \u5be6\u4f8b\u5df2\u8207\u9ed8\u8a8d VPC \u7db2\u7d61\u76f8\u95dc\u806f\u3002\u5982\u679c\u9084\u5728\u9ed8\u8a8d VPC \u7db2\u7d61\u4e0a\u5275\u5efa\u4e86 Striim \u5be6\u4f8b\uff0c\u5247\u8a72\u5be6\u4f8b\u53ef\u4ee5\u8207 Cloud SQL \u5be6\u4f8b\u5efa\u7acb\u79c1\u5bc6\u9023\u63a5\u3002 \n- \u5982\u679c\u60a8\u7684 Striim \u5be6\u4f8b\u8207 Cloud SQL \u5be6\u4f8b\u4f4d\u65bc\u4e0d\u540c\u7684 VPC \u7db2\u7d61\u4e0a\uff0c\u8acb\u5728 Striim \u5be6\u4f8b\u7684 VPC \u7db2\u7d61\u4e0a [\u914d\u7f6e\u5c08\u7528\u670d\u52d9\u8a2a\u554f\u901a\u9053](https://cloud.google.com/sql/docs/postgres/configure-private-services-access?hl=zh-cn) \u3002\n- \u5728 Cloud SQL for PostgreSQL \u6578\u64da\u5eab\u4e2d\u5275\u5efa\u7121\u5916\u9375\u9650\u5236\u689d\u4ef6\u7684\u8868\u67b6\u69cb\u3002- \u5982\u9700\u5728 [\u67b6\u69cb\u8f49\u63db\u6b65\u9a5f](#convert_the_schema_using_striims_schema_conversion_utility) \u4e2d\u5c0e\u51fa `output.sql` \uff0c\u8acb\u4f7f\u7528 `output.sql` \u6587\u4ef6\u5275\u5efa\u67b6\u69cb\u3002\n- \u5982\u9700\u5728\u67b6\u69cb\u8f49\u63db\u6b65\u9a5f\u4e2d\u5c0e\u51fa `converted_tables.sql` \uff0c\u8acb\u4f7f\u7528 `converted_tables.sql` \u6587\u4ef6\u5275\u5efa\u67b6\u69cb\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u8207 Cloud SQL for PostgreSQL \u5be6\u4f8b\u9023\u63a5\u7684 PostgreSQL \u5ba2\u6236\u7aef\u904b\u884c\u4efb\u4e00\u8173\u672c\u3002\u4f46\u662f\uff0c\u6211\u5011\u5efa\u8b70\u60a8\u4f7f\u7528\u4e4b\u524d\u5728 Striim \u5be6\u4f8b\u4e0a\u5b89\u88dd\u7684 PostgreSQL \u5ba2\u6236\u7aef\u3002\n- [\u4f7f\u7528 Striim \u5be6\u4f8b\u6253\u958b SSH \u6703\u8a71](https://cloud.google.com/compute/docs/instances/connecting-to-instance?hl=zh-cn#console) \u3002\n- \u5275\u5efa\u67b6\u69cb\uff1a```\npsql -h HOSTNAME -p CLOUD_SQL_PORT -d CLOUD_SQL_DATABASE_NAME -U CLOUD_SQL_USERNAME -f PATH_TO_MAIN_SQL_FILE\n```\u8acb\u66ff\u63db\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1aCloud SQL \u5be6\u4f8b\u7684 IP \u5730\u5740\n- \uff1a\u8981\u9023\u63a5\u7684 Cloud SQL \u5be6\u4f8b\u7684\u7aef\u53e3 - \u9ed8\u8a8d\u60c5\u6cc1\u4e0b\uff0c\u6b64\u7aef\u53e3\u7232`5432`\n- \uff1aStriim \u5be6\u4f8b\u4e0a\u7684\u4e3b\u8173\u672c\u8def\u5f91\n\u4f8b\u5982\uff1a`psql -h 12.123.123.123 -d testdb -U hr -p 5432 -f output.sql` **\u6ce8\u610f** \uff1a\u5982\u679c\u60a8\u770b\u5230\u4ee5\u4e0b\u932f\u8aa4\u6d88\u606f\uff1a\u201cSCRAM \u8eab\u4efd\u9a57\u8b49\u9700\u8981\u4f7f\u7528 libpq 10 \u7248\u6216\u66f4\u9ad8\u7248\u672c\u201d\uff0c\u8acb\u5f9e\u5b98\u65b9 [PostgreSQL \u4e0b\u8f09](https://www.postgresql.org/download/) \u624b\u52d5\u91cd\u65b0\u5b89\u88dd PostgreSQL\u3002\n- \u9a57\u8b49\u8868\u662f\u5426\u5df2\u5275\u5efa\uff1a- \u9023\u63a5\u5230 Cloud SQL for PostgreSQL \u6578\u64da\u5eab\uff1a```\npsql -h HOSTNAME -p 5432 -d CLOUD_SQL_DATABASE_NAME -UCLOUD_SQL_USERNAME\n```\n- \u5217\u51fa\u6b64\u6578\u64da\u5eab\u4e2d\u7684\u8868\uff1a```\n\\dt\n```\u8f38\u51fa\u662f\u4e0a\u4e00\u6b65\u4e2d\u5275\u5efa\u7684\u8868\u67b6\u69cb\u8f49\u63db\u8173\u672c\u7684\u8868\u5217\u8868\u3002\n- \u5728 Cloud SQL for PostgreSQL \u6578\u64da\u5eab\u4e0a [\u5275\u5efa\u6aa2\u67e5\u9ede\u8868](https://www.striim.com/docs/platform/en/database-writer.html#UUID-7f411461-8c9b-3a93-08a8-d8fedea7fad4) \uff1a- \u9023\u63a5\u5230 Cloud SQL for PostgreSQL \u6578\u64da\u5eab\uff1a```\npsql -h HOSTNAME -p 5432 -d CLOUD_SQL_DATABASE_NAME -UCLOUD_SQL_USERNAME\n```\n- \u5275\u5efa\u8868\uff1a```\nCREATE TABLE chkpoint (id character varying(100) primary key,sourceposition bytea,pendingddl numeric(1),ddl text);\n```Striim \u9700\u8981\u6b64\u8868\u5728\u6301\u7e8c\u8907\u88fd\u904e\u7a0b\u4e2d\u7dad\u8b77\u6aa2\u67e5\u9ede\u3002## \u5c07 Oracle \u6578\u64da\u5eab\u52a0\u8f09\u5230 Cloud SQL for PostgreSQL \u6578\u64da\u5eab\u672c\u90e8\u5206\u4ecb\u7d39\u5982\u4f55\u5c07 Oracle \u6578\u64da\u5eab\u4e00\u6b21\u6027\u521d\u59cb\u8907\u88fd\u5230 Cloud SQL for PostgreSQL \u6578\u64da\u5eab\u3002\n### \u901a\u904e Striim \u8207 Oracle \u5efa\u7acb\u9023\u63a5\u6309\u7167 [\u5728 Google Cloud \u4e2d\u904b\u884c Striim](https://www.striim.com/docs/platform/en/running-striim-in-the-google-cloud-platform.html) \u4e2d\u7684\u6307\u5c0e\u64cd\u4f5c\u3002\u5c0d\u65bc\u521d\u59cb\u52a0\u8f09\uff0c\u8acb\u4f7f\u7528 [Striim Database Reader \u9069\u914d\u5668](https://www.striim.com/docs/platform/en/oracle-database-cdc.html#UUID-4c87f956-0cd8-1c7d-407d-703c8822dd74) \u5f9e Striim \u9023\u63a5\u5230 Oracle\u3002\u60a8\u9084\u53ef\u4ee5\u4f7f\u7528 [Striim \u7684 CDC \u56ae\u5c0e](https://www.striim.com/blog/striim-3-6-change-data-capture-wizards/) \u3002- \u5728 Striim Database Reader \u9069\u914d\u5668\u4e2d\uff0c\u8f49\u5230 **\u4f86\u6e90** \uff0c\u7136\u5f8c\u641c\u7d22\u4e26\u9078\u64c7\u5217\u8868\u4e2d\u7684 **Database** \u3002\n- \u5728 **Database** \u7a97\u53e3\u4e2d\u8a2d\u7f6e\u4ee5\u4e0b\u5c6c\u6027\uff1a- **\u540d\u7a31** \uff1a\u6a19\u8b58\u9077\u79fb\u6d41\u6c34\u7dda\u7684\u6b64\u7d44\u4ef6\u3002\n- **\u9069\u914d\u5668** \uff1a`DatabaseReader`\n- **\u9023\u63a5\u7db2\u5740** \uff1a\u8f38\u5165\u9023\u63a5\u5230 Oracle \u6578\u64da\u5eab\u7684\u552f\u4e00\u5b57\u7b26\u4e32\uff1a```\njdbc:oracle:thin:@HOSTNAME:ORACLE_PORT:SID\n```\u6216```\njdbc:oracle:thin:@HOSTNAME:ORACLE_PORT/PDB_OR_CDB_SERVICE_NAME\n```\u8acb\u66ff\u63db\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1aOracle \u6578\u64da\u5eab\u7aef\u53e3\uff08\u9ed8\u8a8d\u7232`1521`\uff09\n- \uff1aOracle \u6578\u64da\u5eab SID\n- \uff1aOracle PDB \u6216 CDB \u670d\u52d9\u540d\u7a31\uff1a\u5982\u679c\u60a8\u7684\u8868\u4f4d\u65bc PDB \u4e2d\uff0c\u8acb\u4f7f\u7528`PDB_SERVICE_NAME`\uff1b\u5982\u679c\u5b83\u5011\u4f4d\u65bc CDB \u4e2d\uff0c\u8acb\u4f7f\u7528`CDB_SERVICE_NAME`\u3002\n\u60a8\u53ef\u4ee5\u5728\u4ee5\u4e0b\u4f4d\u7f6e\u627e\u5230\u7aef\u53e3\u548c\u670d\u52d9\u540d\u7a31\uff1aOracle \u5be6\u4f8b\u4e0a `$ORACLE_HOME/network/admin/tnsnames.ora` \u7684 `tnsnames.ora` \u6587\u4ef6\u3002\n- **\u7528\u6236\u540d** \u548c **\u5bc6\u78bc** \uff1a\u4f7f\u7528\u60a8\u5728\u524d\u63d0\u689d\u4ef6\u6b65\u9a5f\u4e2d\u5275\u5efa\u7684 Oracle \u7528\u6236\uff08 `c\n##striim` \u7528\u6236\uff09\u3002Striim \u4f7f\u7528\u6b64\u7528\u6236\u540d\u548c\u5bc6\u78bc\u9023\u63a5\u5230\u60a8\u7684 Oracle \u6578\u64da\u5eab\u4e26\u8b80\u53d6\u8868\u3002\n- **\u8868** \uff1a\u5c0d\u65bc Oracle\uff0cDatabase Reader \u9084\u9700\u8981\u4e00\u500b\u8981\u8907\u88fd\u7684\u8868\u540d\u7a31\u7684\u5217\u8868\u3002\u6b64\u5c6c\u6027\u5728 **\u986f\u793a\u53ef\u9078\u5c6c\u6027** \u4e0b\u7684\u201c\u8868\u683c\u201d\u5b57\u6bb5\u4e2d\u6307\u5b9a\u3002\u6b64\u5c6c\u6027\u7684\u683c\u5f0f\u5982\u4e0b\uff1a```\nORACLE_SCHEMA.ORACLE_TABLE_NAME\n```\u8acb\u66ff\u63db\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1aOracle \u67b6\u69cb\u540d\u7a31\n- \uff1a\u8a72\u67b6\u69cb\u4e2d\u7684 Oracle \u8868\u540d\u7a31\n\u60a8\u9084\u53ef\u4ee5\u5c07\u591a\u500b\u8868\u548c\u5177\u9ad4\u5316\u8996\u5716\u6307\u5b9a\u7232\u4ee5\u82f1\u6587\u5206\u865f\u5206\u9694\u7684\u5217\u8868\uff0c\u6216\u4f7f\u7528\u4ee5\u4e0b\u901a\u914d\u7b26\uff1a`%` \uff1a\u4efb\u4f55\u5b57\u7b26\u5e8f\u5217`_` \uff1a\u4efb\u4f55\u55ae\u500b\u5b57\u7b26\u4f8b\u5982\uff0c `HR.%` \u6703\u8b80\u53d6\u4eba\u529b\u8cc7\u6e90\u67b6\u69cb\u4e2d\u7684\u6240\u6709\u8868\u3002\u81f3\u5c11\u6709\u4e00\u500b\u8868\u5fc5\u9808\u8207\u901a\u914d\u7b26\u5339\u914d\u3002\u5426\u5247\uff0cDatabase Reader \u6703\u5931\u6557\uff0c\u4e26\u986f\u793a\u4ee5\u4e0b\u932f\u8aa4\uff1a`Could not find tables specified in the database` **\u6ce8\u610f** \uff1a\u5c0d\u65bc\u521d\u59cb\u958b\u767c\uff0c\u6211\u5011\u5efa\u8b70\u50c5\u4f7f\u7528\u4e00\u500b\u8868\u9032\u884c\u6e2c\u8a66\u3002- **Quilce On IL Completion** \uff1a\u5c07\u6b64\u5b57\u6bb5\u5207\u63db\u7232\u7da0\u8272\uff0c\u65b9\u6cd5\u662f\u5728\u521d\u59cb\u52a0\u8f09\u5b8c\u6210\u5f8c\u5c07\u5176\u6ed1\u52d5\u5230\u53f3\u5074\u4ee5\u66ab\u505c\u6d41\u6c34\u7dda\u3002\n- **\u8f38\u51fa\u81f3** \uff1a\u7232\u6b64\u9069\u914d\u5668\u7684\u8f38\u51fa\u547d\u540d\u3002\u4f7f\u7528\u5340\u5206\u5927\u5c0f\u5beb\u7684\u5b57\u7b26\u4e32\uff0c\u4e0d\u5305\u542b\u7279\u6b8a\u5b57\u7b26\u6216\u7a7a\u683c\u3002\n- \u9ede\u64ca **\u4fdd\u5b58** \u3002\u9069\u914d\u5668\u5c6c\u6027\u986f\u793a\u4ee5\u4e0b\u5167\u5bb9\uff1a \n### \u6e2c\u8a66\u9023\u63a5\u73fe\u5728\u60a8\u5df2\u5f9e Striim \u9023\u63a5\u5230 Oracle\uff0c\u8acb\u6e2c\u8a66\u9023\u63a5\u3002- \u9ede\u64ca **\u5df2\u5275\u5efa** \u4e0b\u62c9\u5217\u8868\u4ee5\u6e2c\u8a66 Striim \u8207 Oracle \u6578\u64da\u5eab\u7684\u9023\u63a5\u3002\n- \u9ede\u64ca **\u90e8\u7f72\u61c9\u7528** \u3002\n- \u9078\u64c7\u6b64\u9069\u914d\u5668\u7684\u8f38\u51fa\uff0c\u7136\u5f8c\u9ede\u64ca **\u9810\u89bd** \uff0c\u4ee5\u5728 Striim \u5f9e\u4f86\u6e90\u8b80\u53d6\u6578\u64da\u6642\u5be6\u6642\u986f\u793a\u8a72\u6578\u64da\u3002 \n- \u9ede\u64ca **\u5df2\u90e8\u7f72** \u4e0b\u62c9\u5217\u8868\uff0c\u7136\u5f8c\u9ede\u64ca **\u5553\u52d5\u61c9\u7528** \u3002\n- \uff08\u53ef\u9078\uff09\u9ede\u64ca **\u5df2\u90e8\u7f72** \u4e0b\u62c9\u5217\u8868\uff0c\u7136\u5f8c\u9ede\u64ca **\u53d6\u6d88\u90e8\u7f72\u61c9\u7528** \u4ee5\u4fee\u5fa9\u767c\u751f\u7684\u4efb\u4f55\u932f\u8aa4\u3002\n- \uff08\u53ef\u9078\uff09\u4fee\u5fa9\u6240\u6709\u932f\u8aa4\u5f8c\uff0c\u9ede\u64ca **\u6062\u5fa9\u61c9\u7528** \u4ee5\u91cd\u5553\u61c9\u7528\u3002\n- \u9ede\u64ca **\u9ed8\u8a8d** \u90e8\u7f72\u7d44\u3002\n- \u9a57\u8b49\u5df2\u958b\u5553 **\u9a57\u8b49\u8868\u6620\u5c04** \u9078\u9805\uff0c\u7136\u5f8c\u9ede\u64ca **\u90e8\u7f72** \u3002\u9810\u89bd\u6578\u64da\u7a97\u683c\u548c\u6d41\u6c34\u7dda\u72c0\u614b\u5c07\u66f4\u6539\u7232 **Quiesced** \u3002\n\u5728\u672c\u6559\u7a0b\u4e2d\uff0c\u60a8\u5df2\u6210\u529f\u9a57\u8b49 Striim \u80fd\u5920\u8207 Oracle \u6578\u64da\u5eab\u5efa\u7acb\u9023\u63a5\u4e26\u8b80\u53d6\u5176\u4e2d\u7684\u6578\u64da\u3002## \u5c07 Cloud SQL for PostgreSQL \u6578\u64da\u5eab\u6dfb\u52a0\u7232\u76ee\u6a19\u5c0d\u65bc\u6b64\u9077\u79fb\uff0c\u60a8\u9700\u8981\u5c07\u6578\u64da\u5beb\u5165 Cloud SQL for PostgreSQL \u5be6\u4f8b Striim \u63d0\u4f9b\u4e86\u4e00\u7a2e\u540d\u7232 [Database Writer](https://www.striim.com/docs/en/database-writer.html) \u7684\u901a\u7528\u6578\u64da\u5eab\u5beb\u5165\u5668\u9069\u914d\u5668\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u5b83\u4f86\u9032\u884c\u9077\u79fb\u3002- \u5728 Striim Flow Designer \u4e2d\uff0c\u8f49\u5230 **\u76ee\u6a19** \u3002\u641c\u7d22\u4e26\u5f9e\u5217\u8868\u4e2d\u9078\u64c7 **Cloud SQL Postgres** \u3002\n- \u5c07 **Database Writer** \u62d6\u52d5\u5230\u6d41\u6c34\u7dda\u4e2d\u3002\n- \u8a2d\u7f6e\u4ee5\u4e0b\u5c6c\u6027\uff1a- **\u9069\u914d\u5668** \uff1a `DatabaseWriter`\n- **\u9023\u63a5\u7db2\u5740** \uff1a\u8f38\u5165\u552f\u4e00\u5b57\u7b26\u4e32\u4ee5\u8207 Cloud SQL \u5be6\u4f8b\u5efa\u7acb\u9023\u63a5\uff1a```\njdbc:postgresql://CLOUD_SQL_IP_ADDRESS:CLOUD_SQL_PORT/CLOUD_SQL_DATABASE_NAME?stringtype=unspecified\n```\u8acb\u66ff\u63db\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1aCloud SQL \u5be6\u4f8b\u7684 IP \u5730\u5740\n\u4f8b\u5982\uff1a```\njdbc:postgresql://12.123.12.12:5432/postgres?stringtype=unspecified\n```\n- **\u7528\u6236\u540d** \u548c **\u5bc6\u78bc** \uff1a\u8f38\u5165\u60a8\u4e4b\u524d\u5275\u5efa\u7684 Cloud SQL \u7528\u6236\u540d\u548c\u5bc6\u78bc\u3002\n- **\u8868** \uff1a\u5275\u5efa\u5f9e Oracle \u6578\u64da\u5eab\u8868\u540d\u7a31\u5230 Cloud SQL \u8868\u540d\u7a31\u7684\u6620\u5c04\u3002\u6307\u5b9a\u5c07\u54ea\u500b Oracle \u6578\u64da\u5eab\u8868\u5beb\u5165\u54ea\u500b Cloud SQL \u8868\u3002\u6b64\u6620\u5c04\u63a1\u7528\u4ee5\u4e0b\u683c\u5f0f\uff1a```\nORACLE_SCHEMA.ORACLE_TABLE_NAME,CLOUD_SQL_SCHEMA.CLOUD_SQL_TABLE_NAME\n```\u8acb\u66ff\u63db\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1aPostgreSQL \u67b6\u69cb\u540d\u7a31\n- \uff1aPostgreSQL \u8868\u540d\u7a31\n\u5982\u9700\u6620\u5c04\u591a\u500b\u8868\uff0c\u60a8\u53ef\u4ee5\u5728 **\u8868** \u5b57\u6bb5\u4e2d\u4f7f\u7528\u901a\u914d\u7b26\u7b26\u865f (%)\uff0c\u4f8b\u5982\uff1a```\nHR.%,hr.%\n```Database Writer \u7684\u5fc5\u586b\u5b57\u6bb5\u5df2\u5728\u4ee5\u4e0b\u5c4f\u5e55\u622a\u5716\u4e2d\u9032\u884c\u6a19\u8a18\uff1a \n### \u90e8\u7f72\u9077\u79fb\u6d41\u6c34\u7dda\u9077\u79fb\u6d41\u6c34\u7dda\u6e96\u5099\u5c31\u7dd2\u5f8c\uff0c\u5f9e Striim Flow Designer \u90e8\u7f72\u8a72\u6d41\u6c34\u7dda\u4e26\u5553\u52d5\u8a72\u61c9\u7528\u3002\u60a8\u9084\u53ef\u4ee5\u5be6\u6642\u9810\u89bd\u6b63\u5728\u8907\u88fd\u7684\u6578\u64da\u3002\u4f7f\u7528 [\u76e3\u63a7\u5831\u544a](https://www.striim.com/docs/en/using-monitor-reports.html) \u8ddf\u8e64\u8907\u88fd\u7684\u9032\u5ea6\u3002\u5982\u9700\u8ddf\u8e64\u9032\u5ea6\uff0c\u8acb\u9078\u64c7 **\u61c9\u7528\u9032\u5ea6** \u5716\u6a19\u3002\n - \u5728 Striim Flow Designer \u4e2d\uff0c\u90e8\u7f72\u9077\u79fb\u6d41\u6c34\u7dda\u3002\u9ede\u64ca **\u5df2\u5275\u5efa** \u4e0b\u62c9\u5217\u8868\uff0c\u7136\u5f8c\u9ede\u64ca **\u90e8\u7f72\u61c9\u7528** \u3002\u521d\u59cb\u52a0\u8f09\u5b8c\u6210\u5f8c\uff0c\u6d41\u6c34\u7dda\u72c0\u614b\u6703\u66f4\u6539\u7232 `Quiesced` \u3002\n- \u9ede\u64ca **\u53d6\u6d88\u90e8\u7f72\u61c9\u7528** \u4ee5\u56de\u6efe\u90e8\u7f72\u3002\n- \u901a\u904e\u6aa2\u67e5\u884c\u6578\u9a57\u8b49\u6578\u64da\u52a0\u8f09\u662f\u5426\u6210\u529f\uff1a```\nSELECT COUNT(*) FROM <TARGET CLOUD SQL TABLE>;\n```\u60a8\u61c9\u8a72\u6703\u770b\u5230\u975e\u96f6\u8f38\u51fa\u3002\u5982\u7232\u770b\u5230\uff0c\u5247\u6578\u64da\u52a0\u8f09\u5931\u6557\u3002\n\u5f9e Oracle \u6578\u64da\u5eab\u5230 Cloud SQL for PostgreSQL \u7684\u521d\u59cb\u6578\u64da\u52a0\u8f09\u662f\u539f\u5b50\u5316\u7684\u3002\u6574\u500b\u6578\u64da\u52a0\u8f09\u6210\u529f\u6216\u6574\u500b\u6578\u64da\u52a0\u8f09\u5931\u6557\u3002\u5982\u679c\u521d\u59cb\u52a0\u8f09\u5931\u6557\uff0c\u60a8\u5fc5\u9808 [\u518d\u6b21\u52a0\u8f09\u6578\u64da](#deploy-the-pipeline) \u3002## \u5728 Cloud SQL for PostgreSQL \u8868\u4e0a\u5553\u7528\u5916\u9375\u9650\u5236\u689d\u4ef6\u521d\u59cb\u52a0\u8f09\u5b8c\u6210\u5f8c\uff0c\u5728\u76ee\u6a19\u8868\u4e0a\u5553\u7528\u5916\u9375\u9650\u5236\u689d\u4ef6\u3002\u5c07\u6587\u4ef6\u8207\u60a8\u5728 [\u67b6\u69cb\u8f49\u63db](#convert_the_schema_using_striims_schema_conversion_utility) \u671f\u9593\u5275\u5efa\u7684\u5916\u9375\u8072\u660e\uff08 `FKEY_output.sql` \u6216 `converted_foreignkey.sql` \uff09\u642d\u914d\u4f7f\u7528\u3002- \u5728 Striim \u4e2d\uff0c [\u6253\u958b SSH \u6703\u8a71](https://cloud.google.com/compute/docs/instances/connecting-to-instance?hl=zh-cn#console) \u3002\n- \u5275\u5efa\u8868\u7684\u5916\u9375\u9650\u5236\u689d\u4ef6\uff1a```\npsql -h HOSTNAME -d CLOUD_SQL_DATABASE_NAME -U CLOUD_SQL_USERNAME -pCLOUD_SQL_PORT -f PATH_TO_FOREIGN_KEY_FILE\n```\u8acb\u66ff\u63db\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1aCloud SQL for PostgreSQL \u7528\u6236\u540d\n- \uff1aStriim \u5be6\u4f8b\u4e0a\u5177\u6709\u5916\u9375\u9650\u5236\u689d\u4ef6\u7684\u8173\u672c\u8def\u5f91\u4f8b\u5982\uff1a`psql -h 12.123.123.123 -d testdb -U hr -p 5432 -f output.sql`## \u5c07 Oracle \u6578\u64da\u5eab\u6301\u7e8c\u8907\u88fd\u5230 Cloud SQL for PostgreSQL\u5b8c\u6210\u521d\u59cb\u6578\u64da\u52a0\u8f09\u5f8c\uff0c\u5275\u5efa\u55ae\u7368\u7684\u6d41\u6c34\u7dda\u4ee5\u8907\u88fd\u5c0d Oracle \u6578\u64da\u5eab\u7684\u66f4\u6539\u3002\u53ea\u8981\u6d41\u6c34\u7dda\u4fdd\u6301\u904b\u884c\u72c0\u614b\uff0c\u6b64\u6d41\u6c34\u7dda\u5c31\u6703\u78ba\u4fdd\u6e90\u6578\u64da\u5eab\u8207\u76ee\u6a19\u6578\u64da\u5eab\u4fdd\u6301\u540c\u6b65\u3002\n### \u901a\u904e Striim \u8207 Oracle \u5efa\u7acb\u9023\u63a5\u5c0d\u65bc\u6301\u7e8c\u8907\u88fd\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 [Striim Oracle Reader \u9069\u914d\u5668](https://www.striim.com/docs/en/oracle-reader-properties.html) \u5f9e Striim \u9023\u63a5\u5230 Oracle \u6578\u64da\u5eab\u3002\u6b64 Striim \u9069\u914d\u5668\u53ef\u4ee5\u5f9e Oracle \u8b80\u53d6 CDC \u6578\u64da\u3002- \u5728 Striim Oracle Reader \u9069\u914d\u5668\u4e2d\uff0c\u5c0e\u822a\u5230 **\u4f86\u6e90** \u3002\n- \u641c\u7d22 **Oracle** \uff0c\u7136\u5f8c\u5f9e\u586b\u5145\u7684\u5217\u8868\u4e2d\u9078\u64c7 **Oracle CDC** \u3002\n- \u8a2d\u7f6e\u4ee5\u4e0b\u5c6c\u6027\uff1a- **\u9023\u63a5\u7db2\u5740** \uff1a```\nHOSTNAME:ORACLE_PORT/SID\n```\u6216```\nHOSTNAME:ORACLE_PORT/CDB_SERVICE_NAME\n```\u8acb\u66ff\u63db\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1aOracle \u7684 CDB \u670d\u52d9\u540d\u7a31\n\u9023\u63a5\u7db2\u5740\u662f\u7528\u65bc\u9023\u63a5\u5230 Oracle \u6578\u64da\u5eab\u7684\u552f\u4e00\u5b57\u7b26\u4e32\u3002\u8207\u7528\u65bc\u521d\u59cb\u52a0\u8f09\u7684 Database Reader \u9069\u914d\u5668\u4e0d\u540c\uff0c\u7121\u8ad6\u6578\u64da\u5eab\u8868\u5728 PDB \u9084\u662f CDB \u4e2d\uff0c\u60a8\u90fd\u53ef\u4ee5\u4f7f\u7528 CDB \u670d\u52d9\u540d\u7a31\u3002\u4f8b\u5982\uff1a `12.123.123.12:1521/ORCLCDB.WORLD` \u3002\n- **\u7528\u6236\u540d/\u5bc6\u78bc** \uff1a\u4f7f\u7528\u60a8\u5728\u524d\u63d0\u689d\u4ef6\u6b65\u9a5f\u4e2d\u5275\u5efa\u7684 Oracle \u7528\u6236\u540d ( `c\n##striim` user)\u3002\u6b64 Oracle \u7528\u6236\u5fc5\u9808\u5177\u6709\u8b80\u53d6\u8868\u7684\u6b0a\u9650\u3002\n- **\u8868** \uff1a\u60a8\u9084\u9700\u8981\u4e00\u500b\u8981\u8907\u88fd\u7684\u8868\u540d\u7a31\u7684\u5217\u8868\u3002\u7cfb\u7d71\u6703\u6839\u64da\u8868\u5728 CDB \u9084\u662f PDB \u4e2d\uff0c\u6309\u4ee5\u4e0b\u683c\u5f0f\u6307\u5b9a\u540d\u7a31\u3002\u5c0d\u65bc CDB \u8868\uff1a```\nORACLE_SCHEMA.ORACLE_TABLE_NAME\n```\u5c0d\u65bc PDB \u8868\uff1a```\nPDB_NAME.ORACLE_SCHEMA.ORACLE_TABLE_NAME\n```\u8acb\u66ff\u63db\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1aOracle PDB \u540d\u7a31\n\u6b64\u547d\u4ee4\u6703\u8907\u88fd\u60a8\u7684 CDB \u6216 PDB \u8868\u3002\u60a8\u53ef\u4ee5\u5728\u4f4d\u65bc Oracle \u5be6\u4f8b\u7684 `$ORACLE_HOME/network/admin/tnsnames.ora` \u4e0a\u7684 `tnsnames.ora` \u6587\u4ef6\u4e2d\u627e\u5230 `PDB_NAME` \u3002\u8acb\u6ce8\u610f\uff0c `PDB_NAME` \u548c `PDB_SERVICE_NAME` \u662f\u4e0d\u540c\u7684\u3002\u60a8\u5728\u672c\u90e8\u5206\u524d\u9762\u4f7f\u7528\u4e86 `PDB_SERVICE_NAME` \u3002\u67e5\u770b `tnsnames.ora` \u6587\u4ef6\u4ee5\u7372\u53d6 PDB \u540d\u7a31\uff1a```\nsudo su - oracle // Login as oracle usercat \u00a0ORACLE_HOME/network/admin/tnsnames.ora\n```\u4ee5\u4e0b\u662f `tnsnames.ora` \u6587\u4ef6\u4e2d\u7684 `PDB_NAME` ( `APPSPDB` ) \u793a\u4f8b\uff1a```\n APPSPDB =\n (DESCRIPTION =\n  (ADDRESS_LIST =\n  (ADDRESS = (PROTOCOL = TCP) (HOST = orainst) (PORT = 1521))\n  )\n  (CONNECT_DATA =\n  (SERVICE NAME = APPSPDB.WORLD)\n  )\n )\n```\u5982\u9700\u4ee5\u5217\u8868\u5f62\u5f0f\u6307\u5b9a\u591a\u500b\u8868\u548c\u5177\u9ad4\u5316\u8996\u5716\uff0c\u8acb\u4f7f\u7528\u82f1\u6587\u5206\u865f\u6216\u901a\u914d\u7b26\u5206\u9694\u8868\u540d\u7a31\u6216\u8996\u5716\u540d\u7a31\u3002\u81f3\u5c11\u6709\u4e00\u500b\u8868\u5fc5\u9808\u8207\u901a\u914d\u7b26\u5339\u914d\uff1b\u5426\u5247 Oracle Reader \u6703\u5931\u6557\uff0c\u4e26\u986f\u793a `Could not find tables specified in the database` \u932f\u8aa4\u3002 **\u6ce8\u610f** \uff1a\u6211\u5011\u5efa\u8b70\u60a8\u6700\u521d\u50c5\u4f7f\u7528\u4e00\u500b\u8868\u4f86\u6e2c\u8a66\u9023\u63a5\u3002\n- **\u5553\u52d5 SCN** \uff1a\u5c0d\u65bc\u6301\u7e8c\u6d41\u6c34\u7dda\uff0c\u60a8\u9700\u8981\u63d0\u4f9b Oracle \u6578\u64da\u5eab SCN\u3002Striim \u9700\u8981\u8a72\u670d\u52d9\u624d\u80fd\u958b\u59cb\u8907\u88fd\u6240\u6709\u4e8b\u52d9\u3002\u8f38\u5165\u60a8\u4e4b\u524d\u751f\u6210\u7684 SCN \u503c\u3002- **\u652f\u6301 PDB \u548c CDB** \uff1a\u60a8\u53ef\u4ee5\u4f7f\u7528 CDB \u6216 PDB\uff1b\u5c55\u958b **\u986f\u793a\u53ef\u9078\u5c6c\u6027** \uff0c\u7136\u5f8c\u5c07\u958b\u95dc\u5207\u63db\u5230\u53f3\u5074\u3002\n- **\u975c\u9ed8\u6a19\u8a18\u8868** \uff1a\u4f7f\u7528\u60a8\u4e4b\u524d\u5275\u5efa\u7684\u8868\u540d\u3002\u4ee5\u4e0b\u5c4f\u5e55\u622a\u5716\u6982\u8ff0\u4e86 Oracle Reader \u9069\u914d\u5668\u7684\u5fc5\u586b\u5b57\u6bb5\uff1a \n- **\u6e2c\u8a66\u9023\u63a5** \uff1a\u9ede\u64ca **\u6e2c\u8a66\u9023\u63a5** \u3002\u6e2c\u8a66\u6578\u64da\u5eab\u9023\u63a5\u9700\u8981\u9023\u63a5\u7db2\u5740\u3001\u7528\u6236\u540d\u548c\u5bc6\u78bc\u3002\u5982\u679c Striim \u6210\u529f\u5efa\u7acb\u9023\u63a5\uff0c\u7cfb\u7d71\u6703\u986f\u793a\u4e00\u500b\u7da0\u8272\u5c0d\u52fe\u6a19\u8a18\u3002\n- \u6e2c\u8a66 Striim \u8b80\u53d6 Oracle \u6578\u64da\u5eab\u8868\u7684\u80fd\u529b\uff1a- \u5728 Oracle Reader \u9069\u914d\u5668\u4e2d\uff0c\u9078\u64c7 **\u90e8\u7f72\u61c9\u7528** \u3002\n- \u9078\u64c7 **\u9ed8\u8a8d** \u90e8\u7f72\u7d44\u3002\n- \u9ede\u64ca **\u90e8\u7f72** \u3002\n- \u9ede\u64ca\u6b64\u9069\u914d\u5668\u7684\u6ce2\u6b21\uff08 **\u8f38\u51fa** \uff09\u5716\u6a19\u3002\u986f\u793a\u7684\u773c\u775b\uff08 **\u9810\u89bd\u7248** \uff09\u5716\u6a19\u7528\u65bc\u7576 Striim \u5f9e\u4f86\u6e90\u8b80\u53d6\u6578\u64da\u6642\u5be6\u6642\u9810\u89bd\u6578\u64da\u3002\n- \u9ede\u64ca **\u5df2\u90e8\u7f72** \u4e0b\u62c9\u5217\u8868\u4e2d\u7684 **\u5553\u52d5\u61c9\u7528** \u3002\u5982\u679c\u51fa\u73fe\u4efb\u4f55\u932f\u8aa4\uff0c\u8acb\u5f9e\u540c\u4e00\u4e0b\u62c9\u5217\u8868\u4e2d\u9078\u64c7 **\u53d6\u6d88\u90e8\u7f72\u61c9\u7528** \u4e26\u4fee\u5fa9\u932f\u8aa4\u3002\u4fee\u5fa9\u932f\u8aa4\u5f8c\uff0c\u9ede\u64ca **\u6062\u5fa9\u61c9\u7528** \u4ee5\u91cd\u5553\u61c9\u7528\u3002\u6d41\u6c34\u7dda\u5553\u52d5\u6642\uff0c\u6d41\u6c34\u7dda\u72c0\u614b\u5c07\u66f4\u65b0\u7232 **\u6b63\u5728\u904b\u884c** \u3002\u5c0d\u6e90\u8868\u6240\u505a\u7684\u4efb\u4f55\u65b0\u66f4\u6539\u90fd\u6703\u986f\u793a\u5728\u9810\u89bd\u7a97\u53e3\u4e2d\u3002\u7531\u65bc Oracle Reader \u9069\u914d\u5668\u4f7f\u7528 CDC\uff0c\u56e0\u6b64\u9810\u89bd\u6578\u64da\u7a97\u683c\u4e2d\u986f\u793a\u7684\u552f\u4e00\u8868\u66f4\u6539\u662f\u5728\u61c9\u7528\u5553\u52d5\u5f8c\u767c\u751f\u7684\u66f4\u6539\u3002 \n### \u9a57\u8b49\u5f9e Oracle \u8b80\u53d6 CDC \u6578\u64da\u7684\u80fd\u529b\u8981\u6e2c\u8a66\u9069\u914d\u5668\u80fd\u5426\u8b80\u53d6\u65b0\u66f4\u6539\uff0c\u8acb\u6309\u4ee5\u4e0b\u8aaa\u660e\u64cd\u4f5c\uff1a- \u4f7f\u7528 SQL \u8a9e\u53e5\u5728 Oracle \u6e90\u8868\u4e2d\u63d2\u5165\u65b0\u4e8b\u52d9\u3002\n- \u9a57\u8b49\u65b0\u4e8b\u52d9\u662f\u5426\u986f\u793a\u5728 Oracle Reader \u9069\u914d\u5668\u7684 **\u9810\u89bd\u6578\u64da** \u6a19\u7c64\u9801\u4e2d\u3002\n- \u505c\u6b62\u61c9\u7528\uff0c\u7136\u5f8c\u9ede\u64ca **\u53d6\u6d88\u90e8\u7f72** \u3002\u73fe\u5728\uff0c\u60a8\u53ef\u4ee5\u9032\u884c\u4e0b\u4e00\u6b65\u3002\n\u5230\u76ee\u524d\u7232\u6b62\uff0c\u60a8\u5c1a\u672a\u5411\u6d41\u6c34\u7dda\u6dfb\u52a0\u76ee\u6a19\u9069\u914d\u5668\u3002\u9664\u975e\u60a8\u6dfb\u52a0\u76ee\u6a19\u9069\u914d\u5668\uff0c\u5426\u5247\u7cfb\u7d71\u4e0d\u6703\u8907\u88fd\u4efb\u4f55\u6578\u64da\u3002\u5728\u4e0b\u4e00\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u6dfb\u52a0\u76ee\u6a19\u9069\u914d\u5668\u3002## \u5c07 Cloud SQL for PostgreSQL \u6578\u64da\u5eab\u6dfb\u52a0\u7232\u76ee\u6a19\u8981\u5c07\u6578\u64da\u5beb\u5165 Cloud SQL for PostgreSQL \u6578\u64da\u5eab\uff0c\u60a8\u9700\u8981\u5411\u6d41\u6c34\u7dda\u6dfb\u52a0 Database Writer \u9069\u914d\u5668\u3002\u5c0d\u65bc\u6301\u7e8c\u8907\u88fd\u6d41\u6c34\u7dda\uff0c\u8acb\u4f7f\u7528\u521d\u59cb\u52a0\u8f09\u6d41\u6c34\u7dda\u6642\u4f7f\u7528\u7684\u9069\u914d\u5668\u3002- \u5728 Striim Flow Designer \u4e2d\uff0c\u8f49\u5230 **\u76ee\u6a19** \uff0c\u641c\u7d22\u4e26\u5f9e\u5217\u8868\u4e2d\u9078\u64c7 **Cloud SQL Postgres** \u3002\n- \u5c07 **Database Writer** \u62d6\u52d5\u5230\u6d41\u6c34\u7dda\u4e2d\u3002\n- \u8a2d\u7f6e\u4ee5\u4e0b\u5c6c\u6027\uff1a- **\u9069\u914d\u5668** \uff1a `DatabaseWriter` .\n- **\u9023\u63a5\u7db2\u5740** \uff1a\u8f38\u5165\u8207 Cloud SQL \u5be6\u4f8b\u5efa\u7acb\u9023\u63a5\u7684\u9023\u63a5\u7db2\u5740\uff1a\n```\njdbc:postgresql://CLOUD_SQL_IP_ADDRESS:CLOUD_SQL_PORT/CLOUD_SQL_DATABASE_NAME?stringtype=unspecified\n```\u4f8b\u5982\uff1a```\njdbc:postgresql://12.123.12.12:5432/postgres?stringtype=unspecified\n```- **\u7528\u6236\u540d** \u548c **\u5bc6\u78bc** \uff1a\u8f38\u5165\u60a8\u4e4b\u524d\u5275\u5efa\u7684 Cloud SQL \u7528\u6236\u540d\u548c\u5bc6\u78bc\u3002\n- **\u8868** \uff1a\u5275\u5efa\u5f9e Oracle \u6578\u64da\u5eab\u8868\u540d\u7a31\u5230 Cloud SQL \u8868\u540d\u7a31\u7684\u6620\u5c04\u3002\u6307\u5b9a\u5c07\u54ea\u500b Oracle \u6578\u64da\u5eab\u8868\u5beb\u5165\u54ea\u500b Cloud SQL \u8868\u3002\u6b64\u6620\u5c04\u63a1\u7528\u4ee5\u4e0b\u683c\u5f0f\uff1a\n```\nORACLE_SCHEMA.ORACLE_TABLE_NAME,CLOUD_SQL_SCHEMA.CLOUD_SQL_TABLE_NAME\n```\u5982\u9700\u6620\u5c04\u591a\u500b\u8868\uff0c\u60a8\u53ef\u4ee5\u5728 **\u8868** \u5b57\u6bb5\u4e2d\u4f7f\u7528\u901a\u914d\u7b26\u7b26\u865f (%)\u3002\u4f8b\u5982\uff1a```\nHR.%,hr.%\n```\u9664\u4e86\u9019\u4e9b\u5c6c\u6027\u4e4b\u5916\uff0c\u60a8\u9084\u9700\u8981\u7232\u6301\u7e8c\u8907\u88fd\u6d41\u6c34\u7dda\u8a2d\u7f6e\u4ee5\u4e0b\u5c6c\u6027\uff1a\n- \u9ede\u64ca **\u986f\u793a\u53ef\u9078\u5c6c\u6027** \u3002\n- \u7232 **\u53ef\u5ffd\u7565\u7684\u7570\u5e38\u4ee3\u78bc** \u5b57\u6bb5\u9078\u64c7\u4ee5\u4e0b\u503c\uff1a```\n23505,NO_OP_UPDATE,NO_OP_DELETE\n```\u7531\u65bc\u60a8\u5f9e\u6b77\u53f2\u9ede\u5553\u52d5 CDC \u6d41\u6c34\u7dda\uff0c\u56e0\u6b64\u53ef\u80fd\u5b58\u5728\u91cd\u8907\u9805\u3002Striim \u4f7f\u7528\u5148\u524d\u53ef\u5ffd\u7565\u7684\u7570\u5e38\u4ee3\u78bc\u5c6c\u6027\u5c0d\u76ee\u6a19\u57f7\u884c\u53bb\u91cd\u8655\u7406\u3002\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u7570\u5e38\u4ee3\u78bc\uff0c\u8acb\u53c3\u95b1\u4e0b\u8868\uff1a| \u7570\u5e38\u4ee3\u78bc  | \u8a73\u7d30\u4fe1\u606f          |\n|:-------------|:-----------------------------------------------|\n| 23505  | \u91cd\u8907\u7684\u4e3b\u9375\u503c\u9055\u53cd\u552f\u4e00\u9650\u5236\u689d\u4ef6     |\n| NO_OP_UPDATE | \u7121\u6cd5\u66f4\u65b0\u76ee\u6a19\u4e2d\u7684\u884c\uff08\u901a\u5e38\u662f\u56e0\u7232\u6c92\u6709\u76f8\u61c9\u7684\u4e3b\u9375\uff09 |\n| NO_OP_DELETE | \u7121\u6cd5\u522a\u9664\u76ee\u6a19\u4e2d\u7684\u884c\uff08\u901a\u5e38\u662f\u56e0\u7232\u6c92\u6709\u76f8\u61c9\u7684\u4e3b\u9375\uff09 |\n- \u5728 **\u6aa2\u67e5\u9ede\u8868** \u5b57\u6bb5\u4e2d\u8f38\u5165 `chkpoint` \u3002Striim \u4f7f\u7528\u6b64\u8868\u4f86\u5b58\u5132\u8207\u6301\u7e8c\u8907\u88fd\u6d41\u6c34\u7dda\u7684\u6aa2\u67e5\u9ede\u95dc\u806f\u7684\u5143\u6578\u64da\u3002\n## \u5553\u7528\u6062\u5fa9\u548c\u52a0\u5bc6\u5728\u90e8\u7f72 CDC \u6d41\u6c34\u7dda\u4e4b\u524d\uff0c\u6211\u5011\u5f37\u70c8\u5efa\u8b70\u60a8\u5553\u7528\u6062\u5fa9\u529f\u80fd\u3002\u5982\u679c Striim \u61c9\u7528\u6216\u865b\u64ec\u6a5f\u767c\u751f\u6545\u969c\uff0c\u5553\u7528\u6062\u5fa9\u529f\u80fd\u6709\u52a9\u65bc\u78ba\u4fdd Striim \u53ef\u4ee5\u7e7c\u7e8c\u8655\u7406\u3002\u6b64\u6b65\u9a5f\u9084\u6709\u52a9\u65bc\u78ba\u4fdd\u7cbe\u78ba\u8655\u7406\u8a9e\u7fa9\u3002\u9019\u4e9b\u8a9e\u7fa9\u8ddf\u8e64\u6e90\u6578\u64da\u5eab\u4e0a\u7684\u6700\u5f8c\u4e00\u500b\u5df2\u77e5\u826f\u597d\u8b80\u53d6\u6aa2\u67e5\u9ede\u4ee5\u53ca\u76ee\u6a19\u6578\u64da\u5eab\u4e0a\u7684\u6700\u5f8c\u4e00\u500b\u5df2\u77e5\u826f\u597d\u5beb\u5165\u6aa2\u67e5\u9ede\u3002\u5982\u679c\u61c9\u7528\u6216\u865b\u64ec\u6a5f\u767c\u751f\u6545\u969c\uff0cStriim \u6703\u5354\u8abf\u9019\u5169\u500b\u6aa2\u67e5\u9ede\uff0c\u4ee5\u78ba\u4fdd\u6c92\u6709\u6578\u64da\u4e1f\u5931\u6216\u91cd\u8907\u3002\u6062\u5fa9\u4e0d\u9069\u7528\u65bc\u521d\u59cb\u52a0\u8f09\u61c9\u7528\u3002\n### \u5553\u7528\u6062\u5fa9\n- \u5728 Striim Flow Designer \u4e2d\uff0c\u9ede\u64ca **Configuration** \u5716\u6a19\uff0c\u7136\u5f8c\u9078\u64c7 **App Settings** \u3002\n- \u9ede\u64ca **\u6062\u5fa9\u9593\u9694** \u3002\n- \u8f38\u5165`5`\uff0c\u7136\u5f8c\u5f9e\u4e0b\u62c9\u5217\u8868\u4e2d\u9078\u64c7 **\u7b2c\u4e8c\u500b** \u3002\n- \u9ede\u64ca **\u5553\u7528\u52a0\u5bc6** \u3002Striim \u6703\u5c0d\u5728 Striim \u670d\u52d9\u5668\u4e4b\u9593\u6216\u5f9e\u8f49\u767c\u4ee3\u7406\u5411 Striim \u670d\u52d9\u5668\u79fb\u52d5\u6578\u64da\u7684\u6240\u6709\u6d41\u9032\u884c\u52a0\u5bc6\u3002\n### \u958b\u5553\u52a0\u5bc6\n- \u5728 Striim Flow Designer \u4e2d\uff0c\u9ede\u64ca **Configuration** \u5716\u6a19\uff0c\u9078\u64c7 **App Settings** \uff0c\u7136\u5f8c\u5728 **Encryption** \u4e0b\uff0c\u9078\u4e2d\u76f8\u61c9\u8907\u9078\u6846\u3002\n\u5982\u9700\u8a73\u7d30\u77ad\u89e3 Striim \u7684\u6062\u5fa9\u65b9\u6cd5\uff0c\u8acb\u53c3\u95b1 [Striim \u7db2\u7ad9](https://www.striim.com/docs/en/recovering-applications.html) \u3002## \u5553\u7528\u65e5\u8a8c\u8a18\u9304\u7570\u5e38\u5728\u90e8\u7f72\u6301\u7e8c\u8907\u88fd\u6d41\u6c34\u7dda\u4e4b\u524d\uff0c\u6211\u5011\u5efa\u8b70\u60a8\u5728 Striim \u4e2d\u5553\u7528 [\u7570\u5e38\u5b58\u5132](https://www.striim.com/docs/en/create-exceptionstore.html) \u3002\u4f5c\u7232 CDC \u61c9\u7528\u7684\u4e00\u90e8\u5206\uff0c\u521d\u59cb\u52a0\u8f09\u61c9\u7528\u53ef\u80fd\u6703\u7de8\u5beb\u591a\u500b\u91cd\u8907\u9805\u3002Striim \u61c9\u7528\u6703\u5ffd\u7565\u9019\u4e9b\u932f\u8aa4\uff0c\u5c07\u5176\u5beb\u5165\u5b58\u5132\u5340\uff08\u4f9b\u60a8\u67e5\u770b\u548c\u8655\u7406\uff09\u4e26\u7e7c\u7e8c\u8655\u7406\u3002- \u5728 Striim Flow Designer \u4e2d\uff0c\u9078\u64c7 **\u7570\u5e38** \u5716\u6a19\u3002\u8a72\u5716\u6a19\u986f\u793a\u5169\u500b\u66f2\u7dda\u7bad\u982d\u4e4b\u9593\u7684\u611f\u5606\u865f\u3002\n- \u9ede\u64ca **\u958b\u5553** \u3002\n## \u90e8\u7f72\u6d41\u6c34\u7dda\u3002\u6d41\u6c34\u7dda\u6e96\u5099\u5c31\u7dd2\u5f8c\uff0c\u60a8\u53ef\u4ee5\u9032\u884c\u90e8\u7f72\u4e26\u5553\u52d5\u61c9\u7528\u3002\u60a8\u9084\u53ef\u4ee5\u5be6\u6642\u9810\u89bd\u8907\u88fd\u7684\u6578\u64da\uff0c\u4e26\u67e5\u770b [\u76e3\u63a7\u5831\u544a](https://www.striim.com/docs/en/using-monitor-reports.html) \u3002\u7576\u6d41\u6c34\u7dda\u6210\u529f\u5553\u52d5\u6301\u7e8c\u8907\u88fd\u6642\uff0c\u6d41\u6c34\u7dda\u72c0\u614b\u6703\u66f4\u6539\u7232 **\u6b63\u5728\u904b\u884c** \u3002- \u5728 Oracle Reader \u9069\u914d\u5668\u4e2d\uff0c\u9078\u64c7 **\u90e8\u7f72\u61c9\u7528** \u3002\n- \u9078\u64c7 **\u9ed8\u8a8d** \u90e8\u7f72\u7d44\u3002\n- \u9ede\u64ca **\u90e8\u7f72** \u3002\n\u53ea\u8981\u60a8\u5e0c\u671b Oracle \u8868\u8207 Cloud SQL \u8868\u4fdd\u6301\u540c\u6b65\uff0c\u5c31\u53ef\u4ee5\u4fdd\u6301\u6d41\u6c34\u7dda\u904b\u884c\u3002\n\u60a8\u5df2\u5b8c\u6210\u8a72\u6559\u7a0b\u3002\u5982\u679c\u60a8\u6709\u8208\u8da3\u77ad\u89e3\u5176\u4ed6 Oracle CDC \u4f86\u6e90\uff0c\u8acb\u53c3\u95b1\u4ee5\u4e0b\u90e8\u5206\u3002## \u5099\u7528 Oracle CDC \u4f86\u6e90\u9664\u4e86 LogMiner \u4e4b\u5916\uff0cStriim \u7684\u9069\u914d\u5668\u4e5f\u53ef\u4ee5\u5f9e [XStream](https://docs.oracle.com/en/database/oracle/oracle-database/19/xstrm/introduction-to-xstream.html) \u6216 [Oracle Golden Gate \u8ddf\u8e64\u8a18\u9304\u6587\u4ef6](https://www.oracle.com/integration/goldengate/) \u4e2d\u8b80\u53d6 Oracle \u6578\u64da\u5eab\u3002\n\u5982\u9700\u5f9e XStream \u8b80\u53d6\u6578\u64da\uff0c\u8acb\u4f7f\u7528 Striim \u7684 [Oracle Reader \u9069\u914d\u5668](https://www.striim.com/docs/platform/en/oracle-database-cdc.html#UUID-4c87f956-0cd8-1c7d-407d-703c8822dd74) \u3002XStream \u53ef\u80fd\u5177\u6709\u66f4\u597d\u7684\u6027\u80fd\uff0c\u4f46\u5b83\u9700\u8981 Golden Gate \u8a31\u53ef\u4e26\u4e14\u50c5\u652f\u6301 [Oracle Database 11.2.0.4](https://docs.oracle.com/cd/E11882_01/server.112/e41360/chapter1_11204.htm#NEWFT379) \u3002\n\u5982\u9700\u8b80\u53d6 Golden Gate \u8ddf\u8e64\u8a18\u9304\u6587\u4ef6\uff0c\u8acb\u4f7f\u7528 Striim \u7684 [GG Trail Reader \u9069\u914d\u5668](https://www.striim.com/docs/platform/en/oracle-goldengate.html#UUID-9daf6652-a8c7-8d65-6f0f-da3e3181a9ad) \u3002\n\u4e0b\u8868\u4ecb\u7d39\u4e86 LogMiner \u548c XStream \u4e4b\u9593\u7684\u5dee\u7570\uff1a\n| Oracle \u6578\u64da\u5eab CDC \u529f\u80fd       | LogMiner \u662f\u5426\u652f\u6301\uff1f        | XStream Out \u662f\u5426\u652f\u6301\uff1f |\n|:------------------------------------------------|:---------------------------------------------------|:-------------------------|\n| \u8b80\u53d6\u6578\u64da\u5b9a\u7fa9\u8a9e\u8a00 (DDL)\u3001ROLLBACK \u548c\u672a\u63d0\u4ea4\u7684\u4e8b\u52d9 | \u662f             | \u5426      |\n| \u4f7f\u7528 DATA() \u548c BEFORE() \u51fd\u6578     | \u662f             | \u5426      |\n| \u4f7f\u7528 QUIESCE\uff08\u8acb\u53c3\u95b1\u63a7\u5236\u6aaf\u547d\u4ee4\uff09    | \u662f             | \u5426      |\n| \u63a5\u6536 CDC \u4e8b\u4ef6         | \u6279\u91cf\u63a5\u6536 Oracle Reader \u7684 FetchSize \u5c6c\u6027\u5b9a\u7fa9\u7684\u4e8b\u4ef6 | \u6301\u7e8c\u63a5\u6536\u66f4\u6539\u6578\u64da\u4e8b\u4ef6  |\n| \u5f9e\u5305\u542b\u4e0d\u652f\u6301\u985e\u578b\u7684\u8868\u4e2d\u8b80\u53d6      | \u7121\u6cd5\u8b80\u53d6\u8a72\u8868\u683c          | \u8b80\u53d6\u652f\u6301\u7684\u985e\u578b\u7684\u5217  |## \u6e05\u7406\u7232\u907f\u514d\u56e0\u672c\u6559\u7a0b\u4e2d\u4f7f\u7528\u7684\u8cc7\u6e90\u5c0e\u81f4\u60a8\u7684 Google Cloud \u8cec\u865f\u7522\u751f\u8cbb\u7528\uff0c\u8acb\u522a\u9664\u5305\u542b\u9019\u4e9b\u8cc7\u6e90\u7684\u9805\u76ee\uff0c\u6216\u8005\u4fdd\u7559\u9805\u76ee\u4f46\u522a\u9664\u5404\u500b\u8cc7\u6e90\u3002\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- **\u8b66\u544a** \uff1a\u522a\u9664\u9805\u76ee\u6703\u7522\u751f\u4ee5\u4e0b\u5f71\u97ff- **\u9805\u76ee\u4e2d\u7684\u6240\u6709\u5167\u5bb9\u90fd\u6703\u88ab\u522a\u9664\u3002** \u5982\u679c\u60a8\u5c07\u73fe\u6709\u9805\u76ee\u7528\u65bc\u672c\u6587\u6a94\u4e2d\u7684\u4efb\u52d9\uff0c\u5247\u522a\u9664\u8a72\u9805\u76ee\u5f8c\uff0c\u9084\u5c07\u522a\u9664\u60a8\u5df2\u5728\u8a72\u9805\u76ee\u4e2d\u5b8c\u6210\u7684\u4efb\u4f55\u5176\u4ed6\u5de5\u4f5c\u3002\n- **\u81ea\u5b9a\u7fa9\u9805\u76ee ID \u4e1f\u5931\u3002** \u5275\u5efa\u6b64\u9805\u76ee\u6642\uff0c\u60a8\u53ef\u80fd\u5275\u5efa\u4e86\u8981\u5728\u5c07\u4f86\u4f7f\u7528\u7684\u81ea\u5b9a\u7fa9\u9805\u76ee ID\u3002\u8981\u4fdd\u7559\u4f7f\u7528\u8a72\u9805\u76ee ID \u7684\u7db2\u5740\uff08\u4f8b\u5982`appspot.com`\u7db2\u5740\uff09\uff0c\u8acb\u522a\u9664\u9805\u76ee\u5167\u7684\u6240\u9078\u8cc7\u6e90\uff0c\u800c\u4e0d\u662f\u522a\u9664\u6574\u500b\u9805\u76ee\u3002\n\u5982\u679c\u60a8\u6253\u7b97\u63a2\u7d22\u591a\u500b\u67b6\u69cb\u3001\u6559\u7a0b\u6216\u5feb\u901f\u5165\u9580\uff0c\u5247\u91cd\u8907\u4f7f\u7528\u9805\u76ee\u53ef\u4ee5\u5e6b\u52a9\u60a8\u907f\u514d\u8d85\u51fa\u9805\u76ee\u914d\u984d\u9650\u5236\u3002\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u9032\u5165 **\u7ba1\u7406\u8cc7\u6e90** \u9801\u9762\u3002 [\u8f49\u5230\u201c\u7ba1\u7406\u8cc7\u6e90\u201d](https://console.cloud.google.com/iam-admin/projects?hl=zh-cn) \n- \u5728\u9805\u76ee\u5217\u8868\u4e2d\uff0c\u9078\u64c7\u8981\u522a\u9664\u7684\u9805\u76ee\uff0c\u7136\u5f8c\u9ede\u64ca **\u522a\u9664** \u3002\n- \u5728\u5c0d\u8a71\u6846\u4e2d\u8f38\u5165\u9805\u76ee ID\uff0c\u7136\u5f8c\u9ede\u64ca **\u95dc\u9589** \u4ee5\u522a\u9664\u9805\u76ee\u3002\n## \u5f8c\u7e8c\u6b65\u9a5f\n- \u67e5\u770b Striim \u6587\u6a94\uff1a [Oracle to Google Cloud PostgreSQL \u9077\u79fb\u6307\u5357](https://www.striim.com/integrations/oracle-postgresql/) \n- \u89c0\u770b\u6709\u95dc [\u5c07 Oracle \u6578\u64da\u5eab\u9077\u79fb\u5230 Cloud SQL PostgreSQL](https://www.youtube.com/watch?v=PDFC7XpGAVU&hl=zh-cn) \u7684\u8996\u983b\u3002\n- \u5982\u9700\u67e5\u770b\u66f4\u591a\u53c3\u8003\u67b6\u69cb\u3001\u5716\u8868\u548c\u6700\u4f73\u5be6\u8e10\uff0c\u8acb\u700f\u89bd [\u96f2\u67b6\u69cb\u4e2d\u5fc3](https://cloud.google.com/architecture?hl=zh-cn) \u3002\n **Oracle\u3001Java \u548c MySQL \u662f Oracle \u548c/\u6216\u5176\u95dc\u806f\u516c\u53f8\u7684\u8a3b\u518a\u5546\u6a19\u3002\u5176\u4ed6\u540d\u7a31\u53ef\u80fd\u662f\u5176\u5404\u81ea\u6240\u6709\u8005\u7684\u5546\u6a19\u3002**", "guide": "Docs"}