{"title": "Docs - \u4f7f\u7528 BigQuery \u8a2d\u7f6e\u76e3\u7ba1\u5831\u544a\u67b6\u69cb", "url": "https://cloud.google.com/architecture/set-up-regulatory-reporting-architecture-bigquery?hl=zh-cn", "abstract": "# Docs - \u4f7f\u7528 BigQuery \u8a2d\u7f6e\u76e3\u7ba1\u5831\u544a\u67b6\u69cb\nLast reviewed 2022-05-24 UTC\n\u672c\u6587\u6a94\u4ecb\u7d39\u5982\u4f55\u958b\u59cb\u4f7f\u7528\u96f2\u7aef\u76e3\u7ba1\u5831\u544a\u89e3\u6c7a\u65b9\u6848\u4e26\u904b\u884c\u57fa\u672c\u6d41\u6c34\u7dda\uff0c\u9069\u7528\u65bc\u91d1\u878d\u6a5f\u69cb\u4e2d\u5e0c\u671b\u719f\u6089\u751f\u6210\u7a69\u5b9a\u3001\u53ef\u9760\u7684\u76e3\u7ba1\u5831\u544a\u7684\u67b6\u69cb\u548c\u6700\u4f73\u5be6\u8e10\u7684\u6578\u64da\u5de5\u7a0b\u5e2b\u3002\n\u5728\u672c\u6559\u7a0b\u4e2d\uff0c\u60a8\u5c07\u5728 Google Cloud \u8cc7\u6e90\u4e0a\u5efa\u7acb\u76e3\u7ba1\u6578\u64da\u8655\u7406\u5e73\u81fa\u7684\u6709\u6548\u793a\u4f8b\u3002\u793a\u4f8b\u5e73\u81fa\u6f14\u793a\u77ad\u5982\u4f55\u5be6\u73fe\u4fdd\u6301\u6578\u64da\u8cea\u91cf\u548c\u53ef\u5be9\u8988\u6027\u3001\u6613\u65bc\u66f4\u6539\u548c\u90e8\u7f72\u4e26\u4e14\u9084\u6eff\u8db3\u4ee5\u4e0b\u76e3\u7ba1\u5831\u544a\u8981\u6c42\u7684\u6578\u64da\u8655\u7406\u6d41\u6c34\u7dda\uff1a- \u5f9e\u4f86\u6e90\u6ce8\u5165\u6578\u64da\n- \u8655\u7406\u5927\u91cf\u7cbe\u7d30\u7684\u6578\u64da\n- \u5c07\u6578\u64da\u5f59\u7e3d\u5230\u5831\u544a\u4e2d\u3002\n\u672c\u6587\u6a94\u5047\u5b9a\u60a8\u719f\u6089 Terraform 1.1.7 \u7248\u3001\u6578\u64da\u69cb\u5efa\u5de5\u5177 (dbt) 1.0.4 \u7248\u3001Cloud Storage \u548c BigQuery\u3002", "content": "## \u76ee\u6a19\n- \u901a\u904e\u514b\u9686\u7684\u4ee3\u78bc\u5eab\u5275\u5efa\u57fa\u790e\u67b6\u69cb\u3002\n- \u5c07\u88fd\u9020\u7684\u6578\u64da\u52a0\u8f09\u5230 BigQuery \u4e2d\u3002\n- \u5f9e\u7cbe\u7d30\u7684\u6578\u64da\u4e2d\u63d0\u53d6\u76e3\u7ba1\u6307\u6a19\u3002\n- \u5bb9\u5668\u5316\u63d0\u53d6\u6d41\u6c34\u7dda\u3002\n## \u8cbb\u7528\nTitles in dynamic includes are not used anywhere, and we should avoid paying to translate them\u5728\u672c\u6587\u6a94\u4e2d\uff0c\u60a8\u5c07\u4f7f\u7528 Google Cloud \u7684\u4ee5\u4e0b\u6536\u8cbb\u7d44\u4ef6\uff1a- [BigQuery](https://cloud.google.com/bigquery/pricing?hl=zh-cn) \n- [Cloud Storage](https://cloud.google.com/storage/pricing?hl=zh-cn) \n- [Cloud Composer\uff08\u53ef\u9078\uff09](https://cloud.google.com/composer/pricing?hl=zh-cn) \n\u60a8\u53ef\u4f7f\u7528 [\u50f9\u683c\u8a08\u7b97\u5668](https://cloud.google.com/products/calculator?hl=zh-cn) \u6839\u64da\u60a8\u7684\u9810\u8a08\u4f7f\u7528\u60c5\u6cc1\u4f86\u4f30\u7b97\u8cbb\u7528\u3002 \nTitles in dynamic includes are not used anywhere, and we should avoid paying to translate them\u5b8c\u6210\u672c\u6587\u6a94\u4e2d\u63cf\u8ff0\u7684\u4efb\u52d9\u5f8c\uff0c\u60a8\u53ef\u4ee5\u901a\u904e\u522a\u9664\u6240\u5275\u5efa\u7684\u8cc7\u6e90\u4f86\u907f\u514d\u7e7c\u7e8c\u8a08\u8cbb\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u6e05\u7406](#clean-up) \u3002## \u6e96\u5099\u5de5\u4f5c- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\u5728 Google Cloud Console \u4e2d\u7684\u9805\u76ee\u9078\u64c7\u5668\u9801\u9762\u4e0a\uff0c\u9078\u64c7\u6216 [\u5275\u5efa\u4e00\u500b Google Cloud \u9805\u76ee](https://cloud.google.com/resource-manager/docs/creating-managing-projects?hl=zh-cn) \u3002 **\u6ce8\u610f** \uff1a\u5982\u679c\u60a8\u4e0d\u6253\u7b97\u4fdd\u7559\u5728\u6b64\u904e\u7a0b\u4e2d\u5275\u5efa\u7684\u8cc7\u6e90\uff0c\u8acb\u5275\u5efa\u65b0\u7684\u9805\u76ee\uff0c\u800c\u4e0d\u8981\u9078\u64c7\u73fe\u6709\u7684\u9805\u76ee\u3002\u5b8c\u6210\u672c\u6559\u7a0b\u4ecb\u7d39\u7684\u6b65\u9a5f\u5f8c\uff0c\u60a8\u53ef\u4ee5\u522a\u9664\u6240\u5275\u5efa\u7684\u9805\u76ee\uff0c\u4e26\u79fb\u9664\u8207\u8a72\u9805\u76ee\u95dc\u806f\u7684\u6240\u6709\u8cc7\u6e90\u3002 [\u8f49\u5230\u201c\u9805\u76ee\u9078\u64c7\u5668\u201d](https://console.cloud.google.com/projectselector2/home/dashboard?hl=zh-cn) \n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them [\u78ba\u4fdd\u60a8\u7684 Google Cloud \u9805\u76ee\u5df2\u5553\u7528\u7d50\u7b97\u529f\u80fd](https://cloud.google.com/billing/docs/how-to/verify-billing-enabled?hl=zh-cn#console) \u3002\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u6fc0\u6d3b Cloud Shell\u3002 [\u6fc0\u6d3b Cloud Shell](https://console.cloud.google.com/?cloudshell=true&hl=zh-cn) \n## \u6e96\u5099\u74b0\u5883\n- \u5728 Cloud Shell \u4e2d\uff0c\u6307\u5b9a\u8981\u7528\u65bc\u672c\u6559\u7a0b\u7684\u9805\u76ee\uff1a```\ngcloud config set project PROJECT_ID\n```\u5c07 `` \u66ff\u63db\u7232\u60a8\u7232\u672c\u6559\u7a0b\u9078\u64c7\u6216\u5275\u5efa\u7684\u9805\u76ee\u7684 ID\u3002\u5982\u679c\u51fa\u73fe\u5c0d\u8a71\u6846\uff0c\u8acb\u9ede\u64ca **\u6388\u6b0a** \u3002\n- \u6307\u5b9a\u7528\u65bc\u5275\u5efa\u57fa\u790e\u67b6\u69cb\u7684\u9ed8\u8a8d\u5340\u57df\uff1a```\n\u00a0gcloud config set compute/region REGION\n```\n- \u5275\u5efa\u4e26\u6fc0\u6d3b Python \u865b\u64ec\u74b0\u5883\uff1a```\npython -m venv reg-rpt-envsource reg-rpt-env/bin/activate\n```\u60a8\u6703\u770b\u5230\u547d\u4ee4\u884c\u63d0\u793a\u7b26\u4ee5\u865b\u64ec\u74b0\u5883\u7684\u540d\u7a31\u7232\u524d\u7db4\u3002\n- \u514b\u9686\u4ee3\u78bc\u5eab\uff1a```\ngit clone \\\"https://github.com/GoogleCloudPlatform/reg-reporting-blueprint\"\n```\n- \u5b89\u88dd Terraform\u3002\u5982\u9700\u77ad\u89e3\u5982\u4f55\u57f7\u884c\u6b64\u5b89\u88dd\uff0c\u8acb\u53c3\u95b1 [HashiCorp \u6587\u6a94](https://learn.hashicorp.com/tutorials/terraform/install-cli#install-terraform) \u3002\n- [\u9a57\u8b49](https://learn.hashicorp.com/tutorials/terraform/install-cli#verify-the-installation) \u5b89\u88dd\u3002\n- \u5b89\u88dd dbt\uff1a```\npip3 install dbt-bigquery --upgrade\n```\n- \u9a57\u8b49 dbt \u5b89\u88dd\uff1a```\n\u00a0dbt --version\n```\u60a8\u6703\u770b\u5230\u986f\u793a\u7684\u5b89\u88dd\u8a73\u7d30\u4fe1\u606f\u3002\n- \u521d\u59cb\u5316\u74b0\u5883\u8b8a\u91cf\uff1a```\ncd reg-reporting-blueprint && source environment-variables.sh\n```\n- \u904b\u884c\u8a2d\u7f6e\u8173\u672c\uff1a```\ncd common_components && ./setup_script.sh\n```\n- \u904b\u884c terraform \u4ee5\u5275\u5efa\u6240\u9700\u7684\u57fa\u790e\u67b6\u69cb\uff1a```\ncd orchestration/infrastructure/terraform init -upgradeterraform planterraform apply\n```\u770b\u5230\u78ba\u8a8d\u63d0\u793a\u6642\uff0c\u8f38\u5165\u201cyes\u201d\u3002\n- \u8981\u9a57\u8b49\u662f\u5426\u5df2\u5275\u5efa\u6ce8\u5165\u5b58\u5132\u6876\uff0c\u8acb\u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\u524d\u5f80 **Cloud Storage** \u9801\u9762\uff0c\u67e5\u770b\u540d\u7a31\u985e\u4f3c\u65bc `PROJECT ID` \u503c\u7684\u5b58\u5132\u6876\u3002\n- \u524d\u5f80 **BigQuery** \u9801\u9762\u4e26\u9a57\u8b49\u5df2\u5275\u5efa\u4ee5\u4e0b\u6578\u64da\u96c6\uff1a```\nhomeloan_devhomeloan_datahomeloan_expectedresults\n```\n## \u4e0a\u50b3\u793a\u4f8b\u6578\u64da\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u63a2\u7d22\u4ee3\u78bc\u5eab\u7684 `data` \u548c `data_load` \u6587\u4ef6\u593e\u7684\u5167\u5bb9\uff0c\u4e26\u5c07\u793a\u4f8b\u6578\u64da\u52a0\u8f09\u5230 BigQuery\u3002- \u5728 Cloud Shell Editor \u5be6\u4f8b\u4e2d\uff0c\u627e\u5230\u4ee3\u78bc\u5eab\u7684 `data` \u6587\u4ef6\u593e\uff1a```\ncd ../../../use_cases/examples/home_loan_delinquency/data/\n```\u6b64\u6587\u4ef6\u593e\u5305\u542b\u5169\u500b\u5b50\u6587\u4ef6\u593e\uff0c\u540d\u7a31\u7232 `input` \u548c `expected` \u3002\u6aa2\u67e5 `input` \u6587\u4ef6\u593e\u7684\u5167\u5bb9\u3002\u6b64\u6587\u4ef6\u593e\u5305\u542b\u5e36\u6709\u793a\u4f8b\u8f38\u5165\u6578\u64da\u7684 CSV \u6587\u4ef6\u3002\u6b64\u793a\u4f8b\u6578\u64da\u50c5\u7528\u65bc\u6e2c\u8a66\u76ee\u7684\u3002\u6aa2\u67e5 `expected` \u6587\u4ef6\u593e\u7684\u5167\u5bb9\u3002\u6b64\u6587\u4ef6\u593e\u5305\u542b CSV \u6587\u4ef6\uff0c\u7528\u65bc\u6307\u5b9a\u61c9\u7528\u8f49\u63db\u5f8c\u7684\u9810\u671f\u7d50\u679c\u3002\n- \u6253\u958b\u4e26\u6aa2\u67e5 `data_load/schema` \u6587\u4ef6\u593e\uff0c\u5176\u4e2d\u5305\u542b\u6307\u5b9a\u9810\u6f14\u6578\u64da\u67b6\u69cb\u7684\u6587\u4ef6\uff1a```\ncd ../data_load\n```\u6b64\u6587\u4ef6\u593e\u4e2d\u7684\u8173\u672c\u5141\u8a31\u5148\u5c07\u6578\u64da\u52a0\u8f09\u5230 Cloud Storage \u4e2d\uff0c\u7136\u5f8c\u518d\u52a0\u8f09\u5230 BigQuery \u4e2d\u3002\u6578\u64da\u7b26\u5408\u672c\u6559\u7a0b\u4e2d\u793a\u4f8b\u76e3\u7ba1\u5831\u544a\u6d41\u6c34\u7dda\u4f7f\u7528\u5834\u666f\u7684\u9810\u671f\u67b6\u69cb\u3002\n- \u5c07\u6578\u64da\u52a0\u8f09\u5230 Cloud Storage \u4e2d\uff1a```\n./load_to_gcs.sh ../data/input./load_to_gcs.sh ../data/expected\n```\u73fe\u5728\uff0cCloud Storage \u6ce8\u5165\u5b58\u5132\u6876\u4e2d\u63d0\u4f9b\u4e86\u9019\u4e9b\u6578\u64da\u3002\n- \u5c07\u6578\u64da\u5f9e Cloud Storage \u6ce8\u5165\u5b58\u5132\u6876\u52a0\u8f09\u5230 BigQuery\uff1a```\n./load_to_bq.sh\n```\n- \u5982\u9700\u9a57\u8b49\u6578\u64da\u662f\u5426\u5df2\u5728 BigQuery \u4e2d\u52a0\u8f09\uff0c\u8acb\u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\u8f49\u5230 BigQuery \u9801\u9762\uff0c\u7136\u5f8c\u5728 `homeloan_data` \u548c `homeloan_expectedresults` \u6578\u64da\u96c6\u4e2d\u9078\u64c7\u4e00\u500b\u8868\u3002\u9078\u64c7\u6bcf\u500b\u8868\u7684 **\u9810\u89bd** \u6a19\u7c64\u9801\uff0c\u4e26\u78ba\u8a8d\u6bcf\u500b\u8868\u90fd\u6709\u6578\u64da\u3002\n### \u904b\u884c\u76e3\u7ba1\u5831\u544a\u6d41\u6c34\u7dda\n- \u5728\u958b\u767c\u74b0\u5883\u4e2d\uff0c\u521d\u59cb\u5316 dbt \u7684\u4f9d\u8cf4\u9805\uff1a```\ncd ../dbt/dbt deps\n```\u9019\u5c07\u5728 dbt \u9805\u76ee\u4e2d\u5b89\u88dd\u4efb\u4f55\u9700\u8981\u7684 dbt \u4f9d\u8cf4\u9805\u3002\n- \u6e2c\u8a66\u672c\u5730 dbt \u5b89\u88dd\u8207 BigQuery \u6578\u64da\u96c6\u4e4b\u9593\u7684\u9023\u63a5\uff1a```\ndbt debug\n```\u5728\u8a72\u547d\u4ee4\u8fd4\u56de\u7684\u9023\u63a5\u3001\u914d\u7f6e\u548c\u4f9d\u8cf4\u9805\u4fe1\u606f\u672b\u5c3e\uff0c\u60a8\u61c9\u8a72\u6703\u770b\u5230\u4ee5\u4e0b\u6d88\u606f\uff1a\u201c `All checks passed!` \u201d\u3002\u5728 `models` \u6587\u4ef6\u593e\u4e2d\uff0c\u6253\u958b\u4e00\u500b SQL \u6587\u4ef6\u4e26\u6aa2\u67e5 dbt \u4e2d\u5be6\u73fe\u7684\u793a\u4f8b\u5831\u544a\u8f49\u63db\u7684\u908f\u8f2f\u3002\n- \u904b\u884c\u5831\u544a\u8f49\u63db\u4ee5\u5275\u5efa\u76e3\u7ba1\u5831\u544a\u6307\u6a19\uff1a```\ndbt run\n```\n- \u904b\u884c\u60a8\u6240\u9078\u65e5\u671f\u7684\u8f49\u63db\uff1a```\ndbt run --vars '{\"reporting_day\": \"2021-09-03\"}'\n```\u8acb\u6ce8\u610f\u63a7\u5236\u8f49\u63db\u57f7\u884c\u7684\u8b8a\u91cf\u3002\u8b8a\u91cf `reporting_day` \u8868\u793a\u6295\u8cc7\u7d44\u5408\u61c9\u5177\u6709\u7684\u65e5\u671f\u503c\u3002\u904b\u884c `dbt run` \u547d\u4ee4\u6642\uff0c\u6700\u4f73\u505a\u6cd5\u662f\u63d0\u4f9b\u6b64\u503c\u3002\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u8f49\u5230 **BigQuery** \u9801\u9762\uff0c\u7136\u5f8c\u6aa2\u67e5 `homeloan_dev` \u6578\u64da\u96c6\u3002\u8acb\u6ce8\u610f\u6578\u64da\u7684\u586b\u5145\u65b9\u5f0f\uff0c\u4ee5\u53ca `wh_denormalised` \u8996\u5716\u7684 **control.reporting_day** \u5b57\u6bb5\u4f7f\u7528\u60a8\u50b3\u905e\u7684 `reporting_day` \u8b8a\u91cf\u7684\u65b9\u5f0f\u3002\n- \u6aa2\u67e5 `models/schema.yml` \u6587\u4ef6\uff1a```\nmodels:\u00a0- <<: *src_current_accounts_attributes\u00a0 \u00a0name: src_current_accounts_attributes\u00a0 \u00a0columns:\u00a0 \u00a0 \u00a0- name: ACCOUNT_KEY\u00a0 \u00a0 \u00a0 \u00a0tests:\u00a0 \u00a0 \u00a0 \u00a0 \u00a0- unique\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 - not_null\n```\u8acb\u6ce8\u610f\u8a72\u6587\u4ef6\u5982\u4f55\u5b9a\u7fa9\u5217\u548c\u95dc\u806f\u7684\u6578\u64da\u8cea\u91cf\u6e2c\u8a66\u3002\u4f8b\u5982\uff0c `src_current_accounts_attributes` \u8868\u4e2d\u7684 **ACCOUNT_KEY** \u5b57\u6bb5\u5fc5\u9808\u662f\u552f\u4e00\u7684\uff0c\u4e26\u4e14\u4e0d\u80fd\u7232 null\u3002\n- \u904b\u884c\u914d\u7f6e\u6587\u4ef6\u4e2d\u6307\u5b9a\u7684\u6578\u64da\u8cea\u91cf\u6e2c\u8a66\uff1a```\ndbt test -s test_type:generic\n```\n- \u6aa2\u67e5 `use_cases/examples/home_loan_delinquency/dbt/tests` \u6587\u4ef6\u593e\u4e2d\u5305\u542b `singular` \u6e2c\u8a66\u7684\u4ee3\u78bc\u3002\u8acb\u6ce8\u610f\uff0c\u6b64\u6587\u4ef6\u593e\u4e2d\u7684\u6e2c\u8a66\u5be6\u73fe\u4e86 `dbt run` \u547d\u4ee4\u8f38\u51fa\u7684\u5be6\u969b\u7d50\u679c\u8207\u4fdd\u5b58\u5728 `homeloan_expectedresults` \u6578\u64da\u96c6\u7684\u9810\u671f\u7d50\u679c\u4e4b\u9593\u7684\u8868\u6bd4\u8f03\u3002\n- \u904b\u884c\u55ae\u4f8b\u6e2c\u8a66\uff1a```\ndbt test -s test_type:singular\n```\n- \u7232\u9805\u76ee\u751f\u6210\u6587\u6a94\uff1a```\ndbt docs generate && dbt docs serve\n```\n- \u5728\u60a8\u770b\u5230\u7684\u8f38\u51fa\u4e2d\uff0c\u641c\u7d22\u4e26\u9ede\u64ca\u4ee5\u4e0b\u7db2\u5740\u6587\u672c\uff1a `http://127.0.0.1:8080` \u3002\u60a8\u7684\u700f\u89bd\u5668\u6703\u6253\u958b\u4e00\u500b\u65b0\u6a19\u7c64\u9801\uff0c\u5176\u4e2d\u986f\u793a dbt \u6587\u6a94\u7db2\u9801\u754c\u9762\u3002\n- \u6aa2\u67e5\u6a21\u578b\u6cbf\u8972\u53ca\u5176\u6587\u6a94\u3002\u60a8\u6703\u770b\u5230\uff0c\u8a72\u6587\u6a94\u5305\u542b\u6a21\u578b\u7684\u6240\u6709\u4ee3\u78bc\u548c\u6587\u6a94\uff08\u5728 `models/schema.yml` \u6587\u4ef6\u4e2d\u6307\u5b9a\uff09\u3002\n- \u5728 Cloud Shell \u4e2d\uff0c\u8f38\u5165\u4ee5\u4e0b\u547d\u4ee4\uff1a```\nCtrl + c\n```Cloud Shell \u6703\u505c\u6b62\u8a17\u7ba1 dbt \u7db2\u9801\u754c\u9762\u3002\n## \u53ef\u9078\uff1a\u5c07\u8f49\u63db\u5bb9\u5668\u5316\n- \u5728 Cloud Shell \u4e2d\uff0c\u7232 BigQuery \u6578\u64da\u52a0\u8f09\u6b65\u9a5f\u5275\u5efa\u4e00\u500b\u5bb9\u5668\uff0c\u4e26\u5c07\u8a72\u5bb9\u5668\u63a8\u9001\u5230 Google Container Repository\uff1a```\ncd ../../../../ \u00a0# the gcloud command should be executed from the rootgcloud builds submit --config use_cases/examples/home_loan_delinquency/data_load/cloudbuild.yaml\n````data_load` \u76ee\u9304\u4e2d\u7684 Dockerfile \u5553\u7528\u5bb9\u5668\u5316\uff0c\u9019\u53ef\u4ee5\u7c21\u5316\u5de5\u4f5c\u6d41\u7de8\u6392\u3002\n- \u5c07\u6578\u64da\u8f49\u63db\u6b65\u9a5f\u7684\u4ee3\u78bc\u5bb9\u5668\u5316\uff0c\u7136\u5f8c\u5c07\u5bb9\u5668\u63a8\u9001\u5230 Container Registry\uff1a```\ngcloud builds submit --config use_cases/examples/home_loan_delinquency/dbt/cloudbuild.yaml\n```\u5bb9\u5668\u5316\u6709\u52a9\u65bc\u5275\u5efa\u53ef\u4ee5\u9032\u884c\u7248\u672c\u63a7\u5236\u548c\u90e8\u7f72\u7684\u8edf\u4ef6\u5305\u3002\n- \u6aa2\u7d22 Airflow \u9801\u9762\u7684\u8def\u5f91\u548c DAG \u7684 **Cloud Storage** \u5b58\u5132\u6876\uff0c\u4e26\u5c07\u5b83\u5011\u5b58\u5132\u5728\u74b0\u5883\u8b8a\u91cf\u4e2d\uff1a```\ncd common_components/orchestration/infrastructure/AIRFLOW_DAG_GCS=$(terraform output --raw airflow_dag_gcs_prefix)AIRFLOW_UI=$(terraform output --raw airflow_uri)\n```\n- \u4e0a\u50b3\u623f\u8cb8\u6b20\u6b3e DAG\uff1a```\ncd ../../../use_cases/examples/home_loan_delinquency/deploy/gsutil cp run_homeloan_dag.py $AIRFLOW_DAG_GCS\n```\n- \u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\u4ee5\u6aa2\u7d22\u754c\u9762\uff0c\u7136\u5f8c\u9ede\u64ca\u93c8\u63a5\uff0c\u4ee5\u9032\u5165 Airflow \u9801\u9762\uff1a```\necho $AIRFLOW_UI\n```\n## \u6e05\u7406\u7232\u907f\u514d\u56e0\u672c\u6559\u7a0b\u4e2d\u4f7f\u7528\u7684\u8cc7\u6e90\u5c0e\u81f4\u60a8\u7684 Google Cloud \u8cec\u865f\u7522\u751f\u8cbb\u7528\uff0c\u8acb\u522a\u9664\u5305\u542b\u9019\u4e9b\u8cc7\u6e90\u7684\u9805\u76ee\uff0c\u6216\u8005\u4fdd\u7559\u9805\u76ee\u4f46\u522a\u9664\u5404\u500b\u8cc7\u6e90\u3002\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- **\u8b66\u544a** \uff1a\u522a\u9664\u9805\u76ee\u6703\u7522\u751f\u4ee5\u4e0b\u5f71\u97ff- **\u9805\u76ee\u4e2d\u7684\u6240\u6709\u5167\u5bb9\u90fd\u6703\u88ab\u522a\u9664\u3002** \u5982\u679c\u60a8\u5c07\u73fe\u6709\u9805\u76ee\u7528\u65bc\u672c\u6587\u6a94\u4e2d\u7684\u4efb\u52d9\uff0c\u5247\u522a\u9664\u8a72\u9805\u76ee\u5f8c\uff0c\u9084\u5c07\u522a\u9664\u60a8\u5df2\u5728\u8a72\u9805\u76ee\u4e2d\u5b8c\u6210\u7684\u4efb\u4f55\u5176\u4ed6\u5de5\u4f5c\u3002\n- **\u81ea\u5b9a\u7fa9\u9805\u76ee ID \u4e1f\u5931\u3002** \u5275\u5efa\u6b64\u9805\u76ee\u6642\uff0c\u60a8\u53ef\u80fd\u5275\u5efa\u4e86\u8981\u5728\u5c07\u4f86\u4f7f\u7528\u7684\u81ea\u5b9a\u7fa9\u9805\u76ee ID\u3002\u8981\u4fdd\u7559\u4f7f\u7528\u8a72\u9805\u76ee ID \u7684\u7db2\u5740\uff08\u4f8b\u5982`appspot.com`\u7db2\u5740\uff09\uff0c\u8acb\u522a\u9664\u9805\u76ee\u5167\u7684\u6240\u9078\u8cc7\u6e90\uff0c\u800c\u4e0d\u662f\u522a\u9664\u6574\u500b\u9805\u76ee\u3002\n\u5982\u679c\u60a8\u6253\u7b97\u63a2\u7d22\u591a\u500b\u67b6\u69cb\u3001\u6559\u7a0b\u6216\u5feb\u901f\u5165\u9580\uff0c\u5247\u91cd\u8907\u4f7f\u7528\u9805\u76ee\u53ef\u4ee5\u5e6b\u52a9\u60a8\u907f\u514d\u8d85\u51fa\u9805\u76ee\u914d\u984d\u9650\u5236\u3002\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u9032\u5165 **\u7ba1\u7406\u8cc7\u6e90** \u9801\u9762\u3002 [\u8f49\u5230\u201c\u7ba1\u7406\u8cc7\u6e90\u201d](https://console.cloud.google.com/iam-admin/projects?hl=zh-cn) \n- \u5728\u9805\u76ee\u5217\u8868\u4e2d\uff0c\u9078\u64c7\u8981\u522a\u9664\u7684\u9805\u76ee\uff0c\u7136\u5f8c\u9ede\u64ca **\u522a\u9664** \u3002\n- \u5728\u5c0d\u8a71\u6846\u4e2d\u8f38\u5165\u9805\u76ee ID\uff0c\u7136\u5f8c\u9ede\u64ca **\u95dc\u9589** \u4ee5\u522a\u9664\u9805\u76ee\u3002\n### \u9010\u500b\u522a\u9664\u8cc7\u6e90\u7232\u907f\u514d\u7522\u751f\u984d\u5916\u8cbb\u7528\uff0c\u8acb\u522a\u9664\u672c\u6559\u7a0b\u4e2d\u4f7f\u7528\u7684\u5404\u500b\u8cc7\u6e90\uff1a\n```\ncd ../../../../common_components/orchestration/infrastructure/terraform destroy\n```## \u5f8c\u7e8c\u6b65\u9a5f\n- \u700f\u89bd\u66f4\u591a [Google Cloud \u91d1\u878d\u670d\u52d9\u89e3\u6c7a\u65b9\u6848](https://cloud.google.com/solutions/financial-services?hl=zh-cn#section-1) \u3002\n- \u5982\u9700\u67e5\u770b\u66f4\u591a\u53c3\u8003\u67b6\u69cb\u3001\u5716\u8868\u548c\u6700\u4f73\u5be6\u8e10\uff0c\u8acb\u700f\u89bd [\u96f2\u67b6\u69cb\u4e2d\u5fc3](https://cloud.google.com/architecture?hl=zh-cn) \u3002", "guide": "Docs"}