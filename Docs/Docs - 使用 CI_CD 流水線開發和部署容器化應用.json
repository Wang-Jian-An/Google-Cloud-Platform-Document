{"title": "Docs - \u4f7f\u7528 CI/CD \u6d41\u6c34\u7dda\u958b\u767c\u548c\u90e8\u7f72\u5bb9\u5668\u5316\u61c9\u7528", "url": "https://cloud.google.com/architecture/app-development-and-delivery-with-cloud-code-gcb-cd-and-gke/deployment?hl=zh-cn", "abstract": "# Docs - \u4f7f\u7528 CI/CD \u6d41\u6c34\u7dda\u958b\u767c\u548c\u90e8\u7f72\u5bb9\u5668\u5316\u61c9\u7528\nLast reviewed 2022-11-18 UTC\n\u672c\u90e8\u7f72\u6307\u5357\u4ecb\u7d39\u77ad\u5982\u4f55\u4f7f\u7528\u4e00\u7d44\u96c6\u6210\u7684 Google Cloud \u5de5\u5177\u4f86\u8a2d\u7f6e\u548c\u4f7f\u7528\u958b\u767c\u3001\u6301\u7e8c\u96c6\u6210 (CI) \u548c\u6301\u7e8c\u4ea4\u4ed8 (CD) \u7cfb\u7d71\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u6b64\u4fc2\u7d71\u958b\u767c\u61c9\u7528\u4e26\u5c07\u5176\u90e8\u7f72\u5230 [Google Kubernetes Engine](https://cloud.google.com/kubernetes-engine?hl=zh-cn) (GKE)\u3002\n\u672c\u6307\u5357\u4ecb\u7d39\u5982\u4f55\u5275\u5efa [\u7528\u65bc\u958b\u767c\u548c\u4ea4\u4ed8\u5bb9\u5668\u5316\u61c9\u7528\u7684\u90e8\u7f72\u6d41\u6c34\u7dda](https://cloud.google.com/architecture/app-development-and-delivery-with-cloud-code-gcb-cd-and-gke?hl=zh-cn) \u4e2d\u63cf\u8ff0\u7684\u67b6\u69cb\u3002\n\u672c\u90e8\u7f72\u6307\u5357\u9069\u7528\u65bc\u8edf\u4ef6\u958b\u767c\u8005\u548c\u64cd\u4f5c\u54e1\uff0c\u60a8\u5728\u5b8c\u6210\u672c\u6559\u7a0b\u7684\u904e\u7a0b\u4e2d\u9700\u8981\u626e\u6f14\u4ee5\u4e0b\u89d2\u8272\uff1a\n- \u9996\u5148\uff0c\u60a8\u5145\u7576\u64cd\u4f5c\u8005\u4f86\u8a2d\u7f6e CI/CD \u6d41\u6c34\u7dda\u3002\u6b64\u6d41\u6c34\u7dda\u7684\u4e3b\u8981\u7d44\u4ef6\u662f [Cloud Build](https://cloud.google.com/build?hl=zh-cn) \u3001 [Artifact Registry](https://cloud.google.com/artifact-registry?hl=zh-cn) \u548c [Cloud Deploy](https://cloud.google.com/deploy?hl=zh-cn) \u3002\n- \u7136\u5f8c\uff0c\u4ee5\u958b\u767c\u8005\u7684\u8eab\u4efd\u4f7f\u7528 [Cloud Code](https://cloud.google.com/code?hl=zh-cn) \u66f4\u6539\u61c9\u7528\u3002\u4f5c\u7232\u958b\u767c\u8005\uff0c\u60a8\u6703\u770b\u5230\u6b64\u6d41\u6c34\u7dda\u63d0\u4f9b\u7684\u96c6\u6210\u5f0f\u9ad4\u9a57\u3002\n- \u6700\u5f8c\uff0c\u60a8\u5c07\u5145\u7576\u64cd\u4f5c\u54e1\uff0c\u4e26\u5b8c\u6210\u5c07\u61c9\u7528\u90e8\u7f72\u5230\u751f\u7522\u74b0\u5883\u7684\u6b65\u9a5f\u3002\n\u672c\u90e8\u7f72\u6307\u5357\u5047\u5b9a\u60a8\u719f\u77e5\u5982\u4f55\u5728 Google Cloud \u4e0a\u904b\u884c `gcloud` \u547d\u4ee4\uff0c\u4ee5\u53ca\u5982\u4f55\u5c07\u61c9\u7528\u5bb9\u5668\u90e8\u7f72\u5230 GKE\u3002\n", "content": "## \u67b6\u69cb\n\u4e0b\u5716\u5c55\u793a\u4e86\u6b64\u90e8\u7f72\u6307\u5357\u4e2d\u4f7f\u7528\u7684\u8cc7\u6e90\uff1a\n\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u6b64\u67b6\u69cb\u4e2d\u4f7f\u7528\u7684\u7d44\u4ef6\uff0c\u8acb\u53c3\u95b1 [\u7528\u65bc\u958b\u767c\u548c\u4ea4\u4ed8\u5bb9\u5668\u5316\u61c9\u7528\u7684\u90e8\u7f72\u6d41\u6c34\u7dda](https://cloud.google.com/architecture/app-development-and-delivery-with-cloud-code-gcb-cd-and-gke?hl=zh-cn#architecture) \u3002\n## \u76ee\u6a19\n\u4f5c\u7232\u64cd\u4f5c\u54e1\uff0c\u60a8\u53ef\u4ee5\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- \u8a2d\u7f6e CI \u6d41\u6c34\u7dda\u548c CD \u6d41\u6c34\u7dda\u3002\u6b64\u8a2d\u7f6e\u5305\u62ec\u4ee5\u4e0b\u5167\u5bb9\uff1a- \u8a2d\u7f6e\u6240\u9700\u7684\u6b0a\u9650\u3002\n- \u7232\u9810\u6f14\u74b0\u5883\u548c\u751f\u7522\u74b0\u5883\u5275\u5efa GKE \u96c6\u7fa3\u3002\n- \u5728 Cloud Source Repositories \u4e2d\u7232\u6e90\u4ee3\u78bc\u5275\u5efa\u4ee3\u78bc\u5eab\u3002\n- \u5728 Artifact Registry \u4e2d\u7232\u61c9\u7528\u5bb9\u5668\u5275\u5efa\u4ee3\u78bc\u5eab\u3002\n- \u5728 GitHub \u4e3b\u4ee3\u78bc\u5eab\u4e0a\u5275\u5efa Cloud Build \u89f8\u767c\u5668\u3002\n- \u5275\u5efa Cloud Deploy \u4ea4\u4ed8\u6d41\u6c34\u7dda\u548c\u76ee\u6a19\u3002\u76ee\u6a19\u662f\u9810\u6f14\u74b0\u5883\u548c\u751f\u7522\u74b0\u5883\u3002\n- \u5553\u52d5 CI/CD \u6d41\u7a0b\u4ee5\u90e8\u7f72\u5230\u9810\u6f14\u74b0\u5883\uff0c\u7136\u5f8c\u63d0\u5347\u5230\u751f\u7522\u74b0\u5883\u3002\n\u4f5c\u7232\u958b\u767c\u8005\uff0c\u60a8\u53ef\u4ee5\u5c0d\u61c9\u7528\u9032\u884c\u66f4\u6539\u3002\u7232\u6b64\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- \u514b\u9686\u4ee3\u78bc\u5eab\u4ee5\u4f7f\u7528\u9810\u914d\u7f6e\u7684\u958b\u767c\u74b0\u5883\u3002\n- \u5728\u958b\u767c\u8005\u5de5\u4f5c\u5340\u4e2d\u5c0d\u61c9\u7528\u9032\u884c\u66f4\u6539\u3002\n- \u69cb\u5efa\u548c\u6e2c\u8a66\u66f4\u6539\u3002\u9019\u4e9b\u6e2c\u8a66\u5305\u62ec\u91dd\u5c0d\u6cbb\u7406\u7684\u9a57\u8b49\u6e2c\u8a66\u3002\n- \u67e5\u770b\u4e26\u9a57\u8b49\u958b\u767c\u96c6\u7fa3\u4e2d\u7684\u66f4\u6539\u3002\u6b64\u96c6\u7fa3\u5728 minikube \u4e0a\u904b\u884c\u3002\n- \u5c07\u66f4\u6539\u63d0\u4ea4\u5230\u4e3b\u4ee3\u78bc\u5eab\u4e2d\u3002## \u8cbb\u7528\nTitles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n\u5728\u672c\u6587\u6a94\u4e2d\uff0c\u60a8\u5c07\u4f7f\u7528 Google Cloud \u7684\u4ee5\u4e0b\u6536\u8cbb\u7d44\u4ef6\uff1a- [Cloud Build](https://cloud.google.com/build/pricing?hl=zh-cn) \n- [Cloud Deploy](https://cloud.google.com/deploy/pricing?hl=zh-cn) \n- [Artifact Registry](https://cloud.google.com/artifact-registry/pricing?hl=zh-cn) \n- [Google Kubernetes Engine](https://cloud.google.com/kubernetes-engine/pricing?hl=zh-cn) \n- [Cloud Source Repositories](https://cloud.google.com/source-repositories/pricing?hl=zh-cn) \n- [Cloud Storage](https://cloud.google.com/storage/pricing?hl=zh-cn) \n\u60a8\u53ef\u4f7f\u7528 [\u50f9\u683c\u8a08\u7b97\u5668](https://cloud.google.com/products/calculator?hl=zh-cn) \u6839\u64da\u60a8\u7684\u9810\u8a08\u4f7f\u7528\u60c5\u6cc1\u4f86\u4f30\u7b97\u8cbb\u7528\u3002\u5b8c\u6210\u672c\u6587\u6a94\u4e2d\u63cf\u8ff0\u7684\u4efb\u52d9\u5f8c\uff0c\u60a8\u53ef\u4ee5\u901a\u904e\u522a\u9664\u6240\u5275\u5efa\u7684\u8cc7\u6e90\u4f86\u907f\u514d\u7e7c\u7e8c\u8a08\u8cbb\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u6e05\u7406](#clean-up) \u3002\n## \u6e96\u5099\u5de5\u4f5c- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\u5728 Google Cloud Console \u4e2d\u7684\u9805\u76ee\u9078\u64c7\u5668\u9801\u9762\u4e0a\uff0c\u9078\u64c7\u6216 [\u5275\u5efa\u4e00\u500b Google Cloud \u9805\u76ee](https://cloud.google.com/resource-manager/docs/creating-managing-projects?hl=zh-cn) \u3002 **\u6ce8\u610f** \uff1a\u5982\u679c\u60a8\u4e0d\u6253\u7b97\u4fdd\u7559\u5728\u6b64\u904e\u7a0b\u4e2d\u5275\u5efa\u7684\u8cc7\u6e90\uff0c\u8acb\u5275\u5efa\u65b0\u7684\u9805\u76ee\uff0c\u800c\u4e0d\u8981\u9078\u64c7\u73fe\u6709\u7684\u9805\u76ee\u3002\u5b8c\u6210\u672c\u6559\u7a0b\u4ecb\u7d39\u7684\u6b65\u9a5f\u5f8c\uff0c\u60a8\u53ef\u4ee5\u522a\u9664\u6240\u5275\u5efa\u7684\u9805\u76ee\uff0c\u4e26\u79fb\u9664\u8207\u8a72\u9805\u76ee\u95dc\u806f\u7684\u6240\u6709\u8cc7\u6e90\u3002 [\u8f49\u5230\u201c\u9805\u76ee\u9078\u64c7\u5668\u201d](https://console.cloud.google.com/projectselector2/home/dashboard?hl=zh-cn) \n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them [\u78ba\u4fdd\u60a8\u7684 Google Cloud \u9805\u76ee\u5df2\u5553\u7528\u7d50\u7b97\u529f\u80fd](https://cloud.google.com/billing/docs/how-to/verify-billing-enabled?hl=zh-cn#console) \u3002\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\u5553\u7528 Artifact Registry, Cloud Build, Cloud Deploy, Cloud Source Repositories, Google Kubernetes Engine, Resource Manager, and Service Networking API\u3002 [\u5553\u7528 API](https://console.cloud.google.com/flows/enableapi?apiid=artifactregistry.googleapis.com%2Ccloudbuild.googleapis.com%2Cclouddeploy.googleapis.com%2Csourcerepo.googleapis.com%2Ccontainer.googleapis.com%2C+cloudresourcemanager.googleapis.com%2Cservicenetworking.googleapis.com&%3Bredirect=https%3A%2F%2Fconsole.cloud.google.com&hl=zh-cn) \n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u6fc0\u6d3b Cloud Shell\u3002 [\u6fc0\u6d3b Cloud Shell](https://console.cloud.google.com/?cloudshell=true&hl=zh-cn)  [Cloud Shell](https://cloud.google.com/shell/docs/how-cloud-shell-works?hl=zh-cn) \u6703\u8a71\u96a8\u5373\u6703\u5728 Google Cloud \u63a7\u5236\u6aaf\u7684\u5e95\u90e8\u5553\u52d5\uff0c\u4e26\u986f\u793a\u547d\u4ee4\u884c\u63d0\u793a\u7b26\u3002Cloud Shell \u662f\u4e00\u500b\u5df2\u5b89\u88dd Google Cloud CLI \u4e14\u5df2\u7232\u7576\u524d\u9805\u76ee\u8a2d\u7f6e\u503c\u7684 Shell \u74b0\u5883\u3002\u8a72\u6703\u8a71\u53ef\u80fd\u9700\u8981\u5e7e\u79d2\u9418\u6642\u9593\u4f86\u5b8c\u6210\u521d\u59cb\u5316\u3002## \u6e96\u5099\u74b0\u5883\n\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u5145\u7576\u61c9\u7528\u64cd\u4f5c\u54e1\u4e26\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- \u8a2d\u7f6e\u6240\u9700\u7684\u6b0a\u9650\u3002\n- \u7232\u9810\u6f14\u74b0\u5883\u548c\u751f\u7522\u74b0\u5883\u5275\u5efa GKE \u96c6\u7fa3\u3002\n- \u514b\u9686\u6e90\u4ee3\u78bc\u5eab\u3002\n- \u5728 Cloud Source Repositories \u4e2d\u7232\u6e90\u4ee3\u78bc\u5275\u5efa\u4ee3\u78bc\u5eab\u3002\n- \u5728 Artifact Registry \u4e2d\u7232\u5bb9\u5668\u61c9\u7528\u5275\u5efa\u4e00\u500b\u4ee3\u78bc\u5eab\u3002\n### \u8a2d\u7f6e\u6b0a\u9650\n\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u6388\u4e88\u8a2d\u7f6e CI/CD \u6d41\u6c34\u7dda\u6240\u9700\u7684\u6b0a\u9650\u3002\n- \u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f Cloud Shell Editor \u7684\u65b0\u5be6\u4f8b\uff0c\u8acb\u6307\u5b9a\u8981\u7528\u65bc\u672c\u90e8\u7f72\u6307\u5357\u7684\u9805\u76ee\uff1a```\ngcloud config set project PROJECT_ID\n```\u5c07 \u66ff\u63db\u7232\u60a8\u7232\u6b64\u90e8\u7f72\u6307\u5357\u9078\u64c7\u6216\u5275\u5efa\u7684\u9805\u76ee\u7684 ID\u3002\u5982\u679c\u51fa\u73fe\u5c0d\u8a71\u6846\uff0c\u8acb\u9ede\u64ca **\u6388\u6b0a** \u3002\n- \u78ba\u4fdd\u9ed8\u8a8d Compute Engine \u670d\u52d9\u8cec\u865f\u64c1\u6709\u5728 Cloud Deploy \u4e2d\u904b\u884c\u4f5c\u696d\u4e26\u5f9e Artifact Registry \u4e2d\u62c9\u53d6\u5bb9\u5668\u7684\u8db3\u5920\u6b0a\u9650\u3002Cloud Build \u548c Cloud Deploy \u4f7f\u7528\u6b64\u9ed8\u8a8d\u670d\u52d9\u8cec\u865f\u3002\u6b64\u670d\u52d9\u8cec\u865f\u53ef\u80fd\u5df2\u7d93\u64c1\u6709\u5fc5\u8981\u7684\u6b0a\u9650\u3002 \u6b64\u6b65\u9a5f\u53ef\u78ba\u4fdd\u7232\u91dd\u5c0d\u9ed8\u8a8d\u670d\u52d9\u8cec\u865f\u505c\u7528\u81ea\u52d5\u89d2\u8272\u6388\u4e88\u7684\u9805\u76ee\u6388\u4e88\u5fc5\u8981\u7684\u6b0a\u9650\u3002```\ngcloud projects add-iam-policy-binding PROJECT_ID \\\u00a0 \u00a0 --member=serviceAccount:$(gcloud projects describe PROJECT_ID \\\u00a0 \u00a0 --format=\"value(projectNumber)\")-compute@developer.gserviceaccount.com \\\u00a0 \u00a0 --role=\"roles/clouddeploy.jobRunner\"gcloud projects add-iam-policy-binding PROJECT_ID \\\u00a0 \u00a0 --member=serviceAccount:$(gcloud projects describe PROJECT_ID \\\u00a0 \u00a0 --format=\"value(projectNumber)\")-compute@developer.gserviceaccount.com \\\u00a0 \u00a0 --role=\"roles/artifactregistry.reader\"\n```\n- \u6388\u4e88 Cloud Build \u670d\u52d9\u8cec\u865f\u4f7f\u7528 Cloud Deploy \u8abf\u7528\u90e8\u7f72\u4ee5\u53ca\u66f4\u65b0\u4ea4\u4ed8\u6d41\u6c34\u7dda\u548c\u76ee\u6a19\u5b9a\u7fa9\u7684\u6b0a\u9650\uff1a```\ngcloud projects add-iam-policy-binding PROJECT_ID \\\u00a0 \u00a0 --member=serviceAccount:$(gcloud projects describe PROJECT_ID \\\u00a0 \u00a0 --format=\"value(projectNumber)\")@cloudbuild.gserviceaccount.com \\\u00a0 \u00a0 --role=\"roles/clouddeploy.operator\"\n```\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u6b64 IAM \u89d2\u8272\uff0c\u8acb\u53c3\u95b1 [clouddeploy.operator](https://cloud.google.com/deploy/docs/iam-roles-permissions?hl=zh-cn#predefined_roles) \u89d2\u8272\u3002\n- \u6388\u4e88 Cloud Build \u548c Cloud Deploy \u670d\u52d9\u8cec\u865f\u90e8\u7f72\u5230 GKE \u7684\u6b0a\u9650\uff1a```\ngcloud projects add-iam-policy-binding PROJECT_ID \\\u00a0 \u00a0 --member=serviceAccount:$(gcloud projects describe PROJECT_ID \\\u00a0 \u00a0 --format=\"value(projectNumber)\")-compute@developer.gserviceaccount.com \\\u00a0 \u00a0 --role=\"roles/container.admin\"\n```\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u6b64 IAM \u89d2\u8272\uff0c\u8acb\u53c3\u95b1 [container.admin \u89d2\u8272](https://cloud.google.com/iam/docs/understanding-roles?hl=zh-cn#kubernetes-engine-roles) \u3002\n- \u5411 Cloud Build \u670d\u52d9\u8cec\u865f\u6388\u4e88\u8abf\u7528 Cloud Deploy \u64cd\u4f5c\u6240\u9700\u7684\u6b0a\u9650\uff1a```\ngcloud projects add-iam-policy-binding PROJECT_ID \\\u00a0 \u00a0 --member=serviceAccount:$(gcloud projects describe PROJECT_ID \\\u00a0 \u00a0 --format=\"value(projectNumber)\")@cloudbuild.gserviceaccount.com \\\u00a0 \u00a0 --role=\"roles/iam.serviceAccountUser\"\n```Cloud Build \u8abf\u7528 Cloud Deploy \u6642\uff0c\u6703\u4f7f\u7528 Compute Engine \u670d\u52d9\u8cec\u865f\u5275\u5efa\u7248\u672c\uff0c\u56e0\u6b64\u9700\u8981\u6b64\u6b0a\u9650\u3002\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u6b64 IAM \u89d2\u8272\uff0c\u8acb\u53c3\u95b1 [iam.serviceAccountUser \u89d2\u8272](https://cloud.google.com/compute/docs/access/iam?hl=zh-cn#the_serviceaccountuser_role) \u3002\n\u73fe\u5728\uff0c\u60a8\u5df2\u6388\u4e88 CI/CD \u6d41\u6c34\u7dda\u6240\u9700\u7684\u6b0a\u9650\u3002\n### \u5275\u5efa GKE \u96c6\u7fa3\n\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u5275\u5efa\u9810\u6f14\u74b0\u5883\u548c\u751f\u7522\u74b0\u5883\uff0c\u5b83\u5011\u90fd\u662f GKE \u96c6\u7fa3\u3002\uff08\u60a8\u7121\u9700\u5728\u6b64\u8655\u8a2d\u7f6e\u958b\u767c\u96c6\u7fa3\uff0c\u56e0\u7232\u5b83\u4f7f\u7528 minikube\uff09\u3002\n- \u5275\u5efa\u9810\u6f14\u548c\u751f\u7522 GKE \u96c6\u7fa3\uff1a```\ngcloud container clusters create-auto staging \\\u00a0 \u00a0 --region us-central1 \\\u00a0 \u00a0 --project=$(gcloud config get-value project) \\\u00a0 \u00a0 --asyncgcloud container clusters create-auto prod \\\u00a0 \u00a0 --region us-central1 \\\u00a0 \u00a0 --project=$(gcloud config get-value project) \\\u00a0 \u00a0 --async\n```\u5728\u66ab\u5b58\u96c6\u7fa3\u4e2d\uff0c\u60a8\u53ef\u4ee5\u6e2c\u8a66\u5c0d\u4ee3\u78bc\u6240\u505a\u7684\u66f4\u6539\u3002\u78ba\u8a8d\u9810\u6f14\u74b0\u5883\u4e2d\u7684\u90e8\u7f72\u4e0d\u5c0d\u61c9\u7528\u7522\u751f\u8ca0\u9762\u5f71\u97ff\u5f8c\uff0c\u5373\u53ef\u90e8\u7f72\u5230\u751f\u7522\u74b0\u5883\u3002\n- \u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u4e26\u78ba\u4fdd\u8f38\u51fa\u5177\u6709\u9810\u6f14\u96c6\u7fa3\u548c\u751f\u7522\u96c6\u7fa3\u7684 `STATUS: RUNNING` \uff1a```\ngcloud container clusters list\n```\n- \u6aa2\u7d22\u9810\u6f14\u96c6\u7fa3\u548c\u751f\u7522\u96c6\u7fa3\u7684 `kubeconfig` \u6587\u4ef6\u7684\u6191\u64da\u3002```\ngcloud container clusters get-credentials staging --region us-central1gcloud container clusters get-credentials prod --region us-central1\n```\u60a8\u53ef\u4ee5\u4f7f\u7528\u9019\u4e9b\u6191\u64da\u8207 GKE \u96c6\u7fa3\u9032\u884c\u4ea4\u4e92\uff0c\u4f8b\u5982\u6aa2\u67e5\u61c9\u7528\u662f\u5426\u6b63\u5e38\u904b\u884c\u3002\n\u73fe\u5728\uff0c\u60a8\u5df2\u7d93\u7232\u9810\u6f14\u548c\u751f\u7522\u74b0\u5883\u5275\u5efa\u4e86 GKE \u96c6\u7fa3\u3002\n### \u6253\u958b IDE \u4e26\u514b\u9686\u4ee3\u78bc\u5eab\n\u5982\u9700\u514b\u9686\u4ee3\u78bc\u5eab\u4e26\u5728\u958b\u767c\u74b0\u5883\u4e2d\u67e5\u770b\u61c9\u7528\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- \u5c07 GitHub \u4ee3\u78bc\u5eab\u514b\u9686\u5230 Cloud Shell\u3002 [](https://ssh.cloud.google.com/cloudshell/editor?cloudshell_git_repo=https%3A%2F%2Fgithub.com%2Fgoogle%2Fgolden-path-for-app-delivery&cloudshell_git_branch=main&cloudshell_open_in_editor=README.md&hl=zh-cn) \n- \u9ede\u64ca **\u78ba\u8a8d** \u3002Cloud Shell Editor \u6703\u6253\u958b\u4e26\u514b\u9686\u793a\u4f8b\u4ee3\u78bc\u5eab\u3002\u73fe\u5728\uff0c\u60a8\u53ef\u4ee5\u5728 Cloud Shell Editor \u4e2d\u67e5\u770b\u61c9\u7528\u7684\u4ee3\u78bc\u3002\n- \u6307\u5b9a\u8981\u7528\u65bc\u6b64\u90e8\u7f72\u6307\u5357\u7684\u9805\u76ee\uff1a```\ngcloud config set project PROJECT_ID\n```\u5982\u679c\u51fa\u73fe\u5c0d\u8a71\u6846\uff0c\u8acb\u9ede\u64ca **\u6388\u6b0a** \u3002\n\u73fe\u5728\uff0c\u60a8\u5df2\u64c1\u6709\u958b\u767c\u74b0\u5883\u4e2d\u61c9\u7528\u7684\u6e90\u4ee3\u78bc\u3002\n\u6b64\u6e90\u4ee3\u78bc\u5eab\u5305\u542b CI/CD \u6d41\u6c34\u7dda\u6240\u9700\u7684 Cloud Build \u548c Cloud Deploy \u6587\u4ef6\u3002\n### \u7232\u6e90\u4ee3\u78bc\u548c\u5bb9\u5668\u5275\u5efa\u4ee3\u78bc\u5eab\n\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u5728 Cloud Source Repositories \u4e2d\u8a2d\u7f6e\u6e90\u4ee3\u78bc\u7684\u4ee3\u78bc\u5eab\uff0c\u4e26\u5728 Artifact Registry \u4e2d\u8a2d\u7f6e\u4ee3\u78bc\u5eab\uff0c\u7528\u65bc\u5b58\u5132 CI/CD \u6d41\u6c34\u7dda\u69cb\u5efa\u7684\u5bb9\u5668\u3002\n- \u5728 Cloud Source Repositories \u4e2d\u5275\u5efa\u4e00\u500b\u4ee3\u78bc\u5eab\u4f86\u5b58\u5132\u6e90\u4ee3\u78bc\u4e26\u5c07\u5176\u8207 CI/CD \u904e\u7a0b\u95dc\u806f\uff1a```\ngcloud source repos create cicd-sample\n```\n- \u78ba\u4fdd Cloud Deploy \u914d\u7f6e\u6307\u5411\u6b63\u78ba\u7684\u9805\u76ee\uff1a```\nsed -i s/project-id-placeholder/$(gcloud config get-value project)/g deploy/*git config --global credential.https://source.developers.google.com.helper gcloud.shgit remote add google https://source.developers.google.com/p/$(gcloud config get-value project)/r/cicd-sample\n```\n- \u5c07\u6e90\u4ee3\u78bc\u63a8\u9001\u5230\u4ee3\u78bc\u5eab\uff1a```\ngit push --all google\n```\n- \u5728 Artifact Registry \u4e2d\u5275\u5efa\u6620\u50cf\u4ee3\u78bc\u5eab\uff1a```\ngcloud artifacts repositories create cicd-sample-repo \\\u00a0 \u00a0 --repository-format=Docker \\\u00a0 \u00a0 --location us-central1\n```\n\u60a8\u73fe\u5728\u5df2\u7d93\u6709\u4e86 Cloud Source Repositories \u4e2d\u7684\u6e90\u4ee3\u78bc\u5eab\u548c Artifact Registry \u4e2d\u7684\u61c9\u7528\u5bb9\u5668\u7684\u4ee3\u78bc\u5eab\u3002\u85c9\u52a9 Cloud Source Repositories \u4ee3\u78bc\u5eab\uff0c\u60a8\u53ef\u4ee5\u514b\u9686\u6e90\u4ee3\u78bc\u4e26\u5c07\u5176\u9023\u63a5\u5230 CI/CD \u6d41\u6c34\u7dda\u3002\n## \u914d\u7f6e CI/CD \u6d41\u6c34\u7dda\n\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u5145\u7576\u61c9\u7528\u64cd\u4f5c\u54e1\u4e26\u914d\u7f6e CI/CD \u6d41\u6c34\u7dda\u3002\u8a72\u6d41\u6c34\u7dda\u4f7f\u7528 Cloud Build \u5be6\u73fe CI\uff0c\u4f7f\u7528 Cloud Deploy \u5be6\u73fe CD\u3002\u6d41\u6c34\u7dda\u7684\u6b65\u9a5f\u5728 Cloud Build \u89f8\u767c\u5668\u4e2d\u5b9a\u7fa9\u3002\n- \u7232 Cloud Build \u5275\u5efa\u4e00\u500b Cloud Storage \u5b58\u5132\u6876\u4ee5\u5b58\u5132 `artifacts.json` \u6587\u4ef6\uff08\u7528\u65bc\u8ddf\u8e64 Skaffold \u7232\u6bcf\u500b\u7248\u672c\u751f\u6210\u7684\u5de5\u4ef6\uff09\uff1a```\ngsutil mb gs://$(gcloud config get-value project)-gceme-artifacts/\n```\u5c07\u6bcf\u500b\u7248\u672c\u7684 `artifacts.json` \u6587\u4ef6\u5b58\u5132\u5728\u4e00\u500b\u96c6\u4e2d\u4f4d\u7f6e\u662f\u4e00\u7a2e\u5f88\u597d\u7684\u505a\u6cd5\uff0c\u56e0\u7232\u5b83\u63d0\u4f9b\u4e86\u53ef\u8ddf\u8e64\u6027\uff0c\u53ef\u4ee5\u7c21\u5316\u554f\u984c\u6392\u67e5\u3002\n- \u67e5\u770b `cloudbuild.yaml` \u6587\u4ef6\uff0c\u8a72\u6587\u4ef6\u5b9a\u7fa9\u4e86 Cloud Build \u89f8\u767c\u5668\u4e14\u5df2\u5728\u60a8\u514b\u9686\u7684\u6e90\u4ee3\u78bc\u4ee3\u78bc\u5eab\u4e2d\u914d\u7f6e\u3002\u6b64\u6587\u4ef6\u5b9a\u7fa9\u4e86\u6bcf\u7576\u6709\u6e90\u4ee3\u78bc\u63a8\u9001\u5230\u6e90\u4ee3\u78bc\u5eab\u7684\u4e3b\u5206\u652f\u6642\u8abf\u7528\u7684\u89f8\u767c\u5668\u3002CI/CD \u6d41\u6c34\u7dda\u7684\u4ee5\u4e0b\u6b65\u9a5f\u5728 `cloudbuild.yaml` \u6587\u4ef6\u4e2d\u5b9a\u7fa9\uff1a- Cloud Build \u4f7f\u7528 Skaffold \u69cb\u5efa\u61c9\u7528\u5bb9\u5668\u3002\n- Cloud Build \u5c07\u69cb\u5efa\u7684 `artifacts.json` \u6587\u4ef6\u653e\u5728 Cloud Storage \u5b58\u5132\u6876\u4e2d\u3002\n- Cloud Build \u5c07\u61c9\u7528\u5bb9\u5668\u653e\u5728 Artifact Registry \u4e2d\u3002\n- Cloud Build \u5728\u61c9\u7528\u5bb9\u5668\u4e0a\u904b\u884c\u6e2c\u8a66\u3002\n- `gcloud deploy apply` \u547d\u4ee4\u53ef\u5411 Cloud Deploy \u670d\u52d9\u8a3b\u518a\u4ee5\u4e0b\u6587\u4ef6\uff1a- `deploy/pipeline.yaml`\uff0c\u9019\u662f\u4ea4\u4ed8\u6d41\u6c34\u7dda\n- `deploy/staging.yaml`\u548c`deploy/prod.yaml`\uff0c\u9019\u662f\u76ee\u6a19\u6587\u4ef6\n\u8a3b\u518a\u6587\u4ef6\u5f8c\uff0cCloud Deploy \u6703\u5275\u5efa\u6d41\u6c34\u7dda\u548c\u76ee\u6a19\uff08\u5982\u679c\u5b83\u5011\u5c1a\u4e0d\u5b58\u5728\uff09\uff0c\u4e26\u5728\u914d\u7f6e\u767c\u751f\u66f4\u6539\u6642\u91cd\u65b0\u5275\u5efa\u3002\u76ee\u6a19\u662f\u9810\u6f14\u74b0\u5883\u548c\u751f\u7522\u74b0\u5883\u3002\n- Cloud Deploy \u7232\u4ea4\u4ed8\u6d41\u6c34\u7dda\u5275\u5efa\u65b0\u7248\u672c\u3002\u6b64\u7248\u672c\u5f15\u7528\u5728 CI \u904e\u7a0b\u4e2d\u69cb\u5efa\u548c\u6e2c\u8a66\u7684\u61c9\u7528\u5bb9\u5668\u3002\n- Cloud Deploy \u6703\u5c07\u7248\u672c\u90e8\u7f72\u5230\u9810\u6f14\u74b0\u5883\u3002\n\u4ea4\u4ed8\u6d41\u6c34\u7dda\u548c\u76ee\u6a19\u7531 Cloud Deploy \u7ba1\u7406\uff0c\u4e26\u8207\u6e90\u4ee3\u78bc\u5206\u96e2\u3002\u9019\u7a2e\u5206\u96e2\u610f\u5473\u7740\u7576\u61c9\u7528\u7684\u6e90\u4ee3\u78bc\u767c\u751f\u66f4\u6539\u6642\uff0c\u60a8\u7121\u9700\u66f4\u65b0\u4ea4\u4ed8\u6d41\u6c34\u7dda\u548c\u76ee\u6a19\u6587\u4ef6\u3002\n- \u5275\u5efa Cloud Build \u89f8\u767c\u5668\uff1a```\ngcloud beta builds triggers create cloud-source-repositories \\\u00a0 \u00a0 --name=\"cicd-sample-main\" \\\u00a0 \u00a0 --repo=\"cicd-sample\" \\\u00a0 \u00a0 --branch-pattern=\"main\" \\\u00a0 \u00a0 --build-config=\"cloudbuild.yaml\"\n```\u6b64\u89f8\u767c\u5668\u6703\u544a\u77e5 Cloud Build \u76e3\u63a7\u6e90\u4ee3\u78bc\u5eab\u4e26\u4f7f\u7528 `cloudbuild.yaml` \u6587\u4ef6\u4f86\u97ff\u61c9\u4ee3\u78bc\u5eab\u7684\u4efb\u4f55\u66f4\u6539\u3002\u6bcf\u7576\u6709\u65b0\u63a8\u9001\u5230\u4e3b\u5206\u652f\u6642\uff0c\u90fd\u6703\u8abf\u7528\u6b64\u89f8\u767c\u5668\u3002\n- \u8f49\u5230 Google Cloud \u63a7\u5236\u6aaf\u4e2d\u7684\u201cCloud Build\u201d\u9801\u9762\u3002 [\u8f49\u81f3 Cloud Build](https://console.cloud.google.com/cloud-build/dashboard?hl=zh-cn) \u8acb\u6ce8\u610f\uff0c\u60a8\u7684\u61c9\u7528\u6c92\u6709\u69cb\u5efa\u3002\n\u73fe\u5728\uff0c\u60a8\u5df2\u7d93\u8a2d\u7f6e\u4e86 CI \u548c CD \u6d41\u6c34\u7dda\uff0c\u4e26\u5728\u4ee3\u78bc\u5eab\u7684\u4e3b\u5206\u652f\u4e0a\u5275\u5efa\u4e86\u4e00\u500b\u89f8\u767c\u5668\u3002\n## \u5728\u958b\u767c\u8005\u5de5\u4f5c\u5340\u4e2d\u5c0d\u60a8\u7684\u61c9\u7528\u9032\u884c\u66f4\u6539\n\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u5145\u7576\u61c9\u7528\u958b\u767c\u8005\u3002\n\u5728\u958b\u767c\u61c9\u7528\u6642\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 Cloud Code \u4f5c\u7232\u958b\u767c\u5de5\u4f5c\u5340\uff0c\u5c0d\u61c9\u7528\u9032\u884c\u8fed\u4ee3\u66f4\u6539\u4e26\u9a57\u8b49\uff1a\n- \u5c0d\u61c9\u7528\u9032\u884c\u66f4\u6539\u3002\n- \u69cb\u5efa\u4e26\u6e2c\u8a66\u65b0\u4ee3\u78bc\u3002\n- \u5c07\u61c9\u7528\u90e8\u7f72\u5230 minikube \u96c6\u7fa3\uff0c\u4e26\u9a57\u8b49\u9762\u5411\u7528\u6236\u7684\u66f4\u6539\u3002\n- \u5c07\u66f4\u6539\u63d0\u4ea4\u5230\u4e3b\u4ee3\u78bc\u5eab\u3002\n\u7576\u6b64\u66f4\u6539\u63d0\u4ea4\u5230\u4e3b\u4ee3\u78bc\u5eab\u6642\uff0cCloud Build \u89f8\u767c\u5668\u6703\u5553\u52d5 CI/CD \u6d41\u6c34\u7dda\u3002\n### \u69cb\u5efa\u3001\u6e2c\u8a66\u548c\u904b\u884c\u61c9\u7528\n\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u69cb\u5efa\u3001\u6e2c\u8a66\u3001\u90e8\u7f72\u548c\u8a2a\u554f\u61c9\u7528\u3002\n\u4f7f\u7528\u60a8\u5728\u4e0a\u4e00\u90e8\u5206\u4e2d\u4f7f\u7528\u7684 Cloud Shell Editor \u5be6\u4f8b\u3002\u5982\u679c\u60a8\u95dc\u9589\u4e86\u7de8\u8f2f\u5668\uff0c\u5247\u5728\u700f\u89bd\u5668\u4e2d\u8f49\u5230 [ide.cloud.google.com](https://ide.cloud.google.com?hl=zh-cn) \uff0c\u4ee5\u6253\u958b Cloud Shell Editor\u3002\n- \u5728\u7d42\u7aef\u4e2d\uff0c\u5553\u52d5 minikube\uff1a```\nminikube start\n```minikube \u5728\u60a8\u7684 Cloud Shell \u4e2d\u8a2d\u7f6e\u672c\u5730 Kubernetes \u96c6\u7fa3\u3002\u6b64\u64cd\u4f5c\u9700\u8981\u5e7e\u5206\u9418\u6642\u9593\u624d\u80fd\u5b8c\u6210\u3002minikube \u9032\u7a0b\u5b8c\u6210\u5f8c\uff0c\u8a72\u9032\u7a0b\u6703\u5728 Cloud Shell \u5be6\u4f8b\u4e0a\u5728\u5f8c\u81fa\u904b\u884c\u3002\n- \u5728 Cloud Shell Editor \u5e95\u90e8\u7684\u7a97\u683c\u4e2d\uff0c\u9078\u64c7 **Cloud Code** \u3002\n- \u5728\u7d42\u7aef\u548c\u7de8\u8f2f\u5668\u4e4b\u9593\u986f\u793a\u7684\u7cbe\u7c21\u9762\u677f\u4e2d\uff0c\u9078\u64c7 **\u5728 Kubernetes \u4e0a\u904b\u884c** \u3002\u5982\u679c\u60a8\u770b\u5230\u4e00\u689d\u63d0\u793a\u201c `Use current context (minikube) to run the app?` \u201d\uff0c\u8acb\u9ede\u64ca **\u662f** \u3002\u6b64\u547d\u4ee4\u6703\u69cb\u5efa\u6e90\u4ee3\u78bc\u4e26\u904b\u884c\u6e2c\u8a66\u3002\u6b64\u904e\u7a0b\u53ef\u80fd\u9700\u8981\u5e7e\u5206\u9418\u7684\u6642\u9593\u3002\u6e2c\u8a66\u5305\u62ec\u55ae\u5143\u6e2c\u8a66\u548c\u9810\u914d\u7f6e\u7684\u9a57\u8b49\u6b65\u9a5f\uff0c\u7528\u65bc\u6aa2\u67e5\u7232\u90e8\u7f72\u74b0\u5883\u8a2d\u7f6e\u7684\u898f\u5247\u3002\u9019\u6a23\u53ef\u4ee5\u78ba\u4fdd\u60a8\u4ecd\u5728\u958b\u767c\u74b0\u5883\u4e2d\u5de5\u4f5c\u6642\u6536\u5230\u6709\u95dc\u90e8\u7f72\u554f\u984c\u7684\u8b66\u544a\u3002 **\u8f38\u51fa** \u6a19\u7c64\u9801\u986f\u793a Skaffold \u5728\u69cb\u5efa\u548c\u90e8\u7f72\u61c9\u7528\u6642\u7684\u9032\u5ea6\u3002 \u3002\u69cb\u5efa\u548c\u6e2c\u8a66\u5b8c\u6210\u5f8c\uff0c **\u8f38\u51fa** \u6a19\u7c64\u9801\u5c07\u986f\u793a `Update succeeded` \uff0c\u4e26\u986f\u793a\u5169\u500b\u7db2\u5740\u3002\u69cb\u5efa\u548c\u6e2c\u8a66\u61c9\u7528\u6642\uff0cCloud Code \u6703\u6d41\u5f0f\u50b3\u56de **\u8f38\u51fa** \u6a19\u7c64\u9801\u4e2d\u7684\u65e5\u8a8c\u548c\u7db2\u5740\u3002\u5728\u958b\u767c\u74b0\u5883\u4e2d\u9032\u884c\u66f4\u6539\u4e26\u904b\u884c\u6e2c\u8a66\u6642\uff0c\u60a8\u53ef\u4ee5\u67e5\u770b\u958b\u767c\u74b0\u5883\u7684\u61c9\u7528\u7248\u672c\uff0c\u4e26\u9a57\u8b49\u5176\u662f\u5426\u6b63\u5e38\u904b\u884c\u3002\u8f38\u51fa\u7d50\u679c\u9084\u6703\u986f\u793a `Watching for changes...` \uff0c\u9019\u610f\u5473\u7740\u5df2\u5553\u7528\u89c0\u5bdf\u6a21\u5f0f\u3002\u7576 Cloud Code \u8655\u65bc\u89c0\u5bdf\u6a21\u5f0f\u6642\uff0c\u8a72\u670d\u52d9\u6703\u6aa2\u6e2c\u4ee3\u78bc\u5eab\u4e2d\u6240\u6709\u5df2\u4fdd\u5b58\u7684\u66f4\u6539\uff0c\u4e26\u81ea\u52d5\u91cd\u5efa\u61c9\u7528\u4e26\u91cd\u65b0\u90e8\u7f72\u5305\u542b\u6700\u65b0\u66f4\u6539\u7684\u61c9\u7528\u3002\n- \u5728 Cloud Code \u7d42\u7aef\u4e2d\uff0c\u5c07\u6307\u91dd\u61f8\u505c\u5728\u8f38\u51fa\u4e2d\u7684\u7b2c\u4e00\u500b\u7db2\u5740 ( `http://localhost:8080` ) \u4e0a\u3002\n- \u5728\u986f\u793a\u7684\u5de5\u5177\u63d0\u793a\u4e2d\uff0c\u9078\u64c7 **\u6253\u958b\u7db2\u9801\u9810\u89bd** \u3002\u5728\u5f8c\u81fa\uff0cCloud Code \u6703\u81ea\u52d5\u5c07\u6d41\u91cf\u8f49\u767c\u5230\u5728 minikube \u4e0a\u904b\u884c\u7684 `cicd-sample` \u670d\u52d9\u3002\n- \u5728\u700f\u89bd\u5668\u4e2d\uff0c\u5237\u65b0\u9801\u9762\u3002 **\u8a08\u6578\u5668** \u65c1\u908a\u7684\u6578\u5b57\u6703\u589e\u52a0\uff0c\u8868\u793a\u61c9\u7528\u6b63\u5728\u97ff\u61c9\u60a8\u7684\u5237\u65b0\u3002\u5728\u700f\u89bd\u5668\u4e2d\uff0c\u8b93\u6b64\u9801\u9762\u4fdd\u6301\u6253\u958b\u72c0\u614b\uff0c\u4ee5\u4fbf\u5728\u672c\u5730\u74b0\u5883\u4e2d\u9032\u884c\u4efb\u4f55\u66f4\u6539\u6642\u67e5\u770b\u8a72\u61c9\u7528\u3002\n\u60a8\u73fe\u5728\u5df2\u5728\u958b\u767c\u74b0\u5883\u4e2d\u69cb\u5efa\u548c\u6e2c\u8a66\u61c9\u7528\u3002 \u60a8\u5df2\u5c07\u61c9\u7528\u90e8\u7f72\u5230\u5728 minikube \u4e0a\u904b\u884c\u7684\u958b\u767c\u96c6\u7fa3\u4e2d\uff0c\u4e26\u67e5\u770b\u61c9\u7528\u9762\u5411\u7528\u6236\u7684\u884c\u7232\u3002\n### \u66f4\u6539\n\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u5c0d\u61c9\u7528\u9032\u884c\u66f4\u6539\uff0c\u4e26\u5728\u61c9\u7528\u5728\u958b\u767c\u96c6\u7fa3\u4e2d\u904b\u884c\u6642\u67e5\u770b\u66f4\u6539\u3002\n- \u5728 Cloud Shell Editor \u4e2d\uff0c\u6253\u958b `index.html` \u6587\u4ef6\u3002\n- \u641c\u7d22\u5b57\u7b26\u4e32 `Sample App Info` \u4e26\u5c07\u5176\u66f4\u6539\u7232 `sample app info` \uff0c\u4ee5\u4fbf\u6a19\u984c\u73fe\u5728\u4f7f\u7528\u5c0f\u5beb\u5b57\u6bcd\u3002\u8a72\u6587\u4ef6\u6703\u81ea\u52d5\u4fdd\u5b58\uff0c\u5f9e\u800c\u89f8\u767c\u61c9\u7528\u5bb9\u5668\u7684\u91cd\u65b0\u69cb\u5efa\u3002Cloud Code \u6703\u6aa2\u6e2c\u66f4\u6539\u4e26\u81ea\u52d5\u91cd\u65b0\u90e8\u7f72\u3002 **\u8f38\u51fa** \u6a19\u7c64\u9801\u986f\u793a `Update initiated` \u3002\u6b64\u91cd\u65b0\u90e8\u7f72\u9700\u8981\u5e7e\u5206\u9418\u6642\u9593\u624d\u80fd\u5b8c\u6210\u3002\u6b64\u81ea\u52d5\u91cd\u65b0\u90e8\u7f72\u529f\u80fd\u9069\u7528\u65bc\u5728 Kubernetes \u96c6\u7fa3\u4e0a\u904b\u884c\u7684\u4efb\u4f55\u61c9\u7528\u3002\n- \u69cb\u5efa\u5b8c\u6210\u5f8c\uff0c\u8f49\u5230\u5df2\u6253\u958b\u61c9\u7528\u7684\u700f\u89bd\u5668\uff0c\u7136\u5f8c\u5237\u65b0\u9801\u9762\u3002\u5237\u65b0\u6642\uff0c\u60a8\u6703\u770b\u5230\u8a72\u6587\u672c\u73fe\u5728\u4f7f\u7528\u5c0f\u5beb\u5b57\u6bcd\u3002\n\u6b64\u8a2d\u7f6e\u5141\u8a31\u60a8\u4f7f\u7528\u4efb\u4f55\u7d44\u4ef6\u81ea\u52d5\u91cd\u65b0\u52a0\u8f09\u4efb\u4f55\u67b6\u69cb\u3002\u7576\u60a8\u4f7f\u7528 Cloud Code \u548c minikube \u6642\uff0c\u5728 Kubernetes \u4e2d\u904b\u884c\u7684\u4efb\u4f55\u5167\u5bb9\u90fd\u5177\u6709\u6b64\u71b1\u4ee3\u78bc\u91cd\u65b0\u52a0\u8f09\u529f\u80fd\u3002\n\u60a8\u53ef\u4ee5\u8abf\u8a66\u5728 Cloud Code \u4e2d\u90e8\u7f72\u5230 Kubernetes \u96c6\u7fa3\u7684\u61c9\u7528\u3002\u672c\u90e8\u7f72\u6307\u5357\u4e26\u672a\u4ecb\u7d39\u9019\u4e9b\u6b65\u9a5f\uff0c\u4f46\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u8abf\u8a66 Kubernetes \u61c9\u7528](https://cloud.google.com/code/docs/shell/debug?hl=zh-cn) \u3002\n### \u63d0\u4ea4\u4ee3\u78bc\n\u73fe\u5728\uff0c\u60a8\u5df2\u7d93\u5c0d\u61c9\u7528\u9032\u884c\u4e86\u66f4\u6539\uff0c\u53ef\u4ee5\u63d0\u4ea4\u4ee3\u78bc\u4e86\u3002\n- \u914d\u7f6e\u60a8\u7684 Git \u8eab\u4efd\uff1a```\ngit config --global user.email \"YOU@EXAMPLE.COM\"git config --global user.name \"NAME\"\n```\u8acb\u66ff\u63db\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1a\u8207\u60a8\u7684 GitHub \u8cec\u865f\u95dc\u806f\u7684\u96fb\u5b50\u90f5\u4ef6\u5730\u5740\u3002\n- \uff1a\u8207\u60a8\u7684 GitHub \u8cec\u865f\u76f8\u95dc\u806f\u7684\u540d\u7a31\u3002\n- \u5f9e\u7d42\u7aef\u63d0\u4ea4\u4ee3\u78bc\uff1a```\ngit add .git commit -m \"use lowercase for: sample app info\"\n```\u60a8\u7121\u9700\u5728\u6b64\u8655\u904b\u884c `git push` \u547d\u4ee4\u3002\u4ee5\u5f8c\u518d\u8aaa\u3002\n\u5728\u958b\u767c\u74b0\u5883\u4e2d\uff0c\u60a8\u73fe\u5728\u5df2\u7d93\u5c0d\u61c9\u7528\u9032\u884c\u4e86\u66f4\u6539\uff0c\u69cb\u5efa\u4e26\u6e2c\u8a66\u4e86\u66f4\u6539\uff0c\u4e26\u9a57\u8b49\u4e86\u5411\u7528\u6236\u986f\u793a\u7684\u9019\u4e9b\u66f4\u6539\u884c\u7232\u3002\u958b\u767c\u74b0\u5883\u4e2d\u7684\u6e2c\u8a66\u5305\u62ec\u6cbb\u7406\u6aa2\u67e5\uff0c\u53ef\u8b93\u60a8\u89e3\u6c7a\u5c0e\u81f4\u751f\u7522\u74b0\u5883\u51fa\u73fe\u554f\u984c\u7684\u554f\u984c\u3002\n\u5728\u672c\u90e8\u7f72\u6307\u5357\u4e2d\uff0c\u7576\u60a8\u5c07\u4ee3\u78bc\u63d0\u4ea4\u5230\u4e3b\u4ee3\u78bc\u5eab\u6642\uff0c\u7121\u9700\u9032\u884c\u4ee3\u78bc\u5be9\u8988\u3002\u4f46\u662f\uff0c\u5be9\u8988\u4ee3\u78bc\u6216\u6279\u51c6\u66f4\u6539\u662f\u63a8\u85a6\u7684\u8edf\u4ef6\u958b\u767c\u6d41\u7a0b\u3002\n\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u8b8a\u66f4\u5be9\u8988\u6d41\u7a0b\u7684\u6700\u4f73\u5be6\u8e10\uff0c\u8acb\u53c3\u95b1 [\u7c21\u5316\u8b8a\u66f4\u5be9\u8988\u6d41\u7a0b](https://dora.dev/devops-capabilities/process/streamlining-change-approval/) \u3002\n## \u5c07\u66f4\u6539\u90e8\u7f72\u5230\u751f\u7522\u74b0\u5883\n\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u5145\u7576\u61c9\u7528\u64cd\u4f5c\u54e1\u4e26\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- \u89f8\u767c CI/CD \u6d41\u6c34\u7dda\uff0c\u8a72\u6d41\u6c34\u7dda\u6703\u5c07\u7248\u672c\u90e8\u7f72\u5230\u9810\u6f14\u74b0\u5883\u3002\n- \u63d0\u5347\u4e26\u6279\u51c6\u767c\u4f48\u5230\u751f\u7522\u74b0\u5883\u3002\n### \u5553\u52d5 CI/CD \u6d41\u6c34\u7dda\u4e26\u90e8\u7f72\u5230\u9810\u6f14\u74b0\u5883\n\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u901a\u904e\u8abf\u7528 Cloud Build \u89f8\u767c\u5668\u4f86\u5553\u52d5 CI/CD \u6d41\u6c34\u7dda\u3002\u6bcf\u7576\u6709\u66f4\u6539\u63d0\u4ea4\u5230\u4e3b\u4ee3\u78bc\u5eab\u6642\uff0c\u7cfb\u7d71\u90fd\u6703\u8abf\u7528\u6b64\u89f8\u767c\u5668\u3002\u60a8\u9084\u53ef\u4ee5\u4f7f\u7528\u624b\u52d5\u89f8\u767c\u5668\u5553\u52d5 CI \u7cfb\u7d71\u3002\n- \u5728 Cloud Shell Editor \u4e2d\uff0c\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\u4ee5\u89f8\u767c\u69cb\u5efa\uff1a```\ngit push google\n```\u6b64\u69cb\u5efa\u5305\u542b\u60a8\u5c0d `cicd-sample` \u6240\u505a\u7684\u66f4\u6539\u3002\n- \u8fd4\u56de [Cloud Build \u4fe1\u606f\u4e2d\u5fc3](https://console.cloud.google.com/cloud-build/dashboard?hl=zh-cn) \uff0c\u67e5\u770b\u69cb\u5efa\u662f\u5426\u5df2\u5275\u5efa\u3002\n- \u9ede\u64ca\u53f3\u5074\u69cb\u5efa\u65e5\u8a8c\u4e2d\u7684 **Running: cicd-sample - cicd-sample-main** \uff0c\u4e26\u67e5\u627e\u7528\u65bc\u8868\u793a\u6bcf\u500b\u6b65\u9a5f\u958b\u59cb\u548c\u7d50\u675f\u7684\u85cd\u8272\u6587\u672c\u3002 **\u6b65\u9a5f 0** \u986f\u793a `cloudbuild.yaml` \u6587\u4ef6\u4e2d\u7684 `skaffold build` \u548c `skaffold test` \u6307\u4ee4\u7684\u8f38\u51fa\u3002 **\u6b65\u9a5f 0** \u4e2d\u7684\u69cb\u5efa\u548c\u6e2c\u8a66\u4efb\u52d9\uff08\u6d41\u6c34\u7dda\u7684 CI \u90e8\u5206\uff09\u5df2\u901a\u904e\uff0c\u56e0\u6b64 **\u6b65\u9a5f 1** \u4e2d\u7684\u90e8\u7f72\u4efb\u52d9\uff08\u6d41\u6c34\u7dda\u7684 CD \u90e8\u5206\uff09\u3002\u6b64\u6b65\u9a5f\u5df2\u5b8c\u6210\uff0c\u4e26\u986f\u793a\u4ee5\u4e0b\u6d88\u606f\uff1a`Created Cloud Deploy rollout` `` `in target staging`\n- \u6253\u958b [Cloud Deploy \u4ea4\u4ed8\u6d41\u6c34\u7dda](https://console.cloud.google.com/deploy/delivery-pipelines?hl=zh-cn) \u9801\u9762\uff0c\u7136\u5f8c\u9ede\u64ca `cicd-sample delivery` \u6d41\u6c34\u7dda\u3002\u61c9\u7528\u90e8\u7f72\u5728\u9810\u6f14\u74b0\u5883\u4e2d\uff0c\u800c\u4e0d\u662f\u751f\u7522\u74b0\u5883\u4e2d\u3002\n- \u9a57\u8b49\u61c9\u7528\u662f\u5426\u53ef\u5728\u9810\u6f14\u74b0\u5883\u4e2d\u6210\u529f\u904b\u884c\uff1a```\nkubectl proxy --port 8001 --context gke_$(gcloud config get-value project)_us-central1_staging\n```\u6b64\u547d\u4ee4\u6703\u8a2d\u7f6e kubectl \u4ee3\u7406\u4ee5\u8a2a\u554f\u61c9\u7528\u3002\n- \u5f9e Cloud Shell \u8a2a\u554f\u61c9\u7528\uff1a- \u5728 Cloud Shell Editor \u4e2d\uff0c\u6253\u958b\u4e00\u500b\u65b0\u7d42\u7aef\u6a19\u7c64\u9801\u3002\n- \u5411 `localhost` \u767c\u9001\u8acb\u6c42\u4ee5\u589e\u52a0\u8a08\u6578\u5668\uff1a```\ncurl -s http://localhost:8001/api/v1/namespaces/default/services/cicd-sample:8080/proxy/ | grep -A 1 Counter\n```\u60a8\u53ef\u4ee5\u591a\u6b21\u904b\u884c\u6b64\u547d\u4ee4\uff0c\u4e26\u89c0\u5bdf\u8a08\u6578\u5668\u503c\u6bcf\u6b21\u905e\u589e\u3002\u67e5\u770b\u61c9\u7528\u6642\uff0c\u8acb\u6ce8\u610f\u60a8\u66f4\u6539\u7684\u6587\u672c\u4f4d\u65bc\u60a8\u5728\u8a9e\u8a00\u74b0\u5883\u4e2d\u90e8\u7f72\u7684\u61c9\u7528\u7248\u672c\u4e2d\u3002\n- \u95dc\u9589\u7b2c\u4e8c\u500b\u6a19\u7c64\u9801\u3002\n- \u5728\u7b2c\u4e00\u500b\u6a19\u7c64\u9801\u4e2d\uff0c\u6309 `Control+C` \u4ee5\u505c\u6b62\u4ee3\u7406\u3002\u73fe\u5728\uff0c\u60a8\u5df2\u8abf\u7528 Cloud Build \u89f8\u767c\u5668\u4f86\u5553\u52d5 CI \u904e\u7a0b\uff0c\u5176\u4e2d\u5305\u62ec\u69cb\u5efa\u61c9\u7528\u3001\u5c07\u5176\u90e8\u7f72\u5230\u9810\u6f14\u74b0\u5883\u4ee5\u53ca\u904b\u884c\u6e2c\u8a66\u4ee5\u9a57\u8b49\u61c9\u7528\u662f\u5426\u5728\u9810\u6f14\u74b0\u5883\u4e2d\u6b63\u5e38\u5de5\u4f5c\u3002\n\u7576\u4ee3\u78bc\u69cb\u5efa\u548c\u6e2c\u8a66\u5728\u9810\u6f14\u74b0\u5883\u4e2d\u901a\u904e\u6642\uff0cCI \u904e\u7a0b\u5c31\u6703\u6210\u529f\u3002CI \u904e\u7a0b\u6210\u529f\u5f8c\uff0c\u5c07\u5728 Cloud Deploy \u4e2d\u5553\u52d5 CD \u7cfb\u7d71\u3002\n### \u5c07\u7248\u672c\u63d0\u5347\u5230\u751f\u7522\u74b0\u5883\n\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u7248\u672c\u5f9e\u9810\u6f14\u74b0\u5883\u63d0\u5347\u5230\u751f\u7522\u74b0\u5883\u3002\u751f\u7522\u74b0\u5883\u76ee\u6a19\u5df2\u9810\u5148\u914d\u7f6e\u7232\u9700\u8981\u6279\u51c6\uff0c\u56e0\u6b64\u60a8\u9700\u8981\u624b\u52d5\u6279\u51c6\u3002\n\u5c0d\u65bc\u60a8\u81ea\u5df1\u7684 CI/CD \u6d41\u6c34\u7dda\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u4f7f\u7528\u90e8\u7f72\u7b56\u7565\uff0c\u5373\u5728\u5b8c\u5168\u90e8\u7f72\u5230\u751f\u7522\u74b0\u5883\u4e4b\u524d\u9010\u6b65\u5553\u52d5\u90e8\u7f72\u3002\u9010\u6b65\u5553\u52d5\u90e8\u7f72\u53ef\u4ee5\u66f4\u8f15\u9b06\u5730\u6aa2\u6e2c\u554f\u984c\uff0c\u4e26\u5728\u9700\u8981\u6642\u6062\u5fa9\u5148\u524d\u7248\u672c\u3002\n\u5982\u9700\u5c07\u8a72\u7248\u672c\u63d0\u5347\u5230\u751f\u7522\u74b0\u5883\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- \u6253\u958b [Cloud Deploy \u4ea4\u4ed8\u6d41\u6c34\u7dda\u6982\u89bd](https://console.cloud.google.com/deploy/delivery-pipelines)?hl=zh-cn) \uff0c\u7136\u5f8c\u9078\u64c7 **cicd-sample** \u6d41\u6c34\u7dda\u3002\n- \u5c07\u90e8\u7f72\u5f9e\u9810\u6f14\u74b0\u5883\u63d0\u5347\u5230\u751f\u7522\u74b0\u5883\u3002\u82e5\u8981\u9032\u884c\u6e2c\u8a66\uff0c\u8acb\u6309\u4ee5\u4e0b\u6b65\u9a5f\u64cd\u4f5c\uff1a- \u5728\u9801\u9762\u9802\u90e8\u7684\u6d41\u6c34\u7dda\u5716\u4e2d\uff0c\u9ede\u64ca\u9810\u6f14\u6846\u4e2d\u7684\u85cd\u8272 **\u63d0\u5347** \u6309\u9215\u3002\n- \u5728\u6253\u958b\u7684\u7a97\u53e3\u4e2d\uff0c\u9ede\u64ca\u5e95\u90e8\u7684 **\u63d0\u5347** \u6309\u9215\u3002\n\u90e8\u7f72\u5c1a\u672a\u5728\u751f\u7522\u74b0\u5883\u4e2d\u904b\u884c\u3002\u6b63\u5728\u7b49\u5f85\u624b\u52d5\u6279\u51c6\u3002\n- \u624b\u52d5\u6279\u51c6\u90e8\u7f72\uff1a- \u5728\u6d41\u6c34\u7dda\u53ef\u8996\u5316\u4e2d\uff0c\u9ede\u64ca\u9810\u6f14\u548c\u751f\u7522\u6846\u4e4b\u9593\u7684 **\u5be9\u8988** \u6309\u9215\u3002\n- \u5728\u6253\u958b\u7684\u7a97\u53e3\u4e2d\uff0c\u9ede\u64ca **\u5be9\u8988** \u6309\u9215\u3002\n- \u5728\u4e0b\u4e00\u500b\u7a97\u53e3\u4e2d\uff0c\u9ede\u64ca **\u6279\u51c6** \u3002\n- \u8fd4\u56de\u5230 [Cloud Deploy \u4ea4\u4ed8\u6d41\u6c34\u7dda\u6982\u89bd](https://console.cloud.google.com/deploy/delivery-pipelines?hl=zh-cn) \uff0c\u7136\u5f8c\u9078\u64c7 **cicd-sample** \u6d41\u6c34\u7dda\u3002\n- \u5728\u6d41\u6c34\u7dda\u53ef\u8996\u5316\u5c07 prod \u6846\u986f\u793a\u7232\u7da0\u8272\uff08\u8868\u793a\u6210\u529f\u767c\u4f48\uff09\u5f8c\uff0c\u901a\u904e\u8a2d\u7f6e\u7528\u65bc\u8a2a\u554f\u61c9\u7528\u7684 kubectl \u4ee3\u7406\u4f86\u9a57\u8b49\u61c9\u7528\u662f\u5426\u5728\u751f\u7522\u74b0\u5883\u4e2d\u6b63\u5e38\u904b\u884c\uff1a```\nkubectl proxy --port 8002 --context gke_$(gcloud config get-value project)_us-central1_prod\n```\n- \u5f9e Cloud Shell \u8a2a\u554f\u61c9\u7528\uff1a- \u5728 Cloud Shell Editor \u4e2d\uff0c\u6253\u958b\u4e00\u500b\u65b0\u7d42\u7aef\u6a19\u7c64\u9801\u3002\n- \u905e\u589e\u8a08\u6578\u5668\uff1a```\ncurl -s http://localhost:8002/api/v1/namespaces/default/services/cicd-sample:8080/proxy/ | grep -A 1 Counter\n```\u60a8\u53ef\u4ee5\u591a\u6b21\u904b\u884c\u6b64\u547d\u4ee4\uff0c\u4e26\u89c0\u5bdf\u8a08\u6578\u5668\u503c\u6bcf\u6b21\u905e\u589e\u3002\n- \u95dc\u9589\u7b2c\u4e8c\u500b\u7d42\u7aef\u6a19\u7c64\u9801\u3002\n- \u5728\u7b2c\u4e00\u500b\u6a19\u7c64\u9801\u4e2d\uff0c\u6309 `Control+C` \u4ee5\u505c\u6b62\u4ee3\u7406\u3002\u60a8\u73fe\u5728\u5df2\u7d93\u63d0\u5347\u4e26\u6279\u51c6\u751f\u7522\u90e8\u7f72\u3002\u5305\u542b\u8fd1\u671f\u66f4\u6539\u7684\u61c9\u7528\u73fe\u5728\u5728\u751f\u7522\u74b0\u5883\u4e2d\u904b\u884c\u3002\n## \u6e05\u7406\n\u7232\u907f\u514d\u56e0\u672c\u90e8\u7f72\u6307\u5357\u4e2d\u4f7f\u7528\u7684\u8cc7\u6e90\u5c0e\u81f4\u60a8\u7684 Google Cloud \u8cec\u865f\u7522\u751f\u8cbb\u7528\uff0c\u8acb\u522a\u9664\u5305\u542b\u9019\u4e9b\u8cc7\u6e90\u7684\u9805\u76ee\uff0c\u6216\u8005\u4fdd\u7559\u9805\u76ee\u4f46\u522a\u9664\u5404\u500b\u8cc7\u6e90\u3002\n### \u9078\u9805 1\uff1a\u522a\u9664\u9805\u76ee\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- **\u8b66\u544a** \uff1a\u522a\u9664\u9805\u76ee\u6703\u7522\u751f\u4ee5\u4e0b\u5f71\u97ff- **\u9805\u76ee\u4e2d\u7684\u6240\u6709\u5167\u5bb9\u90fd\u6703\u88ab\u522a\u9664\u3002** \u5982\u679c\u60a8\u5c07\u73fe\u6709\u9805\u76ee\u7528\u65bc\u672c\u6587\u6a94\u4e2d\u7684\u4efb\u52d9\uff0c\u5247\u522a\u9664\u8a72\u9805\u76ee\u5f8c\uff0c\u9084\u5c07\u522a\u9664\u60a8\u5df2\u5728\u8a72\u9805\u76ee\u4e2d\u5b8c\u6210\u7684\u4efb\u4f55\u5176\u4ed6\u5de5\u4f5c\u3002\n- **\u81ea\u5b9a\u7fa9\u9805\u76ee ID \u4e1f\u5931\u3002** \u5275\u5efa\u6b64\u9805\u76ee\u6642\uff0c\u60a8\u53ef\u80fd\u5275\u5efa\u4e86\u8981\u5728\u5c07\u4f86\u4f7f\u7528\u7684\u81ea\u5b9a\u7fa9\u9805\u76ee ID\u3002\u8981\u4fdd\u7559\u4f7f\u7528\u8a72\u9805\u76ee ID \u7684\u7db2\u5740\uff08\u4f8b\u5982`appspot.com`\u7db2\u5740\uff09\uff0c\u8acb\u522a\u9664\u9805\u76ee\u5167\u7684\u6240\u9078\u8cc7\u6e90\uff0c\u800c\u4e0d\u662f\u522a\u9664\u6574\u500b\u9805\u76ee\u3002\n\u5982\u679c\u60a8\u6253\u7b97\u63a2\u7d22\u591a\u500b\u67b6\u69cb\u3001\u6559\u7a0b\u6216\u5feb\u901f\u5165\u9580\uff0c\u5247\u91cd\u8907\u4f7f\u7528\u9805\u76ee\u53ef\u4ee5\u5e6b\u52a9\u60a8\u907f\u514d\u8d85\u51fa\u9805\u76ee\u914d\u984d\u9650\u5236\u3002\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u9032\u5165 **\u7ba1\u7406\u8cc7\u6e90** \u9801\u9762\u3002 [\u8f49\u5230\u201c\u7ba1\u7406\u8cc7\u6e90\u201d](https://console.cloud.google.com/iam-admin/projects?hl=zh-cn) \n- \u5728\u9805\u76ee\u5217\u8868\u4e2d\uff0c\u9078\u64c7\u8981\u522a\u9664\u7684\u9805\u76ee\uff0c\u7136\u5f8c\u9ede\u64ca **\u522a\u9664** \u3002\n- \u5728\u5c0d\u8a71\u6846\u4e2d\u8f38\u5165\u9805\u76ee ID\uff0c\u7136\u5f8c\u9ede\u64ca **\u95dc\u9589** \u4ee5\u522a\u9664\u9805\u76ee\u3002\n### \u9078\u9805 2\uff1a\u522a\u9664\u55ae\u500b\u8cc7\u6e90\n- \u522a\u9664 Cloud Deploy \u6d41\u6c34\u7dda\uff1a```\ngcloud deploy delivery-pipelines delete cicd-sample --region=us-central1 --force\n```\n- \u522a\u9664 Cloud Build \u89f8\u767c\u5668\uff1a```\ngcloud beta builds triggers delete cicd-sample-main\n```\n- \u522a\u9664\u9810\u6f14\u96c6\u7fa3\u548c\u751f\u7522\u96c6\u7fa3\uff1a```\ngcloud container clusters delete staginggcloud container clusters delete prod\n```\n- \u5728 Cloud Source Repositories \u4e2d\u522a\u9664\u4ee3\u78bc\u5eab\uff1a```\ngcloud source repos delete cicd-sample\n```\n- \u522a\u9664 Cloud Storage \u5b58\u5132\u6876\uff1a```\n`gsutil rm -r gs://$(gcloud config get-value project)-gceme-artifacts/\u00a0gsutil rm -r gs://$(gcloud config get-value project)_clouddeploy/\u00a0```\n```\n- \u522a\u9664 Artifact Registry \u4e2d\u7684\u4ee3\u78bc\u5eab\uff1a```\ngcloud artifacts repositories delete cicd-sample-repo \\\u00a0 \u00a0 --location us-central1\n```## \u5f8c\u7e8c\u6b65\u9a5f\n- \u5982\u9700\u77ad\u89e3\u5982\u4f55\u90e8\u7f72\u5230\u5c08\u7528 GKE \u5be6\u4f8b\uff0c\u8acb\u53c3\u95b1 [\u90e8\u7f72\u5230 Virtual Private Cloud \u7db2\u7d61\u4e0a\u7684\u5c08\u7528\u96c6\u7fa3](https://cloud.google.com/deploy/docs/execution-environment?hl=zh-cn#deploying_to_a_private_cluster_on_a_network) \u3002\n- \u6709\u95dc\u81ea\u52d5\u57f7\u884c\u90e8\u7f72\u7684\u6700\u4f73\u5be6\u8e10\uff0c\u8acb\u53c3\u95b1\uff1a- [\u90e8\u7f72\u81ea\u52d5\u5316](https://dora.dev/devops-capabilities/technical/deployment-automation/) \uff0c\u4ecb\u7d39\u5982\u4f55\u5be6\u73fe\u3001\u6539\u9032\u548c\u8861\u91cf\u90e8\u7f72\u81ea\u52d5\u5316\u3002\n- \u5f9e\u67b6\u69cb\u6846\u67b6 [\u81ea\u52d5\u57f7\u884c\u90e8\u7f72](https://cloud.google.com/architecture/framework/operational-excellence/automate-your-deployments?hl=zh-cn) \u3002\n- \u5982\u9700\u8a73\u7d30\u77ad\u89e3\u90e8\u7f72\u7b56\u7565\uff0c\u8acb\u53c3\u95b1\uff1a- \u5f9e\u67b6\u69cb\u6846\u67b6 [\u9010\u6b65\u5553\u52d5\u90e8\u7f72](https://cloud.google.com/architecture/framework/operational-excellence/automate-your-deployments?hl=zh-cn#launch_deployments_gradually) \u3002\n- [\u61c9\u7528\u90e8\u7f72\u548c\u6e2c\u8a66\u7b56\u7565](https://cloud.google.com/architecture/application-deployment-and-testing-strategies?hl=zh-cn) \n- \u5982\u9700\u67e5\u770b\u66f4\u591a\u53c3\u8003\u67b6\u69cb\u3001\u5716\u8868\u548c\u6700\u4f73\u5be6\u8e10\uff0c\u8acb\u700f\u89bd [\u96f2\u67b6\u69cb\u4e2d\u5fc3](https://cloud.google.com/architecture?hl=zh-cn) \u3002", "guide": "Docs"}