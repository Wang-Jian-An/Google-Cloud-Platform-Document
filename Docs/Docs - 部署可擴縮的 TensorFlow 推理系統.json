{"title": "Docs - \u90e8\u7f72\u53ef\u64f4\u7e2e\u7684 TensorFlow \u63a8\u7406\u7cfb\u7d71", "url": "https://cloud.google.com/architecture/scalable-tensorflow-inference-system/deployment?hl=zh-cn", "abstract": "# Docs - \u90e8\u7f72\u53ef\u64f4\u7e2e\u7684 TensorFlow \u63a8\u7406\u7cfb\u7d71\nLast reviewed 2023-11-02 UTC\n**\u6ce8\u610f** \uff1a\u672c\u6587\u6a94\u6216\u90e8\u5206\u5f15\u7528\u4e86 Google \u8a8d\u7232\u4e0d\u5c0a\u91cd\u6216\u5192\u72af\u4ed6\u4eba\u7684\u4e00\u500b\u6216\u591a\u500b\u8853\u8a9e\u3002\u4e4b\u6240\u4ee5\u4f7f\u7528\u9019\u4e9b\u8853\u8a9e\uff0c\u662f\u56e0\u7232\u5b83\u5011\u662f\u672c\u6587\u6a94\u6240\u63cf\u8ff0\u7684\u8edf\u4ef6\u4e2d\u7684\u95dc\u9375\u5b57\u3002\n\u672c\u6587\u6a94\u4ecb\u7d39\u77ad\u5982\u4f55\u90e8\u7f72 [\u53ef\u64f4\u7e2e\u7684 TensorFlow \u63a8\u7406\u7cfb\u7d71](https://cloud.google.com/architecture/scalable-tensorflow-inference-system?hl=zh-cn) \u4e2d\u6240\u8ff0\u7684\u53c3\u8003\u67b6\u69cb\u3002\n\u672c\u7cfb\u5217\u6587\u7ae0\u9762\u5411\u719f\u6089 Google Kubernetes Engine \u548c\u6a5f\u5668\u5b78\u7fd2 (ML) \u6846\u67b6\uff08\u5305\u62ec TensorFlow \u548c [NVIDIA TensorRT](https://developer.nvidia.com/tensorrt) \uff09\u7684\u958b\u767c\u8005\u3002\n\u5b8c\u6210\u6b64\u90e8\u7f72\u5f8c\uff0c\u8acb\u53c3\u95b1 [\u8861\u91cf\u548c\u8abf\u6574 TensorFlow \u63a8\u7406\u7cfb\u7d71\u7684\u6027\u80fd](https://cloud.google.com/architecture/scalable-tensorflow-inference-system/measure-deployment?hl=zh-cn) \u3002\n", "content": "## \u67b6\u69cb\n\u4e0b\u5716\u5c55\u793a\u4e86\u63a8\u7406\u7cfb\u7d71\u7684\u67b6\u69cb\u3002\nCloud Load Balancing \u5c07\u8acb\u6c42\u6d41\u91cf\u767c\u9001\u5230\u6700\u8fd1\u7684 GKE \u96c6\u7fa3\u3002\u96c6\u7fa3\u7684\u6bcf\u500b\u7bc0\u9ede\u5305\u542b\u4e00\u500b Pod\u3002\u5728\u6bcf\u500b Pod \u4e2d\uff0cTriton \u63a8\u7406\u670d\u52d9\u5668\u63d0\u4f9b\u63a8\u7406\u670d\u52d9\uff08\u7528\u65bc\u63d0\u4f9b ResNet-50 \u6a21\u578b\uff09\uff0c\u800c NVIDIA T4 GPU \u53ef\u63d0\u9ad8\u6027\u80fd\u3002\u96c6\u7fa3\u4e0a\u7684\u76e3\u63a7\u670d\u52d9\u5668\u6703\u6536\u96c6\u6709\u95dc GPU \u5229\u7528\u7387\u548c\u5167\u5b58\u7528\u91cf\u7684\u6307\u6a19\u6578\u64da\u3002\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u53ef\u64f4\u7e2e\u7684 TensorFlow \u63a8\u7406\u7cfb\u7d71](https://cloud.google.com/architecture/scalable-tensorflow-inference-system?hl=zh-cn) \u3002\n## \u76ee\u6a19\n- \u4e0b\u8f09 [ResNet-50](https://www.mathworks.com/help/deeplearning/ref/resnet50.html) \u9810\u8a13\u7df4\u6a21\u578b\uff0c\u4e26\u4f7f\u7528 TensorFlow \u8207 TensorRT (TF-TRT) \u7684\u96c6\u6210\u4f86\u61c9\u7528\u512a\u5316\n- \u5f9e NVIDIA Triton \u63a8\u7406\u670d\u52d9\u5668\u63d0\u4f9b ResNet-50 \u6a21\u578b\n- \u4f7f\u7528 [Prometheus](https://prometheus.io/) \u548c [Grafana](https://grafana.com/) \u7232 Titon \u69cb\u5efa\u76e3\u63a7\u7cfb\u7d71\n- \u4f7f\u7528 [Locust](https://locust.io/) \u69cb\u5efa\u8ca0\u8f09\u6e2c\u8a66\u5de5\u5177## \u8cbb\u7528\n\u9664\u4e86 NVIDIA T4 GPU \u4e4b\u5916\uff0c\u5728\u6b64\u90e8\u7f72\u4e2d\uff0c\u60a8\u9084\u53ef\u4ee5\u4f7f\u7528 Google Cloud \u7684\u4ee5\u4e0b\u6536\u8cbb\u7d44\u4ef6\uff1a\n- [Google Kubernetes Engine](https://cloud.google.com/kubernetes-engine/pricing?hl=zh-cn) \n- [Compute Engine](https://cloud.google.com/compute/pricing?hl=zh-cn) \n- [Cloud Storage](https://cloud.google.com/storage/pricing?hl=zh-cn) \n\u5982\u9700\u6839\u64da\u60a8\u7684\u9810\u8a08\u4f7f\u7528\u91cf\u4f86\u4f30\u7b97\u8cbb\u7528\uff0c\u8acb\u4f7f\u7528 [\u50f9\u683c\u8a08\u7b97\u5668](https://cloud.google.com/products/calculator?hl=zh-cn) \u3002\n\u5b8c\u6210\u6b64\u90e8\u7f72\u5f8c\uff0c\u8acb\u52ff\u522a\u9664\u60a8\u5275\u5efa\u7684\u8cc7\u6e90\u3002\u5728 [\u8861\u91cf\u548c\u8abf\u6574\u90e8\u7f72](https://cloud.google.com/architecture/scalable-tensorflow-inference-system/measure-deployment?hl=zh-cn) \u6642\uff0c\u60a8\u9700\u8981\u9019\u4e9b\u8cc7\u6e90\u3002\n## \u6e96\u5099\u5de5\u4f5c\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n## \u4f7f\u7528 TF-TRT \u69cb\u5efa\u512a\u5316\u6a21\u578b\n\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u5275\u5efa\u4e00\u500b\u5de5\u4f5c\u74b0\u5883\u4e26\u512a\u5316\u9810\u8a13\u7df4\u6a21\u578b\u3002\n\u9810\u8a13\u7df4\u6a21\u578b\u4f7f\u7528 `gs://cloud-tpu-test-datasets/fake_imagenet/` \u4e2d\u7684\u865b\u69cb\u6578\u64da\u96c6\u3002Cloud Storage \u4f4d\u7f6e\u9084\u6709 `gs://solutions-public-assets/tftrt-tutorial/resnet/export/1584366419/` \u7684\u9810\u8a13\u7df4\u6a21\u578b\u526f\u672c\u3002\n### \u5275\u5efa\u5de5\u4f5c\u74b0\u5883\n\u5c0d\u65bc\u5de5\u4f5c\u74b0\u5883\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 Deep Learning VM Image \u5275\u5efa Compute Engine \u5be6\u4f8b\u3002\u60a8\u5c07\u5728\u6b64\u5be6\u4f8b\u4e0a\u4f7f\u7528 TensorRT \u512a\u5316\u548c\u91cf\u5316 ResNet-50 \u6a21\u578b\u3002\n-  Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u6fc0\u6d3b Cloud Shell\u3002 [\u6fc0\u6d3b Cloud Shell](https://console.cloud.google.com/?cloudshell=true&hl=zh-cn) \n- \u90e8\u7f72\u540d\u7232 `working-vm` \u7684\u5be6\u4f8b\uff1a```\ngcloud config set project PROJECT_IDgcloud config set compute/zone us-west1-bgcloud compute instances create working-vm \\\u00a0 \u00a0 --scopes cloud-platform \\\u00a0 \u00a0 --image-family common-cu113 \\\u00a0 \u00a0 --image-project deeplearning-platform-release \\\u00a0 \u00a0 --machine-type n1-standard-8 \\\u00a0 \u00a0 --min-cpu-platform=\"Intel Skylake\" \\\u00a0 \u00a0 --accelerator=type=nvidia-tesla-t4,count=1 \\\u00a0 \u00a0 --boot-disk-size=200GB \\\u00a0 \u00a0 --maintenance-policy=TERMINATE \\\u00a0 \u00a0 --metadata=\"install-nvidia-driver=True\"\n```\u5c07 `` \u66ff\u63db\u7232\u60a8\u4e4b\u524d\u5275\u5efa\u7684 Google Cloud \u9805\u76ee\u7684 ID\u3002\u6b64\u547d\u4ee4\u4f7f\u7528 NVIDIA T4 \u5553\u52d5 Compute Engine \u5be6\u4f8b\u3002\u9996\u6b21\u5553\u52d5\u6642\uff0c\u5b83\u6703\u81ea\u52d5\u5b89\u88dd\u8207 TensorRT 5.1.5 \u517c\u5bb9\u7684 NVIDIA GPU \u9a45\u52d5\u7a0b\u5e8f\u3002\n### \u63a1\u7528\u4e0d\u540c\u512a\u5316\u65b9\u5f0f\u5275\u5efa\u6a21\u578b\u6587\u4ef6\n\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u4f7f\u7528 TF-TRT \u5c07\u4ee5\u4e0b\u512a\u5316\u61c9\u7528\u65bc\u539f\u59cb ResNet-50 \u6a21\u578b\uff1a\n- \u5716\u512a\u5316\n- \u4f7f\u7528\u5716\u512a\u5316\u8f49\u63db\u7232 FP16\n- \u4f7f\u7528 INT8 \u91cf\u5316\u5716\u8868\n\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u9019\u4e9b\u512a\u5316\uff0c\u8acb\u53c3\u95b1 [\u6027\u80fd\u512a\u5316](https://cloud.google.com/architecture/scalable-tensorflow-inference-system?hl=zh-cn#performance-optimization) \u3002\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u8f49\u5230 **Compute Engine > \u865b\u64ec\u6a5f\u5be6\u4f8b** \u3002 [\u8f49\u5230\u201c\u865b\u64ec\u6a5f\u5be6\u4f8b\u201d](https://console.cloud.google.com/compute/instances?hl=zh-cn) \u60a8\u6703\u770b\u5230\u4e4b\u524d\u5275\u5efa\u7684 `working-vm` \u5be6\u4f8b\u3002\n- \u5982\u9700\u6253\u958b\u5be6\u4f8b\u7684\u7d42\u7aef\u63a7\u5236\u6aaf\uff0c\u8acb\u9ede\u64ca **SSH** \u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u6b64\u7d42\u7aef\u904b\u884c\u672c\u6587\u6a94\u4e2d\u7684\u5176\u9918\u547d\u4ee4\u3002\n- \u5728\u7d42\u7aef\u4e2d\uff0c\u514b\u9686\u6240\u9700\u7684\u4ee3\u78bc\u5eab\u4e26\u66f4\u6539\u7576\u524d\u76ee\u9304\uff1a```\ncd $HOMEgit clone https://github.com/GoogleCloudPlatform/gke-tensorflow-inference-system-tutorialcd gke-tensorflow-inference-system-tutorial/server\n```\n- \u5c07\u9810\u8a13\u7df4\u7684 ResNet-50 \u6a21\u578b\u4e0b\u8f09\u5230\u672c\u5730\u76ee\u9304\uff1a```\nmkdir -p models/resnet/original/00001gsutil cp -R gs://solutions-public-assets/tftrt-tutorial/resnet/export/1584366419/* models/resnet/original/00001\n```\n- \u69cb\u5efa\u4e00\u500b\u5305\u542b TF-TRT \u512a\u5316\u5de5\u5177\u7684\u5bb9\u5668\u6620\u50cf\uff1a```\ndocker build ./ -t trt-optimizerdocker image list\n```\u6700\u5f8c\u4e00\u500b\u547d\u4ee4\u5c55\u793a\u4e86\u4ee3\u78bc\u5eab\u8868\u3002\n- \u5728\u8868\u4e2d `tft-optimizer` \u4ee3\u78bc\u5eab\u5c0d\u61c9\u7684\u884c\u4e2d\uff0c\u8907\u88fd\u6620\u50cf ID\u3002\n- \u5c07\u512a\u5316\uff08\u5716\u512a\u5316\u3001\u8f49\u63db\u7232 FP16 \u548c\u4f7f\u7528 INT8 \u91cf\u5316\uff09\u61c9\u7528\u65bc\u539f\u59cb\u6a21\u578b\uff1a```\nexport IMAGE_ID=IMAGE_IDnvidia-docker run --rm \\\u00a0 \u00a0 -v `pwd`/models/:/workspace/models ${IMAGE_ID} \\\u00a0 \u00a0 --input-model-dir='models/resnet/original/00001' \\\u00a0 \u00a0 --output-dir='models/resnet' \\\u00a0 \u00a0 --precision-mode='FP32' \\\u00a0 \u00a0 --batch-size=64nvidia-docker run --rm \\\u00a0 \u00a0 -v `pwd`/models/:/workspace/models ${IMAGE_ID} \\\u00a0 \u00a0 --input-model-dir='models/resnet/original/00001' \\\u00a0 \u00a0 --output-dir='models/resnet' \\\u00a0 \u00a0 --precision-mode='FP16' \\\u00a0 \u00a0 --batch-size=64nvidia-docker run --rm \\\u00a0 \u00a0 -v `pwd`/models/:/workspace/models ${IMAGE_ID} \\\u00a0 \u00a0 --input-model-dir='models/resnet/original/00001' \\\u00a0 \u00a0 --output-dir='models/resnet' \\\u00a0 \u00a0 --precision-mode='INT8' \\\u00a0 \u00a0 --batch-size=64 \\\u00a0 \u00a0 --calib-image-dir='gs://cloud-tpu-test-datasets/fake_imagenet/' \\\u00a0 \u00a0 --calibration-epochs=10\n```\u5c07 `` \u66ff\u63db\u7232\u60a8\u5728\u4e0a\u4e00\u6b65\u4e2d\u8907\u88fd\u7684 `tft-optimizer` \u7684\u6620\u50cf ID\u3002`--calib-image-dir` \u9078\u9805\u6307\u5b9a\u7528\u65bc\u9810\u8a13\u7df4\u6a21\u578b\u7684\u8a13\u7df4\u6578\u64da\u7684\u4f4d\u7f6e\u3002\u76f8\u540c\u7684\u8a13\u7df4\u6578\u64da\u7528\u65bc INT8 \u91cf\u5316\u6821\u6e96\u3002\u6821\u6e96\u904e\u7a0b\u53ef\u80fd\u9700\u8981\u5927\u7d04 5 \u5206\u9418\u3002\u547d\u4ee4\u904b\u884c\u5b8c\u7562\u5f8c\uff0c\u6700\u5f8c\u4e00\u500b\u8f38\u51fa\u884c\u985e\u4f3c\u65bc\u4ee5\u4e0b\u5167\u5bb9\uff0c\u5176\u4e2d\u512a\u5316\u7684\u6a21\u578b\u4fdd\u5b58\u5728 `./models/resnet` \u4e2d\uff1a```\nINFO:tensorflow:SavedModel written to: models/resnet/INT8/00001/saved_model.pb\n```\u76ee\u9304\u7d50\u69cb\u985e\u4f3c\u65bc\u4ee5\u4e0b\u5167\u5bb9\uff1a```\nmodels\u2514\u2500\u2500 resnet\u00a0 \u00a0 \u251c\u2500\u2500 FP16\u00a0 \u00a0 \u2502 \u00a0 \u2514\u2500\u2500 00001\u00a0 \u00a0 \u2502 \u00a0 \u00a0 \u00a0 \u251c\u2500\u2500 saved_model.pb\u00a0 \u00a0 \u2502 \u00a0 \u00a0 \u00a0 \u2514\u2500\u2500 variables\u00a0 \u00a0 \u251c\u2500\u2500 FP32\u00a0 \u00a0 \u2502 \u00a0 \u2514\u2500\u2500 00001\u00a0 \u00a0 \u2502 \u00a0 \u00a0 \u00a0 \u251c\u2500\u2500 saved_model.pb\u00a0 \u00a0 \u2502 \u00a0 \u00a0 \u00a0 \u2514\u2500\u2500 variables\u00a0 \u00a0 \u251c\u2500\u2500 INT8\u00a0 \u00a0 \u2502 \u00a0 \u2514\u2500\u2500 00001\u00a0 \u00a0 \u2502 \u00a0 \u00a0 \u00a0 \u251c\u2500\u2500 saved_model.pb\u00a0 \u00a0 \u2502 \u00a0 \u00a0 \u00a0 \u2514\u2500\u2500 variables\u00a0 \u00a0 \u2514\u2500\u2500 original\u00a0 \u00a0 \u00a0 \u00a0 \u2514\u2500\u2500 00001\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u251c\u2500\u2500 saved_model.pb\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u2514\u2500\u2500 variables\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u251c\u2500\u2500 variables.data-00000-of-00001\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u2514\u2500\u2500 variables.index\n```\n\u4e0b\u8868\u7e3d\u7d50\u4e86\u76ee\u9304\u548c\u512a\u5316\u4e4b\u9593\u7684\u95dc\u4fc2\u3002\n| \u76ee\u9304  | \u512a\u5316       |\n|:---------|:-------------------------------|\n| FP16  | \u9664\u5716\u512a\u5316\u5916\uff0c\u8f49\u63db\u7232 FP16  |\n| FP32  | \u5716\u512a\u5316       |\n| INT8  | \u9664\u5716\u512a\u5316\u5916\uff0c\u4f7f\u7528 INT8 \u9032\u884c\u91cf\u5316 |\n| original | \u539f\u59cb\u6a21\u578b\uff08\u672a\u7d93 TF-TRT \u512a\u5316\uff09 |\n## \u90e8\u7f72\u63a8\u7406\u670d\u52d9\u5668\n\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u90e8\u7f72\u5177\u6709\u4e94\u500b\u6a21\u578b\u7684 Triton \u670d\u52d9\u5668\u3002\u9996\u5148\uff0c\u5c07\u60a8\u5728\u4e0a\u4e00\u90e8\u5206\u4e2d\u5275\u5efa\u7684\u6a21\u578b\u4e8c\u9032\u5236\u6587\u4ef6\u4e0a\u50b3\u5230 Cloud Storage\u3002\u7136\u5f8c\u5275\u5efa\u4e00\u500b GKE \u96c6\u7fa3\u4e26\u5728\u8a72\u96c6\u7fa3\u4e0a\u90e8\u7f72 Triton \u670d\u52d9\u5668\u3002\n### \u4e0a\u50b3\u6a21\u578b\u4e8c\u9032\u5236\u6587\u4ef6\n- \u5728 SSH \u7d42\u7aef\u4e2d\uff0c\u5c07\u6a21\u578b\u4e8c\u9032\u5236\u6587\u4ef6\u548c `config.pbtxt` \u914d\u7f6e\u6587\u4ef6\u4e0a\u50b3\u5230\u5b58\u5132\u6876\uff1a```\nexport PROJECT_ID=PROJECT_IDexport BUCKET_NAME=${PROJECT_ID}-modelsmkdir -p original/1/model/cp -r models/resnet/original/00001/* original/1/model/cp original/config.pbtxt original/1/model/cp original/imagenet1k_labels.txt original/1/model/mkdir -p tftrt_fp32/1/model/cp -r models/resnet/FP32/00001/* tftrt_fp32/1/model/cp tftrt_fp32/config.pbtxt tftrt_fp32/1/model/cp tftrt_fp32/imagenet1k_labels.txt tftrt_fp32/1/model/mkdir -p tftrt_fp16/1/model/cp -r models/resnet/FP16/00001/* tftrt_fp16/1/model/cp tftrt_fp16/config.pbtxt tftrt_fp16/1/model/cp tftrt_fp16/imagenet1k_labels.txt tftrt_fp16/1/model/mkdir -p tftrt_int8/1/model/cp -r models/resnet/INT8/00001/* tftrt_int8/1/model/cp tftrt_int8/config.pbtxt tftrt_int8/1/model/cp tftrt_int8/imagenet1k_labels.txt tftrt_int8/1/model/mkdir -p tftrt_int8_bs16_count4/1/model/cp -r models/resnet/INT8/00001/* tftrt_int8_bs16_count4/1/model/cp tftrt_int8_bs16_count4/config.pbtxt tftrt_int8_bs16_count4/1/model/cp tftrt_int8_bs16_count4/imagenet1k_labels.txt tftrt_int8_bs16_count4/1/model/gsutil mb gs://${BUCKET_NAME}gsutil -m cp -R original tftrt_fp32 tftrt_fp16 tftrt_int8 tftrt_int8_bs16_count4 \\\u00a0 \u00a0 gs://${BUCKET_NAME}/resnet/\n```\u5c07 `` \u66ff\u63db\u7232\u60a8\u4e4b\u524d\u5275\u5efa\u7684 Google Cloud \u9805\u76ee\u7684 ID\u3002\u4ee5\u4e0b\u8abf\u7bc0\u53c3\u6578\u5728 `config.pbtxt` \u6587\u4ef6\u4e2d\u6307\u5b9a\uff1a- \u6a21\u578b\u540d\u7a31\n- \u8f38\u5165\u5f35\u91cf\u540d\u7a31\u548c\u8f38\u51fa\u5f35\u91cf\u540d\u7a31\n- \u7232\u6bcf\u500b\u6a21\u578b\u5206\u914d GPU\n- \u5be6\u4f8b\u7d44\u7684\u6279\u6b21\u5927\u5c0f\u548c\u6578\u91cf\n\u4f8b\u5982\uff0c `original/1/model/config.pbtxt` \u6587\u4ef6\u5305\u542b\u4ee5\u4e0b\u5167\u5bb9\uff1a```\nname: \"original\"platform: \"tensorflow_savedmodel\"max_batch_size: 64input {\u00a0 \u00a0 name: \"input\"\u00a0 \u00a0 data_type: TYPE_FP32\u00a0 \u00a0 format: FORMAT_NHWC\u00a0 \u00a0 dims: [ 224, 224, 3 ]}output {\u00a0 \u00a0 name: \"probabilities\"\u00a0 \u00a0 data_type: TYPE_FP32\u00a0 \u00a0 dims: 1000\u00a0 \u00a0 label_filename: \"imagenet1k_labels.txt\"}default_model_filename: \"model\"instance_group [\u00a0 {\u00a0 \u00a0 count: 1\u00a0 \u00a0 kind: KIND_GPU\u00a0 }]dynamic_batching {\u00a0 preferred_batch_size: [ 64 ]\u00a0 max_queue_delay_microseconds: 20000}\n```\n\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u5be6\u4f8b\u7d44\u7684\u6279\u6b21\u5927\u5c0f\u548c\u6578\u91cf\uff0c\u8acb\u53c3\u95b1 [\u6027\u80fd\u512a\u5316](https://cloud.google.com/architecture/scalable-tensorflow-inference-system?hl=zh-cn#performance-optimization) \u3002\n\u4e0b\u8868\u5f59\u7e3d\u4e86\u60a8\u5728\u672c\u90e8\u5206\u90e8\u7f72\u7684\u4e94\u500b\u6a21\u578b\u3002\n| \u6a21\u578b\u540d\u7a31    | \u512a\u5316              |\n|:-----------------------|:---------------------------------------------------------|\n| original    | \u539f\u59cb\u6a21\u578b\uff08\u672a\u7d93 TF-TRT \u512a\u5316\uff09        |\n| tftrt_fp32    | \u5716\u512a\u5316 \uff08\u6279\u6b21\u5927\u5c0f=64\uff0c\u5be6\u4f8b\u7d44=1\uff09       |\n| tftrt_fp16    | \u9664\u5716\u512a\u5316\u5916\uff0c\u8f49\u63db\u7232 FP16 \uff08\u6279\u6b21\u5927\u5c0f=64\uff0c\u5be6\u4f8b\u7d44=1\uff09  |\n| tftrt_int8    | \u9664\u5716\u512a\u5316\u5916\uff0c\u4f7f\u7528 INT8 \u9032\u884c\u91cf\u5316 \uff08\u6279\u6b21\u5927\u5c0f=64\uff0c\u5be6\u4f8b\u7d44=1\uff09 |\n| tftrt_int8_bs16_count4 | \u9664\u5716\u512a\u5316\u5916\uff0c\u4f7f\u7528 INT8 \u9032\u884c\u91cf\u5316 \uff08\u6279\u6b21\u5927\u5c0f=16\uff0c\u5be6\u4f8b\u7d44=4\uff09 |\n### \u4f7f\u7528 Titon \u90e8\u7f72\u63a8\u7406\u670d\u52d9\u5668\n- \u5728 SSH \u7d42\u7aef\u4e2d\uff0c\u5b89\u88dd\u4e26\u914d\u7f6e\u7528\u65bc\u7ba1\u7406 GKE \u96c6\u7fa3\u7684\u8eab\u4efd\u9a57\u8b49\u8edf\u4ef6\u5305\uff1a```\nexport USE_GKE_GCLOUD_AUTH_PLUGIN=Truesudo apt-get install google-cloud-sdk-gke-gcloud-auth-plugin\n```\n- \u5275\u5efa GKE \u96c6\u7fa3\u4ee5\u53ca\u5177\u6709\u4f7f\u7528 NVIDIA T4 GPU \u7684\u8a08\u7b97\u7bc0\u9ede\u7684 GPU \u7bc0\u9ede\u6c60\uff1a```\ngcloud auth logingcloud config set compute/zone us-west1-bgcloud container clusters create tensorrt-cluster \\\u00a0 \u00a0 --num-nodes=20gcloud container node-pools create t4-gpu-pool \\\u00a0 \u00a0 --num-nodes=1 \\\u00a0 \u00a0 --machine-type=n1-standard-8 \\\u00a0 \u00a0 --cluster=tensorrt-cluster \\\u00a0 \u00a0 --accelerator type=nvidia-tesla-t4,count=1\n````--num-nodes` \u6a19\u8a8c\u7232 GKE \u96c6\u7fa3\u6307\u5b9a 20 \u500b\u5be6\u4f8b\uff0c\u4f75\u7232 GPU \u7bc0\u9ede\u6c60 `t4-gpu-pool` \u6307\u5b9a\u4e00\u500b\u5be6\u4f8b\u3002GPU \u7bc0\u9ede\u6c60\u5305\u542b\u4e00\u500b\u5e36\u6709 NVIDIA T4 GPU \u7684 `n1-standard-8` \u5be6\u4f8b\u3002GPU \u5be6\u4f8b\u6578\u91cf\u61c9\u5927\u65bc\u6216\u7b49\u65bc\u63a8\u7406\u670d\u52d9\u5668 pod \u7684\u6578\u91cf\uff0c\u56e0\u7232\u5728\u540c\u4e00\u5be6\u4f8b\u4e0a\u591a\u500b pod \u4e0d\u80fd\u5171\u7528 NVIDIA T4 GPU\u3002\n- \u986f\u793a\u96c6\u7fa3\u4fe1\u606f\uff1a```\ngcloud container clusters list\n```\u8f38\u51fa\u985e\u4f3c\u65bc\u4ee5\u4e0b\u5167\u5bb9\uff1a```\nNAME    LOCATION MASTER_VERSION MASTER_IP  MACHINE_TYPE NODE_VERSION NUM_NODES STATUS\ntensorrt-cluster us-west1-b 1.14.10-gke.17 XX.XX.XX.XX n1-standard-1 1.14.10-gke.17 21   RUNNING\n```\n- \u986f\u793a\u7bc0\u9ede\u6c60\u4fe1\u606f\uff1a```\ngcloud container node-pools list --cluster tensorrt-cluster\n```\u8f38\u51fa\u985e\u4f3c\u65bc\u4ee5\u4e0b\u5167\u5bb9\uff1a```\nNAME   MACHINE_TYPE DISK_SIZE_GB NODE_VERSION\ndefault-pool n1-standard-1 100   1.14.10-gke.17\nt4-pool  n1-standard-8 100   1.14.10-gke.17\n```\n- \u5553\u7528 `daemonSet` \u5de5\u4f5c\u8ca0\u8f09\uff1a```\ngcloud container clusters get-credentials tensorrt-clusterkubectl apply -f https://raw.githubusercontent.com/GoogleCloudPlatform/container-engine-accelerators/master/nvidia-driver-installer/cos/daemonset-preloaded.yaml\n```\u6b64\u547d\u4ee4\u6703\u5728 GPU \u7bc0\u9ede\u6c60\u4e2d\u7684\u7bc0\u9ede\u4e0a\u52a0\u8f09 NVIDIA GPU \u9a45\u52d5\u7a0b\u5e8f\u3002\u7576\u60a8\u5411 GPU \u7bc0\u9ede\u6c60\u6dfb\u52a0\u65b0\u7bc0\u9ede\u6642\uff0c\u5b83\u4e5f\u6703\u81ea\u52d5\u52a0\u8f09\u9a45\u52d5\u7a0b\u5e8f\u3002\n- \u5728\u96c6\u7fa3\u4e0a\u90e8\u7f72\u63a8\u7406\u670d\u52d9\u5668\uff1a```\nsed -i.bak \"s/YOUR-BUCKET-NAME/${PROJECT_ID}-models/\" trtis_deploy.yamlkubectl create -f trtis_service.yamlkubectl create -f trtis_deploy.yaml\n``` **\u6ce8\u610f** \uff1a\u8acb\u52ff\u66f4\u6539 `YOUR-BUCKET-NAME` \u6216\u5c07\u5176\u66ff\u63db\u7232\u60a8\u7684\u771f\u5be6\u5b58\u5132\u6876\u540d\u7a31\u3002\n- \u7b49\u5f85\u5e7e\u5206\u9418\uff0c\u76f4\u5230\u670d\u52d9\u53ef\u7528\u3002\n- \u7372\u53d6 Triton \u7684 `clusterIP` \u5730\u5740\uff0c\u4e26\u5c07\u5176\u5b58\u5132\u5728\u74b0\u5883\u8b8a\u91cf\u4e2d\uff1a```\nexport TRITON_IP=$(kubectl get svc inference-server \\\u00a0 -o \"jsonpath={.spec['clusterIP']}\")echo ${TRITON_IP}\n```\n\u6b64\u6642\uff0c\u63a8\u7406\u670d\u52d9\u5668\u63d0\u4f9b\u60a8\u5728 [\u63a1\u7528\u4e0d\u540c\u512a\u5316\u65b9\u5f0f\u5275\u5efa\u6a21\u578b\u6587\u4ef6](#create-model-files-with-different-optimizations) \u90e8\u5206\u4e2d\u5275\u5efa\u7684\u56db\u500b ResNet-50 \u6a21\u578b\u3002\u5ba2\u6236\u7aef\u53ef\u4ee5\u6307\u5b9a\u5728\u767c\u9001\u63a8\u7406\u8acb\u6c42\u6642\u8981\u4f7f\u7528\u7684\u6a21\u578b\u3002\n### \u4f7f\u7528 Prometheus \u548c Grafana \u90e8\u7f72\u76e3\u63a7\u670d\u52d9\u5668\n- \u5728 SSH \u7d42\u7aef\u4e2d\uff0c\u5728\u96c6\u7fa3\u4e0a\u90e8\u7f72 Prometheus \u670d\u52d9\u5668\uff1a```\nsed -i.bak \"s/CLUSTER-IP/${TRITON_IP}/\" prometheus-configmap.ymlkubectl create namespace monitoringkubectl apply -f prometheus-service.yml -n monitoringkubectl create -f clusterRole.ymlkubectl create -f prometheus-configmap.yml -n monitoringkubectl create -f prometheus-deployment.yml -n monitoring\n```\n- \u7372\u53d6 Prometheus \u670d\u52d9\u7684\u7aef\u9ede\u7db2\u5740\u3002```\nip_port=$(kubectl get svc prometheus-service \\\u00a0 -o \"jsonpath={.spec['clusterIP']}:{.spec['ports'][0]['port']}\" -n monitoring)echo \"http://${ip_port}\"\n```\u8a18\u4e0b Prometheus \u7aef\u9ede\u7db2\u5740\uff0c\u56e0\u7232\u7a0d\u5f8c\u4f7f\u7528\u5b83\u4f86\u914d\u7f6e Grafana\u3002\n- \u5728\u96c6\u7fa3\u4e0a\u90e8\u7f72 Grafana \u670d\u52d9\u5668\uff1a```\nkubectl create -f grafana-service.yml -n monitoringkubectl create -f grafana-deployment.yml -n monitoring\n```\n- \u7b49\u5f85\u5e7e\u5206\u9418\uff0c\u76f4\u5230\u6240\u6709\u670d\u52d9\u53ef\u7528\u3002\n- \u7372\u53d6 Grafana \u670d\u52d9\u7684\u7aef\u9ede\u7db2\u5740\u3002```\nip_port=$(kubectl get svc grafana-service \\\u00a0 -o \"jsonpath={.status['loadBalancer']['ingress'][0]['ip']}:{.spec['ports'][0]['port']}\" -n monitoring)echo \"http://${ip_port}\"\n```\u8a18\u4e0b Grafana \u7aef\u9ede\u7db2\u5740\uff0c\u4ee5\u4fbf\u5728\u4e0b\u4e00\u6b65\u4e2d\u4f7f\u7528\u3002\n- \u5728\u7db2\u7d61\u700f\u89bd\u5668\u4e2d\uff0c\u8f49\u5230\u60a8\u5728\u4e0a\u4e00\u6b65\u8a18\u4e0b\u7684 Grafana \u7db2\u5740\u3002\n- \u4f7f\u7528\u9ed8\u8a8d\u7528\u6236 ID \u548c\u5bc6\u78bc\uff08 `admin` \u548c `admin` \uff09\u767b\u9304\u3002\u51fa\u73fe\u63d0\u793a\u6642\uff0c\u66f4\u6539\u9ed8\u8a8d\u5bc6\u78bc\u3002\n- \u9ede\u64ca **\u6dfb\u52a0\u60a8\u7684\u9996\u500b\u6578\u64da\u6e90** \uff0c\u7136\u5f8c\u5728 **\u6642\u5e8f\u6578\u64da\u5eab** \u5217\u8868\u4e2d\u9078\u64c7 **Prometheus** \u3002\n- \u5728 **\u8a2d\u7f6e** \u6a19\u7c64\u9801\u7684 **\u7db2\u5740** \u5b57\u6bb5\u4e2d\uff0c\u8f38\u5165\u60a8\u4e4b\u524d\u8a18\u4e0b\u7684 Prometheus \u7aef\u9ede\u7db2\u5740\u3002\n- \u9ede\u64ca **\u4fdd\u5b58\u4e26\u6e2c\u8a66** \uff0c\u7136\u5f8c\u8fd4\u56de\u4e3b\u5c4f\u5e55\u3002\n- \u7232 `nv_gpu_utilization` \u6dfb\u52a0\u76e3\u63a7\u6307\u6a19\uff1a- \u9ede\u64ca **\u5275\u5efa\u60a8\u7684\u9996\u500b\u4fe1\u606f\u4e2d\u5fc3** \uff0c\u7136\u5f8c\u9ede\u64ca **\u6dfb\u52a0\u53ef\u8996\u5316** \u3002\n- \u5728 **\u6578\u64da\u6e90** \u5217\u8868\u4e2d\uff0c\u9078\u64c7 **Prometheus** \u3002\n- \u5728 **\u67e5\u8a62** \u6a19\u7c64\u9801\u7684 **\u6307\u6a19** \u5b57\u6bb5\u4e2d\uff0c\u8f38\u5165 `nv_gpu_utilization` \u3002\n- \u5728 **\u9762\u677f\u9078\u9805** \u90e8\u5206\u7684 **\u6a19\u984c** \u5b57\u6bb5\u4e2d\uff0c\u8f38\u5165 `GPU Utilization` \uff0c\u7136\u5f8c\u9ede\u64ca **\u61c9\u7528** \u3002\u8a72\u9801\u9762\u986f\u793a\u4e86\u4e00\u500b GPU \u5229\u7528\u7387\u9762\u677f\u3002\n- \u7232 `nv_gpu_memory_used_bytes` \u6dfb\u52a0\u76e3\u63a7\u6307\u6a19\uff1a- \u9ede\u64ca **\u6dfb\u52a0** \uff0c\u7136\u5f8c\u9078\u64c7 **\u53ef\u8996\u5316** \u3002\n- \u5728 **\u67e5\u8a62** \u6a19\u7c64\u9801\u7684 **\u6307\u6a19** \u5b57\u6bb5\u4e2d\uff0c\u8f38\u5165 `nv_gpu_memory_used_bytes` \u3002\n- \u5728 **\u9762\u677f\u9078\u9805** \u90e8\u5206\u7684 **\u6a19\u984c** \u5b57\u6bb5\u4e2d\uff0c\u8f38\u5165 `GPU Memory Used` \uff0c\u7136\u5f8c\u9ede\u64ca **\u4fdd\u5b58** \u3002\n- \u5982\u9700\u6dfb\u52a0\u4fe1\u606f\u4e2d\u5fc3\uff0c\u8acb\u5728 **\u4fdd\u5b58\u4fe1\u606f\u4e2d\u5fc3** \u9762\u677f\u4e2d\u9ede\u64ca **\u4fdd\u5b58** \u3002\u60a8\u6703\u770b\u5230 GPU \u5229\u7528\u7387\u548c GPU \u5167\u5b58\u7528\u91cf\u7684\u5716\u8868\u3002## \u90e8\u7f72\u8ca0\u8f09\u6e2c\u8a66\u5de5\u5177\n\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u5728 GKE \u4e0a\u90e8\u7f72 Locust \u8ca0\u8f09\u6e2c\u8a66\u5de5\u5177\uff0c\u4e26\u751f\u6210\u5de5\u4f5c\u8ca0\u8f09\u4f86\u8861\u91cf\u63a8\u7406\u670d\u52d9\u5668\u7684\u6027\u80fd\u3002\n- \u5728 SSH \u7d42\u7aef\u4e2d\uff0c\u69cb\u5efa\u4e00\u500b\u5305\u542b Triton \u5ba2\u6236\u7aef\u5eab\u7684 Docker \u6620\u50cf\uff0c\u4e26\u5c07\u5176\u4e0a\u50b3\u5230 Container Registry\uff1a```\ncd ../clientgit clone https://github.com/triton-inference-server/servercd servergit checkout r19.05sed -i.bak \"s/bootstrap.pypa.io\\/get-pip.py/bootstrap.pypa.io\\/pip\\/2.7\\/get-pip.py/\" Dockerfile.clientdocker build -t tritonserver_client -f Dockerfile.client .gcloud auth configure-dockerdocker tag tritonserver_client \\\u00a0 \u00a0 gcr.io/${PROJECT_ID}/tritonserver_clientdocker push gcr.io/${PROJECT_ID}/tritonserver_client\n```\u69cb\u5efa\u904e\u7a0b\u53ef\u80fd\u9700\u8981\u5927\u7d04 5 \u5206\u9418\u3002 \u5b8c\u6210\u6b64\u904e\u7a0b\u5f8c\uff0cSSH \u7d42\u7aef\u4e2d\u6703\u986f\u793a\u547d\u4ee4\u63d0\u793a\u7b26\u3002\n- \u69cb\u5efa\u6d41\u7a0b\u5b8c\u6210\u5f8c\uff0c\u69cb\u5efa\u4e00\u500b Docker \u6620\u50cf\u4ee5\u751f\u6210\u6e2c\u8a66\u5de5\u4f5c\u8ca0\u8f09\uff0c\u4e26\u5c07\u5176\u4e0a\u50b3\u5230 Container Registry\uff1a```\ncd ..sed -i.bak \"s/YOUR-PROJECT-ID/${PROJECT_ID}/\" Dockerfiledocker build -t locust_tester -f Dockerfile .docker tag locust_tester gcr.io/${PROJECT_ID}/locust_testerdocker push gcr.io/${PROJECT_ID}/locust_tester\n```\u8acb\u52ff\u66f4\u6539\u6216\u66ff\u63db\u547d\u4ee4\u4e2d\u7684 `YOUR-PROJECT-ID` \u3002\u6b64\u6620\u50cf\u6839\u64da\u60a8\u5728\u4e0a\u4e00\u6b65\u4e2d\u5275\u5efa\u7684\u6620\u50cf\u69cb\u5efa\u800c\u6210\u3002\n- \u90e8\u7f72 Locust \u6587\u4ef6 `service_master.yaml` \u548c `deployment_master.yaml` \uff1a```\nsed -i.bak \"s/YOUR-PROJECT-ID/${PROJECT_ID}/\" deployment_master.yamlsed -i.bak \"s/CLUSTER-IP-TRTIS/${TRITON_IP}/\" deployment_master.yamlkubectl create namespace locustkubectl create configmap locust-config --from-literal model=original --from-literal saddr=${TRITON_IP} --from-literal rps=10 -n locustkubectl apply -f service_master.yaml -n locustkubectl apply -f deployment_master.yaml -n locust\n````configmap` \u8cc7\u6e90\u7528\u65bc\u6307\u5b9a\u5ba2\u6236\u7aef\u5c07\u63a8\u7406\u8acb\u6c42\u767c\u9001\u5230\u7684\u6a5f\u5668\u5b78\u7fd2\u6a21\u578b\u3002\n- \u7b49\u5f85\u5e7e\u5206\u9418\uff0c\u76f4\u5230\u670d\u52d9\u53ef\u7528\u3002\n- \u7372\u53d6 `locust-master` \u5ba2\u6236\u7aef\u7684 `clusterIP` \u5730\u5740\uff0c\u4e26\u5c07\u8a72\u5730\u5740\u5b58\u5132\u5728\u74b0\u5883\u8b8a\u91cf\u4e2d\uff1a```\nexport LOCUST_MASTER_IP=$(kubectl get svc locust-master -n locust \\\u00a0 \u00a0 -o \"jsonpath={.spec['clusterIP']}\")echo ${LOCUST_MASTER_IP}\n```\n- \u90e8\u7f72 Locust \u5ba2\u6236\u7aef\uff1a```\nsed -i.bak \"s/YOUR-PROJECT-ID/${PROJECT_ID}/\" deployment_slave.yamlsed -i.bak \"s/CLUSTER-IP-LOCUST-MASTER/${LOCUST_MASTER_IP}/\" deployment_slave.yamlkubectl apply -f deployment_slave.yaml -n locust\n```\u9019\u4e9b\u547d\u4ee4\u6703\u90e8\u7f72 10 \u500b Locust \u5ba2\u6236\u7aef Pod\uff0c\u4f9b\u60a8\u751f\u6210\u6e2c\u8a66\u5de5\u4f5c\u8ca0\u8f09\u3002\u5982\u679c\u60a8\u7121\u6cd5\u4f7f\u7528\u7576\u524d\u6578\u91cf\u7684\u5ba2\u6236\u7aef\u751f\u6210\u8db3\u5920\u7684\u8acb\u6c42\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u66f4\u6539 Pod \u6578\u91cf\uff1a```\nkubectl scale deployment/locust-slave --replicas=20 -n locust\n```\u5982\u679c\u9ed8\u8a8d\u96c6\u7fa3\u6c92\u6709\u8db3\u5920\u7684\u5bb9\u91cf\u4f86\u589e\u52a0\u526f\u672c\u7684\u6578\u91cf\uff0c\u6211\u5011\u5efa\u8b70\u60a8\u589e\u52a0 GKE \u96c6\u7fa3\u4e2d\u7684\u7bc0\u9ede\u6578\u91cf\u3002\n- \u8907\u88fd Locust \u63a7\u5236\u6aaf\u7684\u7db2\u5740\uff0c\u4e26\u5728\u7db2\u7d61\u700f\u89bd\u5668\u4e2d\u6253\u958b\u4ee5\u4e0b\u7db2\u5740\uff1a```\nexport LOCUST_IP=$(kubectl get svc locust-master -n locust \\\u00a0 \u00a0 \u00a0-o \"jsonpath={.status.loadBalancer.ingress[0].ip}\")echo \"http://${LOCUST_IP}:8089\"\n```Locust \u63a7\u5236\u6aaf\u96a8\u5373\u6253\u958b\uff0c\u60a8\u53ef\u4ee5\u5f9e\u4e2d\u751f\u6210\u6e2c\u8a66\u5de5\u4f5c\u8ca0\u8f09\u3002## \u6aa2\u67e5\u6b63\u5728\u904b\u884c\u7684 Pod\n\u8981\u78ba\u4fdd\u7d44\u4ef6\u5df2\u6210\u529f\u90e8\u7f72\uff0c\u8acb\u6aa2\u67e5 Pod \u662f\u5426\u6b63\u5728\u904b\u884c\u3002\n- \u5728 SSH \u7d42\u7aef\u4e2d\uff0c\u6aa2\u67e5\u63a8\u7406\u670d\u52d9\u5668 Pod\uff1a```\nkubectl get pods\n```\u8f38\u51fa\u985e\u4f3c\u65bc\u4ee5\u4e0b\u5167\u5bb9\uff1a```\nNAME        READY STATUS RESTARTS AGE\ninference-server-67786cddb4-qrw6r 1/1  Running 0   83m\n```\u5982\u679c\u60a8\u6c92\u6709\u7372\u5f97\u9810\u671f\u8f38\u51fa\uff0c\u8acb\u78ba\u4fdd\u60a8\u5df2\u5b8c\u6210 [\u4f7f\u7528 Triton \u90e8\u7f72\u63a8\u7406\u670d\u52d9\u5668](#deploy_inference_servers_by_using_triton) \u4e2d\u7684\u6b65\u9a5f\u3002\n- \u6aa2\u67e5 Locust Pod\uff1a```\nkubectl get pods -n locust\n```\u8f38\u51fa\u985e\u4f3c\u65bc\u4ee5\u4e0b\u5167\u5bb9\uff1a```\nNAME        READY STATUS RESTARTS AGE\nlocust-master-75f6f6d4bc-ttllr  1/1  Running 0   10m\nlocust-slave-76ddb664d9-8275p  1/1  Running 0   2m36s\nlocust-slave-76ddb664d9-f45ww  1/1  Running 0   2m36s\nlocust-slave-76ddb664d9-q95z9  1/1  Running 0   2m36s\n```\u5982\u679c\u60a8\u6c92\u6709\u7372\u5f97\u9810\u671f\u8f38\u51fa\uff0c\u8acb\u78ba\u4fdd\u60a8\u5df2\u5b8c\u6210 [\u90e8\u7f72\u8ca0\u8f09\u6e2c\u8a66\u5de5\u5177](#deploy-load-testing-tool) \u4e2d\u7684\u6b65\u9a5f\u3002\n- \u6aa2\u67e5\u76e3\u63a7 Pod\uff1a```\nkubectl get pods -n monitoring\n```\u8f38\u51fa\u985e\u4f3c\u65bc\u4ee5\u4e0b\u5167\u5bb9\uff1a```\nNAME          READY STATUS RESTARTS AGE\ngrafana-deployment-644bbcb84-k6t7v  1/1  Running 0   79m\nprometheus-deployment-544b9b9f98-hl7q8 1/1  Running 0   81m\n```\u5982\u679c\u60a8\u6c92\u6709\u7372\u5f97\u9810\u671f\u8f38\u51fa\uff0c\u8acb\u78ba\u4fdd\u60a8\u5df2\u5b8c\u6210 [\u4f7f\u7528 Prometheus \u548c Grafana \u90e8\u7f72\u76e3\u63a7\u670d\u52d9\u5668](#deploy-monitoring-servers) \u4e2d\u7684\u6b65\u9a5f\u3002\n\u5728\u672c\u6559\u7a0b\u7cfb\u5217\u7684\u4e0b\u4e00\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u4f7f\u7528\u6b64\u63a8\u7406\u670d\u52d9\u5668\u7cfb\u7d71\u77ad\u89e3\u5404\u7a2e\u512a\u5316\u5982\u4f55\u63d0\u9ad8\u6027\u80fd\u4ee5\u53ca\u5982\u4f55\u89e3\u8b80\u9019\u4e9b\u512a\u5316\u3002 \u5982\u9700\u77ad\u89e3\u5f8c\u7e8c\u6b65\u9a5f\uff0c\u8acb\u53c3\u95b1 [\u8861\u91cf\u548c\u8abf\u6574 TensorFlow \u63a8\u7406\u7cfb\u7d71\u7684\u6027\u80fd](https://cloud.google.com/architecture/scalable-tensorflow-inference-system/measure-deployment?hl=zh-cn) \u3002\n## \u5f8c\u7e8c\u6b65\u9a5f\n- \u8a73\u7d30\u77ad\u89e3 [Google Kubernetes Engine (GKE)](https://cloud.google.com/kubernetes-engine?hl=zh-cn) \u3002\n- \u8a73\u7d30\u77ad\u89e3 [Cloud Load Balancing](https://cloud.google.com/load-balancing?hl=zh-cn) \u3002\n- \u5982\u9700\u67e5\u770b\u66f4\u591a\u53c3\u8003\u67b6\u69cb\u3001\u5716\u8868\u548c\u6700\u4f73\u5be6\u8e10\uff0c\u8acb\u700f\u89bd [\u96f2\u67b6\u69cb\u4e2d\u5fc3](https://cloud.google.com/architecture?hl=zh-cn) \u3002", "guide": "Docs"}