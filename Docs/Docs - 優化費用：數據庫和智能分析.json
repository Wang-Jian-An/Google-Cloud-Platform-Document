{"title": "Docs - \u512a\u5316\u8cbb\u7528\uff1a\u6578\u64da\u5eab\u548c\u667a\u80fd\u5206\u6790", "url": "https://cloud.google.com/architecture/framework/cost-optimization/databases?hl=zh-cn", "abstract": "# Docs - \u512a\u5316\u8cbb\u7528\uff1a\u6578\u64da\u5eab\u548c\u667a\u80fd\u5206\u6790\nLast reviewed 2023-06-26 UTC\n[Google Cloud \u67b6\u69cb\u6846\u67b6](https://cloud.google.com/architecture/framework?hl=zh-cn) \u4e2d\u7684\u672c\u6587\u6a94\u63d0\u4f9b\u4e86\u5efa\u8b70\uff0c\u4ee5\u5e6b\u52a9\u60a8\u512a\u5316 Google Cloud \u4e2d\u7684\u6578\u64da\u5eab\u548c\u5206\u6790\u5de5\u4f5c\u8ca0\u8f09\u7684\u8cbb\u7528\u3002\n\u672c\u90e8\u5206\u4e2d\u7684\u6307\u5c0e\u9069\u7528\u65bc\u8ca0\u8cac\u9810\u914d\u4e26\u7ba1\u7406\u96f2\u6578\u64da\u5eab\u548c\u5206\u6790\u5de5\u4f5c\u8ca0\u8f09\u7684\u67b6\u69cb\u5e2b\u3001\u958b\u767c\u8005\u548c\u7ba1\u7406\u54e1\u3002\n\u672c\u90e8\u5206\u5305\u62ec\u91dd\u5c0d\u4ee5\u4e0b\u7522\u54c1\u7684\u8cbb\u7528\u512a\u5316\u5efa\u8b70\uff1a\n- [Cloud SQL](#sql) \n- [Spanner](#spanner) \n- [Bigtable](#bigtable) \n- [BigQuery](#bigquery) \n- [Dataflow](#dataflow) \n- [Dataproc](#dataproc) ", "content": "## Cloud SQL\n[Cloud SQL](https://cloud.google.com/sql?hl=zh-cn) \u662f\u4e00\u9805\u9069\u7528\u65bc MySQL\u3001PostgreSQL \u548c SQL Server \u7684\u5168\u4ee3\u7ba1\u5f0f\u95dc\u4fc2\u578b\u6578\u64da\u5eab\u670d\u52d9\u3002\n### \u76e3\u63a7\u7528\u91cf\n\u67e5\u770b [\u76e3\u63a7\u4fe1\u606f\u4e2d\u5fc3](https://console.cloud.google.com/monitoring/dashboards/resourceList/cloudsql_database?hl=zh-cn) \u4e0a\u7684\u6307\u6a19\uff0c\u4e26\u9a57\u8b49\u60a8\u7684\u90e8\u7f72\u662f\u5426\u6eff\u8db3\u5de5\u4f5c\u8ca0\u8f09\u7684\u8981\u6c42\u3002\n### \u512a\u5316\u8cc7\u6e90\n\u4ee5\u4e0b\u5efa\u8b70\u53ef\u5e6b\u52a9\u60a8\u512a\u5316 Cloud SQL \u8cc7\u6e90\uff1a\n- \u8a2d\u8a08\u8207\u60a8\u7684\u6062\u5fa9\u6642\u9593\u76ee\u6a19 (RTO) \u548c\u6062\u5fa9\u9ede\u76ee\u6a19 (RPO) \u4e00\u81f4\u7684\u9ad8\u53ef\u7528\u6027\u548c\u707d\u96e3\u6062\u5fa9\u7b56\u7565\u3002\u6839\u64da\u60a8\u7684\u5de5\u4f5c\u8ca0\u8f09\uff0c\u6211\u5011\u5efa\u8b70\u60a8\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a- \u5c0d\u65bc\u9700\u8981\u8f03\u77ed RTO \u548c RPO \u7684\u5de5\u4f5c\u8ca0\u8f09\uff0c\u8acb\u4f7f\u7528 [\u9ad8\u53ef\u7528\u6027\u914d\u7f6e](https://cloud.google.com/sql/docs/mysql/configure-ha?hl=zh-cn) \u548c [\u5340\u57df\u6545\u969c\u5207\u63db\u7684\u526f\u672c](https://cloud.google.com/sql/docs/mysql/replication/cross-region-replicas?hl=zh-cn) \u3002\n- \u5c0d\u65bc\u53ef\u4ee5\u627f\u53d7\u66f4\u9577 RTO \u548c RPO \u7684\u5de5\u4f5c\u8ca0\u8f09\uff0c\u8acb\u4f7f\u7528\u81ea\u52d5\u548c\u6309\u9700 [\u5099\u4efd](https://cloud.google.com/sql/docs/mysql/backup-recovery/backups?hl=zh-cn) \uff0c\u767c\u751f\u6545\u969c\u5f8c\uff0c\u6062\u5fa9\u6642\u9593\u53ef\u80fd\u6703\u6bd4\u8f03\u9577\u3002\n- \u7232\u6578\u64da\u5eab\u9810\u914d\u6240\u9700\u7684\u6700\u5c0f\u5b58\u5132\u5bb9\u91cf\u3002\n- \u5982\u9700\u5728\u6578\u64da\u589e\u9577\u6642\u81ea\u52d5\u64f4\u7e2e\u5b58\u5132\u7a7a\u9593\u5bb9\u91cf\uff0c\u8acb\u5553\u7528 [\u5b58\u5132\u7a7a\u9593\u81ea\u52d5\u64f4\u5bb9](https://cloud.google.com/sql/docs/postgres/instance-settings?hl=zh-cn#automatic-storage-increase-2ndgen) \u529f\u80fd\u3002\n- \u9078\u64c7\u9069\u5408\u60a8\u7684\u4f7f\u7528\u5834\u666f\u7684\u5b58\u5132\u985e\u578b\uff1a [\u56fa\u614b\u786c\u76e4 (SSD) \u6216\u666e\u901a\u786c\u76e4 (HDD)](https://cloud.google.com/sql/docs/mysql/choosing-ssd-hdd?hl=zh-cn) \u3002\u5c0d\u65bc\u5927\u591a\u6578\u4f7f\u7528\u5834\u666f\u800c\u8a00\uff0cSSD \u662f\u6700\u6709\u6548\u4e14\u6700\u7d93\u6fdf\u5be6\u60e0\u7684\u9078\u64c7\u3002HDD \u53ef\u80fd\u9069\u7528\u65bc\u5c0d\u5ef6\u9072\u4e0d\u654f\u611f\u6216\u4e0d\u5e38\u8a2a\u554f\u7684\u5927\u578b\u6578\u64da\u96c6 (>10 TB)\u3002\n### \u512a\u5316\u8cbb\u7387\n\u8acb\u8003\u616e\u7232\u5177\u6709\u53ef\u9810\u6e2c\u8cc7\u6e90\u9700\u6c42\u7684\u5de5\u4f5c\u8ca0\u8f09\u8cfc\u8cb7 [\u627f\u8afe\u4f7f\u7528\u6298\u6263](https://cloud.google.com/sql/cud?hl=zh-cn#pricing) \u30021 \u5e74\u671f\u627f\u8afe\u53ef\u7bc0\u7701 25% \u7684\u6309\u9700\u50f9\u683c\uff0c\u800c 3 \u5e74\u671f\u627f\u8afe\u5247\u53ef\u7bc0\u7701 52%\u3002\n## Spanner\n[Spanner](https://cloud.google.com/spanner?hl=zh-cn) \u662f\u96f2\u539f\u751f\u3001\u898f\u6a21\u4e0d\u53d7\u9650\u5236\u3001\u5177\u5099\u5f37\u4e00\u81f4\u6027\u7684\u6578\u64da\u5eab\uff0c\u53ef\u7528\u6027\u9ad8\u9054 99.999%\u3002\n### \u76e3\u63a7\u7528\u91cf\n\u4ee5\u4e0b\u5efa\u8b70\u53ef\u5e6b\u52a9\u60a8\u8ddf\u8e64 Spanner \u8cc7\u6e90\u7684\u7528\u91cf\uff1a\n- \u76e3\u63a7\u60a8\u7684\u90e8\u7f72\uff0c\u4e26\u6839\u64da [CPU \u5efa\u8b70](https://cloud.google.com/spanner/docs/cpu-utilization?hl=zh-cn#recommended-max) \u914d\u7f6e\u7bc0\u9ede\u6578\u3002\n- \u7232\u90e8\u7f72\u8a2d\u7f6e\u63d0\u9192\u4ee5\u512a\u5316\u5b58\u5132\u8cc7\u6e90\u3002\u5982\u9700\u78ba\u5b9a\u9069\u7576\u7684\u914d\u7f6e\uff0c\u8acb\u53c3\u95b1\u5efa\u8b70\u7684 [\u6bcf\u500b\u7bc0\u9ede\u7684\u9650\u5236](https://cloud.google.com/spanner/quotas?hl=zh-cn#database_limits) \u3002\n### \u512a\u5316\u8cc7\u6e90\n\u4ee5\u4e0b\u5efa\u8b70\u53ef\u5e6b\u52a9\u60a8\u512a\u5316 Spanner \u8cc7\u6e90\uff1a\n- \u4f7f\u7528\u8655\u7406\u55ae\u5143 (PU) \u800c\u4e0d\u662f\u7bc0\u9ede\u4f86\u9810\u914d\u8cc7\u6e90\uff0c\u5f9e\u800c\u4ee5\u66f4\u4f4e\u7684\u8cbb\u7528\u5728 Spanner \u4e0a\u904b\u884c\u8f03\u5c0f\u7684\u5de5\u4f5c\u8ca0\u8f09\u3002 [\u4e00\u500b Spanner \u7bc0\u9ede\u7b49\u65bc 1,000 \u500b\u8655\u7406\u55ae\u5143](https://cloud.google.com/spanner/docs/compute-capacity?hl=zh-cn#compute_capacity) \u3002\n- \u4f7f\u7528 [\u67e5\u8a62\u512a\u5316\u5668](https://cloud.google.com/spanner/docs/query-optimizer/manage-query-optimizer?hl=zh-cn) \u63d0\u9ad8\u67e5\u8a62\u57f7\u884c\u6027\u80fd\u3002\n- \u6309\u7167 [\u6700\u4f73\u5be6\u8e10](https://cloud.google.com/spanner/docs/sql-best-practices?hl=zh-cn) \u69cb\u5efa SQL \u8a9e\u53e5\u4f86\u69cb\u5efa\u9ad8\u6548\u7684\u57f7\u884c\u8a08\u5283\u3002\n- \u4f7f\u7528 [\u81ea\u52d5\u64f4\u7e2e\u5668](https://cloud.google.com/architecture/autoscaling-cloud-spanner?hl=zh-cn) \u5de5\u5177\u7ba1\u7406 Spanner \u90e8\u7f72\u7684\u4f7f\u7528\u60c5\u6cc1\u548c\u6027\u80fd\u3002\u8a72\u5de5\u5177\u6703\u81ea\u52d5\u76e3\u63a7\u5be6\u4f8b\u3001\u6dfb\u52a0\u6216\u79fb\u9664\u7bc0\u9ede\uff0c\u4e26\u6709\u52a9\u65bc\u78ba\u4fdd\u5be6\u4f8b\u4fdd\u6301\u5728\u5efa\u8b70\u7684 CPU \u548c\u5b58\u5132\u7a7a\u9593\u9650\u5236\u7bc4\u570d\u5167\u3002\n- \u4f7f\u7528 [\u6642\u9593\u9ede\u6062\u5fa9 (PITR)](https://cloud.google.com/spanner/docs/pitr?hl=zh-cn) \u9632\u6b62\u610f\u5916\u522a\u9664\u6216\u5beb\u5165\u3002\u7248\u672c\u4fdd\u7559\u671f\u8f03\u9577\u7684\u6578\u64da\u5eab\uff08\u5c24\u5176\u662f\u7d93\u5e38\u8986\u84cb\u6578\u64da\u7684\u6578\u64da\u5eab\uff09\u6703\u4f7f\u7528\u66f4\u591a\u7cfb\u7d71\u8cc7\u6e90\uff0c\u4e26\u4e14\u9700\u8981\u66f4\u591a\u7bc0\u9ede\u3002\n- \u67e5\u770b\u60a8\u7684\u5099\u4efd\u7b56\u7565\u4e26\u9078\u64c7\u4ee5\u4e0b\u9078\u9805\u4e4b\u4e00\uff1a\n- \u5099\u4efd\u548c\u6062\u5fa9\n- \u5c0e\u51fa\u548c\u5c0e\u5165\n### \u512a\u5316\u8cbb\u7387\n\u5728\u78ba\u5b9a Spanner \u7bc0\u9ede\u7684\u4f4d\u7f6e\u6642\uff0c\u8acb\u8003\u616e Google Cloud \u5340\u57df\u4e4b\u9593\u7684\u8cbb\u7528\u5dee\u7570\u3002\u4f8b\u5982\uff0c\u90e8\u7f72\u5728 `us-central1` \u5340\u57df\u7684\u7bc0\u9ede\u7684\u6bcf\u5c0f\u6642\u8cbb\u7528\u9060\u9060\u4f4e\u65bc `southamerica-east1` \u5340\u57df\u7684\u7bc0\u9ede\u3002\n## Bigtable\n[Bigtable](https://cloud.google.com/bigtable?hl=zh-cn) \u662f\u4e00\u7a2e\u96f2\u539f\u751f\u5bec\u5217 NoSQL \u5b58\u5132\u5340\uff0c\u9069\u7528\u65bc\u5927\u898f\u6a21\u3001\u77ed\u5ef6\u9072\u6642\u9593\u7684\u5de5\u4f5c\u8ca0\u8f09\u3002\n### \u76e3\u63a7\u7528\u91cf\n\u4ee5\u4e0b\u5efa\u8b70\u53ef\u5e6b\u52a9\u60a8\u8ddf\u8e64 Bigtable \u8cc7\u6e90\u7684\u7528\u91cf\uff1a\n- \u5206\u6790 [\u7528\u91cf\u6307\u6a19](https://cloud.google.com/bigtable/docs/monitoring-instance?hl=zh-cn#console-overview) \u4ee5\u767c\u73fe\u8cc7\u6e90\u512a\u5316\u6a5f\u6703\u3002\n- \u4f7f\u7528 [Key Visualizer](https://cloud.google.com/bigtable/docs/keyvis-overview?hl=zh-cn) \u8a3a\u65b7\u5de5\u5177\u53ef\u8b58\u5225 Bigtable \u96c6\u7fa3\u4e2d\u7684\u71b1\u9ede\u548c\u71b1\u9375\u3002\n### \u512a\u5316\u8cc7\u6e90\n\u4ee5\u4e0b\u5efa\u8b70\u53ef\u5e6b\u52a9\u60a8\u512a\u5316 Bigtable \u8cc7\u6e90\uff1a\n- \u7232\u5e6b\u52a9\u78ba\u4fdd [CPU \u548c\u78c1\u76e4\u7528\u91cf](https://cloud.google.com/bigtable/docs/monitoring-instance?hl=zh-cn#cpu-and-disk) \u4ee5\u5be6\u73fe\u5ef6\u9072\u6642\u9593\u8207\u5b58\u5132\u7a7a\u9593\u5bb9\u91cf\u7684\u5e73\u8861\uff0c\u8acb\u8a55\u4f30\u548c\u8abf\u6574 Bigtable \u96c6\u7fa3\u7684\u7bc0\u9ede\u6578\u548c\u5927\u5c0f\u3002\n- \u901a\u904e [\u4ee5\u7de8\u7a0b\u65b9\u5f0f\u64f4\u7e2e](https://cloud.google.com/bigtable/docs/scaling?hl=zh-cn) Bigtable \u96c6\u7fa3\u4f86\u81ea\u52d5\u8abf\u6574\u7bc0\u9ede\u6578\uff0c\u5118\u53ef\u80fd\u4ee5\u6700\u4f4e\u7684\u8cbb\u7528\u4f86\u7dad\u6301\u6027\u80fd\u3002\n- \u8acb\u6839\u64da\u4ee5\u4e0b\u6ce8\u610f\u4e8b\u9805\u4f86\u8a55\u4f30\u6700\u7d93\u6fdf\u5be6\u60e0\u7684 [\u5b58\u5132\u8a2d\u5099\u985e\u578b](https://cloud.google.com/bigtable/docs/choosing-ssd-hdd?hl=zh-cn) \uff08HDD \u6216 SSD\uff09\u662f\u5426\u9069\u5408\u60a8\u7684\u4f7f\u7528\u5834\u666f\uff1a- HDD \u5b58\u5132\u8a2d\u5099\u7684\u8cbb\u7528\u4f4e\u65bc SSD\uff0c\u4f46\u6027\u80fd\u4e0d\u53ca SSD\u3002\n- SSD \u5b58\u5132\u8a2d\u5099\u7684\u8cbb\u7528\u9ad8\u65bc HDD\uff0c\u4f46\u53ef\u63d0\u4f9b\u66f4\u5feb\u901f\u548c\u53ef\u9810\u6e2c\u7684\u6027\u80fd\u3002\n\u9664\u975e\u60a8\u5b58\u5132\u5927\u91cf\u6578\u64da\uff0c\u5426\u5247 HDD \u6240\u7bc0\u7701\u7684\u8cbb\u7528\u76f8\u5c0d\u65bc Bigtable \u96c6\u7fa3\u4e2d\u7684\u7bc0\u9ede\u8cbb\u7528\u800c\u8a00\u5fae\u4e4e\u5176\u5fae\u3002HDD \u5b58\u5132\u8a2d\u5099\u6709\u6642\u9069\u7528\u65bc\u5c0d\u5ef6\u9072\u4e0d\u654f\u611f\u6216\u4e0d\u5e38\u8a2a\u554f\u7684\u5927\u578b\u6578\u64da\u96c6 (>10 TB)\u3002\n- \u4f7f\u7528 [\u5783\u573e\u56de\u6536](https://cloud.google.com/bigtable/docs/garbage-collection?hl=zh-cn) \u529f\u80fd\u79fb\u9664\u904e\u671f\u548c\u904e\u6642\u7684\u6578\u64da\u3002\n- \u7232\u907f\u958b\u71b1\u9ede\uff0c\u8acb\u904b\u7528 [\u884c\u9375\u8a2d\u8a08](https://cloud.google.com/bigtable/docs/schema-design?hl=zh-cn#row-keys-avoid) \u7684\u6700\u4f73\u5be6\u8e10\u3002\n- \u8a2d\u8a08\u7b26\u5408\u60a8\u7684 RPO \u4e14\u7d93\u6fdf\u5be6\u60e0\u7684 [\u5099\u4efd\u65b9\u6848](https://cloud.google.com/bigtable/docs/backups?hl=zh-cn) \u3002\n- \u5982\u9700\u964d\u4f4e\u96c6\u7fa3\u7528\u91cf\u4e26\u6e1b\u5c11\u7bc0\u9ede\u6578\uff0c\u8acb\u8003\u616e\u4f7f\u7528 [Memorystore](https://cloud.google.com/memorystore/docs?hl=zh-cn) \u7232\u53ef\u7de9\u5b58\u7684\u67e5\u8a62\u6dfb\u52a0 [\u5bb9\u91cf\u7de9\u5b58](https://cloud.google.com/community/tutorials/bigtable-memcached?hl=zh-cn) \u3002\n### \u9644\u52a0\u95b1\u8b80\u6750\u6599\n- [\u535a\u5ba2\uff1aBigtable \u8cbb\u7528\u512a\u5316\u57fa\u790e\u77e5\u8b58](https://cloud.google.com/blog/products/databases/how-to-save-money-when-using-cloud-databases?hl=zh-cn) \n- [\u535a\u5ba2\uff1aBigtable \u6027\u80fd\u548c\u8cbb\u7528\u512a\u5316\u7684\u6700\u4f73\u5be6\u8e10](https://cloud.google.com/blog/products/databases/check-out-how-to-optimize-database-service-cloud-bigtable?hl=zh-cn) ## BigQuery\n[BigQuery](https://cloud.google.com/bigquery?hl=zh-cn) \u662f\u4e00\u500b\u64f4\u7e2e\u80fd\u529b\u6975\u5f37\u4e14\u7d93\u6fdf\u5be6\u60e0\u7684\u7121\u670d\u52d9\u5668\u591a\u96f2\u6578\u64da\u5009\u5eab\uff0c\u65e8\u5728\u63d0\u5347\u60a8\u7684\u696d\u52d9\u654f\u6377\u6027\u3002\n### \u76e3\u63a7\u7528\u91cf\n\u4ee5\u4e0b\u5efa\u8b70\u53ef\u5e6b\u52a9\u60a8\u8ddf\u8e64 BigQuery \u8cc7\u6e90\u7684\u7528\u91cf\uff1a\n- [\u76f4\u89c0\u5448\u73fe](https://cloud.google.com/bigquery/docs/visualize-looker-studio?hl=zh-cn) \u6309\u9805\u76ee\u548c\u7528\u6236\u7d30\u5206\u7684 BigQuery \u8cbb\u7528\u3002\u6a19\u8b58\u6700\u6602\u8cb4\u7684\u67e5\u8a62\u4e26\u5c0d\u5176\u9032\u884c\u512a\u5316\u3002\n- \u4f7f\u7528`INFORMATION_SCHEMA`\u5143\u6578\u64da\u8868\u5206\u6790\u5404\u9805\u76ee\u3001\u4f5c\u696d\u548c\u9810\u7559\u7684 [\u69fd\u5229\u7528\u7387](https://cloud.google.com/blog/topics/developers-practitioners/monitoring-bigquery-reservations-and-slot-utilization-information_schema?hl=zh-cn) \u3002\n### \u512a\u5316\u8cc7\u6e90\n\u4ee5\u4e0b\u5efa\u8b70\u53ef\u5e6b\u52a9\u60a8\u512a\u5316 BigQuery \u8cc7\u6e90\uff1a\n- \u6839\u64da\u60a8\u7684\u5408\u898f\u6027\u7b56\u7565\u7232\u6578\u64da\u8a2d\u7f6e\u6578\u64da\u96c6\u7d1a\u3001\u8868\u7d1a\u6216\u5206\u5340\u7d1a [\u5230\u671f\u6642\u9593](https://cloud.google.com/bigquery/docs/updating-datasets?hl=zh-cn#table-expiration) \u3002\n- \u901a\u904e\u9650\u5236\u6bcf\u500b\u67e5\u8a62\u7684\u5b57\u7bc0\u6578\u4f86 [\u9650\u5236\u67e5\u8a62\u8cbb\u7528](https://cloud.google.com/bigquery/docs/best-practices-costs?hl=zh-cn#limit_query_costs_by_restricting_the_number_of_bytes_billed) \u3002\u7232\u9632\u6b62\u610f\u5916\u51fa\u73fe\u4eba\u7232\u932f\u8aa4\uff0c\u8acb\u5728\u7528\u6236\u7d1a\u548c\u9805\u76ee\u7d1a\u5553\u7528\u8cbb\u7528\u63a7\u5236\u3002\n- [\u50c5\u67e5\u8a62\u60a8\u9700\u8981\u7684\u6578\u64da](https://cloud.google.com/bigquery/docs/best-practices-costs?hl=zh-cn#avoid_select_) \u3002\u907f\u514d\u5b8c\u6574\u67e5\u8a62\u6383\u63cf\u3002\u5982\u9700\u63a2\u7d22\u548c\u4e86\u89e3\u6578\u64da\u8a9e\u7fa9\uff0c\u8acb\u4f7f\u7528\u514d\u8cbb\u7684 [\u6578\u64da\u9810\u89bd](https://cloud.google.com/bigquery/docs/best-practices-costs?hl=zh-cn#preview-data) \u9078\u9805\u3002\n- \u5982\u9700\u964d\u4f4e\u8655\u7406\u8cbb\u7528\u4e26\u63d0\u9ad8\u6027\u80fd\uff0c\u8acb\u5118\u53ef\u80fd\u5c0d\u9336\u9032\u884c [\u5206\u5340](https://cloud.google.com/bigquery/docs/partitioned-tables?hl=zh-cn) \u548c [\u805a\u7c07](https://cloud.google.com/bigquery/docs/clustered-tables?hl=zh-cn) \u3002\n- \u5118\u65e9\u4e26\u5118\u53ef\u80fd\u7d93\u5e38\u904e\u6ffe [\u67e5\u8a62](https://cloud.google.com/bigquery/query-plan-explanation?hl=zh-cn#background) \u3002\n- \u8655\u7406\u4f86\u81ea\u591a\u500b\u4f86\u6e90\uff08\u4f8b\u5982 Bigtable\u3001Cloud Storage\u3001Google \u96f2\u7aef\u786c\u76e4\u548c Cloud SQL\uff09\u7684\u6578\u64da\u6642\uff0c\u8acb\u4f7f\u7528 [\u806f\u5408\u8a2a\u554f\u6578\u64da\u6a21\u578b](https://cloud.google.com/bigquery/external-data-sources?hl=zh-cn) \u4f86\u907f\u514d\u8907\u88fd\u6578\u64da\u4e26\u907f\u514d\u76f4\u63a5\u5f9e\u4f86\u6e90\u67e5\u8a62\u6578\u64da\u3002\n- \u5229\u7528 [BigQuery \u7684\u5099\u4efd](https://cloud.google.com/bigquery/docs/availability?hl=zh-cn) \uff0c\u800c\u4e0d\u662f\u8907\u88fd\u6578\u64da\u3002\u8acb\u53c3\u95b1 [\u6578\u64da\u7684\u707d\u96e3\u6062\u5fa9\u5834\u666f](https://cloud.google.com/architecture/dr-scenarios-for-data?hl=zh-cn#managed-database-services-on-gcp) \u3002\n### \u512a\u5316\u8cbb\u7387\n\u4ee5\u4e0b\u5efa\u8b70\u53ef\u5e6b\u52a9\u60a8\u964d\u4f4e BigQuery \u8cc7\u6e90\u7684\u7d50\u7b97\u8cbb\u7387\uff1a\n- \u8a55\u4f30\u6578\u64da\u7684\u4fee\u6539\u65b9\u5f0f\uff0c\u4e26\u5229\u7528\u8f03\u4f4e\u7684 [\u9577\u671f](https://cloud.google.com/bigquery/docs/best-practices-storage?hl=zh-cn#take_advantage_of_long-term_storage) \u5b58\u5132\u50f9\u683c\u3002\n- \u67e5\u770b\u56fa\u5b9a\u8cbb\u7387\u548c\u6309\u9700 [\u50f9\u683c](https://cloud.google.com/bigquery/pricing?hl=zh-cn) \u4e4b\u9593\u7684\u5340\u5225\uff0c\u4e26 [\u9078\u64c7\u9069\u5408\u60a8\u7684\u8981\u6c42\u7684\u9078\u9805](https://cloud.google.com/bigquery/docs/reservations-workload-management?hl=zh-cn) \u3002\n- \u8a55\u4f30\u662f\u5426\u53ef\u4ee5\u7232\u6578\u64da\u5de5\u4f5c\u6d41\u4f7f\u7528\u6279\u91cf\u52a0\u8f09\u800c\u4e0d\u662f [\u6d41\u5f0f\u63d2\u5165](https://cloud.google.com/bigquery/streaming-data-into-bigquery?hl=zh-cn) \u3002\u8981\u4f7f\u52a0\u8f09\u5230 BigQuery \u4e2d\u7684\u6578\u64da\u7acb\u5373\u53ef\u7528\uff0c\u8acb\u4f7f\u7528\u6d41\u5f0f\u63d2\u5165\u3002\n- \u5982\u9700\u63d0\u9ad8\u6027\u80fd\u4e26\u964d\u4f4e\u6aa2\u7d22\u6578\u64da\u7684\u8cbb\u7528\uff0c\u8acb\u4f7f\u7528 [\u7de9\u5b58\u7684\u67e5\u8a62\u7d50\u679c](https://cloud.google.com/bigquery/docs/cached-results?hl=zh-cn) \u3002\n### \u9644\u52a0\u95b1\u8b80\u6750\u6599\n- [\u63a7\u5236 BigQuery \u8cbb\u7528](https://cloud.google.com/bigquery/docs/controlling-costs?hl=zh-cn) \n- [BigQuery \u8cbb\u7528\u512a\u5316\u6700\u4f73\u5be6\u8e10](https://cloud.google.com/blog/products/data-analytics/cost-optimization-best-practices-for-bigquery?hl=zh-cn) \n- [\u77ad\u89e3\u8cbb\u7528\u512a\u5316\u7684\u539f\u5247 (PDF)](https://services.google.com/fh/files/misc/understanding_the_principles_of_cost_optimization_2020_whitepaper_google_cloud.pdf?hl=zh-cn) ## Dataflow\n[Dataflow](https://cloud.google.com/dataflow?hl=zh-cn) \u662f\u4e00\u9805\u5feb\u901f\u4e14\u7d93\u6fdf\u5be6\u60e0\u7684\u7121\u670d\u52d9\u5668\u670d\u52d9\uff0c\u7528\u65bc\u9032\u884c\u7d71\u4e00\u7684\u6d41\u5f0f\u548c\u6279\u91cf\u6578\u64da\u8655\u7406\u3002\n### \u76e3\u63a7\u7528\u91cf\n\u4ee5\u4e0b\u5efa\u8b70\u53ef\u5e6b\u52a9\u60a8\u8ddf\u8e64 Dataflow \u8cc7\u6e90\u7684\u7528\u91cf\uff1a\n- \u901a\u904e\u904b\u884c\u5c0f\u578b\u8ca0\u8f09\u5be6\u9a57\uff0c\u627e\u5230\u4f5c\u696d\u7684\u6700\u512a\u6027\u80fd\u4e26\u63a8\u65b7\u541e\u5410\u91cf\u56e0\u7d20\uff0c\u4f86 [\u9810\u6e2c Dataflow \u4f5c\u696d\u7684\u8cbb\u7528](https://cloud.google.com/blog/products/data-analytics/predicting-cost-dataflow-job?hl=zh-cn) \u3002\n- \u4f7f\u7528 [\u53ef\u89c0\u6e2c\u6027\u4fe1\u606f\u4e2d\u5fc3](https://cloud.google.com/blog/products/data-analytics/better-data-pipeline-observability-for-batch-and-stream-processing?hl=zh-cn) \u66f4\u6df1\u5165\u5730\u77ad\u89e3\u541e\u5410\u91cf\u548c CPU \u4f7f\u7528\u7387\u3002\n- \u4f7f\u7528 [Dataflow \u76e3\u63a7\u754c\u9762](https://cloud.google.com/dataflow/docs/guides/using-monitoring-intf?hl=zh-cn) \u89c0\u5bdf\u8207\u6027\u80fd\u3001\u57f7\u884c\u548c\u5065\u5eb7\u72c0\u6cc1\u76f8\u95dc\u7684\u6d41\u6c34\u7dda\u6307\u6a19\u3002\n### \u512a\u5316\u8cc7\u6e90\n\u4ee5\u4e0b\u5efa\u8b70\u53ef\u5e6b\u52a9\u60a8\u512a\u5316 Dataflow \u8cc7\u6e90\uff1a\n- \u8acb\u8003\u616e\u4f7f\u7528 [Dataflow Prime](https://cloud.google.com/blog/products/data-analytics/simplify-and-automate-data-processing-with-dataflow-prime?hl=zh-cn) \u9ad8\u6548\u5730\u8655\u7406\u5927\u6578\u64da\u3002\n- \u901a\u904e\u5c0d\u81ea\u52d5\u64f4\u7e2e\u7684\u6279\u91cf\u6d41\u6c34\u7dda\u4f7f\u7528 [Flexible Resource Scheduling (FlexRS)](https://cloud.google.com/dataflow/docs/guides/flexrs?hl=zh-cn) \u4f86\u964d\u4f4e\u6279\u8655\u7406\u8cbb\u7528\u3002FlexRS \u4f7f\u7528\u9ad8\u7d1a\u5b89\u6392\u9078\u9805 (Dataflow Shuffle) \u4ee5\u53ca\u6436\u4f54\u5f0f\u865b\u64ec\u6a5f\u548c\u5e38\u898f\u865b\u64ec\u6a5f\u7684\u7d44\u5408\uff0c\u4f86\u964d\u4f4e\u6279\u8655\u7406\u6d41\u6c34\u7dda\u7684\u8cbb\u7528\u3002\n- \u901a\u904e\u4f7f\u7528\u5167\u5b58\u4e2d\u7684 [Shuffle \u670d\u52d9](https://cloud.google.com/dataflow/pricing?hl=zh-cn#dataflow_services) \u800c\u4e0d\u662f Persistent Disk \u548c\u5de5\u4f5c\u5668\u7bc0\u9ede\u4f86\u63d0\u9ad8\u6027\u80fd\u3002\n- \u5982\u9700\u63d0\u9ad8\u81ea\u52d5\u64f4\u7e2e\u7684\u97ff\u61c9\u901f\u5ea6\u4e26\u6e1b\u5c11\u8cc7\u6e90\u6d88\u8017\u91cf\uff0c\u8acb\u4f7f\u7528 [Streaming Engine](https://cloud.google.com/dataflow/docs/guides/deploying-a-pipeline?hl=zh-cn#streaming-engine) \uff0c\u5b83\u6703\u5c07\u6d41\u6c34\u7dda\u7684\u57f7\u884c\u64cd\u4f5c\u5f9e\u5de5\u4f5c\u5668\u865b\u64ec\u6a5f\u4e2d\u79fb\u51fa\u4e26\u79fb\u5165 Dataflow \u670d\u52d9\u5f8c\u7aef\u3002\n- \u5982\u679c\u6d41\u6c34\u7dda\u4e0d\u9700\u8981\u8a2a\u554f\u4e92\u806f\u7db2\u548c\u5176\u4ed6 Google Cloud \u7db2\u7d61\uff0c\u8acb\u505c\u7528\u516c\u5171 IP \u5730\u5740\u3002\u505c\u7528\u4e92\u806f\u7db2\u8a2a\u554f\u6b0a\u9650\u6709\u52a9\u65bc\u964d\u4f4e\u7db2\u7d61\u8cbb\u7528\u4e26\u63d0\u9ad8\u6d41\u6c34\u7dda\u5b89\u5168\u6027\u3002\n- \u8acb\u9075\u5faa [\u4f7f\u7528 Dataflow \u5be6\u73fe\u9ad8\u6548\u6d41\u6c34\u7dda](https://cloud.google.com/blog/products/data-analytics/how-to-efficiently-process-both-real-time-and-aggregate-data-with-dataflow?hl=zh-cn) \u7684\u6700\u4f73\u5be6\u8e10\u3002## Dataproc\n[Dataproc](https://cloud.google.com/dataproc?hl=zh-cn) \u662f\u4e00\u9805\u4ee3\u7ba1\u5f0f Apache Spark \u548c Apache Hadoop \u670d\u52d9\uff0c\u53ef\u7528\u65bc\u6279\u8655\u7406\u3001\u67e5\u8a62\u3001\u6d41\u5f0f\u50b3\u8f38\u548c\u6a5f\u5668\u5b78\u7fd2\u3002\n\u4ee5\u4e0b\u5efa\u8b70\u53ef\u5e6b\u52a9\u60a8\u512a\u5316 Dataproc \u8cc7\u6e90\u7684\u8cbb\u7528\uff1a\n- [\u9078\u64c7\u9069\u5408\u60a8\u7684\u5de5\u4f5c\u8ca0\u8f09\u7684\u6a5f\u5668\u985e\u578b](https://cloud.google.com/blog/products/data-analytics/optimize-dataproc-costs-using-vm-machine-type?hl=zh-cn) \u3002\n- \u4f7f\u7528 [\u81ea\u52d5\u64f4\u7e2e\u96c6\u7fa3](https://cloud.google.com/dataproc/docs/concepts/configuring-clusters/autoscaling?hl=zh-cn) \u9032\u884c\u81ea\u52d5\u64f4\u7e2e\u4ee5\u6eff\u8db3\u9700\u6c42\uff0c\u7528\u6236\u53ea\u9700\u7232\u6240\u9700\u7684\u8cc7\u6e90\u652f\u4ed8\u8cbb\u7528\u3002\n- \u5982\u679c\u4f5c\u696d\u5b8c\u6210\u5f8c\u53ef\u4ee5\u522a\u9664\u96c6\u7fa3\uff0c\u8acb\u8003\u616e\u4f7f\u7528 [\u53d7\u7ba1\u96c6\u7fa3\u5de5\u4f5c\u6d41\u6a21\u677f](https://cloud.google.com/dataproc/docs/concepts/workflows/overview?hl=zh-cn) \u9810\u914d\u4e00\u500b\u81e8\u6642\u96c6\u7fa3\u3002\n- \u7232\u907f\u514d\u975e\u6d3b\u8e8d\u96c6\u7fa3\u7522\u751f\u8cbb\u7528\uff0c\u8acb\u4f7f\u7528 [\u8a08\u5283\u522a\u9664](https://cloud.google.com/dataproc/docs/concepts/configuring-clusters/scheduled-deletion?hl=zh-cn) \uff0c\u4ee5\u4fbf\u5728\u6307\u5b9a\u7684\u7a7a\u9592\u6642\u9593\u6bb5\u5f8c\u3001\u5728\u6307\u5b9a\u7684\u6642\u9593\uff0c\u6216\u5728\u6307\u5b9a\u7684\u6642\u9593\u6bb5\u5f8c\u522a\u9664\u96c6\u7fa3\u3002\n- \u8acb\u9075\u5faa [\u5728 Dataproc \u4e0a\u69cb\u5efa\u9577\u6642\u9593\u904b\u884c\u7684\u96c6\u7fa3](https://cloud.google.com/blog/products/data-analytics/10-tips-for-building-long-running-clusters-using-cloud-dataproc?hl=zh-cn) \u7684\u6700\u4f73\u5be6\u8e10\u3002\n- \u7232\u59cb\u7d42\u8655\u65bc\u958b\u5553\u72c0\u614b\u7684\u5de5\u4f5c\u8ca0\u8f09\u8cfc\u8cb7 [\u627f\u8afe\u4f7f\u7528\u6298\u6263](https://cloud.google.com/compute/docs/instances/signing-up-committed-use-discounts?hl=zh-cn) \u3002## \u5f8c\u7e8c\u6b65\u9a5f\n- \u512a\u5316\u8a08\u7b97\u670d\u52d9\u3001\u5b58\u5132\u3001\u7db2\u7d61\u548c\u904b\u71df\u7684\u8cbb\u7528\uff1a- [\u512a\u5316\u8cbb\u7528\uff1a\u8a08\u7b97\u3001\u5bb9\u5668\u548c\u7121\u670d\u52d9\u5668](https://cloud.google.com/architecture/framework/cost-optimization/compute?hl=zh-cn) \n- [\u512a\u5316\u8cbb\u7528\uff1a\u5b58\u5132](https://cloud.google.com/architecture/framework/cost-optimization/storage?hl=zh-cn) \n- [\u512a\u5316\u8cbb\u7528\uff1a\u7db2\u7d61](https://cloud.google.com/architecture/framework/cost-optimization/networking?hl=zh-cn) \n- [\u512a\u5316\u8cbb\u7528\uff1aCloud Operations](https://cloud.google.com/architecture/framework/cost-optimization/cloudops?hl=zh-cn) \n- \u63a2\u7d22 [Google Cloud \u67b6\u69cb\u6846\u67b6](https://cloud.google.com/architecture/framework?hl=zh-cn) \u7684\u5176\u4ed6\u985e\u5225", "guide": "Docs"}