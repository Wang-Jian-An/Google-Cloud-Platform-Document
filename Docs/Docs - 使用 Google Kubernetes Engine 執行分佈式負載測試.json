{"title": "Docs - \u4f7f\u7528 Google Kubernetes Engine \u57f7\u884c\u5206\u4f48\u5f0f\u8ca0\u8f09\u6e2c\u8a66", "url": "https://cloud.google.com/architecture/distributed-load-testing-using-gke?hl=zh-cn", "abstract": "# Docs - \u4f7f\u7528 Google Kubernetes Engine \u57f7\u884c\u5206\u4f48\u5f0f\u8ca0\u8f09\u6e2c\u8a66\nLast reviewed 2022-04-22 UTC\n\u672c\u6559\u7a0b\u4ecb\u7d39\u5982\u4f55\u4f7f\u7528 [Google Kubernetes Engine (GKE)](https://cloud.google.com/kubernetes-engine/docs/concepts/kubernetes-engine-overview?hl=zh-cn) \u90e8\u7f72\u5206\u4f48\u5f0f\u8ca0\u8f09\u6e2c\u8a66\u6846\u67b6\uff0c\u8a72\u6846\u67b6\u4f7f\u7528\u591a\u500b\u5bb9\u5668\u7232\u7c21\u55ae\u7684\u57fa\u65bc REST \u7684 API \u5275\u5efa\u6d41\u91cf\u3002\u5728\u672c\u6559\u7a0b\u4e2d\uff0c\u6211\u5011\u6703\u5c0d\u4e00\u500b\u90e8\u7f72\u5230 App Engine \u7684 Web \u61c9\u7528\u57f7\u884c\u8ca0\u8f09\u6e2c\u8a66\uff0c\u8a72 Web \u61c9\u7528\u516c\u958b\u4e86 REST \u683c\u5f0f\u7684\u7aef\u9ede\uff0c\u4ee5\u97ff\u61c9\u50b3\u5165\u7684 HTTP POST \u8acb\u6c42\u3002\n\u60a8\u53ef\u4ee5\u4f7f\u7528\u8207\u6b64\u540c\u6a23\u7684\u6a21\u5f0f\u7232\u5404\u7a2e\u5834\u666f\u548c\u61c9\u7528\u5275\u5efa\u8ca0\u8f09\u6e2c\u8a66\u6846\u67b6\uff0c\u5982\u6d88\u606f\u50b3\u905e\u7cfb\u7d71\u3001\u6578\u64da\u6d41\u7ba1\u7406\u7cfb\u7d71\u548c\u6578\u64da\u5eab\u7cfb\u7d71\u3002", "content": "## \u76ee\u6a19\n- \u5b9a\u7fa9\u74b0\u5883\u8b8a\u91cf\u4ee5\u63a7\u5236\u90e8\u7f72\u914d\u7f6e\u3002\n- \u5275\u5efa GKE \u96c6\u7fa3\u3002\n- \u57f7\u884c\u8ca0\u8f09\u6e2c\u8a66\u3002\n- \uff08\u53ef\u9078\uff09\u589e\u52a0\u7528\u6236\u6578\u91cf\uff0c\u6216\u8005\u5c07\u6a21\u5f0f\u64f4\u5c55\u5230\u5176\u4ed6\u7528\u4f8b\u3002\n## \u8cbb\u7528  Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them \n\u5728\u672c\u6587\u6a94\u4e2d\uff0c\u60a8\u5c07\u4f7f\u7528 Google Cloud \u7684\u4ee5\u4e0b\u6536\u8cbb\u7d44\u4ef6\uff1a\n- App Engine\n- Artifact Registry\n- Cloud Build\n- Cloud Storage\n- Google Kubernetes Engine\n\u60a8\u53ef\u4f7f\u7528 [\u50f9\u683c\u8a08\u7b97\u5668](https://cloud.google.com/products/calculator?hl=zh-cn) \u6839\u64da\u60a8\u7684\u9810\u8a08\u4f7f\u7528\u60c5\u6cc1\u4f86\u4f30\u7b97\u8cbb\u7528\u3002 \n## \u6e96\u5099\u5de5\u4f5c\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- \u5b8c\u6210\u672c\u6587\u6a94\u4e2d\u63cf\u8ff0\u7684\u4efb\u52d9\u5f8c\uff0c\u60a8\u53ef\u4ee5\u901a\u904e\u522a\u9664\u6240\u5275\u5efa\u7684\u8cc7\u6e90\u4f86\u907f\u514d\u7e7c\u7e8c\u8a08\u8cbb\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u6e05\u7406](#clean-up) \u3002\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- \u5411\u60a8\u7684 Google \u8cec\u865f\u6388\u4e88\u89d2\u8272\u3002\u5c0d\u4ee5\u4e0b\u6bcf\u500b IAM \u89d2\u8272\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\u4e00\u6b21\uff1a `roles/serviceusage.serviceUsageAdmin, roles/container.admin, roles/appengine.appAdmin, roles/appengine.appCreator, roles/artifactregistry.admin, roles/resourcemanager.projectIamAdmin, roles/compute.instanceAdmin.v1, roles/iam.serviceAccountUser, roles/cloudbuild.builds.builder, roles/iam.serviceAccountAdmin````\ngcloud projects add-iam-policy-binding PROJECT_ID --member=\"user:EMAIL_ADDRESS\" --role=ROLE\n```- \u5c07``\u66ff\u63db\u7232\u60a8\u7684\u9805\u76ee ID\u3002\n- \u5c07``\u66ff\u63db\u7232\u60a8\u7684\u96fb\u5b50\u90f5\u4ef6\u5730\u5740\u3002\n- \u5c07``\u66ff\u63db\u7232\u6bcf\u500b\u89d2\u8272\u3002\n## \u793a\u4f8b\u5de5\u4f5c\u8ca0\u8f09\u4e0b\u5716\u5c55\u793a\u4e86\u5c07\u5ba2\u6236\u7aef\u8acb\u6c42\u50b3\u9001\u5230\u61c9\u7528\u7684\u793a\u4f8b\u5de5\u4f5c\u8ca0\u8f09\u3002\u7232\u5c0d\u8a72\u4ea4\u4e92\u9032\u884c\u5efa\u6a21\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 [Locust](https://locust.io/) \u9019\u4e00\u57fa\u65bc Python\u3001\u53ef\u8de8\u591a\u500b\u76ee\u6a19\u8def\u5f91\u5206\u767c\u8acb\u6c42\u7684\u5206\u4f48\u5f0f\u8ca0\u8f09\u6e2c\u8a66\u5de5\u5177\u3002\u4f8b\u5982\uff0cLocust \u53ef\u4ee5\u5c07\u8acb\u6c42\u5206\u767c\u5230 `/login` \u548c `/metrics` \u76ee\u6a19\u8def\u5f91\u3002\u5de5\u4f5c\u8ca0\u8f09\u5728 Locust \u4e2d\u5efa\u6a21\u7232\u4e00\u7d44 [\u4efb\u52d9](https://docs.locust.io/en/latest/writing-a-locustfile.html) \u3002## \u67b6\u69cb\u8a72\u67b6\u69cb\u6d89\u53ca\u5230\u5169\u500b\u4e3b\u8981\u7d44\u4ef6\uff1a- Locust Docker \u5bb9\u5668\u6620\u50cf\u3002\n- \u5bb9\u5668\u7de8\u6392\u548c\u7ba1\u7406\u6a5f\u5236\u3002\nLocust Docker \u5bb9\u5668\u6620\u50cf\u5305\u542b Locust \u8edf\u4ef6\u3002\u5728\u514b\u9686\u8207\u672c\u6559\u7a0b\u914d\u5957\u7684 [GitHub \u4ee3\u78bc\u5eab](https://github.com/GoogleCloudPlatform/distributed-load-testing-using-kubernetes) \u6642\u7372\u5f97\u7684 Dockerfile \u4f7f\u7528\u7684\u662f\u57fa\u672c Python \u6620\u50cf\uff0c\u4e26\u4e14\u5305\u542b\u7528\u65bc\u5553\u52d5 Locust \u670d\u52d9\u548c\u57f7\u884c\u4efb\u52d9\u7684\u8173\u672c\u3002\u7232\u5118\u53ef\u80fd\u8cbc\u8fd1\u771f\u5be6\u5ba2\u6236\u7aef\u7684\u60c5\u6cc1\uff0c\u6bcf\u500b Locust \u4efb\u52d9\u90fd\u9032\u884c\u4e86\u52a0\u6b0a\u3002\u4f8b\u5982\uff0c\u6bcf\u4e00\u5343\u500b\u5ba2\u6236\u7aef\u7e3d\u8acb\u6c42\u767c\u751f\u4e00\u6b21\u8a3b\u518a\u3002\nGKE \u63d0\u4f9b\u5bb9\u5668\u7de8\u6392\u548c\u7ba1\u7406\u529f\u80fd\u3002\u4f7f\u7528 GKE\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u7232\u8ca0\u8f09\u6e2c\u8a66\u6846\u67b6\u5960\u5b9a\u57fa\u790e\u7684\u5bb9\u5668\u7bc0\u9ede\u7684\u6578\u91cf\u3002\u6b64\u5916\uff0c\u60a8\u9084\u53ef\u4ee5\u5c07\u8ca0\u8f09\u6e2c\u8a66\u5de5\u4f5c\u5668\u7d44\u7e54\u5230 pod \u4e2d\uff0c\u4e26\u6307\u5b9a\u5e0c\u671b GKE \u6301\u7e8c\u904b\u884c\u7684 pod \u6578\u91cf\u3002\n\u7232\u4e86\u90e8\u7f72\u8ca0\u8f09\u6e2c\u8a66\u4efb\u52d9\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a- \u90e8\u7f72\u8ca0\u8f09\u6e2c\u8a66\u4e3b\u7bc0\u9ede\u3002\n- \u90e8\u7f72\u4e00\u7d44\u8ca0\u8f09\u6e2c\u8a66\u5de5\u4f5c\u5668\u3002\u60a8\u8981\u4f7f\u7528\u9019\u4e9b\u8ca0\u8f09\u6e2c\u8a66\u5de5\u4f5c\u5668\u5275\u5efa\u5927\u91cf\u7684\u6d41\u91cf\uff0c\u4ee5\u4fbf\u57f7\u884c\u6e2c\u8a66\u3002\n\u4e0b\u5716\u5c55\u793a\u4e86\u4f7f\u7528\u793a\u4f8b\u61c9\u7528\u9032\u884c\u8ca0\u8f09\u6e2c\u8a66\u7684\u67b6\u69cb\u3002\u4e3b Pod \u63d0\u4f9b\u7528\u65bc\u64cd\u4f5c\u548c\u76e3\u63a7\u8ca0\u8f09\u6e2c\u8a66\u7684\u7db2\u9801\u754c\u9762\u3002\u5de5\u4f5c\u5668 Pod \u7232\u63a5\u53d7\u6e2c\u8a66\u7684\u61c9\u7528\u751f\u6210 REST \u8acb\u6c42\u6d41\u91cf\uff0c\u4e26\u5c07\u6307\u6a19\u767c\u9001\u5230\u4e3b Pod\u3002 **\u6ce8\u610f** \uff1a\u5982\u679c\u751f\u6210\u904e\u591a\u767c\u5f80\u5916\u90e8\u7cfb\u7d71\u7684\u6d41\u91cf\uff0c\u53ef\u80fd\u6703\u7522\u751f\u985e\u4f3c\u65bc\u62d2\u7d55\u670d\u52d9\u653b\u64ca\u7684\u6548\u679c\u3002\u8acb\u52d9\u5fc5\u67e5\u95b1 [Google Cloud \u670d\u52d9\u689d\u6b3e](https://cloud.google.com/terms?hl=zh-cn) \u548c [Google Cloud \u4f7f\u7528\u9650\u5236\u653f\u7b56](https://cloud.google.com/terms/aup?hl=zh-cn) \u3002### \u95dc\u65bc\u8ca0\u8f09\u6e2c\u8a66\u4e3b\u7bc0\u9edeLocust \u4e3b\u7bc0\u9ede\u662f\u57f7\u884c\u8ca0\u8f09\u6e2c\u8a66\u4efb\u52d9\u7684\u5165\u53e3\u9ede\u3002Locust \u4e3b\u7bc0\u9ede\u914d\u7f6e\u6307\u5b9a\u4e86\u6578\u500b\u5143\u7d20\uff0c\u5305\u62ec\u5bb9\u5668\u4f7f\u7528\u7684\u9ed8\u8a8d\u7aef\u53e3\uff1a- `8089`\u7528\u65bc\u7db2\u9801\u754c\u9762\n- `5557`\u548c`5558`\u7528\u65bc\u8207\u5de5\u4f5c\u5668\u901a\u4fe1\n\u6b64\u4fe1\u606f\u7a0d\u5f8c\u5c07\u7528\u65bc\u914d\u7f6e Locust \u5de5\u4f5c\u5668\u3002\n\u60a8\u9700\u8981\u90e8\u7f72\u4e00\u500b Service\uff0c\u78ba\u4fdd\u96c6\u7fa3\u5167\u7684\u5176\u4ed6 Pod \u53ef\u901a\u904e `hostname:port` \u8a2a\u554f\u6240\u9700\u7684\u7aef\u53e3\u3002\u9019\u4e9b\u7aef\u53e3\u4e5f\u53ef\u4ee5\u901a\u904e\u63cf\u8ff0\u6027\u7aef\u53e3\u540d\u7a31\u9032\u884c\u5f15\u7528\u3002\n\u6b64 Service \u4f7f Locust \u5de5\u4f5c\u5668\u80fd\u5920\u8f15\u9b06\u767c\u73fe\u4e3b\u7bc0\u9ede\u4e26\u8207\u4e4b\u9032\u884c\u53ef\u9760\u7684\u901a\u4fe1\uff0c\u5373\u4fbf\u4e3b\u7bc0\u9ede\u767c\u751f\u6545\u969c\u4e26\u88ab Deployment \u66ff\u63db\u7232\u65b0\u7684 Pod \u4e5f\u662f\u5982\u6b64\u3002\n\u7cfb\u7d71\u6703\u90e8\u7f72\u5e36\u6709\u5fc5\u8981\u8a3b\u91cb\u7684\u7b2c\u4e8c\u500b Service \u4ee5\u5275\u5efa\u5167\u90e8\u76f4\u901a\u7db2\u7d61\u8ca0\u8f09\u5747\u8861\u5668\uff0c\u4ee5\u4f7f Locust Web \u61c9\u7528 Service \u53ef\u4f9b\u96c6\u7fa3\u5916\u90e8\u4f7f\u7528\u540c\u4e00 VPC \u7db2\u7d61\u4e26\u8207\u60a8\u7684\u96c6\u7fa3\u4f4d\u65bc\u540c\u4e00 Google Cloud \u5340\u57df\u7684\u5ba2\u6236\u7aef\u9032\u884c\u8a2a\u554f\u3002\n\u90e8\u7f72 Locust \u4e3b\u7bc0\u9ede\u5f8c\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u5167\u90e8\u76f4\u901a\u7db2\u7d61\u8ca0\u8f09\u5747\u8861\u5668\u914d\u7f6e\u7684\u5c08\u7528 IP \u5730\u5740\u4f86\u6253\u958b\u7db2\u9801\u754c\u9762\u3002\u90e8\u7f72 Locust \u5de5\u4f5c\u5668\u5f8c\uff0c\u60a8\u53ef\u4ee5\u5553\u52d5\u6a21\u64ec\uff0c\u4e26\u901a\u904e Locust \u7db2\u9801\u754c\u9762\u67e5\u770b\u805a\u5408\u7684\u7d71\u8a08\u4fe1\u606f\u3002\n### \u95dc\u65bc\u8ca0\u8f09\u6e2c\u8a66\u5de5\u4f5c\u5668Locust \u5de5\u4f5c\u5668\u57f7\u884c\u8ca0\u8f09\u6e2c\u8a66\u4efb\u52d9\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u55ae\u500b Deployment \u4f86\u5275\u5efa\u591a\u500b pod\u3002\u9019\u4e9b pod \u5206\u4f48\u5728 Kubernetes \u96c6\u7fa3\u4e2d\u3002 \u6bcf\u500b pod \u90fd\u53ef\u4ee5\u4f7f\u7528\u74b0\u5883\u8b8a\u91cf\u4f86\u63a7\u5236\u914d\u7f6e\u4fe1\u606f\uff0c\u4f8b\u5982\u53d7\u6e2c\u7cfb\u7d71\u7684\u4e3b\u6a5f\u540d\u4ee5\u53ca Locust \u4e3b\u7bc0\u9ede\u7684\u4e3b\u6a5f\u540d\u3002\n\u4e0b\u5716\u986f\u793a\u4e86 Locust \u4e3b\u7bc0\u9ede\u8207 Locust \u5de5\u4f5c\u5668\u4e4b\u9593\u7684\u95dc\u4fc2\u3002## \u521d\u59cb\u5316\u901a\u7528\u8b8a\u91cf\u60a8\u5fc5\u9808\u5b9a\u7fa9\u591a\u500b\u8b8a\u91cf\u4f86\u63a7\u5236\u57fa\u790e\u67b6\u69cb\u5143\u7d20\u7684\u90e8\u7f72\u4f4d\u7f6e\u3002- \u6253\u958b Cloud Shell\uff1a [\u6253\u958b Cloud Shell](https://console.cloud.google.com/cloudshell/?hl=zh-cn) \u8acb\u901a\u904e Cloud Shell \u904b\u884c\u672c\u6559\u7a0b\u4e2d\u7684\u6240\u6709\u7d42\u7aef\u547d\u4ee4\u3002\n- \u8a2d\u7f6e\u9700\u8981\u81ea\u5b9a\u7fa9\u7684\u74b0\u5883\u8b8a\u91cf\uff1a```\nexport GKE_CLUSTER=GKE_CLUSTER\nexport AR_REPO=AR_REPO\nexport REGION=REGION\nexport ZONE=ZONE\nexport SAMPLE_APP_LOCATION=SAMPLE_APP_LOCATION\n```\u66ff\u63db\u4ee5\u4e0b\u5167\u5bb9\uff1a- ``\uff1aGKE \u96c6\u7fa3\u7684\u540d\u7a31\u3002\n- ``\uff1a\u60a8\u7684 Artifact Registry \u4ee3\u78bc\u5eab\u7684\u540d\u7a31\n- ``\uff1a\u5c07\u5728\u5176\u4e2d\u5275\u5efa GKE \u96c6\u7fa3\u548c Artifact Registry \u4ee3\u78bc\u5eab\u7684\u5340\u57df\n- ``\uff1a\u5c07\u5728\u5176\u4e2d\u5275\u5efa Compute Engine \u5be6\u4f8b\u7684\u60a8\u6240\u5728\u5340\u57df\u4e2d\u7684\u53ef\u7528\u5340\n- ``\uff1a\u5c07\u5728\u5176\u4e2d\u90e8\u7f72\u60a8\u7684\u793a\u4f8b App Engine \u61c9\u7528\u7684 [\uff08\u5340\u57df\uff09\u4f4d\u7f6e](https://cloud.google.com/appengine/docs/locations?hl=zh-cn) \n\u9019\u4e9b\u547d\u4ee4\u61c9\u985e\u4f3c\u65bc\u4ee5\u4e0b\u793a\u4f8b\uff1a```\nexport GKE_CLUSTER=gke-lt-cluster\nexport AR_REPO=dist-lt-repo\nexport REGION=us-central1\nexport ZONE=us-central1-b\nexport SAMPLE_APP_LOCATION=us-central\n```\n- \u8a2d\u7f6e\u4ee5\u4e0b\u5176\u4ed6\u74b0\u5883\u8b8a\u91cf\uff1a```\nexport GKE_NODE_TYPE=e2-standard-4\nexport GKE_SCOPE=\"https://www.googleapis.com/auth/cloud-platform\"\nexport PROJECT=$(gcloud config get-value project)\nexport SAMPLE_APP_TARGET=${PROJECT}.appspot.com\n```\n- \u8a2d\u7f6e\u9ed8\u8a8d\u53ef\u7528\u5340\uff0c\u9019\u6a23\u60a8\u5c31\u4e0d\u5fc5\u5728\u5f8c\u7e8c\u547d\u4ee4\u4e2d\u6307\u5b9a\u9019\u4e9b\u503c\uff1a```\ngcloud config set compute/zone ${ZONE}\n```\n## \u5275\u5efa GKE \u96c6\u7fa3\n- \u5275\u5efa\u5177\u6709\u96c6\u7fa3\u6240\u9700\u7684\u6700\u4f4e\u6b0a\u9650\u7684\u670d\u52d9\u8cec\u865f\uff1a```\ngcloud iam service-accounts create dist-lt-svc-acc\ngcloud projects add-iam-policy-binding ${PROJECT} --member=serviceAccount:dist-lt-svc-acc@${PROJECT}.iam.gserviceaccount.com --role=roles/artifactregistry.reader\ngcloud projects add-iam-policy-binding ${PROJECT} --member=serviceAccount:dist-lt-svc-acc@${PROJECT}.iam.gserviceaccount.com --role=roles/container.nodeServiceAccount\n```\n- \u5275\u5efa GKE \u96c6\u7fa3\uff1a```\ngcloud container clusters create ${GKE_CLUSTER} \\\n--service-account=dist-lt-svc-acc@${PROJECT}.iam.gserviceaccount.com \\\n--region ${REGION} \\\n--machine-type ${GKE_NODE_TYPE} \\\n--enable-autoscaling \\\n--num-nodes 3 \\\n--min-nodes 3 \\\n--max-nodes 10 \\\n--scopes \"${GKE_SCOPE}\"\n```\n- \u9023\u63a5\u5230 GKE \u96c6\u7fa3\uff1a```\ngcloud container clusters get-credentials ${GKE_CLUSTER} \\\n --region ${REGION} \\\n --project ${PROJECT}\n```\n## \u8a2d\u7f6e\u74b0\u5883\n- \u5f9e GitHub \u514b\u9686\u793a\u4f8b\u4ee3\u78bc\u5eab\uff1a```\ngit clone https://github.com/GoogleCloudPlatform/distributed-load-testing-using-kubernetes\n```\n- \u5c07\u60a8\u7684\u5de5\u4f5c\u76ee\u9304\u66f4\u6539\u7232\u514b\u9686\u7684\u4ee3\u78bc\u5eab\uff1a```\ncd distributed-load-testing-using-kubernetes\n```\n## \u69cb\u5efa\u5bb9\u5668\u6620\u50cf\n- \u5275\u5efa Artifact Registry \u4ee3\u78bc\u5eab\uff1a```\ngcloud artifacts repositories create ${AR_REPO} \\\u00a0 \u00a0 --repository-format=docker \u00a0\\\u00a0 \u00a0 --location=${REGION} \\\u00a0 \u00a0 --description=\"Distributed load testing with GKE and Locust\"\n```\n- \u69cb\u5efa\u5bb9\u5668\u6620\u50cf\u4e26\u5c07\u5176\u5b58\u5132\u5728 Artifact Registry \u4ee3\u78bc\u5eab\u4e2d\uff1a```\nexport LOCUST_IMAGE_NAME=locust-tasks\nexport LOCUST_IMAGE_TAG=latest\ngcloud builds submit \\\n --tag ${REGION}-docker.pkg.dev/${PROJECT}/${AR_REPO}/${LOCUST_IMAGE_NAME}:${LOCUST_IMAGE_TAG} \\\n docker-image\n```\u96a8\u9644\u7684 Locust Docker \u6620\u50cf\u5d4c\u5165\u4e86\u8abf\u7528\u793a\u4f8b\u61c9\u7528\u4e2d\u7684 `/login` \u548c `/metrics` \u7aef\u9ede\u7684\u6e2c\u8a66\u4efb\u52d9\u3002\u5728\u6b64\u793a\u4f8b\u6e2c\u8a66\u4efb\u52d9\u96c6\u4e2d\uff0c\u63d0\u4ea4\u5230\u9019\u5169\u500b\u7aef\u9ede\u7684\u76f8\u61c9\u8acb\u6c42\u6bd4\u7387\u7232 `1` \u5230 `999` \u3002 [  docker-image/locust-tasks/tasks.py ](https://github.com/GoogleCloudPlatform/distributed-load-testing-using-kubernetes/blob/HEAD/docker-image/locust-tasks/tasks.py) [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/distributed-load-testing-using-kubernetes/blob/HEAD/docker-image/locust-tasks/tasks.py) ```\nclass MetricsTaskSet(TaskSet):\u00a0 \u00a0 _deviceid = None\u00a0 \u00a0 def on_start(self):\u00a0 \u00a0 \u00a0 \u00a0 self._deviceid = str(uuid.uuid4())\u00a0 \u00a0 @task(1)\u00a0 \u00a0 def login(self):\u00a0 \u00a0 \u00a0 \u00a0 self.client.post(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 '/login', {\"deviceid\": self._deviceid})\u00a0 \u00a0 @task(999)\u00a0 \u00a0 def post_metrics(self):\u00a0 \u00a0 \u00a0 \u00a0 self.client.post(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"/metrics\", {\"deviceid\": self._deviceid, \"timestamp\": datetime.now()})class MetricsLocust(FastHttpUser):\u00a0 \u00a0 tasks = {MetricsTaskSet}\n```\n- \u9a57\u8b49 Docker \u6620\u50cf\u662f\u5426\u5728 Artifact Registry \u4ee3\u78bc\u5eab\u4e2d\uff1a```\ngcloud artifacts docker images list ${REGION}-docker.pkg.dev/${PROJECT}/${AR_REPO} | \\\n grep ${LOCUST_IMAGE_NAME}\n```\u8f38\u51fa\u985e\u4f3c\u65bc\u4ee5\u4e0b\u5167\u5bb9\uff1a```\nListing items under project PROJECT, location REGION, repository AR_REPO\nREGION-docker.pkg.dev/PROJECT/AR_REPO/locust-tasks sha256:796d4be067eae7c82d41824791289045789182958913e57c0ef40e8d5ddcf283 2022-04-13T01:55:02 2022-04-13T01:55:02\n```\n## \u90e8\u7f72\u793a\u4f8b\u61c9\u7528\n- \u5275\u5efa sample-webapp \u4e26\u5c07\u5176\u90e8\u7f72\u7232 App Engine\uff1a```\ngcloud app create --region=${SAMPLE_APP_LOCATION}\ngcloud app deploy sample-webapp/app.yaml \\\n--project=${PROJECT}\n```\n- \u51fa\u73fe\u63d0\u793a\u6642\uff0c\u8f38\u5165 `y` \u4ee5\u7e7c\u7e8c\u90e8\u7f72\u3002\u8f38\u51fa\u985e\u4f3c\u65bc\u4ee5\u4e0b\u5167\u5bb9\uff1a```\nFile upload done.\nUpdating service [default]...done.\nSetting traffic split for service [default]...done.\nDeployed service [default] to [https://PROJECT.appspot.com]\n```\u793a\u4f8b App Engine \u61c9\u7528\u5be6\u73fe `/login` \u548c `/metrics` \u7aef\u9ede\uff1a [  sample-webapp/main.py ](https://github.com/GoogleCloudPlatform/distributed-load-testing-using-kubernetes/blob/HEAD/sample-webapp/main.py) [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/distributed-load-testing-using-kubernetes/blob/HEAD/sample-webapp/main.py) ```\n@app.route('/login', \u00a0methods=['GET', 'POST'])def login():\u00a0 \u00a0 deviceid = request.values.get('deviceid')\u00a0 \u00a0 return '/login - device: {}\\n'.format(deviceid)@app.route('/metrics', \u00a0methods=['GET', 'POST'])def metrics():\u00a0 \u00a0 deviceid = request.values.get('deviceid')\u00a0 \u00a0 timestamp = request.values.get('timestamp')\u00a0 \u00a0 return '/metrics - device: {}, timestamp: {}\\n'.format(deviceid, timestamp)\n```\n## \u90e8\u7f72 Locust \u4e3b Pod \u548c\u5de5\u4f5c\u5668 Pod\n- \u5c07 `locust-master-controller.yaml` \u548c `locust-worker-controller.yaml` \u6587\u4ef6\u4e2d\u7684\u76ee\u6a19\u4e3b\u6a5f\u3001\u9805\u76ee\u548c\u6620\u50cf\u53c3\u6578\u66ff\u63db\u7232\u74b0\u5883\u8b8a\u91cf\u503c\uff0c\u4e26\u5275\u5efa Locust \u4e3b Pod \u548c\u5de5\u4f5c\u5668 Pod Deployment\uff1a```\nenvsubst < kubernetes-config/locust-master-controller.yaml.tpl | kubectl apply -f envsubst < kubernetes-config/locust-worker-controller.yaml.tpl | kubectl apply -f envsubst < kubernetes-config/locust-master-service.yaml.tpl | kubectl apply -f \n```\n- \u9a57\u8b49 Locust Deployment\uff1a```\nkubectl get pods -o wide\n```\u8f38\u51fa\u7d50\u679c\u985e\u4f3c\u65bc\u4ee5\u4e0b\u5167\u5bb9\uff1a```\nNAME        READY STATUS RESTARTS AGE IP   NODE\nlocust-master-87f8ffd56-pxmsk 1/1  Running 0   1m 10.32.2.6 gke-gke-load-test-default-pool-96a3f394\nlocust-worker-58879b475c-279q9 1/1  Running 0   1m 10.32.1.5 gke-gke-load-test-default-pool-96a3f394\nlocust-worker-58879b475c-9frbw 1/1  Running 0   1m 10.32.2.8 gke-gke-load-test-default-pool-96a3f394\nlocust-worker-58879b475c-dppmz 1/1  Running 0   1m 10.32.2.7 gke-gke-load-test-default-pool-96a3f394\nlocust-worker-58879b475c-g8tzf 1/1  Running 0   1m 10.32.0.11 gke-gke-load-test-default-pool-96a3f394\nlocust-worker-58879b475c-qcscq 1/1  Running 0   1m 10.32.1.4 gke-gke-load-test-default-pool-96a3f394\n```\n- \u9a57\u8b49 Service\uff1a```\nkubectl get services\n```\u8f38\u51fa\u7d50\u679c\u985e\u4f3c\u65bc\u4ee5\u4e0b\u5167\u5bb9\uff1a```\nNAME    TYPE   CLUSTER-IP  EXTERNAL-IP PORT(S)    AGE\nkubernetes   ClusterIP  10.87.240.1  <none>  443/TCP    12m\nlocust-master  ClusterIP  10.87.245.22 <none>  5557/TCP,5558/TCP 1m\nlocust-master-web LoadBalancer 10.87.246.225 <pending>  8089:31454/TCP  1m\n```\n- \u7232 Locust \u4e3b\u7bc0\u9ede Web \u61c9\u7528 Service \u9810\u914d\u5167\u90e8\u76f4\u901a\u7db2\u7d61\u8ca0\u8f09\u5747\u8861\u5668\u7684\u5c08\u7528 IP \u5730\u5740\uff08GKE \u5916\u90e8 IP \u5730\u5740\uff09\u6642\uff0c\u904b\u884c\u4e00\u500b\u76e3\u8996\u5faa\u74b0\uff1a```\nkubectl get svc locust-master-web --watch\n```\n- \u914d\u7f6e **EXTERNAL-IP** \u5730\u5740\u5f8c\uff0c\u6309 `Ctrl+C` \u9000\u51fa\u76e3\u8996\u5faa\u74b0\u3002\n## \u9023\u63a5\u5230 Locust \u7db2\u9801\u524d\u7aef\u60a8\u53ef\u4ee5\u4f7f\u7528 Locust \u4e3b\u7bc0\u9ede\u7db2\u9801\u754c\u9762\uff0c\u91dd\u5c0d\u53d7\u6e2c\u7cfb\u7d71\u57f7\u884c\u8ca0\u8f09\u6e2c\u8a66\u4efb\u52d9\u3002- \u7372\u53d6\u7db2\u7ad9\u4e3b\u6a5f\u670d\u52d9\u7684\u5167\u90e8\u8ca0\u8f09\u5747\u8861\u5668 IP \u5730\u5740\uff1a```\nexport INTERNAL_LB_IP=$(kubectl get svc locust-master-web \\\n        -o jsonpath=\"{.status.loadBalancer.ingress[0].ip}\") && \\\n        echo $INTERNAL_LB_IP\n```\n- \u6839\u64da\u60a8\u7684\u7db2\u7d61\u914d\u7f6e\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u5169\u7a2e\u65b9\u5f0f\u901a\u904e\u914d\u7f6e\u7684 IP \u5730\u5740\u9023\u63a5\u5230 Locust Web \u61c9\u7528\uff1a- **\u7db2\u7d61\u8def\u7531\u3002** \u5982\u679c\u60a8\u7684\u7db2\u7d61\u914d\u7f6e\u7232\u5141\u8a31\u5f9e\u5de5\u4f5c\u7ad9\u8def\u7531\u5230\u9805\u76ee VPC \u7db2\u7d61\uff0c\u5247\u53ef\u4ee5\u76f4\u63a5\u5f9e\u5de5\u4f5c\u7ad9\u8a2a\u554f\u5167\u90e8\u76f4\u901a\u7db2\u7d61\u8ca0\u8f09\u5747\u8861\u5668 IP \u5730\u5740\u3002\n- **\u4ee3\u7406\u548c SSH \u96a7\u9053\u3002** \u5982\u679c\u5de5\u4f5c\u7ad9\u548c VPC \u7db2\u7d61\u4e4b\u9593\u6c92\u6709\u7db2\u7d61\u8def\u7531\uff0c\u60a8\u53ef\u4ee5\u901a\u904e\u4f7f\u7528 `nginx` \u4ee3\u7406\u5275\u5efa Compute Engine \u5be6\u4f8b\u548c\u5275\u5efa\u5de5\u4f5c\u7ad9\u8207\u5be6\u4f8b\u4e4b\u9593\u7684 SSH \u96a7\u9053\u4f86\u5c07\u6d41\u91cf\u8def\u7531\u5230\u5167\u90e8\u76f4\u901a\u7db2\u7d61\u8ca0\u8f09\u5747\u8861\u5668 IP \u5730\u5740\u3002\n\u5982\u679c\u5de5\u4f5c\u7ad9\u548c Google Cloud \u9805\u76ee VPC \u7db2\u7d61\u4e4b\u9593\u6709\u7db2\u7d61\u6d41\u91cf\u8def\u7531\uff0c\u8acb\u6253\u958b\u700f\u89bd\u5668\uff0c\u7136\u5f8c\u6253\u958b Locust \u4e3b\u7bc0\u9ede\u7db2\u9801\u754c\u9762\u3002\u5c07\u4ee5\u4e0b\u7db2\u5740\u4e2d\u7684 [INTERNAL_LB_IP] \u66ff\u63db\u7232\u60a8\u5728\u4e0a\u4e00\u6b65\u4e2d\u770b\u5230\u7684 IP \u5730\u5740\uff1a `http://[INTERNAL_LB_IP]:8089` \u3002- \u4f7f\u7528\u5be6\u4f8b\u540d\u7a31\u8a2d\u7f6e\u74b0\u5883\u8b8a\u91cf\u3002```\nexport PROXY_VM=locust-nginx-proxy\n```\n- \u4f7f\u7528\u914d\u7f6e\u7232\u4ee3\u7406\u5167\u90e8\u76f4\u901a\u7db2\u7d61\u8ca0\u8f09\u5747\u8861\u5668\u4e0a\u7684 Locust Web \u61c9\u7528\u7aef\u53e3 `8089` \u7684 `ngnix` Docker \u5bb9\u5668\u5553\u52d5\u5be6\u4f8b\uff1a```\ngcloud compute instances create-with-container ${PROXY_VM} \\\n --zone ${ZONE} \\\n --container-image gcr.io/cloud-marketplace/google/nginx1:latest \\\n --container-mount-host-path=host-path=/tmp/server.conf,mount-path=/etc/nginx/conf.d/default.conf \\\n --metadata=startup-script=\"#! /bin/bash\n  cat <<EOF > /tmp/server.conf\n  server {\n   listen 8089;\n   location / {\n    proxy_pass http://${INTERNAL_LB_IP}:8089;\n   }\n  }\nEOF\"\n```\n- \u6253\u958b\u5f9e Cloud Shell \u5230\u4ee3\u7406\u5be6\u4f8b\u7684 SSH \u96a7\u9053\uff1a```\ngcloud compute ssh --zone ${ZONE} ${PROXY_VM} \\\n     -- -N -L 8089:localhost:8089\n```\n- \u9ede\u64ca **\u7db2\u9801\u9810\u89bd** \u5716\u6a19 ( )\uff0c\u7136\u5f8c\u5f9e\u5217\u51fa\u7684\u9078\u9805\u4e2d\u9078\u64c7 **\u66f4\u6539\u7aef\u53e3** \u3002\n- \u5728 **\u66f4\u6539\u9810\u89bd\u7aef\u53e3** \u5c0d\u8a71\u6846\u4e2d\u7684 **\u7aef\u53e3\u865f** \u5b57\u6bb5\u4e2d\u8f38\u5165 **8089** \uff0c\u7136\u5f8c\u9078\u64c7 **\u66f4\u6539\u4e26\u9810\u89bd** \u3002\u4e00\u500b\u700f\u89bd\u5668\u6a19\u7c64\u9801\u96a8\u5373\u6253\u958b\uff0c\u4e26\u986f\u793a Locust \u7db2\u9801\u754c\u9762\u3002\n## \u5728\u793a\u4f8b\u61c9\u7528\u4e0a\u904b\u884c\u57fa\u672c\u8ca0\u8f09\u6e2c\u8a66\n- \u5728\u700f\u89bd\u5668\u4e2d\u6253\u958b Locust \u524d\u7aef\u5f8c\uff0c\u60a8\u6703\u770b\u5230\u4e00\u500b\u53ef\u7528\u65bc\u5553\u52d5\u65b0\u8ca0\u8f09\u6e2c\u8a66\u7684\u5c0d\u8a71\u6846\u3002 \n- \u5c07\u7e3d\u8a08 **\u7528\u6236\u6578\u91cf** \uff08\u6700\u5927\u4f75\u767c\u6578\uff09 \u6307\u5b9a\u7232 `10` \uff0c\u4e26\u5c07 **\u751f\u6210\u901f\u7387** \uff08\u5553\u52d5\u7528\u6236\u6578/\u79d2\uff09 \u6307\u5b9a\u7232 `5` \u4f4d\u7528\u6236/\u79d2\u3002\n- \u63a5\u4e0b\u4f86\uff0c\u9ede\u64ca **Start swarming** \u4ee5\u958b\u59cb\u6a21\u64ec\u3002\u5728\u7cfb\u7d71\u958b\u59cb\u5927\u91cf\u751f\u6210\u8acb\u6c42\u5f8c\uff0c\u7cfb\u7d71\u6703\u958b\u59cb\u805a\u5408\u7d71\u8a08\u6578\u64da\u4ee5\u7372\u5f97\u6a21\u64ec\u6307\u6a19\uff0c\u4f8b\u5982\u8acb\u6c42\u6578\u91cf\u548c\u6bcf\u79d2\u8acb\u6c42\u6578\uff0c\u5982\u4e0b\u5716\u6240\u793a\uff1a\n- \u901a\u904e [Google Cloud Console](https://cloud.google.com/console/appengine?hl=zh-cn) \u67e5\u770b\u5df2\u90e8\u7f72\u7684\u670d\u52d9\u548c\u5176\u4ed6\u6307\u6a19\u3002 **\u6ce8\u610f** \uff1a\u5728 swarm \u6e2c\u8a66\u5f8c\uff0cApp Engine \u4fe1\u606f\u4e2d\u5fc3\u53ef\u80fd\u9700\u8981\u5e7e\u5206\u9418\u624d\u80fd\u986f\u793a\u6307\u6a19\u3002\n- \u89c0\u5bdf\u5230\u53d7\u6e2c\u61c9\u7528\u7684\u884c\u7232\u5f8c\uff0c\u9ede\u64ca **\u505c\u6b62** \u4ee5\u7d42\u6b62\u6e2c\u8a66\u3002\n## \u589e\u52a0\u7528\u6236\u6578\u91cf\uff08\u53ef\u9078\uff09\u5982\u679c\u8981\u589e\u52a0\u7528\u65bc\u6e2c\u8a66\u61c9\u7528\u7684\u8ca0\u8f09\uff0c\u53ef\u4ee5\u6dfb\u52a0\u6a21\u64ec\u7528\u6236\u3002\u5728\u6dfb\u52a0\u6a21\u64ec\u7528\u6236\u4e4b\u524d\uff0c\u8acb\u52d9\u5fc5\u78ba\u4fdd\u6709\u5145\u8db3\u7684\u8cc7\u6e90\u53ef\u652f\u6301\u8ca0\u8f09\u7684\u589e\u52a0\u3002\u85c9\u52a9 Google Cloud\uff0c\u60a8\u53ef\u4ee5\u5728\u7121\u9700\u91cd\u65b0\u90e8\u7f72\u73fe\u6709 pod \u7684\u524d\u63d0\u4e0b\u7232 Deployment \u6dfb\u52a0 Locust \u5de5\u4f5c\u5668 pod\uff0c\u53ea\u8981\u60a8\u64c1\u6709\u652f\u6301\u66f4\u591a pod \u7684\u57fa\u790e\u865b\u64ec\u6a5f\u8cc7\u6e90\u5373\u53ef\u3002\u521d\u59cb GKE \u96c6\u7fa3\u6700\u521d\u6709 3 \u500b\u7bc0\u9ede\uff0c\u6700\u591a\u53ef\u901a\u904e\u81ea\u52d5\u64f4\u7e2e\u589e\u52a0\u5230 10 \u500b\u7bc0\u9ede\u3002- \u5c07 Locust \u5de5\u4f5c\u5668 pod \u6c60\u64f4\u5927\u5230\u5305\u542b 20 \u500b pod\u3002```\nkubectl scale deployment/locust-worker --replicas=20\n```\u90e8\u7f72\u548c\u5553\u52d5\u65b0 pod \u9700\u8981\u5e7e\u5206\u9418\u6642\u9593\u3002\n\u5982\u679c\u770b\u5230 [Pod Unschedulable](https://cloud.google.com/kubernetes-engine/docs/troubleshooting?hl=zh-cn#PodUnschedulable) \u932f\u8aa4\uff0c\u5247\u5fc5\u9808\u5411\u96c6\u7fa3\u6dfb\u52a0\u66f4\u591a\u7bc0\u9ede\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u8abf\u6574 GKE \u96c6\u7fa3\u7684\u5927\u5c0f](https://cloud.google.com/kubernetes-engine/docs/how-to/resizing-a-cluster?hl=zh-cn) \u3002\n\u5728 pod \u5553\u52d5\u5b8c\u7562\u4e4b\u5f8c\uff0c\u8fd4\u56de Locust \u4e3b\u7bc0\u9ede\u7db2\u9801\u754c\u9762\uff0c\u91cd\u65b0\u958b\u59cb\u8ca0\u8f09\u6e2c\u8a66\u3002## \u64f4\u5c55\u6a21\u5f0f\u82e5\u8981\u64f4\u5c55\u6b64\u6a21\u5f0f\uff0c\u60a8\u53ef\u4ee5\u5275\u5efa\u65b0\u7684 Locust \u4efb\u52d9\uff0c\u751a\u81f3\u53ef\u4ee5\u6539\u7232\u4f7f\u7528\u5176\u4ed6\u8ca0\u8f09\u6e2c\u8a66\u6846\u67b6\u3002\n\u60a8\u53ef\u4ee5\u81ea\u5b9a\u7fa9\u6240\u6536\u96c6\u7684\u6307\u6a19\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u80fd\u60f3\u8981\u6e2c\u91cf\u6bcf\u79d2\u7684\u8acb\u6c42\u6578\uff0c\u53ef\u80fd\u5e0c\u671b\u5728\u8ca0\u8f09\u589e\u52a0\u6642\u76e3\u63a7\u97ff\u61c9\u5ef6\u9072\u6642\u9593\uff0c\u4e5f\u53ef\u80fd\u60f3\u8981\u6aa2\u67e5\u97ff\u61c9\u5931\u6557\u7387\u548c\u932f\u8aa4\u985e\u578b\u3002\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Cloud Monitoring](https://cloud.google.com/monitoring/docs?hl=zh-cn) \u6587\u6a94\u3002## \u6e05\u7406\u5b78\u5b8c\u672c\u6559\u7a0b\u5f8c\uff0c\u8acb\u6e05\u7406\u60a8\u5275\u5efa\u7684\u8cc7\u6e90\uff0c\u907f\u514d\u65e5\u5f8c\u518d\u7232\u9019\u4e9b\u8cc7\u6e90\u4ed8\u8cbb\u3002\n### \u522a\u9664\u9805\u76ee\n\u7232\u4e86\u907f\u514d\u7522\u751f\u8cbb\u7528\uff0c\u6700\u7c21\u55ae\u7684\u65b9\u6cd5\u662f\u522a\u9664\u60a8\u7232\u672c\u6559\u7a0b\u5275\u5efa\u7684\u9805\u76ee\u3002\n\u5982\u9700\u522a\u9664\u9805\u76ee\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- **\u8b66\u544a** \uff1a\u522a\u9664\u9805\u76ee\u6703\u7522\u751f\u4ee5\u4e0b\u5f71\u97ff- **\u9805\u76ee\u4e2d\u7684\u6240\u6709\u5167\u5bb9\u90fd\u6703\u88ab\u522a\u9664\u3002** \u5982\u679c\u60a8\u5c07\u73fe\u6709\u9805\u76ee\u7528\u65bc\u672c\u6587\u6a94\u4e2d\u7684\u4efb\u52d9\uff0c\u5247\u522a\u9664\u8a72\u9805\u76ee\u5f8c\uff0c\u9084\u5c07\u522a\u9664\u60a8\u5df2\u5728\u8a72\u9805\u76ee\u4e2d\u5b8c\u6210\u7684\u4efb\u4f55\u5176\u4ed6\u5de5\u4f5c\u3002\n- **\u81ea\u5b9a\u7fa9\u9805\u76ee ID \u4e1f\u5931\u3002** \u5275\u5efa\u6b64\u9805\u76ee\u6642\uff0c\u60a8\u53ef\u80fd\u5275\u5efa\u4e86\u8981\u5728\u5c07\u4f86\u4f7f\u7528\u7684\u81ea\u5b9a\u7fa9\u9805\u76ee ID\u3002\u8981\u4fdd\u7559\u4f7f\u7528\u8a72\u9805\u76ee ID \u7684\u7db2\u5740\uff08\u4f8b\u5982`appspot.com`\u7db2\u5740\uff09\uff0c\u8acb\u522a\u9664\u9805\u76ee\u5167\u7684\u6240\u9078\u8cc7\u6e90\uff0c\u800c\u4e0d\u662f\u522a\u9664\u6574\u500b\u9805\u76ee\u3002\n\u5982\u679c\u60a8\u6253\u7b97\u63a2\u7d22\u591a\u500b\u67b6\u69cb\u3001\u6559\u7a0b\u6216\u5feb\u901f\u5165\u9580\uff0c\u5247\u91cd\u8907\u4f7f\u7528\u9805\u76ee\u53ef\u4ee5\u5e6b\u52a9\u60a8\u907f\u514d\u8d85\u51fa\u9805\u76ee\u914d\u984d\u9650\u5236\u3002\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u9032\u5165 **\u7ba1\u7406\u8cc7\u6e90** \u9801\u9762\u3002 [\u8f49\u5230\u201c\u7ba1\u7406\u8cc7\u6e90\u201d](https://console.cloud.google.com/iam-admin/projects?hl=zh-cn) \n- \u5728\u9805\u76ee\u5217\u8868\u4e2d\uff0c\u9078\u64c7\u8981\u522a\u9664\u7684\u9805\u76ee\uff0c\u7136\u5f8c\u9ede\u64ca **\u522a\u9664** \u3002\n- \u5728\u5c0d\u8a71\u6846\u4e2d\u8f38\u5165\u9805\u76ee ID\uff0c\u7136\u5f8c\u9ede\u64ca **\u95dc\u9589** \u4ee5\u522a\u9664\u9805\u76ee\u3002\n### \u522a\u9664 GKE \u96c6\u7fa3\u5982\u679c\u60a8\u4e0d\u60f3\u522a\u9664\u6574\u500b\u9805\u76ee\uff0c\u53ef\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\u4f86\u522a\u9664 GKE \u96c6\u7fa3\uff1a\n```\n gcloud container clusters delete ${GKE_CLUSTER} --region ${REGION}\n \n```\n## \u5f8c\u7e8c\u6b65\u9a5f\n- [\u69cb\u5efa\u53ef\u64f4\u7e2e\u3001\u5f48\u6027\u4f73\u7684 Web \u61c9\u7528](https://cloud.google.com/solutions/scalable-and-resilient-apps?hl=zh-cn) \u3002\n- \u4ed4\u7d30\u95b1\u8b80 [GKE](https://cloud.google.com/kubernetes-engine?hl=zh-cn) \u6587\u6a94\u3002\n- \u95b1\u8b80 [\u6709\u95dc GKE \u7684\u5176\u4ed6\u6559\u7a0b](https://cloud.google.com/kubernetes-engine/docs/tutorials?hl=zh-cn) \u3002\n- \u63a2\u7d22\u6709\u95dc Google Cloud \u7684\u53c3\u8003\u67b6\u69cb\u3001\u5716\u8868\u548c\u6700\u4f73\u505a\u6cd5\u3002\u67e5\u770b\u6211\u5011\u7684 [Cloud Architecture Center](https://cloud.google.com/architecture?hl=zh-cn) \u3002", "guide": "Docs"}