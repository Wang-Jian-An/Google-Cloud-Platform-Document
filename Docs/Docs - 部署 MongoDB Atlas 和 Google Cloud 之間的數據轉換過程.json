{"title": "Docs - \u90e8\u7f72 MongoDB Atlas \u548c Google Cloud \u4e4b\u9593\u7684\u6578\u64da\u8f49\u63db\u904e\u7a0b", "url": "https://cloud.google.com/architecture/data-pipeline-mongodb-gcp/deployment?hl=zh-cn", "abstract": "# Docs - \u90e8\u7f72 MongoDB Atlas \u548c Google Cloud \u4e4b\u9593\u7684\u6578\u64da\u8f49\u63db\u904e\u7a0b\nLast reviewed 2023-12-13 UTC\n\u672c\u6587\u6a94\u4ecb\u7d39\u5982\u4f55\u90e8\u7f72 [MongoDB Atlas \u548c Google Cloud \u4e4b\u9593\u7684\u6578\u64da\u8f49\u63db](https://cloud.google.com/architecture/data-pipeline-mongodb-gcp?hl=zh-cn) \u3002\u5728\u672c\u6587\u6a94\u4e2d\uff0c\u60a8\u5c07\u5728\u5f9e MongoDB Atlas \u5230 BigQuery \u7684\u6578\u64da\u4e4b\u9593\u90e8\u7f72\u63d0\u53d6\u3001\u8f49\u63db\u548c\u52a0\u8f09 (ETL) \u6d41\u7a0b\u3002\n\u9019\u4e9b\u8aaa\u660e\u9069\u7528\u65bc\u60f3\u8981\u4f7f\u7528 BigQuery \u5c0d\u5b58\u5132\u5728 MongoDB Atlas \u4e2d\u7684\u904b\u71df\u6578\u64da\u57f7\u884c\u5fa9\u96dc\u5206\u6790\u7684\u6578\u64da\u7ba1\u7406\u54e1\u3002\u60a8\u9700\u8981\u719f\u6089 MongoDB Atlas\u3001BigQuery \u548c Dataflow\u3002\n", "content": "## \u67b6\u69cb\n\u4e0b\u5716\u5c55\u793a\u4e86\u90e8\u7f72\u6b64\u89e3\u6c7a\u65b9\u6848\u6642\u4f7f\u7528\u7684\u53c3\u8003\u67b6\u69cb\u3002\n\u5982\u5716\u6240\u793a\uff0c\u6709\u4e09\u500b Dataflow \u6a21\u677f\u4f86\u8655\u7406\u96c6\u6210\u904e\u7a0b\u3002\u7b2c\u4e00\u500b\u6a21\u677f\u662f [MongoDB to BigQuery](https://cloud.google.com/dataflow/docs/guides/templates/provided/mongodb-to-bigquery?hl=zh-cn) \uff0c\u9019\u662f\u4e00\u500b\u6279\u8655\u7406\u6d41\u6c34\u7dda\uff0c\u53ef\u5f9e MongoDB \u8b80\u53d6\u6587\u6a94\u4e26\u5c07\u5176\u5beb\u5165 BigQuery\u3002\u7b2c\u4e8c\u500b\u6a21\u677f\u662f [BigQuery to MongoDB](https://cloud.google.com/dataflow/docs/guides/templates/provided/bigquery-to-mongodb?hl=zh-cn) \uff0c\u9019\u662f\u4e00\u500b\u6279\u8655\u7406\u6a21\u677f\uff0c\u53ef\u7528\u65bc\u5f9e BigQuery \u8b80\u53d6\u5206\u6790\u5f8c\u7684\u6578\u64da\u4e26\u5c07\u5176\u5beb\u5165 MongoDB\u3002\u7b2c\u4e09\u500b\u6a21\u677f\u662f [MongoDB to BigQuery (CDC)](https://cloud.google.com/dataflow/docs/guides/templates/provided/mongodb-change-stream-to-bigquery?hl=zh-cn) \uff0c\u9019\u662f\u4e00\u500b\u6d41\u8655\u7406\u6d41\u6c34\u7dda\uff0c\u53ef\u8207 MongoDB \u8b8a\u66f4\u6578\u64da\u6d41\u642d\u914d\u4f7f\u7528\uff0c\u4ee5\u8655\u7406\u904b\u71df\u6578\u64da\u66f4\u6539\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [MongoDB Atlas \u548c Google Cloud \u4e4b\u9593\u7684\u6578\u64da\u8f49\u63db](https://cloud.google.com/architecture/data-pipeline-mongodb-gcp?hl=zh-cn) \u3002\n## \u76ee\u6a19\n\u4ee5\u4e0b\u90e8\u7f72\u6b65\u9a5f\u6f14\u793a\u77ad\u5982\u4f55\u4f7f\u7528 MongoDB to BigQuery \u6a21\u677f\u5728 MongoDB Atlas \u5230 BigQuery \u7684\u6578\u64da\u4e4b\u9593\u57f7\u884c ETL \u6d41\u7a0b\u3002\u5982\u9700\u90e8\u7f72\u6b64 ETL \u6d41\u7a0b\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u4efb\u52d9\uff1a\n- \u5728 Google Cloud \u4e2d\u9810\u914d MongoDB Atlas \u96c6\u7fa3\u3002\n- \u5c07\u6578\u64da\u52a0\u8f09\u5230 MongoDB \u96c6\u7fa3\u4e2d\u3002\n- \u914d\u7f6e\u96c6\u7fa3\u8a2a\u554f\u6b0a\u9650\u3002\n- \u5728 Google Cloud \u4e0a\u8a2d\u7f6e BigQuery \u8868\u3002\n- \u5275\u5efa\u4e26\u76e3\u63a7\u5c07 MongoDB \u6578\u64da\u8f49\u79fb\u5230 BigQuery \u7684 Dataflow \u4f5c\u696d\u3002\n- \u9a57\u8b49 BigQuery \u4e0a\u7684\u8f38\u51fa\u8868\u3002## \u8cbb\u7528\nTitles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n\u5728\u672c\u6587\u6a94\u4e2d\uff0c\u60a8\u5c07\u4f7f\u7528 Google Cloud \u7684\u4ee5\u4e0b\u6536\u8cbb\u7d44\u4ef6\uff1a- [BigQuery](https://cloud.google.com/bigquery/pricing?hl=zh-cn) \n- [Dataflow](https://cloud.google.com/dataflow/pricing?hl=zh-cn) \n\u60a8\u53ef\u4f7f\u7528 [\u50f9\u683c\u8a08\u7b97\u5668](https://cloud.google.com/products/calculator?hl=zh-cn) \u6839\u64da\u60a8\u7684\u9810\u8a08\u4f7f\u7528\u60c5\u6cc1\u4f86\u4f30\u7b97\u8cbb\u7528\u3002\u5b8c\u6210\u672c\u6587\u6a94\u4e2d\u63cf\u8ff0\u7684\u4efb\u52d9\u5f8c\uff0c\u60a8\u53ef\u4ee5\u901a\u904e\u522a\u9664\u6240\u5275\u5efa\u7684\u8cc7\u6e90\u4f86\u907f\u514d\u7e7c\u7e8c\u8a08\u8cbb\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u6e05\u7406](#clean-up) \u3002\n## \u6e96\u5099\u5de5\u4f5c\n\u5b8c\u6210\u4ee5\u4e0b\u6b65\u9a5f\uff0c\u7232 MongoDB to BigQuery \u67b6\u69cb\u8a2d\u7f6e\u74b0\u5883\u3002\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n## \u5b89\u88dd MongoDB Atlas\n\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u4f7f\u7528 [Cloud Marketplace](https://cloud.google.com/marketplace?hl=zh-cn) \u5b89\u88dd MongoDB Atlas \u5be6\u4f8b\u3002\u4ee5\u4e0b\u8aaa\u660e\u5047\u5b9a\u60a8\u9084\u6c92\u6709 MongoDB \u8cec\u865f\u3002\u5982\u9700\u5168\u9762\u77ad\u89e3\u5982\u4f55\u8a2d\u7f6e\u8a02\u95b1\u4e26\u5c07 Google \u7d50\u7b97\u8cec\u865f\u95dc\u806f\u5230 MongoDB \u8cec\u865f\uff0c\u8acb\u53c3\u95b1 MongoDB \u6587\u6a94\u4e2d\u7684 [Google Cloud \u81ea\u52a9 Marketplace](https://www.mongodb.com/docs/atlas/billing/gcp-self-serve-marketplace/) \u3002\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u5c55\u958b\u5c0e\u822a\u83dc\u55ae\uff0c\u7136\u5f8c\u9078\u64c7 **Marketplace** \u3002\n- \u5728 Marketplace \u641c\u7d22\u6846\u4e2d\uff0c\u8f38\u5165 **MongoDB Atlas** \u3002\n- \u5728\u641c\u7d22\u7d50\u679c\u4e2d\uff0c\u9078\u64c7 **MongoDB Atlas\uff08\u96a8\u7528\u96a8\u4ed8\uff09** \u3002\n- \u5728 **MongoDB Atlas\uff08\u5373\u7528\u5373\u4ed8\uff09** \u9801\u9762\u4e0a\uff0c\u67e5\u770b\u689d\u6b3e\u53ca\u689d\u4ef6\u7684\u6982\u89bd\uff0c\u7136\u5f8c\u9ede\u64ca **\u8a3b\u518a MongoDB** \u3002\n- \u5728 MongoDB \u8a02\u95b1\u9801\u9762\u4e0a\uff0c\u9078\u64c7\u60a8\u7684\u7d50\u7b97\u8cec\u865f\uff0c\u63a5\u53d7\u689d\u6b3e\uff0c\u7136\u5f8c\u9ede\u64ca **\u8a02\u95b1** \u3002\n- \u9ede\u64ca **\u8a3b\u518a\u5230 MongoDB** \u6309\u9215\u4e26\u5275\u5efa\u4e00\u500b MongoDB \u8cec\u865f\u3002\n- \u5728\u8981\u6c42\u60a8\u9078\u64c7\u7d44\u7e54\u7684\u9801\u9762\u4e0a\uff0c\u9078\u64c7\u8981\u95dc\u806f Google Cloud \u7d50\u7b97\u8cec\u865f\u7684 MongoDB \u7d44\u7e54\u3002\n- \u7b49\u5f85 Google Cloud \u5b8c\u6210\u5c0d\u7d44\u7e54\u7684\u540c\u6b65\u3002\n\u8cec\u865f\u540c\u6b65\u5f8c\uff0cGoogle Cloud \u63a7\u5236\u6aaf\u4e2d\u7684 **MongoDB Atlas\uff08\u5373\u7528\u5373\u4ed8\uff09** \u9801\u9762\u5c07\u66f4\u65b0\uff0c\u4ee5\u986f\u793a **\u5728\u63d0\u4f9b\u5546\u7db2\u7ad9\u4e0a\u7ba1\u7406** \u6309\u9215\u3002\n## \u5275\u5efa MongoDB Atlas \u96c6\u7fa3\n\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u5275\u5efa\u4e00\u500b MongoDB \u96c6\u7fa3\u3002\u5728\u5275\u5efa\u904e\u7a0b\u4e2d\uff0c\u60a8\u9700\u8981\u9078\u64c7\u4ee5\u4e0b\u4fe1\u606f\uff1a\n- \u60a8\u7684\u96c6\u7fa3\u985e\u578b\u3002\u6839\u64da\u60a8\u7684\u57fa\u790e\u67b6\u69cb\u8981\u6c42\u9078\u64c7 [\u96c6\u7fa3\u5c64\u7d1a](https://www.mongodb.com/pricing?utm_source=google) \u3002\n- \u96c6\u7fa3\u7684\u9996\u9078\u5340\u57df\u3002\u6211\u5011\u5efa\u8b70\u60a8\u9078\u64c7\u6700\u9760\u8fd1\u60a8\u7684\u7269\u7406\u4f4d\u7f6e\u7684\u5340\u57df\u3002\n\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u5982\u4f55\u5275\u5efa\u548c\u90e8\u7f72\u514d\u8cbb MongoDB \u96c6\u7fa3\uff0c\u8acb\u53c3\u95b1 MongoDB \u6587\u6a94\u4e2d\u7684 [\u90e8\u7f72\u514d\u8cbb\u96c6\u7fa3](https://www.mongodb.com/docs/atlas/tutorial/deploy-free-tier-cluster/) \u3002\n\u5982\u9700\u5275\u5efa\u548c\u8a2d\u7f6e\u96c6\u7fa3\uff0c\u8acb\u6309\u4ee5\u4e0b\u6b65\u9a5f\u64cd\u4f5c\uff1a\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u7684 **MongoDB Atlas\uff08\u5373\u7528\u5373\u4ed8\uff09** \u9801\u9762\u4e0a\uff0c\u9ede\u64ca **\u5728\u63d0\u4f9b\u5546\u7db2\u7ad9\u4e0a\u7ba1\u7406** \u3002\n- \u5728 MongoDB \u767b\u9304\u9801\u9762\u4e0a\uff0c\u9ede\u64ca **Google** \uff0c\u7136\u5f8c\u9ede\u64ca\u60a8\u7528\u65bc\u5b89\u88dd MongoDB Atlas \u7684 Google \u8cec\u865f\u3002\u4f5c\u7232\u65b0\u7528\u6236\uff0cMongoDB \u754c\u9762\u6703\u81ea\u52d5\u6253\u958b **\u6578\u64da\u5eab\u90e8\u7f72** \u9801\u9762\u3002\n- \u5728 Atlas \u754c\u9762\u4e2d\uff0c\u9ede\u64ca **\u6578\u64da\u5eab\u90e8\u7f72** \u9801\u9762\u4e0a\u7684 **\u5275\u5efa** \u3002\n- \u5728 **\u5275\u5efa\u96c6\u7fa3** \u9801\u9762\u4e0a\uff0c\u9ede\u64ca **\u5171\u4eab** \u3002 **\u5171\u4eab** \u9078\u9805\u63d0\u4f9b\u4e86\u4e00\u500b\u514d\u8cbb\u96c6\u7fa3\uff0c\u53ef\u7528\u65bc\u6e2c\u8a66\u6b64\u53c3\u8003\u67b6\u69cb\u3002\n- \u5728 **\u5275\u5efa\u5171\u4eab\u96c6\u7fa3** \u9801\u9762\u7684 **Cloud Provider \u548c\u5340\u57df** \u90e8\u5206\uff0c\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a- \u9078\u64c7 **Google Cloud** \u3002\n- \u9078\u64c7\u8207\u60a8\u7684\u5730\u7406\u4f4d\u7f6e\u6700\u63a5\u8fd1\u4e14\u5177\u6709\u60a8\u6240\u9700\u7279\u5fb5\u7684\u5340\u57df\u3002\n- \u5728 **\u96c6\u7fa3\u5c64\u7d1a** \u90e8\u5206\u4e2d\uff0c\u9078\u64c7 **M0** \u9078\u9805\u3002`M0` \u96c6\u7fa3\u662f\u514d\u8cbb\u7684\uff0c\u9069\u7528\u65bc\u5c0f\u578b\u6982\u5ff5\u9a57\u8b49\u61c9\u7528\u3002\n- \u5728 **\u96c6\u7fa3\u540d\u7a31** \u4e2d\uff0c\u7232\u96c6\u7fa3\u8f38\u5165\u540d\u7a31\u3002\n- \u9ede\u64ca **\u5275\u5efa\u96c6\u7fa3** \u4ee5\u90e8\u7f72\u96c6\u7fa3\u3002## \u8a2d\u7f6e MongoDB \u96c6\u7fa3\n\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u5b8c\u6210\u4ee5\u4e0b\u6b65\u9a5f\uff1a\n- \u5c07\u793a\u4f8b\u6578\u64da\u52a0\u8f09\u5230\u96c6\u7fa3\u4e2d\u3002\n- \u914d\u7f6e\u5c0d\u96c6\u7fa3\u7684\u8a2a\u554f\u6b0a\u9650\u3002\n- \u9023\u63a5\u5230\u60a8\u7684\u96c6\u7fa3\u3002\n### \u5c07\u793a\u4f8b\u6578\u64da\u52a0\u8f09\u5230 MongoDB \u96c6\u7fa3\u4e2d\n\u73fe\u5728\u60a8\u5df2\u7d93\u5275\u5efa\u4e86 MongoDB \u96c6\u7fa3\uff0c\u63a5\u4e0b\u4f86\u9700\u8981\u5c07\u6578\u64da\u52a0\u8f09\u5230\u8a72\u96c6\u7fa3\u4e2d\u3002MongoDB \u6703\u52a0\u8f09 [\u5404\u7a2e\u793a\u4f8b\u6578\u64da\u96c6](https://www.mongodb.com/docs/atlas/sample-data/#available-sample-datasets) \u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528\u9019\u4e9b\u6578\u64da\u96c6\u4e2d\u7684\u4efb\u610f\u4e00\u500b\u4f86\u6e2c\u8a66\u6b64\u90e8\u7f72\u3002\u4f46\u662f\uff0c\u60a8\u53ef\u80fd\u5e0c\u671b\u4f7f\u7528\u8207\u751f\u7522\u90e8\u7f72\u4e2d\u4f7f\u7528\u7684\u5be6\u969b\u6578\u64da\u985e\u4f3c\u7684\u6578\u64da\u96c6\u3002\n\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u5982\u4f55\u52a0\u8f09\u793a\u4f8b\u6578\u64da\uff0c\u8acb\u53c3\u95b1 MongoDB \u6587\u6a94\u4e2d\u7684 [\u52a0\u8f09\u793a\u4f8b\u6578\u64da](https://www.mongodb.com/docs/charts/tutorial/order-data/prerequisites-setup/) \u3002\n\u5982\u9700\u52a0\u8f09\u793a\u4f8b\u6578\u64da\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u6b65\u9a5f\uff1a\n- \u5728 Atlas \u754c\u9762\u7684 **\u6578\u64da\u5eab\u90e8\u7f72** \u9801\u9762\u4e0a\uff0c\u627e\u5230\u60a8\u525b\u525b\u90e8\u7f72\u7684\u96c6\u7fa3\u3002\n- \u9ede\u64ca **\u7701\u7565\u865f** (...) \u6309\u9215\uff0c\u7136\u5f8c\u9ede\u64ca **\u52a0\u8f09\u793a\u4f8b\u6578\u64da\u96c6** \u3002\u52a0\u8f09\u793a\u4f8b\u6578\u64da\u5927\u7d04\u9700\u8981 5 \u5206\u9418\u3002\n- \u67e5\u770b\u793a\u4f8b\u6578\u64da\u96c6\uff0c\u4e26\u8a18\u4e0b\u5728\u6e2c\u8a66\u6b64\u90e8\u7f72\u6642\u8981\u4f7f\u7528\u7684\u96c6\u5408\u3002\n### \u914d\u7f6e\u96c6\u7fa3\u8a2a\u554f\u6b0a\u9650\n\u5982\u9700\u9023\u63a5\u96c6\u7fa3\uff0c\u60a8\u9700\u8981\u540c\u6642\u5275\u5efa\u6578\u64da\u5eab\u7528\u6236\u548c\u8a2d\u7f6e\u96c6\u7fa3\u7684 IP \u5730\u5740\uff1a\n- \u6578\u64da\u5eab\u7528\u6236\u8207 MongoDB \u7528\u6236\u5206\u958b\u3002\u60a8\u9700\u8981\u6578\u64da\u5eab\u7528\u6236\u80fd\u5920\u5f9e Google Cloud \u9023\u63a5\u5230 MongoDB\u3002\n- \u5c0d\u65bc\u6b64\u53c3\u8003\u67b6\u69cb\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528`0.0.0.0/0`\u7684 CIDR \u5730\u5740\u584a\u4f5c\u7232\u60a8\u7684 IP \u5730\u5740\u3002\u6b64 CIDR \u5730\u5740\u584a\u652f\u6301\u5f9e\u4efb\u4f55\u4f4d\u7f6e\u8a2a\u554f\uff0c\u4e26\u4e14\u50c5\u9069\u7528\u65bc\u6982\u5ff5\u9a57\u8b49\u90e8\u7f72\uff08\u4f8b\u5982\u8a72\u90e8\u7f72\uff09\u3002\u4f46\u662f\uff0c\u5728\u90e8\u7f72\u6b64\u67b6\u69cb\u7684\u751f\u7522\u7248\u672c\u6642\uff0c\u8acb\u78ba\u4fdd\u8f38\u5165\u9069\u5408\u60a8\u61c9\u7528\u7684 IP \u5730\u5740\u7bc4\u570d\u3002\n\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u5982\u4f55\u7232\u96c6\u7fa3\u8a2d\u7f6e\u6578\u64da\u5eab\u7528\u6236\u548c IP \u5730\u5740\uff0c\u8acb\u53c3\u95b1 MongoDB \u6587\u6a94\u4e2d\u7684 [\u4f7f\u7528\u5feb\u901f\u5165\u9580\u56ae\u5c0e\u914d\u7f6e\u96c6\u7fa3\u8a2a\u554f\u6b0a\u9650](https://www.mongodb.com/docs/atlas/security/quick-start/) \u3002\n\u5982\u9700\u914d\u7f6e\u96c6\u7fa3\u8a2a\u554f\u6b0a\u9650\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u6b65\u9a5f\uff1a\n- \u5728\u5de6\u5074\u5c0e\u822a\u7a97\u683c\u4e2d\u7684 **\u5b89\u5168** \u90e8\u5206\u4e2d\uff0c\u9ede\u64ca **\u5feb\u901f\u5165\u9580** \u3002\n- \u5728 **\u7528\u6236\u540d\u548c\u5bc6\u78bc** \u9801\u9762\u4e0a\uff0c\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\u4ee5\u5275\u5efa\u6578\u64da\u5eab\u7528\u6236\uff1a- \u5c0d\u65bc **\u7528\u6236\u540d** \uff0c\u7232\u6578\u64da\u5eab\u7528\u6236\u8f38\u5165\u540d\u7a31\u3002\n- \u5c0d\u65bc **\u5bc6\u78bc** \uff0c\u7232\u6578\u64da\u5eab\u7528\u6236\u8f38\u5165\u5bc6\u78bc\u3002\n- \u9ede\u64ca **Create User** \uff08\u5275\u5efa\u7528\u6236\uff09\u3002\n- \u5728 **\u7528\u6236\u540d\u548c\u5bc6\u78bc** \u9801\u9762\u4e0a\uff0c\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\u4ee5\u7232\u60a8\u7684\u96c6\u7fa3\u6dfb\u52a0 IP \u5730\u5740\uff1a- \u5728 **IP \u5730\u5740** \u4e2d\uff0c\u8f38\u5165 **0.0.0.0/0** \u3002\u5c0d\u65bc\u751f\u7522\u74b0\u5883\uff0c\u8acb\u9078\u64c7\u9069\u7528\u65bc\u8a72\u74b0\u5883\u7684 IP \u5730\u5740\u3002\n- \uff08\u53ef\u9078\uff09\u5c0d\u65bc **\u8aaa\u660e** \uff0c\u8f38\u5165\u96c6\u7fa3\u7684\u8aaa\u660e\u3002\n- \u9ede\u64ca **\u6dfb\u52a0\u689d\u76ee** \u3002\n- \u9ede\u64ca **\u5b8c\u6210\u4e26\u95dc\u9589** \u3002\n### \u9023\u63a5\u5230\u96c6\u7fa3\n\u914d\u7f6e\u5c0d\u96c6\u7fa3\u7684\u8a2a\u554f\u6b0a\u9650\u5f8c\uff0c\u60a8\u73fe\u5728\u9700\u8981\u9023\u63a5\u5230\u96c6\u7fa3\u3002\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u5982\u4f55\u9023\u63a5\u5230\u96c6\u7fa3\uff0c\u8acb\u53c3\u95b1 MongoDB \u6587\u6a94\u4e2d\u7684 [\u9023\u63a5\u5230\u96c6\u7fa3](https://www.mongodb.com/docs/atlas/tutorial/connect-to-your-cluster/) \u3002\n\u8acb\u6309\u7167\u4ee5\u4e0b\u6b65\u9a5f\u9023\u63a5\u5230\u60a8\u7684\u96c6\u7fa3\uff1a\n- \u5728 Atlas \u754c\u9762\u7684 **\u6578\u64da\u5eab\u90e8\u7f72** \u9801\u9762\u4e0a\uff0c\u627e\u5230\u60a8\u525b\u525b\u90e8\u7f72\u7684\u96c6\u7fa3\u3002\n- \u9078\u64c7 **\u9023\u63a5** \u3002\n- \u5728 **\u9023\u63a5** \u9801\u9762\u4e0a\uff0c\u9ede\u64ca **Compass** \u9078\u9805\u3002\n- \u627e\u5230 **\u8907\u88fd\u9023\u63a5\u5b57\u7b26\u4e32** \u5b57\u6bb5\uff0c\u7136\u5f8c\u8907\u88fd\u4e26\u4fdd\u5b58 MongoDB \u9023\u63a5\u5b57\u7b26\u4e32\u3002\u60a8\u53ef\u4ee5\u5728\u904b\u884c Dataflow \u6a21\u677f\u6642\u4f7f\u7528\u6b64\u9023\u63a5\u5b57\u7b26\u4e32\u3002\u9023\u63a5\u5b57\u7b26\u4e32\u5177\u6709\u4ee5\u4e0b\u8a9e\u6cd5\uff1a```\nmongodb+srv://<UserName>:<Password>@<HostName>\n```\u9023\u63a5\u5b57\u7b26\u4e32\u6703\u81ea\u52d5\u64c1\u6709\u60a8\u5728\u4e0a\u4e00\u6b65\u4e2d\u5275\u5efa\u7684\u6578\u64da\u5eab\u7528\u6236\u7684\u7528\u6236\u540d\u3002\u4f46\u662f\uff0c\u4f7f\u7528\u6b64\u5b57\u7b26\u4e32\u9032\u884c\u9023\u63a5\u6642\uff0c\u7cfb\u7d71\u6703\u63d0\u793a\u60a8\u8f38\u5165\u6578\u64da\u5eab\u7528\u6236\u7684\u5bc6\u78bc\u3002\n- \u9ede\u64ca **\u95dc\u9589** \u3002## \u5728 BigQuery \u4e2d\u5275\u5efa\u6578\u64da\u96c6\n\u5728 BigQuery \u4e2d\u5275\u5efa\u6578\u64da\u96c6\u6642\uff0c\u60a8\u53ea\u9700\u8f38\u5165\u6578\u64da\u96c6\u540d\u7a31\uff0c\u7136\u5f8c\u7232\u6578\u64da\u96c6\u9078\u64c7\u5730\u7406\u4f4d\u7f6e\u3002\u4f46\u662f\uff0c\u60a8\u53ef\u4ee5\u5728\u6578\u64da\u96c6\u4e0a\u8a2d\u7f6e\u53ef\u9078\u5b57\u6bb5\u3002\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u9019\u4e9b\u53ef\u9078\u5b57\u6bb5\uff0c\u8acb\u53c3\u95b1 [\u5275\u5efa\u6578\u64da\u96c6](https://cloud.google.com/bigquery/docs/datasets?hl=zh-cn#create-dataset) \u3002\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u8f49\u5230 [BigQuery](https://console.cloud.google.com/bigquery?hl=zh-cn) \u9801\u9762\u3002 [\u8f49\u5230 BigQuery](https://console.cloud.google.com/bigquery?hl=zh-cn) \n- \u5728 **\u63a2\u7d22\u5668** \u9762\u677f\u4e2d\uff0c\u9078\u64c7\u60a8\u8981\u5728\u5176\u4e2d\u5275\u5efa\u6578\u64da\u96c6\u7684\u9805\u76ee\u3002\n- \u5c55\u958b more_vert \u9078\u9805\uff0c\u7136\u5f8c\u9ede\u64ca **\u5275\u5efa\u6578\u64da\u96c6** \u3002\n- \u5728 **\u5275\u5efa\u6578\u64da\u96c6** \u9801\u9762\u4e0a\uff0c\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a- \u5c0d\u65bc **\u6578\u64da\u96c6 ID** \uff0c\u8f38\u5165\u552f\u4e00\u7684\u6578\u64da\u96c6 [\u540d\u7a31](https://cloud.google.com/bigquery/docs/datasets?hl=zh-cn#dataset-naming) \u3002\n- \u5c0d\u65bc **\u4f4d\u7f6e\u985e\u578b** \uff0c\u7232\u6578\u64da\u96c6\u9078\u64c7\u4e00\u500b\u5730\u7406 [\u4f4d\u7f6e](https://cloud.google.com/bigquery/docs/locations?hl=zh-cn) \u3002\u5275\u5efa\u6578\u64da\u96c6\u5f8c\uff0c\u5c31\u7121\u6cd5\u518d\u66f4\u6539\u6b64\u4f4d\u7f6e\u3002\u5982\u679c\u60a8\u9078\u64c7 **EU** \u6216\u67d0\u500b\u6b50\u76df\u5340\u57df\u4f5c\u7232\u6578\u64da\u96c6\u4f4d\u7f6e\uff0c\u5247\u6838\u5fc3 BigQuery \u5ba2\u6236\u6578\u64da\u6703\u99d0\u7559\u5728\u6b50\u76df\u3002\u5982\u9700\u77ad\u89e3\u6838\u5fc3 BigQuery \u5ba2\u6236\u6578\u64da\u7684\u5b9a\u7fa9\uff0c\u8acb\u53c3\u95b1 [\u670d\u52d9\u5c08\u7528\u689d\u6b3e](https://cloud.google.com/terms/service-terms?hl=zh-cn#13-google-bigquery-service) \u3002\n- \u9ede\u64ca **\u5275\u5efa\u6578\u64da\u96c6** \u3002\n## \u5275\u5efa\u3001\u76e3\u63a7\u548c\u9a57\u8b49 Dataflow \u6279\u91cf\u4f5c\u696d\n\u5728 Dataflow \u4e2d\uff0c\u8acb\u6309\u7167\u4ee5\u4e0b\u8aaa\u660e\u5275\u5efa\u5c07\u6279\u91cf\u6578\u64da\u5f9e MongoDB \u52a0\u8f09\u5230 BigQuery \u7684\u4e00\u6b21\u6027\u6279\u91cf\u4f5c\u696d\u3002 \u5275\u5efa\u6279\u91cf\u4f5c\u696d\u5f8c\uff0c\u60a8\u53ef\u4ee5\u5728 Dataflow \u76e3\u63a7\u754c\u9762\u4e2d\u76e3\u63a7\u8a72\u4f5c\u696d\u7684\u9032\u5ea6\u3002\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u5982\u4f55\u4f7f\u7528\u76e3\u63a7\u754c\u9762\uff0c\u8acb\u53c3\u95b1 [\u4f7f\u7528 Dataflow \u76e3\u63a7\u754c\u9762](https://cloud.google.com/dataflow/docs/guides/monitoring-overview?hl=zh-cn) \u3002\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u8f49\u5230 [Dataflow](https://console.cloud.google.com/dataflow?hl=zh-cn) \u9801\u9762\u3002 [\u9032\u5165 Dataflow](https://console.cloud.google.com/dataflow?hl=zh-cn) \n- \u9ede\u64ca **\u57fa\u65bc\u6a21\u677f\u5275\u5efa\u4f5c\u696d** \u3002\n- \u5728 **\u57fa\u65bc\u6a21\u677f\u5275\u5efa\u4f5c\u696d** \u9801\u9762\u4e0a\uff0c\u57f7\u884c\u4ee5\u4e0b\u6b65\u9a5f\uff1a- \u5c0d\u65bc **\u4f5c\u696d\u540d\u7a31** \uff0c\u8f38\u5165\u552f\u4e00\u7684\u4f5c\u696d\u540d\u7a31\uff0c\u4f8b\u5982 **mongodb-to-bigquery-batch** \u3002\u78ba\u4fdd\u8a72\u9805\u76ee\u7576\u524d\u6c92\u6709\u904b\u884c\u5177\u6709\u8a72\u540d\u7a31\u7684\u5176\u4ed6 Dataflow \u4f5c\u696d\u3002\n- \u5c0d\u65bc **\u5340\u57df\u7aef\u9ede** \uff0c\u9078\u64c7\u8207\u60a8\u525b\u525b\u5275\u5efa\u7684 BigQuery \u6578\u64da\u96c6\u76f8\u540c\u7684\u4f4d\u7f6e\u3002\n- \u5c0d\u65bc **Dataflow \u6a21\u677f** \uff0c\u8acb\u5728 **\u6279\u91cf\u8655\u7406\u6578\u64da\uff08\u6279\u8655\u7406\uff09\u5217\u8868** \u4e2d\uff0c\u9078\u64c7 **MongoDB to BigQuery** \u3002\n- \u5728 **\u5fc5\u9700\u53c3\u6578** \u90e8\u5206\u4e2d\uff0c\u8f38\u5165\u4ee5\u4e0b\u53c3\u6578\uff1a- \u5c0d\u65bc **MongoDB Connection URI** \uff0c\u8acb\u8f38\u5165\u60a8\u7684 Atlas MongoDB \u9023\u63a5\u5b57\u7b26\u4e32\u3002\n- \u5c0d\u65bc **Mongo \u6578\u64da\u5eab** \uff0c\u8acb\u8f38\u5165\u60a8\u4e4b\u524d\u5275\u5efa\u7684\u6578\u64da\u5eab\u7684\u540d\u7a31\u3002\n- \u5728 **Mongo \u96c6\u5408** \u90e8\u5206\uff0c\u8f38\u5165\u60a8\u4e4b\u524d\u8a18\u4e0b\u7684\u793a\u4f8b\u96c6\u5408\u7684\u540d\u7a31\u3002\n- \u5c0d\u65bc BigQuery **\u76ee\u6a19\u8868** \uff0c\u9ede\u64ca **\u700f\u89bd** \uff0c\u7136\u5f8c\u9078\u64c7\u60a8\u5728\u4e0a\u4e00\u6b65\u4e2d\u5275\u5efa\u7684 BigQuery \u8868\u3002\n- \u5c0d\u65bc **\u7528\u6236\u9078\u9805** \uff0c\u8f38\u5165 **\u7121** \u6216 **FLATTEN** \u3002 **\u7121** \u5c07\u6574\u500b JSON \u5b57\u7b26\u4e32\u683c\u5f0f\u7684\u6587\u6a94\u52a0\u8f09\u5230 BigQuery \u4e2d\u3002 **FLATTEN** \u5c07\u6587\u6a94\u5c55\u5e73\u4e00\u500b\u7d1a\u5225\u3002\u5982\u679c\u60a8\u4e0d\u63d0\u4f9b UDF\uff0c **FLATTEN** \u9078\u9805\u50c5\u9069\u7528\u65bc\u5177\u6709\u56fa\u5b9a\u67b6\u69cb\u7684\u6587\u6a94\u3002\n- \u5982\u9700\u5553\u52d5\u4f5c\u696d\uff0c\u8acb\u9ede\u64ca **\u904b\u884c\u4f5c\u696d** \u3002\n- \u8acb\u6309\u7167\u4ee5\u4e0b\u6b65\u9a5f\u6253\u958b Dataflow \u76e3\u63a7\u754c\u9762\uff0c\u60a8\u53ef\u4ee5\u5728\u5176\u4e2d\u6aa2\u67e5\u6279\u91cf\u4f5c\u696d\u7684\u9032\u5ea6\uff0c\u4e26\u9a57\u8b49\u4f5c\u696d\u662f\u5426\u5df2\u5b8c\u6210\u4e26\u4e14\u6c92\u6709\u932f\u8aa4\uff1a- \u5728 Google Cloud \u63a7\u5236\u6aaf\u7684\u6b64\u90e8\u7f72\u9805\u76ee\u4e2d\uff0c\u6253\u958b\u5c0e\u822a\u83dc\u55ae\u3002\n- \u5728 **Analytics** \u4e2d\uff0c\u9ede\u64ca **Dataflow** \u3002\n- \u6d41\u6c34\u7dda\u6210\u529f\u904b\u884c\u5f8c\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\u4ee5\u9a57\u8b49\u8868\u8f38\u51fa\uff1a- \u5728 BigQuery \u4e2d\uff0c\u6253\u958b **\u700f\u89bd\u5668** \u7a97\u683c\u3002\n- \u5c55\u958b\u9805\u76ee\uff0c\u9ede\u64ca\u6578\u64da\u96c6\uff0c\u7136\u5f8c\u96d9\u64ca\u8868\u3002\u73fe\u5728\uff0c\u60a8\u61c9\u8a72\u53ef\u4ee5\u5728\u8868\u4e2d\u67e5\u770b MongoDB \u6578\u64da\u3002\n## \u6e05\u7406\n\u7232\u907f\u514d MongoDB \u548c Google Cloud \u8cec\u865f\u7522\u751f\u8cbb\u7528\uff0c\u60a8\u61c9\u66ab\u505c\u6216\u7d42\u6b62 MongoDB Atlas \u96c6\u7fa3\uff0c\u4e26\u522a\u9664\u60a8\u7232\u6b64\u53c3\u8003\u67b6\u69cb\u5275\u5efa\u7684 Google Cloud \u9805\u76ee\u3002\n### \u66ab\u505c\u6216\u7d42\u6b62 MongoDB Atlas \u96c6\u7fa3\n\u4ee5\u4e0b\u904e\u7a0b\u4ecb\u7d39\u4e86\u66ab\u505c\u96c6\u7fa3\u7684\u57fa\u790e\u77e5\u8b58\u3002\u5982\u9700\u77ad\u89e3\u5b8c\u6574\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 MongoDB \u6587\u6a94\u4e2d\u7684 [\u66ab\u505c\u3001\u6062\u5fa9\u6216\u7d42\u6b62\u96c6\u7fa3](https://www.mongodb.com/docs/atlas/pause-terminate-cluster/) \u3002\n- \u5728 Atlas \u754c\u9762\u4e2d\uff0c\u8f49\u5230 Atlas \u9805\u76ee\u7684 **\u6578\u64da\u5eab\u90e8\u7f72** \u9801\u9762\u3002\n- \u5c0d\u65bc\u8981\u66ab\u505c\u7684\u96c6\u7fa3\uff0c\u9ede\u64camore_horiz\u3002\n- \u9ede\u64ca **\u66ab\u505c\u96c6\u7fa3** \u3002\n- \u9ede\u64ca **\u66ab\u505c\u96c6\u7fa3** \u4ee5\u78ba\u8a8d\u60a8\u7684\u9078\u64c7\u3002\n### \u522a\u9664\u9805\u76ee- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- **\u8b66\u544a** \uff1a\u522a\u9664\u9805\u76ee\u6703\u7522\u751f\u4ee5\u4e0b\u5f71\u97ff- **\u9805\u76ee\u4e2d\u7684\u6240\u6709\u5167\u5bb9\u90fd\u6703\u88ab\u522a\u9664\u3002** \u5982\u679c\u60a8\u5c07\u73fe\u6709\u9805\u76ee\u7528\u65bc\u672c\u6587\u6a94\u4e2d\u7684\u4efb\u52d9\uff0c\u5247\u522a\u9664\u8a72\u9805\u76ee\u5f8c\uff0c\u9084\u5c07\u522a\u9664\u60a8\u5df2\u5728\u8a72\u9805\u76ee\u4e2d\u5b8c\u6210\u7684\u4efb\u4f55\u5176\u4ed6\u5de5\u4f5c\u3002\n- **\u81ea\u5b9a\u7fa9\u9805\u76ee ID \u4e1f\u5931\u3002** \u5275\u5efa\u6b64\u9805\u76ee\u6642\uff0c\u60a8\u53ef\u80fd\u5275\u5efa\u4e86\u8981\u5728\u5c07\u4f86\u4f7f\u7528\u7684\u81ea\u5b9a\u7fa9\u9805\u76ee ID\u3002\u8981\u4fdd\u7559\u4f7f\u7528\u8a72\u9805\u76ee ID \u7684\u7db2\u5740\uff08\u4f8b\u5982`appspot.com`\u7db2\u5740\uff09\uff0c\u8acb\u522a\u9664\u9805\u76ee\u5167\u7684\u6240\u9078\u8cc7\u6e90\uff0c\u800c\u4e0d\u662f\u522a\u9664\u6574\u500b\u9805\u76ee\u3002\n\u5982\u679c\u60a8\u6253\u7b97\u63a2\u7d22\u591a\u500b\u67b6\u69cb\u3001\u6559\u7a0b\u6216\u5feb\u901f\u5165\u9580\uff0c\u5247\u91cd\u8907\u4f7f\u7528\u9805\u76ee\u53ef\u4ee5\u5e6b\u52a9\u60a8\u907f\u514d\u8d85\u51fa\u9805\u76ee\u914d\u984d\u9650\u5236\u3002\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u9032\u5165 **\u7ba1\u7406\u8cc7\u6e90** \u9801\u9762\u3002 [\u8f49\u5230\u201c\u7ba1\u7406\u8cc7\u6e90\u201d](https://console.cloud.google.com/iam-admin/projects?hl=zh-cn) \n- \u5728\u9805\u76ee\u5217\u8868\u4e2d\uff0c\u9078\u64c7\u8981\u522a\u9664\u7684\u9805\u76ee\uff0c\u7136\u5f8c\u9ede\u64ca **\u522a\u9664** \u3002\n- \u5728\u5c0d\u8a71\u6846\u4e2d\u8f38\u5165\u9805\u76ee ID\uff0c\u7136\u5f8c\u9ede\u64ca **\u95dc\u9589** \u4ee5\u522a\u9664\u9805\u76ee\u3002\n## \u5f8c\u7e8c\u6b65\u9a5f\n- \u5982\u679c\u8981\u81ea\u5b9a\u7fa9\u6a21\u677f\uff0c\u8acb\u5728 [GitHub](https://github.com/GoogleCloudPlatform/DataflowTemplates) \u4e0a\u627e\u5230 Google Dataflow \u6a21\u677f\u3002\n- \u8a73\u7d30\u77ad\u89e3 [Cloud \u6280\u80fd\u63d0\u5347](https://www.cloudskillsboost.google/quests/306?utm_source=qwiklabs&%3Butm_medium=lp&%3Butm_campaign=gpe-hol&hl=zh-cn) \u4e2d\u7684 MongoDB Atlas \u548c Google Cloud \u89e3\u6c7a\u65b9\u6848\u3002\n- \u8a73\u7d30\u77ad\u89e3\u6b64\u53c3\u8003\u67b6\u69cb\u4e2d\u4f7f\u7528\u7684 Google Cloud \u7522\u54c1\uff1a- [BigQuery](https://cloud.google.com/bigquery?hl=zh-cn) \n- [Pub/Sub](https://cloud.google.com/pubsub?hl=zh-cn) \n- [Dataflow](https://cloud.google.com/dataflow?hl=zh-cn) \n- [Compute Engine](https://cloud.google.com/compute?hl=zh-cn) \n- \u5982\u9700\u67e5\u770b\u66f4\u591a\u53c3\u8003\u67b6\u69cb\u3001\u5716\u8868\u548c\u6700\u4f73\u5be6\u8e10\uff0c\u8acb\u700f\u89bd [\u96f2\u67b6\u69cb\u4e2d\u5fc3](https://cloud.google.com/architecture?hl=zh-cn) \u3002## \u8ca2\u737b\u8005\n\u4f5c\u8005\uff1a\n- [Saurabh Kumar](https://www.linkedin.com/in/saurabh-kumar-48556a19) | ISV \u5408\u4f5c\u4f19\u4f34\u5de5\u7a0b\u5e2b\n- [Venkatesh Shanbhag](https://www.linkedin.com/in/venkatesh-shanbhag) | \u9ad8\u7d1a\u89e3\u6c7a\u65b9\u6848\u67b6\u69cb\u5e2b (MongoDB)\n\u5176\u4ed6\u8ca2\u737b\u8005\uff1a\n- [Jun Liu](https://www.linkedin.com/in/jun-liu-1759093a) | \u652f\u6301\u6027\u6280\u8853\u4e3b\u7ba1\n- [Maridu Raju Makaraju](https://www.linkedin.com/in/mmraju) | \u53ef\u652f\u6301\u6027\u6280\u8853\u4e3b\u7ba1\n- [Sergei Lilichenko](https://www.linkedin.com/in/sergei-lilichenko) | \u89e3\u6c7a\u65b9\u6848\u67b6\u69cb\u5e2b\n- Shan Kulandaivel | \u7d44\u5408\u7522\u54c1\u7d93\u7406\n\u5982\u9700\u67e5\u770b\u975e\u516c\u958b\u7684 LinkedIn \u500b\u4eba\u8cc7\u6599\uff0c\u8acb\u767b\u9304 LinkedIn\u3002", "guide": "Docs"}