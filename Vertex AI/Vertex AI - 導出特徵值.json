{"title": "Vertex AI - \u5c0e\u51fa\u7279\u5fb5\u503c", "url": "https://cloud.google.com/vertex-ai/docs/featurestore/export-features?hl=zh-cn", "abstract": "# Vertex AI - \u5c0e\u51fa\u7279\u5fb5\u503c\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u5728\u4ee5\u4e0b\u67d0\u500b\u74b0\u5883\u4e2d\u904b\u884c\u201c\u5305\u542b\u793a\u4f8b\u6578\u64da\u7684\u7279\u5fb5\u5b58\u5132\u5340\u5de5\u4f5c\u6d41\u793a\u4f8b\u201dJupyter \u7b46\u8a18\u672c\uff1a [\u5728 Colab \u4e2d\u904b\u884c](https://colab.research.google.com/github/GoogleCloudPlatform/vertex-ai-samples/blob/main/notebooks/official/feature_store/sdk-feature-store.ipynb?hl=zh-cn) | [\u5728 Vertex AI Workbench \u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u4e2d\u6253\u958b](https://console.cloud.google.com/vertex-ai/workbench/deploy-notebook?download_url=https%3A%2F%2Fraw.githubusercontent.com%2FGoogleCloudPlatform%2Fvertex-ai-samples%2Fmain%2Fnotebooks%2Fofficial%2Ffeature_store%2Fsdk-feature-store.ipynb&hl=zh-cn) | [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/vertex-ai-samples/blob/main/notebooks/official/feature_store/sdk-feature-store.ipynb)\n\u5c07\u55ae\u500b\u5be6\u9ad4\u985e\u578b\u7684\u6240\u6709\u5be6\u9ad4\u7684\u7279\u5fb5\u503c\u5c0e\u51fa\u5230 BigQuery \u8868\u6216 Cloud Storage \u5b58\u5132\u6876\u3002\u60a8\u53ef\u4ee5\u9078\u64c7\u7372\u53d6\u5feb\u7167\u6216\u5b8c\u6574\u5c0e\u51fa\u7279\u5fb5\u503c\u3002\u8207\u53ef\u7232\u6bcf\u500b\u7279\u5fb5\u8fd4\u56de\u591a\u500b\u503c\u7684\u5b8c\u6574\u5c0e\u51fa\u76f8\u6bd4\uff0c\u5feb\u7167\u53ea\u6703\u7232\u6bcf\u500b\u7279\u5fb5\u8fd4\u56de\u4e00\u500b\u503c\u3002\u5c0e\u51fa\u7279\u5fb5\u503c\u6642\uff0c\u60a8\u4e0d\u80fd\u9078\u64c7\u7279\u5b9a\u5be6\u9ad4 ID\uff0c\u4e5f\u4e0d\u80fd\u5305\u542b\u591a\u500b\u5be6\u9ad4\u985e\u578b\u3002\n\u5c0e\u51fa\u7279\u5fb5\u503c\u5728\u6b78\u6a94\u6578\u64da\u6216\u5c0d\u6578\u64da\u57f7\u884c\u5373\u6642\u5206\u6790\u6642\u975e\u5e38\u6709\u7528\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u4ee5\u5b58\u5132\u7279\u5fb5\u5b58\u5132\u5340\u7684\u5e38\u898f\u5feb\u7167\u4ee5\u4fdd\u5b58\u5176\u5728\u4e0d\u540c\u6642\u9593\u9ede\u7684\u72c0\u614b\u3002\u5982\u679c\u60a8\u9700\u8981\u7372\u53d6\u7528\u65bc\u69cb\u5efa\u8a13\u7df4\u6578\u64da\u96c6\u7684\u7279\u5fb5\u503c\uff0c\u8acb\u6539\u7528 [\u6279\u91cf\u50b3\u9001](https://cloud.google.com/vertex-ai/docs/featurestore/serving-batch?hl=zh-cn) \u3002\n", "content": "## \u5feb\u7167\u548c\u5b8c\u6574\u5c0e\u51fa\u6bd4\u8f03\n\u5feb\u7167\u548c\u5b8c\u6574\u5c0e\u51fa\u9078\u9805\u90fd\u5141\u8a31\u60a8\u901a\u904e\u6307\u5b9a\u55ae\u500b\u6642\u9593\u6233\uff08\u958b\u59cb\u6642\u9593\u6216\u7d50\u675f\u6642\u9593\uff09\u6216\u540c\u6642\u6307\u5b9a\u9019\u5169\u500b\u6642\u9593\u6233\u4f86\u67e5\u8a62\u6578\u64da\u3002\u5c0d\u65bc\u5feb\u7167\uff0cVertex AI Feature Store\uff08\u820a\u7248\uff09\u6703\u8fd4\u56de\u7d66\u5b9a\u6642\u9593\u7bc4\u570d\u5167\u7684\u6700\u65b0\u7279\u5fb5\u503c\u3002\u5728\u8f38\u51fa\u4e2d\uff0c\u6bcf\u500b\u7279\u5fb5\u503c\u7684\u95dc\u806f\u6642\u9593\u6233\u662f\u5feb\u7167\u7684\u6642\u9593\u6233\uff08\u800c\u4e0d\u662f\u7279\u5fb5\u503c\u7684\u6642\u9593\u6233\uff09\u3002\n\u5c0d\u65bc\u5b8c\u6574\u5c0e\u51fa\uff0cVertex AI Feature Store\uff08\u820a\u7248\uff09\u6703\u8fd4\u56de\u7d66\u5b9a\u6642\u9593\u7bc4\u570d\u5167\u7684\u6240\u6709\u7279\u5fb5\u503c\u3002\u5728\u8f38\u51fa\u4e2d\uff0c\u6bcf\u500b\u7279\u5fb5\u503c\u7684\u95dc\u806f\u6642\u9593\u6233\u662f\u7279\u5fb5\u7684\u6642\u9593\u6233\uff08\u5373\u6ce8\u5165\u7279\u5fb5\u503c\u6642\u6307\u5b9a\u7684\u6642\u9593\u6233\uff09\u3002\n\u4e0b\u8868\u7e3d\u7d50\u4e86 Vertex AI Feature Store\uff08\u820a\u7248\uff09\u6839\u64da\u60a8\u9078\u64c7\u7684\u9078\u9805\u548c\u60a8\u63d0\u4f9b\u7684\u6642\u9593\u6233\u8fd4\u56de\u7684\u5167\u5bb9\u3002\n| \u9078\u9805  | \u50c5\u958b\u59cb\u6642\u9593\uff08\u542b\u908a\u754c\u503c\uff09                     | \u50c5\u7d50\u675f\u6642\u9593\uff08\u542b\u908a\u754c\u503c\uff09                    | \u958b\u59cb\u6642\u9593\u548c\u7d50\u675f\u6642\u9593\uff08\u542b\u908a\u754c\u503c\uff09        |\n|:---------|:----------------------------------------------------------------------------------------------------------|:------------------------------------------------------------------------------------------------------|:--------------------------------------------------------------|\n| \u5feb\u7167  | \u5f9e\u7576\u524d\u6642\u9593\uff08\u63a5\u6536\u5230\u8acb\u6c42\u7684\u6642\u9593\uff09\u958b\u59cb\u4e00\u76f4\u56de\u6eaf\u5230\u958b\u59cb\u6642\u9593\uff0c\u8fd4\u56de\u9019\u6bb5\u6642\u9593\u5167\u7684\u6700\u65b0\u503c\u3002 \u5feb\u7167\u6642\u9593\u6233\u8a2d\u7f6e\u7232\u7576\u524d\u6642\u9593\u3002 | \u5f9e\u7d50\u675f\u6642\u9593\u958b\u59cb\u4e00\u76f4\u56de\u6eaf\u5230\u6bcf\u500b\u7279\u5fb5\u7684\u7b2c\u4e00\u500b\u503c\uff0c\u8fd4\u56de\u9019\u6bb5\u6642\u9593\u5167\u7684\u6700\u65b0\u503c\u3002 \u5feb\u7167\u6642\u9593\u6233\u8a2d\u7f6e\u7232\u6307\u5b9a\u7684\u7d50\u675f\u6642\u9593\u3002 | \u8fd4\u56de\u6307\u5b9a\u6642\u9593\u7bc4\u570d\u5167\u7684\u6700\u65b0\u503c\u3002 \u5feb\u7167\u6642\u9593\u6233\u8a2d\u7f6e\u7232\u6307\u5b9a\u7684\u7d50\u675f\u6642\u9593\u3002 |\n| \u5b8c\u6574\u5c0e\u51fa | \u8fd4\u56de\u958b\u59cb\u6642\u9593\u53ca\u5176\u4e4b\u5f8c\uff0c\u76f4\u81f3\u7576\u524d\u6642\u9593\uff08\u767c\u9001\u8acb\u6c42\u7684\u6642\u9593\uff09\u7684\u6240\u6709\u503c\u3002           | \u8fd4\u56de\u5230\u7d50\u675f\u6642\u9593\u4e4b\u524d\u7684\u6240\u6709\u503c\uff0c\u6b64\u904e\u7a0b\u6703\u56de\u6eaf\u5230\u6bcf\u500b\u7279\u5fb5\u7684\u7b2c\u4e00\u500b\u503c\u3002          | \u8fd4\u56de\u6307\u5b9a\u6642\u9593\u7bc4\u570d\u5167\u7684\u6240\u6709\u503c\u3002         |\n## Null \u503c\n\u5c0d\u65bc\u5feb\u7167\uff0c\u5982\u679c\u7d66\u5b9a\u6642\u9593\u6233\u7684\u6700\u65b0\u7279\u5fb5\u503c\u7232 null\uff0cVertex AI Feature Store\uff08\u820a\u7248\uff09\u6703\u8fd4\u56de\u4e4b\u524d\u7684\u975e null \u7279\u5fb5\u503c\u3002\u5982\u679c\u4e4b\u524d\u6c92\u6709\u975e null \u503c\uff0cVertex AI Feature Store\uff08\u820a\u7248\uff09\u6703\u8fd4\u56de null\u3002\n\u5c0d\u65bc\u5b8c\u6574\u5c0e\u51fa\uff0c\u5982\u679c\u7d66\u5b9a\u6642\u9593\u6233\u7684\u7279\u5fb5\u503c\u7232 null\uff0c\u5247 Vertex AI Feature Store\uff08\u820a\u7248\uff09\u6703\u91dd\u5c0d\u8a72\u6642\u9593\u6233\u8fd4\u56de null\u3002\n## \u793a\u4f8b\n\u4f8b\u5982\uff0c\u5047\u8a2d\u60a8\u7684\u7279\u5fb5\u5b58\u5132\u5340\u4e2d\u6709\u4ee5\u4e0b\u503c\uff0c\u5176\u4e2d `Feature_A` \u548c `Feature_B` \u7684\u503c\u5177\u6709\u76f8\u540c\u7684\u6642\u9593\u6233\uff1a\n| \u5be6\u9ad4 ID | \u7279\u5fb5\u503c\u6642\u9593\u6233 | Feature_A | Feature_B |\n|----------:|:---------------|:------------|:------------|\n|  123 | T1    | A_T1  | B_T1  |\n|  123 | T2    | A_T2  | nan   |\n|  123 | T3    | A_T3  | nan   |\n|  123 | T4    | A_T4  | B_T4  |\n|  123 | T5    | nan   | B_T5  |\n### \u5feb\u7167\n\u5c0d\u65bc\u5feb\u7167\uff0cVertex AI Feature Store\uff08\u820a\u7248\uff09\u6703\u6839\u64da\u7d66\u5b9a\u7684\u6642\u9593\u6233\u503c\u8fd4\u56de\u4ee5\u4e0b\u503c\uff1a\n- \u5982\u679c\u50c5 **\u958b\u59cb** \u6642\u9593\u8a2d\u7f6e\u7232`T3`\uff0c\u5247\u5feb\u7167\u6703\u8fd4\u56de\u4ee5\u4e0b\u503c\uff1a\n| \u5be6\u9ad4 ID | \u5feb\u7167\u6642\u9593\u6233 | Feature_A | Feature_B |\n|----------:|:-------------|:------------|:------------|\n|  123 | CURRENT_TIME | A_T4  | B_T5  |\n- \u5982\u679c\u50c5 **\u7d50\u675f** \u6642\u9593\u8a2d\u7f6e\u7232`T3`\uff0c\u5247\u5feb\u7167\u6703\u8fd4\u56de\u4ee5\u4e0b\u503c\uff1a\n| \u5be6\u9ad4 ID | \u5feb\u7167\u6642\u9593\u6233 | Feature_A | Feature_B |\n|----------:|:-------------|:------------|:------------|\n|  123 | T3   | A_T3  | B_T1  |\n- \u5982\u679c **\u958b\u59cb** \u548c **\u7d50\u675f** \u6642\u9593\u8a2d\u7f6e\u7232`T2`\u548c`T3`\uff0c\u5247\u5feb\u7167\u6703\u8fd4\u56de\u4ee5\u4e0b\u503c\uff1a\n| \u5be6\u9ad4 ID | \u5feb\u7167\u6642\u9593\u6233 | Feature_A | Feature_B |\n|----------:|:-------------|:------------|------------:|\n|  123 | T3   | A_T3  |   nan |\n### \u5b8c\u6574\u5c0e\u51fa\n\u5c0d\u65bc\u5b8c\u6574\u5c0e\u51fa\uff0cVertex AI Feature Store\uff08\u820a\u7248\uff09\u6703\u6839\u64da\u7d66\u5b9a\u7684\u6642\u9593\u6233\u503c\u8fd4\u56de\u4ee5\u4e0b\u503c\uff1a\n- \u5982\u679c\u50c5 **\u958b\u59cb** \u6642\u9593\u8a2d\u7f6e\u7232`T3`\uff0c\u5247\u5b8c\u6574\u5c0e\u51fa\u5c07\u8fd4\u56de\u4ee5\u4e0b\u503c\uff1a\n| \u5be6\u9ad4 ID | \u7279\u5fb5\u503c\u6642\u9593\u6233 | Feature_A | Feature_B |\n|----------:|:---------------|:------------|:------------|\n|  123 | T3    | A_T3  | nan   |\n|  123 | T4    | A_T4  | B_T4  |\n|  123 | T5    | nan   | B_T5  |\n- \u5982\u679c\u50c5 **\u7d50\u675f** \u6642\u9593\u8a2d\u7f6e\u7232`T3`\uff0c\u5247\u5b8c\u6574\u5c0e\u51fa\u5c07\u8fd4\u56de\u4ee5\u4e0b\u503c\uff1a\n| \u5be6\u9ad4 ID | \u7279\u5fb5\u503c\u6642\u9593\u6233 | Feature_A | Feature_B |\n|----------:|:---------------|:------------|:------------|\n|  123 | T1    | A_T1  | B_T1  |\n|  123 | T2    | A_T2  | nan   |\n|  123 | T3    | A_T3  | nan   |\n- \u5982\u679c **\u958b\u59cb** \u548c **\u7d50\u675f** \u6642\u9593\u8a2d\u7f6e\u7232`T2`\u548c`T4`\uff0c\u5247\u5b8c\u6574\u5c0e\u51fa\u5c07\u8fd4\u56de\u4ee5\u4e0b\u503c\uff1a\n| \u5be6\u9ad4 ID | \u7279\u5fb5\u503c\u6642\u9593\u6233 | Feature_A | Feature_B |\n|----------:|:---------------|:------------|:------------|\n|  123 | T2    | A_T2  | nan   |\n|  123 | T3    | A_T3  | nan   |\n|  123 | T4    | A_T4  | B_T4  |\n## \u5c0e\u51fa\u7279\u5fb5\u503c\n\u5c0e\u51fa\u7279\u5fb5\u503c\u6642\uff0c\u60a8\u9700\u8981\u9078\u64c7\u8981\u67e5\u8a62\u7684\u7279\u5fb5\u4ee5\u53ca\u5b83\u662f\u5feb\u7167\u9084\u662f\u5b8c\u6574\u5c0e\u51fa\u3002\u4ee5\u4e0b\u90e8\u5206\u5c55\u793a\u4e86\u6bcf\u500b\u9078\u9805\u7684\u793a\u4f8b\u3002\n\u5c0d\u65bc\u9019\u5169\u500b\u9078\u9805\uff0c\u8f38\u51fa\u76ee\u7684\u5730\u5fc5\u9808\u8207\u6e90\u7279\u5fb5\u5b58\u5132\u5340\u4f4d\u65bc\u540c\u4e00\u5340\u57df\u3002\u4f8b\u5982\uff0c\u5982\u679c\u7279\u5fb5\u5b58\u5132\u5340\u4f4d\u65bc `us-central1` \uff0c\u5247\u76ee\u6a19 Cloud Storage \u5b58\u5132\u6876\u6216 BigQuery \u8868\u4e5f\u5fc5\u9808\u4f4d\u65bc `us-central1` \u3002\n### \u5feb\u7167\n\u5c0e\u51fa\u7d66\u5b9a\u6642\u9593\u7bc4\u570d\u5167\u7684\u6700\u65b0\u7279\u5fb5\u503c\u3002\n\u8acb\u4f7f\u7528\u5176\u4ed6\u65b9\u6cd5\u3002\u60a8\u7121\u6cd5\u5f9e Google Cloud \u63a7\u5236\u6aaf\u5c0e\u51fa\u7279\u5fb5\u503c\u3002\u5982\u9700\u5c0e\u51fa\u7279\u5fb5\u503c\uff0c\u8acb\u4f7f\u7528 [entityTypes.exportFeatureValues](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/projects.locations.featurestores.entityTypes/exportFeatureValues?hl=zh-cn) \u65b9\u6cd5\u767c\u9001 POST \u8acb\u6c42\u3002\n\u4ee5\u4e0b\u793a\u4f8b\u6703\u8f38\u51fa\u4e00\u500b BigQuery \u8868\uff0c\u4f46\u60a8\u4e5f\u53ef\u4ee5\u8f38\u51fa\u5230 Cloud Storage \u5b58\u5132\u6876\u3002\u5728\u63d0\u4ea4\u8acb\u6c42\u4e4b\u524d\uff0c\u53ef\u80fd\u9700\u8981\u6eff\u8db3\u6bcf\u500b\u8f38\u51fa\u76ee\u6a19\u7684\u4e00\u4e9b\u524d\u63d0\u689d\u4ef6\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8981\u7232 `bigqueryDestination` \u5b57\u6bb5\u6307\u5b9a\u8868\u540d\u7a31\uff0c\u5247\u5fc5\u9808\u5df2\u6709\u6578\u64da\u96c6\u3002API \u53c3\u8003\u6587\u6a94\u4e2d\u8aaa\u660e\u4e86\u9019\u4e9b\u8981\u6c42\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a\u7279\u5fb5\u5b58\u5132\u5340\u6240\u5728\u7684\u5340\u57df\u3002\u4f8b\u5982`us-central1`\u3002\n- \uff1a\u60a8\u7684 [\u9805\u76ee ID](https://cloud.google.com/resource-manager/docs/creating-managing-projects?hl=zh-cn#identifiers) \u3002\n- \uff1a\u7279\u5fb5\u5b58\u5132\u5340\u7684 ID\u3002\n- \uff1a\u5be6\u9ad4\u985e\u578b\u7684 ID\u3002\n- \u548c\uff1a\uff08\u53ef\u9078\uff09\u5982\u679c\u50c5\u6307\u5b9a\u958b\u59cb\u6642\u9593\uff0c\u5247\u7cfb\u7d71\u6703\u5f9e\u7576\u524d\u6642\u9593\uff08\u767c\u9001\u8acb\u6c42\u7684\u6642\u9593\uff09\u958b\u59cb\u4e00\u76f4\u56de\u6eaf\u5230\u958b\u59cb\u6642\u9593\uff0c\u8fd4\u56de\u9019\u6bb5\u6642\u9593\u5167\u7684\u6700\u65b0\u503c\u3002\u5982\u679c\u50c5\u6307\u5b9a\u7d50\u675f\u6642\u9593\uff0c\u5247\u7cfb\u7d71\u6703\u5f9e\u7d50\u675f\u6642\u9593\uff08\u542b\u908a\u754c\u503c\uff09\u958b\u59cb\u4e00\u76f4\u56de\u6eaf\u5230\u7b2c\u4e00\u500b\u503c\uff0c\u8fd4\u56de\u9019\u6bb5\u6642\u9593\u5167\u7684\u6700\u65b0\u503c\u3002\u5982\u679c\u540c\u6642\u6307\u5b9a\u958b\u59cb\u6642\u9593\u548c\u7d50\u675f\u6642\u9593\uff0c\u5247\u7cfb\u7d71\u6703\u8fd4\u56de\u6307\u5b9a\u6642\u9593\u7bc4\u570d\u5167\uff08\u542b\u908a\u754c\u503c\uff09\u7684\u6700\u65b0\u503c\u3002\u5982\u679c\u9019\u5169\u500b\u6642\u9593\u5747\u672a\u6307\u5b9a\uff0c\u5247\u7cfb\u7d71\u6703\u5f9e\u7576\u524d\u6642\u9593\u958b\u59cb\u4e00\u76f4\u56de\u6eaf\u5230\u7b2c\u4e00\u500b\u503c\uff0c\u8fd4\u56de\u9019\u6bb5\u6642\u9593\u5167\u6bcf\u500b\u7279\u5fb5\u7684\u6700\u65b0\u503c\u3002\n- \uff1a\u76ee\u6a19 BigQuery \u6578\u64da\u96c6\u7684\u540d\u7a31\u3002\n- \uff1a\u76ee\u6a19 BigQuery \u8868\u7684\u540d\u7a31\u3002\n- \uff1a\u4e00\u500b\u6216\u591a\u500b\u7279\u5fb5\u7684 ID\u3002\u6307\u5b9a\u4e00\u500b`*`\uff08\u661f\u865f\uff09\u53ef\u4ee5\u9078\u64c7\u6240\u6709\u7279\u5fb5\u3002\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nPOST https://LOCATION_ID-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION_ID/featurestores/FEATURESTORE_ID/entityTypes/ENTITY_TYPE_ID:exportFeatureValues\n```\n\u8acb\u6c42 JSON \u6b63\u6587\uff1a\n```\n{\n \"snapshotExport\": {\n \"start_time\": \"START_TIME\",\n \"snapshot_time\": \"END_TIME\"\n },\n \"destination\" : {\n \"bigqueryDestination\": {\n  \"outputUri\": \"bq://PROJECT_ID.DATASET_NAME.TABLE_NAME\"\n }\n },\n \"featureSelector\": {\n \"idMatcher\": {\n  \"ids\": [\"FEATURE_ID\", ...]\n }\n }\n}\n```\n\u5982\u9700\u767c\u9001\u8acb\u6c42\uff0c\u8acb\u9078\u64c7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\uff1a\n **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION_ID-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION_ID/featurestores/FEATURESTORE_ID/entityTypes/ENTITY_TYPE_ID:exportFeatureValues\"\n``` **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION_ID-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION_ID/featurestores/FEATURESTORE_ID/entityTypes/ENTITY_TYPE_ID:exportFeatureValues\" | Select-Object -Expand Content\n```\n\u60a8\u61c9\u8a72\u6536\u5230\u985e\u4f3c\u4ee5\u4e0b\u5167\u5bb9\u7684 JSON \u97ff\u61c9\uff1a\n```\n{\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION_ID/featurestores/FEATURESTORE_ID/entityTypes/ENTITY_TYPE_ID/operations/OPERATION_ID\",\n \"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.aiplatform.v1.ExportFeatureValuesOperationMetadata\",\n \"genericMetadata\": {\n  \"createTime\": \"2021-12-03T22:55:25.974976Z\",\n  \"updateTime\": \"2021-12-03T22:55:25.974976Z\"\n }\n }\n}\n```\n\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300aVertex AI \u5feb\u901f\u5165\u9580\uff1a\u4f7f\u7528\u5ba2\u6236\u7aef\u5eab\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Java \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Vertex AI Java API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/java/docs/reference/google-cloud-aiplatform/latest/com.google.cloud.aiplatform.v1?hl=zh-cn) \u3002\n\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/java-docs-samples/blob/HEAD/aiplatform/src/main/java/aiplatform/ExportFeatureValuesSnapshotSample.java) \n```\nimport com.google.api.gax.longrunning.OperationFuture;import com.google.cloud.aiplatform.v1.BigQueryDestination;import com.google.cloud.aiplatform.v1.EntityTypeName;import com.google.cloud.aiplatform.v1.ExportFeatureValuesOperationMetadata;import com.google.cloud.aiplatform.v1.ExportFeatureValuesRequest;import com.google.cloud.aiplatform.v1.ExportFeatureValuesRequest.SnapshotExport;import com.google.cloud.aiplatform.v1.ExportFeatureValuesResponse;import com.google.cloud.aiplatform.v1.FeatureSelector;import com.google.cloud.aiplatform.v1.FeatureValueDestination;import com.google.cloud.aiplatform.v1.FeaturestoreServiceClient;import com.google.cloud.aiplatform.v1.FeaturestoreServiceSettings;import com.google.cloud.aiplatform.v1.IdMatcher;import java.io.IOException;import java.util.Arrays;import java.util.List;import java.util.concurrent.ExecutionException;import java.util.concurrent.TimeUnit;import java.util.concurrent.TimeoutException;public class ExportFeatureValuesSnapshotSample {\u00a0 public static void main(String[] args)\u00a0 \u00a0 \u00a0 throws IOException, InterruptedException, ExecutionException, TimeoutException {\u00a0 \u00a0 // TODO(developer): Replace these variables before running the sample.\u00a0 \u00a0 String project = \"YOUR_PROJECT_ID\";\u00a0 \u00a0 String featurestoreId = \"YOUR_FEATURESTORE_ID\";\u00a0 \u00a0 String entityTypeId = \"YOUR_ENTITY_TYPE_ID\";\u00a0 \u00a0 String destinationTableUri = \"YOUR_DESTINATION_TABLE_URI\";\u00a0 \u00a0 List<String> featureSelectorIds = Arrays.asList(\"title\", \"genres\", \"average_rating\");\u00a0 \u00a0 String location = \"us-central1\";\u00a0 \u00a0 String endpoint = \"us-central1-aiplatform.googleapis.com:443\";\u00a0 \u00a0 int timeout = 300;\u00a0 \u00a0 exportFeatureValuesSnapshotSample(\u00a0 \u00a0 \u00a0 \u00a0 project,\u00a0 \u00a0 \u00a0 \u00a0 featurestoreId,\u00a0 \u00a0 \u00a0 \u00a0 entityTypeId,\u00a0 \u00a0 \u00a0 \u00a0 destinationTableUri,\u00a0 \u00a0 \u00a0 \u00a0 featureSelectorIds,\u00a0 \u00a0 \u00a0 \u00a0 location,\u00a0 \u00a0 \u00a0 \u00a0 endpoint,\u00a0 \u00a0 \u00a0 \u00a0 timeout);\u00a0 }\u00a0 static void exportFeatureValuesSnapshotSample(\u00a0 \u00a0 \u00a0 String project,\u00a0 \u00a0 \u00a0 String featurestoreId,\u00a0 \u00a0 \u00a0 String entityTypeId,\u00a0 \u00a0 \u00a0 String destinationTableUri,\u00a0 \u00a0 \u00a0 List<String> featureSelectorIds,\u00a0 \u00a0 \u00a0 String location,\u00a0 \u00a0 \u00a0 String endpoint,\u00a0 \u00a0 \u00a0 int timeout)\u00a0 \u00a0 \u00a0 throws IOException, InterruptedException, ExecutionException, TimeoutException {\u00a0 \u00a0 FeaturestoreServiceSettings featurestoreServiceSettings =\u00a0 \u00a0 \u00a0 \u00a0 FeaturestoreServiceSettings.newBuilder().setEndpoint(endpoint).build();\u00a0 \u00a0 // Initialize client that will be used to send requests. This client only needs to be created\u00a0 \u00a0 // once, and can be reused for multiple requests. After completing all of your requests, call\u00a0 \u00a0 // the \"close\" method on the client to safely clean up any remaining background resources.\u00a0 \u00a0 try (FeaturestoreServiceClient featurestoreServiceClient =\u00a0 \u00a0 \u00a0 \u00a0 FeaturestoreServiceClient.create(featurestoreServiceSettings)) {\u00a0 \u00a0 \u00a0 FeatureSelector featureSelector =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 FeatureSelector.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setIdMatcher(IdMatcher.newBuilder().addAllIds(featureSelectorIds).build())\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 \u00a0 ExportFeatureValuesRequest exportFeatureValuesRequest =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ExportFeatureValuesRequest.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setEntityType(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 EntityTypeName.of(project, location, featurestoreId, entityTypeId).toString())\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setDestination(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 FeatureValueDestination.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setBigqueryDestination(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 BigQueryDestination.newBuilder().setOutputUri(destinationTableUri)))\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setFeatureSelector(featureSelector)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setSnapshotExport(SnapshotExport.newBuilder())\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 \u00a0 OperationFuture<ExportFeatureValuesResponse, ExportFeatureValuesOperationMetadata>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 exportFeatureValuesFuture =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 featurestoreServiceClient.exportFeatureValuesAsync(exportFeatureValuesRequest);\u00a0 \u00a0 \u00a0 System.out.format(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"Operation name: %s%n\", exportFeatureValuesFuture.getInitialFuture().get().getName());\u00a0 \u00a0 \u00a0 System.out.println(\"Waiting for operation to finish...\");\u00a0 \u00a0 \u00a0 ExportFeatureValuesResponse exportFeatureValuesResponse =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 exportFeatureValuesFuture.get(timeout, TimeUnit.SECONDS);\u00a0 \u00a0 \u00a0 System.out.println(\"Snapshot Export Feature Values Response\");\u00a0 \u00a0 \u00a0 System.out.println(exportFeatureValuesResponse);\u00a0 \u00a0 \u00a0 featurestoreServiceClient.close();\u00a0 \u00a0 }\u00a0 }}\n```\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300aVertex AI \u5feb\u901f\u5165\u9580\uff1a\u4f7f\u7528\u5ba2\u6236\u7aef\u5eab\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Node.js \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Vertex AI Node.js API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/nodejs/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/nodejs-docs-samples/blob/HEAD/ai-platform/snippets/export-feature-values-snapshot-sample.js) \n```\n/**\u00a0* TODO(developer): Uncomment these variables before running the sample.\\\u00a0* (Not necessary if passing values as arguments)\u00a0*/// const project = 'YOUR_PROJECT_ID';// const featurestoreId = 'YOUR_FEATURESTORE_ID';// const entityTypeId = 'YOUR_ENTITY_TYPE_ID';// const destinationTableUri = 'YOUR_BQ_DESTINATION_TABLE_URI';// const timestamp = <STARTING_TIMESTAMP_OF_SNAPSHOT_IN_SECONDS>;// const location = 'YOUR_PROJECT_LOCATION';// const apiEndpoint = 'YOUR_API_ENDPOINT';// const timeout = <TIMEOUT_IN_MILLI_SECONDS>;// Imports the Google Cloud Featurestore Service Client libraryconst {FeaturestoreServiceClient} = require('@google-cloud/aiplatform').v1;// Specifies the location of the api endpointconst clientOptions = {\u00a0 apiEndpoint: apiEndpoint,};// Instantiates a clientconst featurestoreServiceClient = new FeaturestoreServiceClient(\u00a0 clientOptions);async function exportFeatureValuesSnapshot() {\u00a0 // Configure the entityType resource\u00a0 const entityType = `projects/${project}/locations/${location}/featurestores/${featurestoreId}/entityTypes/${entityTypeId}`;\u00a0 const destination = {\u00a0 \u00a0 bigqueryDestination: {\u00a0 \u00a0 \u00a0 // # Output to BigQuery table created earlier\u00a0 \u00a0 \u00a0 outputUri: destinationTableUri,\u00a0 \u00a0 },\u00a0 };\u00a0 const featureSelector = {\u00a0 \u00a0 idMatcher: {\u00a0 \u00a0 \u00a0 ids: ['age', 'gender', 'liked_genres'],\u00a0 \u00a0 },\u00a0 };\u00a0 const snapshotExport = {\u00a0 \u00a0 startTime: {\u00a0 \u00a0 \u00a0 seconds: Number(timestamp),\u00a0 \u00a0 },\u00a0 };\u00a0 const request = {\u00a0 \u00a0 entityType: entityType,\u00a0 \u00a0 destination: destination,\u00a0 \u00a0 featureSelector: featureSelector,\u00a0 \u00a0 snapshotExport: snapshotExport,\u00a0 };\u00a0 // Export Feature Values Request\u00a0 const [operation] = await featurestoreServiceClient.exportFeatureValues(\u00a0 \u00a0 request,\u00a0 \u00a0 {timeout: Number(timeout)}\u00a0 );\u00a0 const [response] = await operation.promise();\u00a0 console.log('Export feature values snapshot response');\u00a0 console.log('Raw response:');\u00a0 console.log(JSON.stringify(response, null, 2));}exportFeatureValuesSnapshot();\n```\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u548c\u4f7f\u7528 Python \u7248 Vertex AI SDK\uff0c\u8acb\u53c3\u95b1 [\u4f7f\u7528 Python \u7248 Vertex AI SDK](https://cloud.google.com/vertex-ai/docs/python-sdk/use-vertex-ai-python-sdk?hl=zh-cn) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Python \u7248 Vertex AI SDK API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/python/docs/reference/aiplatform/latest?hl=zh-cn) \u3002### \u5b8c\u6574\u5c0e\u51fa\n\u5c0e\u51fa\u7d66\u5b9a\u6642\u9593\u7bc4\u570d\u5167\u7684\u6240\u6709\u7279\u5fb5\u503c\u3002\n\u8acb\u4f7f\u7528\u5176\u4ed6\u65b9\u6cd5\u3002\u60a8\u7121\u6cd5\u5f9e Google Cloud \u63a7\u5236\u6aaf\u5c0e\u51fa\u7279\u5fb5\u503c\u3002\u5982\u9700\u5c0e\u51fa\u7279\u5fb5\u503c\uff0c\u8acb\u4f7f\u7528 [entityTypes.exportFeatureValues](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/projects.locations.featurestores.entityTypes/exportFeatureValues?hl=zh-cn) \u65b9\u6cd5\u767c\u9001 POST \u8acb\u6c42\u3002\n\u4ee5\u4e0b\u793a\u4f8b\u6703\u8f38\u51fa\u4e00\u500b BigQuery \u8868\uff0c\u4f46\u60a8\u4e5f\u53ef\u4ee5\u8f38\u51fa\u5230 Cloud Storage \u5b58\u5132\u6876\u3002\u5728\u63d0\u4ea4\u8acb\u6c42\u4e4b\u524d\uff0c\u53ef\u80fd\u9700\u8981\u6eff\u8db3\u6bcf\u500b\u8f38\u51fa\u76ee\u6a19\u7684\u4e00\u4e9b\u524d\u63d0\u689d\u4ef6\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8981\u7232 `bigqueryDestination` \u5b57\u6bb5\u6307\u5b9a\u8868\u540d\u7a31\uff0c\u5247\u5fc5\u9808\u5df2\u6709\u6578\u64da\u96c6\u3002API \u53c3\u8003\u6587\u6a94\u4e2d\u8aaa\u660e\u4e86\u9019\u4e9b\u8981\u6c42\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a\u7279\u5fb5\u5b58\u5132\u5340\u6240\u5728\u7684\u5340\u57df\u3002\u4f8b\u5982`us-central1`\u3002\n- \uff1a\u60a8\u7684 [\u9805\u76ee ID](https://cloud.google.com/resource-manager/docs/creating-managing-projects?hl=zh-cn#identifiers) \u3002\n- \uff1a\u7279\u5fb5\u5b58\u5132\u5340\u7684 ID\u3002\n- \uff1a\u5be6\u9ad4\u985e\u578b\u7684 ID\u3002\n- \u548c\uff1a\uff08\u53ef\u9078\uff09\u5982\u679c\u50c5\u6307\u5b9a\u958b\u59cb\u6642\u9593\uff0c\u5247\u7cfb\u7d71\u6703\u8fd4\u56de\u7576\u524d\u6642\u9593\uff08\u767c\u9001\u8acb\u6c42\u7684\u6642\u9593\uff09\u548c\u958b\u59cb\u6642\u9593\uff08\u542b\u908a\u754c\u503c\uff09\u4e4b\u9593\u7684\u6240\u6709\u503c\u3002\u5982\u679c\u50c5\u6307\u5b9a\u7d50\u675f\u6642\u9593\uff0c\u5247\u7cfb\u7d71\u6703\u8fd4\u56de\u7d50\u675f\u6642\u9593\uff08\u542b\u908a\u754c\u503c\uff09\u548c\u7b2c\u4e00\u500b\u503c\u7684\u6642\u9593\u6233\uff08\u5c0d\u65bc\u6bcf\u500b\u7279\u5fb5\uff09\u4e4b\u9593\u7684\u6240\u6709\u503c\u3002\u5982\u679c\u540c\u6642\u6307\u5b9a\u958b\u59cb\u6642\u9593\u548c\u7d50\u675f\u6642\u9593\uff0c\u5247\u7cfb\u7d71\u6703\u8fd4\u56de\u6307\u5b9a\u6642\u9593\u7bc4\u570d\u5167\uff08\u542b\u908a\u754c\u503c\uff09\u7684\u6240\u6709\u503c\u3002\u5982\u679c\u9019\u5169\u500b\u6642\u9593\u5747\u672a\u6307\u5b9a\uff0c\u5247\u7cfb\u7d71\u6703\u8fd4\u56de\u7576\u524d\u6642\u9593\u8207\u7b2c\u4e00\u500b\u503c\u7684\u6642\u9593\u6233\uff08\u5c0d\u65bc\u6bcf\u500b\u7279\u5fb5\uff09\u4e4b\u9593\u7684\u6240\u6709\u503c\u3002\n- \uff1a\u76ee\u6a19 BigQuery \u6578\u64da\u96c6\u7684\u540d\u7a31\u3002\n- \uff1a\u76ee\u6a19 BigQuery \u8868\u7684\u540d\u7a31\u3002\n- \uff1a\u4e00\u500b\u6216\u591a\u500b\u7279\u5fb5\u7684 ID\u3002\u6307\u5b9a\u4e00\u500b`*`\uff08\u661f\u865f\uff09\u53ef\u4ee5\u9078\u64c7\u6240\u6709\u7279\u5fb5\u3002\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nPOST https://LOCATION_ID-aiplatform.googleapis.com/v1/projects/PROJECT/locations/LOCATION_ID/featurestores/FEATURESTORE_ID/entityTypes/ENTITY_TYPE_ID:exportFeatureValues\n```\n\u8acb\u6c42 JSON \u6b63\u6587\uff1a\n```\n{\n \"fullExport\": {\n \"start_time\": \"START_TIME\",\n \"end_time\": \"END_TIME\"\n },\n \"destination\" : {\n \"bigqueryDestination\": {\n  \"outputUri\": \"bq://PROJECT.DATASET_NAME.TABLE_NAME\"\n }\n },\n \"featureSelector\": {\n \"idMatcher\": {\n  \"ids\": [\"FEATURE_ID\", ...]\n }\n }\n}\n```\n\u5982\u9700\u767c\u9001\u8acb\u6c42\uff0c\u8acb\u9078\u64c7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\uff1a\n **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION_ID-aiplatform.googleapis.com/v1/projects/PROJECT/locations/LOCATION_ID/featurestores/FEATURESTORE_ID/entityTypes/ENTITY_TYPE_ID:exportFeatureValues\"\n``` **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION_ID-aiplatform.googleapis.com/v1/projects/PROJECT/locations/LOCATION_ID/featurestores/FEATURESTORE_ID/entityTypes/ENTITY_TYPE_ID:exportFeatureValues\" | Select-Object -Expand Content\n```\n\u60a8\u61c9\u8a72\u6536\u5230\u985e\u4f3c\u4ee5\u4e0b\u5167\u5bb9\u7684 JSON \u97ff\u61c9\uff1a\n```\n{\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION_ID/featurestores/FEATURESTORE_ID/entityTypes/ENTITY_TYPE_ID/operations/OPERATION_ID\",\n \"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.aiplatform.v1.ExportFeatureValuesOperationMetadata\",\n \"genericMetadata\": {\n  \"createTime\": \"2021-12-03T22:55:25.974976Z\",\n  \"updateTime\": \"2021-12-03T22:55:25.974976Z\"\n }\n }\n}\n```\n\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300aVertex AI \u5feb\u901f\u5165\u9580\uff1a\u4f7f\u7528\u5ba2\u6236\u7aef\u5eab\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Java \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Vertex AI Java API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/java/docs/reference/google-cloud-aiplatform/latest/com.google.cloud.aiplatform.v1?hl=zh-cn) \u3002\n\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/java-docs-samples/blob/HEAD/aiplatform/src/main/java/aiplatform/ExportFeatureValuesSample.java) \n```\nimport com.google.api.gax.longrunning.OperationFuture;import com.google.cloud.aiplatform.v1.BigQueryDestination;import com.google.cloud.aiplatform.v1.EntityTypeName;import com.google.cloud.aiplatform.v1.ExportFeatureValuesOperationMetadata;import com.google.cloud.aiplatform.v1.ExportFeatureValuesRequest;import com.google.cloud.aiplatform.v1.ExportFeatureValuesRequest.FullExport;import com.google.cloud.aiplatform.v1.ExportFeatureValuesResponse;import com.google.cloud.aiplatform.v1.FeatureSelector;import com.google.cloud.aiplatform.v1.FeatureValueDestination;import com.google.cloud.aiplatform.v1.FeaturestoreServiceClient;import com.google.cloud.aiplatform.v1.FeaturestoreServiceSettings;import com.google.cloud.aiplatform.v1.IdMatcher;import java.io.IOException;import java.util.Arrays;import java.util.List;import java.util.concurrent.ExecutionException;import java.util.concurrent.TimeUnit;import java.util.concurrent.TimeoutException;public class ExportFeatureValuesSample {\u00a0 public static void main(String[] args)\u00a0 \u00a0 \u00a0 throws IOException, InterruptedException, ExecutionException, TimeoutException {\u00a0 \u00a0 // TODO(developer): Replace these variables before running the sample.\u00a0 \u00a0 String project = \"YOUR_PROJECT_ID\";\u00a0 \u00a0 String featurestoreId = \"YOUR_FEATURESTORE_ID\";\u00a0 \u00a0 String entityTypeId = \"YOUR_ENTITY_TYPE_ID\";\u00a0 \u00a0 String destinationTableUri = \"YOUR_DESTINATION_TABLE_URI\";\u00a0 \u00a0 List<String> featureSelectorIds = Arrays.asList(\"title\", \"genres\", \"average_rating\");\u00a0 \u00a0 String location = \"us-central1\";\u00a0 \u00a0 String endpoint = \"us-central1-aiplatform.googleapis.com:443\";\u00a0 \u00a0 int timeout = 300;\u00a0 \u00a0 exportFeatureValuesSample(\u00a0 \u00a0 \u00a0 \u00a0 project,\u00a0 \u00a0 \u00a0 \u00a0 featurestoreId,\u00a0 \u00a0 \u00a0 \u00a0 entityTypeId,\u00a0 \u00a0 \u00a0 \u00a0 destinationTableUri,\u00a0 \u00a0 \u00a0 \u00a0 featureSelectorIds,\u00a0 \u00a0 \u00a0 \u00a0 location,\u00a0 \u00a0 \u00a0 \u00a0 endpoint,\u00a0 \u00a0 \u00a0 \u00a0 timeout);\u00a0 }\u00a0 static void exportFeatureValuesSample(\u00a0 \u00a0 \u00a0 String project,\u00a0 \u00a0 \u00a0 String featurestoreId,\u00a0 \u00a0 \u00a0 String entityTypeId,\u00a0 \u00a0 \u00a0 String destinationTableUri,\u00a0 \u00a0 \u00a0 List<String> featureSelectorIds,\u00a0 \u00a0 \u00a0 String location,\u00a0 \u00a0 \u00a0 String endpoint,\u00a0 \u00a0 \u00a0 int timeout)\u00a0 \u00a0 \u00a0 throws IOException, InterruptedException, ExecutionException, TimeoutException {\u00a0 \u00a0 FeaturestoreServiceSettings featurestoreServiceSettings =\u00a0 \u00a0 \u00a0 \u00a0 FeaturestoreServiceSettings.newBuilder().setEndpoint(endpoint).build();\u00a0 \u00a0 // Initialize client that will be used to send requests. This client only needs to be created\u00a0 \u00a0 // once, and can be reused for multiple requests. After completing all of your requests, call\u00a0 \u00a0 // the \"close\" method on the client to safely clean up any remaining background resources.\u00a0 \u00a0 try (FeaturestoreServiceClient featurestoreServiceClient =\u00a0 \u00a0 \u00a0 \u00a0 FeaturestoreServiceClient.create(featurestoreServiceSettings)) {\u00a0 \u00a0 \u00a0 FeatureSelector featureSelector =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 FeatureSelector.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setIdMatcher(IdMatcher.newBuilder().addAllIds(featureSelectorIds).build())\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 \u00a0 ExportFeatureValuesRequest exportFeatureValuesRequest =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ExportFeatureValuesRequest.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setEntityType(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 EntityTypeName.of(project, location, featurestoreId, entityTypeId).toString())\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setDestination(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 FeatureValueDestination.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setBigqueryDestination(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 BigQueryDestination.newBuilder().setOutputUri(destinationTableUri)))\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setFeatureSelector(featureSelector)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setFullExport(FullExport.newBuilder())\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 \u00a0 OperationFuture<ExportFeatureValuesResponse, ExportFeatureValuesOperationMetadata>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 exportFeatureValuesFuture =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 featurestoreServiceClient.exportFeatureValuesAsync(exportFeatureValuesRequest);\u00a0 \u00a0 \u00a0 System.out.format(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"Operation name: %s%n\", exportFeatureValuesFuture.getInitialFuture().get().getName());\u00a0 \u00a0 \u00a0 System.out.println(\"Waiting for operation to finish...\");\u00a0 \u00a0 \u00a0 ExportFeatureValuesResponse exportFeatureValuesResponse =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 exportFeatureValuesFuture.get(timeout, TimeUnit.SECONDS);\u00a0 \u00a0 \u00a0 System.out.println(\"Export Feature Values Response\");\u00a0 \u00a0 \u00a0 System.out.println(exportFeatureValuesResponse);\u00a0 \u00a0 \u00a0 featurestoreServiceClient.close();\u00a0 \u00a0 }\u00a0 }}\n```\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300aVertex AI \u5feb\u901f\u5165\u9580\uff1a\u4f7f\u7528\u5ba2\u6236\u7aef\u5eab\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Node.js \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Vertex AI Node.js API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/nodejs/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/nodejs-docs-samples/blob/HEAD/ai-platform/snippets/export-feature-values-sample.js) \n```\n/**\u00a0* TODO(developer): Uncomment these variables before running the sample.\\\u00a0* (Not necessary if passing values as arguments)\u00a0*/// const project = 'YOUR_PROJECT_ID';// const featurestoreId = 'YOUR_FEATURESTORE_ID';// const entityTypeId = 'YOUR_ENTITY_TYPE_ID';// const destinationTableUri = 'YOUR_BQ_DESTINATION_TABLE_URI';// const location = 'YOUR_PROJECT_LOCATION';// const apiEndpoint = 'YOUR_API_ENDPOINT';// const timeout = <TIMEOUT_IN_MILLI_SECONDS>;// Imports the Google Cloud Featurestore Service Client libraryconst {FeaturestoreServiceClient} = require('@google-cloud/aiplatform').v1;// Specifies the location of the api endpointconst clientOptions = {\u00a0 apiEndpoint: apiEndpoint,};// Instantiates a clientconst featurestoreServiceClient = new FeaturestoreServiceClient(\u00a0 clientOptions);async function exportFeatureValues() {\u00a0 // Configure the entityType resource\u00a0 const entityType = `projects/${project}/locations/${location}/featurestores/${featurestoreId}/entityTypes/${entityTypeId}`;\u00a0 const destination = {\u00a0 \u00a0 bigqueryDestination: {\u00a0 \u00a0 \u00a0 // # Output to BigQuery table created earlier\u00a0 \u00a0 \u00a0 outputUri: destinationTableUri,\u00a0 \u00a0 },\u00a0 };\u00a0 const featureSelector = {\u00a0 \u00a0 idMatcher: {\u00a0 \u00a0 \u00a0 ids: ['age', 'gender', 'liked_genres'],\u00a0 \u00a0 },\u00a0 };\u00a0 const request = {\u00a0 \u00a0 entityType: entityType,\u00a0 \u00a0 destination: destination,\u00a0 \u00a0 featureSelector: featureSelector,\u00a0 \u00a0 fullExport: {},\u00a0 };\u00a0 // Export Feature Values Request\u00a0 const [operation] = await featurestoreServiceClient.exportFeatureValues(\u00a0 \u00a0 request,\u00a0 \u00a0 {timeout: Number(timeout)}\u00a0 );\u00a0 const [response] = await operation.promise();\u00a0 console.log('Export feature values response');\u00a0 console.log('Raw response:');\u00a0 console.log(JSON.stringify(response, null, 2));}exportFeatureValues();\n```\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u548c\u4f7f\u7528 Python \u7248 Vertex AI SDK\uff0c\u8acb\u53c3\u95b1 [\u4f7f\u7528 Python \u7248 Vertex AI SDK](https://cloud.google.com/vertex-ai/docs/python-sdk/use-vertex-ai-python-sdk?hl=zh-cn) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Python \u7248 Vertex AI SDK API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/python/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n## \u5f8c\u7e8c\u6b65\u9a5f\n- \u77ad\u89e3\u5982\u4f55 [\u6279\u91cf\u6ce8\u5165\u7279\u5fb5\u503c](https://cloud.google.com/vertex-ai/docs/featurestore/ingesting-batch?hl=zh-cn) \u3002\n- \u77ad\u89e3\u5982\u4f55\u901a\u904e [\u5728\u7dda\u50b3\u9001](https://cloud.google.com/vertex-ai/docs/featurestore/serving-online?hl=zh-cn) \u4f86\u63d0\u4f9b\u7279\u5fb5\u3002\n- \u67e5\u770b Vertex AI Feature Store\uff08\u820a\u7248\uff09 [\u4f75\u767c\u6279\u91cf\u4f5c\u696d\u914d\u984d](https://cloud.google.com/vertex-ai/quotas?hl=zh-cn#featurestore) \u3002\n- [\u6392\u67e5](https://cloud.google.com/vertex-ai/docs/general/troubleshooting?hl=zh-cn#feature-store) Vertex AI Feature Store\uff08\u820a\u7248\uff09\u5e38\u898b\u554f\u984c\u3002", "guide": "Vertex AI"}