{"title": "Vertex AI - \u67e5\u770b\u6a21\u578b\u67b6\u69cb", "url": "https://cloud.google.com/vertex-ai/docs/tabular-data/classification-regression/logging?hl=zh-cn", "abstract": "# Vertex AI - \u67e5\u770b\u6a21\u578b\u67b6\u69cb\n\u672c\u9801\u9762\u4ecb\u7d39\u77ad\u5982\u4f55\u4f7f\u7528 Cloud Logging \u67e5\u770b\u6709\u95dc Vertex AI \u6a21\u578b\u7684\u8a73\u7d30\u4fe1\u606f\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 Logging \u67e5\u770b\u4ee5\u4e0b\u4fe1\u606f\uff1a\n- \u6700\u7d42\u6a21\u578b\u7684\u8d85\u53c3\u6578\uff08\u4f5c\u7232\u9375\u503c\u5c0d\u63d0\u4f9b\uff09\u3002\n- \u6a21\u578b\u8a13\u7df4\u548c\u8abf\u7bc0\u671f\u9593\u4f7f\u7528\u7684\u8d85\u53c3\u6578\u548c\u5c0d\u8c61\u503c\uff0c\u4ee5\u53ca\u76ee\u6a19\u503c\u3002\n\u9ed8\u8a8d\u60c5\u6cc1\u4e0b\uff0c\u7cfb\u7d71\u6703\u5728 30 \u5929\u540e\u522a\u9664\u65e5\u8a8c\u3002\n\u5177\u9ad4\u6db5\u84cb\u4ee5\u4e0b\u4e3b\u984c\uff1a\n- [\u67e5\u770b\u8a13\u7df4\u65e5\u8a8c](#training-logs) \u3002\n- [\u65e5\u8a8c\u5b57\u6bb5](#log-fields) \u3002\n**\u6ce8\u610f** \uff1a\u6a21\u578b\u67b6\u69cb\u65e5\u8a8c\u662f Cloud Logging \u670d\u52d9\u7684\u4e00\u90e8\u5206\u3002\u5982\u9700\u5927\u81f4\u77ad\u89e3 Cloud Logging\uff0c\u8acb\u53c3\u95b1 [Cloud Logging](https://cloud.google.com/logging/docs?hl=zh-cn) \u6587\u6a94\u3002\n", "content": "## \u6e96\u5099\u5de5\u4f5c\n\u60a8\u5fc5\u9808\u5148 [\u8a13\u7df4\u6a21\u578b](https://cloud.google.com/vertex-ai/docs/tabular-data/classification-regression/train-model?hl=zh-cn) \uff0c\u7136\u5f8c\u624d\u80fd\u67e5\u770b\u6a21\u578b\u7684\u8d85\u53c3\u6578\u65e5\u8a8c\u3002\n\u5982\u9700\u57f7\u884c\u6b64\u4efb\u52d9\uff0c\u60a8\u5fc5\u9808\u64c1\u6709\u4e0b\u5217 [\u6b0a\u9650](https://cloud.google.com/iam/docs/overview?hl=zh-cn#permissions) \uff1a\n- \u91dd\u5c0d\u9805\u76ee\u7684`logging.logServiceIndexes.list`\u6b0a\u9650\n- \u91dd\u5c0d\u9805\u76ee\u7684`logging.logServices.list`\u6b0a\u9650## \u67e5\u770b\u8a13\u7df4\u65e5\u8a8c\n\u60a8\u53ef\u4ee5\u4f7f\u7528 Google Cloud \u63a7\u5236\u6aaf\u8a2a\u554f\u6700\u7d42\u6a21\u578b\u7684\u8d85\u53c3\u6578\u65e5\u8a8c\u548c\u8abf\u7bc0\u8a66\u9a57\u7684\u8d85\u53c3\u6578\u65e5\u8a8c\u3002\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u8f49\u5230 Vertex AI **\u6a21\u578b** \u9801\u9762\u3002 [\u8f49\u5230\u201c\u6a21\u578b\u201d\u9801\u9762](https://console.cloud.google.com/vertex-ai/models?hl=zh-cn) \n- \u5728 **\u5340\u57df** \u4e0b\u62c9\u5217\u8868\u4e2d\uff0c\u9078\u64c7\u60a8\u7684\u6a21\u578b\u6240\u5728\u7684\u5340\u57df\u3002\n- \u5f9e\u6a21\u578b\u5217\u8868\u4e2d\uff0c\u9078\u64c7\u60a8\u7684\u6a21\u578b\u3002\n- \u9078\u64c7\u6a21\u578b\u7684\u7248\u672c\u865f\u3002\n- \u6253\u958b **\u7248\u672c\u8a73\u60c5** \u6a19\u7c64\u9801\u3002\n- \u5982\u9700\u67e5\u770b\u6700\u7d42\u6a21\u578b\u7684\u8d85\u53c3\u6578\u65e5\u8a8c\uff0c\u8acb\u8f49\u5230 **\u6a21\u578b\u8d85\u53c3\u6578** \u884c\uff0c\u7136\u5f8c\u9ede\u64ca **\u6a21\u578b** \u3002- \u7cfb\u7d71\u53ea\u63d0\u4f9b\u4e86\u4e00\u500b\u65e5\u8a8c\u689d\u76ee\u3002\u5982\u4e0b\u6240\u793a\uff0c\u5c55\u958b\u8f09\u8377\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u65e5\u8a8c\u5b57\u6bb5](#reading-logs) \u3002\n- \u5982\u9700\u67e5\u770b\u8abf\u7bc0\u8a66\u9a57\u7684\u8d85\u53c3\u6578\u65e5\u8a8c\uff0c\u8acb\u8f49\u5230 **\u6a21\u578b\u8d85\u53c3\u6578** \u884c\uff0c\u7136\u5f8c\u9ede\u64ca **\u8a66\u9a57** \u3002- \u6bcf\u500b\u8abf\u7bc0\u8a66\u9a57\u90fd\u6709\u4e00\u500b\u689d\u76ee\u3002\u5982\u4e0b\u6240\u793a\uff0c\u5c55\u958b\u8f09\u8377\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u65e5\u8a8c\u5b57\u6bb5](#reading-logs) \u3002\n## \u65e5\u8a8c\u5b57\u6bb5\n[LogEntry](https://cloud.google.com/logging/docs/exported_logs?hl=zh-cn#the_logentry_type) \u985e\u578b\u6587\u6a94\u4e2d\u4ecb\u7d39\u4e86\u6d3b\u52d5\u65e5\u8a8c\u7684\u7d50\u69cb\u3002\n\u4ee5\u4e0b\u7232 Vertex AI \u6a21\u578b\u65e5\u8a8c\u5305\u542b\u7684\u4e00\u4e9b\u5b57\u6bb5\uff1a\n- `labels`\uff1a`log_type`\u5b57\u6bb5\u8a2d\u7f6e\u7232`automl_tables`\u3002\n- `jsonPayload`\uff1a\u65e5\u8a8c\u689d\u76ee\u7684\u7279\u5b9a\u8a73\u7d30\u4fe1\u606f\uff0c\u4ee5 JSON \u5c0d\u8c61\u683c\u5f0f\u63d0\u4f9b\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u6700\u7d42\u6a21\u578b\u7684\u8d85\u53c3\u6578\u65e5\u8a8c\u7684\u8f09\u8377\u5167\u5bb9](#final-payload) \u6216 [\u8abf\u7bc0\u8a66\u9a57\u7684\u8d85\u53c3\u6578\u65e5\u8a8c\u7684\u8f09\u8377\u5167\u5bb9](#trial-payload) \u3002\n- `timestamp`\uff1a\u5275\u5efa\u6a21\u578b\u6216\u904b\u884c\u8a66\u9a57\u7684\u65e5\u671f\u548c\u6642\u9593\u3002\n### \u6700\u7d42\u6a21\u578b\u7684\u8d85\u53c3\u6578\u65e5\u8a8c\u7684\u8f09\u8377\u5167\u5bb9\n\u6700\u7d42\u6a21\u578b\u7684\u8d85\u53c3\u6578\u65e5\u8a8c\u7684 `jsonPayload` \u5b57\u6bb5\u5305\u542b `modelParameters` \u5b57\u6bb5\u3002\u6b64\u5b57\u6bb5\u5305\u542b\u5f71\u97ff\u6700\u7d42\u96c6\u6210\u5b78\u7fd2\u6a21\u578b\u7684\u6bcf\u500b\u6a21\u578b\u7684\u4e00\u500b\u689d\u76ee\u3002\u6bcf\u500b\u689d\u76ee\u90fd\u6709\u4e00\u500b `hyperparameters` \u5b57\u6bb5\uff0c\u5176\u5167\u5bb9\u53d6\u6c7a\u65bc\u6a21\u578b\u985e\u578b\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u8d85\u53c3\u6578\u5217\u8868](#hps) \u3002\n### \u8abf\u7bc0\u8a66\u9a57\u7684\u8d85\u53c3\u6578\u65e5\u8a8c\u7684\u8f09\u8377\u5167\u5bb9\n\u8abf\u7bc0\u8a66\u9a57\u7684\u8d85\u53c3\u6578\u65e5\u8a8c\u7684 `jsonPayload` \u5b57\u6bb5\u5305\u542b\u4ee5\u4e0b\u5b57\u6bb5\uff1a\n| \u5b57\u6bb5     | \u985e\u578b | \u8aaa\u660e                                         |\n|:-----------------------|:-------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| modelStructure   | JSON | Vertex AI \u6a21\u578b\u7d50\u69cb\u7684\u8aaa\u660e\u3002\u6b64\u5b57\u6bb5\u5305\u542b modelParameters \u5b57\u6bb5\u3002modelParameters \u5b57\u6bb5\u5305\u542b hyperparameters \u5b57\u6bb5\uff0c\u8a72\u5b57\u6bb5\u7684\u5167\u5bb9\u53d6\u6c7a\u65bc\u6a21\u578b\u985e\u578b\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1\u8d85\u53c3\u6578\u5217\u8868\u3002 |\n| trainingObjectivePoint | JSON | \u7528\u65bc\u6a21\u578b\u8a13\u7df4\u7684\u512a\u5316\u76ee\u6a19\u3002\u6b64\u689d\u76ee\u5305\u542b\u8a18\u9304\u65e5\u8a8c\u689d\u76ee\u6642\u7684\u6642\u9593\u6233\u548c\u76ee\u6a19\u503c\u3002                          |\n### \u8d85\u53c3\u6578\u5217\u8868\n\u65e5\u8a8c\u4e2d\u63d0\u4f9b\u7684\u8d85\u53c3\u6578\u6578\u64da\u56e0\u6a21\u578b\u985e\u578b\u800c\u7570\u3002\u4ee5\u4e0b\u90e8\u5206\u4ecb\u7d39\u4e86\u6bcf\u500b\u6a21\u578b\u985e\u578b\u7684\u8d85\u53c3\u6578\u3002- \u6a39 L1 \u6b63\u5247\u5316\n- \u6a39 L2 \u6b63\u5247\u5316\n- \u6a39\u6df1\u5ea6\u4e0a\u9650\n- \u6a21\u578b\u985e\u578b\uff1a`GBDT`\n- \u6a39\u6578\u91cf\n- \u6a39\u8907\u96dc\u5ea6- \u6f0f\u5931\u7387\n- \u5553\u7528 batchNorm\uff08`True`\u6216`False`\uff09\n- \u5553\u7528\u5d4c\u5165 L1\uff08`True`\u6216`False`\uff09\n- \u5553\u7528\u5d4c\u5165 L2\uff08`True`\u6216`False`\uff09\n- \u5553\u7528 L1\uff08`True`\u6216`False`\uff09\n- \u5553\u7528 L2\uff08`True`\u6216`False`\uff09\n- \u5553\u7528 layerNorm\uff08`True`\u6216`False`\uff09\n- \u5553\u7528\u6578\u503c\u5d4c\u5165\uff08`True`\u6216`False`\uff09\n- \u96b1\u85cf\u5c64\u5927\u5c0f\n- \u6a21\u578b\u985e\u578b\uff1a`nn`\n- \u6a19\u6e96\u5316\u6578\u503c\u5217\uff08`True`\u6216`False`\uff09\n- \u4ea4\u53c9\u5c64\u6578\n- \u96b1\u85cf\u5c64\u6578\u91cf\n- \u8df3\u904e\u9023\u63a5\u985e\u578b\uff08`dense`\u3001`disable`\u3001`concat`\u6216`slice_or_padding`\uff09## \u5f8c\u7e8c\u6b65\u9a5f\n\u6e96\u5099\u597d\u901a\u904e\u5206\u985e\u6216\u8ff4\u6b78\u6a21\u578b\u9032\u884c\u9810\u6e2c\u5f8c\uff0c\u60a8\u53ef\u4ee5\u63a1\u7528\u4ee5\u4e0b\u5169\u7a2e\u65b9\u6cd5\u958b\u59cb\u9810\u6e2c\uff1a\n- [\u4f7f\u7528\u6a21\u578b\u9032\u884c\u5728\u7dda\uff08\u5be6\u6642\uff09\u9810\u6e2c](https://cloud.google.com/vertex-ai/docs/tabular-data/classification-regression/get-online-predictions?hl=zh-cn) \u3002\n- [\u76f4\u63a5\u5f9e\u6a21\u578b\u7372\u53d6\u6279\u91cf\u9810\u6e2c\u7d50\u679c](https://cloud.google.com/vertex-ai/docs/tabular-data/classification-regression/get-batch-predictions?hl=zh-cn) \u3002\n\u6b64\u5916\uff0c\u60a8\u53ef\u4ee5\uff1a\n- [\u8a55\u4f30\u6a21\u578b](https://cloud.google.com/vertex-ai/docs/tabular-data/classification-regression/evaluate-model?hl=zh-cn) \u3002\n- [\u67e5\u770b\u6709\u95dc Cloud Logging \u7684\u4e00\u822c\u4fe1\u606f](https://cloud.google.com/logging/docs?hl=zh-cn) \u3002\n- \u60a8\u53ef\u4ee5\u5c07\u65e5\u8a8c\u5c0e\u51fa\u5230 BigQuery\u3001Cloud Storage \u6216 Pub/Sub\u3002 \u95b1\u8b80 Logging \u6587\u6a94\u4e2d\u7684 [\u914d\u7f6e\u65e5\u8a8c\u5c0e\u51fa](https://cloud.google.com/logging/docs/export/configure_export?hl=zh-cn) \uff0c\u77ad\u89e3\u5982\u4f55\u5c0e\u51fa\u6d3b\u52d5\u65e5\u8a8c\u3002", "guide": "Vertex AI"}