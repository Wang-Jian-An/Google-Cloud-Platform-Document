{"title": "Vertex AI - \u914d\u7f6e\u96fb\u5b50\u90f5\u4ef6\u901a\u77e5", "url": "https://cloud.google.com/vertex-ai/docs/pipelines/email-notifications?hl=zh-cn", "abstract": "# Vertex AI - \u914d\u7f6e\u96fb\u5b50\u90f5\u4ef6\u901a\u77e5\nVertex AI Pipelines \u53ef\u4ee5\u5411\u60a8\u767c\u9001\u901a\u77e5\uff0c\u4ee5\u5831\u544a\u6d41\u6c34\u7dda\u904b\u884c\u6210\u529f\u6216\u5931\u6557\u3002\u7576\u6d41\u6c34\u7dda\u9000\u51fa\u6642\uff0cGoogle Cloud \u6703\u5411\u60a8\u6307\u5b9a\u7684\u96fb\u5b50\u90f5\u4ef6\u5730\u5740\u767c\u9001\u6700\u7d42\u72c0\u614b\u901a\u77e5\u96fb\u5b50\u90f5\u4ef6\u3002\n\u672c\u6307\u5357\u4ecb\u7d39\u5982\u4f55\u4f7f\u7528 Google Cloud \u6d41\u6c34\u7dda\u7d44\u4ef6 SDK \u4e2d\u7684 [\u96fb\u5b50\u90f5\u4ef6\u901a\u77e5\u7d44\u4ef6](https://cloud.google.com/vertex-ai/docs/pipelines/email-notification-component?hl=zh-cn) \u914d\u7f6e\u5f9e\u6d41\u6c34\u7dda\u767c\u51fa\u7684\u96fb\u5b50\u90f5\u4ef6\u901a\u77e5\u3002\n**\u6ce8\u610f** \uff1a\u5c0d\u65bc\u901a\u77e5\u767c\u9001\u5230\u7684\u96fb\u5b50\u90f5\u4ef6\u5730\u5740\uff0cGoogle \u6703\u5206\u5225\u7232\u8abf\u8a66\u76ee\u7684\u548c\u5206\u6790\u76ee\u7684\u4fdd\u7559\u6700\u591a 14 \u5929\u548c 30 \u5929\u3002\n", "content": "## \u6e96\u5099\u5de5\u4f5c\n\u5728\u69cb\u5efa\u767c\u9001\u901a\u77e5\u7684\u6d41\u6c34\u7dda\u4e4b\u524d\uff0c\u8acb\u6309\u7167\u4ee5\u4e0b\u8aaa\u660e\u8a2d\u7f6e Google Cloud \u9805\u76ee\u548c\u958b\u767c\u74b0\u5883\u3002\n- \u7232\u4e86\u8b93\u60a8\u7684 Google Cloud \u9805\u76ee\u7232\u904b\u884c\u6a5f\u5668\u5b78\u7fd2\u6d41\u6c34\u7dda\u505a\u597d\u6e96\u5099\uff0c\u8acb\u6309\u7167 [\u914d\u7f6e Google Cloud \u9805\u76ee](https://cloud.google.com/vertex-ai/docs/pipelines/configure-project?hl=zh-cn) \u6307\u5357\u4e2d\u7684\u8aaa\u660e\u64cd\u4f5c\u3002\n- \u5b89\u88dd [Kubeflow Pipelines SDK](https://www.kubeflow.org/docs/components/pipelines/sdk/install-sdk/) v1.8 \u6216\u66f4\u9ad8\u7248\u672c\u3002 \uff08\u53ef\u9078\uff09\u5728\u5b89\u88dd\u4e4b\u524d\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\u4ee5\u67e5\u770b\u7576\u524d\u5b89\u88dd\u7684 [Kubeflow Pipelines SDK](https://www.kubeflow.org/docs/components/pipelines/sdk/install-sdk/) \u7248\u672c\uff1a```\n\u00a0 pip freeze | grep kfp\n``` **\u6ce8\u610f** \uff1a\u5982\u9700\u5347\u7d1a\u5230\u6700\u65b0\u7248\u672c\u7684 [Kubeflow Pipelines SDK](https://www.kubeflow.org/docs/components/pipelines/sdk/install-sdk/) \uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a `pip install kfp --upgrade` \u5982\u679c\u6709\u53ef\u4f9b\u66f4\u65b0\u7684\u7248\u672c\uff0c\u5247\u904b\u884c\u6b64\u547d\u4ee4\u6703\u5378\u8f09\u7576\u524d\u5b89\u88dd\u7684\u7248\u672c\u4e26\u5b89\u88dd\u8a72\u6700\u65b0\u7248\u672c\u3002\n- \u5982\u9700\u5728\u6d41\u6c34\u7dda\u4e2d\u4f7f\u7528 Vertex AI Python \u5ba2\u6236\u7aef\uff0c\u8acb [\u5b89\u88dd Vertex AI \u5ba2\u6236\u7aef\u5eab v1.7 \u6216\u66f4\u9ad8\u7248\u672c](https://github.com/googleapis/python-aiplatform) \u3002\n- \u5982\u9700\u5728\u6d41\u6c34\u7dda\u4e2d\u4f7f\u7528 Vertex AI \u670d\u52d9\uff0c\u8acb [\u5b89\u88dd Google Cloud \u6d41\u6c34\u7dda\u7d44\u4ef6](https://github.com/kubeflow/pipelines/tree/master/components/google-cloud#installation) \u3002## \u5f9e\u6d41\u6c34\u7dda\u767c\u9001\u901a\u77e5\n\u4ee5\u4e0b\u793a\u4f8b\u5c55\u793a\u77ad\u5982\u4f55\u901a\u904e\u5b9a\u7fa9\u96fb\u5b50\u90f5\u4ef6\u901a\u77e5\u4efb\u52d9 ( `notify_email_task` ) \u4e26\u5c07\u5176\u6dfb\u52a0\u5230\u6d41\u6c34\u7dda\u7684\u9000\u51fa\u8655\u7406\u7a0b\u5e8f ( `dsl.ExitHandler` ) \u4f86\u914d\u7f6e\u96fb\u5b50\u90f5\u4ef6\u901a\u77e5\u3002\u6b64\u901a\u77e5\u4efb\u52d9\u6703\u5728\u6d41\u6c34\u7dda\u9000\u51fa\u6642\u8abf\u7528\u96fb\u5b50\u90f5\u4ef6\u901a\u77e5\u7d44\u4ef6\u4e2d\u7684 `VertexNotificationEmailOp` operator\u3002\n```\nfrom kfp import dslfrom kfp import compilerfrom google_cloud_pipeline_components.v1.vertex_notification_email import VertexNotificationEmailOp@dsl.pipeline(\u00a0 \u00a0 name='PIPELINE_NAME',\u00a0 \u00a0 pipeline_root=PIPELINE_ROOT_PATH,)def TASK_NAME():\u00a0 \u00a0 notify_email_task = VertexNotificationEmailOp(recipients=RECIPIENTS_LIST)\u00a0 \u00a0 with dsl.ExitHandler(notify_email_task):\u00a0 \u00a0 \u00a0 \u00a0 # Add your pipeline tasks here.compiler.Compiler().compile(pipeline_func=notification_email_pipeline,\u00a0 \u00a0 \u00a0 \u00a0 package_path='notification_email_pipeline.yaml')\n```\n\u8acb\u66ff\u63db\u4ee5\u4e0b\u5167\u5bb9\uff1a\n- \uff1a\u6d41\u6c34\u7dda\u7684\u540d\u7a31\u3002\n- \uff1a\u6307\u5b9a [\u6d41\u6c34\u7dda\u670d\u52d9\u8cec\u865f\u53ef\u4ee5\u8a2a\u554f](https://cloud.google.com/vertex-ai/docs/pipelines/configure-project?hl=zh-cn#service-account) \u7684 Cloud Storage URI\u3002\u6d41\u6c34\u7dda\u904b\u884c\u7684\u5de5\u4ef6\u5b58\u5132\u5728\u6d41\u6c34\u7dda\u6839\u76ee\u9304\u4e2d\u3002\u6d41\u6c34\u7dda\u6839\u76ee\u9304\u53ef\u4ee5\u5728\u6d41\u6c34\u7dda\u51fd\u6578\u4e0a\u8a2d\u7f6e\u7232 `@kfp.dsl.pipeline` \u8a3b\u91cb\u7684\u53c3\u6578\uff0c\u4e5f\u53ef\u4ee5\u5728\u8abf\u7528 `create_run_from_job_spec` \u4ee5\u5275\u5efa\u6d41\u6c34\u7dda\u904b\u884c\u6642\u8a2d\u7f6e\u3002\n- \uff1a\u8981\u7232\u5176\u914d\u7f6e\u96fb\u5b50\u90f5\u4ef6\u901a\u77e5\u7684\u6d41\u6c34\u7dda\u4efb\u52d9\u7684\u540d\u7a31\u3002\n- \uff1a\u63a5\u6536\u901a\u77e5\u96fb\u5b50\u90f5\u4ef6\u7684\u96fb\u5b50\u90f5\u4ef6\u5730\u5740\u7684\u5217\u8868\uff1b\u6700\u591a\u4e09\u500b\uff0c\u4ee5\u9017\u865f\u5206\u9694\u3002\n\u5728 `dsl.ExitHandler` \u9000\u51fa\u8655\u7406\u7a0b\u5e8f\u51fd\u6578\u7684\u6b63\u6587\u4e2d\u6dfb\u52a0\u6d41\u6c34\u7dda\u4efb\u52d9\u3002\u901a\u904e\u4ee5\u9019\u7a2e\u65b9\u5f0f\u5728\u9000\u51fa\u8655\u7406\u7a0b\u5e8f\u51fd\u6578\u4e2d\u5c01\u88dd\u4efb\u52d9\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u901a\u77e5\u96fb\u5b50\u90f5\u4ef6\u7d44\u4ef6\u5728\u6d41\u6c34\u7dda\u9000\u51fa\u6642\u5831\u544a\u9019\u4e9b\u4efb\u52d9\u7684\u72c0\u614b\u3002\u4f8b\u5982\uff0c\u5982\u679c\u9000\u51fa\u8655\u7406\u7a0b\u5e8f\u5167\u5bb9\u4e2d\u7684\u67d0\u500b\u4efb\u52d9\u5931\u6557\uff0c\u901a\u77e5\u6703\u5831\u544a\u5931\u6557\u72c0\u614b\u3002\n## \u96fb\u5b50\u90f5\u4ef6\u901a\u77e5\u793a\u4f8b\n\u5982\u679c\u60a8\u4f7f\u7528 [\u5f9e\u6d41\u6c34\u7dda\u767c\u9001\u901a\u77e5](#sending-notification-from-pipeline) \u4e2d\u7684\u4ee3\u78bc\u793a\u4f8b\u7232\u6d41\u6c34\u7dda\u914d\u7f6e\u96fb\u5b50\u90f5\u4ef6\u901a\u77e5\uff0c\u5247 Vertex AI \u6703\u5728\u6d41\u6c34\u7dda\u9000\u51fa\u6642\u767c\u9001\u5982\u4e0b\u6240\u793a\u7684\u96fb\u5b50\u90f5\u4ef6\u901a\u77e5\uff1a\n\u5728\u6b64\u793a\u4f8b\u4e2d\uff1a\n- `{status}`\u8868\u793a\u4efb\u52d9\u7684\u6700\u7d42\u72c0\u614b\uff0c\u53ef\u4ee5\u662f`SUCCEEDED`\u3001`FAILED`\u6216`CANCELLED`\u3002\n- `{project}`\u662f\u9805\u76ee\u540d\u7a31\u3002\n- `{pipeline_job_id}`\u662f\u552f\u4e00\u7684\u6d41\u6c34\u7dda\u4f5c\u696d ID\u3002\n- `{start_time}`\u8868\u793a\u6d41\u6c34\u7dda\u7684\u958b\u59cb\u6642\u9593\u3002\n- `{console_link}`\u662f Google Cloud \u63a7\u5236\u6aaf\u4e2d\u6d41\u6c34\u7dda\u4f5c\u696d\u7684\u8d85\u93c8\u63a5\u3002", "guide": "Vertex AI"}