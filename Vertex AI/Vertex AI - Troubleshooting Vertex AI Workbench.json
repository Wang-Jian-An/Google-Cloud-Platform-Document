{"title": "Vertex AI - Troubleshooting Vertex AI Workbench", "url": "https://cloud.google.com/vertex-ai/docs/general/troubleshooting-workbench#user-managed-notebooks?hl=zh-cn", "abstract": "# Vertex AI - Troubleshooting Vertex AI Workbench\nThis page describes troubleshooting steps that you might find helpful if you run into problems when you use Vertex AI Workbench.\nSee also [Troubleshooting Vertex AI](/vertex-ai/docs/general/troubleshooting) for help using other components of Vertex AI.\nTo filter this page's content, click a topic:\n", "content": "## Helpful procedures\nThis section describes procedures that you might find helpful.\n### Use SSH to connect to your user-managed notebooks instance\nUse ssh to connect to your instance by typing the following command in either [Cloud Shell](https://console.cloud.google.com?cloudshell=true) or any environment where the [Google Cloud CLI](/sdk/docs) is installed.\n```\ngcloud compute ssh --project PROJECT_ID \\\u00a0 --zone ZONE \\\u00a0 INSTANCE_NAME -- -L 8080:localhost:8080\n```\nReplace the following:\n- ``: Your project ID\n- ``: The Google Cloud zone where your instance is located\n- ``: The name of your instance\n### Re-register with the Inverting Proxy server\nTo re-register the user-managed notebooks instance with the internal Inverting Proxy server, you can stop and start the VM from the [User-managed notebooks page](https://console.cloud.google.com/vertex-ai/workbench/user-managed) or you can [use ssh to connect toyour user-managed notebooks instance](#ssh-connect) and enter:\n```\ncd /opt/deeplearning/bin\nsudo ./attempt-register-vm-on-proxy.sh\n```\n### Verify the Docker service status\nTo verify the Docker service status you can [use ssh to connect to youruser-managed notebooks instance](#ssh-connect) and enter:\n```\nsudo service docker status\n```\n### Verify that the Inverting Proxy agent is running\nTo verify if the notebook Inverting Proxy agent is running, [use ssh to connect toyour user-managed notebooks instance](#ssh-connect) and enter:\n```\n# Confirm Inverting Proxy agent Docker container is running (proxy-agent)\nsudo docker ps\n# Verify State.Status is running and State.Running is true.\nsudo docker inspect proxy-agent\n# Grab logs\nsudo docker logs proxy-agent\n```\n### Verify the Jupyter service status and collect logs\nTo verify the Jupyter service status you can [use ssh toconnect toyour user-managed notebooks instance](#ssh-connect) and enter:\n```\nsudo service jupyter status\n```\nTo collect Jupyter service logs:\n```\nsudo journalctl -u jupyter.service --no-pager\n```\n### Verify that the Jupyter internal API is active\nTo verify that the Jupyter internal API is active you can [use sshto connect toyour user-managed notebooks instance](#ssh-connect) and enter:\n```\ncurl http://127.0.0.1:8080/api/kernelspecs\n```\n### Restart the Docker service\nTo restart the Docker service, you can stop and start the VM from the [User-managed notebooks page](https://console.cloud.google.com/vertex-ai/workbench/user-managed) or you can [use ssh to connect toyour user-managed notebooks instance](#ssh-connect) and enter:\n```\nsudo service docker restart\n```\n### Restart the Inverting Proxy agent\nTo restart the Inverting Proxy agent, you can stop and start the VM from the [User-managed notebooks page](https://console.cloud.google.com/vertex-ai/workbench/user-managed) or you can [use ssh to connect toyour user-managed notebooks instance](#ssh-connect) and enter:\n```\nsudo docker restart proxy-agent\n```\n### Restart the Jupyter service\nTo restart the Jupyter service, you can stop and start the VM from the [User-managed notebooks page](https://console.cloud.google.com/vertex-ai/workbench/user-managed) or you can [use ssh to connect toyour user-managed notebooks instance](#ssh-connect) and enter:\n```\nsudo service jupyter restart\n```\n### Make a copy of the user data on an instance\nTo store a copy of an instance's user data in Cloud Storage, complete the following steps.\n**Note:** You must have terminal access to your instance. Terminal access is manually set when you create an instance. The terminal access setting can't be changed after the instance is created.\nIn the same project where your instance is located, create a Cloud Storage bucket where you can store your user data. If you already have a Cloud Storage bucket, skip this step.\n- Create a Cloud Storage bucket:```\ngcloud storage buckets create gs://BUCKET_NAME\n```Replace``with a bucket name  that meets the [bucket naming requirements](/storage/docs/buckets#naming) .\n- In your instance's JupyterLab interface, select **File\u00a0>New\u00a0> Terminal** to open a terminal window. For user-managed notebooks instances, you can instead connect to your instance's terminal by [using SSH](/vertex-ai/docs/workbench/user-managed/ssh-access) .\n- Use the [gsutil tool](/storage/docs/gsutil) to copy your user data to a Cloud Storage bucket. The following example command copies all of the files from your instance's `/home/jupyter/` directory to a directory in a Cloud Storage bucket.```\ngsutil cp -R /home/jupyter/* gs://BUCKET_NAMEPATH\n```Replace the following:- ``: the name of your Cloud Storage bucket\n- ``: the path to the directory where you want to copy your files, for example:`/copy/jupyter/`", "guide": "Vertex AI"}