{"title": "Vertex AI - Create a managed notebooks instance", "url": "https://cloud.google.com/vertex-ai/docs/start/introduction-unified-platform", "abstract": "# Vertex AI - Create a managed notebooks instance\n# Create a managed notebooks instance\nVertex AI Workbench managed notebooks is [deprecated](/vertex-ai/docs/deprecations) . On January 30, 2025, support for  managed notebooks will end and the ability to create managed notebooks instances  will be removed. Existing instances will continue to function  but patches, updates, and upgrades won't be available. To continue using  Vertex AI Workbench, we recommend that you [migrate your managed notebooks instances to Vertex AI Workbench instances](/vertex-ai/docs/workbench/managed/migrate-to-instances) .\nThis page shows you how to create a managed notebooks instance by using the Google Cloud console or the Google Cloud CLI. While creating your instance, you can configure your instance's hardware, encryption type, network, and other details.\n", "content": "## Before you begin\n## Create an instance with default properties\nYou can create a managed notebooks instance by using either the Google Cloud console or the gcloud CLI:\n- In the Google Cloud console, go to the **Managed notebooks** page. [Go to Managed notebooks](https://console.cloud.google.com/vertex-ai/workbench/managed) \n- Click add_box **New notebook** .\n- In the **Notebook name** field, enter a name for your instance. The name must start with a letter followed by up to 62 lowercase letters, numbers, or hyphens (-), and cannot end with a hyphen.\n- Click the **Region** list, and select a region for your instance.\n- Choose a permission option to define which users can access the managed notebooks instance:- **Service Account** : This option grants access to all users who have access to the Compute Engine service account that you link to the runtime. To specify your own service account, clear the **Use Compute Engine defaultservice account** checkbox, and enter the service account email address that you want to use. For more information about service accounts, see [Types of service accounts](/iam/docs/service-account-types) .\n- **Single User** : This option grants access to only a specific user. In the **User email** field, enter the user account email address of the user who will use the managed notebooks instance.\n **Note:** To grant access to the instance through the service account  or single user option, you must use an individual's  user account email address. Group access is not supported.To learn more about granting access, see [Manage access](/vertex-ai/docs/workbench/managed/manage-access) .\n- Click **Create** .Vertex AI Workbench automatically starts the instance. When the instance is ready to use, Vertex AI Workbench activates an **Open JupyterLab** link.Before using any of the command data below, make the following replacements:- ``: The name of  your managed notebooks instance;  must start with a letter followed by up to 62 lowercase letters,  numbers, or hyphens (-), and cannot end with a hyphen\n- ``: Your project ID\n- ``: The region where you want your instance to be located\n- ``: the [access mode](/vertex-ai/docs/workbench/managed/manage-access-jupyterlab#access-modes) that you want to use; for example,`SINGLE_USER`or`SERVICE_ACCOUNT`\n- ``: the email address  of the single user or service account that needs access  to the instance's JupyterLab interface\n- ``: the [machine type](/compute/docs/machine-types) of your instance's VM\nExecute the  following  command:For more information about the command for creating an instance from the command line, see the [gcloud CLIdocumentation](/sdk/gcloud/reference/notebooks/runtimes/create) .\nVertex AI Workbench automatically starts the instance after creation. When the instance is ready to use, you can access it from the [Google Cloud console](https://console.cloud.google.com/vertex-ai/workbench/managed) .\n## Create an instance by using advanced settings\n- In the Google Cloud console, go to the **Managed notebooks** page. [Go to Managed notebooks](https://console.cloud.google.com/vertex-ai/workbench/managed) \n- Click add_box **Newnotebook** .\n- In the **Notebook name** field, enter a name for your instance. The name must start with a letter followed by up to 62 lowercase letters, numbers, or hyphens (-), and cannot end with a hyphen.\n- Click the **Region** list, and select a region for your instance.\n- Choose a permission option to define which users can access the managed notebooks instance:- **Service Account** : This option grants access to all users who have access to the Compute Engine service account that you link to the runtime. To specify your own service account, clear the **Use Compute Engine defaultservice account** checkbox, and enter the service account email address that you want to use. For more information about service accounts, see [Types of service accounts](/iam/docs/service-account-types) .\n- **Single User** : This option grants access to only a specific user. In the **User email** field, enter the user account email address of the user who will use the managed notebooks instance.\n **Note:** To grant access to the instance through the service account  or single user option, you must use an individual's  user account email address. Group access is not supported.To learn more about granting access, see [Manage access](/vertex-ai/docs/workbench/managed/manage-access) .\n- Click **Advanced settings** and complete the dialog using the directions in the following sections.\n### Use custom Docker images\nTo run notebook files in a custom Docker container, add the custom Docker container image to your managed notebooks instance.\nThe custom Docker container image must be located in [Artifact Registry](/artifact-registry/docs) . You must have access to the container image.\n- In the **Environment** section, in **Custom Docker images** , select the **Provide custom Docker images** checkbox.\n- Enter a Docker container image path, or click **Select** to add one from Artifact Registry.\n- To add another custom Docker image, click add **Add another Docker image** , and repeat these steps.\n### Configure hardware\nSelect a hardware configuration for your environment. You can change this later from the JupyterLab user interface.\nGPU accelerator availability is based on region, machine type, and the number of GPUs that you want. You might want to confirm availability by using the following resources:\n- [GPU regions and zones availability](/compute/docs/gpus/gpu-regions-zones) . The accelerator type that you want must be available in your instance's zone.\n- [NVIDIA\u00ae A100 GPUs](/compute/docs/gpus#gpus-list) . Check GPU availability for your machine type.To configure your hardware, complete the following:\n- In the **Hardware configuration** section, select a **Machine type** .\n- If you want to use GPUs, select a **GPU type** . If you don't see the GPU type that you want, check [GPU availability for your machine type andzone](/compute/docs/gpus/gpu-regions-zones) .\n- If you chose to use GPUs, select a **Number of GPUs** , and then select **Install NVIDIA GPU driver automatically for me** .\n- Select a **Data disk type** and **Data disk size in GB** .\n- To use the operating system's default trash behavior, select the **Delete to trash** checkbox. If you use the default trash behavior, files deleted by using the JupyterLab user interface are recoverable but these deleted files do use disk space.\n### Select encryption type\nChoose either the default Google-managed encryption key or a [Customer-managedencryption key (CMEK)](/kms/docs/cmek) . To learn more about using CMEK with managed notebooks, see [Use customer-managed encryption keys](/vertex-ai/docs/workbench/managed/cmek) .\n- In the **Disk encryption** section, select either the default **Google-managed encryption key** or select **Customer-managed encryption key (CMEK)** .\n- If you select **Customer-managed encryption key (CMEK)** , click the list, and select your customer-managed key.- If the key that you want to use is not in the list, enter your encryption key's [resource ID](/kms/docs/getting-resource-ids) .\n- To create a customer-managed encryption key, see [Creatingsymmetric encryption keys](/kms/docs/creating-keys) .\n### Enable idle shutdown\nIdle shutdown is enabled by default to shut down your instance after 180 minutes of inactivity. You can change the number of minutes of inactivity before shutdown, or you can disable idle shutdown. To learn more, see [Idle shutdown](/vertex-ai/docs/workbench/managed/idle-shutdown) .\n- To change the number of minutes before shutdown, in the **Idle shutdown** section, in the **Time of inactivity before shutdown (Minutes)** field, change the value to an integer from 10 through 1440.\n- To disable idle shutdown, in the **Idle shutdown** section, clear **Enable Idle Shutdown** .\n### Configure your network\nBy default, your managed notebooks instance uses a Google-managed [VPC network](/vpc/docs/vpc#default-network) , which requires no configuration. If you want to, you can instead specify a VPC network located within your project or a network that is shared with you. If you specify a network, the network requires a [private servicesaccess](/vpc/docs/private-services-access) connection. The network must also have internet access, or you must [enablePrivate Google Access](/vpc/docs/configure-private-google-access) for the network.\n- In the **Networking** section, select either **Networks in this project** or **Networks shared with me** .\n- In the **Network** field, select the network that you want to use.\n- In the **Subnetwork** field, select the subnetwork that you want to use.\n- To enable an external IP address, select the **Enable external IP address** checkbox. If the specified network doesn't have internet access, or if you don't enable the external IP address, you must enable Private Google Access for the network in order to use this instance.\n- If you have not already [configured a private services accessconnection](/vpc/docs/configure-private-services-access) for this network, click **Set up connection** and complete the following:- In the **Create a private services access connection** dialog, enable the Service Networking API, and then click **Enable API** . If the Service Networking API is already enabled, click **Continue** .\n- In the **Allocate an IP range** section, complete the dialog to select one or more existing IP ranges, create a new IP range, or use an automatically allocated IP range.\n- When you have finished, click **Continue** .\n- In the **Create a connection** section, review the network and allocated IP range that you selected, and then click **Create connection** .\n### Configure security options\nEnable or disable the following options:\n- **nbconvert** : [nbconvert](https://nbconvert.readthedocs.io/en/latest/) lets users export and download a notebook file as a different file type, such as HTML, PDF, or LaTeX.\n- **File downloading from Notebook UI** : This setting lets users download files from the JupyterLab user interface.\n- **Terminal** : This enables terminal access to your managed notebooks instance from within the JupyterLab user interface.\n### Finish creating the instance\n- Click **Create** .Vertex AI Workbench automatically starts the instance. When the instance is ready to use, Vertex AI Workbench activates an **Open JupyterLab** link.## Create an instance by using Terraform\nYou can create a managed notebooks instance by using the [google_notebooks_runtime](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/notebooks_runtime) Terraform resource. Use the following sample to create a new managed notebooks instance named `notebooks-runtime-basic` .\nTo learn how to apply or remove a Terraform configuration, see [Basic Terraform commands](/docs/terraform/basic-commands) .\n[View on GitHub](https://github.com/terraform-google-modules/terraform-docs-samples/blob/HEAD/vertex_ai/managed_notebooks_runtime/main.tf)\n```\nresource \"google_notebooks_runtime\" \"basic_runtime\" {\n name  = \"notebooks-runtime-basic\"\n location = \"us-central1\"\n access_config {\n access_type = \"SINGLE_USER\"\n runtime_owner = \"admin@hashicorptest.com\"\n }\n virtual_machine {\n virtual_machine_config {\n  machine_type = \"n1-standard-4\"\n  data_disk {\n  initialize_params {\n   disk_size_gb = \"100\"\n   disk_type = \"PD_STANDARD\"\n  }\n  }\n }\n }\n}\n```\n## Open JupyterLab\nAfter you create your instance, Vertex AI Workbench automatically starts the instance. When the instance is ready to use, Vertex AI Workbench activates an **Open JupyterLab** link.\n- Next to your managed notebooks instance's name, click **Open JupyterLab** .\n- The first time you access a managed notebooks instance's JupyterLab user interface, you must grant the gcloud CLI permission to access your data and authenticate your managed notebooks instance.- In the **Authenticate your managed notebook** dialog, click the button to get an authentication code.\n- Choose an account and click **Allow** . Copy the authentication code.\n- In the **Authenticate your managed notebook** dialog, paste the authentication code, and then click **Authenticate** .Your managed notebooks instance opens JupyterLab.\n## Open a new notebook file\n- Select **File\u00a0>New\u00a0> Notebook** .\n- In the **Select kernel** dialog, select **Python** , and then click **Select** .\n- Your new notebook file opens.## What's next\n- Try one of the tutorials that is included in your new managed notebooks instance. In the JupyterLab folder **File Browser** , open the **tutorials** folder, and open one of the notebook files.", "guide": "Vertex AI"}