{"title": "Vertex AI - \u5c0e\u51fa AutoML Edge \u6a21\u578b", "url": "https://cloud.google.com/vertex-ai/docs/export/export-edge-model?hl=zh-cn", "abstract": "# Vertex AI - \u5c0e\u51fa AutoML Edge \u6a21\u578b\n\u672c\u9801\u9762\u4ecb\u7d39\u5982\u4f55\u4f7f\u7528 Vertex AI \u5c07 AutoML Edge \u6a21\u578b\u5716\u7247\u548c\u8996\u983b\u5c0e\u51fa\u5230 Cloud Storage\u3002\n\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5c0e\u51fa\u8868\u683c\u6a21\u578b\uff0c\u8acb\u53c3\u95b1 [\u5c0e\u51fa AutoML \u8868\u683c\u6a21\u578b](https://cloud.google.com/vertex-ai/docs/export/export-model-tabular?hl=zh-cn) \u3002\n", "content": "## \u7c21\u4ecb\n[\u8a13\u7df4](https://cloud.google.com/vertex-ai/docs/training/automl-edge-console?hl=zh-cn) AutoML Edge \u6a21\u578b\u5f8c\uff0c\u5728\u67d0\u4e9b\u60c5\u6cc1\u4e0b\uff0c\u60a8\u53ef\u4ee5\u6839\u64da\u6240\u9700\u7684\u4f7f\u7528\u65b9\u5f0f\u4ee5\u4e0d\u540c\u683c\u5f0f\u5c0e\u51fa\u6a21\u578b\u3002\u5c0e\u51fa\u7684\u6a21\u578b\u6587\u4ef6\u4fdd\u5b58\u5728 Cloud Storage \u5b58\u5132\u6876\u4e2d\uff0c\u4e26\u53ef\u7528\u65bc\u5728\u60a8\u9078\u64c7\u7684\u74b0\u5883\u4e2d\u9032\u884c\u9810\u6e2c\u3002\n\u60a8\u7121\u6cd5\u5728 Vertex AI \u4e2d\u4f7f\u7528 Edge \u6a21\u578b\u4f86\u57f7\u884c\u9810\u6e2c\uff1b\u60a8\u5fc5\u9808\u5c07 Edge \u6a21\u578b\u90e8\u7f72\u5230\u5916\u90e8\u8a2d\u5099\u624d\u80fd\u9032\u884c\u9810\u6e2c\u3002\n## \u5c0e\u51fa\u6a21\u578b\n\u4f7f\u7528\u4ee5\u4e0b\u4ee3\u78bc\u793a\u4f8b\u78ba\u5b9a AutoML Edge \u6a21\u578b\uff0c\u6307\u5b9a\u8f38\u51fa\u6587\u4ef6\u5b58\u5132\u4f4d\u7f6e\uff0c\u7136\u5f8c\u767c\u9001\u5c0e\u51fa\u6a21\u578b\u8acb\u6c42\u3002\n\u5728\u4e0b\u9762\u9078\u64c7\u60a8\u7684\u76ee\u6a19\u5c0d\u61c9\u7684\u6a19\u7c64\u9801\uff1a\n\u7d93\u904e\u8a13\u7df4\u7684 AutoML Edge \u5716\u7247\u5206\u985e\u6a21\u578b\u53ef\u4ee5\u6309\u4ee5\u4e0b\u683c\u5f0f\u5c0e\u51fa\uff1a- **TF Lite** - \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TF Lite \u8edf\u4ef6\u5305\uff0c\u4ee5\u5728\u908a\u7de3\u6216\u79fb\u52d5\u8a2d\u5099\u4e0a\u904b\u884c\u6a21\u578b\u3002\n- **Edge TPU TF Lite** - \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TF Lite \u8edf\u4ef6\u5305\uff0c\u4ee5\u5728 Edge TPU \u8a2d\u5099\u4e0a\u904b\u884c\u6a21\u578b\u3002\n- **\u5bb9\u5668** - \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TF \u4fdd\u5b58\u7684\u6a21\u578b\u4ee5\u5728 Docker \u5bb9\u5668\u4e0a\u904b\u884c\u3002\n- **Core ML** - \u5c0e\u51fa .mlmodel \u6587\u4ef6\uff0c\u4ee5\u5728 iOS \u548c macOS \u8a2d\u5099\u4e0a\u904b\u884c\u6a21\u578b\u3002\n- **Tensorflow.js** - \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TensorFlow.js \u8edf\u4ef6\u5305\uff0c\u4ee5\u5728\u700f\u89bd\u5668\u548c Node.js \u4e2d\u904b\u884c\u6a21\u578b\u3002\n\u5728\u4e0b\u9762\u9078\u64c7\u60a8\u7684\u8a9e\u8a00\u6216\u74b0\u5883\u5c0d\u61c9\u7684\u6a19\u7c64\u9801\uff1a\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u7684 Vertex AI \u90e8\u5206\u4e2d\uff0c\u524d\u5f80 **\u6a21\u578b** \u9801\u9762\u3002 [\u6253\u958b\u201c\u6a21\u578b\u201d\u9801\u9762](https://console.cloud.google.com/vertex-ai/models?hl=zh-cn) \n- \u9ede\u64ca\u8981\u5c0e\u51fa\u7684 AutoML Edge \u6a21\u578b\u7684\u7248\u672c\u865f\uff0c\u4ee5\u6253\u958b\u5176\u8a73\u60c5\u9801\u9762\u3002\n- \u9ede\u64ca **\u5c0e\u51fa** \u3002\n- \u5728 **\u5c0e\u51fa\u6a21\u578b** \u5074\u908a\u7a97\u53e3\u4e2d\uff0c\u6307\u5b9a Cloud Storage \u4e2d\u5b58\u5132 Edge \u6a21\u578b\u5c0e\u51fa\u8f38\u51fa\u7684\u4f4d\u7f6e\u3002\n- \u9ede\u64ca **\u5c0e\u51fa** \u3002\n- \u9ede\u64ca **\u5b8c\u6210** \u95dc\u9589 **\u5c0e\u51fa\u6a21\u578b** \u5074\u908a\u7a97\u53e3\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a\u60a8\u7684\u9805\u76ee\u7684\u4f4d\u7f6e\u3002\n- \uff1a\u60a8\u7684 [\u9805\u76ee ID](https://cloud.google.com/resource-manager/docs/creating-managing-projects?hl=zh-cn#identifiers) \u3002\n- \uff1a\u8981\u5c0e\u51fa\u7684\u7d93\u904e\u8a13\u7df4\u7684 AutoML Edge \u6a21\u578b\u7684 ID \u7de8\u865f\u3002\n- \uff1a\u8981\u5c0e\u51fa\u7684 Edge \u6a21\u578b\u7684\u985e\u578b\u3002\u5c0d\u65bc\u6b64\u76ee\u6a19\uff0c\u9078\u9805\u5305\u62ec\uff1a- `tflite`(TF Lite) - \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TF Lite \u8edf\u4ef6\u5305\uff0c\u4ee5\u5728\u908a\u7de3\u6216\u79fb\u52d5\u8a2d\u5099\u4e0a\u904b\u884c\u6a21\u578b\u3002\n- `edgetpu-tflite`(Edge TPU TF Lite) - \u6a21\u578b\u5c0e\u51fa\u7232 TF Lite \u8edf\u4ef6\u5305\uff0c\u4ee5\u5728 Edge TPU \u8a2d\u5099\u4e0a\u904b\u884c\u6a21\u578b\u3002\n- `tf-saved-model`\uff08\u5bb9\u5668\uff09- \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TF \u4fdd\u5b58\u7684\u6a21\u578b\u4ee5\u5728 Docker \u5bb9\u5668\u4e0a\u904b\u884c\u3002\n- `core-ml`(Core ML) - \u5c0e\u51fa .mlmodel \u6587\u4ef6\uff0c\u4ee5\u5728 iOS \u548c macOS \u8a2d\u5099\u4e0a\u904b\u884c\u6a21\u578b\u3002\n- `tf-js`(Tensorflow.js) - \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TensorFlow.js \u8edf\u4ef6\u5305\uff0c\u4ee5\u5728\u700f\u89bd\u5668\u548c Node.js \u4e2d\u904b\u884c\u6a21\u578b\u3002\n- \uff1a\u8981\u5b58\u5132 Edge \u6a21\u578b\u6587\u4ef6\u7684 Cloud Storage \u5b58\u5132\u6876\u76ee\u9304\u7684\u8def\u5f91\u3002\n- HTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nPOST https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT/locations/LOCATION/models/MODEL_ID:export\n```- \u8acb\u6c42 JSON \u6b63\u6587\uff1a\n```\n{\n \"outputConfig\": {\n \"exportFormatId\": \"EXPORT_FORMAT\",\n \"artifactDestination\": {\n  \"outputUriPrefix\": \"gs://OUTPUT_BUCKET/\"\n }\n }\n}\n```- \u5982\u9700\u767c\u9001\u8acb\u6c42\uff0c\u8acb\u9078\u64c7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\uff1a **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT/locations/LOCATION/models/MODEL_ID:export\"\n``` **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT/locations/LOCATION/models/MODEL_ID:export\" | Select-Object -Expand Content\n```\n- \u97ff\u61c9\u5305\u542b\u6709\u95dc\u898f\u7bc4\u7684\u4fe1\u606f\u4ee5\u53ca \u3002\n- \u60a8\u53ef\u4ee5 [\u7372\u53d6\u5c0e\u51fa\u64cd\u4f5c\u72c0\u614b](#get-oper) \uff0c\u4ee5\u77ad\u89e3\u5c0e\u51fa\u64cd\u4f5c\u5b8c\u6210\u7684\u6642\u9593\u3002\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300aVertex AI \u5feb\u901f\u5165\u9580\uff1a\u4f7f\u7528\u5ba2\u6236\u7aef\u5eab\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Java \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Vertex AI Java API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/java/docs/reference/google-cloud-aiplatform/latest/com.google.cloud.aiplatform.v1?hl=zh-cn) \u3002\n\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n [\u5728\u7de8\u8f2f\u5668\u4e2d\u6253\u958b](https://ide.cloud.google.com/?git_repo=https%3A%2F%2Fgithub.com%2FGoogleCloudPlatform%2Fjava-docs-samples&page=editor&cloudshell_workspace=aiplatform%2Fsrc%2Fmain%2Fjava%2Faiplatform&cloudshell_open_in_editor=ExportModelSample.java&hl=zh-cn) [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/java-docs-samples/blob/HEAD/aiplatform/src/main/java/aiplatform/ExportModelSample.java) \n```\nimport com.google.api.gax.longrunning.OperationFuture;import com.google.cloud.aiplatform.v1.ExportModelOperationMetadata;import com.google.cloud.aiplatform.v1.ExportModelRequest;import com.google.cloud.aiplatform.v1.ExportModelResponse;import com.google.cloud.aiplatform.v1.GcsDestination;import com.google.cloud.aiplatform.v1.ModelName;import com.google.cloud.aiplatform.v1.ModelServiceClient;import com.google.cloud.aiplatform.v1.ModelServiceSettings;import java.io.IOException;import java.util.concurrent.ExecutionException;import java.util.concurrent.TimeUnit;import java.util.concurrent.TimeoutException;public class ExportModelSample {\u00a0 public static void main(String[] args)\u00a0 \u00a0 \u00a0 throws IOException, InterruptedException, ExecutionException, TimeoutException {\u00a0 \u00a0 // TODO(developer): Replace these variables before running the sample.\u00a0 \u00a0 String project = \"YOUR_PROJECT_ID\";\u00a0 \u00a0 String modelId = \"YOUR_MODEL_ID\";\u00a0 \u00a0 String gcsDestinationOutputUriPrefix = \"gs://YOUR_GCS_SOURCE_BUCKET/path_to_your_destination/\";\u00a0 \u00a0 String exportFormat = \"YOUR_EXPORT_FORMAT\";\u00a0 \u00a0 exportModelSample(project, modelId, gcsDestinationOutputUriPrefix, exportFormat);\u00a0 }\u00a0 static void exportModelSample(\u00a0 \u00a0 \u00a0 String project, String modelId, String gcsDestinationOutputUriPrefix, String exportFormat)\u00a0 \u00a0 \u00a0 throws IOException, InterruptedException, ExecutionException, TimeoutException {\u00a0 \u00a0 ModelServiceSettings modelServiceSettings =\u00a0 \u00a0 \u00a0 \u00a0 ModelServiceSettings.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setEndpoint(\"us-central1-aiplatform.googleapis.com:443\")\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 // Initialize client that will be used to send requests. This client only needs to be created\u00a0 \u00a0 // once, and can be reused for multiple requests. After completing all of your requests, call\u00a0 \u00a0 // the \"close\" method on the client to safely clean up any remaining background resources.\u00a0 \u00a0 try (ModelServiceClient modelServiceClient = ModelServiceClient.create(modelServiceSettings)) {\u00a0 \u00a0 \u00a0 String location = \"us-central1\";\u00a0 \u00a0 \u00a0 GcsDestination.Builder gcsDestination = GcsDestination.newBuilder();\u00a0 \u00a0 \u00a0 gcsDestination.setOutputUriPrefix(gcsDestinationOutputUriPrefix);\u00a0 \u00a0 \u00a0 ModelName modelName = ModelName.of(project, location, modelId);\u00a0 \u00a0 \u00a0 ExportModelRequest.OutputConfig outputConfig =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ExportModelRequest.OutputConfig.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setExportFormatId(exportFormat)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setArtifactDestination(gcsDestination)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 \u00a0 OperationFuture<ExportModelResponse, ExportModelOperationMetadata> exportModelResponseFuture =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 modelServiceClient.exportModelAsync(modelName, outputConfig);\u00a0 \u00a0 \u00a0 System.out.format(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"Operation name: %s\\n\", exportModelResponseFuture.getInitialFuture().get().getName());\u00a0 \u00a0 \u00a0 System.out.println(\"Waiting for operation to finish...\");\u00a0 \u00a0 \u00a0 ExportModelResponse exportModelResponse =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 exportModelResponseFuture.get(300, TimeUnit.SECONDS);\u00a0 \u00a0 \u00a0 System.out.format(\"Export Model Response: %s\\n\", exportModelResponse);\u00a0 \u00a0 }\u00a0 }}\n```\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300aVertex AI \u5feb\u901f\u5165\u9580\uff1a\u4f7f\u7528\u5ba2\u6236\u7aef\u5eab\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Node.js \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Vertex AI Node.js API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/nodejs/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/nodejs-docs-samples/blob/HEAD/ai-platform/snippets/export-model.js) \n```\n/**\u00a0* TODO(developer): Uncomment these variables before running the sample.\\\u00a0 \u00a0(Not necessary if passing values as arguments)\u00a0*/// const modelId = 'YOUR_MODEL_ID';// const gcsDestinationOutputUriPrefix ='YOUR_GCS_DEST_OUTPUT_URI_PREFIX';// \u00a0 \u00a0eg. \"gs://<your-gcs-bucket>/destination_path\"// const exportFormat = 'YOUR_EXPORT_FORMAT';// const project = 'YOUR_PROJECT_ID';// const location = 'YOUR_PROJECT_LOCATION';// Imports the Google Cloud Model Service Client libraryconst {ModelServiceClient} = require('@google-cloud/aiplatform');// Specifies the location of the api endpointconst clientOptions = {\u00a0 apiEndpoint: 'us-central1-aiplatform.googleapis.com',};// Instantiates a clientconst modelServiceClient = new ModelServiceClient(clientOptions);async function exportModel() {\u00a0 // Configure the name resources\u00a0 const name = `projects/${project}/locations/${location}/models/${modelId}`;\u00a0 // Configure the outputConfig resources\u00a0 const outputConfig = {\u00a0 \u00a0 exportFormatId: exportFormat,\u00a0 \u00a0 gcsDestination: {\u00a0 \u00a0 \u00a0 outputUriPrefix: gcsDestinationOutputUriPrefix,\u00a0 \u00a0 },\u00a0 };\u00a0 const request = {\u00a0 \u00a0 name,\u00a0 \u00a0 outputConfig,\u00a0 };\u00a0 // Export Model request\u00a0 const [response] = await modelServiceClient.exportModel(request);\u00a0 console.log(`Long running operation : ${response.name}`);\u00a0 // Wait for operation to complete\u00a0 await response.promise();\u00a0 const result = response.result;\u00a0 console.log(`Export model response : ${JSON.stringify(result)}`);}exportModel();\n```\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u6216\u66f4\u65b0 Python\uff0c\u8acb\u53c3\u95b1 [\u5b89\u88dd Python \u7248 Vertex AI SDK](https://cloud.google.com/vertex-ai/docs/start/use-vertex-ai-python-sdk?hl=zh-cn) \u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [   Python API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/python/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n [\u5728\u7de8\u8f2f\u5668\u4e2d\u6253\u958b](https://ide.cloud.google.com/?git_repo=https%3A%2F%2Fgithub.com%2Fgoogleapis%2Fpython-aiplatform&page=editor&cloudshell_workspace=samples%2Fsnippets%2Fmodel_service&cloudshell_open_in_editor=export_model_sample.py&hl=zh-cn) [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/googleapis/python-aiplatform/blob/HEAD/samples/snippets/model_service/export_model_sample.py) \n```\nfrom google.cloud import aiplatformdef export_model_sample(\u00a0 \u00a0 project: str,\u00a0 \u00a0 model_id: str,\u00a0 \u00a0 gcs_destination_output_uri_prefix: str,\u00a0 \u00a0 location: str = \"us-central1\",\u00a0 \u00a0 api_endpoint: str = \"us-central1-aiplatform.googleapis.com\",\u00a0 \u00a0 timeout: int = 300,):\u00a0 \u00a0 # The AI Platform services require regional API endpoints.\u00a0 \u00a0 client_options = {\"api_endpoint\": api_endpoint}\u00a0 \u00a0 # Initialize client that will be used to create and send requests.\u00a0 \u00a0 # This client only needs to be created once, and can be reused for multiple requests.\u00a0 \u00a0 client = aiplatform.gapic.ModelServiceClient(client_options=client_options)\u00a0 \u00a0 output_config = {\u00a0 \u00a0 \u00a0 \u00a0 \"artifact_destination\": {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"output_uri_prefix\": gcs_destination_output_uri_prefix\u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 # For information about export formats: https://cloud.google.com/ai-platform-unified/docs/export/export-edge-model#aiplatform_export_model_sample-drest\u00a0 \u00a0 \u00a0 \u00a0 \"export_format_id\": \"tf-saved-model\",\u00a0 \u00a0 }\u00a0 \u00a0 name = client.model_path(project=project, location=location, model=model_id)\u00a0 \u00a0 response = client.export_model(name=name, output_config=output_config)\u00a0 \u00a0 print(\"Long running operation:\", response.operation.name)\u00a0 \u00a0 print(\"output_info:\", response.metadata.output_info)\u00a0 \u00a0 export_model_response = response.result(timeout=timeout)\u00a0 \u00a0 print(\"export_model_response:\", export_model_response)\n```\u7d93\u904e\u8a13\u7df4\u7684 AutoML Edge \u5716\u7247\u5206\u985e\u6a21\u578b\u53ef\u4ee5\u6309\u4ee5\u4e0b\u683c\u5f0f\u5c0e\u51fa\uff1a- **TF Lite** - \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TF Lite \u8edf\u4ef6\u5305\uff0c\u4ee5\u5728\u908a\u7de3\u6216\u79fb\u52d5\u8a2d\u5099\u4e0a\u904b\u884c\u6a21\u578b\u3002\n- **Edge TPU TF Lite** - \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TF Lite \u8edf\u4ef6\u5305\uff0c\u4ee5\u5728 Edge TPU \u8a2d\u5099\u4e0a\u904b\u884c\u6a21\u578b\u3002\n- **\u5bb9\u5668** - \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TF \u4fdd\u5b58\u7684\u6a21\u578b\u4ee5\u5728 Docker \u5bb9\u5668\u4e0a\u904b\u884c\u3002\n- **Core ML** - \u5c0e\u51fa .mlmodel \u6587\u4ef6\uff0c\u4ee5\u5728 iOS \u548c macOS \u8a2d\u5099\u4e0a\u904b\u884c\u6a21\u578b\u3002\n- **Tensorflow.js** - \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TensorFlow.js \u8edf\u4ef6\u5305\uff0c\u4ee5\u5728\u700f\u89bd\u5668\u548c Node.js \u4e2d\u904b\u884c\u6a21\u578b\u3002\n\u5728\u4e0b\u9762\u9078\u64c7\u60a8\u7684\u8a9e\u8a00\u6216\u74b0\u5883\u5c0d\u61c9\u7684\u6a19\u7c64\u9801\uff1a\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u7684 Vertex AI \u90e8\u5206\u4e2d\uff0c\u524d\u5f80 **\u6a21\u578b** \u9801\u9762\u3002 [\u6253\u958b\u201c\u6a21\u578b\u201d\u9801\u9762](https://console.cloud.google.com/vertex-ai/models?hl=zh-cn) \n- \u9ede\u64ca\u8981\u5c0e\u51fa\u7684 AutoML Edge \u6a21\u578b\u7684\u7248\u672c\u865f\uff0c\u4ee5\u6253\u958b\u5176\u8a73\u60c5\u9801\u9762\u3002\n- \u9ede\u64ca **\u5c0e\u51fa** \u3002\n- \u5728 **\u5c0e\u51fa\u6a21\u578b** \u5074\u908a\u7a97\u53e3\u4e2d\uff0c\u6307\u5b9a Cloud Storage \u4e2d\u5b58\u5132 Edge \u6a21\u578b\u5c0e\u51fa\u8f38\u51fa\u7684\u4f4d\u7f6e\u3002\n- \u9ede\u64ca **\u5c0e\u51fa** \u3002\n- \u9ede\u64ca **\u5b8c\u6210** \u95dc\u9589 **\u5c0e\u51fa\u6a21\u578b** \u5074\u908a\u7a97\u53e3\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a\u60a8\u7684\u9805\u76ee\u7684\u4f4d\u7f6e\u3002\n- \uff1a\u60a8\u7684 [\u9805\u76ee ID](https://cloud.google.com/resource-manager/docs/creating-managing-projects?hl=zh-cn#identifiers) \u3002\n- \uff1a\u8981\u5c0e\u51fa\u7684\u7d93\u904e\u8a13\u7df4\u7684 AutoML Edge \u6a21\u578b\u7684 ID \u7de8\u865f\u3002\n- \uff1a\u8981\u5c0e\u51fa\u7684 Edge \u6a21\u578b\u7684\u985e\u578b\u3002\u5c0d\u65bc\u6b64\u76ee\u6a19\uff0c\u9078\u9805\u5305\u62ec\uff1a- `tflite`(TF Lite) - \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TF Lite \u8edf\u4ef6\u5305\uff0c\u4ee5\u5728\u908a\u7de3\u6216\u79fb\u52d5\u8a2d\u5099\u4e0a\u904b\u884c\u6a21\u578b\u3002\n- `edgetpu-tflite`(Edge TPU TF Lite) - \u6a21\u578b\u5c0e\u51fa\u7232 TF Lite \u8edf\u4ef6\u5305\uff0c\u4ee5\u5728 Edge TPU \u8a2d\u5099\u4e0a\u904b\u884c\u6a21\u578b\u3002\n- `tf-saved-model`\uff08\u5bb9\u5668\uff09- \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TF \u4fdd\u5b58\u7684\u6a21\u578b\u4ee5\u5728 Docker \u5bb9\u5668\u4e0a\u904b\u884c\u3002\n- `core-ml`(Core ML) - \u5c0e\u51fa .mlmodel \u6587\u4ef6\uff0c\u4ee5\u5728 iOS \u548c macOS \u8a2d\u5099\u4e0a\u904b\u884c\u6a21\u578b\u3002\n- `tf-js`(Tensorflow.js) - \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TensorFlow.js \u8edf\u4ef6\u5305\uff0c\u4ee5\u5728\u700f\u89bd\u5668\u548c Node.js \u4e2d\u904b\u884c\u6a21\u578b\u3002\n- \uff1a\u8981\u5b58\u5132 Edge \u6a21\u578b\u6587\u4ef6\u7684 Cloud Storage \u5b58\u5132\u6876\u76ee\u9304\u7684\u8def\u5f91\u3002\n- HTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nPOST https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT/locations/LOCATION/models/MODEL_ID:export\n```- \u8acb\u6c42 JSON \u6b63\u6587\uff1a\n```\n{\n \"outputConfig\": {\n \"exportFormatId\": \"EXPORT_FORMAT\",\n \"artifactDestination\": {\n  \"outputUriPrefix\": \"gs://OUTPUT_BUCKET/\"\n }\n }\n}\n```- \u5982\u9700\u767c\u9001\u8acb\u6c42\uff0c\u8acb\u9078\u64c7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\uff1a **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT/locations/LOCATION/models/MODEL_ID:export\"\n``` **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT/locations/LOCATION/models/MODEL_ID:export\" | Select-Object -Expand Content\n```\n- \u97ff\u61c9\u5305\u542b\u6709\u95dc\u898f\u7bc4\u7684\u4fe1\u606f\u4ee5\u53ca \u3002\n- \u60a8\u53ef\u4ee5 [\u7372\u53d6\u5c0e\u51fa\u64cd\u4f5c\u72c0\u614b](#get-oper) \uff0c\u4ee5\u77ad\u89e3\u5c0e\u51fa\u64cd\u4f5c\u5b8c\u6210\u7684\u6642\u9593\u3002\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300aVertex AI \u5feb\u901f\u5165\u9580\uff1a\u4f7f\u7528\u5ba2\u6236\u7aef\u5eab\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Java \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Vertex AI Java API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/java/docs/reference/google-cloud-aiplatform/latest/com.google.cloud.aiplatform.v1?hl=zh-cn) \u3002\n\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n [\u5728\u7de8\u8f2f\u5668\u4e2d\u6253\u958b](https://ide.cloud.google.com/?git_repo=https%3A%2F%2Fgithub.com%2FGoogleCloudPlatform%2Fjava-docs-samples&page=editor&cloudshell_workspace=aiplatform%2Fsrc%2Fmain%2Fjava%2Faiplatform&cloudshell_open_in_editor=ExportModelSample.java&hl=zh-cn) [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/java-docs-samples/blob/HEAD/aiplatform/src/main/java/aiplatform/ExportModelSample.java) \n```\nimport com.google.api.gax.longrunning.OperationFuture;import com.google.cloud.aiplatform.v1.ExportModelOperationMetadata;import com.google.cloud.aiplatform.v1.ExportModelRequest;import com.google.cloud.aiplatform.v1.ExportModelResponse;import com.google.cloud.aiplatform.v1.GcsDestination;import com.google.cloud.aiplatform.v1.ModelName;import com.google.cloud.aiplatform.v1.ModelServiceClient;import com.google.cloud.aiplatform.v1.ModelServiceSettings;import java.io.IOException;import java.util.concurrent.ExecutionException;import java.util.concurrent.TimeUnit;import java.util.concurrent.TimeoutException;public class ExportModelSample {\u00a0 public static void main(String[] args)\u00a0 \u00a0 \u00a0 throws IOException, InterruptedException, ExecutionException, TimeoutException {\u00a0 \u00a0 // TODO(developer): Replace these variables before running the sample.\u00a0 \u00a0 String project = \"YOUR_PROJECT_ID\";\u00a0 \u00a0 String modelId = \"YOUR_MODEL_ID\";\u00a0 \u00a0 String gcsDestinationOutputUriPrefix = \"gs://YOUR_GCS_SOURCE_BUCKET/path_to_your_destination/\";\u00a0 \u00a0 String exportFormat = \"YOUR_EXPORT_FORMAT\";\u00a0 \u00a0 exportModelSample(project, modelId, gcsDestinationOutputUriPrefix, exportFormat);\u00a0 }\u00a0 static void exportModelSample(\u00a0 \u00a0 \u00a0 String project, String modelId, String gcsDestinationOutputUriPrefix, String exportFormat)\u00a0 \u00a0 \u00a0 throws IOException, InterruptedException, ExecutionException, TimeoutException {\u00a0 \u00a0 ModelServiceSettings modelServiceSettings =\u00a0 \u00a0 \u00a0 \u00a0 ModelServiceSettings.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setEndpoint(\"us-central1-aiplatform.googleapis.com:443\")\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 // Initialize client that will be used to send requests. This client only needs to be created\u00a0 \u00a0 // once, and can be reused for multiple requests. After completing all of your requests, call\u00a0 \u00a0 // the \"close\" method on the client to safely clean up any remaining background resources.\u00a0 \u00a0 try (ModelServiceClient modelServiceClient = ModelServiceClient.create(modelServiceSettings)) {\u00a0 \u00a0 \u00a0 String location = \"us-central1\";\u00a0 \u00a0 \u00a0 GcsDestination.Builder gcsDestination = GcsDestination.newBuilder();\u00a0 \u00a0 \u00a0 gcsDestination.setOutputUriPrefix(gcsDestinationOutputUriPrefix);\u00a0 \u00a0 \u00a0 ModelName modelName = ModelName.of(project, location, modelId);\u00a0 \u00a0 \u00a0 ExportModelRequest.OutputConfig outputConfig =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ExportModelRequest.OutputConfig.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setExportFormatId(exportFormat)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setArtifactDestination(gcsDestination)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 \u00a0 OperationFuture<ExportModelResponse, ExportModelOperationMetadata> exportModelResponseFuture =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 modelServiceClient.exportModelAsync(modelName, outputConfig);\u00a0 \u00a0 \u00a0 System.out.format(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"Operation name: %s\\n\", exportModelResponseFuture.getInitialFuture().get().getName());\u00a0 \u00a0 \u00a0 System.out.println(\"Waiting for operation to finish...\");\u00a0 \u00a0 \u00a0 ExportModelResponse exportModelResponse =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 exportModelResponseFuture.get(300, TimeUnit.SECONDS);\u00a0 \u00a0 \u00a0 System.out.format(\"Export Model Response: %s\\n\", exportModelResponse);\u00a0 \u00a0 }\u00a0 }}\n```\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300aVertex AI \u5feb\u901f\u5165\u9580\uff1a\u4f7f\u7528\u5ba2\u6236\u7aef\u5eab\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Node.js \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Vertex AI Node.js API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/nodejs/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/nodejs-docs-samples/blob/HEAD/ai-platform/snippets/export-model.js) \n```\n/**\u00a0* TODO(developer): Uncomment these variables before running the sample.\\\u00a0 \u00a0(Not necessary if passing values as arguments)\u00a0*/// const modelId = 'YOUR_MODEL_ID';// const gcsDestinationOutputUriPrefix ='YOUR_GCS_DEST_OUTPUT_URI_PREFIX';// \u00a0 \u00a0eg. \"gs://<your-gcs-bucket>/destination_path\"// const exportFormat = 'YOUR_EXPORT_FORMAT';// const project = 'YOUR_PROJECT_ID';// const location = 'YOUR_PROJECT_LOCATION';// Imports the Google Cloud Model Service Client libraryconst {ModelServiceClient} = require('@google-cloud/aiplatform');// Specifies the location of the api endpointconst clientOptions = {\u00a0 apiEndpoint: 'us-central1-aiplatform.googleapis.com',};// Instantiates a clientconst modelServiceClient = new ModelServiceClient(clientOptions);async function exportModel() {\u00a0 // Configure the name resources\u00a0 const name = `projects/${project}/locations/${location}/models/${modelId}`;\u00a0 // Configure the outputConfig resources\u00a0 const outputConfig = {\u00a0 \u00a0 exportFormatId: exportFormat,\u00a0 \u00a0 gcsDestination: {\u00a0 \u00a0 \u00a0 outputUriPrefix: gcsDestinationOutputUriPrefix,\u00a0 \u00a0 },\u00a0 };\u00a0 const request = {\u00a0 \u00a0 name,\u00a0 \u00a0 outputConfig,\u00a0 };\u00a0 // Export Model request\u00a0 const [response] = await modelServiceClient.exportModel(request);\u00a0 console.log(`Long running operation : ${response.name}`);\u00a0 // Wait for operation to complete\u00a0 await response.promise();\u00a0 const result = response.result;\u00a0 console.log(`Export model response : ${JSON.stringify(result)}`);}exportModel();\n```\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u6216\u66f4\u65b0 Python\uff0c\u8acb\u53c3\u95b1 [\u5b89\u88dd Python \u7248 Vertex AI SDK](https://cloud.google.com/vertex-ai/docs/start/use-vertex-ai-python-sdk?hl=zh-cn) \u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [   Python API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/python/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n [\u5728\u7de8\u8f2f\u5668\u4e2d\u6253\u958b](https://ide.cloud.google.com/?git_repo=https%3A%2F%2Fgithub.com%2Fgoogleapis%2Fpython-aiplatform&page=editor&cloudshell_workspace=samples%2Fsnippets%2Fmodel_service&cloudshell_open_in_editor=export_model_sample.py&hl=zh-cn) [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/googleapis/python-aiplatform/blob/HEAD/samples/snippets/model_service/export_model_sample.py) \n```\nfrom google.cloud import aiplatformdef export_model_sample(\u00a0 \u00a0 project: str,\u00a0 \u00a0 model_id: str,\u00a0 \u00a0 gcs_destination_output_uri_prefix: str,\u00a0 \u00a0 location: str = \"us-central1\",\u00a0 \u00a0 api_endpoint: str = \"us-central1-aiplatform.googleapis.com\",\u00a0 \u00a0 timeout: int = 300,):\u00a0 \u00a0 # The AI Platform services require regional API endpoints.\u00a0 \u00a0 client_options = {\"api_endpoint\": api_endpoint}\u00a0 \u00a0 # Initialize client that will be used to create and send requests.\u00a0 \u00a0 # This client only needs to be created once, and can be reused for multiple requests.\u00a0 \u00a0 client = aiplatform.gapic.ModelServiceClient(client_options=client_options)\u00a0 \u00a0 output_config = {\u00a0 \u00a0 \u00a0 \u00a0 \"artifact_destination\": {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"output_uri_prefix\": gcs_destination_output_uri_prefix\u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 # For information about export formats: https://cloud.google.com/ai-platform-unified/docs/export/export-edge-model#aiplatform_export_model_sample-drest\u00a0 \u00a0 \u00a0 \u00a0 \"export_format_id\": \"tf-saved-model\",\u00a0 \u00a0 }\u00a0 \u00a0 name = client.model_path(project=project, location=location, model=model_id)\u00a0 \u00a0 response = client.export_model(name=name, output_config=output_config)\u00a0 \u00a0 print(\"Long running operation:\", response.operation.name)\u00a0 \u00a0 print(\"output_info:\", response.metadata.output_info)\u00a0 \u00a0 export_model_response = response.result(timeout=timeout)\u00a0 \u00a0 print(\"export_model_response:\", export_model_response)\n```\u7d93\u904e\u8a13\u7df4\u7684 AutoML Edge \u5c0d\u8c61\u6aa2\u6e2c\u6a21\u578b\u53ef\u4ee5\u6309\u4ee5\u4e0b\u683c\u5f0f\u5c0e\u51fa\uff1a- **TF Lite** - \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TF Lite \u8edf\u4ef6\u5305\uff0c\u4ee5\u5728\u908a\u7de3\u6216\u79fb\u52d5\u8a2d\u5099\u4e0a\u904b\u884c\u6a21\u578b\u3002\n- **\u5bb9\u5668** - \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TF \u4fdd\u5b58\u7684\u6a21\u578b\u4ee5\u5728 Docker \u5bb9\u5668\u4e0a\u904b\u884c\u3002\n- **Tensorflow.js** - \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TensorFlow.js \u8edf\u4ef6\u5305\uff0c\u4ee5\u5728\u700f\u89bd\u5668\u548c Node.js \u4e2d\u904b\u884c\u6a21\u578b\u3002\n\u5728\u4e0b\u9762\u9078\u64c7\u60a8\u7684\u8a9e\u8a00\u6216\u74b0\u5883\u5c0d\u61c9\u7684\u6a19\u7c64\u9801\uff1a\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u7684 Vertex AI \u90e8\u5206\u4e2d\uff0c\u524d\u5f80 **\u6a21\u578b** \u9801\u9762\u3002 [\u6253\u958b\u201c\u6a21\u578b\u201d\u9801\u9762](https://console.cloud.google.com/vertex-ai/models?hl=zh-cn) \n- \u9ede\u64ca\u8981\u5c0e\u51fa\u7684 AutoML Edge \u6a21\u578b\u7684\u7248\u672c\u865f\uff0c\u4ee5\u6253\u958b\u5176\u8a73\u60c5\u9801\u9762\u3002\n- \u9078\u64c7 **\u90e8\u7f72\u548c\u6e2c\u8a66** \u6a19\u7c64\u9801\u67e5\u770b\u53ef\u7528\u7684\u5c0e\u51fa\u683c\u5f0f\u3002\n- \u5728 **Use your edge-optimized model** \u90e8\u5206\u9078\u64c7\u6240\u9700\u7684\u5c0e\u51fa\u6a21\u578b\u683c\u5f0f\u3002\n- \u5728 **\u5c0e\u51fa\u6a21\u578b** \u5074\u908a\u7a97\u53e3\u4e2d\uff0c\u6307\u5b9a Cloud Storage \u4e2d\u5b58\u5132 Edge \u6a21\u578b\u5c0e\u51fa\u8f38\u51fa\u7684\u4f4d\u7f6e\u3002\n- \u9ede\u64ca **\u5c0e\u51fa** \u3002\n- \u9ede\u64ca **\u5b8c\u6210** \u95dc\u9589 **\u5c0e\u51fa\u6a21\u578b** \u5074\u908a\u7a97\u53e3\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a\u60a8\u7684\u9805\u76ee\u7684\u4f4d\u7f6e\u3002\n- \uff1a\u60a8\u7684 [\u9805\u76ee ID](https://cloud.google.com/resource-manager/docs/creating-managing-projects?hl=zh-cn#identifiers) \u3002\n- \uff1a\u8981\u5c0e\u51fa\u7684\u7d93\u904e\u8a13\u7df4\u7684 AutoML Edge \u6a21\u578b\u7684 ID \u7de8\u865f\u3002\n- \uff1a\u8981\u5c0e\u51fa\u7684 Edge \u6a21\u578b\u7684\u985e\u578b\u3002\u5c0d\u65bc\u6b64\u76ee\u6a19\uff0c\u9078\u9805\u5305\u62ec\uff1a- `tflite`(TF Lite) - \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TF Lite \u8edf\u4ef6\u5305\uff0c\u4ee5\u5728\u908a\u7de3\u6216\u79fb\u52d5\u8a2d\u5099\u4e0a\u904b\u884c\u6a21\u578b\u3002\n- `tf-saved-model`\uff08\u5bb9\u5668\uff09- \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TF \u4fdd\u5b58\u7684\u6a21\u578b\u4ee5\u5728 Docker \u5bb9\u5668\u4e0a\u904b\u884c\u3002\n- `tf-js`(Tensorflow.js) - \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TensorFlow.js \u8edf\u4ef6\u5305\uff0c\u4ee5\u5728\u700f\u89bd\u5668\u548c Node.js \u4e2d\u904b\u884c\u6a21\u578b\u3002\n- \uff1a\u8981\u5b58\u5132 Edge \u6a21\u578b\u6587\u4ef6\u7684 Cloud Storage \u5b58\u5132\u6876\u76ee\u9304\u7684\u8def\u5f91\u3002\n- HTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nPOST https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT/locations/LOCATION/models/MODEL_ID:export\n```- \u8acb\u6c42 JSON \u6b63\u6587\uff1a\n```\n{\n \"outputConfig\": {\n \"exportFormatId\": \"EXPORT_FORMAT\",\n \"artifactDestination\": {\n  \"outputUriPrefix\": \"gs://OUTPUT_BUCKET/\"\n }\n }\n}\n```- \u5982\u9700\u767c\u9001\u8acb\u6c42\uff0c\u8acb\u9078\u64c7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\uff1a **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT/locations/LOCATION/models/MODEL_ID:export\"\n``` **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT/locations/LOCATION/models/MODEL_ID:export\" | Select-Object -Expand Content\n```\n- \u97ff\u61c9\u5305\u542b\u6709\u95dc\u898f\u7bc4\u7684\u4fe1\u606f\u4ee5\u53ca \u3002\n- \u60a8\u53ef\u4ee5 [\u7372\u53d6\u5c0e\u51fa\u64cd\u4f5c\u72c0\u614b](#get-oper) \uff0c\u4ee5\u77ad\u89e3\u5c0e\u51fa\u64cd\u4f5c\u5b8c\u6210\u7684\u6642\u9593\u3002\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300aVertex AI \u5feb\u901f\u5165\u9580\uff1a\u4f7f\u7528\u5ba2\u6236\u7aef\u5eab\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Java \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Vertex AI Java API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/java/docs/reference/google-cloud-aiplatform/latest/com.google.cloud.aiplatform.v1?hl=zh-cn) \u3002\n\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n [\u5728\u7de8\u8f2f\u5668\u4e2d\u6253\u958b](https://ide.cloud.google.com/?git_repo=https%3A%2F%2Fgithub.com%2FGoogleCloudPlatform%2Fjava-docs-samples&page=editor&cloudshell_workspace=aiplatform%2Fsrc%2Fmain%2Fjava%2Faiplatform&cloudshell_open_in_editor=ExportModelSample.java&hl=zh-cn) [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/java-docs-samples/blob/HEAD/aiplatform/src/main/java/aiplatform/ExportModelSample.java) \n```\nimport com.google.api.gax.longrunning.OperationFuture;import com.google.cloud.aiplatform.v1.ExportModelOperationMetadata;import com.google.cloud.aiplatform.v1.ExportModelRequest;import com.google.cloud.aiplatform.v1.ExportModelResponse;import com.google.cloud.aiplatform.v1.GcsDestination;import com.google.cloud.aiplatform.v1.ModelName;import com.google.cloud.aiplatform.v1.ModelServiceClient;import com.google.cloud.aiplatform.v1.ModelServiceSettings;import java.io.IOException;import java.util.concurrent.ExecutionException;import java.util.concurrent.TimeUnit;import java.util.concurrent.TimeoutException;public class ExportModelSample {\u00a0 public static void main(String[] args)\u00a0 \u00a0 \u00a0 throws IOException, InterruptedException, ExecutionException, TimeoutException {\u00a0 \u00a0 // TODO(developer): Replace these variables before running the sample.\u00a0 \u00a0 String project = \"YOUR_PROJECT_ID\";\u00a0 \u00a0 String modelId = \"YOUR_MODEL_ID\";\u00a0 \u00a0 String gcsDestinationOutputUriPrefix = \"gs://YOUR_GCS_SOURCE_BUCKET/path_to_your_destination/\";\u00a0 \u00a0 String exportFormat = \"YOUR_EXPORT_FORMAT\";\u00a0 \u00a0 exportModelSample(project, modelId, gcsDestinationOutputUriPrefix, exportFormat);\u00a0 }\u00a0 static void exportModelSample(\u00a0 \u00a0 \u00a0 String project, String modelId, String gcsDestinationOutputUriPrefix, String exportFormat)\u00a0 \u00a0 \u00a0 throws IOException, InterruptedException, ExecutionException, TimeoutException {\u00a0 \u00a0 ModelServiceSettings modelServiceSettings =\u00a0 \u00a0 \u00a0 \u00a0 ModelServiceSettings.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setEndpoint(\"us-central1-aiplatform.googleapis.com:443\")\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 // Initialize client that will be used to send requests. This client only needs to be created\u00a0 \u00a0 // once, and can be reused for multiple requests. After completing all of your requests, call\u00a0 \u00a0 // the \"close\" method on the client to safely clean up any remaining background resources.\u00a0 \u00a0 try (ModelServiceClient modelServiceClient = ModelServiceClient.create(modelServiceSettings)) {\u00a0 \u00a0 \u00a0 String location = \"us-central1\";\u00a0 \u00a0 \u00a0 GcsDestination.Builder gcsDestination = GcsDestination.newBuilder();\u00a0 \u00a0 \u00a0 gcsDestination.setOutputUriPrefix(gcsDestinationOutputUriPrefix);\u00a0 \u00a0 \u00a0 ModelName modelName = ModelName.of(project, location, modelId);\u00a0 \u00a0 \u00a0 ExportModelRequest.OutputConfig outputConfig =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ExportModelRequest.OutputConfig.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setExportFormatId(exportFormat)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setArtifactDestination(gcsDestination)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 \u00a0 OperationFuture<ExportModelResponse, ExportModelOperationMetadata> exportModelResponseFuture =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 modelServiceClient.exportModelAsync(modelName, outputConfig);\u00a0 \u00a0 \u00a0 System.out.format(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"Operation name: %s\\n\", exportModelResponseFuture.getInitialFuture().get().getName());\u00a0 \u00a0 \u00a0 System.out.println(\"Waiting for operation to finish...\");\u00a0 \u00a0 \u00a0 ExportModelResponse exportModelResponse =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 exportModelResponseFuture.get(300, TimeUnit.SECONDS);\u00a0 \u00a0 \u00a0 System.out.format(\"Export Model Response: %s\\n\", exportModelResponse);\u00a0 \u00a0 }\u00a0 }}\n```\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300aVertex AI \u5feb\u901f\u5165\u9580\uff1a\u4f7f\u7528\u5ba2\u6236\u7aef\u5eab\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Node.js \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Vertex AI Node.js API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/nodejs/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/nodejs-docs-samples/blob/HEAD/ai-platform/snippets/export-model.js) \n```\n/**\u00a0* TODO(developer): Uncomment these variables before running the sample.\\\u00a0 \u00a0(Not necessary if passing values as arguments)\u00a0*/// const modelId = 'YOUR_MODEL_ID';// const gcsDestinationOutputUriPrefix ='YOUR_GCS_DEST_OUTPUT_URI_PREFIX';// \u00a0 \u00a0eg. \"gs://<your-gcs-bucket>/destination_path\"// const exportFormat = 'YOUR_EXPORT_FORMAT';// const project = 'YOUR_PROJECT_ID';// const location = 'YOUR_PROJECT_LOCATION';// Imports the Google Cloud Model Service Client libraryconst {ModelServiceClient} = require('@google-cloud/aiplatform');// Specifies the location of the api endpointconst clientOptions = {\u00a0 apiEndpoint: 'us-central1-aiplatform.googleapis.com',};// Instantiates a clientconst modelServiceClient = new ModelServiceClient(clientOptions);async function exportModel() {\u00a0 // Configure the name resources\u00a0 const name = `projects/${project}/locations/${location}/models/${modelId}`;\u00a0 // Configure the outputConfig resources\u00a0 const outputConfig = {\u00a0 \u00a0 exportFormatId: exportFormat,\u00a0 \u00a0 gcsDestination: {\u00a0 \u00a0 \u00a0 outputUriPrefix: gcsDestinationOutputUriPrefix,\u00a0 \u00a0 },\u00a0 };\u00a0 const request = {\u00a0 \u00a0 name,\u00a0 \u00a0 outputConfig,\u00a0 };\u00a0 // Export Model request\u00a0 const [response] = await modelServiceClient.exportModel(request);\u00a0 console.log(`Long running operation : ${response.name}`);\u00a0 // Wait for operation to complete\u00a0 await response.promise();\u00a0 const result = response.result;\u00a0 console.log(`Export model response : ${JSON.stringify(result)}`);}exportModel();\n```\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u6216\u66f4\u65b0 Python\uff0c\u8acb\u53c3\u95b1 [\u5b89\u88dd Python \u7248 Vertex AI SDK](https://cloud.google.com/vertex-ai/docs/start/use-vertex-ai-python-sdk?hl=zh-cn) \u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [   Python API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/python/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n [\u5728\u7de8\u8f2f\u5668\u4e2d\u6253\u958b](https://ide.cloud.google.com/?git_repo=https%3A%2F%2Fgithub.com%2Fgoogleapis%2Fpython-aiplatform&page=editor&cloudshell_workspace=samples%2Fsnippets%2Fmodel_service&cloudshell_open_in_editor=export_model_sample.py&hl=zh-cn) [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/googleapis/python-aiplatform/blob/HEAD/samples/snippets/model_service/export_model_sample.py) \n```\nfrom google.cloud import aiplatformdef export_model_sample(\u00a0 \u00a0 project: str,\u00a0 \u00a0 model_id: str,\u00a0 \u00a0 gcs_destination_output_uri_prefix: str,\u00a0 \u00a0 location: str = \"us-central1\",\u00a0 \u00a0 api_endpoint: str = \"us-central1-aiplatform.googleapis.com\",\u00a0 \u00a0 timeout: int = 300,):\u00a0 \u00a0 # The AI Platform services require regional API endpoints.\u00a0 \u00a0 client_options = {\"api_endpoint\": api_endpoint}\u00a0 \u00a0 # Initialize client that will be used to create and send requests.\u00a0 \u00a0 # This client only needs to be created once, and can be reused for multiple requests.\u00a0 \u00a0 client = aiplatform.gapic.ModelServiceClient(client_options=client_options)\u00a0 \u00a0 output_config = {\u00a0 \u00a0 \u00a0 \u00a0 \"artifact_destination\": {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"output_uri_prefix\": gcs_destination_output_uri_prefix\u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 # For information about export formats: https://cloud.google.com/ai-platform-unified/docs/export/export-edge-model#aiplatform_export_model_sample-drest\u00a0 \u00a0 \u00a0 \u00a0 \"export_format_id\": \"tf-saved-model\",\u00a0 \u00a0 }\u00a0 \u00a0 name = client.model_path(project=project, location=location, model=model_id)\u00a0 \u00a0 response = client.export_model(name=name, output_config=output_config)\u00a0 \u00a0 print(\"Long running operation:\", response.operation.name)\u00a0 \u00a0 print(\"output_info:\", response.metadata.output_info)\u00a0 \u00a0 export_model_response = response.result(timeout=timeout)\u00a0 \u00a0 print(\"export_model_response:\", export_model_response)\n```\u5728\u4e0b\u9762\u9078\u64c7\u60a8\u7684\u76ee\u6a19\u5c0d\u61c9\u7684\u6a19\u7c64\u9801\uff1a\u7d93\u904e\u8a13\u7df4\u7684 AutoML Edge \u52d5\u4f5c\u8b58\u5225\u6a21\u578b\u53ef\u4ee5\u6309\u4fdd\u5b58\u6a21\u578b\u683c\u5f0f\u5c0e\u51fa\uff1a\n\u5728\u4e0b\u9762\u9078\u64c7\u60a8\u7684\u8a9e\u8a00\u6216\u74b0\u5883\u5c0d\u61c9\u7684\u6a19\u7c64\u9801\uff1a\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u7684 Vertex AI \u90e8\u5206\u4e2d\uff0c\u524d\u5f80 **\u6a21\u578b** \u9801\u9762\u3002 [\u6253\u958b\u201c\u6a21\u578b\u201d\u9801\u9762](https://console.cloud.google.com/vertex-ai/models?hl=zh-cn) \n- \u9ede\u64ca\u8981\u5c0e\u51fa\u7684 AutoML Edge \u6a21\u578b\u7684\u7248\u672c\u865f\uff0c\u4ee5\u6253\u958b\u5176\u8a73\u60c5\u9801\u9762\u3002\n- \u9ede\u64ca **\u5c0e\u51fa** \u3002\n- \u5728 **\u5c0e\u51fa\u6a21\u578b** \u5074\u908a\u7a97\u53e3\u4e2d\uff0c\u6307\u5b9a Cloud Storage \u4e2d\u5b58\u5132 Edge \u6a21\u578b\u5c0e\u51fa\u8f38\u51fa\u7684\u4f4d\u7f6e\u3002\n- \u9ede\u64ca **\u5c0e\u51fa** \u3002\n- \u9ede\u64ca **\u5b8c\u6210** \u95dc\u9589 **\u5c0e\u51fa\u6a21\u578b** \u5074\u908a\u7a97\u53e3\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a\u5b58\u5132\u6a21\u578b\u7684\u5340\u57df\u3002\u4f8b\u5982`us-central1`\u3002\n- \uff1a\u8981\u5c0e\u51fa\u7684\u7d93\u904e\u8a13\u7df4\u7684 AutoML Edge \u6a21\u578b\u7684 ID \u7de8\u865f\u3002\n- \uff1a\u8981\u5c0e\u51fa\u7684 Edge \u6a21\u578b\u7684\u985e\u578b\u3002\u5c0d\u65bc\u8996\u983b\u52d5\u4f5c\u8b58\u5225\uff0c\u6a21\u578b\u9078\u9805\u7232\uff1a- `tf-saved-model`\uff08\u5bb9\u5668\uff09- \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TF \u4fdd\u5b58\u7684\u6a21\u578b\u4ee5\u5728 Docker \u5bb9\u5668\u4e0a\u904b\u884c\u3002\n- \uff1a\u8981\u5b58\u5132 Edge \u6a21\u578b\u6587\u4ef6\u7684 Cloud Storage \u5b58\u5132\u6876\u76ee\u9304\u7684\u8def\u5f91\u3002\n- \uff1a\u81ea\u52d5\u751f\u6210\u7684 [\u9805\u76ee\u7de8\u865f](https://cloud.google.com/resource-manager/docs/creating-managing-projects?hl=zh-cn#identifiers) \u3002\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nPOST https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_NUMBER/locations/LOCATION/models/MODEL_ID:export\n```\n\u8acb\u6c42 JSON \u6b63\u6587\uff1a\n```\n{\n \"outputConfig\": {\n \"exportFormatId\": \"EXPORT_FORMAT\",\n \"artifactDestination\": {\n \"outputUriPrefix\": \"gs://OUTPUT_BUCKET/\"\n }\n }\n}\n```\n\u5982\u9700\u767c\u9001\u8acb\u6c42\uff0c\u8acb\u9078\u64c7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\uff1a\n **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_NUMBER/locations/LOCATION/models/MODEL_ID:export\"\n``` **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_NUMBER/locations/LOCATION/models/MODEL_ID:export\" | Select-Object -Expand Content\n```\n\u97ff\u61c9\u5305\u542b\u6709\u95dc\u898f\u7bc4\u7684\u4fe1\u606f\u4ee5\u53ca \u3002\u60a8\u53ef\u4ee5 [\u7372\u53d6\u5c0e\u51fa\u64cd\u4f5c\u72c0\u614b](#get-oper) \uff0c\u4ee5\u77ad\u89e3\u5c0e\u51fa\u64cd\u4f5c\u5b8c\u6210\u7684\u6642\u9593\u3002\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300aVertex AI \u5feb\u901f\u5165\u9580\uff1a\u4f7f\u7528\u5ba2\u6236\u7aef\u5eab\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Java \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Vertex AI Java API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/java/docs/reference/google-cloud-aiplatform/latest/com.google.cloud.aiplatform.v1?hl=zh-cn) \u3002\n\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/java-docs-samples/blob/HEAD/aiplatform/src/main/java/aiplatform/ExportModelVideoActionRecognitionSample.java) \n```\nimport com.google.api.gax.longrunning.OperationFuture;import com.google.cloud.aiplatform.v1.ExportModelOperationMetadata;import com.google.cloud.aiplatform.v1.ExportModelRequest;import com.google.cloud.aiplatform.v1.ExportModelResponse;import com.google.cloud.aiplatform.v1.GcsDestination;import com.google.cloud.aiplatform.v1.ModelName;import com.google.cloud.aiplatform.v1.ModelServiceClient;import com.google.cloud.aiplatform.v1.ModelServiceSettings;import java.io.IOException;import java.util.concurrent.ExecutionException;public class ExportModelVideoActionRecognitionSample {\u00a0 public static void main(String[] args)\u00a0 \u00a0 \u00a0 throws IOException, ExecutionException, InterruptedException {\u00a0 \u00a0 // TODO(developer): Replace these variables before running the sample.\u00a0 \u00a0 String project = \"PROJECT\";\u00a0 \u00a0 String modelId = \"MODEL_ID\";\u00a0 \u00a0 String gcsDestinationOutputUriPrefix = \"GCS_DESTINATION_OUTPUT_URI_PREFIX\";\u00a0 \u00a0 String exportFormat = \"EXPORT_FORMAT\";\u00a0 \u00a0 exportModelVideoActionRecognitionSample(\u00a0 \u00a0 \u00a0 \u00a0 project, modelId, gcsDestinationOutputUriPrefix, exportFormat);\u00a0 }\u00a0 static void exportModelVideoActionRecognitionSample(\u00a0 \u00a0 \u00a0 String project, String modelId, String gcsDestinationOutputUriPrefix, String exportFormat)\u00a0 \u00a0 \u00a0 throws IOException, ExecutionException, InterruptedException {\u00a0 \u00a0 ModelServiceSettings settings =\u00a0 \u00a0 \u00a0 \u00a0 ModelServiceSettings.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setEndpoint(\"us-central1-aiplatform.googleapis.com:443\")\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 String location = \"us-central1\";\u00a0 \u00a0 // Initialize client that will be used to send requests. This client only needs to be created\u00a0 \u00a0 // once, and can be reused for multiple requests. After completing all of your requests, call\u00a0 \u00a0 // the \"close\" method on the client to safely clean up any remaining background resources.\u00a0 \u00a0 try (ModelServiceClient client = ModelServiceClient.create(settings)) {\u00a0 \u00a0 \u00a0 GcsDestination gcsDestination =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 GcsDestination.newBuilder().setOutputUriPrefix(gcsDestinationOutputUriPrefix).build();\u00a0 \u00a0 \u00a0 ExportModelRequest.OutputConfig outputConfig =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ExportModelRequest.OutputConfig.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setArtifactDestination(gcsDestination)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setExportFormatId(exportFormat)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 \u00a0 ModelName name = ModelName.of(project, location, modelId);\u00a0 \u00a0 \u00a0 OperationFuture<ExportModelResponse, ExportModelOperationMetadata> response =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 client.exportModelAsync(name, outputConfig);\u00a0 \u00a0 \u00a0 // You can use OperationFuture.getInitialFuture to get a future representing the initial\u00a0 \u00a0 \u00a0 // response to the request, which contains information while the operation is in progress.\u00a0 \u00a0 \u00a0 System.out.format(\"Operation name: %s\\n\", response.getInitialFuture().get().getName());\u00a0 \u00a0 \u00a0 // OperationFuture.get() will block until the operation is finished.\u00a0 \u00a0 \u00a0 ExportModelResponse exportModelResponse = response.get();\u00a0 \u00a0 \u00a0 System.out.format(\"exportModelResponse: %s\\n\", exportModelResponse);\u00a0 \u00a0 }\u00a0 }}\n```\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u6216\u66f4\u65b0 Python\uff0c\u8acb\u53c3\u95b1 [\u5b89\u88dd Python \u7248 Vertex AI SDK](https://cloud.google.com/vertex-ai/docs/start/use-vertex-ai-python-sdk?hl=zh-cn) \u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [   Python API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/python/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/googleapis/python-aiplatform/blob/HEAD/samples/snippets/model_service/export_model_video_action_recognition_sample.py) \n```\nfrom google.cloud import aiplatformdef export_model_video_action_recognition_sample(\u00a0 \u00a0 project: str,\u00a0 \u00a0 model_id: str,\u00a0 \u00a0 gcs_destination_output_uri_prefix: str,\u00a0 \u00a0 export_format: str,\u00a0 \u00a0 location: str = \"us-central1\",\u00a0 \u00a0 api_endpoint: str = \"us-central1-aiplatform.googleapis.com\",\u00a0 \u00a0 timeout: int = 300,):\u00a0 \u00a0 # The AI Platform services require regional API endpoints.\u00a0 \u00a0 client_options = {\"api_endpoint\": api_endpoint}\u00a0 \u00a0 # Initialize client that will be used to create and send requests.\u00a0 \u00a0 # This client only needs to be created once, and can be reused for multiple requests.\u00a0 \u00a0 client = aiplatform.gapic.ModelServiceClient(client_options=client_options)\u00a0 \u00a0 gcs_destination = {\"output_uri_prefix\": gcs_destination_output_uri_prefix}\u00a0 \u00a0 output_config = {\u00a0 \u00a0 \u00a0 \u00a0 \"artifact_destination\": gcs_destination,\u00a0 \u00a0 \u00a0 \u00a0 \"export_format_id\": export_format,\u00a0 \u00a0 }\u00a0 \u00a0 name = client.model_path(project=project, location=location, model=model_id)\u00a0 \u00a0 response = client.export_model(name=name, output_config=output_config)\u00a0 \u00a0 print(\"Long running operation:\", response.operation.name)\u00a0 \u00a0 print(\"output_info:\", response.metadata.output_info)\u00a0 \u00a0 export_model_response = response.result(timeout=timeout)\u00a0 \u00a0 print(\"export_model_response:\", export_model_response)\n```\n\u7d93\u904e\u8a13\u7df4\u7684 AutoML Edge \u8996\u983b\u5206\u985e\u6a21\u578b\u53ea\u80fd\u4ee5\u4fdd\u5b58\u6a21\u578b\u683c\u5f0f\u5c0e\u51fa\u3002\n\u5728\u4e0b\u9762\u9078\u64c7\u60a8\u7684\u8a9e\u8a00\u6216\u74b0\u5883\u5c0d\u61c9\u7684\u6a19\u7c64\u9801\uff1a\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u7684 Vertex AI \u90e8\u5206\u4e2d\uff0c\u524d\u5f80 **\u6a21\u578b** \u9801\u9762\u3002 [\u6253\u958b\u201c\u6a21\u578b\u201d\u9801\u9762](https://console.cloud.google.com/vertex-ai/models?hl=zh-cn) \n- \u9ede\u64ca\u8981\u5c0e\u51fa\u7684 AutoML Edge \u6a21\u578b\u7684\u7248\u672c\u865f\uff0c\u4ee5\u6253\u958b\u5176\u8a73\u60c5\u9801\u9762\u3002\n- \u9ede\u64ca **\u5c0e\u51fa** \u3002\n- \u5728 **\u5c0e\u51fa\u6a21\u578b** \u5074\u908a\u7a97\u53e3\u4e2d\uff0c\u6307\u5b9a Cloud Storage \u4e2d\u5b58\u5132 Edge \u6a21\u578b\u5c0e\u51fa\u8f38\u51fa\u7684\u4f4d\u7f6e\u3002\n- \u9ede\u64ca **\u5c0e\u51fa** \u3002\n- \u9ede\u64ca **\u5b8c\u6210** \u95dc\u9589 **\u5c0e\u51fa\u6a21\u578b** \u5074\u908a\u7a97\u53e3\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a\u5b58\u5132\u6a21\u578b\u7684\u5340\u57df\u3002\u4f8b\u5982`us-central1`\u3002\n- \uff1a\u8981\u5c0e\u51fa\u7684\u7d93\u904e\u8a13\u7df4\u7684 AutoML Edge \u6a21\u578b\u7684 ID \u7de8\u865f\u3002\n- \uff1a\u8981\u5c0e\u51fa\u7684 Edge \u6a21\u578b\u7684\u985e\u578b\u3002\u5c0d\u65bc\u8996\u983b\u5206\u985e\uff0c\u6a21\u578b\u9078\u9805\u7232\uff1a- `tf-saved-model`\uff08\u5bb9\u5668\uff09- \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TF \u4fdd\u5b58\u7684\u6a21\u578b\u4ee5\u5728 Docker \u5bb9\u5668\u4e0a\u904b\u884c\u3002\n- \uff1a\u8981\u5b58\u5132 Edge \u6a21\u578b\u6587\u4ef6\u7684 Cloud Storage \u5b58\u5132\u6876\u76ee\u9304\u7684\u8def\u5f91\u3002\n- \uff1a\u81ea\u52d5\u751f\u6210\u7684 [\u9805\u76ee\u7de8\u865f](https://cloud.google.com/resource-manager/docs/creating-managing-projects?hl=zh-cn#identifiers) \u3002\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nPOST https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_NUMBER/locations/LOCATION/models/MODEL_ID:export\n```\n\u8acb\u6c42 JSON \u6b63\u6587\uff1a\n```\n{\n \"outputConfig\": {\n \"exportFormatId\": \"EXPORT_FORMAT\",\n \"artifactDestination\": {\n \"outputUriPrefix\": \"gs://OUTPUT_BUCKET/\"\n }\n }\n}\n```\n\u5982\u9700\u767c\u9001\u8acb\u6c42\uff0c\u8acb\u9078\u64c7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\uff1a\n **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_NUMBER/locations/LOCATION/models/MODEL_ID:export\"\n``` **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_NUMBER/locations/LOCATION/models/MODEL_ID:export\" | Select-Object -Expand Content\n```\n\u97ff\u61c9\u5305\u542b\u6709\u95dc\u898f\u7bc4\u7684\u4fe1\u606f\u4ee5\u53ca \u3002\n```\n{\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION/models/MODEL_ID/operations/OPERATION_ID\",\n \"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.aiplatform.v1.ExportModelOperationMetadata\",\n \"genericMetadata\": {\n  \"createTime\": \"2020-10-12T20:53:40.130785Z\",\n  \"updateTime\": \"2020-10-12T20:53:40.130785Z\"\n },\n \"outputInfo\": {\n  \"artifactOutputUri\": \"gs://OUTPUT_BUCKET/model-MODEL_ID/EXPORT_FORMAT/YYYY-MM-DDThh:mm:ss.sssZ\"\n }\n }\n}\n```\n\u60a8\u53ef\u4ee5 [\u7372\u53d6\u5c0e\u51fa\u64cd\u4f5c\u72c0\u614b](#get-oper) \uff0c\u4ee5\u77ad\u89e3\u5c0e\u51fa\u64cd\u4f5c\u5b8c\u6210\u7684\u6642\u9593\u3002\n\u7d93\u904e\u8a13\u7df4\u7684 AutoML Edge \u8996\u983b\u5c0d\u8c61\u8ddf\u8e64\u6a21\u578b\u53ef\u4ee5\u6309\u4ee5\u4e0b\u683c\u5f0f\u5c0e\u51fa\uff1a- **TF Lite** - \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TensorFlow Lite \u8edf\u4ef6\u5305\uff0c\u4ee5\u5728\u908a\u7de3\u6216\u79fb\u52d5\u8a2d\u5099\u4e0a\u904b\u884c\u6a21\u578b\u3002\n- **\u5bb9\u5668** - \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TensorFlow \u4fdd\u5b58\u6a21\u578b\u4ee5\u5728 Docker \u5bb9\u5668\u4e0a\u904b\u884c\u3002\n\u5728\u4e0b\u9762\u9078\u64c7\u60a8\u7684\u8a9e\u8a00\u6216\u74b0\u5883\u5c0d\u61c9\u7684\u6a19\u7c64\u9801\uff1a\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u7684 Vertex AI \u90e8\u5206\u4e2d\uff0c\u524d\u5f80 **\u6a21\u578b** \u9801\u9762\u3002 [\u6253\u958b\u201c\u6a21\u578b\u201d\u9801\u9762](https://console.cloud.google.com/vertex-ai/models?hl=zh-cn) \n- \u9ede\u64ca\u8981\u5c0e\u51fa\u7684 AutoML Edge \u6a21\u578b\u7684\u7248\u672c\u865f\uff0c\u4ee5\u6253\u958b\u5176\u8a73\u60c5\u9801\u9762\u3002\n- \u9ede\u64ca **\u5c0e\u51fa** \u3002\n- \u5728 **\u5c0e\u51fa\u6a21\u578b** \u5074\u908a\u7a97\u53e3\u4e2d\uff0c\u6307\u5b9a Cloud Storage \u4e2d\u5b58\u5132 Edge \u6a21\u578b\u5c0e\u51fa\u8f38\u51fa\u7684\u4f4d\u7f6e\u3002\n- \u9ede\u64ca **\u5c0e\u51fa** \u3002\n- \u9ede\u64ca **\u5b8c\u6210** \u95dc\u9589 **\u5c0e\u51fa\u6a21\u578b** \u5074\u908a\u7a97\u53e3\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a\u5b58\u5132\u6a21\u578b\u7684\u5340\u57df\u3002\u4f8b\u5982`us-central1`\u3002\n- \uff1a\u8981\u5c0e\u51fa\u7684\u7d93\u904e\u8a13\u7df4\u7684 AutoML Edge \u6a21\u578b\u7684 ID \u7de8\u865f\u3002\n- \uff1a\u8981\u5c0e\u51fa\u7684 Edge \u6a21\u578b\u7684\u985e\u578b\u3002\u5c0d\u65bc\u8996\u983b\u5c0d\u8c61\u8ddf\u8e64\u6a21\u578b\uff0c\u9078\u9805\u5305\u62ec\uff1a- `tflite`(TF Lite) - \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TF Lite \u8edf\u4ef6\u5305\uff0c\u4ee5\u5728\u908a\u7de3\u6216\u79fb\u52d5\u8a2d\u5099\u4e0a\u904b\u884c\u6a21\u578b\u3002\n- `edgetpu-tflite`(Edge TPU TF Lite) - \u6a21\u578b\u5c0e\u51fa\u7232 TF Lite \u8edf\u4ef6\u5305\uff0c\u4ee5\u5728 Edge TPU \u8a2d\u5099\u4e0a\u904b\u884c\u6a21\u578b\u3002\n- `tf-saved-model`\uff08\u5bb9\u5668\uff09- \u5c07\u6a21\u578b\u5c0e\u51fa\u7232 TF \u4fdd\u5b58\u7684\u6a21\u578b\u4ee5\u5728 Docker \u5bb9\u5668\u4e0a\u904b\u884c\u3002\n- \uff1a\u8981\u5b58\u5132 Edge \u6a21\u578b\u6587\u4ef6\u7684 Cloud Storage \u5b58\u5132\u6876\u76ee\u9304\u7684\u8def\u5f91\u3002\n- \uff1a\u81ea\u52d5\u751f\u6210\u7684 [\u9805\u76ee\u7de8\u865f](https://cloud.google.com/resource-manager/docs/creating-managing-projects?hl=zh-cn#identifiers) \u3002\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nPOST https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_NUMBER/locations/LOCATION/models/MODEL_ID:export\n```\n\u8acb\u6c42 JSON \u6b63\u6587\uff1a\n```\n{\n \"outputConfig\": {\n \"exportFormatId\": \"EXPORT_FORMAT\",\n \"artifactDestination\": {\n \"outputUriPrefix\": \"gs://OUTPUT_BUCKET/\"\n }\n }\n}\n```\n\u5982\u9700\u767c\u9001\u8acb\u6c42\uff0c\u8acb\u9078\u64c7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\uff1a\n **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_NUMBER/locations/LOCATION/models/MODEL_ID:export\"\n``` **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_NUMBER/locations/LOCATION/models/MODEL_ID:export\" | Select-Object -Expand Content\n```\n\u97ff\u61c9\u5305\u542b\u6709\u95dc\u898f\u7bc4\u7684\u4fe1\u606f\u4ee5\u53ca \u3002\n```\n{\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION/models/MODEL_ID/operations/OPERATION_ID\",\n \"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.aiplatform.v1.ExportModelOperationMetadata\",\n \"genericMetadata\": {\n  \"createTime\": \"2020-10-12T20:53:40.130785Z\",\n  \"updateTime\": \"2020-10-12T20:53:40.130785Z\"\n },\n \"outputInfo\": {\n  \"artifactOutputUri\": \"gs://OUTPUT_BUCKET/model-MODEL_ID/EXPORT_FORMAT/YYYY-MM-DDThh:mm:ss.sssZ\"\n }\n }\n}\n```\n\u60a8\u53ef\u4ee5 [\u7372\u53d6\u5c0e\u51fa\u64cd\u4f5c\u72c0\u614b](#get-oper) \uff0c\u4ee5\u77ad\u89e3\u5c0e\u51fa\u64cd\u4f5c\u5b8c\u6210\u7684\u6642\u9593\u3002\n## \u7372\u53d6\u64cd\u4f5c\u72c0\u614b\n\u4f7f\u7528\u4ee5\u4e0b\u4ee3\u78bc\u7372\u53d6\u5c0e\u51fa\u64cd\u4f5c\u7684\u72c0\u614b\u3002\u6b64\u4ee3\u78bc\u5c0d\u65bc\u6240\u6709\u76ee\u6a19\u5747\u76f8\u540c\uff1a\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a\u60a8\u7684\u9805\u76ee\u7684\u4f4d\u7f6e\u3002\n- \uff1a\u60a8\u7684 [\u9805\u76ee ID](https://cloud.google.com/resource-manager/docs/creating-managing-projects?hl=zh-cn#identifiers) \u3002\n- \uff1a\u76ee\u6a19\u64cd\u4f5c\u7684 ID\u3002\u6b64 ID \u901a\u5e38\u5305\u542b\u5728\u539f\u59cb\u8acb\u6c42\u7684\u97ff\u61c9\u4e2d\u3002\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nGET https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT/locations/LOCATION/operations/OPERATION_ID\n```\n\u5982\u9700\u767c\u9001\u8acb\u6c42\uff0c\u8acb\u9078\u64c7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\uff1a\n **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl -X GET \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT/locations/LOCATION/operations/OPERATION_ID\"\n``` **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method GET ` -Headers $headers ` -Uri \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT/locations/LOCATION/operations/OPERATION_ID\" | Select-Object -Expand Content\n```\u64cd\u4f5c\u5b8c\u6210\u5f8c\uff0c\u60a8\u61c9\u8a72\u6703\u770b\u5230\u985e\u4f3c\u5982\u4e0b\u6240\u793a\u7684\u8f38\u51fa\uff1a\n```\n{\n \"name\": \"projects/PROJECT/locations/LOCATION/models/MODEL_ID/operations/OPERATION_ID\",\n \"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.aiplatform.v1.ExportModelOperationMetadata\",\n \"genericMetadata\": {\n  \"createTime\": \"2020-10-12T20:53:40.130785Z\",\n  \"updateTime\": \"2020-10-12T20:53:40.793983Z\"\n },\n \"outputInfo\": {\n  \"artifactOutputUri\": \"gs://OUTPUT_BUCKET/model-MODEL_ID/EXPORT_FORMAT/YYYY-MM-DDThh:mm:ss.sssZ\"\n }\n },\n \"done\": true,\n \"response\": {\n \"@type\": \"type.googleapis.com/google.cloud.aiplatform.v1.ExportModelResponse\"\n }\n}\n```\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a\u81ea\u52d5\u751f\u6210\u7684 [\u9805\u76ee\u7de8\u865f](https://cloud.google.com/resource-manager/docs/creating-managing-projects?hl=zh-cn#identifiers) \u3002\n- \uff1a\u5b58\u5132\u6a21\u578b\u7684\u5340\u57df\u3002\u4f8b\u5982`us-central1`\u3002\n- \uff1a\u60a8\u7684\u64cd\u4f5c\u7684 ID\u3002\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nGET https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT/locations/LOCATION/operations/OPERATION_ID\n```\n\u5982\u9700\u767c\u9001\u8acb\u6c42\uff0c\u8acb\u9078\u64c7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\uff1a\n **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl -X GET \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT/locations/LOCATION/operations/OPERATION_ID\"\n``` **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method GET ` -Headers $headers ` -Uri \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT/locations/LOCATION/operations/OPERATION_ID\" | Select-Object -Expand Content\n```\n\u60a8\u61c9\u8a72\u6536\u5230\u985e\u4f3c\u4ee5\u4e0b\u5167\u5bb9\u7684 JSON \u97ff\u61c9\uff1a\n## \u8f38\u51fa\u6587\u4ef6\n\u5728\u4e0b\u9762\u9078\u64c7\u60a8\u7684\u6a21\u578b\u683c\u5f0f\u5c0d\u61c9\u7684\u6a19\u7c64\u9801\uff1a\n\u60a8\u5728\u8acb\u6c42\u4e2d\u6307\u5b9a\u7684 `OUTPUT_BUCKET` \u6c7a\u5b9a\u4e86\u8f38\u51fa\u6587\u4ef6\u7684\u5b58\u5132\u4f4d\u7f6e\u3002\u5b58\u5132\u8f38\u51fa\u6587\u4ef6\u7684\u76ee\u9304\u63a1\u7528\u4ee5\u4e0b\u683c\u5f0f\uff1a- gs:///model-/ **tflite** //\n **\u6587\u4ef6** \uff1a- `model.tflite`\uff1a\u5305\u542b\u53ef\u7acb\u5373\u7528\u65bc TensorFlow Lite \u7684\u6a21\u578b\u7248\u672c\u7684\u6587\u4ef6\u3002\n **\u8981\u9ede** \uff1a\u8207 AutoML Vision \u4e2d\u4e4b\u524d\u7684\u5c0e\u51fa\u884c\u7232\u4e0d\u540c\uff0c\u5728 Vertex AI \u4e2d\u5c0e\u51fa\u6b64\u683c\u5f0f\u4e0d\u6703\u8f38\u51fa\u6a19\u7c64\u6587\u4ef6 (`dict.txt`) \u4f5c\u7232\u8f38\u51fa\u6587\u4ef6\u4e4b\u4e00\u3002\u6b64\u4fe1\u606f\u73fe\u5728\u5305\u542b\u5728`.tflite`\u6587\u4ef6\u4e2d\u3002\u5982\u9700\u77ad\u89e3\u5982\u4f55\u63d0\u53d6\u6b64\u4fe1\u606f\uff0c\u8acb\u53c3\u95b1\u4ee5\u4e0b TensorFlow \u6587\u6a94\uff1a\n- [\u4f7f\u7528\u5143\u6578\u64da\u9032\u884c TensorFlow Lite \u63a8\u65b7](https://www.tensorflow.org/lite/inference_with_metadata/overview?hl=zh-cn) \n- [\u4f7f\u7528 TensorFlow Lite \u4ee3\u78bc\u751f\u6210\u5668\u751f\u6210\u6a21\u578b\u63a5\u53e3](https://www.tensorflow.org/lite/inference_with_metadata/codegen?hl=zh-cn) \n- [\u5411 TensorFlow Lite \u6a21\u578b\u6dfb\u52a0\u5143\u6578\u64da](https://www.tensorflow.org/lite/convert/metadata?hl=zh-cn) \u60a8\u5728\u8acb\u6c42\u4e2d\u6307\u5b9a\u7684 `OUTPUT_BUCKET` \u6c7a\u5b9a\u4e86\u8f38\u51fa\u6587\u4ef6\u7684\u5b58\u5132\u4f4d\u7f6e\u3002\u5b58\u5132\u8f38\u51fa\u6587\u4ef6\u7684\u76ee\u9304\u63a1\u7528\u4ee5\u4e0b\u683c\u5f0f\uff1a- gs:///model-/ **edgetpu-tflite** //\n **\u6587\u4ef6** \uff1a- `edgetpu_model.tflite`\uff1a\u5305\u542b TensorFlow Lite \u6a21\u578b\u7248\u672c\u7684\u6587\u4ef6\uff0c\u901a\u904e Edge TPU \u7de8\u8b6f\u5668\u50b3\u905e\uff0c\u4ee5\u4fbf\u8207 Edge TPU \u517c\u5bb9\u3002\n **\u8981\u9ede** \uff1a\u8207 AutoML Vision \u4e2d\u4e4b\u524d\u7684\u5c0e\u51fa\u884c\u7232\u4e0d\u540c\uff0c\u5728 Vertex AI \u4e2d\u5c0e\u51fa\u6b64\u683c\u5f0f\u4e0d\u6703\u8f38\u51fa\u6a19\u7c64\u6587\u4ef6 (`dict.txt`) \u4f5c\u7232\u8f38\u51fa\u6587\u4ef6\u4e4b\u4e00\u3002\u6b64\u4fe1\u606f\u73fe\u5728\u5305\u542b\u5728`.tflite`\u6587\u4ef6\u4e2d\u3002\u5982\u9700\u77ad\u89e3\u5982\u4f55\u63d0\u53d6\u6b64\u4fe1\u606f\uff0c\u8acb\u53c3\u95b1\u4ee5\u4e0b TensorFlow \u6587\u6a94\uff1a\n- [\u4f7f\u7528\u5143\u6578\u64da\u9032\u884c TensorFlow Lite \u63a8\u65b7](https://www.tensorflow.org/lite/inference_with_metadata/overview?hl=zh-cn) \n- [\u4f7f\u7528 TensorFlow Lite \u4ee3\u78bc\u751f\u6210\u5668\u751f\u6210\u6a21\u578b\u63a5\u53e3](https://www.tensorflow.org/lite/inference_with_metadata/codegen?hl=zh-cn) \n- [\u5411 TensorFlow Lite \u6a21\u578b\u6dfb\u52a0\u5143\u6578\u64da](https://www.tensorflow.org/lite/convert/metadata?hl=zh-cn) \u60a8\u5728\u8acb\u6c42\u4e2d\u6307\u5b9a\u7684 `OUTPUT_BUCKET` \u6c7a\u5b9a\u4e86\u8f38\u51fa\u6587\u4ef6\u7684\u5b58\u5132\u4f4d\u7f6e\u3002\u5b58\u5132\u8f38\u51fa\u6587\u4ef6\u7684\u76ee\u9304\u63a1\u7528\u4ee5\u4e0b\u683c\u5f0f\uff1a- gs:///model-/ **tf-saved-model** //\n **\u6587\u4ef6** \uff1a- `saved_model.pb`\uff1a\u5305\u542b\u5716\u5b9a\u7fa9\u548c\u6a21\u578b\u6b0a\u91cd\u7684\u5354\u8b70\u7de9\u885d\u5340\u6587\u4ef6\u3002\u60a8\u5728\u8acb\u6c42\u4e2d\u6307\u5b9a\u7684 `OUTPUT_BUCKET` \u6c7a\u5b9a\u4e86\u8f38\u51fa\u6587\u4ef6\u7684\u5b58\u5132\u4f4d\u7f6e\u3002\u5b58\u5132\u8f38\u51fa\u6587\u4ef6\u7684\u76ee\u9304\u63a1\u7528\u4ee5\u4e0b\u683c\u5f0f\uff1a- gs:///model-/ **core-ml** //\n **\u6587\u4ef6** \uff1a- `dict.txt`\uff1a\u6a19\u7c64\u6587\u4ef6\u3002\u6a19\u7c64\u6587\u4ef6`dict.txt`\u4e2d\u7684\u6bcf\u4e00\u884c\u8868\u793a\u6a21\u578b\u8fd4\u56de\u7684\u9810\u6e2c\u7d50\u679c\u7684\u4e00\u500b\u6a19\u7c64\uff0c\u8207\u8acb\u6c42\u7684\u9806\u5e8f\u76f8\u540c\u3002 **\u793a\u4f8b dict.txt** ```\nroses\ndaisy\ntulips\ndandelion\nsunflowers\n```\n- `model.mlmodel`\uff1a\u6307\u5b9a Core ML \u6a21\u578b\u7684\u6587\u4ef6\u3002\u60a8\u5728\u8acb\u6c42\u4e2d\u6307\u5b9a\u7684 `OUTPUT_BUCKET` \u6c7a\u5b9a\u4e86\u8f38\u51fa\u6587\u4ef6\u7684\u5b58\u5132\u4f4d\u7f6e\u3002\u5b58\u5132\u8f38\u51fa\u6587\u4ef6\u7684\u76ee\u9304\u63a1\u7528\u4ee5\u4e0b\u683c\u5f0f\uff1a- gs:///model-/ **tf-js** //\n **\u6587\u4ef6** \uff1a- `dict.txt`\uff1a\u6a19\u7c64\u6587\u4ef6\u3002\u6a19\u7c64\u6587\u4ef6`dict.txt`\u4e2d\u7684\u6bcf\u4e00\u884c\u8868\u793a\u6a21\u578b\u8fd4\u56de\u7684\u9810\u6e2c\u7d50\u679c\u7684\u4e00\u500b\u6a19\u7c64\uff0c\u8207\u8acb\u6c42\u7684\u9806\u5e8f\u76f8\u540c\u3002 **\u793a\u4f8b dict.txt** ```\nroses\ndaisy\ntulips\ndandelion\nsunflowers\n```\n- `group1-shard1of3.bin`\uff1a\u4e8c\u9032\u5236\u6587\u4ef6\u3002\n- `group1-shard2of3.bin`\uff1a\u4e8c\u9032\u5236\u6587\u4ef6\u3002\n- `group1-shard3of3.bin`\uff1a\u4e8c\u9032\u5236\u6587\u4ef6\u3002\n- `model.json`\uff1a\u6a21\u578b\u7684 JSON \u6587\u4ef6\u8868\u793a\u6cd5\u3002 **\u793a\u4f8b** `model.json` \uff08\u7232\u7c21\u6f54\u8d77\u898b\uff0c\u7701\u7565\u4e86\u90e8\u5206\u5167\u5bb9\uff09```\n{\n \"format\": \"graph-model\",\n \"generatedBy\": \"2.4.0\",\n \"convertedBy\": \"TensorFlow.js Converter v1.7.0\",\n \"userDefinedMetadata\": {\n \"signature\": {\n  \"inputs\": {\n  \"image:0\": {\n   \"name\": \"image:0\",\n   \"dtype\": \"DT_FLOAT\",\n   \"tensorShape\": {\n   \"dim\": [    {\n    \"size\": \"1\"\n    },\n    {\n    \"size\": \"224\"\n    },\n    {\n    \"size\": \"224\"\n    },\n    {\n    \"size\": \"3\"\n    }\n   ]\n   }\n  }\n  },\n  \"outputs\": {\n  \"scores:0\": {\n   \"name\": \"scores:0\",\n   \"dtype\": \"DT_FLOAT\",\n   \"tensorShape\": {\n   \"dim\": [    {\n    \"size\": \"1\"\n    },\n    {\n    \"size\": \"5\"\n    }\n   ]\n   }\n  }\n  }\n }\n },\n \"modelTopology\": {\n \"node\": [  {\n  \"name\": \"image\",\n  \"op\": \"Placeholder\",\n  \"attr\": {\n   \"dtype\": {\n   \"type\": \"DT_FLOAT\"\n   },\n   \"shape\": {\n   \"shape\": {\n    \"dim\": [    {\n     \"size\": \"1\"\n    },\n    {\n     \"size\": \"224\"\n    },\n    {\n     \"size\": \"224\"\n    },\n    {\n     \"size\": \"3\"\n    }\n    ]\n   }\n   }\n  }\n  },\n  {\n  \"name\": \"mnas_v4_a_1/feature_network/feature_extractor/Mean/reduction_indices\",\n  \"op\": \"Const\",\n  \"attr\": {\n   \"value\": {\n   \"tensor\": {\n    \"dtype\": \"DT_INT32\",\n    \"tensorShape\": {\n    \"dim\": [     {\n     \"size\": \"2\"\n     }\n    ]\n    }\n   }\n   },\n   \"dtype\": {\n   \"type\": \"DT_INT32\"\n   }\n  }\n  },\n  ...\n  {\n  \"name\": \"scores\",\n  \"op\": \"Identity\",\n  \"input\": [   \"Softmax\"\n  ],\n  \"attr\": {\n   \"T\": {\n   \"type\": \"DT_FLOAT\"\n   }\n  }\n  }\n ],\n \"library\": {},\n \"versions\": {}\n },\n \"weightsManifest\": [ {\n  \"paths\": [  \"group1-shard1of3.bin\",\n  \"group1-shard2of3.bin\",\n  \"group1-shard3of3.bin\"\n  ],\n  \"weights\": [  {\n   \"name\": \"mnas_v4_a_1/feature_network/feature_extractor/Mean/reduction_indices\",\n   \"shape\": [   2\n   ],\n   \"dtype\": \"int32\"\n  },\n  {\n   \"name\": \"mnas_v4_a/output/fc/tf_layer/kernel\",\n   \"shape\": [   1280,\n   5\n   ],\n   \"dtype\": \"float32\"\n  },\n  ...\n  {\n   \"name\": \"mnas_v4_a_1/feature_network/lead_cell_17/op_0/conv2d_0/Conv2D_weights\",\n   \"shape\": [   1,\n   1,\n   320,\n   1280\n   ],\n   \"dtype\": \"float32\"\n  },\n  {\n   \"name\": \"mnas_v4_a_1/feature_network/cell_14/op_0/expand_0/Conv2D_bn_offset\",\n   \"shape\": [   1152\n   ],\n   \"dtype\": \"float32\"\n  }\n  ]\n }\n ]\n}\n```\u5728\u4e0b\u9762\u9078\u64c7\u60a8\u7684\u6a21\u578b\u683c\u5f0f\u5c0d\u61c9\u7684\u6a19\u7c64\u9801\uff1a\n\u60a8\u5728\u8acb\u6c42\u4e2d\u6307\u5b9a\u7684 `OUTPUT_BUCKET` \u6c7a\u5b9a\u4e86\u8f38\u51fa\u6587\u4ef6\u7684\u5b58\u5132\u4f4d\u7f6e\u3002\u5b58\u5132\u8f38\u51fa\u6587\u4ef6\u7684\u76ee\u9304\u63a1\u7528\u4ee5\u4e0b\u683c\u5f0f\uff1a- gs:///model-/ **tflite** //\n **\u6587\u4ef6** \uff1a- `model.tflite`\uff1a\u5305\u542b\u53ef\u7acb\u5373\u7528\u65bc TensorFlow Lite \u7684\u6a21\u578b\u7248\u672c\u7684\u6587\u4ef6\u3002\n- `frozen_inference_graph.pb`\uff1a\u5305\u542b\u5716\u5b9a\u7fa9\u548c\u6a21\u578b\u6b0a\u91cd\u7684\u5e8f\u5217\u5316\u5354\u8b70\u7de9\u885d\u5340\u6587\u4ef6\u3002\n- `label_map.pbtxt`\uff1a\u6a19\u7c64\u6620\u5c04\u6587\u4ef6\uff0c\u5c07\u6bcf\u500b\u4f7f\u7528\u7684\u6a19\u7c64\u6620\u5c04\u5230\u4e00\u500b\u6574\u6578\u503c\u3002\u60a8\u5728\u8acb\u6c42\u4e2d\u6307\u5b9a\u7684 `OUTPUT_BUCKET` \u6c7a\u5b9a\u4e86\u8f38\u51fa\u6587\u4ef6\u7684\u5b58\u5132\u4f4d\u7f6e\u3002\u5b58\u5132\u8f38\u51fa\u6587\u4ef6\u7684\u76ee\u9304\u63a1\u7528\u4ee5\u4e0b\u683c\u5f0f\uff1a- gs:///model-/ **edgetpu-tflite** //\n **\u6587\u4ef6** \uff1a- `edgetpu_model.tflite`\uff1a\u5305\u542b TensorFlow Lite \u6a21\u578b\u7248\u672c\u7684\u6587\u4ef6\uff0c\u901a\u904e Edge TPU \u7de8\u8b6f\u5668\u50b3\u905e\uff0c\u4ee5\u4fbf\u8207 Edge TPU \u517c\u5bb9\u3002\n- `label_map.pbtxt`\uff1a\u6a19\u7c64\u6620\u5c04\u6587\u4ef6\uff0c\u5c07\u6bcf\u500b\u4f7f\u7528\u7684\u6a19\u7c64\u6620\u5c04\u5230\u4e00\u500b\u6574\u6578\u503c\u3002\u60a8\u5728\u8acb\u6c42\u4e2d\u6307\u5b9a\u7684 `OUTPUT_BUCKET` \u6c7a\u5b9a\u4e86\u8f38\u51fa\u6587\u4ef6\u7684\u5b58\u5132\u4f4d\u7f6e\u3002\u5b58\u5132\u8f38\u51fa\u6587\u4ef6\u7684\u76ee\u9304\u63a1\u7528\u4ee5\u4e0b\u683c\u5f0f\uff1a- gs:///model-/ **tf-saved-model** //\n **\u6587\u4ef6** \uff1a- `frozen_inference_graph.pb`\uff1a\u5305\u542b\u5716\u5b9a\u7fa9\u548c\u6a21\u578b\u6b0a\u91cd\u7684\u5e8f\u5217\u5316\u5354\u8b70\u7de9\u885d\u5340\u6587\u4ef6\u3002\n- `label_map.pbtxt`\uff1a\u6a19\u7c64\u6620\u5c04\u6587\u4ef6\uff0c\u5c07\u6bcf\u500b\u4f7f\u7528\u7684\u6a19\u7c64\u6620\u5c04\u5230\u4e00\u500b\u6574\u6578\u503c\u3002\n- `saved_model/saved_model.pb`\uff1a\u6b64\u6587\u4ef6\u5b58\u5132\u5be6\u969b\u7684 TensorFlow \u7a0b\u5e8f\uff08\u6216\u6a21\u578b\uff09\u4ee5\u53ca\u4e00\u7d44\u5df2\u547d\u540d\u7684\u7c3d\u540d\uff0c\u6bcf\u500b\u7c3d\u540d\u6a19\u8b58\u4e00\u500b\u63a5\u53d7\u5f35\u91cf\u8f38\u5165\u4e26\u751f\u6210\u5f35\u91cf\u8f38\u51fa\u7684\u51fd\u6578\u3002\n- `saved_model/variables/`\uff1a\u6b64\u8b8a\u91cf\u76ee\u9304\u5305\u542b\u6a19\u6e96\u8a13\u7df4\u6aa2\u67e5\u9ede\u3002", "guide": "Vertex AI"}