{"title": "Vertex AI - Create an online store instance", "url": "https://cloud.google.com/vertex-ai/docs/featurestore/latest/create-onlinestore", "abstract": "# Vertex AI - Create an online store instance\nTo set up online serving, you need to first create an online store instance for Bigtable online serving or Optimized online serving (preview).\nWhen you use Optimized online serving, you can configure the online store to serve features from either a public endpoint or a dedicated Private Service Connect endpoint. Use a Private Service Connect endpoint if you want to serve features within a VPC network at lower latencies than a public endpoint.\nNote that you can't change the type of online serving from after you choose Bigtable online serving or Optimized online serving while creating your online store. However, you can change the serving endpoint configuration for an online store instance created for Optimized online serving.\nAfter you create the online store, you can [add feature views](/vertex-ai/docs/featurestore/latest/create-featureview) and associate those feature views with feature data sources in BigQuery.\n", "content": "## Configure embedding management for an online store\n**    Preview     ** This feature is subject to the \"Pre-GA Offerings Terms\" in the General Service Terms section   of the [Service Specific Terms](/terms/service-terms#1) .     Pre-GA features are available \"as is\" and might have limited support.    For more information, see the [launch stage descriptions](/products#product-launch-stages) .\nVertex AI Feature Store lets you perform vector similarity searches using embeddings in a feature view within an online store. To perform a vector similarity search, you need to configure your online store instance to support embedding management by using the [FeatureOnlineStore.embedding_management](/vertex-ai/docs/reference/rest/v1beta1/projects.locations.featureOnlineStores#FeatureOnlineStore.FIELDS.embedding_management) parameter, and then [configure vector retrieval for at least one feature view](/vertex-ai/docs/featurestore/latest/create-featureview#configure_vectorretrieval) within the online store.\nFor more information about how to search for approximate nearest neighbors using embeddings in Vertex AI Feature Store, see [Search using embeddings](/vertex-ai/docs/featurestore/latest/embeddings-search) .\n## Create an online store for Bigtable online serving\nUse the following samples to create an online store instance for Bigtable online serving with autoscaling.\nUse the following instructions to create an online store for Bigtable online serving using the Google Cloud console.- In the Vertex AI section of the Google Cloud console, go to the **Feature Store** page. [Go to the Feature Store page](https://console.cloud.google.com/vertex-ai/feature-store) \n- Click **Online store** to go to the **Online store** section.\n- Click **Create** to open the **Create Online Store** page.\n- Specify a name for the online store.\n- Optional: To add labels, click **Add label** , and specify the label name and value. You can add multiple labels to an online store.\n- In the **Choose a storage solution for your online store** field, click **Bigtable** .\n- Modify the **Minimum node count** , **Maximum node count** , and **CPU utilization target** , as needed.\n- Click **Create** .\nTo create a [FeatureOnlineStore](/vertex-ai/docs/reference/rest/v1/projects.locations.featureOnlineStores#resource:-featureOnlineStore) resource, send a `POST` request by using the [featureOnlineStores.create](/vertex-ai/docs/reference/rest/v1/projects.locations.featureOnlineStores/create) method.\nBefore using any of the request data, make the following replacements:- : Region where you want to create the online store, such as`us-central1`.\n- : Your project ID.\n- : The name of the new online store instance.\nHTTP method and URL:\n```\nPOST https://LOCATION_ID-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION_ID/featureOnlineStores?feature_online_store_id=FEATUREONLINESTORE_NAME\n```\nRequest JSON body:\n```\n{\n \"bigtable\": {\n \"auto_scaling\": {\n  \"min_node_count\": 1,\n  \"max_node_count\": 3,\n  \"cpu_utilization_target\": 50\n }\n }\n}\n```\nTo send your request, choose one of these options:\n **Note:** The following command assumes that you have logged in to  the`gcloud`CLI with your user account by running [gcloud init](/sdk/gcloud/reference/init) or [gcloud auth login](/sdk/gcloud/reference/auth/login) ,  or by using [Cloud Shell](/shell/docs) ,  which automatically logs you into the`gcloud`CLI.  You can check the currently active account by running [gcloud auth list](/sdk/gcloud/reference/auth/list) .\nSave the request body in a file named `request.json` ,  and execute the following command:\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION_ID-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION_ID/featureOnlineStores?feature_online_store_id=FEATUREONLINESTORE_NAME\"\n``` **Note:** The following command assumes that you have logged in to  the`gcloud`CLI with your user account by running [gcloud init](/sdk/gcloud/reference/init) or [gcloud auth login](/sdk/gcloud/reference/auth/login) ,  or by using [Cloud Shell](/shell/docs) ,  which automatically logs you into the`gcloud`CLI.  You can check the currently active account by running [gcloud auth list](/sdk/gcloud/reference/auth/list) .\nSave the request body in a file named `request.json` ,  and execute the following command:\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION_ID-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION_ID/featureOnlineStores?feature_online_store_id=FEATUREONLINESTORE_NAME\" | Select-Object -Expand Content\n```\nYou should receive a JSON response similar to the following:\n```\n{\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION_ID/featureOnlineStores/FEATUREONLINESTORE_NAME/operations/OPERATION_ID\",\n \"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.aiplatform.v1.CreateFeatureOnlineStoreOperationMetadata\",\n \"genericMetadata\": {\n  \"createTime\": \"2023-09-18T17:49:23.847496Z\",\n  \"updateTime\": \"2023-09-18T17:49:23.847496Z\"\n }\n }\n}\n```\n## Create an online store for Bigtable online serving with embedding management\n**    Preview     ** This feature is subject to the \"Pre-GA Offerings Terms\" in the General Service Terms section   of the [Service Specific Terms](/terms/service-terms#1) .     Pre-GA features are available \"as is\" and might have limited support.    For more information, see the [launch stage descriptions](/products#product-launch-stages) .\nUse the following sample to create an online store instance for Bigtable online serving with embedding management.\nTo create a [FeatureOnlineStore](/vertex-ai/docs/reference/rest/v1beta1/projects.locations.featureOnlineStores#resource:-featureOnlineStore) resource, send a `POST` request by using the [featureOnlineStores.create](/vertex-ai/docs/reference/rest/v1beta1/projects.locations.featureOnlineStores/create) method.\nBefore using any of the request data, make the following replacements:- : Region where you want to create the online store, such as`us-central1`.\n- : Your project ID.\n- : The name of the new online store instance.\n- : Optional: To create an online store that supports embedding management,  enter`true`. The default value is`false`.\nHTTP method and URL:\n```\nPOST https://LOCATION_ID-aiplatform.googleapis.com/v11/projects/PROJECT_ID/locations/LOCATION_ID/featureOnlineStores?feature_online_store_id=FEATUREONLINESTORE_NAME\n```\nRequest JSON body:\n```\n{\n \"bigtable\": {\n \"auto_scaling\": {\n  \"min_node_count\": 1,\n  \"max_node_count\": 3,\n  \"cpu_utilization_target\": 50\n }\n }\n \"embedding_management\": {\n \"enabled\": BOOLEAN\n }\n}\n```\nTo send your request, choose one of these options:\n **Note:** The following command assumes that you have logged in to  the`gcloud`CLI with your user account by running [gcloud init](/sdk/gcloud/reference/init) or [gcloud auth login](/sdk/gcloud/reference/auth/login) ,  or by using [Cloud Shell](/shell/docs) ,  which automatically logs you into the`gcloud`CLI.  You can check the currently active account by running [gcloud auth list](/sdk/gcloud/reference/auth/list) .\nSave the request body in a file named `request.json` ,  and execute the following command:\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION_ID-aiplatform.googleapis.com/v11/projects/PROJECT_ID/locations/LOCATION_ID/featureOnlineStores?feature_online_store_id=FEATUREONLINESTORE_NAME\"\n``` **Note:** The following command assumes that you have logged in to  the`gcloud`CLI with your user account by running [gcloud init](/sdk/gcloud/reference/init) or [gcloud auth login](/sdk/gcloud/reference/auth/login) ,  or by using [Cloud Shell](/shell/docs) ,  which automatically logs you into the`gcloud`CLI.  You can check the currently active account by running [gcloud auth list](/sdk/gcloud/reference/auth/list) .\nSave the request body in a file named `request.json` ,  and execute the following command:\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION_ID-aiplatform.googleapis.com/v11/projects/PROJECT_ID/locations/LOCATION_ID/featureOnlineStores?feature_online_store_id=FEATUREONLINESTORE_NAME\" | Select-Object -Expand Content\n```\nYou should receive a JSON response similar to the following:\n```\n{\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION_ID/featureOnlineStores/FEATUREONLINESTORE_NAME/operations/OPERATION_ID\",\n \"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.aiplatform.v1beta1.CreateFeatureOnlineStoreOperationMetadata\",\n \"genericMetadata\": {\n  \"createTime\": \"2023-09-18T17:49:23.847496Z\",\n  \"updateTime\": \"2023-09-18T17:49:23.847496Z\"\n }\n }\n}\n```\n## Create an online store for Optimized online serving with a public endpoint\n**    Preview     ** This feature is subject to the \"Pre-GA Offerings Terms\" in the General Service Terms section   of the [Service Specific Terms](/terms/service-terms#1) .     Pre-GA features are available \"as is\" and might have limited support.    For more information, see the [launch stage descriptions](/products#product-launch-stages) .\nUse the following samples to create an online store for Optimized online serving with a public endpoint.\nUse the following instructions to create an online store for Optimized online serving using the Google Cloud console.- In the Vertex AI section of the Google Cloud console, go to the **Feature Store** page. [Go to the Feature Store page](https://console.cloud.google.com/vertex-ai/feature-store) \n- Click **Online store** to go to the **Online store** section.\n- Click **Create** to open the **Create Online Store** page.\n- Specify a name for the online store.\n- Optional: To add labels, click **Add label** , and specify the label name and value. You can add multiple labels to an online store.\n- In the **Choose a storage solution for your online store** field, click **Optimized** .\n- Click **Create** .\nTo create an online store instance, send a `POST` request by using the [featureOnlineStores.create](/vertex-ai/docs/reference/rest/v1beta1/projects.locations.featureOnlineStores/create) method.\nBefore using any of the request data, make the following replacements:- : Region where you want to create the`FeatureOnlineStore`instance, such as`us-central1`.\n- : Your project ID.\n- : The name of the new`FeatureOnlineStore`instance.\nHTTP method and URL:\n```\nPOST https://LOCATION_ID-aiplatform.googleapis.com/v1beta1/projects/PROJECT_ID/locations/LOCATION_ID/featureOnlineStores?feature_online_store_id=FEATUREONLINESTORE_NAME\n```\nRequest JSON body:\n```\n{\n \"optimized\": {}\n}\n```\nTo send your request, choose one of these options:\n **Note:** The following command assumes that you have logged in to  the`gcloud`CLI with your user account by running [gcloud init](/sdk/gcloud/reference/init) or [gcloud auth login](/sdk/gcloud/reference/auth/login) ,  or by using [Cloud Shell](/shell/docs) ,  which automatically logs you into the`gcloud`CLI.  You can check the currently active account by running [gcloud auth list](/sdk/gcloud/reference/auth/list) .\nSave the request body in a file named `request.json` ,  and execute the following command:\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION_ID-aiplatform.googleapis.com/v1beta1/projects/PROJECT_ID/locations/LOCATION_ID/featureOnlineStores?feature_online_store_id=FEATUREONLINESTORE_NAME\"\n``` **Note:** The following command assumes that you have logged in to  the`gcloud`CLI with your user account by running [gcloud init](/sdk/gcloud/reference/init) or [gcloud auth login](/sdk/gcloud/reference/auth/login) ,  or by using [Cloud Shell](/shell/docs) ,  which automatically logs you into the`gcloud`CLI.  You can check the currently active account by running [gcloud auth list](/sdk/gcloud/reference/auth/list) .\nSave the request body in a file named `request.json` ,  and execute the following command:\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION_ID-aiplatform.googleapis.com/v1beta1/projects/PROJECT_ID/locations/LOCATION_ID/featureOnlineStores?feature_online_store_id=FEATUREONLINESTORE_NAME\" | Select-Object -Expand Content\n```\nYou should receive a JSON response similar to the following:\n```\n{\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION_ID/featureOnlineStores/FEATUREONLINESTORE_NAME/operations/OPERATION_ID\",\n \"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.aiplatform.v1beta1.CreateFeatureOnlineStoreOperationMetadata\",\n \"genericMetadata\": {\n  \"createTime\": \"2023-09-18T17:49:23.847496Z\",\n  \"updateTime\": \"2023-09-18T17:49:23.847496Z\"\n }\n }\n}\n```\n## Create an online store for Optimized online serving with a Private Service Connect endpoint\n**    Preview     ** This feature is subject to the \"Pre-GA Offerings Terms\" in the General Service Terms section   of the [Service Specific Terms](/terms/service-terms#1) .     Pre-GA features are available \"as is\" and might have limited support.    For more information, see the [launch stage descriptions](/products#product-launch-stages) .\nUse the following sample to create an online store for Optimized online serving with [Private Service Connect](/vpc/docs/private-service-connect) .\nTo create an online store instance, send a `POST` request by using the [featureOnlineStores.create](/vertex-ai/docs/reference/rest/v1beta1/projects.locations.featureOnlineStores/create) method.\nBefore using any of the request data, make the following replacements:- : Region where you want to create the`FeatureOnlineStore`instance, such as`us-central1`.\n- : Your project ID.\n- : The name of the new`FeatureOnlineStore`instance.\nHTTP method and URL:\n```\nPOST https://LOCATION_ID-aiplatform.googleapis.com/v1beta1/projects/PROJECT_ID/locations/LOCATION_ID/featureOnlineStores?feature_online_store_id=FEATUREONLINESTORE_NAME\n```\nRequest JSON body:\n```\n{\n \"optimized\": {},\n \"dedicated_serving_endpoint\": {\n \"private_service_connect_config\": {\n  \"enable_private_service_connect\": true,\n  \"project_allowlist\": [\"PROJECT_NAME\"]\n }\n }\n}\n```\nTo send your request, choose one of these options:\n **Note:** The following command assumes that you have logged in to  the`gcloud`CLI with your user account by running [gcloud init](/sdk/gcloud/reference/init) or [gcloud auth login](/sdk/gcloud/reference/auth/login) ,  or by using [Cloud Shell](/shell/docs) ,  which automatically logs you into the`gcloud`CLI.  You can check the currently active account by running [gcloud auth list](/sdk/gcloud/reference/auth/list) .\nSave the request body in a file named `request.json` ,  and execute the following command:\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION_ID-aiplatform.googleapis.com/v1beta1/projects/PROJECT_ID/locations/LOCATION_ID/featureOnlineStores?feature_online_store_id=FEATUREONLINESTORE_NAME\"\n``` **Note:** The following command assumes that you have logged in to  the`gcloud`CLI with your user account by running [gcloud init](/sdk/gcloud/reference/init) or [gcloud auth login](/sdk/gcloud/reference/auth/login) ,  or by using [Cloud Shell](/shell/docs) ,  which automatically logs you into the`gcloud`CLI.  You can check the currently active account by running [gcloud auth list](/sdk/gcloud/reference/auth/list) .\nSave the request body in a file named `request.json` ,  and execute the following command:\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION_ID-aiplatform.googleapis.com/v1beta1/projects/PROJECT_ID/locations/LOCATION_ID/featureOnlineStores?feature_online_store_id=FEATUREONLINESTORE_NAME\" | Select-Object -Expand Content\n```\nYou should receive a JSON response similar to the following:\n```\n{\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION_ID/featureOnlineStores/FEATUREONLINESTORE_NAME/operations/OPERATION_ID\",\n \"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.aiplatform.v1beta1.CreateFeatureOnlineStoreOperationMetadata\",\n \"genericMetadata\": {\n  \"createTime\": \"2023-09-18T17:49:23.847496Z\",\n  \"updateTime\": \"2023-09-18T17:49:23.847496Z\"\n }\n }\n}\n```\n## What's next\n- Learn how to [create a feature view](/vertex-ai/docs/featurestore/latest/create-featureview) .\n- Learn how to [update an online store](/vertex-ai/docs/featurestore/latest/update-onlinestore) .", "guide": "Vertex AI"}