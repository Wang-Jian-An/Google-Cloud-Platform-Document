{"title": "Vertex AI - \u4f7f\u7528\u5c08\u7528\u7aef\u9ede\u9032\u884c\u5728\u7dda\u9810\u6e2c", "url": "https://cloud.google.com/vertex-ai/docs/predictions/using-private-endpoints?hl=zh-cn", "abstract": "# Vertex AI - \u4f7f\u7528\u5c08\u7528\u7aef\u9ede\u9032\u884c\u5728\u7dda\u9810\u6e2c\n\u4f7f\u7528\u5c08\u7528\u7aef\u9ede\u901a\u904e Vertex AI \u63d0\u4f9b\u5728\u7dda\u9810\u6e2c\uff0c\u53ef\u5be6\u73fe\u8207 Vertex AI \u5728\u7dda\u9810\u6e2c\u670d\u52d9\u7684\u4f4e\u5ef6\u9072\u3001\u5b89\u5168\u9023\u63a5\u3002\u672c\u6307\u5357\u4ecb\u7d39\u77ad\u5982\u4f55\u4f7f\u7528 VPC \u7db2\u7d61\u5c0d\u7b49\u4e92\u9023\u5c07\u7db2\u7d61\u8207 Vertex AI \u5728\u7dda\u9810\u6e2c\u670d\u52d9\u5c0d\u7b49\u4e92\u9023\uff0c\u5f9e\u800c\u5728 Vertex AI \u4e0a\u914d\u7f6e\u5c08\u7528\u7aef\u9ede\u3002\n", "content": "## \u6982\u89bd\n\u5728\u4f7f\u7528\u5c08\u7528\u7aef\u9ede\u63d0\u4f9b\u5728\u7dda\u9810\u6e2c\u4e4b\u524d\uff0c\u60a8\u5fc5\u9808\u5148 [\u914d\u7f6e\u5c08\u7528\u670d\u52d9\u8a2a\u554f\u901a\u9053\u4ee5\u5728\u60a8\u7684\u7db2\u7d61\u548c Vertex AI \u4e4b\u9593\u5275\u5efa\u5c0d\u7b49\u4e92\u9023\u9023\u63a5](https://cloud.google.com/vertex-ai/docs/general/vpc-peering?hl=zh-cn) \u3002\u5982\u679c\u60a8\u5df2\u7d93\u9032\u884c\u4e86\u8a2d\u7f6e\uff0c\u5247\u53ef\u4ee5\u4f7f\u7528\u73fe\u6709\u7684\u5c0d\u7b49\u4e92\u9023\u9023\u63a5\u3002\n\u672c\u6307\u5357\u5305\u542b\u4ee5\u4e0b\u4efb\u52d9\uff1a\n- \u9a57\u8b49\u60a8\u7684\u73fe\u6709\u5c0d\u7b49\u4e92\u9023\u9023\u63a5\u7684\u72c0\u614b\u3002\n- \u9a57\u8b49\u5fc5\u8981\u7684 API \u662f\u5426\u5df2\u5553\u7528\u3002\n- \u5275\u5efa\u5c08\u7528\u7aef\u9ede\u3002\n- \u5c07\u6a21\u578b\u90e8\u7f72\u5230\u5c08\u7528\u7aef\u9ede\u3002- \u6bcf\u500b\u5c08\u7528\u7aef\u9ede\u50c5\u652f\u6301\u4e00\u500b\u6a21\u578b\u3002\u9019\u8207\u516c\u5171 Vertex AI \u7aef\u9ede\u4e0d\u540c\uff0c\u5c0d\u65bc\u5f8c\u8005\uff0c\u60a8\u53ef\u4ee5\u5728\u90e8\u7f72\u5230\u4e00\u500b\u7aef\u9ede\u7684\u591a\u500b\u6a21\u578b\u4e4b\u9593\u62c6\u5206\u6d41\u91cf\u3002\n- \u5c08\u7528\u7aef\u9ede\u652f\u6301 AutoML \u8868\u683c\u6a21\u578b\u548c\u81ea\u5b9a\u7fa9\u8a13\u7df4\u6a21\u578b\u3002\n- \u5c07\u9810\u6e2c\u767c\u9001\u5230\u5c08\u7528\u7aef\u9ede\u3002\n- \u6e05\u7406\u8cc7\u6e90## \u6aa2\u67e5\u73fe\u6709\u5c0d\u7b49\u4e92\u9023\u9023\u63a5\u7684\u72c0\u614b\n\u5982\u679c\u60a8\u5df2\u6709\u8207 Vertex AI \u4e00\u8d77\u4f7f\u7528\u7684\u5c0d\u7b49\u4e92\u9023\u9023\u63a5\uff0c\u5247\u53ef\u4ee5\u5217\u51fa\u5b83\u5011\u4ee5\u6aa2\u67e5\u72c0\u614b\uff1a\n```\ngcloud compute networks peerings list --network NETWORK_NAME\n```\n\u60a8\u61c9\u8a72\u770b\u5230\u5c0d\u7b49\u4e92\u9023\u9023\u63a5\u7684\u72c0\u614b\u7232 `ACTIVE` \u3002\u8a73\u7d30\u77ad\u89e3 [\u8655\u65bc\u6d3b\u8e8d\u72c0\u614b\u7684\u5c0d\u7b49\u4e92\u9023\u9023\u63a5](https://cloud.google.com/vpc/docs/using-vpc-peering?hl=zh-cn#step_3_vpc_network_peering_becomes_active) \u3002\n## \u5553\u7528\u5fc5\u8981\u7684 API\n```\ngcloud services enable aiplatform.googleapis.comgcloud services enable dns.googleapis.com\n```\n## \u5275\u5efa\u5c08\u7528\u7aef\u9ede\n\u5982\u9700\u5275\u5efa\u5c08\u7528\u7aef\u9ede\uff0c\u8acb\u5728 [\u4f7f\u7528 Google Cloud CLI \u5275\u5efa\u7aef\u9ede](https://cloud.google.com/vertex-ai/docs/predictions/deploy-model-api?hl=zh-cn#create-endpoint) \u6642\u6dfb\u52a0 `--network` \u6a19\u8a8c\uff1a\n```\ngcloud beta ai endpoints create \\\u00a0 --display-name=ENDPOINT_DISPLAY_NAME \\\u00a0 --network=NETWORK_NAME \\\u00a0 --region=REGION\n```\n\u5c07 \u66ff\u63db\u7232\u5b8c\u5168\u9650\u5b9a\u7684\u7db2\u7d61\u540d\u7a31\uff1a\n```\nprojects/PROJECT_NUMBER/global/networks/NETWORK_NAME\n```\n\u5982\u679c\u60a8\u5728\u672a\u6307\u5b9a\u7db2\u7d61\u7684\u60c5\u6cc1\u4e0b\u5275\u5efa\u7aef\u9ede\uff0c\u5247\u5c07\u5275\u5efa\u516c\u5171\u7aef\u9ede\u3002\n### \u5c08\u7528\u7aef\u9ede\u7684\u9650\u5236\n\u8acb\u6ce8\u610f\u5c08\u7528\u7aef\u9ede\u7684\u4ee5\u4e0b\u9650\u5236\uff1a\n- \u5c08\u7528\u7aef\u9ede\u76ee\u524d\u4e0d\u652f\u6301\u6d41\u91cf\u62c6\u5206\u3002\u8981\u89e3\u6c7a\u6b64\u554f\u984c\uff0c\u60a8\u53ef\u4ee5\u5c07\u6a21\u578b\u90e8\u7f72\u5230\u591a\u500b\u5c08\u7528\u7aef\u9ede\uff0c\u4e26\u5728\u751f\u6210\u7684\u6bcf\u500b\u5c08\u7528\u7aef\u9ede\u7684\u9810\u6e2c\u7db2\u5740\u4e4b\u9593\u62c6\u5206\u6d41\u91cf\uff0c\u5f9e\u800c\u624b\u52d5\u5275\u5efa\u6d41\u91cf\u62c6\u5206\u3002\n- \u5c08\u7528\u7aef\u9ede\u4e0d\u652f\u6301 SSL/TLS\u3002\n- \u5982\u9700\u5728\u5c08\u7528\u7aef\u9ede\u4e0a\u5553\u7528\u8a2a\u554f\u65e5\u8a8c\u8a18\u9304\uff0c\u8acb\u806f\u7e6b vertex-ai-feedback@google.com\u3002\n- \u60a8\u53ea\u80fd\u5c07\u4e00\u500b\u7db2\u7d61\u7528\u65bc Google Cloud \u9805\u76ee\u4e2d\u7684\u6240\u6709\u5c08\u7528\u7aef\u9ede\u3002\u5982\u679c\u60a8\u8981\u66f4\u6539\u7232\u5176\u4ed6\u7db2\u7d61\uff0c\u8acb\u806f\u7e6b verex-ai-feedback@google.com\u3002\n- \u5f37\u70c8\u5efa\u8b70\u60a8\u5c0d\u53ef\u6062\u5fa9\u7684\u932f\u8aa4\u57f7\u884c\u5ba2\u6236\u7aef\u91cd\u8a66\u3002\u5176\u4e2d\u53ef\u80fd\u5305\u62ec\u4ee5\u4e0b\u932f\u8aa4\uff1a- \u97ff\u61c9\u7232\u7a7a\uff08HTTP \u932f\u8aa4\u4ee3\u78bc`0`\uff09\uff0c\u9019\u53ef\u80fd\u662f\u7531\u65bc\u66ab\u6642\u6027\u9023\u63a5\u4e2d\u65b7\u5c0e\u81f4\u7684\u3002\n- HTTP \u932f\u8aa4\u4ee3\u78bc`5xx`\uff0c\u8868\u793a\u670d\u52d9\u53ef\u80fd\u66ab\u6642\u4e0d\u53ef\u7528\u3002\n- \u5c0d\u65bc\u6307\u793a\u7cfb\u7d71\u7576\u524d\u904e\u8f09\u7684 HTTP \u932f\u8aa4\u4ee3\u78bc`429`\uff0c\u8acb\u8003\u616e\u6e1b\u6162\u6d41\u91cf\u50b3\u8f38\u901f\u7387\u4f86\u7de9\u89e3\u6b64\u554f\u984c\uff0c\u800c\u4e0d\u662f\u91cd\u8a66\u3002\n- \u4e0d\u652f\u6301\u4f86\u81ea [Vertex AI Python \u5ba2\u6236\u7aef\u5eab](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 [PredictionServiceClient](https://cloud.google.com/python/docs/reference/aiplatform/latest/google.cloud.aiplatform_v1.services.prediction_service.PredictionServiceClient?hl=zh-cn) \u7684\u9810\u6e2c\u8acb\u6c42\u3002\n### \u76e3\u63a7\u5c08\u7528\u7aef\u9ede\n\u60a8\u53ef\u4ee5\u4f7f\u7528\u6307\u6a19\u4fe1\u606f\u4e2d\u5fc3\u6aa2\u67e5\u767c\u9001\u5230\u5c08\u7528\u7aef\u9ede\u7684\u6d41\u91cf\u7684\u53ef\u7528\u6027\u548c\u5ef6\u9072\u6642\u9593\u3002\n\u5982\u9700\u81ea\u5b9a\u7fa9\u76e3\u63a7\uff0c\u8acb\u5728 Cloud Monitoring \u4e2d\u67e5\u8a62\u4ee5\u4e0b\u5169\u500b\u6307\u6a19\uff1a\n- `aiplatform.googleapis.com/prediction/online/private/response_count`\u9810\u6e2c\u97ff\u61c9\u7684\u6578\u91cf\u3002\u60a8\u53ef\u4ee5\u6309 `deployed_model_id` \u6216 HTTP \u97ff\u61c9\u4ee3\u78bc\u904e\u6ffe\u6b64\u6307\u6a19\u3002\n- `aiplatform.googleapis.com/prediction/online/private/prediction_latencies`\u9810\u6e2c\u8acb\u6c42\u7684\u5ef6\u9072\u6642\u9593\uff08\u4ee5\u6beb\u79d2\u7232\u55ae\u4f4d\uff09\u3002\u60a8\u53ea\u80fd\u91dd\u5c0d\u6210\u529f\u7684\u8acb\u6c42\u6309 `deployed_model_id` \u904e\u6ffe\u6b64\u6307\u6a19\u3002\n\u77ad\u89e3 [\u5982\u4f55\u5728 Metrics Explorer \u4e2d\u9078\u64c7\u3001\u67e5\u8a62\u548c\u986f\u793a\u9019\u4e9b\u6307\u6a19](https://cloud.google.com/monitoring/charts/metrics-selector?hl=zh-cn) \u3002\n## \u90e8\u7f72\u6a21\u578b\n\u60a8\u53ef\u4ee5\u5c0e\u5165\u65b0\u6a21\u578b\uff0c\u6216\u90e8\u7f72\u60a8\u5df2\u4e0a\u50b3\u7684\u73fe\u6709\u6a21\u578b\u3002\u5982\u9700\u4e0a\u50b3\u65b0\u6a21\u578b\uff0c\u8acb\u4f7f\u7528 [gcloud ai models upload](https://cloud.google.com/sdk/gcloud/reference/ai/models/upload?hl=zh-cn) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u5c07\u6a21\u578b\u5c0e\u5165 Vertex AI](https://cloud.google.com/vertex-ai/docs/model-registry/import-model?hl=zh-cn) \u3002\n- \u5982\u9700\u5c07\u6a21\u578b\u90e8\u7f72\u5230\u5c08\u7528\u7aef\u9ede\uff0c\u8acb\u53c3\u95b1 [\u90e8\u7f72\u6a21\u578b](https://cloud.google.com/vertex-ai/docs/predictions/deploy-model-api?hl=zh-cn#deploying_the_model) \u6307\u5357\u3002\u9664\u4e86\u6d41\u91cf\u62c6\u5206\u548c\u624b\u52d5\u5553\u7528\u8a2a\u554f\u65e5\u8a8c\u8a18\u9304\u4e4b\u5916\uff0c\u60a8\u9084\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u5176\u4ed6\u53ef\u7528\u65bc\u90e8\u7f72\u81ea\u5b9a\u7fa9\u8a13\u7df4\u6a21\u578b\u7684\u9078\u9805\u3002\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u5c08\u7528\u7aef\u9ede\u8207\u516c\u5171\u7aef\u9ede\u7684\u5340\u5225\uff0c\u8acb\u53c3\u95b1 [\u5c08\u7528\u7aef\u9ede\u7684\u9650\u5236](#limitations) \u3002\n- \u90e8\u7f72\u7aef\u9ede\u5f8c\uff0c\u60a8\u53ef\u4ee5\u5f9e\u5c08\u7528\u7aef\u9ede\u7684\u5143\u6578\u64da\u4e2d\u7372\u53d6\u9810\u6e2c URI\u3002- \u5982\u679c\u60a8\u6709\u5c08\u7528\u7aef\u9ede\u7684\u986f\u793a\u540d\u7a31\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\u4ee5\u7372\u53d6\u7aef\u9ede ID\uff1a```\nENDPOINT_ID=$(gcloud ai endpoints list \\\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 --region=REGION \\\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 --filter=displayName:ENDPOINT_DISPLAY_NAME \\\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 --format=\"value(ENDPOINT_ID.scope())\")\n```\u5426\u5247\uff0c\u5982\u9700\u67e5\u770b\u6240\u6709\u7aef\u9ede\u7684 ID \u548c\u986f\u793a\u540d\u7a31\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a```\ngcloud ai endpoints list --region=REGION\n```\n- \u6700\u5f8c\uff0c\u5982\u9700\u7372\u53d6\u9810\u6e2c URI\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a```\ngcloud beta ai endpoints describe ENDPOINT_ID \\\u00a0 --region=REGION \\\u00a0 --format=\"value(deployedModels.privateEndpoints.predictHttpUri)\"\n```\n### \u5c08\u7528\u9810\u6e2c URI \u683c\u5f0f\n**\u6ce8\u610f** \uff1a\u60a8\u53ef\u80fd\u6703\u770b\u5230\u820a\u7248\u5c08\u7528\u7aef\u9ede\u7684 `http://aiplatform` `` `.googleapis.com/v1/models/` `` `:predict` \u683c\u5f0f\uff0c\u5176\u4e2d \u662f\u9810\u6e2c\u7db2\u5740\u4e2d\u7684\u54c8\u5e0c ID\uff08\u5305\u542b 6 \u500b\u5b57\u6bcd\u6578\u5b57\u5b57\u7b26\uff09\uff0c \u662f\u5df2\u90e8\u7f72\u6a21\u578b\u7684\u54c8\u5e0c ID\uff08\u5305\u542b 21 \u500b\u5b57\u7b26\uff0c\u5169\u7d44\u5404\u5305\u542b 10 \u500b\u5b57\u6bcd\u6578\u5b57\u5b57\u7b26\uff0c\u901a\u904e\u9023\u5b57\u7b26\u9023\u63a5\uff09\u3002\n\u8207 Vertex AI \u516c\u5171\u7aef\u9ede\u76f8\u6bd4\uff0c\u5c08\u7528\u7aef\u9ede\u7684\u9810\u6e2c URI \u6709\u6240\u4e0d\u540c\uff1a\n`http://` `` `.aiplatform.googleapis.com/v1/models/` `` `:predict`\n\u5982\u679c\u60a8\u9078\u64c7\u53d6\u6d88\u90e8\u7f72\u7576\u524d\u6a21\u578b\u4e26\u4f7f\u7528\u65b0\u6a21\u578b\u91cd\u65b0\u90e8\u7f72\uff0c\u5247\u57df\u540d\u6703\u91cd\u8907\u4f7f\u7528\uff0c\u4f46\u8def\u5f91\u4e2d\u6703\u5305\u542b\u4e0d\u540c\u7684\u5df2\u90e8\u7f72\u6a21\u578b ID\u3002\n## \u5c07\u9810\u6e2c\u767c\u9001\u5230\u5c08\u7528\u7aef\u9ede\n- \u5728 VPC \u7db2\u7d61\u4e2d [\u5275\u5efa\u4e00\u500b Compute Engine \u5be6\u4f8b](https://cloud.google.com/compute/docs/instances/create-start-instance?hl=zh-cn) \u3002\u8acb\u52d9\u5fc5 [\u5728\u5df2\u8207 Vertex AI \u5c0d\u7b49\u4e92\u9023\u7684\u540c\u4e00 VPC \u7db2\u7d61\u4e2d\u5275\u5efa\u5be6\u4f8b](https://cloud.google.com/compute/docs/instances/create-start-instance?hl=zh-cn#creating_an_instance_in_a_specific_subnet) \u3002\n- \u901a\u904e SSH \u9023\u63a5\u5230\u60a8\u7684 Compute Engine \u5be6\u4f8b\uff0c\u4e26\u5b89\u88dd\u9810\u6e2c\u5ba2\u6236\u7aef\uff08\u5982\u679c\u9069\u7528\uff09\u3002\u5426\u5247\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 curl\u3002\n- \u5728\u9810\u6e2c\u6642\uff0c\u8acb\u4f7f\u7528\u5f9e\u6a21\u578b\u90e8\u7f72\u4e2d\u7372\u5f97\u7684\u9810\u6e2c\u7db2\u5740\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u60a8\u5c07\u5f9e\u540c\u4e00 VPC \u7db2\u7d61\u4e2d\u7684 Compute Engine \u5be6\u4f8b\u7684\u9810\u6e2c\u5ba2\u6236\u7aef\u767c\u9001\u8acb\u6c42\uff1a```\ncurl -X POST -d@PATH_TO_JSON_FILE \u00a0http://ENDPOINT_ID.aiplatform.googleapis.com/v1/models/DEPLOYED_MODEL_ID:predict\n```\u5728\u6b64\u793a\u4f8b\u8acb\u6c42\u4e2d\uff0c \u662f\u9810\u6e2c\u8acb\u6c42\u7684\u8def\u5f91\uff0c\u4fdd\u5b58\u7232 JSON \u6587\u4ef6\u3002\u4f8b\u5982 `example-request.json` \u3002## \u6e05\u7406\u8cc7\u6e90\n\u60a8\u53ef\u4ee5\u53d6\u6d88\u90e8\u7f72\u6a21\u578b\u4e26\u522a\u9664\u5c08\u7528\u7aef\u9ede\uff0c\u65b9\u6cd5\u8207\u516c\u5171\u6a21\u578b\u548c\u7aef\u9ede\u76f8\u540c\u3002\u60a8\u53ea\u80fd\u7232\u6bcf\u500b Google Cloud \u9805\u76ee\u5728\u4e00\u500b\u7db2\u7d61\u4e2d\u5275\u5efa\u5c08\u7528\u7aef\u9ede\uff0c\u5373\u4f7f\u60a8\u96a8\u5f8c\u81ea\u884c\u522a\u9664\u9019\u4e9b\u8cc7\u6e90\u4e5f\u662f\u5982\u6b64\u3002\u5982\u679c\u60a8\u9700\u8981\u5207\u63db\u5230\u5176\u4ed6\u7db2\u7d61\uff0c\u8acb\u806f\u7e6b vertex-ai-feedback@google.com\u3002\n## \u793a\u4f8b\uff1a\u6e2c\u8a66\u5171\u4eab VPC \u4e2d\u7684\u5c08\u7528\u7aef\u9ede\n\u6b64\u793a\u4f8b\u4f7f\u7528\u5169\u500b\u5177\u6709\u5171\u4eab VPC \u7db2\u7d61\u7684 Google Cloud \u9805\u76ee\uff1a\n- \u5bbf\u4e3b\u9805\u76ee\u8a17\u7ba1\u5171\u4eab VPC \u7db2\u7d61\u3002\n- \u5ba2\u6236\u7aef\u9805\u76ee\u8a17\u7ba1\u904b\u884c\u9810\u6e2c\u5ba2\u6236\u7aef\uff08\u4f8b\u5982 curl\uff09\u7684 Compute Engine \u5be6\u4f8b\u6216\u904b\u884c\u60a8\u81ea\u5df1\u7684 REST \u5ba2\u6236\u7aef\u7684 Compute Engine \u5be6\u4f8b\uff0c\u4ee5\u767c\u9001\u9810\u6e2c\u8acb\u6c42\u3002\n\u5728\u5ba2\u6236\u7aef\u9805\u76ee\u4e2d\u5275\u5efa Compute Engine \u5be6\u4f8b\u6642\uff0c\u8a72\u5be6\u4f8b\u5fc5\u9808\u4f4d\u65bc\u5bbf\u4e3b\u9805\u76ee\u7684\u5171\u4eab VPC \u7db2\u7d61\u4e2d\u7684\u81ea\u5b9a\u7fa9\u5b50\u7db2\u5167\uff0c\u4ee5\u53ca\u90e8\u7f72\u6a21\u578b\u7684\u5340\u57df\u4e2d\u3002\n- \u5728\u5bbf\u4e3b\u9805\u76ee\u4e2d\u7232\u5c08\u7528\u670d\u52d9\u8a2a\u554f\u901a\u9053\u5275\u5efa\u5c0d\u7b49\u4e92\u9023\u9023\u63a5\u3002\u904b\u884c [gcloud services vpc-peerings connect](https://cloud.google.com/sdk/gcloud/reference/services/vpc-peerings/connect?hl=zh-cn) \uff1a```\ngcloud services vpc-peerings connect \\\u00a0 --service=servicenetworking.googleapis.com \\\u00a0 --network=HOST_SHARED_VPC_NAME \\\u00a0 --ranges=PREDICTION_RESERVED_RANGE_NAME \\\u00a0 --project=HOST_PROJECT_ID\n```\n- \u4f7f\u7528\u5bbf\u4e3b\u9805\u76ee\u7684\u7db2\u7d61\u540d\u7a31\u5728\u5ba2\u6236\u7aef\u9805\u76ee\u4e2d\u5275\u5efa\u7aef\u9ede\u3002\u904b\u884c [gcloud beta ai endpoints create](https://cloud.google.com/sdk/gcloud/reference/beta/ai/endpoints/create?hl=zh-cn) \uff1a```\ngcloud beta ai endpoints create \\\u00a0 --display-name=ENDPOINT_DISPLAY_NAME \\\u00a0 --network=HOST_SHARED_VPC_NAME \\\u00a0 --region=REGION \\\u00a0 --project=CLIENT_PROJECT_ID\n```\n- \u4f7f\u7528\u5ba2\u6236\u7aef\u9805\u76ee\u4e2d\u7684\u9810\u6e2c\u5ba2\u6236\u7aef [\u767c\u9001\u9810\u6e2c\u8acb\u6c42](#sending-prediction-to-private-endpoint) \u3002## \u793a\u4f8b\uff1a\u4f7f\u7528\u975e RFC 1918 \u5b50\u7db2\u7684\u5c08\u7528\u7aef\u9ede\n\u6b64\u793a\u4f8b\u4f7f\u7528\u975e RFC 1918 \u5730\u5740\u5275\u5efa\u5c08\u7528\u7aef\u9ede\u3002\n- \u7232\u7bc0\u9ede\u3001pod \u548c\u670d\u52d9\u9810\u7559 IP \u5730\u5740\u7bc4\u570d\u3002\u7bc0\u9ede\u7684 IP \u5730\u5740\u7bc4\u570d\u5fc5\u9808\u5728 RFC 1918 \u7bc4\u570d\u5167\u3002\n- \u4f7f\u7528\u9810\u7559\u7684\u7bc4\u570d\u5275\u5efa\u5c08\u7528\u670d\u52d9\u8a2a\u554f\u901a\u9053\u7684\u5c0d\u7b49\u4e92\u9023\u9023\u63a5\u3002```\ngcloud services vpc-peerings connect \\\u00a0 --service=servicenetworking.googleapis.com \\\u00a0 --network=VPC_NAME \\\u00a0 --ranges=NODES_RANGE_NAME,PODS_RANGE_NAME,SERVICES_RANGE_NAME \\\u00a0 --project=PROJECT_ID\n```\n- \u5275\u5efa\u7aef\u9ede\uff0c\u4e26\u6307\u5b9a\u7bc0\u9ede\u3001pod \u548c\u670d\u52d9\u7684\u9810\u7559\u7bc4\u570d\u3002\u60a8\u5fc5\u9808\u901a\u904e REST API \u6307\u5b9a RequestedIpRangeConfig\u3002```\n# Sample json request for endpoint creation.{\u00a0 displayName: \"my_endpoint\",\u00a0 network: \"projects/<project_num>/global/networks/<network>\",\u00a0 requestedIpRangeConfig: {\u00a0 \u00a0 nodesIpRange: {\u00a0 \u00a0 \u00a0 ipAddress: \"xxx.xx.x.x\",\u00a0 \u00a0 \u00a0 ipPrefixLength: 22\u00a0 \u00a0 },\u00a0 \u00a0 podsIpRange: {\u00a0 \u00a0 \u00a0 ipAddress: \"yyy.yy.y.y\",\u00a0 \u00a0 \u00a0 ipPrefixLength: 17\u00a0 \u00a0 },\u00a0 \u00a0 servicesIpRange: {\u00a0 \u00a0 \u00a0 ipAddress: \"zzz.zz.z.z\",\u00a0 \u00a0 \u00a0 ipPrefixLength: 22\u00a0 \u00a0 }\u00a0 }}\n```\n- \u4f7f\u7528\u5ba2\u6236\u7aef\u9805\u76ee\u4e2d\u7684\u9810\u6e2c\u5ba2\u6236\u7aef [\u767c\u9001\u9810\u6e2c\u8acb\u6c42](#sending-prediction-to-private-endpoint) \u3002", "guide": "Vertex AI"}