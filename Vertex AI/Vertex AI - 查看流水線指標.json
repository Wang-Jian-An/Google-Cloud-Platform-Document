{"title": "Vertex AI - \u67e5\u770b\u6d41\u6c34\u7dda\u6307\u6a19", "url": "https://cloud.google.com/vertex-ai/docs/pipelines/metrics?hl=zh-cn", "abstract": "# Vertex AI - \u67e5\u770b\u6d41\u6c34\u7dda\u6307\u6a19\n\u5b9a\u7fa9\u3001\u69cb\u5efa\u548c\u904b\u884c\u6d41\u6c34\u7dda\u5f8c\uff0c\u60a8\u53ef\u4ee5\u5728 Metrics Explorer \u4e2d\u67e5\u770b\u8207\u6d41\u6c34\u7dda\u4f5c\u696d\u6216\u6d41\u6c34\u7dda\u4efb\u52d9\u76f8\u95dc\u7684\u6307\u6a19\u3002\u6b64\u5916\uff0c\u60a8\u9084\u53ef\u4ee5\u4f7f\u7528 Cloud Logging \u5275\u5efa\u57fa\u65bc\u65e5\u8a8c\u7684\u81ea\u5b9a\u7fa9\u6307\u6a19\u548c\u63d0\u9192\uff0c\u4ee5\u76e3\u63a7\u6d41\u6c34\u7dda\u6545\u969c\u7b49\u4e8b\u4ef6\u3002\n\u672c\u9801\u9762\u4ecb\u7d39\u77ad\u5982\u4f55\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- [\u5728 Metrics Explorer \u4e2d\u67e5\u770b\u6a19\u6e96 Vertex AI Pipelines \u6307\u6a19](#view_metrics_explorer) \n- [\u5728 Logs Explorer \u4e2d\u5275\u5efa\u548c\u67e5\u770b\u81ea\u5b9a\u7fa9\u6307\u6a19](#build-custom-metrics) \uff08\u9810\u89bd\u7248\uff09\n\u5728 Cloud Logging \u4e2d\u5275\u5efa\u548c\u67e5\u770b\u81ea\u5b9a\u7fa9\u6307\u6a19\u6703\u7522\u751f\u8207\u4e4b\u95dc\u806f\u7684\u8cbb\u7528\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Cloud Logging \u50f9\u683c](https://cloud.google.com/logging?hl=zh-cn#pricing) \u3002\n", "content": "## \u5728 Metrics Explorer \u4e2d\u67e5\u770b\u6a19\u6e96 Vertex AI Pipelines \u6307\u6a19\n**    \u9810\u89bd     ** \u6b64\u529f\u80fd\u9808\u9075\u5b88 [\u670d\u52d9\u5c08\u7528\u689d\u6b3e](https://cloud.google.com/terms/service-terms?hl=zh-cn#1) \u7684\u201c\u901a\u7528\u670d\u52d9\u689d\u6b3e\u201d\u90e8\u5206\u4e2d\u7684\u201c\u975e\u6b63\u5f0f\u7248\u7522\u54c1\u689d\u6b3e\u201d\u3002 \u975e\u6b63\u5f0f\u7248\u529f\u80fd\u201c\u6309\u539f\u6a23\u201d\u63d0\u4f9b\uff0c\u53ef\u80fd\u53ea\u80fd\u7372\u5f97\u6709\u9650\u7684\u652f\u6301\u3002 \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u767c\u4f48\u968e\u6bb5\u8aaa\u660e](https://cloud.google.com/products?hl=zh-cn#product-launch-stages) \u3002\n\u60a8\u53ef\u4ee5\u5728 Metrics Explorer \u4e2d\u67e5\u770b\u8207 Vertex AI Pipelines \u76f8\u95dc\u7684\u4ee5\u4e0b\u6307\u6a19\uff1a\n- **\u6d41\u6c34\u7dda\u4f5c\u696d\u7d1a\u6307\u6a19** \uff1a- \u4f7f\u7528 `Vertex Pipelines Job - PipelineJob duration` \u6307\u6a19 [\u67e5\u770b\u6d41\u6c34\u7dda\u904b\u884c\u7684\u904b\u884c\u6642\u6642\u9577](#pipelinejob_duration) \u3002\n- \u4f7f\u7528 `Location - Executing PipelineJobs` \u6307\u6a19 [\u67e5\u770b\u6d41\u6c34\u7dda\u904b\u884c\u6b21\u6578](#pipelinejob_runs) \u3002\n- **\u6d41\u6c34\u7dda\u4efb\u52d9\u7d1a\u6307\u6a19\uff1a** - \u4f7f\u7528 `Vertex Pipelines Job - Completed PipelineTasks` [\u67e5\u770b\u5df2\u5b8c\u6210\u7684\u6d41\u6c34\u7dda\u4efb\u52d9\u6578\u91cf](#pipelinetask_completed) \u3002\n- \u4f7f\u7528 `Location - Executing PipelineTasks` [\u67e5\u770b\u5728\u6d41\u6c34\u7dda\u904b\u884c\u4e2d\u57f7\u884c\u7684\u6d41\u6c34\u7dda\u4efb\u52d9\u6578](#pipelinetask_executed) \u3002\n### \u67e5\u770b\u6d41\u6c34\u7dda\u4f5c\u696d\u7684\u904b\u884c\u6642\u6642\u9577\n\u8acb\u6309\u7167\u4ee5\u4e0b\u8aaa\u660e\u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\u67e5\u770b `Vertex Pipelines Job - PipelineJob duration` \u6307\u6a19\uff1a\n- \u5c0e\u822a\u5230 **Metrics Explorer** \uff1a [\u8f49\u5230 Metrics Explorer](https://console.cloud.google.com/monitoring/metrics-explorer?hl=zh-cn) \n- \u5728 **\u6307\u6a19** \u5217\u8868\u4e2d\uff0c\u9078\u64c7 **Vertex Pipelines \u4f5c\u696d** > **Pipelinejob** > **PipelineJob \u6642\u9577** \u3002\n- \u9ede\u64ca **\u61c9\u7528** \u3002\n- \u53ef\u9078\uff1a\u5982\u9700\u904e\u6ffe\u67e5\u8a62\uff0c\u8acb\u9ede\u64ca **\u904e\u6ffe\u689d\u4ef6** \u4f86\u6307\u5b9a\u4e00\u500b\u6216\u591a\u500b\u689d\u4ef6\u3002\u4f8b\u5982\uff1a- \u5982\u9700\u67e5\u770b\u7279\u5b9a\u6d41\u6c34\u7dda\u4f5c\u696d\u7684\u904b\u884c\u6642\u6642\u9577\uff0c\u8acb\u4f7f\u7528 `pipeline_job_id` \u904e\u6ffe\u689d\u4ef6\u3002\n- \u5982\u9700\u67e5\u770b\u7279\u5b9a\u4f4d\u7f6e\u7684\u6d41\u6c34\u7dda\u4f5c\u696d\u7684\u904b\u884c\u6642\u6642\u9577\uff0c\u8acb\u4f7f\u7528 `location` \u904e\u6ffe\u689d\u4ef6\u3002\n- \u5982\u9700\u67e5\u770b `PIPELINE_JOB_RUNNING` \u3001 `PIPELINE_JOB_CANCELLED` \u6216 `PIPELINE_JOB_PENDING` \u72c0\u614b\u7684\u6d41\u6c34\u7dda\u4f5c\u696d\u7684\u904b\u884c\u6642\u6642\u9577\uff0c\u8acb\u4f7f\u7528 `run_state` \u904e\u6ffe\u689d\u4ef6\u3002\n### \u67e5\u770b\u6d41\u6c34\u7dda\u904b\u884c\u6578\n\u8acb\u6309\u7167\u4ee5\u4e0b\u8aaa\u660e\u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\u67e5\u770b `Location - Executing PipelineJobs` \u6307\u6a19\uff1a\n- \u5c0e\u822a\u5230 **Metrics Explorer** \uff1a [\u8f49\u5230 Metrics Explorer](https://console.cloud.google.com/monitoring/metrics-explorer?hl=zh-cn) \n- \u5728 **\u6307\u6a19** \u5217\u8868\u4e2d\uff0c\u9078\u64c7 **\u4f4d\u7f6e** > **Executing_vertexai_pipeline_jobs** > **\u57f7\u884c PipelineJobs** \u3002\n- \u9ede\u64ca **\u61c9\u7528** \u3002\n- \u53ef\u9078\uff1a\u5982\u9700\u904e\u6ffe\u67e5\u8a62\uff0c\u8acb\u9ede\u64ca **\u904e\u6ffe\u689d\u4ef6** \u4f86\u6307\u5b9a\u4e00\u500b\u6216\u591a\u500b\u689d\u4ef6\u3002\u4f8b\u5982\uff0c\u5982\u9700\u67e5\u770b\u7279\u5b9a\u4f4d\u7f6e\u7684\u6d41\u6c34\u7dda\u4f5c\u696d\u6578\uff0c\u8acb\u4f7f\u7528 `location` \u904e\u6ffe\u689d\u4ef6\u3002\n### \u67e5\u770b\u5df2\u5b8c\u6210\u7684\u6d41\u6c34\u7dda\u4efb\u52d9\u6578\u91cf\n\u8acb\u6309\u7167\u4ee5\u4e0b\u8aaa\u660e\u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\u67e5\u770b `Vertex Pipelines Job - Completed PipelineTasks` \u6307\u6a19\uff1a\n- \u5c0e\u822a\u5230 **Metrics Explorer** \uff1a [\u8f49\u5230 Metrics Explorer](https://console.cloud.google.com/monitoring/metrics-explorer?hl=zh-cn) \n- \u5728 **\u6307\u6a19** \u5217\u8868\u4e2d\uff0c\u9078\u64c7 **Vertex Pipelines \u4f5c\u696d** > **Pipelinejob** > **\u5df2\u5b8c\u6210\u7684 PipelineTasks** \u3002\n- \u9ede\u64ca **\u61c9\u7528** \u3002\n- \u53ef\u9078\uff1a\u5982\u9700\u904e\u6ffe\u67e5\u8a62\uff0c\u8acb\u9ede\u64ca **\u904e\u6ffe\u689d\u4ef6** \u4f86\u6307\u5b9a\u4e00\u500b\u6216\u591a\u500b\u689d\u4ef6\u3002\u4f8b\u5982\uff1a- \u5982\u9700\u67e5\u770b\u7279\u5b9a\u6d41\u6c34\u7dda\u904b\u884c\u4e2d\u5b8c\u6210\u7684\u4efb\u52d9\u6578\u91cf\uff0c\u8acb\u4f7f\u7528 `pipeline_job_id` \u904e\u6ffe\u689d\u4ef6\u3002\n- \u5982\u9700\u67e5\u770b\u7279\u5b9a\u4f4d\u7f6e\u7684\u6d41\u6c34\u7dda\u904b\u884c\u4e2d\u5b8c\u6210\u7684\u4efb\u52d9\u6578\u91cf\uff0c\u8acb\u4f7f\u7528 `location` \u904e\u6ffe\u689d\u4ef6\u3002\n### \u67e5\u770b\u5df2\u57f7\u884c\u7684\u6d41\u6c34\u7dda\u4efb\u52d9\u6578\u91cf\n\u8acb\u6309\u7167\u4ee5\u4e0b\u8aaa\u660e\u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\u67e5\u770b `Location - Executing PipelineTasks` \u6307\u6a19\uff1a\n- \u5c0e\u822a\u5230 **Metrics Explorer** \uff1a [\u8f49\u5230 Metrics Explorer](https://console.cloud.google.com/monitoring/metrics-explorer?hl=zh-cn) \n- \u5728 **\u6307\u6a19** \u5217\u8868\u4e2d\uff0c\u9078\u64c7 **\u4f4d\u7f6e** > **Executing_vertexai_pipeline_tasks** > **\u57f7\u884c PipelineTasks** \u3002\n- \u9ede\u64ca **\u61c9\u7528** \u3002\n- \u53ef\u9078\uff1a\u5982\u9700\u904e\u6ffe\u67e5\u8a62\uff0c\u8acb\u9ede\u64ca **\u904e\u6ffe\u689d\u4ef6** \u4f86\u6307\u5b9a\u4e00\u500b\u6216\u591a\u500b\u689d\u4ef6\u3002\u4f8b\u5982\uff0c\u5982\u9700\u67e5\u770b\u7232\u7279\u5b9a\u4f4d\u7f6e\u57f7\u884c\u7684\u6d41\u6c34\u7dda\u4efb\u52d9\u6578\uff0c\u8acb\u4f7f\u7528 `location` \u904e\u6ffe\u689d\u4ef6\u3002## \u5728 Logs Explorer \u4e2d\u5275\u5efa\u548c\u67e5\u770b\u81ea\u5b9a\u7fa9\u6307\u6a19\n\u60a8\u53ef\u4ee5\u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d [\u4f7f\u7528 Logs Explorer](https://cloud.google.com/logging/docs/view/logs-explorer-interface?hl=zh-cn) \u4f86\u5275\u5efa [\u57fa\u65bc\u65e5\u8a8c\u7684\u81ea\u5b9a\u7fa9\u6307\u6a19](https://cloud.google.com/logging/docs/logs-based-metrics?hl=zh-cn) \uff0c\u7528\u65bc\u8ddf\u8e64\u548c\u5206\u6790\u6d41\u6c34\u7dda\u65e5\u8a8c\u4e2d\u7684\u6a21\u5f0f\u3002\n### \u81ea\u5b9a\u7fa9\u6307\u6a19\u793a\u4f8b\n\u672c\u90e8\u5206\u4ecb\u7d39\u4e86\u60a8\u53ef\u4ee5\u5275\u5efa\u7684\u81ea\u5b9a\u7fa9\u6307\u6a19\u793a\u4f8b\u3002\u5176\u4e2d\u5305\u62ec\uff1a\n- [\u7232\u5931\u6557\u7684\u6d41\u6c34\u7dda\u4f5c\u696d\u5275\u5efa\u81ea\u5b9a\u7fa9\u6307\u6a19](#custom-metric-failed-jobs) \n- [\u7232\u6700\u7d42\u7684\u6d41\u6c34\u7dda\u72c0\u614b\u5275\u5efa\u81ea\u5b9a\u7fa9\u6307\u6a19](#custom-metric-final-state) \n- [\u67e5\u770b\u6d41\u6c34\u7dda\u4f5c\u696d\u5931\u6557\u7387](#pipeline-job-failure-rate) \u8981\u5275\u5efa\u7528\u65bc\u76e3\u63a7\u5931\u6557\u7684\u6d41\u6c34\u7dda\u4f5c\u696d\u7684\u57fa\u65bc\u65e5\u8a8c\u7684\u81ea\u5b9a\u7fa9 [\u8a08\u6578\u5668\u6307\u6a19](https://cloud.google.com/logging/docs/logs-based-metrics/counter-metrics?hl=zh-cn#create_a_counter_metric) \uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- \u5c0e\u822a\u5230 **\u65e5\u8a8c\u700f\u89bd\u5668** \uff1a [\u524d\u5f80\u65e5\u8a8c\u700f\u89bd\u5668](https://console.cloud.google.com/logs/query?hl=zh-cn) \n- \u9078\u64c7\u76f8\u61c9\u7684 Google Cloud \u9805\u76ee\u3002\n- \u5728 **\u8cc7\u6e90** \u4e0b\u62c9\u83dc\u55ae\u4e2d\uff0c\u9078\u64c7 **Vertex Pipelines \u4f5c\u696d** \u3002\n- \u5728 **\u4f4d\u7f6e** \u4e0b\u62c9\u83dc\u55ae\u4e2d\uff0c\u9078\u64c7\u6d41\u6c34\u7dda\u7684\u4f4d\u7f6e\u3002\n- \u5728 **\u6240\u6709 pipeline_job_id** \u4e0b\u62c9\u83dc\u55ae\u4e2d\uff0c\u9078\u64c7\u60a8\u7684\u6d41\u6c34\u7dda\u4f5c\u696d\u7684 ID\u3002\n- \u9ede\u64ca **\u61c9\u7528** \u3002\n- \u9ede\u64ca **\u5275\u5efa\u6307\u6a19** \u3002\n- \u5728 **\u5275\u5efa\u65e5\u8a8c\u6307\u6a19** \u5c4f\u5e55\u4e2d\uff0c\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a- \u8a2d\u7f6e **\u6307\u6a19\u985e\u578b** \uff1a\u9078\u64c7 **\u8a08\u6578\u5668** \u3002\n- \u5728 **\u8a73\u7d30\u4fe1\u606f** \u90e8\u5206\u4e2d\u8a2d\u7f6e\u4ee5\u4e0b\u5b57\u6bb5\uff1a- **\u65e5\u8a8c\u6307\u6a19\u540d\u7a31** \uff1a\u8f38\u5165\u65e5\u8a8c\u6307\u6a19\u7684\u540d\u7a31\uff0c\u4f8b\u5982`pipelinejob_failed`\u3002\u9078\u64c7\u5728 Google Cloud \u9805\u76ee\u7684\u57fa\u65bc\u65e5\u8a8c\u7684\u6307\u6a19\u4e2d\u552f\u4e00\u7684\u540d\u7a31\u3002\u60a8\u9700\u9075\u5faa\u4e00\u4e9b\u547d\u540d\u9650\u5236\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u554f\u984c\u6392\u67e5](https://cloud.google.com/logging/docs/logs-based-metrics/troubleshooting?hl=zh-cn#metric-name-restrictions) \u3002\n- **\u8aaa\u660e** \uff1a\u8f38\u5165\u6b64\u6307\u6a19\u7684\u8aaa\u660e\u3002\n- **\u55ae\u4f4d** \uff1a\u5c07\u6b64\u5b57\u6bb5\u7559\u7a7a\u6216\u8f38\u5165\u6578\u5b57 **1** \u3002\n- \u5728 **\u904e\u6ffe\u5668\u9078\u64c7** \u90e8\u5206\u4e2d\uff0c\u5b9a\u7fa9\u6307\u6a19\u904e\u6ffe\u5668\u3002 \u4f7f\u7528 [\u65e5\u8a8c\u8a18\u9304\u67e5\u8a62\u8a9e\u8a00](https://cloud.google.com/logging/docs/view/logging-query-language?hl=zh-cn) \u5275\u5efa\u4e00\u500b\u904e\u6ffe\u5668\uff0c\u7528\u65bc\u50c5\u6536\u96c6\u8981\u5728\u6307\u6a19\u4e2d\u8a08\u6578\u7684\u65e5\u8a8c\u689d\u76ee\uff0c\u4f8b\u5982\uff1a```\nresource.type=\"aiplatform.googleapis.com/PipelineJob\"\njsonPayload.state=\"PIPELINE_STATE_FAILED\"\n```\u60a8\u9084\u53ef\u4ee5\u4f7f\u7528\u6b63\u5247\u8868\u9054\u5f0f\u4f86\u5275\u5efa\u6307\u6a19\u7684\u904e\u6ffe\u5668\u3002\u9ede\u64ca **\u9810\u89bd\u65e5\u8a8c** \u53ef\u6253\u958b\u4e00\u500b\u9762\u677f\uff0c\u5176\u4e2d\u6703\u986f\u793a\u8207\u60a8\u7684\u904e\u6ffe\u689d\u4ef6\u5339\u914d\u7684\u65e5\u8a8c\u689d\u76ee\u3002\n- \u53ef\u9078\uff1a\u5728 **\u6a19\u7c64** \u90e8\u5206\u4e2d\u6dfb\u52a0\u6a19\u7c64\u3002\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5275\u5efa\u6a19\u7c64\uff0c\u8acb\u53c3\u95b1 [\u5275\u5efa\u6a19\u7c64](https://cloud.google.com/logging/docs/logs-based-metrics/labels?hl=zh-cn#create-label) \u3002\n- \u8981\u5275\u5efa\u6307\u6a19\uff0c\u8acb\u9ede\u64ca **\u5275\u5efa\u6307\u6a19** \u3002\n\u8981\u5275\u5efa\u7528\u65bc\u76e3\u63a7\u6d41\u6c34\u7dda\u4f5c\u696d\u6700\u7d42\u72c0\u614b\u7684\u57fa\u65bc\u65e5\u8a8c\u7684\u81ea\u5b9a\u7fa9 [\u8a08\u6578\u5668\u6307\u6a19](https://cloud.google.com/logging/docs/logs-based-metrics/counter-metrics?hl=zh-cn#create_a_counter_metric) \uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- \u5c0e\u822a\u5230\u65e5\u8a8c\u700f\u89bd\u5668\uff1a [\u524d\u5f80\u65e5\u8a8c\u700f\u89bd\u5668](https://console.cloud.google.com/logs/query?hl=zh-cn) \n- \u9078\u64c7\u76f8\u61c9\u7684 Google Cloud \u9805\u76ee\u3002\n- \u5728 **\u8cc7\u6e90** \u4e0b\u62c9\u83dc\u55ae\u4e2d\uff0c\u9078\u64c7 **Vertex Pipelines \u4f5c\u696d** \u3002\n- \u5728 **\u4f4d\u7f6e** \u4e0b\u62c9\u83dc\u55ae\u4e2d\uff0c\u9078\u64c7\u6d41\u6c34\u7dda\u7684\u4f4d\u7f6e\u3002\n- \u5728 **\u6240\u6709 pipeline_job_id** \u4e0b\u62c9\u83dc\u55ae\u4e2d\uff0c\u9078\u64c7\u60a8\u7684\u6d41\u6c34\u7dda\u4f5c\u696d\u7684 ID\u3002\n- \u9ede\u64ca **\u61c9\u7528** \u3002\n- \u9ede\u64ca **\u5275\u5efa\u6307\u6a19** \u3002\n- \u5728 **\u5275\u5efa\u65e5\u8a8c\u6307\u6a19** \u5c4f\u5e55\u4e2d\uff0c\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a- \u8a2d\u7f6e **\u6307\u6a19\u985e\u578b** \uff1a\u9078\u64c7 **\u8a08\u6578\u5668** \u3002\n- \u5728 **\u8a73\u7d30\u4fe1\u606f** \u90e8\u5206\u4e2d\u8a2d\u7f6e\u4ee5\u4e0b\u5b57\u6bb5\uff1a- **\u65e5\u8a8c\u6307\u6a19\u540d\u7a31** \uff1a\u8f38\u5165\u65e5\u8a8c\u6307\u6a19\u7684\u540d\u7a31\uff0c\u4f8b\u5982`Pipeline_state_final`\u3002\u9078\u64c7\u5728 Google Cloud \u9805\u76ee\u7684\u57fa\u65bc\u65e5\u8a8c\u7684\u6307\u6a19\u4e2d\u552f\u4e00\u7684\u540d\u7a31\u3002\u60a8\u9700\u9075\u5faa\u4e00\u4e9b\u547d\u540d\u9650\u5236\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u554f\u984c\u6392\u67e5](https://cloud.google.com/logging/docs/logs-based-metrics/troubleshooting?hl=zh-cn#metric-name-restrictions) \u3002\n- **\u8aaa\u660e** \uff1a\u8f38\u5165\u6b64\u6307\u6a19\u7684\u8aaa\u660e\u3002\n- **\u55ae\u4f4d** \uff1a\u5c07\u6b64\u5b57\u6bb5\u7559\u7a7a\u6216\u8f38\u5165\u6578\u5b57 **1** \u3002\n- \u5728 **\u904e\u6ffe\u5668\u9078\u64c7** \u90e8\u5206\u4e2d\uff0c\u5b9a\u7fa9\u6307\u6a19\u904e\u6ffe\u5668\u3002 \u4f7f\u7528 [\u65e5\u8a8c\u8a18\u9304\u67e5\u8a62\u8a9e\u8a00](https://cloud.google.com/logging/docs/view/logging-query-language?hl=zh-cn) \u5275\u5efa\u4e00\u500b\u904e\u6ffe\u5668\uff0c\u7528\u65bc\u50c5\u6536\u96c6\u8981\u5728\u6307\u6a19\u4e2d\u8a08\u6578\u7684\u65e5\u8a8c\u689d\u76ee\uff0c\u4f8b\u5982\uff1a```\nresource.type=\"aiplatform.googleapis.com/PipelineJob\"\njsonPayload.state=\"PIPELINE_STATE_SUCCEEDED\" OR\n\"PIPELINE_STATE_FAILED\" OR \"PIPELINE_STATE_CANCELLED\"\n```\u60a8\u9084\u53ef\u4ee5\u4f7f\u7528\u6b63\u5247\u8868\u9054\u5f0f\u4f86\u5275\u5efa\u6307\u6a19\u7684\u904e\u6ffe\u5668\u3002\u9ede\u64ca **\u9810\u89bd\u65e5\u8a8c** \u53ef\u6253\u958b\u4e00\u500b\u9762\u677f\uff0c\u5176\u4e2d\u6703\u986f\u793a\u8207\u60a8\u7684\u904e\u6ffe\u689d\u4ef6\u5339\u914d\u7684\u65e5\u8a8c\u689d\u76ee\u3002\n- \u53ef\u9078\uff1a\u5728 **\u6a19\u7c64** \u90e8\u5206\u4e2d\u6dfb\u52a0\u6a19\u7c64\u3002\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5275\u5efa\u6a19\u7c64\uff0c\u8acb\u53c3\u95b1 [\u5275\u5efa\u6a19\u7c64](https://cloud.google.com/logging/docs/logs-based-metrics/labels?hl=zh-cn#create-label) \u3002\n- \u8981\u5275\u5efa\u6307\u6a19\uff0c\u8acb\u9ede\u64ca **\u5275\u5efa\u6307\u6a19** \u3002\n\u6d41\u6c34\u7dda\u4f5c\u696d\u5931\u6557\u7387\u7684\u8a08\u7b97\u65b9\u5f0f\u7232\uff1a\u6700\u7d42\u72c0\u614b\u7684\u6d41\u6c34\u7dda\u4f5c\u696d\u6578\u8207\u5931\u6557\u7684\u6d41\u6c34\u7dda\u4f5c\u696d\u6578\u7684\u6bd4\u7387\u3002\u5982\u9700\u5275\u5efa\u4fe1\u606f\u4e2d\u5fc3\u4ee5\u76e3\u63a7\u6d41\u6c34\u7dda\u4f5c\u696d\u5931\u6557\u7387\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- \u5275\u5efa\u4e00\u500b\u6307\u6a19\u4ee5\u76e3\u63a7\u6700\u7d42\u72c0\u614b\u7684\u6d41\u6c34\u7dda\u4f5c\u696d\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u6700\u7d42\u7684\u6d41\u6c34\u7dda\u72c0\u614b\u5275\u5efa\u81ea\u5b9a\u7fa9\u6307\u6a19](#custom-metric-final-state) \u3002\n- \u5275\u5efa\u4e00\u500b\u6307\u6a19\u4ee5\u76e3\u63a7\u5931\u6557\u72c0\u614b\u7684\u6d41\u6c34\u7dda\u4f5c\u696d\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u5931\u6557\u7684\u6d41\u6c34\u7dda\u4f5c\u696d\u5275\u5efa\u81ea\u5b9a\u7fa9\u6307\u6a19](#custom-metric-failed-jobs) \u3002\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u7684 **\u76e3\u63a7** \u90e8\u5206\u4e2d\uff0c\u8f49\u5230 Metrics Explorer \u9801\u9762\u3002 [\u8f49\u5230 Metrics Explorer \u9801\u9762](https://console.cloud.google.com/monitoring/metrics-explorer?hl=zh-cn) \n- \u5728 **\u914d\u7f6e** \u6a19\u7c64\u9801\u4e2d\uff0c\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a- \u9ede\u64ca **\u6dfb\u52a0\u5176\u4ed6\u6307\u6a19** \u3002\n- \u9078\u64c7 **\u4ee5\u6bd4\u7387\u7684\u5f62\u5f0f\u986f\u793a\u6307\u6a19** \u9078\u9805\u3002\u9078\u64c7\u6b64\u9078\u9805\u5f8c\uff1a- **\u6642\u9593\u5e8f\u5217 A** \u7a97\u683c\u6703\u91cd\u547d\u540d\u7232 **\u5206\u5b50** \u3002\n- **\u6642\u9593\u5e8f\u5217 B** \u7a97\u683c\u6703\u91cd\u547d\u540d\u7232 **\u5206\u6bcd** \u3002\n- \u5728 **\u5206\u5b50** \u7a97\u683c\u4e2d\uff0c\u9ede\u64ca **\u9078\u64c7\u6307\u6a19** \u4ee5\u9078\u64c7\u7232\u5931\u6557\u7684\u6d41\u6c34\u7dda\u4f5c\u696d\u5275\u5efa\u7684\u6307\u6a19\u3002\n- \u5728 **\u5206\u6bcd** \u7a97\u683c\u4e2d\uff0c\u9ede\u64ca **\u9078\u64c7\u6307\u6a19** \u4ee5\u9078\u64c7\u7232\u6700\u7d42\u72c0\u614b\u6d41\u6c34\u7dda\u4f5c\u696d\u5275\u5efa\u7684\u6307\u6a19\u3002\n- \uff08\u53ef\u9078\uff09\u901a\u904e\u6dfb\u52a0\u904e\u6ffe\u689d\u4ef6\u6216\u66f4\u65b0\u5206\u7d44\u5b57\u6bb5\u548c\u6821\u6e96\u53c3\u6578\u4f86\u914d\u7f6e\u5206\u5b50\u548c\u5206\u6bcd\u3002\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u5982\u4f55\u6dfb\u52a0\u904e\u6ffe\u689d\u4ef6\u6216\u66f4\u65b0\u5206\u7d44\u5b57\u6bb5\u548c\u6821\u6e96\u53c3\u6578\uff0c\u8acb\u53c3\u95b1 [\u7e6a\u88fd\u6307\u6a19\u6bd4\u7387\u5716\u8868](https://cloud.google.com/monitoring/charts/metrics-explorer?hl=zh-cn#chart-ratio) \u3002 **\u6ce8\u610f** \uff1a\u7528\u4f5c\u5206\u5b50\u548c\u5206\u6bcd\u7684\u5169\u500b\u6307\u6a19\u5fc5\u9808\u5177\u6709\u76f8\u540c\u7684\u8cc7\u6e90\u985e\u578b\u3002\u5982\u679c\u60a8\u7232\u5206\u5b50\u548c\u5206\u6bcd\u9078\u64c7\u76f8\u540c\u7684\u6307\u6a19\uff0c\u8acb\u4f7f\u7528\u4e0d\u540c\u7684\u904e\u6ffe\u689d\u4ef6\u6216\u5206\u7d44\u65b9\u5f0f\uff0c\u4f7f\u5206\u5b50\u8207\u5206\u6bcd\u4e0d\u540c\u3002\n\u9078\u64c7\u5206\u5b50\u548c\u5206\u6bcd\u540e\uff0c\u6d41\u6c34\u7dda\u4f5c\u696d\u5931\u6557\u7387\u5c07\u986f\u793a\u5728\u5716\u8868\u4e2d\u3002- \u751f\u6210\u6d41\u6c34\u7dda\u4f5c\u696d\u5931\u6557\u7387\u5716\u8868\u5f8c\uff0c\u60a8\u53ef\u4ee5\u5c07\u5176\u6dfb\u52a0\u5230\u81ea\u5b9a\u7fa9\u4fe1\u606f\u4e2d\u5fc3\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u4fdd\u5b58\u5716\u8868\u4ee5\u4f9b\u65e5\u5f8c\u53c3\u8003](https://cloud.google.com/monitoring/charts/metrics-explorer?hl=zh-cn#save) \u3002\n- \u5982\u9700\u8907\u88fd\u5305\u542b\u5716\u8868\u914d\u7f6e\u7684\u7db2\u5740\uff0c\u8acb\u9ede\u64ca\u5716\u8868\u53f3\u4e0a\u89d2\u7684\u7701\u7565\u865f\u5716\u6a19\uff0c\u7136\u5f8c\u9ede\u64ca **\u901a\u904e\u7db2\u5740\u5171\u4eab** \u3002", "guide": "Vertex AI"}