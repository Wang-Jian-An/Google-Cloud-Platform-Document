{"title": "Vertex AI - Deploy and manage public index endpoints", "url": "https://cloud.google.com/vertex-ai/docs/vector-search/deploy-index-public", "abstract": "# Vertex AI - Deploy and manage public index endpoints\nThere are a few steps required before you can query an index:\n- Create an`IndexEndpoint`if needed, or reuse an existing`IndexEndpoint`.\n- Get the`IndexEndpoint`ID.\n- Deploy the index to the`IndexEndpoint`.", "content": "## Create an IndexEndpoint\nBefore using any of the command data below, make the following replacements:- : Display name of the index endpoint.\n- : The region where you are using Vertex AI.\n- : Your Google Cloud [project ID](/resource-manager/docs/creating-managing-projects#identifiers) .\n **Note:** To use a public endpoint,`--public-endpoint-enabled`must be specified.\nExecute the  following  command:Before using any of the request data, make the following replacements:- : Display name of the index endpoint.\n- : The region where you are using Vertex AI.\n- : Your Google Cloud [project ID](/resource-manager/docs/creating-managing-projects#identifiers) .\n- : Your project's automatically generated [project number](/resource-manager/docs/creating-managing-projects#identifiers) .\n **Note:** To use a public endpoint, the`publicEndpointEnabled`field must be`true`.\nHTTP method and URL:\n```\nPOST https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/indexEndpoints\n```\nRequest JSON body:\n```\n{\n \"display_name\": \"INDEX_ENDPOINT_NAME\",\n \"publicEndpointEnabled\": \"true\"\n}\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION/indexEndpoints/INDEX_ENDPOINT_ID/operations/OPERATION_ID\",\n \"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.aiplatform.v1.CreateIndexEndpointOperationMetadata\",\n \"genericMetadata\": {\n  \"createTime\": \"2022-01-13T04:09:56.641107Z\",\n  \"updateTime\": \"2022-01-13T04:09:56.641107Z\"\n }\n }\n}\n```\nYou can poll for the status of the operation until the response includes\n`\"done\": true`\n.\nTo learn how to install or update the Python, see [Install the Vertex AI SDK for Python](/vertex-ai/docs/start/use-vertex-ai-python-sdk) .    For more information, see the [   Python API reference documentation](/python/docs/reference/aiplatform/latest) .\n [View on GitHub](https://github.com/googleapis/python-aiplatform/blob/HEAD/samples/model-builder/vector_search/vector_search_create_index_endpoint_sample.py) \n```\ndef vector_search_create_index_endpoint(\u00a0 \u00a0 project: str, location: str, display_name: str) -> None:\u00a0 \u00a0 \"\"\"Create a vector search index endpoint.\u00a0 \u00a0 Args:\u00a0 \u00a0 \u00a0 \u00a0 project (str): Required. Project ID\u00a0 \u00a0 \u00a0 \u00a0 location (str): Required. The region name\u00a0 \u00a0 \u00a0 \u00a0 display_name (str): Required. The index endpoint display name\u00a0 \u00a0 \"\"\"\u00a0 \u00a0 # Initialize the Vertex AI client\u00a0 \u00a0 aiplatform.init(project=project, location=location)\u00a0 \u00a0 # Create Index Endpoint\u00a0 \u00a0 index_endpoint = aiplatform.MatchingEngineIndexEndpoint.create(\u00a0 \u00a0 \u00a0 \u00a0 display_name=display_name,\u00a0 \u00a0 \u00a0 \u00a0 public_endpoint_enabled=True,\u00a0 \u00a0 \u00a0 \u00a0 description=\"Matching Engine Index Endpoint\",\u00a0 \u00a0 )\u00a0 \u00a0 print(index_endpoint.name)\n```Use these instructions to create an index endpoint.- In the Vertex AI section of the Google Cloud console, go to  the **Deploy and Use** section. Select **Vector Search** [Go to  Vector Search](https://console.cloud.google.com/vertex-ai/matching-engine/indexes) \n- A list of your active indexes is displayed.\n- On the top of the page, select the **Index endpoints** tab. Your index endpoints are  displayed.\n- Click **add_boxCreate new index endpoint** . The Create a new index endpoint panel opens.\n- Enter a display name for the index endpoint.\n- In the **Region** field, select a region from the drop-down.\n- In the **Access** field, select **Standard** .\n- Click **Create** .\n## Deploy an index to an endpoint\n**Important:** Initial deployment of an index to an endpoint typically takes between 20 and 30 minutes.\nThis example uses the [gcloud ai index-endpoints deploy-index](/sdk/gcloud/reference/ai/index-endpoints/deploy-index) command.\nBefore using any of the command data below, make the following replacements:- : The ID of the index endpoint.\n- : A user specified string to uniquely identify the deployed index. It must start with a letter and contain only letters, numbers or underscores. See [DeployedIndex.id](https://cloud.google.com/vertex-ai/docs/reference/rpc/google.cloud.aiplatform.v1#google.cloud.aiplatform.v1.DeployedIndex) for format guidelines.\n- : Display name of the deployed index endpoint.\n- : The ID of the index.\n- : The region where you are using Vertex AI.\n- : Your Google Cloud [project ID](/resource-manager/docs/creating-managing-projects#identifiers) .\nExecute the  following  command:Before using any of the request data, make the following replacements:- : The ID of the index endpoint.\n- : A user specified string to uniquely identify the deployed index. It must start with a letter and contain only letters, numbers or underscores. See [DeployedIndex.id](https://cloud.google.com/vertex-ai/docs/reference/rpc/google.cloud.aiplatform.v1#google.cloud.aiplatform.v1.DeployedIndex) for format guidelines.\n- : Display name of the deployed index endpoint.\n- : The ID of the index.\n- : The region where you are using Vertex AI.\n- : Your Google Cloud [project ID](/resource-manager/docs/creating-managing-projects#identifiers) .\n- : Your project's automatically generated [project number](/resource-manager/docs/creating-managing-projects#identifiers) .\nHTTP method and URL:\n```\nPOST https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/indexEndpoints/INDEX_ENDPOINT_ID:deployIndex\n```\nRequest JSON body:\n```\n{\n \"deployedIndex\": {\n \"id\": \"DEPLOYED_INDEX_ID\",\n \"index\": \"projects/PROJECT_ID/locations/LOCATION/indexes/INDEX_ID\",\n \"displayName\": \"DEPLOYED_INDEX_ENDPOINT_NAME\"\n }\n}\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION/indexEndpoints/INDEX_ENDPOINT_ID/operations/OPERATION_ID\",\n \"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.aiplatform.v1.DeployIndexOperationMetadata\",\n \"genericMetadata\": {\n  \"createTime\": \"2022-10-19T17:53:16.502088Z\",\n  \"updateTime\": \"2022-10-19T17:53:16.502088Z\"\n },\n \"deployedIndexId\": \"DEPLOYED_INDEX_ID\"\n }\n}\n```\nTo learn how to install or update the Python, see [Install the Vertex AI SDK for Python](/vertex-ai/docs/start/use-vertex-ai-python-sdk) .    For more information, see the [   Python API reference documentation](/python/docs/reference/aiplatform/latest) .\n [View on GitHub](https://github.com/googleapis/python-aiplatform/blob/HEAD/samples/model-builder/vector_search/vector_search_deploy_index_sample.py) \n```\ndef vector_search_deploy_index(\u00a0 \u00a0 project: str,\u00a0 \u00a0 location: str,\u00a0 \u00a0 index_name: str,\u00a0 \u00a0 index_endpoint_name: str,\u00a0 \u00a0 deployed_index_id: str,) -> None:\u00a0 \u00a0 \"\"\"Deploy a vector search index to a vector search index endpoint.\u00a0 \u00a0 Args:\u00a0 \u00a0 \u00a0 \u00a0 project (str): Required. Project ID\u00a0 \u00a0 \u00a0 \u00a0 location (str): Required. The region name\u00a0 \u00a0 \u00a0 \u00a0 index_name (str): Required. The index to update. A fully-qualified index\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 resource name or a index ID. \u00a0Example:\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"projects/123/locations/us-central1/indexes/my_index_id\" or\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"my_index_id\".\u00a0 \u00a0 \u00a0 \u00a0 index_endpoint_name (str): Required. Index endpoint to deploy the index to.\u00a0 \u00a0 \u00a0 \u00a0 deployed_index_id (str): Required. The user specified ID of the DeployedIndex.\u00a0 \u00a0 \"\"\"\u00a0 \u00a0 # Initialize the Vertex AI client\u00a0 \u00a0 aiplatform.init(project=project, location=location)\u00a0 \u00a0 # Create the index instance from an existing index\u00a0 \u00a0 index = aiplatform.MatchingEngineIndex(index_name=index_name)\u00a0 \u00a0 # Create the index endpoint instance from an existing endpoint.\u00a0 \u00a0 index_endpoint = aiplatform.MatchingEngineIndexEndpoint(\u00a0 \u00a0 \u00a0 \u00a0 index_endpoint_name=index_endpoint_name\u00a0 \u00a0 )\u00a0 \u00a0 # Deploy Index to Endpoint\u00a0 \u00a0 index_endpoint = index_endpoint.deploy_index(\u00a0 \u00a0 \u00a0 \u00a0 index=index, deployed_index_id=deployed_index_id\u00a0 \u00a0 )\u00a0 \u00a0 print(index_endpoint.deployed_indexes)\n```Use these instructions to deploy your index to an endpoint.- In the Vertex AI section of the Google Cloud console, go to  the **Deploy and Use** section. Select **Vector Search** [Go to  Vector Search](https://console.cloud.google.com/vertex-ai/matching-engine/indexes) \n- A list of your active indexes is displayed.\n- Select the name of the index you want to deploy. The index details page opens.\n- From the index details page, click **add_box\n  Deploy to endpoint** . The index deployment panel opens.\n- Enter a display name - this name acts as an ID and can't be updated.\n- From the **Endpoint** drop-down, select the endpoint you want to deploy this index to.  Note: The endpoint is unavailable if the index is already deployed to it.\n- Optional: In the **Machine type** field, select either standard or high-memory.\n- Optional. Select **Enable autoscaling** to automatically resize the  number of nodes based on the demands of your workloads. The default number  of replicas is 2 if autoscaling is disabled.\n- Click **Deploy** to deploy your index to the endpoint. Note: It takes around 30 minutes to be deployed.\n**Important:** If you use a public endpoint, you are required to use OAuth authentication. In this case, don't specify the `deployedIndexAuthConfig` , which is used for private endpoint authentication.\n## Get the index domain name\nAfter the index is deployed, you need the domain name to be able to use for an online query. The value is available under `publicEndpointDomainName` .\n```\ncurl -H \"Content-Type: application/json\" -H \"Authorization: Bearer `gcloud auth print-access-token`\" \u00a0${ENDPOINT}/v1/projects/${PROJECT_ID}/locations/${REGION}/indexEndpoints/${INDEX_ENDPOINT_ID}\n```\n## Example Response\n```\n{\u00a0 \"name\": \"projects/181224308459/locations/us-central1/indexEndpoints/3370566089086861312\",\u00a0 \"displayName\": \"public-endpoint-test1\",\u00a0 \"deployedIndexes\": [\u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \"id\": \"test_index_public1\",\u00a0 \u00a0 \u00a0 \"index\": \"projects/181224308459/locations/us-central1/indexes/7733428228102029312\",\u00a0 \u00a0 \u00a0 \"displayName\": \"test_index_public1\",\u00a0 \u00a0 \u00a0 \"createTime\": \"2023-02-08T23:19:58.026843Z\",\u00a0 \u00a0 \u00a0 \"indexSyncTime\": \"2023-02-09T05:26:19.309417Z\",\u00a0 \u00a0 \u00a0 \"automaticResources\": {\u00a0 \u00a0 \u00a0 \u00a0 \"minReplicaCount\": 2,\u00a0 \u00a0 \u00a0 \u00a0 \"maxReplicaCount\": 2\u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \"deploymentGroup\": \"default\"\u00a0 \u00a0 }\u00a0 ],\u00a0 \"etag\": \"AMEw9yNkXQcSke8iqW9SYxfhj_hT9GCwPt1XlxVwJRSCxiXOYnG4CKrZM_X0oH-XN8tR\",\u00a0 \"createTime\": \"2023-02-08T22:44:20.285382Z\",\u00a0 \"updateTime\": \"2023-02-08T22:44:26.515162Z\",\u00a0 \"publicEndpointDomainName\": \"1957880287.us-central1-181224308459.vdb.vertexai.goog\"}\n```\n## Enable autoscaling\nVector Search supports autoscaling, which can automatically resize the number of nodes based on the demands of your workloads. When demand is high, nodes are added to the node pool, which won't exceed the maximum size you designate. When demand is low, the node pool scales back down to a minimum size that you designate. You can check the actual nodes in use and the changes by [monitoring the current replicas](/vertex-ai/docs/vector-search/monitor) .\nTo enable autoscaling, specify the `maxReplicaCount` and `minReplicaCount` when you deploy your index:\nThe following example uses the [gcloud ai index-endpoints deploy-index](/sdk/gcloud/reference/ai/index-endpoints/deploy-index) command.\nBefore using any of the command data below, make the following replacements:- : The ID of the index endpoint.\n- : A user specified string to uniquely identify the deployed index. It must start with a letter and contain only letters, numbers or underscores. See [DeployedIndex.id](https://cloud.google.com/vertex-ai/docs/reference/rpc/google.cloud.aiplatform.v1#google.cloud.aiplatform.v1.DeployedIndex) for format guidelines.\n- : Display name of the deployed index.\n- : The ID of the index.\n- : Minimum number of machine replicas the deployed index will be always deployed on. If specified, the value must be equal to or larger than 1.\n- : Maximum number of machine replicas the deployed index could be deployed on.\n- : The region where you are using Vertex AI.\n- : Your Google Cloud [project ID](/resource-manager/docs/creating-managing-projects#identifiers) .\nExecute the  following  command:Before using any of the request data, make the following replacements:- : The ID of the index endpoint.\n- : A user specified string to uniquely identify the deployed index. It must start with a letter and contain only letters, numbers or underscores. See [DeployedIndex.id](https://cloud.google.com/vertex-ai/docs/reference/rpc/google.cloud.aiplatform.v1#google.cloud.aiplatform.v1.DeployedIndex) for format guidelines.\n- : Display name of the deployed index.\n- : The ID of the index.\n- : Minimum number of machine replicas the deployed index will be always deployed on. If specified, the value must be equal to or larger than 1.\n- : Maximum number of machine replicas the deployed index could be deployed on.\n- : The region where you are using Vertex AI.\n- : Your Google Cloud [project ID](/resource-manager/docs/creating-managing-projects#identifiers) .\n- : Your project's automatically generated [project number](/resource-manager/docs/creating-managing-projects#identifiers) .\nHTTP method and URL:\n```\nPOST https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/indexEndpoints/INDEX_ENDPOINT_ID:deployIndex\n```\nRequest JSON body:\n```\n{\n \"deployedIndex\": {\n \"id\": \"DEPLOYED_INDEX_ID\",\n \"index\": \"projects/PROJECT_NUMBER/locations/LOCATION/indexes/INDEX_ID\",\n \"displayName\": \"DEPLOYED_INDEX_NAME\",\n \"automaticResources\": {\n  \"minReplicaCount\": MIN_REPLICA_COUNT,\n  \"maxReplicaCount\": MAX_REPLICA_COUNT\n }\n }\n}\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION/indexEndpoints/INDEX_ENDPOINT_ID/operations/OPERATION_ID\",\n \"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.aiplatform.v1.DeployIndexOperationMetadata\",\n \"genericMetadata\": {\n  \"createTime\": \"2023-10-19T17:53:16.502088Z\",\n  \"updateTime\": \"2023-10-19T17:53:16.502088Z\"\n },\n \"deployedIndexId\": \"DEPLOYED_INDEX_ID\"\n }\n}\n```\nYou can only enable autoscaling from the console during index deployment.- In the Vertex AI section of the Google Cloud console, go to  the **Deploy and Use** section. Select **Vector Search** [Go to  Vector Search](https://console.cloud.google.com/vertex-ai/matching-engine/indexes) \n- A list of your active indexes is displayed.\n- Select the name of the index you want to deploy. The index details page opens.\n- From the index details page, click **add_box\n  Deploy to endpoint** . The index deployment panel opens.\n- Enter a display name - this name acts as an ID and can't be updated.\n- From the **Endpoint** drop-down, select the endpoint you want to deploy this index to.  Note: The endpoint is unavailable if the index is already deployed to it.\n- Optional: In the **Machine type** field, select either standard or high-memory.\n- Optional. Select **Enable autoscaling** to automatically resize the  number of nodes based on the demands of your workloads. The default number  of replicas is 2 if autoscaling is disabled.\n- If both`minReplicaCount`and`maxReplicaCount`are not set, they are set to 2 by default.\n- If only`maxReplicaCount`is set,`minReplicaCount`is set to 2 by default.\n- If only`minReplicaCount`is set,`maxReplicaCount`is set to equal`minReplicaCount`.\n**Note:** If your `DeployedIndex` uses fewer than two replicas per shard, then it is excluded from the [Vertex AI Service Level Agreement](/vertex-ai/sla) . For your `DeployedIndex` to be covered by the SLA, set `minReplicaCount` to 2 or greater.\n## Mutate a DeployedIndex\nYou can use `MutateDeployedIndex` API to update the deployment resources (for example, `minReplicaCount` and `maxReplicaCount` ) of an already deployed index.\n- Users aren't allowed to change the`machineType`after the index is deployed.\n- If`maxReplicaCount`isn't specified in the request, the`DeployedIndex`keeps using the existing`maxReplicaCount`.\nThe following example uses the [gcloud ai index-endpoints mutate-deployed-index](/sdk/gcloud/reference/ai/index-endpoints/mutate-deployed-index) command.\nBefore using any of the command data below, make the following replacements:- : The ID of the index endpoint.\n- : A user specified string to uniquely identify the deployed index. It must start with a letter and contain only letters, numbers or underscores. See [DeployedIndex.id](https://cloud.google.com/vertex-ai/docs/reference/rpc/google.cloud.aiplatform.v1#google.cloud.aiplatform.v1.DeployedIndex) for format guidelines.\n- : Minimum number of machine replicas the deployed index will be always deployed on. If specified, the value must be equal to or larger than 1.\n- : Maximum number of machine replicas the deployed index could be deployed on.\n- : The region where you are using Vertex AI.\n- : Your Google Cloud [project ID](/resource-manager/docs/creating-managing-projects#identifiers) .\nExecute the  following  command:Before using any of the request data, make the following replacements:- : The ID of the index endpoint.\n- : A user specified string to uniquely identify the deployed index. It must start with a letter and contain only letters, numbers or underscores. See [DeployedIndex.id](https://cloud.google.com/vertex-ai/docs/reference/rpc/google.cloud.aiplatform.v1#google.cloud.aiplatform.v1.DeployedIndex) for format guidelines.\n- : Minimum number of machine replicas the deployed index will be always deployed on. If specified, the value must be equal to or larger than 1.\n- : Maximum number of machine replicas the deployed index could be deployed on.\n- : The region where you are using Vertex AI.\n- : Your Google Cloud [project ID](/resource-manager/docs/creating-managing-projects#identifiers) .\n- : Your project's automatically generated [project number](/resource-manager/docs/creating-managing-projects#identifiers) .\nHTTP method and URL:\n```\nPOST https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/indexEndpoints/INDEX_ENDPOINT_ID:mutateDeployedIndex\n```\nRequest JSON body:\n```\n{\n\"deployedIndex\": {\n \"id\": \"DEPLOYED_INDEX_ID\",\n \"index\": \"projects/PROJECT_ID/locations/LOCATION/indexes/INDEX_ID\",\n \"displayName\": \"DEPLOYED_INDEX_NAME\"\n}\n}\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n\"name\": \"projects/PROJECT_NUMBER/locations/LOCATION/indexEndpoints/INDEX_ENDPOINT_ID/operations/OPERATION_ID\",\n\"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.aiplatform.v1.DeployIndexOperationMetadata\",\n \"genericMetadata\": {\n \"createTime\": \"2020-10-19T17:53:16.502088Z\",\n \"updateTime\": \"2020-10-19T17:53:16.502088Z\"\n },\n \"deployedIndexId\": \"DEPLOYED_INDEX_ID\"\n}\n}\n```\n**Note:** If your `DeployedIndex` uses fewer than two replicas per shard, then it's excluded from the [Vertex AI Service Level Agreement](/vertex-ai/sla) . For your `DeployIndex` to be covered by the SLA, set `minReplicaCount` to 2 or greater.\n## List IndexEndpoints\nTo list your `IndexEndpoint` resources and view the information of any associated `DeployedIndex` instances, run the following code:\nThe following example uses the [gcloud ai index-endpoints list command](/sdk/gcloud/reference/ai/index-endpoints/list) .\nBefore using any of the command data below, make the following replacements:- : The region where you are using Vertex AI.\n- : Your Google Cloud [project ID](/resource-manager/docs/creating-managing-projects#identifiers) .\nExecute the  following  command:Before using any of the request data, make the following replacements:- : The region where you are using Vertex AI.\n- : Your Google Cloud [project ID](/resource-manager/docs/creating-managing-projects#identifiers) .\n- : Your project's automatically generated [project number](/resource-manager/docs/creating-managing-projects#identifiers) .\nHTTP method and URL:\n```\nGET https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/indexEndpoints\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"indexEndpoints\": [ {\n  \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION/indexEndpoints/INDEX_ENDPOINT_ID\",\n  \"displayName\": \"INDEX_ENDPOINT_DISPLAY_NAME\",\n  \"deployedIndexes\": [  {\n   \"id\": \"DEPLOYED_INDEX_ID\",\n   \"index\": \"projects/PROJECT_NUMBER/locations/LOCATION/indexes/INDEX_ID\",\n   \"displayName\": \"DEPLOYED_INDEX_DISPLAY_NAME\",\n   \"createTime\": \"2021-06-04T02:23:40.178286Z\",\n   \"privateEndpoints\": {\n   \"matchGrpcAddress\": \"GRPC_ADDRESS\"\n   },\n   \"indexSyncTime\": \"2022-01-13T04:22:00.151916Z\",\n   \"automaticResources\": {\n   \"minReplicaCount\": 2,\n   \"maxReplicaCount\": 10\n   }\n  }\n  ],\n  \"etag\": \"AMEw9yP367UitPkLo-khZ1OQvqIK8Q0vLAzZVF7QjdZ5O3l7Zow-mzBo2l6xmiuuMljV\",\n  \"createTime\": \"2021-03-17T04:47:28.460373Z\",\n  \"updateTime\": \"2021-06-04T02:23:40.930513Z\",\n  \"network\": \"VPC_NETWORK_NAME\"\n }\n ]\n}\n```\nUse these instructions to view a list of your index endpoints.- In the Vertex AI section of the Google Cloud console, go to  the **Deploy and Use** section. Select **Vector Search** [Go to  Vector Search](https://console.cloud.google.com/vertex-ai/matching-engine/indexes) \n- On the top of the page, select the **Index endpoint** tab.\n- All of the existing index endpoints are displayed.\nFor more information, see the reference documentation for [IndexEndpoint](/vertex-ai/docs/reference/rest/v1/projects.locations.indexEndpoints) .\n## Undeploy an index\nTo undeploy an index from endpoint, run the following code:\nThe following example uses the [gcloud ai index-endpoints undeploy-index command](/sdk/gcloud/reference/ai/index-endpoints/undeploy-index) .\nBefore using any of the command data below, make the following replacements:- : The ID of the index endpoint.\n- : A user specified string to uniquely identify the deployed index. It must start with a letter and contain only letters, numbers or underscores. See [DeployedIndex.id](https://cloud.google.com/vertex-ai/docs/reference/rpc/google.cloud.aiplatform.v1#google.cloud.aiplatform.v1.DeployedIndex) for format guidelines.\n- : The region where you are using Vertex AI.\n- : Your Google Cloud [project ID](/resource-manager/docs/creating-managing-projects#identifiers) .\nExecute the  following  command:Before using any of the request data, make the following replacements:- : The ID of the index endpoint.\n- : A user specified string to uniquely identify the deployed index. It must start with a letter and contain only letters, numbers or underscores. See [DeployedIndex.id](https://cloud.google.com/vertex-ai/docs/reference/rpc/google.cloud.aiplatform.v1#google.cloud.aiplatform.v1.DeployedIndex) for format guidelines.\n- : The region where you are using Vertex AI.\n- : Your Google Cloud [project ID](/resource-manager/docs/creating-managing-projects#identifiers) .\n- : Your project's automatically generated [project number](/resource-manager/docs/creating-managing-projects#identifiers) .\nHTTP method and URL:\n```\nPOST https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/indexEndpoints/INDEX_ENDPOINT_ID:undeployIndex\n```\nRequest JSON body:\n```\n{\n \"deployed_index_id\": \"DEPLOYED_INDEX_ID\"\n}\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION/indexEndpoints/INDEX_ENDPOINT_ID/operations/OPERATION_ID\",\n \"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.aiplatform.v1.UndeployIndexOperationMetadata\",\n \"genericMetadata\": {\n  \"createTime\": \"2022-01-13T04:09:56.641107Z\",\n  \"updateTime\": \"2022-01-13T04:09:56.641107Z\"\n }\n }\n}\n```\nUse these instructions to undeploy an index from an endpoint.- In the Vertex AI section of the Google Cloud console, go to  the **Deploy and Use** section. Select **Vector Search** [Go to  Vector Search](https://console.cloud.google.com/vertex-ai/matching-engine/indexes) \n- A list of your active indexes is displayed.\n- Select the index you want to undeploy. The index details page opens.\n- Under the **Deployed indexes** section, identify the index version you want to undeploy.\n- Click themore_vertoptions  menu that is in the same row as the index and select **Undeploy** .\n- A confirmation screen opens. Click **Undeploy** . Note: It can take up to 30 minutes to be undeployed.\n**Note:** It takes 10 to 20 minutes for Google backend jobs to clean up the deployment. You can't reuse the DeployedIndex ID until after the deployment is cleaned up.\n## Delete an IndexEndpoint\nBefore you delete an `IndexEndpoint` , you must [undeploy](#undeploy-index) the all indexes that are deployed to the endpoint.\nThe following example uses the [gcloud ai index-endpoints delete command](/sdk/gcloud/reference/ai/index-endpoints/delete) .\nBefore using any of the command data below, make the following replacements:- : The ID of the index endpoint.\n- : The region where you are using Vertex AI.\n- : Your Google Cloud [project ID](/resource-manager/docs/creating-managing-projects#identifiers) .\nExecute the  following  command:Before using any of the request data, make the following replacements:- : The ID of the index endpoint.\n- : The region where you are using Vertex AI.\n- : Your Google Cloud [project ID](/resource-manager/docs/creating-managing-projects#identifiers) .\n- : Your project's automatically generated [project number](/resource-manager/docs/creating-managing-projects#identifiers) .\nHTTP method and URL:\n```\nDELETE https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/indexEndpoints/INDEX_ENDPOINT_ID\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION/indexEndpoints/INDEX_ENDPOINT_ID/operations/OPERATION_ID\",\n \"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.aiplatform.v1.DeleteOperationMetadata\",\n \"genericMetadata\": {\n  \"createTime\": \"2022-01-13T04:36:19.142203Z\",\n  \"updateTime\": \"2022-01-13T04:36:19.142203Z\"\n }\n },\n \"done\": true,\n \"response\": {\n \"@type\": \"type.googleapis.com/google.protobuf.Empty\"\n }\n}\n```\nUse these instructions to delete an index endpoint.- In the Vertex AI section of the Google Cloud console, go to  the **Deploy and Use** section. Select **Vector Search** [Go to  Vector Search](https://console.cloud.google.com/vertex-ai/matching-engine/indexes) \n- On the top of the page, select the **Index endpoint** tab.\n- All of the existing index endpoints are displayed.\n- Click themore_vertoptions  menu that is in the same row as the index you want to delete and select **Delete** .\n- A confirmation screen opens. Click **Delete** . Your index endpoint is now deleted.\n**Note:** It takes 10 to 20 minutes for Google backend jobs to clean up the deployment. You can't reuse the DeployedIndex ID until after the deployment is cleaned up.", "guide": "Vertex AI"}