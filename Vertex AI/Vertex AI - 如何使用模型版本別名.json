{"title": "Vertex AI - \u5982\u4f55\u4f7f\u7528\u6a21\u578b\u7248\u672c\u5225\u540d", "url": "https://cloud.google.com/vertex-ai/docs/model-registry/model-alias?hl=zh-cn", "abstract": "# Vertex AI - \u5982\u4f55\u4f7f\u7528\u6a21\u578b\u7248\u672c\u5225\u540d\n\u6a21\u578b\u5225\u540d\u662f\u5c0d\u6a21\u578b\u8cc7\u6e90\u5167\u67d0\u500b\u552f\u4e00\u6a21\u578b\u7248\u672c\u7684\u53ef\u8b8a\u547d\u540d\u5f15\u7528\u3002\u5225\u540d\u662f\u201c\u53ef\u8b8a\u7684\u201d\uff0c\u5b83\u5011\u53ef\u4ee5\u5f9e\u4e00\u500b\u6a21\u578b\u7248\u672c\u79fb\u52d5\u5230\u53e6\u4e00\u500b\u6a21\u578b\u7248\u672c\uff1b\u540c\u6642\u5225\u540d\u4e5f\u662f\u201c\u547d\u540d\u7684\u201d\uff0c\u5b83\u5011\u662f\u7528\u6236\u5b9a\u7fa9\u7684\u4efb\u610f\u5b57\u7b26\u4e32\u3002\u6a21\u578b\u5225\u540d\u8b93\u60a8\u53ef\u4ee5\u901a\u904e\u5f15\u7528\u4f86\u7372\u53d6\u6216\u90e8\u7f72\u7279\u5b9a\u7684\u6a21\u578b\u7248\u672c\uff0c\u800c\u7121\u9700\u77e5\u9053\u8a72\u7279\u5b9a\u7248\u672c\u7684 ID\u3002\u9019\u7a2e\u65b9\u6cd5\u985e\u4f3c\u65bc Docker \u6a19\u8a18\u5f15\u7528\u6216 Git \u4e2d\u7684\u5206\u652f\u5f15\u7528\u3002\n\u7576\u60a8\u5728 Model Registry \u4e2d\u5275\u5efa\u65b0\u6a21\u578b\u6642\uff0c\u7b2c\u4e00\u500b\u7248\u672c\u6703\u81ea\u52d5\u7372\u5f97 \u5225\u540d\u3002\u5982\u679c\u7528\u6236\u5728\u6a21\u578b\u4e0a\u904b\u884c\u547d\u4ee4\u6642\u672a\u6307\u5b9a\u7279\u5b9a\u7248\u672c\uff0c\u5247\u9ed8\u8a8d\u5225\u540d\u6703\u5f15\u7528\u4f7f\u7528\u7684\u6a21\u578b\u7248\u672c\u3002\u6a21\u578b\u5fc5\u9808\u6709\u4e00\u500b\u7248\u672c\u59cb\u7d42\u5305\u542b\u9ed8\u8a8d\u5225\u540d\u3002\u5426\u5247\uff0c\u9ed8\u8a8d\u5225\u540d\u5c31\u6703\u8207\u4efb\u4f55\u5176\u4ed6\u7528\u6236\u5b9a\u7fa9\u7684\u5225\u540d\u6c92\u6709\u5340\u5225\u3002\n\u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u76f8\u95dc\u4eba\u54e1\u53ef\u4ee5\u85c9\u52a9\u5225\u540d\u6a19\u8a18\u4f86\u5feb\u901f\u77ad\u89e3\u54ea\u500b\u6a21\u578b\u662f\u53ef\u90e8\u7f72\u7684\u7a69\u5b9a\u7248\u672c\u3002\u9664\u4e86\u9ed8\u8a8d\u5225\u540d\u4e4b\u5916\uff0c\u60a8\u9084\u53ef\u4ee5\u5728 Model Registry \u4e2d\u5275\u5efa\u81ea\u5df1\u7684\u81ea\u5b9a\u7fa9\u5225\u540d\u4e26\u5c07\u5176\u5206\u914d\u7d66\u6a21\u578b\u3002\n\u5728 Model Registry \u4e2d\uff0c\u60a8\u53ef\u4ee5\u901a\u904e\u67e5\u770b\u5225\u540d\u5217\u4f86\u5feb\u901f\u77ad\u89e3\u54ea\u500b\u6a21\u578b\u7248\u672c\u5305\u542b\u9ed8\u8a8d\u5225\u540d\u3002\n\u5982\u679c\u60a8\u6c7a\u5b9a\u5c07\u5225\u540d\u91cd\u65b0\u5206\u914d\u7d66\u5176\u4ed6\u6a21\u578b\u7248\u672c\uff0c\u5247\u53ef\u4ee5\u8f15\u9b06\u5c07\u5225\u540d\u79fb\u52d5\u5230\u5176\u4ed6\u7248\u672c\u3002\n**\u6ce8\u610f** \uff1a\u7232\u4e86\u8207 `version_id` \u5340\u5206\uff0c\u7248\u672c\u5225\u540d\u7684\u5fc5\u9700\u683c\u5f0f\u7232 `[a-z][a-zA-Z0-9-]{0,126}[a-z0-9]` \u3002\u7cfb\u7d71\u5c07\u7232\u6a21\u578b\u7684\u7b2c\u4e00\u500b\u7248\u672c\u5275\u5efa\u9ed8\u8a8d\u7248\u672c\u5225\u540d\uff0c\u4e26\u4e14\u6a21\u578b\u53ea\u80fd\u6709\u4e00\u500b\u9ed8\u8a8d\u7248\u672c\u5225\u540d\u3002\n\u4f7f\u7528\u5225\u540d\u7684\u4e00\u4e9b\u6ce8\u610f\u4e8b\u9805\uff1a\n- \u7248\u672c\u5225\u540d\u61c9\u8a72\u662f\u552f\u4e00\u7684\uff1b\u4e00\u500b\u5225\u540d\u4e00\u6b21\u53ea\u80fd\u5206\u914d\u7d66\u6a21\u578b\u7684\u4e00\u500b\u7248\u672c\u3002\n- \u7248\u672c\u5225\u540d\u5fc5\u9808\u662f\u975e\u6578\u503c\u3002\n- \u5982\u679c\u60a8\u6c92\u6709\u7232\u751f\u7522\u7528\u4f8b\u6307\u5b9a\u6a21\u578b\u7248\u672c\uff0c\u5247\u7cfb\u7d71\u6703\u4f7f\u7528\u9ed8\u8a8d\u6a21\u578b\u3002\n- \u5225\u540d\u8207\u6a19\u7c64\u4e0d\u540c\u3002 [\u9ede\u64ca\u6b64\u8655\u8a73\u7d30\u77ad\u89e3\u6a21\u578b\u6a19\u7c64](https://cloud.google.com/vertex-ai/docs/model-registry/model-labels?hl=zh-cn) \u3002\n- \u5982\u679c\u60a8\u61c9\u7528\u5728\u5176\u4ed6\u6a21\u578b\u7248\u672c\u4e2d\u4f7f\u7528\u7684\u73fe\u6709\u5225\u540d\uff0c\u5247\u7cfb\u7d71\u6703\u5f9e\u8a72\u7248\u672c\u4e2d\u79fb\u9664\u8a72\u5225\u540d\u3002", "content": "## \u5c07\u6a21\u578b\u7248\u672c\u8a2d\u7f6e\u7232\u9ed8\u8a8d\u7248\u672c\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u9032\u5165 Vertex AI **Model Registry** \u9801\u9762\u3002 [\u9032\u5165 Model Registry \u9801\u9762](https://console.cloud.google.com/vertex-ai/models?hl=zh-cn) \n- \u5f9e Model Registry \u4e2d\uff0c\u9078\u64c7\u8981\u4fee\u6539\u7684\u6a21\u578b\u7684\u540d\u7a31\u3002\u6a21\u578b\u8a73\u60c5\u7a97\u53e3\u96a8\u5373\u6253\u958b\u3002\u5176\u4e2d\u6703\u5217\u51fa\u6240\u6709\u6a21\u578b\u7248\u672c\u3002\u5176\u4e2d\u4e00\u500b\u6a21\u578b\u7248\u672c\u5177\u6709 **\u9ed8\u8a8d** \u5225\u540d\u3002\n- \u5728\u8981\u5c07\u5176\u5206\u914d\u7232\u9ed8\u8a8d\u7248\u672c\u7684\u6a21\u578b\u7248\u672c\u4e0a\uff0c\u9078\u64c7 **\u64cd\u4f5c** \u6309\u9215\u3002\n- \u9ede\u64ca **\u8a2d\u7232\u9ed8\u8a8d** \u3002## \u5411\u6a21\u578b\u7248\u672c\u6dfb\u52a0\u5225\u540d\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u9032\u5165 Vertex AI **Model Registry** \u9801\u9762\u3002 [\u9032\u5165 Model Registry \u9801\u9762](https://console.cloud.google.com/vertex-ai/models?hl=zh-cn) \n- \u5f9e Model Registry \u4e2d\uff0c\u9078\u64c7\u8981\u4fee\u6539\u7684\u6a21\u578b\u7684\u540d\u7a31\u3002\u6a21\u578b\u8a73\u60c5\u7a97\u53e3\u96a8\u5373\u6253\u958b\u3002\n- \u5f9e\u8a73\u60c5\u9801\u9762\u4e2d\uff0c\u9078\u64c7\u6240\u9700\u7684\u6a21\u578b\u7248\u672c\uff0c\u7136\u5f8c\u9ede\u64ca **\u66f4\u591a** \u3002\n- \u9ede\u64ca **\u4fee\u6539\u5225\u540d** \u3002\u9078\u64c7 **\u6dfb\u52a0\u65b0\u5225\u540d** \u3002\n- **\u4fee\u6539\u5225\u540d** \uff1a\u9ede\u64ca **\u6dfb\u52a0\u5225\u540d** \uff0c\u7136\u5f8c\u8f38\u5165\u8981\u6dfb\u52a0\u5230\u6a21\u578b\u7248\u672c\u7684\u5225\u540d\u7684\u540d\u7a31\u3002\n- \u9ede\u64ca **\u4fdd\u5b58** \u3002## \u4e0a\u50b3\u65b0\u7684\u5225\u540d\u6a21\u578b\u7248\u672c\n### Python [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/googleapis/python-aiplatform/blob/HEAD/samples/model-builder/model_registry/upload_new_aliased_model_version_sample.py) \n```\nfrom typing import Listfrom google.cloud import aiplatformdef upload_new_aliased_model_version_sample(\u00a0 \u00a0 parent_name: str,\u00a0 \u00a0 artifact_uri: str,\u00a0 \u00a0 serving_container_image: str,\u00a0 \u00a0 is_default_version: bool,\u00a0 \u00a0 version_aliases: List[str],\u00a0 \u00a0 version_description: str,\u00a0 \u00a0 project: str,\u00a0 \u00a0 location: str,):\u00a0 \u00a0 \"\"\"\u00a0 \u00a0 Uploads a new aliased version of a model with ID 'model_id'.\u00a0 \u00a0 Args:\u00a0 \u00a0 \u00a0 \u00a0 parent_name: The parent resource name of an existing model.\u00a0 \u00a0 \u00a0 \u00a0 artifact_uri: The URI of the model artifact to upload.\u00a0 \u00a0 \u00a0 \u00a0 serving_container_image: The name of the serving container image to use.\u00a0 \u00a0 \u00a0 \u00a0 is_default_version: Whether this version is the default version of the model.\u00a0 \u00a0 \u00a0 \u00a0 version_aliases: The aliases of the model version.\u00a0 \u00a0 \u00a0 \u00a0 version_description: The description of the model version.\u00a0 \u00a0 \u00a0 \u00a0 project: The project ID.\u00a0 \u00a0 \u00a0 \u00a0 location: The region name.\u00a0 \u00a0 Returns:\u00a0 \u00a0 \u00a0 \u00a0 The new version of the model.\u00a0 \u00a0 \"\"\"\u00a0 \u00a0 # Initialize the client.\u00a0 \u00a0 aiplatform.init(project=project, location=location)\u00a0 \u00a0 # Upload a new aliased version of the Model resource with the ID 'model_id'. The parent_name of Model resource can be also\u00a0 \u00a0 # 'projects/<your-project-id>/locations/<your-region>/models/<your-model-id>'\u00a0 \u00a0 model = aiplatform.Model.upload(\u00a0 \u00a0 \u00a0 \u00a0 artifact_uri=artifact_uri,\u00a0 \u00a0 \u00a0 \u00a0 serving_container_image=serving_container_image,\u00a0 \u00a0 \u00a0 \u00a0 parent_name=parent_name,\u00a0 \u00a0 \u00a0 \u00a0 is_default_version=is_default_version,\u00a0 \u00a0 \u00a0 \u00a0 version_aliases=version_aliases,\u00a0 \u00a0 \u00a0 \u00a0 version_description=version_description,\u00a0 \u00a0 )\u00a0 \u00a0 return model\n```\n**\u6ce8\u610f** \uff1a\u5982\u679c\u60a8\u6c92\u6709\u770b\u5230\u5225\u540d\u5217\uff0c\u5247\u53ef\u80fd\u9700\u8981\u9ede\u64ca **\u5217\u986f\u793a\u9078\u9805** \u6309\u9215\u4f86\u78ba\u4fdd\u60a8\u5df2\u9078\u64c7\u986f\u793a\u5225\u540d\u5217\u9805\u3002\n## \u522a\u9664\u6a21\u578b\u5225\u540d\n\u522a\u9664\u5206\u914d\u4e86\u9ed8\u8a8d\u5225\u540d\u7684\u6a21\u578b\u7248\u672c\u6642\uff0c\u5225\u540d\u6703\u81ea\u52d5\u5206\u914d\u7d66\u4e0b\u4e00\u500b\u6700\u65b0\u7248\u672c\u3002\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u9032\u5165 Vertex AI **Model Registry** \u9801\u9762\u3002 [\u9032\u5165 Model Registry \u9801\u9762](https://console.cloud.google.com/vertex-ai/models?hl=zh-cn) \n- \u5f9e Model Registry \u4e2d\uff0c\u9078\u64c7\u8981\u4fee\u6539\u7684\u6a21\u578b\u7684\u540d\u7a31\u3002\u6a21\u578b\u8a73\u60c5\u7a97\u53e3\u96a8\u5373\u6253\u958b\u3002\n- \u5728\u8a73\u60c5\u9801\u9762\u4e2d\uff0c\u9ede\u64ca\u6a21\u578b\u7248\u672c\u7684 **\u64cd\u4f5c** \u6309\u9215\u3002\n- \u9ede\u64ca **\u4fee\u6539\u5225\u540d** \u3002\n- \u7cfb\u7d71\u6703\u986f\u793a\u9644\u52a0\u5230\u6a21\u578b\u7248\u672c\u7684\u5225\u540d\u5217\u8868\u3002\u5c07\u5149\u6a19\u61f8\u505c\u5728\u6a19\u7c64\u5c0d\u61c9\u7684\u201c\u5225\u540d\u201d\u6587\u672c\u6846\u7684\u53f3\u5074\uff0c\u4ee5\u986f\u793a\u522a\u9664\u5716\u6a19\u3002\n- \u9ede\u64ca\u8981\u522a\u9664\u7684\u5225\u540d\u5c0d\u61c9\u7684\u522a\u9664\u5716\u6a19\u3002\n- \u9ede\u64ca **\u4fdd\u5b58** \u3002\n### Python [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/googleapis/python-aiplatform/blob/HEAD/samples/model-builder/model_registry/delete_aliases_model_version_sample.py) \n```\nfrom typing import Listfrom google.cloud import aiplatformdef delete_aliases_model_version_sample(\u00a0 \u00a0 model_id: str,\u00a0 \u00a0 version_aliases: List[str],\u00a0 \u00a0 version_id: str,\u00a0 \u00a0 project: str,\u00a0 \u00a0 location: str,):\u00a0 \u00a0 \"\"\"\u00a0 \u00a0 Delete aliases to a model version.\u00a0 \u00a0 Args:\u00a0 \u00a0 \u00a0 \u00a0 model_id: The ID of the model.\u00a0 \u00a0 \u00a0 \u00a0 version_aliases: The version aliases to assign.\u00a0 \u00a0 \u00a0 \u00a0 version_id: The version ID of the model to assign the aliases to.\u00a0 \u00a0 \u00a0 \u00a0 project: The project ID.\u00a0 \u00a0 \u00a0 \u00a0 location: The region name.\u00a0 \u00a0 Returns\u00a0 \u00a0 \u00a0 \u00a0 None.\u00a0 \u00a0 \"\"\"\u00a0 \u00a0 # Initialize the client.\u00a0 \u00a0 aiplatform.init(project=project, location=location)\u00a0 \u00a0 # Initialize the Model Registry resource with the ID 'model_id'.The parent_name of Model resource can be also\u00a0 \u00a0 # 'projects/<your-project-id>/locations/<your-region>/models/<your-model-id>'\u00a0 \u00a0 model_registry = aiplatform.models.ModelRegistry(model=model_id)\u00a0 \u00a0 # Remove the version aliases to the model version with the version 'version'.\u00a0 \u00a0 model_registry.remove_version_aliases(\u00a0 \u00a0 \u00a0 \u00a0 target_aliases=version_aliases, version=version_id\u00a0 \u00a0 )\n```", "guide": "Vertex AI"}