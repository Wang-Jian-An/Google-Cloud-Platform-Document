{"title": "Vertex AI - Manage dataset versions", "url": "https://cloud.google.com/vertex-ai/docs/start/introduction-unified-platform", "abstract": "# Vertex AI - Manage dataset versions\n**    Preview     ** This product or feature is subject to the \"Pre-GA Offerings Terms\" in the General Service Terms section   of the [Service Specific Terms](/terms/service-terms#1) .     Pre-GA products and features are available \"as is\" and might have limited support.    For more information, see the [launch stage descriptions](/products#product-launch-stages) .\nVertex AI lets you create versions for a dataset. This functionality can be useful for reproducibility, traceability, and dataset lineage management.\nYou can create versions for image and text datasets. When you create a dataset version, Vertex AI creates a [BigQuery](/bigquery/docs/introduction) dataset if none exists. The BigQuery dataset stores all versions for the associated Vertex AI dataset.\nWhen you restore a version, you override the associated dataset. The dataset is temporarily unavailable for other requests until the restore operation ends.\n", "content": "## Create a dataset version\nYou can use the Vertex AI API to create a dataset version. Follow the steps in the corresponding tab:\n### Get the dataset's IDTo create a version, you must know the numerical ID of the dataset. If you know the display name of the dataset but not the ID, expand the following section to learn how to get the ID using the API:Alternatively, you can get the dataset's ID from the Google Cloud console: Go to the Vertex AI **Datasets** page and find the number in the **ID** column.\n [Go to the Datasets page](https://console.cloud.google.com/vertex-ai/datasets) \nBefore using any of the request data, make the following replacements:- : The region where the dataset version is stored. For example, `us-central` .\n- : Your [project ID](/resource-manager/docs/creating-managing-projects#identifiers) .\n- : The numerical ID of the dataset.\nHTTP method and URL:\n```\nPOST https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/datasets/DATASET_ID/datasetVersions\n```\nTo send your request, choose one of these options:\n **Note:** Ensure you have set the [GOOGLE_APPLICATION_CREDENTIALS](/docs/authentication/provide-credentials-adc#local-key) environment variable to the path for your service account private key file.\nExecute the following command:\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth application-default print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d \"\" \\ \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/datasets/DATASET_ID/datasetVersions\"\n``` **Note:** Ensure you have set the [GOOGLE_APPLICATION_CREDENTIALS](/docs/authentication/provide-credentials-adc#local-key) environment variable to the path for your service account private key file.\nExecute the following command:\n```\n$cred = gcloud auth application-default print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -Uri \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/datasets/DATASET_ID/datasetVersions\" | Select-Object -Expand Content\n```\nYou should receive a JSON response similar to the following:\n```\n{\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION/datasets/DATASET_ID/operations/OPERATION_ID\",\n \"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.aiplatform.v1.CreateDatasetVersionOperationMetadata\",\n \"genericMetadata\": {\n  \"createTime\": \"2021-02-17T00:54:58.827429Z\",\n  \"updateTime\": \"2021-02-17T00:54:58.827429Z\"\n },\n }\n}\n```Some requests start long-running operations that require time to complete. These requests return an operation name, which you can use to view the operation's status or cancel the operation. Vertex AI provides helper methods to make calls against long-running operations. For more information, see [Working with long-runningoperations](/vertex-ai/docs/general/long-running-operations) .\n## Restore a dataset version\nYou can use the Vertex AI API to restore a dataset version. Follow the steps in the corresponding tab:\n### Get the dataset version's IDTo restore a version, you must know the version's numerical ID. You can list all the dataset versions using the API:Before using any of the request data, make the following replacements:- : The region where the dataset version is stored. For example, `us-central` .\n- : Your [project ID](/resource-manager/docs/creating-managing-projects#identifiers) .\n- : The numerical ID of the dataset.\n- : The numerical ID of the dataset version.\nHTTP method and URL:\n```\nGET https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/datasets/DATASET_ID/datasetVersions/DATASET_VERSION_ID:restore\n```\nTo send your request, choose one of these options:\n **Note:** Ensure you have set the [GOOGLE_APPLICATION_CREDENTIALS](/docs/authentication/provide-credentials-adc#local-key) environment variable to the path for your service account private key file.\nExecute the following command:\n```\ncurl -X GET \\ -H \"Authorization: Bearer $(gcloud auth application-default print-access-token)\" \\ \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/datasets/DATASET_ID/datasetVersions/DATASET_VERSION_ID:restore\"\n``` **Note:** Ensure you have set the [GOOGLE_APPLICATION_CREDENTIALS](/docs/authentication/provide-credentials-adc#local-key) environment variable to the path for your service account private key file.\nExecute the following command:\n```\n$cred = gcloud auth application-default print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method GET ` -Headers $headers ` -Uri \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/datasets/DATASET_ID/datasetVersions/DATASET_VERSION_ID:restore\" | Select-Object -Expand Content\n```\nYou should receive a JSON response similar to the following:\n```\n{\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION/datasets/DATASET_ID/operations/OPERATION_ID\",\n \"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.aiplatform.v1.RestoreDatasetVersionOperationMetadata\",\n \"genericMetadata\": {\n  \"createTime\": \"2021-02-17T00:54:58.827429Z\",\n  \"updateTime\": \"2021-02-17T00:54:58.827429Z\"\n },\n }\n}\n```Some requests start long-running operations that require time to complete. These requests return an operation name, which you can use to view the operation's status or cancel the operation. Vertex AI provides helper methods to make calls against long-running operations. For more information, see [Working with long-runningoperations](/vertex-ai/docs/general/long-running-operations) .\n## What's next\nRead more about [working with datasets in Vertex AI](/vertex-ai/docs/training-overview) .", "guide": "Vertex AI"}