{"title": "Vertex AI - View pipeline metrics", "url": "https://cloud.google.com/vertex-ai/docs/pipelines/metrics", "abstract": "# Vertex AI - View pipeline metrics\nAfter you define, build, and run a pipeline, you can view metrics related to the pipeline job or pipeline tasks in the Metrics Explorer. Additionally, you can create custom log-based metrics and alerts using Cloud Logging to monitor events such as pipeline failures.\nThis page describes how you can do the following:\n- [View standard Vertex AI Pipelines metrics in the Metrics Explorer](#view_metrics_explorer) \n- [Create and view custom metrics in the Logs Explorer](#build-custom-metrics) (preview)\nCreating and viewing custom metrics in Cloud Logging has costs associated with it. For more information, see [Cloud Logging pricing](/logging#pricing) .\n", "content": "## View standard Vertex AI Pipelines metrics in the Metrics Explorer\n**    Preview     ** This feature is subject to the \"Pre-GA Offerings Terms\" in the General Service Terms section   of the [Service Specific Terms](/terms/service-terms#1) .     Pre-GA features are available \"as is\" and might have limited support.    For more information, see the [launch stage descriptions](/products#product-launch-stages) .\nYou can view the following metrics related to Vertex AI Pipelines in the Metrics Explorer:\n- **Pipeline job-level metrics:** - Use the `Vertex Pipelines Job - PipelineJob duration` metric to [view the runtime duration of pipeline runs](#pipelinejob_duration) .\n- Use the `Location - Executing PipelineJobs` metric to [view the number of pipeline runs](#pipelinejob_runs) .\n- **Pipeline task-level metrics:** - Use the `Vertex Pipelines Job - Completed PipelineTasks` to [view the number of pipeline tasks completed](#pipelinetask_completed) .\n- Use the `Location - Executing PipelineTasks` to [view the number of pipeline tasks executed in pipeline runs](#pipelinetask_executed) .\n### View the runtime duration of pipeline jobs\nUse the following instructions to view the `Vertex Pipelines Job - PipelineJob duration` metric in the Google Cloud console:\n- Navigate to the **Metrics Explorer** : [Go to the Metrics Explorer](https://console.cloud.google.com/monitoring/metrics-explorer) \n- In the **Metric** list, select **Vertex Pipelines Job** > **Pipelinejob** > **PipelineJob duration** .\n- Click **Apply** .\n- Optional: To filter the query, specify one or more criteria by clicking **Filter** . For example:- To view the runtime duration of a specific pipeline job, use the `pipeline_job_id` filter.\n- To view the runtime duration of pipeline jobs for a specific location, use the `location` filter.\n- To view the runtime duration of pipeline jobs in the `PIPELINE_JOB_RUNNING` , `PIPELINE_JOB_CANCELLED` or `PIPELINE_JOB_PENDING` state, use the `run_state` filter.\n### View the number of pipeline runs\nUse the following instructions to view the `Location - Executing PipelineJobs` metric in the Google Cloud console:\n- Navigate to the **Metrics Explorer** : [Go to the Metrics Explorer](https://console.cloud.google.com/monitoring/metrics-explorer) \n- In the **Metric** list, select **Location** > **Executing_vertexai_pipeline_jobs** > **Executing PipelineJobs** .\n- Click **Apply** .\n- Optional: To filter the query, specify one or more criteria by clicking **Filter** . For example, to view the number of pipeline jobs for a specific location, use the `location` filter.\n### View the number of pipeline tasks completed\nUse the following instructions to view the `Vertex Pipelines Job - Completed PipelineTasks` metric in the Google Cloud console:\n- Navigate to the **Metrics Explorer** : [Go to the Metrics Explorer](https://console.cloud.google.com/monitoring/metrics-explorer) \n- In the **Metric** list, select **Vertex Pipelines Job** > **Pipelinejob** > **Completed PipelineTasks** .\n- Click **Apply** .\n- Optional: To filter the query, specify one or more criteria by clicking **Filter** . For example:- To view the number of tasks completed in a specific pipeline run, use the `pipeline_job_id` filter.\n- To view the number of tasks completed in pipeline runs for a specific location, use the `location` filter.\n### View the number of pipeline tasks executed\nUse the following instructions to view the `Location - Executing PipelineTasks` metric in the Google Cloud console:\n- Navigate to the **Metrics Explorer** : [Go to the Metrics Explorer](https://console.cloud.google.com/monitoring/metrics-explorer) \n- In the **Metric** list, select **Location** > **Executing_vertexai_pipeline_tasks** > **Executing PipelineTasks** .\n- Click **Apply** .\n- Optional: To filter the query, specify one or more criteria by clicking **Filter** . For example, to view the number of pipeline tasks executed for a specific location, use the `location` filter.## Create and view custom metrics in the Logs Explorer\nYou can [use the Logs Explorer](/logging/docs/view/logs-explorer-interface) in the Google Cloud console to create custom [log-based metrics](/logging/docs/logs-based-metrics) that track and analyze patterns within your pipeline logs.\n### Examples of custom metrics\nThis section illustrates examples of custom metrics you can create. These include the following:\n- [Create a custom metric for failed pipeline jobs](#custom-metric-failed-jobs) \n- [Create a custom metric for final pipeline state](#custom-metric-final-state) \n- [View pipeline job failure rate](#pipeline-job-failure-rate) To create a custom log-based [counter metric](/logging/docs/logs-based-metrics/counter-metrics#create_a_counter_metric) that monitors failed pipeline jobs, do the following:\n- Navigate to the **Logs Explorer** : [Go to the Logs Explorer](https://console.cloud.google.com/logs/query) \n- Select the appropriate Google Cloud project.\n- In the **Resource** drop-down menu, select **Vertex Pipelines Job** .\n- In the **Location** drop-down menu, select your pipeline's location.\n- In the **All pipeline_job_id** drop-down menu, select the ID of your pipeline job.\n- Click **Apply** .\n- Click **Create Metric** .\n- In the **Create logs metric** screen:- Set the **Metric type** : Select **Counter** .\n- Set the following fields in the **Details** section:- **Log metric name** : Enter a name for your log metric, for example,`pipelinejob_failed`. Choose a name that is unique among the logs-based metrics in your Google Cloud project. Some naming restrictions apply. For more information, see [Troubleshooting](/logging/docs/logs-based-metrics/troubleshooting#metric-name-restrictions) .\n- **Description** : Enter a description for the metric.\n- **Units** : Leave this field blank or enter the digit **1** .\n- Define your metric filter in the **Filter selection** section. Create a filter that collects only the log entries that you want to count in your metric using the [logging query language](/logging/docs/view/logging-query-language) , for example:```\nresource.type=\"aiplatform.googleapis.com/PipelineJob\"\njsonPayload.state=\"PIPELINE_STATE_FAILED\"\n```You can also use regular expressions to create your metric's filters.To open a panel showing you the log entries that match your filter, click **Preview logs** .\n- Optional: Add a label in the **Labels** section. For instructions on creating labels, see [Create a label](/logging/docs/logs-based-metrics/labels#create-label) .\n- To create the metric, click **Create metric** .\nTo create a custom log-based [counter metric](/logging/docs/logs-based-metrics/counter-metrics#create_a_counter_metric) that monitors the final state of your pipeline jobs, do the following:\n- Navigate to the Logs Explorer: [Go to the Logs Explorer](https://console.cloud.google.com/logs/query) \n- Select the appropriate Google Cloud project.\n- In the **Resource** drop-down menu, select **Vertex Pipelines Job** .\n- In the **Location** drop-down menu, select your pipeline's location.\n- In the **All pipeline_job_id** drop-down menu, select the ID of your pipeline job.\n- Click **Apply** .\n- Click **Create Metric** .\n- In the **Create logs metric** screen:- Set the **Metric type** : Select **Counter** .\n- Set the following fields in the **Details** section:- **Log metric name** : Enter a name for your log metric, for example,`Pipeline_state_final`. Choose a name that is unique among the logs-based metrics in your Google Cloud project. Some naming restrictions apply. For more information, see [Troubleshooting](/logging/docs/logs-based-metrics/troubleshooting#metric-name-restrictions) .\n- **Description** : Enter a description for the metric.\n- **Units** : Leave this field blank or enter the digit **1** .\n- Define your metric filter in the **Filter selection** section. Create a filter that collects only the log entries that you want to count in your metric using the [logging query language](/logging/docs/view/logging-query-language) , for example:```\nresource.type=\"aiplatform.googleapis.com/PipelineJob\"\njsonPayload.state=\"PIPELINE_STATE_SUCCEEDED\" OR\n\"PIPELINE_STATE_FAILED\" OR \"PIPELINE_STATE_CANCELLED\"\n```You can also use regular expressions to create your metric's filters.To open a panel showing you the log entries that match your filter, click **Preview logs** .\n- Optional: Add a label in the **Labels** section. For instructions on creating labels, see [Create a label](/logging/docs/logs-based-metrics/labels#create-label) .\n- To create the metric, click **Create metric** .\nThe pipeline job failure rate is calculated as the ratio of the number of pipeline jobs in the final state to the number of failed pipeline jobs. To create a dashboard to monitor the pipeline job failure rate, do the following:\n- Create a metric for monitoring the pipeline jobs in the final state. For more information, see [Create a custom metric for final pipeline state](#custom-metric-final-state) .\n- Create a metric for monitoring the pipeline jobs in the failed state. For more information, see [Create a custom metric for failed pipeline jobs](#custom-metric-failed-jobs) .\n- In the **Monitoring** section of the Google Cloud console, go to the Metrics Explorer page. [Go to the Metrics Explorer page](https://console.cloud.google.com/monitoring/metrics-explorer) \n- In the **Configuration** tab, do the following:- Click **Add another metric** .\n- Select the **Display metrics as ratio** option. When you select this option:- The **Time series A** pane is renamed **Numerator** .\n- The **Time series B** pane is renamed **Denominator** .\n- In the **Numerator** pane, click **Select a metric** to select the metric created for failed pipeline jobs.\n- In the **Denominator** pane, click **Select a metric** to select the metric created for final state pipeline jobs.\n- (Optional) Configure the numerator and denominator by adding filters, or by updating the grouping fields and alignment parameters.For more information about how to add filters, or update the grouping fields and alignment parameters, see [Chart a ratio of metrics](/monitoring/charts/metrics-explorer#chart-ratio) . **Note:** The two metrics selected as the numerator and denominator must have the same resource type. If you select the same metric as the numerator and the denominator, use different filters or groupings to make the numerator distinct from the denominator.\nAfter you select the numerator and the denominator, the pipeline job failure rate is displayed in the graph.- After you generate the pipeline job failure rate graph, you can add it to your custom dashboard. For more information, see [Save a chart for future reference](/monitoring/charts/metrics-explorer#save) .\n- To copy the URL containing the graph configuration, click the ellipsis icon on the top right corner of the graph, and then click **Share by URL** .", "guide": "Vertex AI"}