{"title": "Vertex AI - \u4f7f\u7528 Terraform \u5275\u5efa\u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u5be6\u4f8b", "url": "https://cloud.google.com/vertex-ai/docs/tutorials/terraform/terraform-create-user-managed-notebooks-instance?hl=zh-cn", "abstract": "# Vertex AI - \u4f7f\u7528 Terraform \u5275\u5efa\u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u5be6\u4f8b\nVertex AI Workbench \u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c [\u5df2\u68c4\u7528](https://cloud.google.com/vertex-ai/docs/deprecations?hl=zh-cn) \u3002\u81ea 2025 \u5e74 1 \u6708 30 \u65e5\u8d77\uff0c\u6211\u5011\u5c07\u7d42\u6b62\u5c0d\u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u7684\u652f\u6301\uff0c\u4e26\u4e14\u5c07\u4e0d\u518d\u652f\u6301\u5275\u5efa\u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u5be6\u4f8b\u3002\u73fe\u6709\u5be6\u4f8b\u4ecd\u7136\u53ef\u4ee5\u6b63\u5e38\u4f7f\u7528\uff0c\u4f46\u6211\u5011\u5c07\u4e0d\u518d\u63d0\u4f9b\u88dc\u4e01\u3001\u66f4\u65b0\u548c\u5347\u7d1a\u3002\u5982\u9700\u7e7c\u7e8c\u4f7f\u7528 Vertex AI Workbench\uff0c\u6211\u5011\u5efa\u8b70\u60a8 [\u5c07\u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u5be6\u4f8b\u9077\u79fb\u5230 Vertex AI Workbench \u5be6\u4f8b](https://cloud.google.com/vertex-ai/docs/workbench/user-managed/migrate-to-instances?hl=zh-cn) \u3002\n\u5728\u672c\u6559\u7a0b\u4e2d\uff0c\u60a8\u5c07\u5b78\u7fd2\u5982\u4f55\u5728 Vertex AI \u4e2d\u4ee5 [\u670d\u52d9\u8cec\u865f\u6a21\u5f0f](https://cloud.google.com/vertex-ai/docs/workbench/user-managed/manage-access-jupyterlab?hl=zh-cn#service-account) \u5275\u5efa Terraform \u914d\u7f6e\u6587\u4ef6\u4e26\u9810\u914d\u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u5be6\u4f8b\u3002\n\u4f7f\u7528\u4ee5\u4e0b\u5de5\u5177\u5b8c\u6210\u672c\u6559\u7a0b\u4e2d\u7684\u6b65\u9a5f\uff1a\n- **Terraform CLI** \uff1aTerraform \u5df2\u9810\u5b89\u88dd\u5728 Cloud Shell \u4e2d\u3002Terraform \u7121\u9700\u55ae\u7368\u5b89\u88dd\u5373\u53ef\u4f7f\u7528 Terraform CLI \u547d\u4ee4\u3002\n- **Cloud Shell Editor** \uff1a\u4f7f\u7528 Cloud Shell Editor \u5275\u5efa\u548c\u7ba1\u7406 Terraform \u914d\u7f6e\u6587\u4ef6\uff0c\u4ee5\u53ca\u7ba1\u7406\u6587\u4ef6\u593e\u7d50\u69cb\u3002\n- **Cloud Shell \u7d42\u7aef** \uff1a\u4f7f\u7528 Cloud Shell \u7d42\u7aef\u904b\u884c\u4ee5\u4e0b Terraform CLI \u547d\u4ee4\uff0c\u4f8b\u5982 [terraform init](https://developer.hashicorp.com/terraform/cli/commands/init) \u3001 [terraform plan](https://developer.hashicorp.com/terraform/cli/commands/plan) \u3001 [terraform apply](https://developer.hashicorp.com/terraform/cli/commands/apply) \u3001 [terraform destroy](https://developer.hashicorp.com/terraform/cli/commands/destroy) \u3002", "content": "## \u6e96\u5099\u5de5\u4f5c\n\u60a8\u9700\u8981\u5148\u8a2d\u7f6e Google Cloud \u9805\u76ee\u548c\u958b\u767c\u74b0\u5883\uff0c\u7136\u5f8c\u624d\u80fd\u4f7f\u7528 Terraform \u7232 Vertex AI \u8cc7\u6e90\u69cb\u5efa\u57fa\u790e\u67b6\u69cb\u3002\u672c\u90e8\u5206\u9084\u4ecb\u7d39\u5982\u4f55\u5553\u7528 Vertex AI API\uff0c\u4f9b Terraform \u7528\u4f86\u8207\u9805\u76ee\u4e2d\u7684\u8cc7\u6e90\u9032\u884c\u4ea4\u4e92\u3002\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n### \u6240\u9700\u7684\u89d2\u8272\n\u5982\u679c\u60a8\u5df2\u5275\u5efa\u9805\u76ee\uff0c\u5247\u9700\u8981\u5177\u6709\u9805\u76ee\u7684 [Owner](https://cloud.google.com/iam/docs/understanding-roles?hl=zh-cn#owner) ( `roles/owner` ) IAM \u89d2\u8272\uff0c\u8a72\u89d2\u8272\u53ef\u63d0\u4f9b\u6240\u6709\u5fc5\u9700\u7684\u6b0a\u9650\u3002\u8df3\u5230\u4e0b\u4e00\u90e8\u5206\u3002\u5982\u679c\u60a8\u672a\u81ea\u884c\u5275\u5efa\u9805\u76ee\uff0c\u8acb\u7e7c\u7e8c\u95b1\u8b80\u672c\u90e8\u5206\u3002\n\u5982\u9700\u78ba\u4fdd\u60a8\u7684\u7528\u6236\u8cec\u865f\u5177\u6709\u4f7f\u7528 Terraform \u5275\u5efa Vertex AI Workbench \u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u5be6\u4f8b\u6240\u9700\u7684\u6b0a\u9650\uff0c\u8acb\u8b93\u60a8\u7684\u7ba1\u7406\u54e1\u7232\u60a8\u7684\u7528\u6236\u8cec\u865f\u6388\u4e88\u9805\u76ee\u7684\u4ee5\u4e0b IAM \u89d2\u8272\uff1a\n- Notebooks Admin ( [roles/notebooks.admin](https://cloud.google.com/vertex-ai/docs/workbench/user-managed/iam?hl=zh-cn#notebooks.admin) )\uff0c\u7528\u65bc\u5728 Vertex AI Workbench \u4e2d\u5275\u5efa\u548c\u522a\u9664\u5be6\u4f8b\u3002\n- Service Account User ( [roles/iam.serviceAccountUser](https://cloud.google.com/iam/docs/understanding-roles?hl=zh-cn#iam.serviceAccountUser) )\uff0c\u7528\u65bc\u4ee5\u670d\u52d9\u8cec\u865f\u8eab\u4efd\u904b\u884c\u64cd\u4f5c\u3002\u672c\u6559\u7a0b\u672a\u6307\u5b9a\u670d\u52d9\u8cec\u865f\uff0c\u56e0\u6b64\u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u5be6\u4f8b\u4f7f\u7528\u9ed8\u8a8d Compute Engine \u670d\u52d9\u8cec\u865f\u3002\n- Service Usage Consumer ( [roles/serviceusage.serviceUsageConsumer](https://cloud.google.com/iam/docs/understanding-roles?hl=zh-cn#serviceusage.serviceUsageConsumer) )\uff0c\u7528\u65bc\u6aa2\u67e5\u670d\u52d9\u72c0\u614b\u548c\u64cd\u4f5c\uff0c\u4ee5\u53ca\u4f7f\u7528\u9805\u76ee\u8cc7\u6e90\u7684\u914d\u984d\u548c\u7d50\u7b97\u529f\u80fd\u3002\n\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u5982\u4f55\u6388\u4e88\u89d2\u8272\uff0c\u8acb\u53c3\u95b1 [\u7ba1\u7406\u8a2a\u554f\u6b0a\u9650](https://cloud.google.com/iam/docs/granting-changing-revoking-access?hl=zh-cn) \u3002\n\u60a8\u7684\u7ba1\u7406\u54e1\u9084\u53ef\u4ee5\u901a\u904e [\u81ea\u5b9a\u7fa9\u89d2\u8272](https://cloud.google.com/iam/docs/creating-custom-roles?hl=zh-cn) \u6216\u5176\u4ed6 [\u9810\u5b9a\u7fa9\u89d2\u8272](https://cloud.google.com/iam/docs/understanding-roles?hl=zh-cn) \u5411\u60a8\u7684\u7528\u6236\u8cec\u865f\u6388\u4e88\u6240\u9700\u7684\u6b0a\u9650\u3002\n## \u5275\u5efa\u6587\u4ef6\u593e\u7d50\u69cb\u548c Terraform \u914d\u7f6e\u6587\u4ef6\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u6fc0\u6d3b Cloud Shell\u3002 [\u6fc0\u6d3b Cloud Shell](https://console.cloud.google.com/?cloudshell=true&hl=zh-cn)  [Cloud Shell](https://cloud.google.com/shell/docs/how-cloud-shell-works?hl=zh-cn) \u6703\u8a71\u96a8\u5373\u6703\u5728 Google Cloud \u63a7\u5236\u6aaf\u7684\u5e95\u90e8\u5553\u52d5\uff0c\u4e26\u986f\u793a\u547d\u4ee4\u884c\u63d0\u793a\u7b26\u3002Cloud Shell \u662f\u4e00\u500b\u5df2\u5b89\u88dd Google Cloud CLI \u4e14\u5df2\u7232\u7576\u524d\u9805\u76ee\u8a2d\u7f6e\u503c\u7684 Shell \u74b0\u5883\u3002\u8a72\u6703\u8a71\u53ef\u80fd\u9700\u8981\u5e7e\u79d2\u9418\u6642\u9593\u4f86\u5b8c\u6210\u521d\u59cb\u5316\u3002\n- \u5728 Cloud Shell \u7d42\u7aef\u4e2d\uff0c\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\u5c07\u4e3b\u76ee\u9304\u8a2d\u7f6e\u7232\u6d3b\u52d5\u76ee\u9304\uff1a```\ncd\n```\n- \u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\u4ee5\u5275\u5efa\u540d\u7232`terraform`\u7684\u65b0\u6587\u4ef6\u593e\uff1a```\nmkdir terraform\n```\n- [\u5553\u52d5 Cloud Shell Editor](https://cloud.google.com/shell/docs/launching-cloud-shell-editor?hl=zh-cn) \u3002\n- \u5728 **\u700f\u89bd\u5668** \u7a97\u683c\u4e2d\uff0c\u53f3\u9375\u9ede\u64ca`terraform`\u6587\u4ef6\u593e\uff0c\u7136\u5f8c\u9ede\u64ca **\u65b0\u5efa\u6587\u4ef6** \u3002\n- \u8f38\u5165`main.tf`\u4f5c\u7232\u6587\u4ef6\u540d\uff0c\u7136\u5f8c\u9ede\u64ca **\u78ba\u5b9a** \u3002## \u5728 Terraform \u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u7fa9\u57fa\u790e\u67b6\u69cb\n- \u5728 Cloud Shell Editor \u4e2d\u6253\u958b `main.tf` \u6587\u4ef6\u3002\n- \u66ff\u63db\u4ee5\u4e0b Terraform \u914d\u7f6e\u793a\u4f8b\u4e2d\u7684 \u548c \u4f54\u4f4d\u7b26\uff0c\u7136\u5f8c\u5c07\u793a\u4f8b\u8907\u88fd\u5230 `main.tf` \u6587\u4ef6\uff1a```\nresource \"google_project_service\" \"notebooks\" {\u00a0 provider \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 = google\u00a0 service \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= \"notebooks.googleapis.com\"\u00a0 disable_on_destroy = false}resource \"google_notebooks_instance\" \"basic_instance\" {\u00a0 project \u00a0 \u00a0 \u00a0= \"PROJECT_ID\"\u00a0 name \u00a0 \u00a0 \u00a0 \u00a0 = \"notebooks-instance-basic\"\u00a0 provider \u00a0 \u00a0 = google\u00a0 location \u00a0 \u00a0 = \"LOCATION\"\u00a0 machine_type = \"e2-medium\"\u00a0 vm_image {\u00a0 \u00a0 project \u00a0 \u00a0 \u00a0= \"deeplearning-platform-release\"\u00a0 \u00a0 image_family = \"tf-ent-2-9-cu113-notebooks\"\u00a0 }\u00a0 depends_on = [\u00a0 \u00a0 google_project_service.notebooks\u00a0 ]}\n```- \uff1a\u8f38\u5165 Google Cloud \u9805\u76ee ID\u3002\n- \uff1a\u8f38\u5165\u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u5be6\u4f8b\u7684\u5730\u5340\u548c\u5340\u57df\u3002\u4f8b\u5982 `us-west2-b` \u3002\u7232\u7372\u5f97\u6700\u4f73\u7db2\u7d61\u6027\u80fd\uff0c\u8acb\u9078\u64c7\u8207\u60a8\u7684\u5730\u7406\u4f4d\u7f6e\u6700\u8fd1\u7684\u5730\u5340\u3002\u67e5\u770b\u53ef\u7528\u7684 [\u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u4f4d\u7f6e](https://cloud.google.com/vertex-ai/docs/general/locations?hl=zh-cn#user-managed-notebooks-locations) \u3002\n- \u4fdd\u5b58 `main.tf` \u6587\u4ef6\u3002## \u521d\u59cb\u5316\u5305\u542b Terraform \u914d\u7f6e\u6587\u4ef6\u7684\u5de5\u4f5c\u76ee\u9304\n- \u5982\u9700\u6253\u958b Cloud Shell \u7d42\u7aef\uff0c\u8acb\u5728 Cloud Shell Editor \u7684\u5de5\u5177\u6b04\u4e0a\uff0c\u9ede\u64ca **\u6253\u958b\u7d42\u7aef** \u3002\n- \u5728 Cloud Shell \u7d42\u7aef\u4e2d\uff0c\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\u4ee5\u5c07 `terraform` \u6587\u4ef6\u593e\u8a2d\u7f6e\u7232\u7576\u524d\u5de5\u4f5c\u76ee\u9304\uff1a```\ncd ~/terraform\n```\n- \u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a```\nterraform init\n```\n- Terraform \u6703\u521d\u59cb\u5316\u5de5\u4f5c\u76ee\u9304\u3002\u7cfb\u7d71\u6703\u986f\u793a\u4ee5\u4e0b\u8f38\u51fa\uff1a```\nTerraform has been successfully initialized!\nYou may now begin working with Terraform. Try running \"terraform plan\" to see\nany changes that are required for your infrastructure. All Terraform commands\nshould now work.\nIf you ever set or change modules or backend configuration for Terraform,\nrerun this command to reinitialize your working directory. If you forget, other\ncommands will detect it and remind you to do so if necessary.\n``` **\u6ce8\u610f** \uff1a\u6bcf\u6b21\u66f4\u65b0 Terraform \u5de5\u4f5c\u76ee\u9304\u4e2d\u7684\u4efb\u4f55\u914d\u7f6e\u6587\u4ef6\u6642\uff0c\u90fd\u9700\u8981\u904b\u884c `terraform init` \u3002## \u9810\u89bd\u57fa\u65bc Terraform \u914d\u7f6e\u7684\u57f7\u884c\u8a08\u5283\nTerraform \u57f7\u884c\u8a08\u5283\u6307\u793a Terraform \u8a08\u5283\u5c0d Vertex AI \u57fa\u790e\u67b6\u69cb\u548c\u670d\u52d9\u9032\u884c\u7684\u66f4\u6539\u3002\n\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\u4ee5\u67e5\u770b Terraform \u57f7\u884c\u8a08\u5283\u3002\n```\nterraform plan\n```\n\u5982\u679c\u7cfb\u7d71\u63d0\u793a\u60a8\u6388\u6b0a Cloud Shell\uff0c\u8acb\u9ede\u64ca **\u6388\u6b0a** \u3002 Cloud Shell \u5728\u6388\u6b0a\u6642\u9ed8\u8a8d\u4f7f\u7528\u7528\u6236\u7684\u6191\u64da\u3002\n\u60a8\u5c07\u6703\u770b\u5230\u5982\u4e0b\u6240\u793a\u7684\u8f38\u51fa\uff1a\n```\nTerraform used the selected providers to generate the following execution plan. Resource actions are indicated with the followingsymbols:\u00a0 + createTerraform will perform the following actions:\u00a0 # google_notebooks_instance.basic_instance will be created\u00a0 + resource \"google_notebooks_instance\" \"basic_instance\" {\u00a0 \u00a0 \u00a0 + create_time \u00a0 \u00a0 = (known after apply)\u00a0 \u00a0 \u00a0 + id \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= (known after apply)\u00a0 \u00a0 \u00a0 + labels \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= (known after apply)\u00a0 \u00a0 \u00a0 + location \u00a0 \u00a0 \u00a0 \u00a0= \"us-west2-b\"\u00a0 \u00a0 \u00a0 + machine_type \u00a0 \u00a0= \"e2-medium\"\u00a0 \u00a0 \u00a0 + name \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= \"notebooks-instance-basic\"\u00a0 \u00a0 \u00a0 + network \u00a0 \u00a0 \u00a0 \u00a0 = (known after apply)\u00a0 \u00a0 \u00a0 + project \u00a0 \u00a0 \u00a0 \u00a0 = \"my_project\"\u00a0 \u00a0 \u00a0 + proxy_uri \u00a0 \u00a0 \u00a0 = (known after apply)\u00a0 \u00a0 \u00a0 + service_account = (known after apply)\u00a0 \u00a0 \u00a0 + state \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 = (known after apply)\u00a0 \u00a0 \u00a0 + subnet \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= (known after apply)\u00a0 \u00a0 \u00a0 + update_time \u00a0 \u00a0 = (known after apply)\u00a0 \u00a0 \u00a0 + shielded_instance_config {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 + enable_integrity_monitoring = (known after apply)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 + enable_secure_boot \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= (known after apply)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 + enable_vtpm \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 = (known after apply)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 + vm_image {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 + image_family = \"tf-ent-2-9-cu113-notebooks\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 + project \u00a0 \u00a0 \u00a0= \"deeplearning-platform-release\"\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 }\u00a0 # google_project_service.notebooks will be created\u00a0 + resource \"google_project_service\" \"notebooks\" {\u00a0 \u00a0 \u00a0 + disable_on_destroy = false\u00a0 \u00a0 \u00a0 + id \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 = (known after apply)\u00a0 \u00a0 \u00a0 + project \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= (known after apply)\u00a0 \u00a0 \u00a0 + service \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= \"notebooks.googleapis.com\"\u00a0 \u00a0 }Plan: 2 to add, 0 to change, 0 to destroy.\n```\n- `my_project` \u8868\u793a\u60a8\u6307\u5b9a\u7684 Google Cloud \u9805\u76ee ID\u3002\n- `us-west2-b` \u8868\u793a\u60a8\u6307\u5b9a\u7684\u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u5be6\u4f8b\u7684\u5730\u5340\u548c\u5340\u57df\u3002## \u61c9\u7528\u57f7\u884c\u8a08\u5283\u4e2d\u5efa\u8b70\u7684\u66f4\u6539\n- \u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\u5c07\u57f7\u884c\u8a08\u5283\u4e2d\u7684\u66f4\u6539\u61c9\u7528\u65bc Vertex AI \u57fa\u790e\u67b6\u69cb\u4e26\u5275\u5efa\u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u5be6\u4f8b\uff1a```\nterraform apply\n```\n- \u60a8\u5c07\u6703\u770b\u5230\u5982\u4e0b\u6240\u793a\u7684\u8f38\u51fa\uff1a```\nTerraform used the selected providers to generate the following execution plan. Resource actions are indicated with the followingsymbols:\u00a0 + createTerraform will perform the following actions:\u00a0 # google_notebooks_instance.basic_instance will be created\u00a0 + resource \"google_notebooks_instance\" \"basic_instance\" {\u00a0 \u00a0 \u00a0 + create_time \u00a0 \u00a0 = (known after apply)\u00a0 \u00a0 \u00a0 + id \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= (known after apply)\u00a0 \u00a0 \u00a0 + labels \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= (known after apply)\u00a0 \u00a0 \u00a0 + location \u00a0 \u00a0 \u00a0 \u00a0= \"us-west2-b\"\u00a0 \u00a0 \u00a0 + machine_type \u00a0 \u00a0= \"e2-medium\"\u00a0 \u00a0 \u00a0 + name \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= \"notebooks-instance-basic\"\u00a0 \u00a0 \u00a0 + network \u00a0 \u00a0 \u00a0 \u00a0 = (known after apply)\u00a0 \u00a0 \u00a0 + project \u00a0 \u00a0 \u00a0 \u00a0 = \"my_project\"\u00a0 \u00a0 \u00a0 + proxy_uri \u00a0 \u00a0 \u00a0 = (known after apply)\u00a0 \u00a0 \u00a0 + service_account = (known after apply)\u00a0 \u00a0 \u00a0 + state \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 = (known after apply)\u00a0 \u00a0 \u00a0 + subnet \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= (known after apply)\u00a0 \u00a0 \u00a0 + update_time \u00a0 \u00a0 = (known after apply)\u00a0 \u00a0 \u00a0 + shielded_instance_config {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 + enable_integrity_monitoring = (known after apply)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 + enable_secure_boot \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= (known after apply)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 + enable_vtpm \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 = (known after apply)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 + vm_image {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 + image_family = \"tf-ent-2-9-cu113-notebooks\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 + project \u00a0 \u00a0 \u00a0= \"deeplearning-platform-release\"\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 }\u00a0 # google_project_service.notebooks will be created\u00a0 + resource \"google_project_service\" \"notebooks\" {\u00a0 \u00a0 \u00a0 + disable_on_destroy = false\u00a0 \u00a0 \u00a0 + id \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 = (known after apply)\u00a0 \u00a0 \u00a0 + project \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= (known after apply)\u00a0 \u00a0 \u00a0 + service \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= \"notebooks.googleapis.com\"\u00a0 \u00a0 }Plan: 2 to add, 0 to change, 0 to destroy.Do you want to perform these actions?\u00a0 Terraform will perform the actions described above.\u00a0 Only 'yes' will be accepted to approve.\u00a0 Enter a value:\n```- `my_project` \u8868\u793a\u60a8\u6307\u5b9a\u7684 Google Cloud \u9805\u76ee ID\u3002\n- `us-west2-b` \u8868\u793a\u60a8\u6307\u5b9a\u7684\u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u5be6\u4f8b\u7684\u5730\u5340\u548c\u5340\u57df\u3002\n- \u8f38\u5165 `yes` \u4e26\u6309 **Enter** \u9375\u3002\u60a8\u5c07\u6703\u770b\u5230\u5982\u4e0b\u6240\u793a\u7684\u8f38\u51fa\uff1a```\nApply complete! Resources: 2 added, 0 changed, 0 destroyed.\n```## \u67e5\u770b\u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u5be6\u4f8b\n\u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u6253\u958b **\u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c** \u9801\u9762\u3002\n[\u9032\u5165\u201c\u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u201d](https://console.cloud.google.com/vertex-ai/workbench/user-managed?hl=zh-cn)\n\u8868\u4e2d\u5217\u51fa\u4e86\u540d\u7232\u201cnotebooks-instance-basic\u201d\u7684\u65b0\u7b46\u8a18\u672c\u3002\u8acb\u6ce8\u610f\uff0c\u904b\u884c `terraform apply` \u5f8c\uff0c\u65b0\u7684\u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u5be6\u4f8b\u53ef\u80fd\u9700\u8981\u5e7e\u5206\u9418\u6642\u9593\u624d\u80fd\u5b8c\u6210\u9810\u914d\u3002\n## \u6e05\u7406\u60a8\u7684\u9805\u76ee\n\u6e05\u7406\u60a8\u5728\u672c\u6559\u7a0b\u4e2d\u5275\u5efa\u7684 Google Cloud \u8cc7\u6e90\u3002 \u8acb\u6309\u7167\u4ee5\u4e0b\u6b65\u9a5f\u64cd\u4f5c\uff0c\u4ee5\u907f\u514d\u90e8\u5206\u8cc7\u6e90\u7522\u751f\u610f\u5916\u8cbb\u7528\u3002\n- \u5728 Cloud Shell \u7d42\u7aef\u4e2d\uff0c\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\u4ee5\u5c07 `terraform` \u6587\u4ef6\u593e\u8a2d\u7f6e\u7232\u7576\u524d\u5de5\u4f5c\u76ee\u9304\uff1a```\ncd ~/terraform\n```\n- \u5982\u9700\u522a\u9664\u6839\u64da Terraform \u914d\u7f6e\u5275\u5efa\u7684 Vertex AI \u8cc7\u6e90\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a```\nterraform destroy\n```\n- \u60a8\u5c07\u6703\u770b\u5230\u5982\u4e0b\u6240\u793a\u7684\u8f38\u51fa\uff1a```\nTerraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:\u00a0 - destroyTerraform will perform the following actions:\u00a0 # google_notebooks_instance.basic_instance will be destroyed\u00a0 - resource \"google_notebooks_instance\" \"basic_instance\" {\u00a0 \u00a0 \u00a0 - create_time \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= \"2022-12-01T21:14:05.065893475Z\" -> null\u00a0 \u00a0 \u00a0 - id \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 = \"projects/my_project/locations/us-west2-b/instances/notebooks-instance-basic\" -> null\u00a0 \u00a0 \u00a0 - install_gpu_driver \u00a0 \u00a0 = false -> null\u00a0 \u00a0 \u00a0 - labels \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 = {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 - \"goog-caip-notebook\" = \"\"\u00a0 \u00a0 \u00a0 \u00a0 } -> null\u00a0 \u00a0 \u00a0 - location \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 = \"us-west2-b\" -> null\u00a0 \u00a0 \u00a0 - machine_type \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 = \"e2-medium\" -> null\u00a0 \u00a0 \u00a0 - name \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 = \"notebooks-instance-basic\" -> null\u00a0 \u00a0 \u00a0 - network \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= \"https://www.googleapis.com/compute/v1/projects/my_project/global/networks/default\" -> null\u00a0 \u00a0 \u00a0 - no_proxy_access \u00a0 \u00a0 \u00a0 \u00a0= false -> null\u00a0 \u00a0 \u00a0 - no_public_ip \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 = false -> null\u00a0 \u00a0 \u00a0 - project \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= \"my_project\" -> null\u00a0 \u00a0 \u00a0 - service_account \u00a0 \u00a0 \u00a0 \u00a0= \"329223940713-compute@developer.gserviceaccount.com\" -> null\u00a0 \u00a0 \u00a0 - service_account_scopes = [] -> null\u00a0 \u00a0 \u00a0 - state \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= \"PROVISIONING\" -> null\u00a0 \u00a0 \u00a0 - subnet \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 = \"https://www.googleapis.com/compute/v1/projects/my_project/regions/us-west2/subnetworks/default\" -> null\u00a0 \u00a0 \u00a0 - tags \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 = [] -> null\u00a0 \u00a0 \u00a0 - update_time \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= \"2022-12-01T21:14:19.048432376Z\" -> null\u00a0 \u00a0 \u00a0 - shielded_instance_config {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 - enable_integrity_monitoring = true -> null\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 - enable_secure_boot \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= false -> null\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 - enable_vtpm \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 = true -> null\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 - vm_image {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 - image_family = \"tf-ent-2-9-cu113-notebooks\" -> null\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 - project \u00a0 \u00a0 \u00a0= \"deeplearning-platform-release\" -> null\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 }\u00a0 # google_project_service.notebooks will be destroyed\u00a0 - resource \"google_project_service\" \"notebooks\" {\u00a0 \u00a0 \u00a0 - disable_on_destroy = false -> null\u00a0 \u00a0 \u00a0 - id \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 = \"my_project/notebooks.googleapis.com\" -> null\u00a0 \u00a0 \u00a0 - project \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= \"my_project\" -> null\u00a0 \u00a0 \u00a0 - service \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0= \"notebooks.googleapis.com\" -> null\u00a0 \u00a0 }Plan: 0 to add, 0 to change, 2 to destroy.Do you really want to destroy all resources?\u00a0 Terraform will destroy all your managed infrastructure, as shown above.\u00a0 There is no undo. Only 'yes' will be accepted to confirm.\u00a0 Enter a value:\n```- `my_project` \u8868\u793a\u60a8\u6307\u5b9a\u7684 Google Cloud \u9805\u76ee ID\u3002\n- `us-west2-b` \u8868\u793a\u60a8\u6307\u5b9a\u7684\u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u5be6\u4f8b\u7684\u5730\u5340\u548c\u5340\u57df\u3002\n- \u8f38\u5165 `yes` \u4e26\u6309 **Enter** \u9375\u3002\u60a8\u5c07\u6703\u770b\u5230\u5982\u4e0b\u6240\u793a\u7684\u8f38\u51fa\uff1a```\nDestroy complete! Resources: 2 destroyed.\n```\n- \u5982\u9700\u9a57\u8b49\u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u5be6\u4f8b\u5df2\u522a\u9664\uff0c\u8acb\u8f49\u5230 **\u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c** \u9801\u9762\u3002 [\u9032\u5165\u201c\u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u201d](https://console.cloud.google.com/vertex-ai/workbench/user-managed?hl=zh-cn) \n- [\u5553\u52d5 Cloud Shell Editor](https://cloud.google.com/shell/docs/launching-cloud-shell-editor?hl=zh-cn) \u3002\n- \u5982\u9700\u522a\u9664 `terraform` \u6587\u4ef6\u593e\u53ca\u5176\u5167\u5bb9\uff0c\u8acb\u53f3\u9375\u9ede\u64ca **\u700f\u89bd\u5668** \u7a97\u683c\u4e2d\u7684 `terraform` \u6587\u4ef6\u593e\uff0c\u7136\u5f8c\u9ede\u64ca **\u522a\u9664** \u3002\n- \u51fa\u73fe\u63d0\u793a\u6642\uff0c\u9ede\u64ca **\u78ba\u5b9a** \u4ee5\u78ba\u8a8d\u522a\u9664\u3002## \u5728 Vertex AI \u4e2d\u4f7f\u7528 Terraform \u7684\u66f4\u591a\u65b9\u6cd5\n\u672c\u6559\u7a0b\u4ecb\u7d39\u77ad\u5982\u4f55\u901a\u904e\u50c5\u5275\u5efa\u4e00\u500b\u914d\u7f6e\u6587\u4ef6\u4e26\u57fa\u65bc\u4e00\u500b Terraform \u8cc7\u6e90\u9810\u914d\u57fa\u790e\u67b6\u69cb\u4f86\u4f7f\u7528 Terraform\u3002\u60a8\u9084\u53ef\u4ee5\u901a\u904e\u4ee5\u4e0b\u65b9\u5f0f\u4f7f\u7528 Terraform\uff1a\n- \u5c07\u591a\u500b Terraform \u8cc7\u6e90\u6dfb\u52a0\u5230\u540c\u4e00\u500b Terraform \u914d\u7f6e\u6587\u4ef6\u3002\u5982\u9700\u67e5\u770b Vertex AI \u7684 Terraform \u8cc7\u6e90\u5217\u8868\uff0c\u8acb\u53c3\u95b1 [\u9069\u7528\u65bc Vertex AI \u7684 Terraform \u8cc7\u6e90](https://cloud.google.com/vertex-ai/docs/start/use-terraform-vertex-ai?hl=zh-cn#terraform_resources_vertex_ai) \u3002\n- \u5275\u5efa\u7531\u591a\u500b\u6587\u4ef6\u593e\u548c Terraform \u914d\u7f6e\u6587\u4ef6\u7d44\u6210\u7684\u76ee\u9304\u7d50\u69cb\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u4ee5\u7232\u6bcf\u500b\u985e\u578b\u7684 Terraform \u8cc7\u6e90\u5275\u5efa\u55ae\u7368\u7684\u6587\u4ef6\u593e\u548c Terraform \u914d\u7f6e\u6587\u4ef6\u3002## \u5f8c\u7e8c\u6b65\u9a5f\n- [\u8a73\u7d30\u77ad\u89e3 Terraform \u8a3b\u518a\u8868\u4e2d\u7684 google_notebooks_instance Terraform \u8cc7\u6e90](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/notebooks_environment) \u3002\n- \u8a73\u7d30\u77ad\u89e3 [\u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c](https://cloud.google.com/vertex-ai/docs/workbench/user-managed/introduction?hl=zh-cn) \u548c [Vertex AI Workbench](https://cloud.google.com/vertex-ai/docs/workbench/introduction?hl=zh-cn) \u3002\n- \u5728\u672c\u5730\u547d\u4ee4\u884c\u754c\u9762\u4e0a [\u5b89\u88dd Terraform](https://developer.hashicorp.com/terraform/downloads) \u3002\n- \u5982\u9700\u8a73\u7d30\u77ad\u89e3 Terraform\uff0c\u8acb\u8a2a\u554f [Terraform \u958b\u767c\u8005\u7db2\u7ad9](https://developer.hashicorp.com/terraform/) \u3002\n- \u8acb\u53c3\u95b1 [Terraform \u8a3b\u518a\u8868](https://registry.terraform.io/providers/hashicorp/google/latest/docs/) \u4e2d\u7684 Terraform \u8cc7\u6e90\u6587\u6a94\u3002", "guide": "Vertex AI"}