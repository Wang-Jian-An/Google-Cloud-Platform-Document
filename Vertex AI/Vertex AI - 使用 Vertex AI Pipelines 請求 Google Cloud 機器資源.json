{"title": "Vertex AI - \u4f7f\u7528 Vertex AI Pipelines \u8acb\u6c42 Google Cloud \u6a5f\u5668\u8cc7\u6e90", "url": "https://cloud.google.com/vertex-ai/docs/pipelines/request-gcp-machine-resources?hl=zh-cn", "abstract": "# Vertex AI - \u4f7f\u7528 Vertex AI Pipelines \u8acb\u6c42 Google Cloud \u6a5f\u5668\u8cc7\u6e90\n\u60a8\u53ef\u4ee5\u4f7f\u7528 Vertex AI \u81ea\u5b9a\u7fa9\u8a13\u7df4\u63d0\u4f9b\u7684 Google Cloud \u7279\u5b9a\u6a5f\u5668\u8cc7\u6e90\u5728 Vertex AI Pipelines \u4e0a\u904b\u884c Python \u7d44\u4ef6\u3002\n\u60a8\u53ef\u4ee5\u5f9e [Google Cloud \u6d41\u6c34\u7dda\u7d44\u4ef6](https://cloud.google.com/vertex-ai/docs/pipelines/gcpc-list?hl=zh-cn) \u4f7f\u7528 [create_custom_training_job_from_component](https://google-cloud-pipeline-components.readthedocs.io/en/google-cloud-pipeline-components-2.8.0/api/v1/custom_job.html#v1.custom_job.create_custom_training_job_from_component) \u65b9\u6cd5\u5c07 Python \u7d44\u4ef6\u8f49\u63db\u7232 Vertex AI \u81ea\u5b9a\u7fa9\u8a13\u7df4\u4f5c\u696d\u3002 [\u77ad\u89e3\u5982\u4f55\u5275\u5efa\u81ea\u5b9a\u7fa9\u4f5c\u696d](https://cloud.google.com/vertex-ai/docs/training/create-custom-job?hl=zh-cn) \u3002\n", "content": "## \u4f7f\u7528 Vertex AI Pipelines \u5f9e\u7d44\u4ef6\u5275\u5efa\u81ea\u5b9a\u7fa9\u8a13\u7df4\u4f5c\u696d\n\u4ee5\u4e0b\u793a\u4f8b\u5c55\u793a\u77ad\u5982\u4f55\u4f7f\u7528 [create_custom_training_job_from_component](https://google-cloud-pipeline-components.readthedocs.io/en/google-cloud-pipeline-components-2.8.0/api/v1/custom_job.html#v1.custom_job.create_custom_training_job_from_component) \u65b9\u6cd5\u5c07 Python \u7d44\u4ef6\u8f49\u63db\u7232\u4f7f\u7528\u7528\u6236\u5b9a\u7fa9\u7684 Google Cloud \u6a5f\u5668\u8cc7\u6e90\u7684\u81ea\u5b9a\u7fa9\u8a13\u7df4\u4f5c\u696d\uff0c\u7136\u5f8c\u5728 Vertex AI Pipelines \u4e0a\u904b\u884c\u5df2\u7de8\u8b6f\u7684\u6d41\u6c34\u7dda\uff1a\n```\nimport kfpfrom kfp import dslfrom google_cloud_pipeline_components.v1.custom_job import create_custom_training_job_from_component# Create a Python component@dsl.componentdef my_python_component():\u00a0 import time\u00a0 time.sleep(1)# Convert the above component into a custom training jobcustom_training_job = create_custom_training_job_from_component(\u00a0 \u00a0 my_python_component,\u00a0 \u00a0 display_name = 'DISPLAY_NAME',\u00a0 \u00a0 machine_type = 'MACHINE_TYPE',\u00a0 \u00a0 accelerator_type='ACCELERATOR_TYPE',\u00a0 \u00a0 accelerator_count='ACCELERATOR_COUNT')# Define a pipeline that runs the custom training job@dsl.pipeline(\u00a0 name=\"resource-spec-request\",\u00a0 description=\"A simple pipeline that requests a Google Cloud machine resource\",\u00a0 pipeline_root='PIPELINE_ROOT',)def pipeline():\u00a0 training_job_task = custom_training_job(\u00a0 \u00a0 \u00a0 project='PROJECT_ID',\u00a0 \u00a0 \u00a0 location='LOCATION',\u00a0 ).set_display_name('training-job-task')\n```\n\u66ff\u63db\u4ee5\u4e0b\u5167\u5bb9\uff1a\n- \uff1a\u81ea\u5b9a\u7fa9\u4f5c\u696d\u7684\u540d\u7a31\u3002\n- \uff1a\u904b\u884c\u81ea\u5b9a\u7fa9\u4f5c\u696d\u7684\u6a5f\u5668\u985e\u578b\uff0c\u4f8b\u5982 `e2-standard-4` \u3002\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u6a5f\u5668\u985e\u578b\uff0c\u8acb\u53c3\u95b1 [\u6a5f\u5668\u985e\u578b](https://cloud.google.com/vertex-ai/docs/training/configure-compute?hl=zh-cn#machine-types) \u3002 \u5982\u679c\u60a8\u5c07 TPU \u6307\u5b9a\u7232 `accelerator_type` \uff0c\u8acb\u5c07\u6b64\u5b57\u6bb5\u8a2d\u7f6e\u7232 `cloud-tpu` \u3002\n- \uff1a\u639b\u63a5\u5230\u6a5f\u5668\u7684\u52a0\u901f\u5668\u985e\u578b\u3002\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u53ef\u7528\u7684 GPU \u4ee5\u53ca\u5982\u4f55\u914d\u7f6e\u5b83\u5011\uff0c\u8acb\u53c3\u95b1 [GPU](https://cloud.google.com/vertex-ai/docs/training/configure-compute?hl=zh-cn#specifying_gpus) \u3002\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u53ef\u7528\u7684 TPU \u985e\u578b\u4ee5\u53ca\u5982\u4f55\u914d\u7f6e\u5b83\u5011\uff0c\u8acb\u53c3\u95b1 [TPU](https://cloud.google.com/vertex-ai/docs/training/configure-compute?hl=zh-cn#tpu) \u3002\n- \uff1a\u639b\u63a5\u5230\u904b\u884c\u81ea\u5b9a\u7fa9\u4f5c\u696d\u7684\u6a5f\u5668\u7684\u52a0\u901f\u5668\u6578\u91cf\u3002\n- \uff1a\u6307\u5b9a\u6d41\u6c34\u7dda\u670d\u52d9\u8cec\u865f\u53ef\u4ee5\u8a2a\u554f\u7684 Cloud Storage URI\u3002\u6d41\u6c34\u7dda\u904b\u884c\u7684\u5de5\u4ef6\u5b58\u5132\u5728\u6d41\u6c34\u7dda\u6839\u76ee\u9304\u4e2d\u3002\n- \uff1a\u5728\u5176\u4e2d\u904b\u884c\u6b64\u6d41\u6c34\u7dda\u7684 Google Cloud \u9805\u76ee\u3002\n- \uff1a\u6b64\u6d41\u6c34\u7dda\u7684\u904b\u884c\u4f4d\u7f6e\u6216\u5340\u57df\u3002## API \u53c3\u8003\u6587\u6a94\n\u5982\u9700\u67e5\u770b [create_custom_training_job_from_component](https://google-cloud-pipeline-components.readthedocs.io/en/google-cloud-pipeline-components-2.8.0/api/v1/custom_job.html#v1.custom_job.create_custom_training_job_from_component) \u65b9\u6cd5\u652f\u6301\u7684\u53c3\u6578\u7684\u5b8c\u6574\u5217\u8868\uff0c\u8acb\u53c3\u95b1 [Google Cloud \u6d41\u6c34\u7dda\u7d44\u4ef6 SDK \u53c3\u8003\u6587\u6a94](https://google-cloud-pipeline-components.readthedocs.io/en/google-cloud-pipeline-components-2.8.0/api/v1/index.html) \u3002", "guide": "Vertex AI"}