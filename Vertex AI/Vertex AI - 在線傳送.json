{"title": "Vertex AI - \u5728\u7dda\u50b3\u9001", "url": "https://cloud.google.com/vertex-ai/docs/featurestore/serving-online?hl=zh-cn", "abstract": "# Vertex AI - \u5728\u7dda\u50b3\u9001\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u5728\u4ee5\u4e0b\u67d0\u500b\u74b0\u5883\u4e2d\u904b\u884c\u201c\u5305\u542b\u793a\u4f8b\u6578\u64da\u7684\u7279\u5fb5\u5b58\u5132\u5340\u5de5\u4f5c\u6d41\u793a\u4f8b\u201dJupyter \u7b46\u8a18\u672c\uff1a [\u5728 Colab \u4e2d\u904b\u884c](https://colab.research.google.com/github/GoogleCloudPlatform/vertex-ai-samples/blob/main/notebooks/official/feature_store/sdk-feature-store.ipynb?hl=zh-cn) | [\u5728 Vertex AI Workbench \u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u4e2d\u6253\u958b](https://console.cloud.google.com/vertex-ai/workbench/deploy-notebook?download_url=https%3A%2F%2Fraw.githubusercontent.com%2FGoogleCloudPlatform%2Fvertex-ai-samples%2Fmain%2Fnotebooks%2Fofficial%2Ffeature_store%2Fsdk-feature-store.ipynb&hl=zh-cn) | [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/vertex-ai-samples/blob/main/notebooks/official/feature_store/sdk-feature-store.ipynb)\n\u901a\u904e\u5728\u7dda\u50b3\u9001\uff0c\u60a8\u80fd\u5920\u4ee5\u8f03\u77ed\u7684\u5ef6\u9072\u6642\u9593\u7232\u5c0f\u6279\u91cf\u5be6\u9ad4\u63d0\u4f9b\u7279\u5fb5\u503c\u3002\u5c0d\u65bc\u6bcf\u500b\u8acb\u6c42\uff0c\u60a8\u53ea\u80fd\u5f9e\u55ae\u500b\u5be6\u9ad4\u985e\u578b\u63d0\u4f9b\u7279\u5fb5\u503c\u3002Vertex AI Feature Store\uff08\u820a\u7248\uff09\u50c5\u8fd4\u56de\u6bcf\u500b\u7279\u5fb5\u7684\u6700\u65b0 \u975e null \u503c\u3002\n\u901a\u5e38\uff0c\u60a8\u4f7f\u7528\u5728\u7dda\u50b3\u9001\u7232\u5df2\u90e8\u7f72\u7684\u6a21\u578b\u50b3\u9001\u7279\u5fb5\u503c\uff0c\u4ee5\u9032\u884c\u5728\u7dda\u9810\u6e2c\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u80fd\u6709\u4e00\u5bb6\u55ae\u8eca\u5171\u4eab\u516c\u53f8\uff0c\u4e26\u4e14\u60a8\u60f3\u8981\u9810\u6e2c\u7279\u5b9a\u7528\u6236\u79df\u7528\u55ae\u8eca\u7684\u6642\u9577\u3002\u60a8\u53ef\u4ee5\u6dfb\u52a0\u4f86\u81ea\u7528\u6236\u7684\u5be6\u6642\u8f38\u5165\u4ee5\u53ca\u4f86\u81ea\u7279\u5fb5\u5b58\u5132\u5340\u7684\u6578\u64da\u4ee5\u57f7\u884c\u5728\u7dda\u9810\u6e2c\u3002\u9019\u6a23\uff0c\u60a8\u5c31\u53ef\u4ee5\u5be6\u6642\u78ba\u5b9a\u8cc7\u6e90\u5206\u914d\u3002\n", "content": "## Null \u503c\n\u5c0d\u65bc\u5728\u7dda\u50b3\u9001\u7d50\u679c\uff0c\u5982\u679c\u7279\u5fb5\u7684\u6700\u65b0\u503c\u7232 null\uff0c\u5247 Vertex AI Feature Store\uff08\u820a\u7248\uff09\u6703\u8fd4\u56de\u6700\u65b0\u7684\u975e null \u503c\u3002\u5982\u679c\u4e0d\u5b58\u5728\u4e4b\u524d\u7684\u503c\uff0c\u5247 Vertex AI Feature Store\uff08\u820a\u7248\uff09\u6703\u8fd4\u56de null\u3002\n## \u9808\u77e5\u4e8b\u9805\n\u78ba\u4fdd\u60a8\u6240\u8abf\u7528\u7684\u7279\u5fb5\u5b58\u5132\u5340\u5177\u5099\u5728\u7dda\u5b58\u5132\u5340\uff08\u5373\u7bc0\u9ede\u6578\u5fc5\u9808\u5927\u65bc `0` \uff09\u3002\u5426\u5247\uff0c\u5728\u7dda\u50b3\u9001\u8acb\u6c42\u6703\u8fd4\u56de\u932f\u8aa4\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7ba1\u7406\u7279\u5fb5\u5b58\u5132\u5340](https://cloud.google.com/vertex-ai/docs/featurestore/managing-featurestores?hl=zh-cn) \u3002\n## \u90e8\u7f72\u4f86\u81ea\u55ae\u500b\u5be6\u9ad4\u7684\u503c\n\u5f9e\u55ae\u500b\u5be6\u9ad4\u7232\u7279\u5b9a\u5be6\u9ad4\u985e\u578b\u63d0\u4f9b\u7279\u5fb5\u503c\u3002\n\u5982\u9700\u5f9e\u5be6\u9ad4\u7372\u53d6\u7279\u5fb5\u503c\uff0c\u8acb\u4f7f\u7528 [featurestores.entityTypes.readFeatureValues](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/projects.locations.featurestores.entityTypes/readFeatureValues?hl=zh-cn) \u65b9\u6cd5\u767c\u9001 POST \u8acb\u6c42\u3002\n\u4ee5\u4e0b\u793a\u4f8b\u7232\u7279\u5b9a\u5be6\u9ad4\u7372\u53d6\u4e86\u5169\u500b\u4e0d\u540c\u7279\u5fb5\u7684\u6700\u65b0\u503c\u3002\u8acb\u6ce8\u610f\uff0c\u5c0d\u65bc `ids` \u5b57\u6bb5\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a `[\"*\"]` \uff08\u800c\u4e0d\u662f\u7279\u5fb5 ID\uff09\u4ee5\u9078\u64c7\u5be6\u9ad4\u7684\u6240\u6709\u7279\u5fb5\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a\u5728\u5176\u4e2d\u5275\u5efa\u7279\u5fb5\u5b58\u5132\u5340\u7684\u5340\u57df\u3002\u4f8b\u5982`us-central1`\u3002\n- \uff1a\u60a8\u7684 [\u9805\u76ee ID](https://cloud.google.com/resource-manager/docs/creating-managing-projects?hl=zh-cn#identifiers) \u3002\n- \uff1a\u7279\u5fb5\u5b58\u5132\u5340\u7684 ID\u3002\n- \uff1a\u5be6\u9ad4\u985e\u578b\u7684 ID\u3002\n- \uff1a\u8981\u7372\u53d6\u5176\u7279\u5fb5\u503c\u7684\u5be6\u9ad4\u7684 ID\u3002\n- \uff1a\u8981\u7372\u53d6\u5176\u503c\u7684\u7279\u5fb5\u7684 ID\u3002\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nPOST https://LOCATION_ID-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION_ID/featurestores/FEATURESTORE_ID/entityTypes/ENTITY_TYPE_ID:readFeatureValues\n```\n\u8acb\u6c42 JSON \u6b63\u6587\uff1a\n```\n{\n \"entityId\": \"ENTITY_ID\",\n \"featureSelector\": {\n \"idMatcher\": {\n  \"ids\": [\"FEATURE_ID_1\", \"FEATURE_ID_2\"]\n }\n }\n}\n```\n\u5982\u9700\u767c\u9001\u8acb\u6c42\uff0c\u8acb\u9078\u64c7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\uff1a\n **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION_ID-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION_ID/featurestores/FEATURESTORE_ID/entityTypes/ENTITY_TYPE_ID:readFeatureValues\"\n``` **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION_ID-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION_ID/featurestores/FEATURESTORE_ID/entityTypes/ENTITY_TYPE_ID:readFeatureValues\" | Select-Object -Expand Content\n```\n\u60a8\u61c9\u8a72\u6536\u5230\u985e\u4f3c\u4ee5\u4e0b\u5167\u5bb9\u7684 JSON \u97ff\u61c9\uff1a\n```\n{\n \"header\": {\n \"entityType\": \"projects/PROJECT_NUMBER/locations/LOCATION_ID/featurestores/FEATURESTORE_ID/entityTypes/ENTITY_TYPE_ID\",\n \"featureDescriptors\": [  {\n  \"id\": \"FEATURE_ID_1\"\n  },\n  {\n  \"id\": \"FEATURE_ID_2\"\n  }\n ]\n },\n \"entityView\": {\n \"entityId\": \"ENTITY_ID\",\n \"data\": [  {\n  \"value\": {\n   \"VALUE_TYPE_1\": \"FEATURE_VALUE_1\",\n   \"metadata\": {\n   \"generateTime\": \"2019-10-28T15:38:10Z\"\n   }\n  }\n  },\n  {\n  \"value\": {\n   \"VALUE_TYPE_2\": \"FEATURE_VALUE_2\",\n   \"metadata\": {\n   \"generateTime\": \"2019-10-28T15:38:10Z\"\n   }\n  }\n  }\n ]\n }\n}\n```\n\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u6216\u66f4\u65b0 Python\uff0c\u8acb\u53c3\u95b1 [\u5b89\u88dd Python \u7248 Vertex AI SDK](https://cloud.google.com/vertex-ai/docs/start/use-vertex-ai-python-sdk?hl=zh-cn) \u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [   Python API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/python/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/googleapis/python-aiplatform/blob/HEAD/samples/model-builder/read_feature_values_sample.py) \n```\nfrom typing import List, Unionfrom google.cloud import aiplatformdef read_feature_values_sample(\u00a0 \u00a0 project: str,\u00a0 \u00a0 location: str,\u00a0 \u00a0 entity_type_id: str,\u00a0 \u00a0 featurestore_id: str,\u00a0 \u00a0 entity_ids: Union[str, List[str]],\u00a0 \u00a0 feature_ids: Union[str, List[str]] = \"*\",):\u00a0 \u00a0 aiplatform.init(project=project, location=location)\u00a0 \u00a0 my_entity_type = aiplatform.featurestore.EntityType(\u00a0 \u00a0 \u00a0 \u00a0 entity_type_name=entity_type_id, featurestore_id=featurestore_id\u00a0 \u00a0 )\u00a0 \u00a0 my_dataframe = my_entity_type.read(entity_ids=entity_ids, feature_ids=feature_ids)\u00a0 \u00a0 return my_dataframe\n```Python \u7248 Vertex AI SDK \u7684\u5b89\u88dd\u5305\u542b Vertex AI \u5ba2\u6236\u7aef\u5eab\u3002\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd Python \u7248 Vertex AI SDK\uff0c\u8acb\u53c3\u95b1 [\u5b89\u88dd Python \u7248 Vertex AI SDK](https://cloud.google.com/vertex-ai/docs/start/install-sdk?hl=zh-cn) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Python \u7248 Vertex AI SDK API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/python/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/googleapis/python-aiplatform/blob/HEAD/samples/snippets/feature_store_service/read_feature_values_sample.py) \n```\nfrom google.cloud import aiplatformdef read_feature_values_sample(\u00a0 \u00a0 project: str,\u00a0 \u00a0 featurestore_id: str,\u00a0 \u00a0 entity_type_id: str,\u00a0 \u00a0 entity_id: str,\u00a0 \u00a0 location: str = \"us-central1\",\u00a0 \u00a0 api_endpoint: str = \"us-central1-aiplatform.googleapis.com\",):\u00a0 \u00a0 # The AI Platform services require regional API endpoints, which need to be\u00a0 \u00a0 # in the same region or multi-region overlap with the Feature Store location.\u00a0 \u00a0 client_options = {\"api_endpoint\": api_endpoint}\u00a0 \u00a0 # Initialize client that will be used to create and send requests.\u00a0 \u00a0 # This client only needs to be created once, and can be reused for multiple requests.\u00a0 \u00a0 client = aiplatform.gapic.FeaturestoreOnlineServingServiceClient(\u00a0 \u00a0 \u00a0 \u00a0 client_options=client_options\u00a0 \u00a0 )\u00a0 \u00a0 entity_type = f\"projects/{project}/locations/{location}/featurestores/{featurestore_id}/entityTypes/{entity_type_id}\"\u00a0 \u00a0 feature_selector = aiplatform.gapic.FeatureSelector(\u00a0 \u00a0 \u00a0 \u00a0 id_matcher=aiplatform.gapic.IdMatcher(ids=[\"age\", \"gender\", \"liked_genres\"])\u00a0 \u00a0 )\u00a0 \u00a0 read_feature_values_request = aiplatform.gapic.ReadFeatureValuesRequest(\u00a0 \u00a0 \u00a0 \u00a0 entity_type=entity_type, entity_id=entity_id, feature_selector=feature_selector\u00a0 \u00a0 )\u00a0 \u00a0 read_feature_values_response = client.read_feature_values(\u00a0 \u00a0 \u00a0 \u00a0 request=read_feature_values_request\u00a0 \u00a0 )\u00a0 \u00a0 print(\"read_feature_values_response:\", read_feature_values_response)\n```\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300aVertex AI \u5feb\u901f\u5165\u9580\uff1a\u4f7f\u7528\u5ba2\u6236\u7aef\u5eab\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Java \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Vertex AI Java API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/java/docs/reference/google-cloud-aiplatform/latest/com.google.cloud.aiplatform.v1?hl=zh-cn) \u3002\n\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/java-docs-samples/blob/HEAD/aiplatform/src/main/java/aiplatform/ReadFeatureValuesSample.java) \n```\nimport com.google.cloud.aiplatform.v1.EntityTypeName;import com.google.cloud.aiplatform.v1.FeatureSelector;import com.google.cloud.aiplatform.v1.FeaturestoreOnlineServingServiceClient;import com.google.cloud.aiplatform.v1.FeaturestoreOnlineServingServiceSettings;import com.google.cloud.aiplatform.v1.IdMatcher;import com.google.cloud.aiplatform.v1.ReadFeatureValuesRequest;import com.google.cloud.aiplatform.v1.ReadFeatureValuesResponse;import java.io.IOException;import java.util.Arrays;import java.util.List;import java.util.concurrent.ExecutionException;import java.util.concurrent.TimeoutException;public class ReadFeatureValuesSample {\u00a0 public static void main(String[] args)\u00a0 \u00a0 \u00a0 throws IOException, InterruptedException, ExecutionException, TimeoutException {\u00a0 \u00a0 // TODO(developer): Replace these variables before running the sample.\u00a0 \u00a0 String project = \"YOUR_PROJECT_ID\";\u00a0 \u00a0 // Feature Store ID\u00a0 \u00a0 String featurestoreId = \"YOUR_FEATURESTORE_ID\";\u00a0 \u00a0 // Entity Type ID\u00a0 \u00a0 String entityTypeId = \"YOUR_ENTITY_TYPE_ID\";\u00a0 \u00a0 // Entity ID\u00a0 \u00a0 String entityId = \"YOUR_ENTITY_ID\";\u00a0 \u00a0 // Features to read with batch or online serving.\u00a0 \u00a0 List<String> featureSelectorIds = Arrays.asList(\"title\", \"genres\", \"average_rating\");\u00a0 \u00a0 String location = \"us-central1\";\u00a0 \u00a0 String endpoint = \"us-central1-aiplatform.googleapis.com:443\";\u00a0 \u00a0 int timeout = 300;\u00a0 \u00a0 readFeatureValuesSample(\u00a0 \u00a0 \u00a0 \u00a0 project,\u00a0 \u00a0 \u00a0 \u00a0 featurestoreId,\u00a0 \u00a0 \u00a0 \u00a0 entityTypeId,\u00a0 \u00a0 \u00a0 \u00a0 entityId,\u00a0 \u00a0 \u00a0 \u00a0 featureSelectorIds,\u00a0 \u00a0 \u00a0 \u00a0 location,\u00a0 \u00a0 \u00a0 \u00a0 endpoint,\u00a0 \u00a0 \u00a0 \u00a0 timeout);\u00a0 }\u00a0 /*\u00a0 \u00a0* Reads Feature values of a specific entity of an EntityType.\u00a0 \u00a0* See: https://cloud.google.com/vertex-ai/docs/featurestore/serving-online\u00a0 \u00a0*/\u00a0 public static void readFeatureValuesSample(\u00a0 \u00a0 \u00a0 String project,\u00a0 \u00a0 \u00a0 String featurestoreId,\u00a0 \u00a0 \u00a0 String entityTypeId,\u00a0 \u00a0 \u00a0 String entityId,\u00a0 \u00a0 \u00a0 List<String> featureSelectorIds,\u00a0 \u00a0 \u00a0 String location,\u00a0 \u00a0 \u00a0 String endpoint,\u00a0 \u00a0 \u00a0 int timeout)\u00a0 \u00a0 \u00a0 throws IOException, InterruptedException, ExecutionException, TimeoutException {\u00a0 \u00a0 FeaturestoreOnlineServingServiceSettings featurestoreOnlineServiceSettings =\u00a0 \u00a0 \u00a0 \u00a0 FeaturestoreOnlineServingServiceSettings.newBuilder().setEndpoint(endpoint).build();\u00a0 \u00a0 // Initialize client that will be used to send requests. This client only needs to be created\u00a0 \u00a0 // once, and can be reused for multiple requests. After completing all of your requests, call\u00a0 \u00a0 // the \"close\" method on the client to safely clean up any remaining background resources.\u00a0 \u00a0 try (FeaturestoreOnlineServingServiceClient featurestoreOnlineServiceClient =\u00a0 \u00a0 \u00a0 \u00a0 FeaturestoreOnlineServingServiceClient.create(featurestoreOnlineServiceSettings)) {\u00a0 \u00a0 \u00a0 ReadFeatureValuesRequest readFeatureValuesRequest =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ReadFeatureValuesRequest.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setEntityType(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 EntityTypeName.of(project, location, featurestoreId, entityTypeId).toString())\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setEntityId(entityId)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setFeatureSelector(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 FeatureSelector.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setIdMatcher(IdMatcher.newBuilder().addAllIds(featureSelectorIds)))\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 \u00a0 ReadFeatureValuesResponse readFeatureValuesResponse =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 featurestoreOnlineServiceClient.readFeatureValues(readFeatureValuesRequest);\u00a0 \u00a0 \u00a0 System.out.println(\"Read Feature Values Response\" + readFeatureValuesResponse);\u00a0 \u00a0 }\u00a0 }}\n```\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300aVertex AI \u5feb\u901f\u5165\u9580\uff1a\u4f7f\u7528\u5ba2\u6236\u7aef\u5eab\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Node.js \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Vertex AI Node.js API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/nodejs/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/nodejs-docs-samples/blob/HEAD/ai-platform/snippets/read-feature-values-sample.js) \n```\n/**\u00a0* TODO(developer): Uncomment these variables before running the sample.\\\u00a0* (Not necessary if passing values as arguments)\u00a0*/// const project = 'YOUR_PROJECT_ID';// const featurestoreId = 'YOUR_FEATURESTORE_ID';// const entityTypeId = 'YOUR_ENTITY_TYPE_ID';// const entityId = 'ENTITY_ID_TO_SERVE';// const location = 'YOUR_PROJECT_LOCATION';// const apiEndpoint = 'YOUR_API_ENDPOINT';// const timeout = <TIMEOUT_IN_MILLI_SECONDS>;// Imports the Google Cloud Featurestore Service Client libraryconst {FeaturestoreOnlineServingServiceClient} =\u00a0 require('@google-cloud/aiplatform').v1;// Specifies the location of the api endpointconst clientOptions = {\u00a0 apiEndpoint: apiEndpoint,};// Instantiates a clientconst featurestoreOnlineServingServiceClient =\u00a0 new FeaturestoreOnlineServingServiceClient(clientOptions);async function readFeatureValues() {\u00a0 // Configure the entityType resource\u00a0 const entityType = `projects/${project}/locations/${location}/featurestores/${featurestoreId}/entityTypes/${entityTypeId}`;\u00a0 const featureSelector = {\u00a0 \u00a0 idMatcher: {\u00a0 \u00a0 \u00a0 ids: ['age', 'gender', 'liked_genres'],\u00a0 \u00a0 },\u00a0 };\u00a0 const request = {\u00a0 \u00a0 entityType: entityType,\u00a0 \u00a0 entityId: entityId,\u00a0 \u00a0 featureSelector: featureSelector,\u00a0 };\u00a0 // Read Feature Values Request\u00a0 const [response] =\u00a0 \u00a0 await featurestoreOnlineServingServiceClient.readFeatureValues(request, {\u00a0 \u00a0 \u00a0 timeout: Number(timeout),\u00a0 \u00a0 });\u00a0 console.log('Read feature values response');\u00a0 console.log('Raw response:');\u00a0 console.log(JSON.stringify(response, null, 2));}readFeatureValues();\n```\n## \u5f9e\u591a\u500b\u5be6\u9ad4\u50b3\u9001\u503c\n\u5f9e\u4e00\u500b\u6216\u591a\u500b\u5be6\u9ad4\u7232\u7279\u5b9a\u5be6\u9ad4\u985e\u578b\u63d0\u4f9b\u7279\u5fb5\u503c\u3002\u7232\u4e86\u7372\u5f97\u66f4\u597d\u7684\u6027\u80fd\uff0c\u8acb\u4f7f\u7528 `streamingReadFeatureValues` \u65b9\u6cd5\uff0c\u800c\u4e0d\u662f\u5411 `readFeatureValues` \u65b9\u6cd5\u767c\u9001\u4e26\u884c\u8acb\u6c42\u3002\n\u5982\u9700\u5f9e\u591a\u500b\u5be6\u9ad4\u7372\u53d6\u7279\u5fb5\u503c\uff0c\u8acb\u4f7f\u7528 [featurestores.entityTypes.streamingReadFeatureValues](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/projects.locations.featurestores.entityTypes/streamingReadFeatureValues?hl=zh-cn) \u65b9\u6cd5\u767c\u9001 POST \u8acb\u6c42\u3002\n\u4ee5\u4e0b\u793a\u4f8b\u7232\u5169\u500b\u4e0d\u540c\u5be6\u9ad4\u7372\u53d6\u4e86\u5169\u500b\u4e0d\u540c\u7279\u5fb5\u7684\u6700\u65b0\u503c\u3002\u8acb\u6ce8\u610f\uff0c\u5c0d\u65bc `ids` \u5b57\u6bb5\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a `[\"*\"]` \uff08\u800c\u4e0d\u662f\u7279\u5fb5 ID\uff09\u4ee5\u9078\u64c7\u5be6\u9ad4\u7684\u6240\u6709\u7279\u5fb5\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a\u5728\u5176\u4e2d\u5275\u5efa\u7279\u5fb5\u5b58\u5132\u5340\u7684\u5340\u57df\u3002\u4f8b\u5982`us-central1`\u3002\n- \uff1a\u60a8\u7684 [\u9805\u76ee ID](https://cloud.google.com/resource-manager/docs/creating-managing-projects?hl=zh-cn#identifiers) \u3002\n- \uff1a\u7279\u5fb5\u5b58\u5132\u5340\u7684 ID\u3002\n- \uff1a\u5be6\u9ad4\u985e\u578b\u7684 ID\u3002\n- \uff1a\u8981\u7372\u53d6\u5176\u7279\u5fb5\u503c\u7684\u5be6\u9ad4\u7684 ID\u3002\n- \uff1a\u8981\u7372\u53d6\u5176\u503c\u7684\u7279\u5fb5\u7684 ID\u3002\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nPOST https://LOCATION_ID-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION_ID/featurestores/FEATURESTORE_ID/entityTypes/ENTITY_TYPE_ID:streamingReadFeatureValues\n```\n\u8acb\u6c42 JSON \u6b63\u6587\uff1a\n```\n{\n \"entityIds\": [\"ENTITY_ID_1\", \"ENTITY_ID_2\"],\n \"featureSelector\": {\n \"idMatcher\": {\n  \"ids\": [\"FEATURE_ID_1\", \"FEATURE_ID_2\"]\n }\n }\n}\n```\n\u5982\u9700\u767c\u9001\u8acb\u6c42\uff0c\u8acb\u9078\u64c7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\uff1a\n **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION_ID-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION_ID/featurestores/FEATURESTORE_ID/entityTypes/ENTITY_TYPE_ID:streamingReadFeatureValues\"\n``` **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION_ID-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION_ID/featurestores/FEATURESTORE_ID/entityTypes/ENTITY_TYPE_ID:streamingReadFeatureValues\" | Select-Object -Expand Content\n```\n\u60a8\u61c9\u8a72\u6536\u5230\u985e\u4f3c\u4ee5\u4e0b\u5167\u5bb9\u7684 JSON \u97ff\u61c9\uff1a\n```\n[{\n \"header\": {\n \"entityType\": \"projects/PROJECT_NUMBER/locations/LOCATION_ID/featurestores/FEATURESTORE_ID/entityTypes/ENTITY_TYPE_ID\",\n \"featureDescriptors\": [  {\n  \"id\": \"FEATURE_ID_1\"\n  },\n  {\n  \"id\": \"FEATURE_ID_2\"\n  }\n ]\n }\n},\n{\n \"entityView\": {\n \"entityId\": \"ENTITY_ID_1\",\n \"data\": [  {\n  \"value\": {\n   \"VALUE_TYPE_1\": \"FEATURE_VALUE_A\",\n   \"metadata\": {\n   \"generateTime\": \"2019-10-28T15:38:10Z\"\n   }\n  }\n  },\n  {\n  \"value\": {\n   \"VALUE_TYPE_2\": \"FEATURE_VALUE_B\",\n   \"metadata\": {\n   \"generateTime\": \"2019-10-28T15:38:10Z\"\n   }\n  }\n  }\n ]\n }\n},\n{\n \"entityView\": {\n \"entityId\": \"ENTITY_ID_2\",\n \"data\": [  {\n  \"value\": {\n   \"VALUE_TYPE_1\": \"FEATURE_VALUE_C\",\n   \"metadata\": {\n   \"generateTime\": \"2019-10-28T21:21:37Z\"\n   }\n  }\n  },\n  {\n  \"value\": {\n   \"VALUE_TYPE_2\": \"FEATURE_VALUE_D\",\n   \"metadata\": {\n   \"generateTime\": \"2019-10-28T21:21:37Z\"\n   }\n  }\n  }\n ]\n }\n}]\n```\n\u60a8\u53ef\u4ee5 [\u5b89\u88dd](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e26\u4f7f\u7528\u4ee5\u4e0b Vertex AI \u5ba2\u6236\u7aef\u5eab\u4f86\u8abf\u7528 Vertex AI API\u3002Cloud \u5ba2\u6236\u7aef\u5eab\u4f7f\u7528\u6bcf\u7a2e\u53d7\u652f\u6301\u8a9e\u8a00\u7684\u81ea\u7136\u898f\u7bc4\u548c\u6a23\u5f0f\uff0c\u7232\u958b\u767c\u8005\u5e36\u4f86\u512a\u5316\u7684\u9ad4\u9a57\u3002- [Python \u7248 Vertex AI SDK](https://cloud.google.com/python/docs/reference/aiplatform/latest?hl=zh-cn) \n- [Java](https://cloud.google.com/java/docs/reference/google-cloud-aiplatform/latest/overview?hl=zh-cn) \n- [Node.js](https://cloud.google.com/nodejs/docs/reference/aiplatform/latest?hl=zh-cn) \n## \u5f8c\u7e8c\u6b65\u9a5f\n- \u77ad\u89e3\u5982\u4f55 [\u6279\u91cf\u6ce8\u5165\u7279\u5fb5\u503c](https://cloud.google.com/vertex-ai/docs/featurestore/ingesting-batch?hl=zh-cn) \u3002\n- \u77ad\u89e3\u5982\u4f55\u901a\u904e [\u6279\u91cf\u50b3\u9001](https://cloud.google.com/vertex-ai/docs/featurestore/serving-batch?hl=zh-cn) \u4f86\u63d0\u4f9b\u7279\u5fb5\u3002\n- \u67e5\u770b Vertex AI Feature Store\uff08\u820a\u7248\uff09\u7684 [\u5728\u7dda\u50b3\u9001\u914d\u984d](https://cloud.google.com/vertex-ai/quotas?hl=zh-cn#featurestore) \u3002\n- [\u6392\u67e5](https://cloud.google.com/vertex-ai/docs/general/troubleshooting?hl=zh-cn#feature-store) Vertex AI Feature Store\uff08\u820a\u7248\uff09\u5e38\u898b\u554f\u984c\u3002", "guide": "Vertex AI"}