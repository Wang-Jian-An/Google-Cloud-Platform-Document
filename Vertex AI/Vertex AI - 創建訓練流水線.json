{"title": "Vertex AI - \u5275\u5efa\u8a13\u7df4\u6d41\u6c34\u7dda", "url": "https://cloud.google.com/vertex-ai/docs/training/create-training-pipeline?hl=zh-cn", "abstract": "# Vertex AI - \u5275\u5efa\u8a13\u7df4\u6d41\u6c34\u7dda\n\u85c9\u52a9\u8a13\u7df4\u6d41\u6c34\u7dda\uff0c\u60a8\u53ef\u4ee5\u57f7\u884c\u81ea\u5b9a\u7fa9\u6a5f\u5668\u5b78\u7fd2 (ML) \u8a13\u7df4\uff0c\u4e26\u6839\u64da\u8a13\u7df4\u8f38\u51fa\u81ea\u52d5\u5275\u5efa `Model` \u8cc7\u6e90\u3002\n", "content": "## \u5275\u5efa\u6d41\u6c34\u7dda\u4e4b\u524d\n\u5728 Vertex AI \u4e0a\u5275\u5efa\u8a13\u7df4\u6d41\u6c34\u7dda\u4e4b\u524d\uff0c\u60a8\u9700\u8981\u5275\u5efa\u4e00\u500b [Python \u8a13\u7df4\u61c9\u7528](https://cloud.google.com/vertex-ai/docs/training/create-python-pre-built-container?hl=zh-cn) \u6216 [\u81ea\u5b9a\u7fa9\u5bb9\u5668](https://cloud.google.com/vertex-ai/docs/training/create-custom-container?hl=zh-cn) \uff0c\u4ee5\u5b9a\u7fa9\u8981\u5728 Vertex AI \u4e0a\u904b\u884c\u7684\u8a13\u7df4\u4ee3\u78bc\u548c\u4f9d\u8cf4\u9805\u3002\u5982\u679c\u60a8\u4f7f\u7528 TensorFlow\u3001scikit-learn \u6216 XGBoost \u5275\u5efa Python \u8a13\u7df4\u61c9\u7528\uff0c\u5247\u53ef\u4ee5\u4f7f\u7528\u6211\u5011\u7684\u9810\u69cb\u5efa\u5bb9\u5668\u4f86\u904b\u884c\u60a8\u7684\u4ee3\u78bc\u3002\u5982\u679c\u60a8\u4e0d\u78ba\u5b9a\u9078\u64c7\u54ea\u500b\u9078\u9805\uff0c\u8acb\u53c3\u95b1 [\u8a13\u7df4\u4ee3\u78bc\u8981\u6c42](https://cloud.google.com/vertex-ai/docs/training/code-requirements?hl=zh-cn) \u77ad\u89e3\u8a73\u60c5\u3002\n## \u8a13\u7df4\u6d41\u6c34\u7dda\u9078\u9805\n\u8a13\u7df4\u6d41\u6c34\u7dda\u5c01\u88dd\u4e86\u8a13\u7df4\u4f5c\u696d\u548c\u984d\u5916\u6b65\u9a5f\u3002\u672c\u6307\u5357\u4ecb\u7d39\u5169\u7a2e\u4e0d\u540c\u7684\u8a13\u7df4\u6d41\u6c34\u7dda\uff1a\n- \u5553\u52d5`CustomJob`\u4e26\u5c07\u751f\u6210\u7684\u6a21\u578b\u4e0a\u50b3\u5230 Vertex AI\n- \u5553\u52d5\u8d85\u53c3\u6578\u8abf\u7bc0\u4f5c\u696d\u4e26\u5c07\u751f\u6210\u7684\u6a21\u578b\u4e0a\u50b3\u5230 Vertex AI\n\u6b64\u5916\uff0c\u60a8\u9084\u53ef\u4ee5\u5728\u8a13\u7df4\u6d41\u6c34\u7dda\u4e2d\u4f7f\u7528 \u3002 [\u8a73\u7d30\u77ad\u89e3\u5982\u4f55\u914d\u7f6e\u8a13\u7df4\u6d41\u6c34\u7dda\u914d\u7f6e\u4ee5\u4f7f\u7528\u4ee3\u7ba1\u5f0f\u6578\u64da\u96c6](#managed-dataset) \u3002\n### CustomJob \u5305\u542b\u7684\u5167\u5bb9\n\u5275\u5efa \u81ea\u5b9a\u7fa9\u4f5c\u696d\u6642\uff0c\u60a8\u9700\u8981\u6307\u5b9a Vertex AI \u904b\u884c\u8a13\u7df4\u4ee3\u78bc\u6240\u9700\u7684\u8a2d\u7f6e\uff0c\u5305\u62ec\uff1a\n- \u7528\u65bc\u55ae\u7bc0\u9ede\u8a13\u7df4\u7684\u4e00\u500b\u5de5\u4f5c\u5668\u6c60 ( [WorkerPoolSpec](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/CustomJobSpec?hl=zh-cn#workerpoolspec) )\uff0c\u6216\u7528\u65bc\u5206\u4f48\u5f0f\u8a13\u7df4\u7684\u591a\u500b\u5de5\u4f5c\u5668\u6c60\n- \u7528\u65bc\u914d\u7f6e\u4f5c\u696d\u8abf\u5ea6\u7684\u53ef\u9078\u8a2d\u7f6e ( [Scheduling](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/CustomJobSpec?hl=zh-cn#scheduling) )\u3001 [\u7232\u8a13\u7df4\u4ee3\u78bc\u8a2d\u7f6e\u7279\u5b9a\u7684\u74b0\u5883\u8b8a\u91cf](https://cloud.google.com/vertex-ai/docs/training/code-requirements?hl=zh-cn#environment-variables) \u3001 [\u4f7f\u7528\u81ea\u5b9a\u7fa9\u670d\u52d9\u8cec\u865f](https://cloud.google.com/vertex-ai/docs/general/custom-service-account?hl=zh-cn) \u548c [\u4f7f\u7528 VPC \u7db2\u7d61\u5c0d\u7b49\u4e92\u9023](https://cloud.google.com/vertex-ai/docs/general/vpc-peering?hl=zh-cn) \n\u5728\u5de5\u4f5c\u5668\u6c60\u4e2d\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u4ee5\u4e0b\u8a2d\u7f6e\uff1a\n- [\u6a5f\u5668\u985e\u578b\u548c\u52a0\u901f\u5668](https://cloud.google.com/vertex-ai/docs/training/configure-compute?hl=zh-cn) \n- [\u5de5\u4f5c\u5668\u6c60\u904b\u884c\u7684\u8a13\u7df4\u4ee3\u78bc\u7684\u914d\u7f6e](https://cloud.google.com/vertex-ai/docs/training/configure-container-settings?hl=zh-cn) \uff1aPython \u8a13\u7df4\u61c9\u7528 ( [PythonPackageSpec](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/CustomJobSpec?hl=zh-cn#pythonpackagespec) ) \u6216\u81ea\u5b9a\u7fa9\u5bb9\u5668 ( [ContainerSpec](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/CustomJobSpec?hl=zh-cn#containerspec) )\n\u5982\u679c\u60a8\u8981\u5728 Vertex AI \u8a13\u7df4\u6d41\u6c34\u7dda\u4e4b\u5916\u5275\u5efa\u7368\u7acb\u7684\u81ea\u5b9a\u7fa9\u4f5c\u696d\uff0c\u8acb\u53c3\u95b1 [\u81ea\u5b9a\u7fa9\u4f5c\u696d\u6307\u5357](https://cloud.google.com/vertex-ai/docs/training/create-custom-job?hl=zh-cn) \u3002\n### \u914d\u7f6e\u6d41\u6c34\u7dda\u4ee5\u4f7f\u7528\u4ee3\u7ba1\u5f0f\u6578\u64da\u96c6\n\u5728\u8a13\u7df4\u6d41\u6c34\u7dda\u4e2d\uff0c\u60a8\u53ef\u4ee5\u5c07\u81ea\u5b9a\u7fa9\u8a13\u7df4\u4f5c\u696d\u6216\u8d85\u53c3\u6578\u8abf\u7bc0\u4f5c\u696d\u914d\u7f6e\u7232\u4f7f\u7528\u4ee3\u7ba1\u5f0f\u6578\u64da\u96c6\u3002\u901a\u904e\u4ee3\u7ba1\u5f0f\u6578\u64da\u96c6\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u8a13\u7df4\u61c9\u7528\u548c\u6a21\u578b\u7ba1\u7406\u6578\u64da\u96c6\u3002\n\u5982\u9700\u5728\u8a13\u7df4\u6d41\u6c34\u7dda\u4e2d\u4f7f\u7528\u4ee3\u7ba1\u5f0f\u6578\u64da\u96c6\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- [\u5275\u5efa\u6578\u64da\u96c6](https://cloud.google.com/vertex-ai/docs/datasets/overview?hl=zh-cn) \u3002\n- \u66f4\u65b0\u8a13\u7df4\u61c9\u7528\u4ee5\u4f7f\u7528\u4ee3\u7ba1\u5f0f\u6578\u64da\u96c6\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Vertex AI \u5982\u4f55\u5c07\u6578\u64da\u96c6\u50b3\u905e\u7d66\u8a13\u7df4\u61c9\u7528](https://cloud.google.com/vertex-ai/docs/training/using-managed-datasets?hl=zh-cn) \u3002\n- \u5728\u5275\u5efa\u8a13\u7df4\u6d41\u6c34\u7dda\u6642\u6307\u5b9a\u4ee3\u7ba1\u5f0f\u6578\u64da\u96c6\u3002\u4f8b\u5982\uff0c\u5982\u679c\u60a8\u4f7f\u7528 REST API \u5275\u5efa\u8a13\u7df4\u6d41\u6c34\u7dda\uff0c\u8acb\u5728 `inputDataConfig` \u90e8\u5206\u4e2d\u6307\u5b9a\u6578\u64da\u96c6\u8a2d\u7f6e\u3002\u60a8\u5fc5\u9808\u5728\u5275\u5efa\u6578\u64da\u96c6\u7684\u5340\u57df\u4e2d\u5275\u5efa\u8a13\u7df4\u6d41\u6c34\u7dda\u3002\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [TrainingPipeline](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/projects.locations.trainingPipelines?hl=zh-cn) \u7684API \u53c3\u8003\u6587\u6a94\u3002\n### \u914d\u7f6e\u5206\u4f48\u5f0f\u8a13\u7df4\n\u5728\u8a13\u7df4\u6d41\u6c34\u7dda\u4e2d\uff0c\u60a8\u53ef\u4ee5\u901a\u904e\u6307\u5b9a\u591a\u500b\u5de5\u4f5c\u5668\u6c60\u4f86\u914d\u7f6e\u7528\u65bc\u5206\u4f48\u5f0f\u8a13\u7df4\u7684\u81ea\u5b9a\u7fa9\u8a13\u7df4\u4f5c\u696d\u6216\u8d85\u53c3\u6578\u8abf\u7bc0\u4f5c\u696d\u3002\n\u6b64\u9801\u9762\u4e0a\u7684\u6240\u6709\u793a\u4f8b\u5747\u7232\u4f7f\u7528\u4e00\u500b\u5de5\u4f5c\u5668\u6c60\u7684\u55ae\u526f\u672c\u8a13\u7df4\u4f5c\u696d\u3002\u8981\u4fee\u6539\u5b83\u5011\u4ee5\u9032\u884c\u5206\u4f48\u5f0f\u8a13\u7df4\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- \u4f7f\u7528\u7b2c\u4e00\u500b\u5de5\u4f5c\u5668\u6c60\u914d\u7f6e\u4e3b\u526f\u672c\uff0c\u4e26\u5c07\u526f\u672c\u8a08\u6578\u8a2d\u7f6e\u7232 1\u3002\n- \u6dfb\u52a0\u66f4\u591a\u5de5\u4f5c\u5668\u6c60\u4f86\u914d\u7f6e\u5de5\u4f5c\u5668\u526f\u672c\u3001\u53c3\u6578\u670d\u52d9\u5668\u526f\u672c\u6216\u8a55\u4f30\u5668\u526f\u672c\uff08\u5982\u679c\u60a8\u7684\u6a5f\u5668\u5b78\u7fd2\u6846\u67b6\u652f\u6301\u5206\u4f48\u5f0f\u8a13\u7df4\u7684\u9019\u4e9b\u984d\u5916\u96c6\u7fa3\u4efb\u52d9\uff09\u3002\n\u8a73\u7d30\u77ad\u89e3\u5982\u4f55 [\u4f7f\u7528\u5206\u4f48\u5f0f\u8a13\u7df4](https://cloud.google.com/vertex-ai/docs/training/distributed-training?hl=zh-cn) \u3002\n## \u81ea\u5b9a\u7fa9\u4f5c\u696d\u548c\u6a21\u578b\u4e0a\u50b3\n\u6b64\u8a13\u7df4\u6d41\u6c34\u7dda\u5c01\u88dd\u4e86\u4e00\u500b\u81ea\u5b9a\u7fa9\u7684\u4f5c\u696d\u4ee5\u53ca\u984d\u5916\u7684\u4fbf\u6377\u6b65\u9a5f\uff0c\u53ef\u4ee5\u66f4\u8f15\u9b06\u5730\u5728\u8a13\u7df4\u5f8c\u5c07\u6a21\u578b\u90e8\u7f72\u5230 Vertex AI\u3002\u6b64\u8a13\u7df4\u6d41\u6c34\u7dda\u57f7\u884c\u5169\u500b\u4e3b\u8981\u4efb\u52d9\uff1a\n- \u8a13\u7df4\u6d41\u6c34\u7dda\u6703\u5275\u5efa\u4e00\u500b `CustomJob` \u8cc7\u6e90\u3002\u81ea\u5b9a\u7fa9\u4f5c\u696d\u4f7f\u7528\u60a8\u6307\u5b9a\u7684\u8a08\u7b97\u8cc7\u6e90\u904b\u884c\u8a13\u7df4\u61c9\u7528\u3002\n- \u81ea\u5b9a\u7fa9\u4f5c\u696d\u5b8c\u6210\u5f8c\uff0c\u8a13\u7df4\u6d41\u6c34\u7dda\u6703\u5728\u60a8\u7232 Cloud Storage \u5b58\u5132\u6876\u6307\u5b9a\u7684\u8f38\u51fa\u76ee\u9304\u4e2d\u67e5\u627e\u8a13\u7df4\u61c9\u7528\u5275\u5efa\u7684\u6a21\u578b\u5de5\u4ef6\u3002\u8a13\u7df4\u6d41\u6c34\u7dda\u4f7f\u7528\u9019\u4e9b\u5de5\u4ef6\u4f86\u5275\u5efa\u6a21\u578b\u8cc7\u6e90\uff0c\u5e6b\u52a9\u60a8\u7232 [\u6a21\u578b\u90e8\u7f72](https://cloud.google.com/vertex-ai/docs/predictions/deploy-model-api?hl=zh-cn) \u505a\u597d\u6e96\u5099\u3002 \n\u60a8\u53ef\u4ee5\u901a\u904e\u5169\u7a2e\u65b9\u5f0f\u8a2d\u7f6e\u6a21\u578b\u5de5\u4ef6\u7684\u4f4d\u7f6e\uff1a\n- \u5982\u679c\u60a8\u7232\u8a13\u7df4\u4f5c\u696d\u8a2d\u7f6e\u4e86 [baseOutputDirectory](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/CustomJobSpec?hl=zh-cn#FIELDS.base_output_directory) \uff0c\u8acb\u4f7f\u7528 Vertex AI \u8a2d\u7f6e\u7684 [$AIP_MODEL_DIR \u74b0\u5883\u8b8a\u91cf](https://cloud.google.com/vertex-ai/docs/training/code-requirements?hl=zh-cn#environment-variables) \u78ba\u4fdd\u8a13\u7df4\u4ee3\u78bc\u5c07\u6a21\u578b\u5de5\u4ef6\u4fdd\u5b58\u5230\u8a72\u4f4d\u7f6e\u3002\u8a13\u7df4\u4f5c\u696d\u5b8c\u6210\u5f8c\uff0cVertex AI \u6703\u5728 `gs://` `` `/model` \u4e2d\u641c\u7d22\u751f\u6210\u7684\u6a21\u578b\u5de5\u4ef6\u3002 **\u6ce8\u610f** \uff1a\u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f Python \u7248 Vertex AI SDK\uff0c\u5247\u53ef\u4ee5\u7701\u7565`base_output_dir`\u7279\u6027\u3002\u5728\u9019\u7a2e\u60c5\u6cc1\u4e0b\uff0cVertex AI \u6703\u5c07\u6a21\u578b\u5de5\u4ef6\u8f38\u51fa\u5230\u66ab\u5b58\u76ee\u9304\u4e2d\u5e36\u6709\u6642\u9593\u6233\u7684\u76ee\u9304\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1\uff1a- [CustomJob](https://cloud.google.com/python/docs/reference/aiplatform/latest/google.cloud.aiplatform.CustomJob?hl=zh-cn) \n- [CustomContainerTrainingJob](https://cloud.google.com/python/docs/reference/aiplatform/latest/google.cloud.aiplatform.CustomContainerTrainingJob?hl=zh-cn#google_cloud_aiplatform_CustomContainerTrainingJob_run) \n- [CustomPythonPackageTrainingJob](https://cloud.google.com/python/docs/reference/aiplatform/latest/google.cloud.aiplatform.CustomPythonPackageTrainingJob?hl=zh-cn#google_cloud_aiplatform_CustomPythonPackageTrainingJob_run) - \u5982\u679c\u60a8\u8a2d\u7f6e\u4e86 [modelToUpload.artifactUri \u5b57\u6bb5](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/projects.locations.models?hl=zh-cn#Model.FIELDS.artifact_uri) \uff0c\u8a13\u7df4\u6d41\u6c34\u7dda\u6703\u5f9e\u8a72 URI \u4e0a\u50b3\u6a21\u578b\u5de5\u4ef6\u3002\u5982\u679c\u60a8\u672a\u8a2d\u7f6e [baseOutputDirectory](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/CustomJobSpec?hl=zh-cn#FIELDS.base_output_directory) \uff0c\u5247\u5fc5\u9808\u8a2d\u7f6e\u6b64\u5b57\u6bb5\u3002\n\u5982\u679c\u60a8\u540c\u6642\u6307\u5b9a `baseOutputDirectory` \u548c `modelToUpload.artifactUri` \uff0c\u5247 Vertex AI \u6703\u4f7f\u7528 `modelToUpload.artifactUri` \u3002\n\u8981\u5275\u5efa\u6b64\u985e\u8a13\u7df4\u6d41\u6c34\u7dda\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u7684 Vertex AI \u90e8\u5206\u4e2d\uff0c\u8f49\u5230 **\u8a13\u7df4\u6d41\u6c34\u7dda** \u9801\u9762\u3002 [\u8f49\u5230\u201c\u8a13\u7df4\u6d41\u6c34\u7dda\u201d](https://console.cloud.google.com/vertex-ai/training/training-pipelines?hl=zh-cn) \n- \u9ede\u64ca **add_box \u5275\u5efa** \u4ee5\u6253\u958b **\u8a13\u7df4\u65b0\u6a21\u578b** \u7a97\u683c\u3002 **\u6ce8\u610f** \uff1a\u60a8\u53ef\u4ee5\u5728\u700f\u89bd\u5668\u4e2d\u8f38\u5165 [model.new](https://model.new) \uff0c\u4ee5\u76f4\u63a5\u8f49\u5230\u6a21\u578b\u5275\u5efa\u9801\u9762\u3002\n- \u5728 **\u8a13\u7df4\u65b9\u6cd5** \u6b65\u9a5f\u4e2d\uff0c\u6307\u5b9a\u4ee5\u4e0b\u8a2d\u7f6e\uff1a- \u5982\u679c\u60a8\u8981 [\u4f7f\u7528\u4ee3\u7ba1\u5f0f\u6578\u64da\u96c6\u9032\u884c\u8a13\u7df4](#managed-dataset) \uff0c\u8acb\u6307\u5b9a **\u6578\u64da\u96c6** \u548c **\u8a3b\u91cb\u96c6** \u3002\u5426\u5247\uff0c\u5728 **\u6578\u64da\u96c6** \u4e0b\u62c9\u5217\u8868\u4e2d\uff0c\u9078\u64c7 **\u7121\u4ee3\u7ba1\u5f0f\u6578\u64da\u96c6** \u3002\n- \u9078\u64c7 **\u81ea\u5b9a\u7fa9\u8a13\u7df4\uff08\u9ad8\u7d1a\uff09** \u3002\n\u9ede\u64ca **\u7e7c\u7e8c** \u3002\n- \u5728 **\u6a21\u578b\u8a73\u60c5** \u6b65\u9a5f\u4e2d\uff0c\u9078\u64c7 **\u8a13\u7df4\u65b0\u6a21\u578b** \u6216 **\u8a13\u7df4\u65b0\u7248\u672c** \u3002\u5982\u679c\u60a8\u9078\u64c7\u8a13\u7df4\u65b0\u6a21\u578b\uff0c\u8acb\u7232\u6a21\u578b\u8f38\u5165\u4e00\u500b\u540d\u7a31 \u3002\u9ede\u64ca **\u7e7c\u7e8c** \u3002\n- \u5728 **\u8a13\u7df4\u5bb9\u5668** \u6b65\u9a5f\u4e2d\uff0c\u6307\u5b9a\u4ee5\u4e0b\u8a2d\u7f6e\uff1a- \u9078\u64c7 [\u8981\u4f7f\u7528\u9810\u69cb\u5efa\u5bb9\u5668\u9084\u662f\u81ea\u5b9a\u7fa9\u5bb9\u5668](https://cloud.google.com/vertex-ai/docs/training/custom-training-methods?hl=zh-cn#pre-built-custom) \u9032\u884c\u8a13\u7df4\u3002\n- \u6839\u64da\u60a8\u7684\u9078\u64c7\uff0c\u57f7\u884c\u4ee5\u4e0b\u76f8\u61c9\u64cd\u4f5c\uff1a- \u5982\u679c\u8981\u4f7f\u7528\u9810\u69cb\u5efa\u5bb9\u5668\u9032\u884c\u8a13\u7df4\uff0c\u8acb\u5411 Vertex AI \u63d0\u4f9b\u4f7f\u7528\u60a8\u4e0a\u50b3\u5230 Cloud Storage \u7684\u8a13\u7df4\u8edf\u4ef6\u5305\u6240\u9700\u7684\u4fe1\u606f\uff1a- \u4f7f\u7528 **\u6a21\u578b\u6846\u67b6** \u548c **\u6a21\u578b\u6846\u67b6\u7248\u672c** \u4e0b\u62c9\u5217\u8868\u6307\u5b9a\u8981\u4f7f\u7528\u7684 [\u9810\u69cb\u5efa\u5bb9\u5668](https://cloud.google.com/vertex-ai/docs/training/pre-built-containers?hl=zh-cn) \u3002\n- \u5728 **\u8edf\u4ef6\u5305\u4f4d\u7f6e** \u5b57\u6bb5\u4e2d\uff0c\u6307\u5b9a [\u60a8\u5275\u5efa\u4e26\u4e0a\u50b3\u7684 Python \u8a13\u7df4\u61c9\u7528](https://cloud.google.com/vertex-ai/docs/training/create-python-pre-built-container?hl=zh-cn) \u7684 Cloud Storage URI\u3002\u6b64\u6587\u4ef6\u901a\u5e38\u4ee5 `.tar.gz` \u7d50\u5c3e\u3002\n- \u5728 **Python \u6a21\u584a** \u5b57\u6bb5\u4e2d\uff0c\u8f38\u5165 [\u8a13\u7df4\u61c9\u7528\u7684\u5165\u53e3\u9ede\u7684\u6a21\u584a\u540d\u7a31](https://cloud.google.com/vertex-ai/docs/training/create-python-pre-built-container?hl=zh-cn#python-modules) \u3002\n- \u5982\u679c\u8981\u4f7f\u7528 [\u81ea\u5b9a\u7fa9\u5bb9\u5668\u9032\u884c\u8a13\u7df4](https://cloud.google.com/vertex-ai/docs/training/create-custom-container?hl=zh-cn) \uff0c\u8acb\u5728 **\u5bb9\u5668\u6620\u50cf** \u5b57\u6bb5\u4e2d\u6307\u5b9a\u5bb9\u5668\u6620\u50cf\u7684 Artifact Registry \u6216 Docker Hub URI\u3002\n- \u5728 **Model output directory** \u5b57\u6bb5\u4e2d\uff0c\u6307\u5b9a\u60a8\u6709\u6b0a\u8a2a\u554f\u7684\u5b58\u5132\u6876\u4e2d\u7684\u76ee\u9304\u7684 Cloud Storage URI\u3002\u76ee\u9304\u4e0d\u9700\u8981\u5df2\u7d93\u5b58\u5728\u3002\u6b64\u503c\u6703\u5728 [baseOutputDirectory API \u5b57\u6bb5](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/CustomJobSpec?hl=zh-cn#FIELDS.base_output_directory) \u4e2d\u50b3\u905e\u7d66 Vertex AI\uff0c\u8a72\u5b57\u6bb5\u8a2d\u7f6e [\u8a13\u7df4\u61c9\u7528\u5728\u5176\u904b\u884c\u6642\u53ef\u4ee5\u8a2a\u554f\u7684\u5e7e\u500b\u74b0\u5883\u8b8a\u91cf](https://cloud.google.com/vertex-ai/docs/training/code-requirements?hl=zh-cn#environment-variables) \u3002\u5728\u8a13\u7df4\u7d50\u675f\u6642\uff0cVertex AI \u6703\u5728\u6b64 URI \u7684\u5b50\u76ee\u9304\u4e2d\u67e5\u627e [\u6a21\u578b\u5de5\u4ef6](https://cloud.google.com/vertex-ai/docs/training/exporting-model-artifacts?hl=zh-cn) \uff0c\u7528\u65bc\u5275\u5efa `Model` \u3002\uff08\u6b64\u5b50\u76ee\u9304\u53ef\u4f5c\u7232 `AIP_MODEL_DIR` \u74b0\u5883\u8b8a\u91cf\u63d0\u4f9b\u7d66\u8a13\u7df4\u4ee3\u78bc\u3002\uff09\u5982\u679c\u60a8\u4e0d\u4f7f\u7528\u8d85\u53c3\u6578\u8abf\u7bc0\uff0cVertex AI \u6703\u5728 `` `/model/` \u4e2d\u67e5\u627e\u6a21\u578b\u5de5\u4ef6\u3002\n- **\u53ef\u9078** \uff1a\u5728 **\u53c3\u6578** \u5b57\u6bb5\u4e2d\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a Vertex AI \u958b\u59cb\u904b\u884c\u8a13\u7df4\u4ee3\u78bc\u6642\u4f7f\u7528\u7684\u53c3\u6578\u3002\u6240\u6709\u53c3\u6578\u7684\u7e3d\u9577\u5ea6\u4e0a\u9650\u7232 10 \u842c\u500b\u5b57\u7b26\u3002\u9019\u4e9b\u53c3\u6578\u7684\u884c\u7232\u56e0\u60a8\u4f7f\u7528\u7684\u5bb9\u5668\u985e\u578b\u800c\u7570\uff1a- \u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f\u9810\u69cb\u5efa\u5bb9\u5668\uff0cVertex AI \u6703\u5c07\u53c3\u6578\u4f5c\u7232\u547d\u4ee4\u884c\u6a19\u8a8c\u50b3\u905e\u7d66 **Python \u6a21\u584a** \u3002\n- \u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f\u81ea\u5b9a\u7fa9\u5bb9\u5668\uff0c\u5247 Vertex AI \u6703 [\u4f7f\u7528\u53c3\u6578\u66ff\u63db\u5bb9\u5668\u7684 CMD \u6307\u4ee4](https://cloud.google.com/vertex-ai/docs/training/configure-container-settings?hl=zh-cn#configure) \u3002\u9ede\u64ca **\u7e7c\u7e8c** \u3002\n- \u5728 **\u8d85\u53c3\u6578\u8abf\u7bc0** \u6b65\u9a5f\u4e2d\uff0c\u78ba\u4fdd\u672a\u9078\u4e2d **\u5553\u7528\u8d85\u53c3\u6578\u8abf\u7bc0** \u8907\u9078\u6846\u3002\u9ede\u64ca **\u7e7c\u7e8c** \u3002\n- \u5728 **\u8a08\u7b97\u548c\u50f9\u683c** \u6b65\u9a5f\u4e2d\uff0c\u6307\u5b9a\u4ee5\u4e0b\u8a2d\u7f6e\uff1a- \u5728 **\u5340\u57df** \u4e0b\u62c9\u5217\u8868\u4e2d\uff0c\u9078\u64c7\u4e00\u500b [\u652f\u6301\u81ea\u5b9a\u7fa9\u8a13\u7df4\u7684\u5340\u57df](https://cloud.google.com/vertex-ai/docs/general/locations?hl=zh-cn) \u3002\n- \u5728 **\u5de5\u4f5c\u5668\u6c60 0** \u90e8\u5206\u4e2d\uff0c\u6307\u5b9a\u7528\u65bc\u8a13\u7df4\u7684 [\u8a08\u7b97\u8cc7\u6e90](https://cloud.google.com/vertex-ai/docs/training/configure-compute?hl=zh-cn) \u3002\u5982\u679c\u6307\u5b9a\u52a0\u901f\u5668\uff0c\u8acb [\u78ba\u4fdd\u6240\u9078\u52a0\u901f\u5668\u985e\u578b\u5728\u6240\u9078\u5340\u57df\u53ef\u7528](https://cloud.google.com/vertex-ai/docs/general/locations?hl=zh-cn#region_considerations) \u3002\u5982\u679c\u60a8\u8981\u57f7\u884c [\u5206\u4f48\u5f0f\u8a13\u7df4](https://cloud.google.com/vertex-ai/docs/training/distributed-training?hl=zh-cn) \uff0c\u5247\u9ede\u64ca **Add more worker pools** \uff0c\u4f75\u7232\u60a8\u9700\u8981\u7684\u6bcf\u500b\u984d\u5916\u5de5\u4f5c\u5668\u6c60\u6307\u5b9a\u4e00\u7d44\u984d\u5916\u7684\u8a08\u7b97\u8cc7\u6e90\u3002\n\u9ede\u64ca **\u7e7c\u7e8c** \u3002\n- \u5728 **\u9810\u6e2c\u5bb9\u5668** \u6b65\u9a5f\u4e2d\uff0c\u6307\u5b9a\u4ee5\u4e0b\u8a2d\u7f6e\uff1a- \u9078\u64c7 [\u8981\u4f7f\u7528\u9810\u69cb\u5efa\u5bb9\u5668\u9084\u662f\u81ea\u5b9a\u7fa9\u5bb9\u5668](https://cloud.google.com/vertex-ai/docs/model-registry/import-model?hl=zh-cn#container-type) \u901a\u904e\u7d93\u904e\u8a13\u7df4\u7684\u6a21\u578b\u9032\u884c\u9810\u6e2c\u3002\n- \u6839\u64da\u60a8\u7684\u9078\u64c7\uff0c\u57f7\u884c\u4ee5\u4e0b\u76f8\u61c9\u64cd\u4f5c\uff1a- \u5982\u679c\u60a8\u8981\u4f7f\u7528\u9810\u69cb\u5efa\u5bb9\u5668\u4f86\u9032\u884c\u9810\u6e2c\uff0c\u5247\u4f7f\u7528 **\u6a21\u578b\u6846\u67b6** \u3001 **\u6a21\u578b\u6846\u67b6\u7248\u672c** \u548c **\u52a0\u901f\u5668\u985e\u578b** \u5b57\u6bb5\u4f86\u9078\u64c7\u8981\u7528\u4f86\u9032\u884c\u9810\u6e2c\u7684 [\u9810\u69cb\u5efa\u9810\u6e2c\u5bb9\u5668](https://cloud.google.com/vertex-ai/docs/predictions/pre-built-containers?hl=zh-cn) \u3002\u5c07 **\u6a21\u578b\u6846\u67b6** \u548c **\u6a21\u578b\u6846\u67b6\u7248\u672c** \u8207\u7528\u65bc\u8a13\u7df4\u7684\u6a5f\u5668\u5b78\u7fd2\u6846\u67b6\u5339\u914d\u3002\u5982\u679c\u60a8\u5e0c\u671b\u7a0d\u5f8c [\u4f7f\u7528 GPU \u9032\u884c\u5728\u7dda\u9810\u6e2c\u6216\u6279\u91cf\u9810\u6e2c](https://cloud.google.com/vertex-ai/docs/predictions/configure-compute?hl=zh-cn) \uff0c\u8acb\u50c5\u6307\u5b9a **\u52a0\u901f\u5668\u985e\u578b** \u3002\n- \u5982\u679c\u60a8\u8981\u4f7f\u7528\u81ea\u5b9a\u7fa9\u5bb9\u5668\u4f86\u57f7\u884c\u9810\u6e2c\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a- \u5728 **\u5bb9\u5668\u6620\u50cf** \u5b57\u6bb5\u4e2d\uff0c\u6307\u5b9a [\u60a8\u7684\u5bb9\u5668\u6620\u50cf\u7684 Artifact Registry URI](https://cloud.google.com/vertex-ai/docs/predictions/custom-container-requirements?hl=zh-cn#publishing) \u3002\n- \u6216\u8005\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a **\u547d\u4ee4** \u4f86 [\u66ff\u63db\u5bb9\u5668\u7684 ENTRYPOINT \u6307\u4ee4](https://cloud.google.com/vertex-ai/docs/predictions/use-custom-container?hl=zh-cn#create-model) \u3002\n- **\u6a21\u578b\u76ee\u9304** (Model directory) \u5b57\u6bb5\u5305\u542b\u60a8\u4e4b\u524d\u5728 **\u8a13\u7df4\u5bb9\u5668** \u6b65\u9a5f\u7684 **Model output directory** \u5b57\u6bb5\u4e2d\u8a2d\u7f6e\u7684\u503c\u3002\u66f4\u6539\u9019\u5169\u500b\u5b57\u6bb5\u5177\u6709\u76f8\u540c\u7684\u6548\u679c\u3002\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u6b64\u5b57\u6bb5\uff0c\u8acb\u53c3\u95b1 [\u4e4b\u524d\u7684\u8aaa\u660e](#model-output-directory-False) \u3002\n- \u5c07 **\u9810\u6e2c\u67b6\u69cb** \u90e8\u5206\u4e2d\u7684\u5b57\u6bb5\u7559\u7a7a\u3002\n- \u9ede\u64ca **\u958b\u59cb\u8a13\u7df4** \u4ee5\u5553\u52d5\u81ea\u5b9a\u7fa9\u8a13\u7df4\u6d41\u6c34\u7dda\u3002\n\u901a\u904e\u4ee5\u4e0b\u4ee3\u78bc\u793a\u4f8b\u4f7f\u7528 [trainingPipeline \u8cc7\u6e90\u7684 create \u65b9\u6cd5](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/projects.locations.trainingPipelines/create?hl=zh-cn) \u5275\u5efa\u8a13\u7df4\u6d41\u6c34\u7dda\u3002\n **\u6ce8\u610f** \uff1a\u5982\u679c\u8981\u8a2d\u7f6e\u6b64\u6d41\u6c34\u7dda\u4ee5\u5275\u5efa\u65b0\u6a21\u578b\u7248\u672c \uff0c\u5247\u53ef\u4ee5\u9078\u64c7\u5728 `trainingPipeline` \u5b57\u6bb5\u4e2d\u6dfb\u52a0 `PARENT_MODEL` \u3002\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u4f7f\u7528 Vertex AI Model Registry \u9032\u884c\u6a21\u578b\u7248\u672c\u63a7\u5236](https://cloud.google.com/vertex-ai/docs/model-registry/versioning?hl=zh-cn) \u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a\u904b\u884c\u8a13\u7df4\u4ee3\u78bc\u4e26\u5b58\u5132`Model`\u7684\u5340\u57df\u3002\n- \uff1a\u60a8\u7684\u9805\u76ee ID\u3002\n- \uff1a\u5fc5\u586b\u3002trainingPipeline \u7684\u986f\u793a\u540d\u3002\n- \u5982\u679c\u8a13\u7df4\u61c9\u7528\u4f7f\u7528 Vertex AI \u6578\u64da\u96c6\uff0c\u8acb\u6307\u5b9a\u4ee5\u4e0b\u5167\u5bb9\uff1a\n- \uff1a\u6578\u64da\u96c6\u7684 ID\u3002\n- \uff1a\u6839\u64da\u60a8\u6307\u5b9a\u7684\u8a3b\u91cb\u904e\u6ffe\u6578\u64da\u96c6\u3002\n- \uff1a\u6839\u64da\u6307\u5b9a\u7684\u8a3b\u91cb\u67b6\u69cb URI \u904e\u6ffe\u6578\u64da\u96c6\u3002\n- \u4f7f\u7528\u4ee5\u4e0b\u4efb\u4e00\u9078\u9805\u4f86\u6307\u5b9a\u6578\u64da\u9805\u62c6\u5206\u7232\u8a13\u7df4\u96c6\u3001\u9a57\u8b49\u96c6\u548c\u6e2c\u8a66\u96c6\u7684\u65b9\u5f0f\u3002- \u5982\u9700\u6839\u64da\u5b9a\u7fa9\u6bcf\u500b\u96c6\u5408\u5927\u5c0f\u7684\u6bd4\u4f8b\u4f86\u62c6\u5206\u6578\u64da\u96c6\uff0c\u8acb\u6307\u5b9a\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1a\u7528\u65bc\u8a13\u7df4\u6a21\u578b\u7684\u6578\u64da\u96c6\u6bd4\u4f8b\u3002\n- \uff1a\u7528\u65bc\u9a57\u8b49\u6a21\u578b\u7684\u6578\u64da\u96c6\u6bd4\u4f8b\u3002\n- \uff1a\u7528\u65bc\u8a55\u4f30\u6a21\u578b\u7684\u6578\u64da\u96c6\u6bd4\u4f8b\u3002\n- \u5982\u9700\u6839\u64da\u904e\u6ffe\u689d\u4ef6\u62c6\u5206\u6578\u64da\u96c6\uff0c\u8acb\u6307\u5b9a\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1a\u5c07\u6578\u64da\u96c6\u904e\u6ffe\u7232\u7528\u65bc\u8a13\u7df4\u6a21\u578b\u7684\u6578\u64da\u9805\u3002\n- \uff1a\u5c07\u6578\u64da\u96c6\u904e\u6ffe\u7232\u7528\u65bc\u9a57\u8b49\u6a21\u578b\u7684\u6578\u64da\u9805\u3002\n- \uff1a\u5c07\u6578\u64da\u96c6\u904e\u6ffe\u7232\u7528\u65bc\u8a55\u4f30\u6a21\u578b\u7684\u6578\u64da\u9805\u3002\n- \u5982\u9700\u4f7f\u7528\u9810\u5b9a\u7fa9\u7684\u62c6\u5206\uff0c\u8acb\u6307\u5b9a\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1a\u7528\u65bc\u62c6\u5206\u6578\u64da\u96c6\u7684\u5217\u7684\u540d\u7a31\u3002\u6b64\u5217\u4e2d\u53ef\u63a5\u53d7\u7684\u503c\u5305\u62ec\u201ctraining\u201d\u201cvalidation\u201d\u548c\u201ctest\u201d\u3002\n- \u5982\u9700\u6839\u64da\u6578\u64da\u9805\u7684\u6642\u9593\u6233\u62c6\u5206\u6578\u64da\u96c6\uff0c\u8acb\u6307\u5b9a\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1a\u7528\u65bc\u8a13\u7df4\u6a21\u578b\u7684\u6578\u64da\u96c6\u6bd4\u4f8b\u3002\n- \uff1a\u7528\u65bc\u9a57\u8b49\u6a21\u578b\u7684\u6578\u64da\u96c6\u6bd4\u4f8b\u3002\n- \uff1a\u7528\u65bc\u8a55\u4f30\u6a21\u578b\u7684\u6578\u64da\u96c6\u6bd4\u4f8b\u3002\n- \uff1a\u7528\u65bc\u62c6\u5206\u6578\u64da\u96c6\u7684\u6642\u9593\u6233\u5217\u7684\u540d\u7a31\u3002\n- \uff1aVertex AI \u5728\u8a13\u7df4\u6578\u64da\u96c6\u88ab\u62c6\u5206\u7232\u8a13\u7df4\u96c6\u3001\u9a57\u8b49\u96c6\u548c\u6e2c\u8a66\u96c6\u5f8c\u5c07\u5176\u5c0e\u51fa\u7684\u76ee\u6a19 Cloud Storage \u4f4d\u7f6e\u3002\n- \u5b9a\u7fa9\u81ea\u5b9a\u7fa9\u8a13\u7df4\u4f5c\u696d\uff1a- \uff1a\u6a5f\u5668\u985e\u578b\u3002\u8acb\u53c3\u95b1 [\u53ef\u7528\u65bc\u8a13\u7df4\u7684\u6a5f\u5668\u985e\u578b](https://cloud.google.com/vertex-ai/docs/training/configure-compute?hl=zh-cn) \u3002\n- \uff1a\uff08\u53ef\u9078\uff09\u8981\u9644\u52a0\u5230\u6bcf\u500b\u8a66\u9a57\u7684\u52a0\u901f\u5668\u985e\u578b\u3002\n- \uff1a\uff08\u53ef\u9078\uff09\u8981\u9644\u52a0\u5230\u6bcf\u500b\u8a66\u9a57\u7684\u52a0\u901f\u5668\u6578\u91cf\u3002\n- \uff1a\u6bcf\u6b21\u8a66\u9a57\u8981\u4f7f\u7528\u7684\u5de5\u4f5c\u5668\u526f\u672c\u6578\u3002\n- \u5982\u679c\u8a13\u7df4\u61c9\u7528\u5728\u81ea\u5b9a\u7fa9\u5bb9\u5668\u4e2d\u904b\u884c\uff0c\u8acb\u6307\u5b9a\u4ee5\u4e0b\u5167\u5bb9\uff1a\n- \uff1a\u8981\u5728\u6bcf\u500b\u5de5\u4f5c\u5668\u526f\u672c\u4e0a\u904b\u884c\u7684\u5bb9\u5668\u6620\u50cf\u7684 Artifact Registry\u3001Container Registry \u6216 Docker Hub URI\u3002\n- \uff1a\uff08\u53ef\u9078\uff09\u5553\u52d5\u5bb9\u5668\u6642\u8981\u8abf\u7528\u7684\u547d\u4ee4\u3002\u6b64\u547d\u4ee4\u6703\u66ff\u63db\u5bb9\u5668\u7684\u9ed8\u8a8d\u5165\u53e3\u9ede\u3002\n- \uff1a\uff08\u53ef\u9078\uff09\u5553\u52d5\u5bb9\u5668\u6642\u8981\u50b3\u905e\u7684\u53c3\u6578\u3002 \u6240\u6709\u53c3\u6578\u7684\u7e3d\u9577\u5ea6\u4e0a\u9650\u7232 10 \u842c\u500b\u5b57\u7b26\u3002\n- \u5982\u679c\u8a13\u7df4\u61c9\u7528\u662f\u5728\u9810\u69cb\u5efa\u5bb9\u5668\u4e2d\u904b\u884c\u7684 Python \u8edf\u4ef6\u5305\uff0c\u8acb\u6307\u5b9a\u4ee5\u4e0b\u5167\u5bb9\uff1a\n- \uff1a\u904b\u884c\u63d0\u4f9b\u7684 Python \u8edf\u4ef6\u5305\u7684\u5bb9\u5668\u6620\u50cf\u7684 URI\u3002\u8acb\u53c3\u95b1 [\u53ef\u7528\u65bc\u8a13\u7df4\u7684\u9810\u69cb\u5efa\u5bb9\u5668](https://cloud.google.com/vertex-ai/docs/training/pre-built-containers?hl=zh-cn) \u3002\n- \uff1aPython \u8edf\u4ef6\u5305\u6587\u4ef6\u7684 Cloud Storage \u4f4d\u7f6e\uff0c\u9019\u4e9b\u6587\u4ef6\u662f\u8a13\u7df4\u7a0b\u5e8f\u53ca\u5176\u5f9e\u5c6c\u8edf\u4ef6\u5305\u3002\u8edf\u4ef6\u5305 URI \u7684\u6578\u91cf\u4e0a\u9650\u7232 100\u3002\n- \uff1a\u5b89\u88dd\u8edf\u4ef6\u5305\u5f8c\u8981\u904b\u884c\u7684 Python \u6a21\u584a\u540d\u7a31\u3002\n- \uff1a\uff08\u53ef\u9078\uff09\u8981\u50b3\u905e\u7d66 Python \u6a21\u584a\u7684\u547d\u4ee4\u884c\u53c3\u6578\u3002\u6240\u6709\u53c3\u6578\u7684\u7e3d\u9577\u5ea6\u4e0a\u9650\u7232 10 \u842c\u500b\u5b57\u7b26\u3002\n- \uff1a\uff08\u53ef\u9078\uff09\u4f5c\u696d\u7684\u6700\u9577\u904b\u884c\u6642\u9593\u3002\n- \uff1aTrainingPipeline \u4e0a\u50b3\uff08\u5275\u5efa\uff09\u7684\u6a21\u578b\u7684\u986f\u793a\u540d\u3002\n- \uff1a\u6a21\u578b\u7684\u8aaa\u660e\u3002\n- \uff1a\u7528\u65bc\u904b\u884c\u9810\u6e2c\u7684\u5bb9\u5668\u6620\u50cf\u7684 URI\u3002\u4f8b\u5982`us-docker.pkg.dev/vertex-ai/prediction/tf2-cpu.2-1:latest`\u3002\u4f7f\u7528 [\u9810\u69cb\u5efa\u5bb9\u5668](https://cloud.google.com/vertex-ai/docs/predictions/pre-built-containers?hl=zh-cn) \u6216 [\u81ea\u5b9a\u7fa9\u5bb9\u5668](https://cloud.google.com/vertex-ai/docs/predictions/use-custom-container?hl=zh-cn) \u3002\n- \uff1a\u7528\u65bc\u7d44\u7e54\u6a21\u578b\u7684\u4efb\u4f55\u9375\u503c\u5c0d\u3002\u4f8b\u5982\uff1a- \"env\": \"prod\"\n- \"tier\": \"backend\"\n- \u6307\u5b9a\u8981\u61c9\u7528\u65bc\u6b64\u8a13\u7df4\u6d41\u6c34\u7dda\u7684\u4efb\u4f55\u6a19\u7c64\u7684\u548c\u3002\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nPOST https://LOCATION_ID-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION_ID/trainingPipelines\n```\n\u8acb\u6c42 JSON \u6b63\u6587\uff1a\n```\n{\n \"displayName\": \"TRAINING_PIPELINE_NAME\",\n \"inputDataConfig\": {\n \"datasetId\": DATASET_ID,\n \"annotationsFilter\": ANNOTATIONS_FILTER,\n \"annotationSchemaUri\": ANNOTATION_SCHEMA_URI,\n // Union field split can be only one of the following:\n \"fractionSplit\": {\n  \"trainingFraction\": TRAINING_FRACTION,\n  \"validationFraction\": VALIDATION_FRACTION,\n  \"testFraction\": TEST_FRACTION\n },\n \"filterSplit\": {\n  \"trainingFilter\": TRAINING_FILTER,\n  \"validationFilter\": VALIDATION_FILTER,\n  \"testFilter\": TEST_FILTER\n },\n \"predefinedSplit\": {\n  \"key\": PREDEFINED_SPLIT_KEY\n },\n \"timestampSplit\": {\n  \"trainingFraction\": TIMESTAMP_TRAINING_FRACTION,\n  \"validationFraction\": TIMESTAMP_VALIDATION_FRACTION,\n  \"testFraction\": TIMESTAMP_TEST_FRACTION,\n  \"key\": TIMESTAMP_SPLIT_KEY\n }\n // End of list of possible types for union field split.\n \"gcsDestination\": {\n  \"outputUriPrefix\": OUTPUT_URI_PREFIX\n }\n },\n \"trainingTaskDefinition\": \"gs://google-cloud-aiplatform/schema/trainingjob/definition/custom_task_1.0.0.yaml\",\n \"trainingTaskInputs\": {\n \"workerPoolSpecs\": [  {\n   \"machineSpec\": {\n   \"machineType\": MACHINE_TYPE,\n   \"acceleratorType\": ACCELERATOR_TYPE,\n   \"acceleratorCount\": ACCELERATOR_COUNT\n   },\n   \"replicaCount\": REPLICA_COUNT,\n   // Union field task can be only one of the following:\n   \"containerSpec\": {\n   \"imageUri\": CUSTOM_CONTAINER_IMAGE_URI,\n   \"command\": [    CUSTOM_CONTAINER_COMMAND\n   ],\n   \"args\": [    CUSTOM_CONTAINER_ARGS\n   ]\n   },\n   \"pythonPackageSpec\": {\n   \"executorImageUri\": PYTHON_PACKAGE_EXECUTOR_IMAGE_URI,\n   \"packageUris\": [    PYTHON_PACKAGE_URIS\n   ],\n   \"pythonModule\": PYTHON_MODULE,\n   \"args\": [    PYTHON_PACKAGE_ARGS\n   ]\n   }\n   // End of list of possible types for union field task.\n  }\n  ],\n  \"scheduling\": {\n  \"TIMEOUT\": TIMEOUT\n  }\n }\n },\n \"modelToUpload\": {\n \"displayName\": \"MODEL_NAME\",\n \"predictSchemata\": {},\n \"containerSpec\": {\n  \"imageUri\": \"IMAGE_URI\"\n }\n },\n \"labels\": {\n LABEL_NAME_1\": LABEL_VALUE_1,\n LABEL_NAME_2\": LABEL_VALUE_2\n }\n}\n```\n\u5982\u9700\u767c\u9001\u8acb\u6c42\uff0c\u8acb\u9078\u64c7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\uff1a\n **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION_ID-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION_ID/trainingPipelines\"\n``` **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION_ID-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION_ID/trainingPipelines\" | Select-Object -Expand Content\n```\n\u97ff\u61c9\u5305\u542b\u6709\u95dc\u898f\u7bc4\u7684\u4fe1\u606f\u4ee5\u53ca \u3002\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300aVertex AI \u5feb\u901f\u5165\u9580\uff1a\u4f7f\u7528\u5ba2\u6236\u7aef\u5eab\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Java \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Vertex AI Java API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/java/docs/reference/google-cloud-aiplatform/latest/com.google.cloud.aiplatform.v1?hl=zh-cn) \u3002\n\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/java-docs-samples/blob/HEAD/aiplatform/src/main/java/aiplatform/CreateTrainingPipelineCustomJobSample.java) \n```\nimport com.google.cloud.aiplatform.v1.LocationName;import com.google.cloud.aiplatform.v1.Model;import com.google.cloud.aiplatform.v1.ModelContainerSpec;import com.google.cloud.aiplatform.v1.PipelineServiceClient;import com.google.cloud.aiplatform.v1.PipelineServiceSettings;import com.google.cloud.aiplatform.v1.TrainingPipeline;import com.google.gson.JsonArray;import com.google.gson.JsonObject;import com.google.protobuf.Value;import com.google.protobuf.util.JsonFormat;import java.io.IOException;public class CreateTrainingPipelineCustomJobSample {\u00a0 public static void main(String[] args) throws IOException {\u00a0 \u00a0 // TODO(developer): Replace these variables before running the sample.\u00a0 \u00a0 String project = \"PROJECT\";\u00a0 \u00a0 String displayName = \"DISPLAY_NAME\";\u00a0 \u00a0 String modelDisplayName = \"MODEL_DISPLAY_NAME\";\u00a0 \u00a0 String containerImageUri = \"CONTAINER_IMAGE_URI\";\u00a0 \u00a0 String baseOutputDirectoryPrefix = \"BASE_OUTPUT_DIRECTORY_PREFIX\";\u00a0 \u00a0 createTrainingPipelineCustomJobSample(\u00a0 \u00a0 \u00a0 \u00a0 project, displayName, modelDisplayName, containerImageUri, baseOutputDirectoryPrefix);\u00a0 }\u00a0 static void createTrainingPipelineCustomJobSample(\u00a0 \u00a0 \u00a0 String project,\u00a0 \u00a0 \u00a0 String displayName,\u00a0 \u00a0 \u00a0 String modelDisplayName,\u00a0 \u00a0 \u00a0 String containerImageUri,\u00a0 \u00a0 \u00a0 String baseOutputDirectoryPrefix)\u00a0 \u00a0 \u00a0 throws IOException {\u00a0 \u00a0 PipelineServiceSettings settings =\u00a0 \u00a0 \u00a0 \u00a0 PipelineServiceSettings.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setEndpoint(\"us-central1-aiplatform.googleapis.com:443\")\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 String location = \"us-central1\";\u00a0 \u00a0 // Initialize client that will be used to send requests. This client only needs to be created\u00a0 \u00a0 // once, and can be reused for multiple requests. After completing all of your requests, call\u00a0 \u00a0 // the \"close\" method on the client to safely clean up any remaining background resources.\u00a0 \u00a0 try (PipelineServiceClient client = PipelineServiceClient.create(settings)) {\u00a0 \u00a0 \u00a0 JsonObject jsonMachineSpec = new JsonObject();\u00a0 \u00a0 \u00a0 jsonMachineSpec.addProperty(\"machineType\", \"n1-standard-4\");\u00a0 \u00a0 \u00a0 // A working docker image can be found at\u00a0 \u00a0 \u00a0 // gs://cloud-samples-data/ai-platform/mnist_tfrecord/custom_job\u00a0 \u00a0 \u00a0 // This sample image accepts a set of arguments including model_dir.\u00a0 \u00a0 \u00a0 JsonObject jsonContainerSpec = new JsonObject();\u00a0 \u00a0 \u00a0 jsonContainerSpec.addProperty(\"imageUri\", containerImageUri);\u00a0 \u00a0 \u00a0 JsonArray jsonArgs = new JsonArray();\u00a0 \u00a0 \u00a0 jsonArgs.add(\"--model_dir=$(AIP_MODEL_DIR)\");\u00a0 \u00a0 \u00a0 jsonContainerSpec.add(\"args\", jsonArgs);\u00a0 \u00a0 \u00a0 JsonObject jsonJsonWorkerPoolSpec0 = new JsonObject();\u00a0 \u00a0 \u00a0 jsonJsonWorkerPoolSpec0.addProperty(\"replicaCount\", 1);\u00a0 \u00a0 \u00a0 jsonJsonWorkerPoolSpec0.add(\"machineSpec\", jsonMachineSpec);\u00a0 \u00a0 \u00a0 jsonJsonWorkerPoolSpec0.add(\"containerSpec\", jsonContainerSpec);\u00a0 \u00a0 \u00a0 JsonArray jsonWorkerPoolSpecs = new JsonArray();\u00a0 \u00a0 \u00a0 jsonWorkerPoolSpecs.add(jsonJsonWorkerPoolSpec0);\u00a0 \u00a0 \u00a0 JsonObject jsonBaseOutputDirectory = new JsonObject();\u00a0 \u00a0 \u00a0 // The GCS location for outputs must be accessible by the project's AI Platform\u00a0 \u00a0 \u00a0 // service account.\u00a0 \u00a0 \u00a0 jsonBaseOutputDirectory.addProperty(\"output_uri_prefix\", baseOutputDirectoryPrefix);\u00a0 \u00a0 \u00a0 JsonObject jsonTrainingTaskInputs = new JsonObject();\u00a0 \u00a0 \u00a0 jsonTrainingTaskInputs.add(\"workerPoolSpecs\", jsonWorkerPoolSpecs);\u00a0 \u00a0 \u00a0 jsonTrainingTaskInputs.add(\"baseOutputDirectory\", jsonBaseOutputDirectory);\u00a0 \u00a0 \u00a0 Value.Builder trainingTaskInputsBuilder = Value.newBuilder();\u00a0 \u00a0 \u00a0 JsonFormat.parser().merge(jsonTrainingTaskInputs.toString(), trainingTaskInputsBuilder);\u00a0 \u00a0 \u00a0 Value trainingTaskInputs = trainingTaskInputsBuilder.build();\u00a0 \u00a0 \u00a0 String trainingTaskDefinition =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"gs://google-cloud-aiplatform/schema/trainingjob/definition/custom_task_1.0.0.yaml\";\u00a0 \u00a0 \u00a0 String imageUri = \"gcr.io/cloud-aiplatform/prediction/tf-cpu.1-15:latest\";\u00a0 \u00a0 \u00a0 ModelContainerSpec containerSpec =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ModelContainerSpec.newBuilder().setImageUri(imageUri).build();\u00a0 \u00a0 \u00a0 Model modelToUpload =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Model.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setDisplayName(modelDisplayName)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setContainerSpec(containerSpec)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 \u00a0 TrainingPipeline trainingPipeline =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 TrainingPipeline.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setDisplayName(displayName)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setTrainingTaskDefinition(trainingTaskDefinition)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setTrainingTaskInputs(trainingTaskInputs)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setModelToUpload(modelToUpload)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 \u00a0 LocationName parent = LocationName.of(project, location);\u00a0 \u00a0 \u00a0 TrainingPipeline response = client.createTrainingPipeline(parent, trainingPipeline);\u00a0 \u00a0 \u00a0 System.out.format(\"response: %s\\n\", response);\u00a0 \u00a0 \u00a0 System.out.format(\"Name: %s\\n\", response.getName());\u00a0 \u00a0 }\u00a0 }}\n```\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u6216\u66f4\u65b0 Python\uff0c\u8acb\u53c3\u95b1 [\u5b89\u88dd Python \u7248 Vertex AI SDK](https://cloud.google.com/vertex-ai/docs/start/use-vertex-ai-python-sdk?hl=zh-cn) \u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [   Python API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/python/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n\u4ee5\u4e0b\u793a\u4f8b\u5c55\u793a\u77ad\u5982\u4f55\u4f7f\u7528 [Python \u7248 Vertex AI SDK](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u5275\u5efa\u81ea\u5b9a\u7fa9\u8a13\u7df4\u6d41\u6c34\u7dda\u3002\u9078\u64c7\u8981\u4f7f\u7528 [\u81ea\u5b9a\u7fa9\u5bb9\u5668](https://cloud.google.com/vertex-ai/docs/training/create-custom-container?hl=zh-cn) \u9084\u662f [\u9810\u69cb\u5efa\u5bb9\u5668](https://cloud.google.com/vertex-ai/docs/training/pre-built-containers?hl=zh-cn) \u9032\u884c\u8a13\u7df4\uff1a\n\u4f7f\u7528 Python \u7248 Vertex AI SDK \u5275\u5efa\u5728\u9810\u69cb\u5efa\u5bb9\u5668\u4e2d\u904b\u884c Python \u4ee3\u78bc\u7684\u8a13\u7df4\u6d41\u6c34\u7dda\u6642\uff0c\u53ef\u4ee5\u901a\u904e\u4ee5\u4e0b\u4efb\u4e00\u65b9\u5f0f\u63d0\u4f9b\u8a13\u7df4\u4ee3\u78bc\uff1a- \u6307\u5b9a [Cloud Storage \u4e2d Python \u6e90\u5206\u767c\u8edf\u4ef6\u5305\u7684 URI](https://cloud.google.com/vertex-ai/docs/training/create-python-pre-built-container?hl=zh-cn) \u3002\uff08\u5982\u679c\u4e0d\u4f7f\u7528 Python \u7248 Vertex AI SDK \u5275\u5efa\u8a13\u7df4\u6d41\u6c34\u7dda\u6642\uff0c\u6b64\u9078\u9805\u4e5f\u53ef\u7528\u3002\uff09\n- \u6307\u5b9a\u672c\u5730\u6a5f\u5668\u4e0a Python \u8173\u672c\u7684\u8def\u5f91\u3002\u5728\u5275\u5efa\u8a13\u7df4\u6d41\u6c34\u7dda\u4e4b\u524d\uff0cPython \u7248 Vertex AI SDK \u6703\u5c07\u8173\u672c\u6253\u5305\u7232\u6e90\u5206\u767c\u4e26\u4e0a\u50b3\u5230\u60a8\u9078\u64c7\u7684 Cloud Storage \u5b58\u5132\u6876\u3002\uff08\u53ea\u6709\u4f7f\u7528 Python \u7248 Vertex AI SDK \u6642\u6b64\u9078\u9805\u7e94\u53ef\u7528\u3002\uff09\n\u8981\u67e5\u770b\u6bcf\u500b\u9078\u9805\u7684\u4ee3\u78bc\u793a\u4f8b\uff0c\u8acb\u9078\u64c7\u76f8\u61c9\u7684\u6a19\u7c64\u9801\uff1a\n\u4ee5\u4e0b\u793a\u4f8b\u4f7f\u7528 [CustomPythonPackageTrainingJob \u985e](https://cloud.google.com/python/docs/reference/aiplatform/latest/google.cloud.aiplatform.CustomPythonPackageTrainingJob?hl=zh-cn) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/googleapis/python-aiplatform/blob/HEAD/samples/model-builder/create_training_pipeline_custom_package_job_sample.py) \n```\ndef create_training_pipeline_custom_package_job_sample(\u00a0 \u00a0 project: str,\u00a0 \u00a0 location: str,\u00a0 \u00a0 staging_bucket: str,\u00a0 \u00a0 display_name: str,\u00a0 \u00a0 python_package_gcs_uri: str,\u00a0 \u00a0 python_module_name: str,\u00a0 \u00a0 container_uri: str,\u00a0 \u00a0 model_serving_container_image_uri: str,\u00a0 \u00a0 dataset_id: Optional[str] = None,\u00a0 \u00a0 model_display_name: Optional[str] = None,\u00a0 \u00a0 args: Optional[List[Union[str, float, int]]] = None,\u00a0 \u00a0 replica_count: int = 1,\u00a0 \u00a0 machine_type: str = \"n1-standard-4\",\u00a0 \u00a0 accelerator_type: str = \"ACCELERATOR_TYPE_UNSPECIFIED\",\u00a0 \u00a0 accelerator_count: int = 0,\u00a0 \u00a0 training_fraction_split: float = 0.8,\u00a0 \u00a0 validation_fraction_split: float = 0.1,\u00a0 \u00a0 test_fraction_split: float = 0.1,\u00a0 \u00a0 sync: bool = True,\u00a0 \u00a0 tensorboard_resource_name: Optional[str] = None,\u00a0 \u00a0 service_account: Optional[str] = None,):\u00a0 \u00a0 aiplatform.init(project=project, location=location, staging_bucket=staging_bucket)\u00a0 \u00a0 job = aiplatform.CustomPythonPackageTrainingJob(\u00a0 \u00a0 \u00a0 \u00a0 display_name=display_name,\u00a0 \u00a0 \u00a0 \u00a0 python_package_gcs_uri=python_package_gcs_uri,\u00a0 \u00a0 \u00a0 \u00a0 python_module_name=python_module_name,\u00a0 \u00a0 \u00a0 \u00a0 container_uri=container_uri,\u00a0 \u00a0 \u00a0 \u00a0 model_serving_container_image_uri=model_serving_container_image_uri,\u00a0 \u00a0 )\u00a0 \u00a0 # This example uses an ImageDataset, but you can use another type\u00a0 \u00a0 dataset = aiplatform.ImageDataset(dataset_id) if dataset_id else None\u00a0 \u00a0 model = job.run(\u00a0 \u00a0 \u00a0 \u00a0 dataset=dataset,\u00a0 \u00a0 \u00a0 \u00a0 model_display_name=model_display_name,\u00a0 \u00a0 \u00a0 \u00a0 args=args,\u00a0 \u00a0 \u00a0 \u00a0 replica_count=replica_count,\u00a0 \u00a0 \u00a0 \u00a0 machine_type=machine_type,\u00a0 \u00a0 \u00a0 \u00a0 accelerator_type=accelerator_type,\u00a0 \u00a0 \u00a0 \u00a0 accelerator_count=accelerator_count,\u00a0 \u00a0 \u00a0 \u00a0 training_fraction_split=training_fraction_split,\u00a0 \u00a0 \u00a0 \u00a0 validation_fraction_split=validation_fraction_split,\u00a0 \u00a0 \u00a0 \u00a0 test_fraction_split=test_fraction_split,\u00a0 \u00a0 \u00a0 \u00a0 sync=sync,\u00a0 \u00a0 \u00a0 \u00a0 tensorboard=tensorboard_resource_name,\u00a0 \u00a0 \u00a0 \u00a0 service_account=service_account,\u00a0 \u00a0 )\u00a0 \u00a0 model.wait()\u00a0 \u00a0 print(model.display_name)\u00a0 \u00a0 print(model.resource_name)\u00a0 \u00a0 print(model.uri)\u00a0 \u00a0 return model\n```\n\u4ee5\u4e0b\u793a\u4f8b\u4f7f\u7528 [CustomTrainingJob \u985e](https://cloud.google.com/python/docs/reference/aiplatform/latest/google.cloud.aiplatform.CustomTrainingJob?hl=zh-cn) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/googleapis/python-aiplatform/blob/HEAD/samples/model-builder/create_training_pipeline_custom_job_sample.py) \n```\ndef create_training_pipeline_custom_job_sample(\u00a0 \u00a0 project: str,\u00a0 \u00a0 location: str,\u00a0 \u00a0 staging_bucket: str,\u00a0 \u00a0 display_name: str,\u00a0 \u00a0 script_path: str,\u00a0 \u00a0 container_uri: str,\u00a0 \u00a0 model_serving_container_image_uri: str,\u00a0 \u00a0 dataset_id: Optional[str] = None,\u00a0 \u00a0 model_display_name: Optional[str] = None,\u00a0 \u00a0 args: Optional[List[Union[str, float, int]]] = None,\u00a0 \u00a0 replica_count: int = 0,\u00a0 \u00a0 machine_type: str = \"n1-standard-4\",\u00a0 \u00a0 accelerator_type: str = \"ACCELERATOR_TYPE_UNSPECIFIED\",\u00a0 \u00a0 accelerator_count: int = 0,\u00a0 \u00a0 training_fraction_split: float = 0.8,\u00a0 \u00a0 validation_fraction_split: float = 0.1,\u00a0 \u00a0 test_fraction_split: float = 0.1,\u00a0 \u00a0 sync: bool = True,\u00a0 \u00a0 tensorboard_resource_name: Optional[str] = None,\u00a0 \u00a0 service_account: Optional[str] = None,):\u00a0 \u00a0 aiplatform.init(project=project, location=location, staging_bucket=staging_bucket)\u00a0 \u00a0 job = aiplatform.CustomTrainingJob(\u00a0 \u00a0 \u00a0 \u00a0 display_name=display_name,\u00a0 \u00a0 \u00a0 \u00a0 script_path=script_path,\u00a0 \u00a0 \u00a0 \u00a0 container_uri=container_uri,\u00a0 \u00a0 \u00a0 \u00a0 model_serving_container_image_uri=model_serving_container_image_uri,\u00a0 \u00a0 )\u00a0 \u00a0 # This example uses an ImageDataset, but you can use another type\u00a0 \u00a0 dataset = aiplatform.ImageDataset(dataset_id) if dataset_id else None\u00a0 \u00a0 model = job.run(\u00a0 \u00a0 \u00a0 \u00a0 dataset=dataset,\u00a0 \u00a0 \u00a0 \u00a0 model_display_name=model_display_name,\u00a0 \u00a0 \u00a0 \u00a0 args=args,\u00a0 \u00a0 \u00a0 \u00a0 replica_count=replica_count,\u00a0 \u00a0 \u00a0 \u00a0 machine_type=machine_type,\u00a0 \u00a0 \u00a0 \u00a0 accelerator_type=accelerator_type,\u00a0 \u00a0 \u00a0 \u00a0 accelerator_count=accelerator_count,\u00a0 \u00a0 \u00a0 \u00a0 training_fraction_split=training_fraction_split,\u00a0 \u00a0 \u00a0 \u00a0 validation_fraction_split=validation_fraction_split,\u00a0 \u00a0 \u00a0 \u00a0 test_fraction_split=test_fraction_split,\u00a0 \u00a0 \u00a0 \u00a0 sync=sync,\u00a0 \u00a0 \u00a0 \u00a0 tensorboard=tensorboard_resource_name,\u00a0 \u00a0 \u00a0 \u00a0 service_account=service_account,\u00a0 \u00a0 )\u00a0 \u00a0 model.wait()\u00a0 \u00a0 print(model.display_name)\u00a0 \u00a0 print(model.resource_name)\u00a0 \u00a0 print(model.uri)\u00a0 \u00a0 return model\n```\n\u4ee5\u4e0b\u793a\u4f8b\u4f7f\u7528 [CustomContainerTrainingJob \u985e](https://cloud.google.com/python/docs/reference/aiplatform/latest/google.cloud.aiplatform.CustomContainerTrainingJob?hl=zh-cn) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/googleapis/python-aiplatform/blob/HEAD/samples/model-builder/create_training_pipeline_custom_container_job_sample.py) \n```\ndef create_training_pipeline_custom_container_job_sample(\u00a0 \u00a0 project: str,\u00a0 \u00a0 location: str,\u00a0 \u00a0 staging_bucket: str,\u00a0 \u00a0 display_name: str,\u00a0 \u00a0 container_uri: str,\u00a0 \u00a0 model_serving_container_image_uri: str,\u00a0 \u00a0 dataset_id: Optional[str] = None,\u00a0 \u00a0 model_display_name: Optional[str] = None,\u00a0 \u00a0 args: Optional[List[Union[str, float, int]]] = None,\u00a0 \u00a0 replica_count: int = 1,\u00a0 \u00a0 machine_type: str = \"n1-standard-4\",\u00a0 \u00a0 accelerator_type: str = \"ACCELERATOR_TYPE_UNSPECIFIED\",\u00a0 \u00a0 accelerator_count: int = 0,\u00a0 \u00a0 training_fraction_split: float = 0.8,\u00a0 \u00a0 validation_fraction_split: float = 0.1,\u00a0 \u00a0 test_fraction_split: float = 0.1,\u00a0 \u00a0 sync: bool = True,\u00a0 \u00a0 tensorboard_resource_name: Optional[str] = None,\u00a0 \u00a0 service_account: Optional[str] = None,):\u00a0 \u00a0 aiplatform.init(project=project, location=location, staging_bucket=staging_bucket)\u00a0 \u00a0 job = aiplatform.CustomContainerTrainingJob(\u00a0 \u00a0 \u00a0 \u00a0 display_name=display_name,\u00a0 \u00a0 \u00a0 \u00a0 container_uri=container_uri,\u00a0 \u00a0 \u00a0 \u00a0 model_serving_container_image_uri=model_serving_container_image_uri,\u00a0 \u00a0 )\u00a0 \u00a0 # This example uses an ImageDataset, but you can use another type\u00a0 \u00a0 dataset = aiplatform.ImageDataset(dataset_id) if dataset_id else None\u00a0 \u00a0 model = job.run(\u00a0 \u00a0 \u00a0 \u00a0 dataset=dataset,\u00a0 \u00a0 \u00a0 \u00a0 model_display_name=model_display_name,\u00a0 \u00a0 \u00a0 \u00a0 args=args,\u00a0 \u00a0 \u00a0 \u00a0 replica_count=replica_count,\u00a0 \u00a0 \u00a0 \u00a0 machine_type=machine_type,\u00a0 \u00a0 \u00a0 \u00a0 accelerator_type=accelerator_type,\u00a0 \u00a0 \u00a0 \u00a0 accelerator_count=accelerator_count,\u00a0 \u00a0 \u00a0 \u00a0 training_fraction_split=training_fraction_split,\u00a0 \u00a0 \u00a0 \u00a0 validation_fraction_split=validation_fraction_split,\u00a0 \u00a0 \u00a0 \u00a0 test_fraction_split=test_fraction_split,\u00a0 \u00a0 \u00a0 \u00a0 sync=sync,\u00a0 \u00a0 \u00a0 \u00a0 tensorboard=tensorboard_resource_name,\u00a0 \u00a0 \u00a0 \u00a0 service_account=service_account,\u00a0 \u00a0 )\u00a0 \u00a0 model.wait()\u00a0 \u00a0 print(model.display_name)\u00a0 \u00a0 print(model.resource_name)\u00a0 \u00a0 print(model.uri)\u00a0 \u00a0 return model\n```\n## \u8d85\u53c3\u6578\u8abf\u7bc0\u4f5c\u696d\u548c\u6a21\u578b\u4e0a\u50b3\n\u6b64\u8a13\u7df4\u6d41\u6c34\u7dda\u5c01\u88dd\u4e86\u4e00\u500b\u8d85\u53c3\u6578\u8abf\u7bc0\u4f5c\u696d\u4ee5\u53ca\u984d\u5916\u7684\u4fbf\u6377\u6b65\u9a5f\uff0c\u53ef\u4ee5\u66f4\u8f15\u9b06\u5730\u5728\u8a13\u7df4\u5f8c\u5c07\u6a21\u578b\u90e8\u7f72\u5230 Vertex AI\u3002\u6b64\u8a13\u7df4\u6d41\u6c34\u7dda\u57f7\u884c\u5169\u500b\u4e3b\u8981\u4efb\u52d9\uff1a\n- \u8a13\u7df4\u6d41\u6c34\u7dda\u6703\u5275\u5efa\u4e00\u500b \u8d85\u53c3\u6578\u8abf\u7bc0\u4f5c\u696d\u8cc7\u6e90\u3002\u8d85\u53c3\u6578\u8abf\u7bc0\u4f5c\u696d\u6703\u5275\u5efa\u591a\u500b\u8a66\u9a57\u3002\u6bcf\u6b21\u8a66\u9a57\u6642\uff0c\u81ea\u5b9a\u7fa9\u4f5c\u696d\u90fd\u6703\u4f7f\u7528\u60a8\u6307\u5b9a\u7684\u8a08\u7b97\u8cc7\u6e90\u548c\u8d85\u53c3\u6578\u904b\u884c\u8a13\u7df4\u61c9\u7528\u3002\n- \u8d85\u53c3\u6578\u8abf\u7bc0\u4f5c\u696d\u5b8c\u6210\u5f8c\uff0c\u8a13\u7df4\u6d41\u6c34\u7dda\u6703\u5728\u60a8\u7232 Cloud Storage \u5b58\u5132\u6876\u6307\u5b9a\u7684\u8f38\u51fa\u76ee\u9304 ( [baseOutputDirectory](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/CustomJobSpec?hl=zh-cn#FIELDS.base_output_directory) ) \u4e2d\u67e5\u627e\u6700\u4f73\u8a66\u9a57\u4e2d\u7684\u6a21\u578b\u5de5\u4ef6\u3002\u8a13\u7df4\u6d41\u6c34\u7dda\u4f7f\u7528\u9019\u4e9b\u5de5\u4ef6\u4f86\u5275\u5efa\u6a21\u578b\u8cc7\u6e90\uff0c\u5e6b\u52a9\u60a8\u7232 [\u6a21\u578b\u90e8\u7f72](https://cloud.google.com/vertex-ai/docs/predictions/deploy-model-api?hl=zh-cn) \u505a\u597d\u6e96\u5099\u3002 \n\u5c0d\u65bc\u6b64\u8a13\u7df4\u6d41\u6c34\u7dda\uff0c\u60a8\u5fc5\u9808\u6307\u5b9a [baseOutputDirectory](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/CustomJobSpec?hl=zh-cn#FIELDS.base_output_directory) \uff0cVertex AI \u6703\u5728\u5176\u4e2d\u641c\u7d22\u6700\u4f73\u8a66\u9a57\u4e2d\u7684\u6a21\u578b\u5de5\u4ef6\u3002\n[\u8d85\u53c3\u6578\u8abf\u7bc0\u4f5c\u696d](https://cloud.google.com/vertex-ai/docs/training/using-hyperparameter-tuning?hl=zh-cn) \u9700\u8981\u914d\u7f6e\u984d\u5916\u7684\u8a2d\u7f6e\u3002\u8a73\u7d30\u77ad\u89e3 [HyperparameterTuningJob](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/projects.locations.hyperparameterTuningJobs?hl=zh-cn) \u7684\u8a2d\u7f6e\u3002\n\u901a\u904e\u4ee5\u4e0b\u4ee3\u78bc\u793a\u4f8b\u4f7f\u7528 [trainingPipeline \u8cc7\u6e90\u7684 create \u65b9\u6cd5](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/projects.locations.trainingPipelines/create?hl=zh-cn) \u5275\u5efa\u8a13\u7df4\u6d41\u6c34\u7dda\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a\u60a8\u7684\u9805\u76ee\u7684\u5340\u57df\u3002\n- \uff1a\u60a8\u7684\u9805\u76ee ID\u3002\n- \uff1a\u5fc5\u586b\u3002trainingPipeline \u7684\u986f\u793a\u540d\u3002\n- \u5982\u679c\u8a13\u7df4\u61c9\u7528\u4f7f\u7528 Vertex AI \u6578\u64da\u96c6\uff0c\u8acb\u6307\u5b9a\u4ee5\u4e0b\u5167\u5bb9\uff1a\n- \uff1a\u6578\u64da\u96c6\u7684 ID\u3002\n- \uff1a\u6839\u64da\u60a8\u6307\u5b9a\u7684\u8a3b\u91cb\u904e\u6ffe\u6578\u64da\u96c6\u3002\n- \uff1a\u6839\u64da\u6307\u5b9a\u7684\u8a3b\u91cb\u67b6\u69cb URI \u904e\u6ffe\u6578\u64da\u96c6\u3002\n- \u4f7f\u7528\u4ee5\u4e0b\u4efb\u4e00\u9078\u9805\u4f86\u6307\u5b9a\u6578\u64da\u9805\u62c6\u5206\u7232\u8a13\u7df4\u96c6\u3001\u9a57\u8b49\u96c6\u548c\u6e2c\u8a66\u96c6\u7684\u65b9\u5f0f\u3002- \u5982\u9700\u6839\u64da\u5b9a\u7fa9\u6bcf\u500b\u96c6\u5408\u5927\u5c0f\u7684\u6bd4\u4f8b\u4f86\u62c6\u5206\u6578\u64da\u96c6\uff0c\u8acb\u6307\u5b9a\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1a\u7528\u65bc\u8a13\u7df4\u6a21\u578b\u7684\u6578\u64da\u96c6\u6bd4\u4f8b\u3002\n- \uff1a\u7528\u65bc\u9a57\u8b49\u6a21\u578b\u7684\u6578\u64da\u96c6\u6bd4\u4f8b\u3002\n- \uff1a\u7528\u65bc\u8a55\u4f30\u6a21\u578b\u7684\u6578\u64da\u96c6\u6bd4\u4f8b\u3002\n- \u5982\u9700\u6839\u64da\u904e\u6ffe\u689d\u4ef6\u62c6\u5206\u6578\u64da\u96c6\uff0c\u8acb\u6307\u5b9a\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1a\u5c07\u6578\u64da\u96c6\u904e\u6ffe\u7232\u7528\u65bc\u8a13\u7df4\u6a21\u578b\u7684\u6578\u64da\u9805\u3002\n- \uff1a\u5c07\u6578\u64da\u96c6\u904e\u6ffe\u7232\u7528\u65bc\u9a57\u8b49\u6a21\u578b\u7684\u6578\u64da\u9805\u3002\n- \uff1a\u5c07\u6578\u64da\u96c6\u904e\u6ffe\u7232\u7528\u65bc\u8a55\u4f30\u6a21\u578b\u7684\u6578\u64da\u9805\u3002\n- \u5982\u9700\u4f7f\u7528\u9810\u5b9a\u7fa9\u7684\u62c6\u5206\uff0c\u8acb\u6307\u5b9a\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1a\u7528\u65bc\u62c6\u5206\u6578\u64da\u96c6\u7684\u5217\u7684\u540d\u7a31\u3002\u6b64\u5217\u4e2d\u53ef\u63a5\u53d7\u7684\u503c\u5305\u62ec\u201ctraining\u201d\u201cvalidation\u201d\u548c\u201ctest\u201d\u3002\n- \u5982\u9700\u6839\u64da\u6578\u64da\u9805\u7684\u6642\u9593\u6233\u62c6\u5206\u6578\u64da\u96c6\uff0c\u8acb\u6307\u5b9a\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1a\u7528\u65bc\u8a13\u7df4\u6a21\u578b\u7684\u6578\u64da\u96c6\u6bd4\u4f8b\u3002\n- \uff1a\u7528\u65bc\u9a57\u8b49\u6a21\u578b\u7684\u6578\u64da\u96c6\u6bd4\u4f8b\u3002\n- \uff1a\u7528\u65bc\u8a55\u4f30\u6a21\u578b\u7684\u6578\u64da\u96c6\u6bd4\u4f8b\u3002\n- \uff1a\u7528\u65bc\u62c6\u5206\u6578\u64da\u96c6\u7684\u6642\u9593\u6233\u5217\u7684\u540d\u7a31\u3002\n- \uff1aVertex AI \u5728\u8a13\u7df4\u6578\u64da\u96c6\u88ab\u62c6\u5206\u7232\u8a13\u7df4\u96c6\u3001\u9a57\u8b49\u96c6\u548c\u6e2c\u8a66\u96c6\u5f8c\u5c07\u5176\u5c0e\u51fa\u7684\u76ee\u6a19 Cloud Storage \u4f4d\u7f6e\u3002\n- \u6307\u5b9a\u8d85\u53c3\u6578\u8abf\u7bc0\u4f5c\u696d\uff1a- \u6307\u5b9a\u6307\u6a19\uff1a- \uff1a\u6b64\u6307\u6a19\u7684\u540d\u7a31\u3002\n- \uff1a\u6b64\u6307\u6a19\u7684\u76ee\u6a19\u3002\u53ef\u4ee5\u662f`MAXIMIZE`\u6216`MINIMIZE`\u3002- End of metrics list item\n- \u6307\u5b9a\u8d85\u53c3\u6578\uff1a\n- \uff1a\u6b64\u8d85\u53c3\u6578\u7684\u540d\u7a31\u3002\n- \uff1a\uff08\u53ef\u9078\uff09\u61c9\u5982\u4f55\u64f4\u7e2e\u53c3\u6578\u3002\u4e0d\u5c0d CATEGORICAL \u53c3\u6578\u9032\u884c\u8a2d\u7f6e\u3002\u53ef\u4ee5\u662f`UNIT_LINEAR_SCALE`\u3001`UNIT_LOG_SCALE`\u3001`UNIT_REVERSE_LOG_SCALE`\u6216`SCALE_TYPE_UNSPECIFIED`\u3002\n- \u5982\u679c\u6b64\u8d85\u53c3\u6578\u7684\u985e\u578b\u662f DOUBLE\uff0c\u8acb\u6307\u5b9a\u6b64\u8d85\u53c3\u6578\u7684\u6700\u5c0f\u503c () \u548c\u6700\u5927\u503c ()\u3002\n- \u5982\u679c\u6b64\u8d85\u53c3\u6578\u7684\u985e\u578b\u662f INTEGER\uff0c\u8acb\u6307\u5b9a\u6b64\u8d85\u53c3\u6578\u7684\u6700\u5c0f\u503c () \u548c\u6700\u5927\u503c ()\u3002\n- \u5982\u679c\u6b64\u8d85\u53c3\u6578\u7684\u985e\u578b\u662f CATEGORICAL\uff0c\u8acb\u4ee5\u5b57\u7b26\u4e32\u6578\u7d44\u7684\u5f62\u5f0f\u6307\u5b9a\u53ef\u63a5\u53d7\u7684\u503c ()\u3002\n- \u5982\u679c\u6b64\u8d85\u53c3\u6578\u7684\u985e\u578b\u662f DISCRETE\uff0c\u8acb\u4ee5\u6578\u5b57\u6578\u7d44\u7684\u5f62\u5f0f\u6307\u5b9a\u53ef\u63a5\u53d7\u7684\u503c ()\u3002- End of hyperparameters list item\n- \uff1a\uff08\u53ef\u9078\uff09\u5728\u6b64\u8d85\u53c3\u6578\u8abf\u7bc0\u4f5c\u696d\u4e2d\u4f7f\u7528\u7684\u641c\u7d22\u7b97\u6cd5\u3002\u53ef\u4ee5\u662f`ALGORITHM_UNSPECIFIED`\u3001`GRID_SEARCH`\u6216`RANDOM_SEARCH`\u3002\n- \uff1a\u6b64\u4f5c\u696d\u4e2d\u904b\u884c\u7684\u8a66\u9a57\u6578\u4e0a\u9650\u3002\n- \uff1a\u53ef\u4ee5\u4e26\u884c\u904b\u884c\u7684\u8a66\u9a57\u6578\u4e0a\u9650\u3002\n- \uff1a\u8d85\u53c3\u6578\u8abf\u7bc0\u4f5c\u696d\u5931\u6557\u524d\u5141\u8a31\u5931\u6557\u7684\u4f5c\u696d\u6578\u91cf\u3002\n- \u5b9a\u7fa9\u8a66\u9a57\u81ea\u5b9a\u7fa9\u8a13\u7df4\u4f5c\u696d\uff1a- \uff1a\u6a5f\u5668\u985e\u578b\u3002\u8acb\u53c3\u95b1 [\u53ef\u7528\u65bc\u8a13\u7df4\u7684\u6a5f\u5668\u985e\u578b](https://cloud.google.com/vertex-ai/docs/training/configure-compute?hl=zh-cn) \u3002\n- \uff1a\uff08\u53ef\u9078\uff09\u8981\u9644\u52a0\u5230\u6bcf\u500b\u8a66\u9a57\u7684\u52a0\u901f\u5668\u985e\u578b\u3002\n- \uff1a\uff08\u53ef\u9078\uff09\u8981\u9644\u52a0\u5230\u6bcf\u500b\u8a66\u9a57\u7684\u52a0\u901f\u5668\u6578\u91cf\u3002\n- \uff1a\u6bcf\u6b21\u8a66\u9a57\u8981\u4f7f\u7528\u7684\u5de5\u4f5c\u5668\u526f\u672c\u6578\u3002\n- \u5982\u679c\u8a13\u7df4\u61c9\u7528\u5728\u81ea\u5b9a\u7fa9\u5bb9\u5668\u4e2d\u904b\u884c\uff0c\u8acb\u6307\u5b9a\u4ee5\u4e0b\u5167\u5bb9\uff1a\n- \uff1a\u8981\u5728\u6bcf\u500b\u5de5\u4f5c\u5668\u526f\u672c\u4e0a\u904b\u884c\u7684\u5bb9\u5668\u6620\u50cf\u7684 Artifact Registry\u3001Container Registry \u6216 Docker Hub URI\u3002\n- \uff1a\uff08\u53ef\u9078\uff09\u5553\u52d5\u5bb9\u5668\u6642\u8981\u8abf\u7528\u7684\u547d\u4ee4\u3002\u6b64\u547d\u4ee4\u6703\u66ff\u63db\u5bb9\u5668\u7684\u9ed8\u8a8d\u5165\u53e3\u9ede\u3002\n- \uff1a\uff08\u53ef\u9078\uff09\u5553\u52d5\u5bb9\u5668\u6642\u8981\u50b3\u905e\u7684\u53c3\u6578\u3002- End of custom containers list item\n- \u5982\u679c\u8a13\u7df4\u61c9\u7528\u662f\u5728\u9810\u69cb\u5efa\u5bb9\u5668\u4e2d\u904b\u884c\u7684 Python \u8edf\u4ef6\u5305\uff0c\u8acb\u6307\u5b9a\u4ee5\u4e0b\u5167\u5bb9\uff1a\n- \uff1a\u904b\u884c\u63d0\u4f9b\u7684 Python \u8edf\u4ef6\u5305\u7684\u5bb9\u5668\u6620\u50cf\u7684 URI\u3002\u8acb\u53c3\u95b1 [\u53ef\u7528\u65bc\u8a13\u7df4\u7684\u9810\u69cb\u5efa\u5bb9\u5668](https://cloud.google.com/vertex-ai/docs/training/pre-built-containers?hl=zh-cn) \u3002\n- \uff1aPython \u8edf\u4ef6\u5305\u6587\u4ef6\u7684 Cloud Storage \u4f4d\u7f6e\uff0c\u9019\u4e9b\u6587\u4ef6\u662f\u8a13\u7df4\u7a0b\u5e8f\u53ca\u5176\u5f9e\u5c6c\u8edf\u4ef6\u5305\u3002\u8edf\u4ef6\u5305 URI \u7684\u6578\u91cf\u4e0a\u9650\u7232 100\u3002\n- \uff1a\u5b89\u88dd\u8edf\u4ef6\u5305\u5f8c\u8981\u904b\u884c\u7684 Python \u6a21\u584a\u540d\u7a31\u3002\n- \uff1a\uff08\u53ef\u9078\uff09\u8981\u50b3\u905e\u7d66 Python \u6a21\u584a\u7684\u547d\u4ee4\u884c\u53c3\u6578\u3002- End of Python package list item- End of trial custom training job list item\n- \u77ad\u89e3 [\u4f5c\u696d\u8abf\u5ea6\u9078\u9805](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/CustomJobSpec?hl=zh-cn#Scheduling) \u3002\n- \uff1a\uff08\u53ef\u9078\uff09\u6bcf\u6b21\u8a66\u9a57\u7684\u6700\u9577\u904b\u884c\u6642\u9593\u3002\n- \u6307\u5b9a\u8981\u61c9\u7528\u65bc\u6b64\u8d85\u53c3\u6578\u8abf\u7bc0\u4f5c\u696d\u7684\u4efb\u4f55\u6a19\u7c64\u7684\u548c\u3002- End of hyperparameter tuning job list item\n- \uff1aTrainingPipeline \u4e0a\u50b3\uff08\u5275\u5efa\uff09\u7684\u6a21\u578b\u7684\u986f\u793a\u540d\u3002\n- \uff1a\u53ef\u9078\u3002\u6a21\u578b\u8aaa\u660e\u3002\n- \uff1a\u5fc5\u586b\u3002\u6307\u5b9a\u4ee5\u4e0b\u5169\u500b\u9078\u9805\u4e4b\u4e00\uff1a- [\u7528\u65bc\u9810\u6e2c\u7684\u9810\u69cb\u5efa\u5bb9\u5668](https://cloud.google.com/vertex-ai/docs/predictions/pre-built-containers?hl=zh-cn) \u7684\u6620\u50cf URI\uff0c\u4f8b\u5982\u201ctf2-cpu.2-1:latest\u201d\u3002\n- \u60a8\u81ea\u5df1\u7684 [\u7528\u65bc\u9810\u6e2c\u7684\u81ea\u5b9a\u7fa9\u5bb9\u5668](https://cloud.google.com/vertex-ai/docs/predictions/use-custom-container?hl=zh-cn) \u7684\u6620\u50cf URI\u3002\n- \uff1a\u53ef\u9078\u3002\u7528\u65bc\u7d44\u7e54\u6a21\u578b\u7684\u4efb\u4f55\u9375\u503c\u5c0d\u3002\u4f8b\u5982\uff1a- \"env\": \"prod\"\n- \"tier\": \"backend\"\n- \u6307\u5b9a\u8981\u61c9\u7528\u65bc\u6b64\u8a13\u7df4\u6d41\u6c34\u7dda\u7684\u4efb\u4f55\u6a19\u7c64\u7684\u548c\u3002\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nPOST https://LOCATION_ID-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION_ID/trainingPipelines\n```\n\u8acb\u6c42 JSON \u6b63\u6587\uff1a\n```\n{\n \"displayName\": \"TRAINING_PIPELINE_NAME\",\n \"inputDataConfig\": {\n \"datasetId\": DATASET_ID,\n \"annotationsFilter\": ANNOTATIONS_FILTER,\n \"annotationSchemaUri\": ANNOTATION_SCHEMA_URI,\n // Union field split can be only one of the following:\n \"fractionSplit\": {\n  \"trainingFraction\": TRAINING_FRACTION,\n  \"validationFraction\": VALIDATION_FRACTION,\n  \"testFraction\": TEST_FRACTION\n },\n \"filterSplit\": {\n  \"trainingFilter\": TRAINING_FILTER,\n  \"validationFilter\": VALIDATION_FILTER,\n  \"testFilter\": TEST_FILTER\n },\n \"predefinedSplit\": {\n  \"key\": PREDEFINED_SPLIT_KEY\n },\n \"timestampSplit\": {\n  \"trainingFraction\": TIMESTAMP_TRAINING_FRACTION,\n  \"validationFraction\": TIMESTAMP_VALIDATION_FRACTION,\n  \"testFraction\": TIMESTAMP_TEST_FRACTION,\n  \"key\": TIMESTAMP_SPLIT_KEY\n }\n // End of list of possible types for union field split.\n \"gcsDestination\": {\n  \"outputUriPrefix\": OUTPUT_URI_PREFIX\n }\n },\n \"trainingTaskDefinition\": \"gs://google-cloud-aiplatform/schema/trainingjob/definition/hyperparameter_tuning_task_1.0.0.yaml\",\n \"trainingTaskInputs\": {\n \"studySpec\": {\n \"metrics\": [  {\n  \"metricId\": METRIC_ID,\n  \"goal\": METRIC_GOAL\n  }\n ],\n \"parameters\": [  {\n  \"parameterId\": PARAMETER_ID,\n  \"scaleType\": PARAMETER_SCALE,\n  // Union field parameter_value_spec can be only one of the following:\n  \"doubleValueSpec\": {\n   \"minValue\": DOUBLE_MIN_VALUE,\n   \"maxValue\": DOUBLE_MAX_VALUE\n  },\n  \"integerValueSpec\": {\n   \"minValue\": INTEGER_MIN_VALUE,\n   \"maxValue\": INTEGER_MAX_VALUE\n  },\n  \"categoricalValueSpec\": {\n   \"values\": [    CATEGORICAL_VALUES\n   ]\n  },\n  \"discreteValueSpec\": {\n   \"values\": [    DISCRETE_VALUES\n   ]\n  }\n  // End of list of possible types for union field parameter_value_spec.\n  }\n ],\n \"ALGORITHM\": ALGORITHM\n },\n \"maxTrialCount\": MAX_TRIAL_COUNT,\n \"parallelTrialCount\": PARALLEL_TRIAL_COUNT,\n \"maxFailedTrialCount\": MAX_FAILED_TRIAL_COUNT,\n \"trialJobSpec\": {\n  \"workerPoolSpecs\": [  {\n   \"machineSpec\": {\n   \"machineType\": MACHINE_TYPE,\n   \"acceleratorType\": ACCELERATOR_TYPE,\n   \"acceleratorCount\": ACCELERATOR_COUNT\n   },\n   \"replicaCount\": REPLICA_COUNT,\n   // Union field task can be only one of the following:\n   \"containerSpec\": {\n   \"imageUri\": CUSTOM_CONTAINER_IMAGE_URI,\n   \"command\": [    CUSTOM_CONTAINER_COMMAND\n   ],\n   \"args\": [    CUSTOM_CONTAINER_ARGS\n   ]\n   },\n   \"pythonPackageSpec\": {\n   \"executorImageUri\": PYTHON_PACKAGE_EXECUTOR_IMAGE_URI,\n   \"packageUris\": [    PYTHON_PACKAGE_URIS\n   ],\n   \"pythonModule\": PYTHON_MODULE,\n   \"args\": [    PYTHON_PACKAGE_ARGS\n   ]\n   }\n   // End of list of possible types for union field task.\n  }\n  ],\n  \"scheduling\": {\n  \"TIMEOUT\": TIMEOUT\n  }\n },\n \"labels\": {\n  LABEL_NAME_1\": LABEL_VALUE_1,\n  LABEL_NAME_2\": LABEL_VALUE_2\n }\n },\n \"modelToUpload\": {\n \"displayName\": \"MODEL_NAME\",\n \"description\": \"MODEL_DESCRIPTION\",\n \"predictSchemata\": {},\n \"containerSpec\": {\n  \"imageUri\": \"PREDICTION_IMAGE_URI\"\n }\n },\n \"labels\": {\n LABEL_NAME_1\": LABEL_VALUE_1,\n LABEL_NAME_2\": LABEL_VALUE_2\n }\n}\n```\n\u5982\u9700\u767c\u9001\u8acb\u6c42\uff0c\u8acb\u9078\u64c7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\uff1a\n **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION_ID-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION_ID/trainingPipelines\"\n``` **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION_ID-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION_ID/trainingPipelines\" | Select-Object -Expand Content\n```\n\u97ff\u61c9\u5305\u542b\u6709\u95dc\u898f\u7bc4\u7684\u4fe1\u606f\u4ee5\u53ca \u3002\n## \u76e3\u63a7\u8a13\u7df4\n\u5982\u9700\u67e5\u770b\u8a13\u7df4\u65e5\u8a8c\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u7684 Vertex AI \u90e8\u5206\u4e2d\uff0c\u524d\u5f80 **\u8a13\u7df4** \u9801\u9762\u3002 [\u524d\u5f80\u201c\u8a13\u7df4\u201d\u9801\u9762](https://console.cloud.google.com/vertex-ai/training-pipelines?hl=zh-cn) \n- \u9ede\u64ca\u4f5c\u696d\u540d\u7a31\u4ee5\u8f49\u5230\u81ea\u5b9a\u7fa9\u4f5c\u696d\u9801\u9762\u3002\n- \u9ede\u64ca **\u67e5\u770b\u65e5\u8a8c** \u3002\n\u60a8\u9084\u53ef\u4ee5 [\u4f7f\u7528\u4ea4\u4e92\u5f0f shell](https://cloud.google.com/vertex-ai/docs/training/monitor-debug-interactive-shell?hl=zh-cn) \u5728\u8a13\u7df4\u4f5c\u696d\u904b\u884c\u6642\u6aa2\u67e5\u8a13\u7df4\u5bb9\u5668\u3002\n## \u67e5\u770b\u7d93\u904e\u8a13\u7df4\u7684\u6a21\u578b\n\u81ea\u5b9a\u7fa9\u8a13\u7df4\u6d41\u6c34\u7dda\u5b8c\u6210\u5f8c\uff0c\u60a8\u53ef\u4ee5\u5728 Google Cloud \u63a7\u5236\u6aaf\u7684 Vertex AI \u90e8\u5206\u7684 **\u6a21\u578b** \u9801\u9762\u4e0a\u627e\u5230\u7d93\u904e\u8a13\u7df4\u7684\u6a21\u578b\u3002\n[\u8f49\u5230\u201c\u6a21\u578b\u201d\u9801\u9762](https://console.cloud.google.com/vertex-ai/models?hl=zh-cn)\n## \u5f8c\u7e8c\u6b65\u9a5f\n- \u77ad\u89e3\u5982\u4f55\u4f7f\u7528 [TensorBoard Profiler](https://cloud.google.com/vertex-ai/docs/training/tensorboard-profiler?hl=zh-cn) \u627e\u51fa\u8a13\u7df4\u6027\u80fd\u74f6\u9838\uff0c\u4ee5\u66f4\u5feb\u3001\u66f4\u4f4e\u7684\u8cbb\u7528\u8a13\u7df4\u6a21\u578b\u3002\n- [\u5c07\u6a21\u578b\u90e8\u7f72\u5230\u7aef\u9ede](https://cloud.google.com/vertex-ai/docs/predictions/deploy-model-api?hl=zh-cn) \u3002\n- \u5275\u5efa [\u8d85\u53c3\u6578\u8abf\u7bc0\u4f5c\u696d](https://cloud.google.com/vertex-ai/docs/training/using-hyperparameter-tuning?hl=zh-cn) \u3002", "guide": "Vertex AI"}