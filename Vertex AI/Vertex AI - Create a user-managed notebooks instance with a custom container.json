{"title": "Vertex AI - Create a user-managed notebooks instance with a custom container", "url": "https://cloud.google.com/vertex-ai/docs/start/introduction-unified-platform", "abstract": "# Vertex AI - Create a user-managed notebooks instance with a custom container\n# Create a user-managed notebooks instance with a custom container\nVertex AI Workbench user-managed notebooks is [deprecated](/vertex-ai/docs/deprecations) . On January 30, 2025, support for  user-managed notebooks will end and the ability to create user-managed notebooks instances  will be removed. Existing instances will continue to function  but patches, updates, and upgrades won't be available. To continue using  Vertex AI Workbench, we recommend that you [migrate your user-managed notebooks instances to Vertex AI Workbench instances](/vertex-ai/docs/workbench/user-managed/migrate-to-instances) .\nYou can create a user-managed notebooks instance based on a custom container. Using a custom container lets you customize a user-managed notebooks environment for your specific needs. The container must be accessible to your Google Cloud service account and expose a service on port 8080. We recommend creating a container derived from a [Deep Learning Containersimage](/deep-learning-containers/docs/choosing-container#choose_a_container_image_type) , because those images are already configured to be compatible with user-managed notebooks.\n", "content": "## How custom container kernels are updated\nVertex AI Workbench pulls the latest container image for your kernel:\n- When you create your instance.\n- When you upgrade your instance.\n- When you start your instance.\nThe custom container kernel doesn't persist when your instance is stopped, so each time your instance is started, Vertex AI Workbench pulls the latest version of the container image.\nIf your instance is running when a new version of a container is released, your instance's kernel isn't updated until you stop and start your instance.\n## Before you begin\n- If you plan to use GPUs with your user-managed notebooks instance, [check the quotas page in the Google Cloud console](https://console.cloud.google.com/quotas) to ensure that you have enough GPUs available in your project. If GPUs are not listed on the quotas page, or you require additional GPU quota, you can request a quota increase. See [Requesting an increase in quota](/compute/quotas#requesting_additional_quota) on the Compute Engine [Resource quotas](/compute/quotas) page.### Required roles\nIf you created the project, you have the Owner ( `roles/owner` ) IAM role on the project, which includes all required permissions. Skip this section and start creating your user-managed notebooks instance. If you didn't create the project yourself, continue in this section.\nTo ensure that your user account has the necessary  permissions to create a Vertex AI Workbench user-managed notebooks instance,   ask your administrator to grant your user account the  following IAM roles on the project:\n- Notebooks Admin ( [roles/notebooks.admin](/vertex-ai/docs/workbench/user-managed/iam#notebooks.admin) )\n- Service Account User ( [roles/iam.serviceAccountUser](/iam/docs/understanding-roles#iam.serviceAccountUser) )\nFor more information about granting roles, see [Manage access](/iam/docs/granting-changing-revoking-access) .\nYour administrator might also be able to give your user account  the required permissions through [custom  roles](/iam/docs/creating-custom-roles) or other [predefined  roles](/iam/docs/understanding-roles) .\n### Make sure your custom container is ready\nMake sure you have a custom container that is accessible to your Google Cloud service account. For information about how to create a custom container from a [Deep Learning Containers image](/deep-learning-containers/docs/choosing-container#choose_a_container_image_type) , see [Creating a derivative container](/deep-learning-containers/docs/derivative-container) .\n## Create an instance with a custom container\nTo create a user-managed notebooks instance with a custom container, complete the following steps:\n- In the Google Cloud console, go to the **User-managed notebooks** page. Or go to [notebook.new](https://notebook.new) (https://notebook.new) and skip the next step. [Go to User-managed notebooks](https://console.cloud.google.com/vertex-ai/workbench/user-managed) \n- Click add_box **Create new** .\n- Click **Advanced options** .\n- On the **Create instance** page, in the **Details** section, provide the following information for your new instance:- **Name** : a name for your new instance\n- **Region** and **Zone** : Select a region and zone for the new instance. For best network performance, select the region that is geographically closest to you. See the available [user-managed notebookslocations](/vertex-ai/docs/general/locations#user-managed-notebooks-locations) .\n- In the **Environment** section, in the **Environment** field, select **Custom container** .\n- In the **Docker container image** field, add a Docker container image in one of the following ways:- Enter a Docker container image path. For example, to use a TensorFlow 2.12 container image with accelerators from [Deep Learning Containers](/deep-learning-containers/docs/choosing-container#deciding) , enter`us-docker.pkg.dev/deeplearning-platform-release/gcr.io/tf-cpu.2-12.py310`.\n- Click **Select** to add a Docker container image from Artifact Registry. Then on the **Artifact Registry** tab where your container image is stored, change the project to the project that includes your container image, and select your container image.\n- Make the rest of your selections, or leave them on their default setting. For more information about these settings, see [Create auser-managed notebooks instance with specific properties](/vertex-ai/docs/workbench/user-managed/create-new#create-with-options) .\n- Click **Create** . Vertex AI Workbench creates a user-managed notebooks instance for you, based on your custom container.## What's next\n- Read about how to [push container images toArtifact Registry](/artifact-registry/docs/docker/pushing-and-pulling) . If the container images you push to Artifact Registry are derived from a [Deep Learning Containersimage](/deep-learning-containers/docs/choosing-container#choose_a_container_image_type) , you can use these container images when creating user-managed notebooks instances.\n- Learn more about modifying your custom containers by reading [Best practices for writingDockerfiles](https://docs.docker.com/develop/develop-images/dockerfile_best-practices/) .", "guide": "Vertex AI"}