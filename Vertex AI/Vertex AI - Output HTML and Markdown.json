{"title": "Vertex AI - Output HTML and Markdown", "url": "https://cloud.google.com/vertex-ai/docs/pipelines/output-html-md", "abstract": "# Vertex AI - Output HTML and Markdown\nVertex AI Pipelines provides a set of pre-defined visualization types for evaluating the result of a pipeline job (for example, `Metrics` , `ClassificationMetrics` ). However, there are many cases where custom visualization is needed. Vertex AI Pipelines provides two main approaches to output custom visualization artifacts: Markdown and HTML files.\n#", "content": "## Import required dependencies\nIn your development environment import the required dependencies.\n```\nfrom kfp import dslfrom kfp.dsl import (\u00a0 \u00a0 Output,\u00a0 \u00a0 HTML,\u00a0 \u00a0 Markdown)\n```\n### Output HTML\nTo export an HTML file, define a component with the `Output[HTML]` artifact. You also must write HTML content to the artifact's path. In this example you use a string variable to represent HTML content.\n**Note:** HTML and Markdown files are stored under the`pipeline_root`path in Cloud Storage. You must have sufficient permission to the Cloud Storage bucket to view visualization content.\n```\n@dsl.componentdef html_visualization(html_artifact: Output[HTML]):\u00a0 \u00a0 public_url = 'https://user-images.githubusercontent.com/37026441/140434086-d9e1099b-82c7-4df8-ae25-83fda2929088.png'\u00a0 \u00a0 html_content = \\\u00a0 \u00a0 \u00a0 '<html><head></head><body><h1>Global Feature Importance</h1>\\n<img src=\"{}\" width=\"97%\"/></body></html>'.format(public_url)\u00a0 \u00a0 with open(html_artifact.path, 'w') as f:\u00a0 \u00a0 \u00a0 \u00a0 f.write(html_content)\n```\n**HTML artifact in the Google Cloud console:**\n**HTML artifact information in the Google Cloud console:**\n**Click \"View HTML\" to open HTML file on a new tab**### Output Markdown\nTo export a Markdown file, define a component with the `Output[Markdown]` artifact. You also must write Markdown content to the artifact's path. In this example you use a string variable to represent Markdown content.\n**Note:** HTML and Markdown files are stored under the`pipeline_root`path in Cloud Storage. You must have sufficient permission to the Cloud Storage bucket to view visualization content.\n```\n@dsl.componentdef markdown_visualization(markdown_artifact: Output[Markdown]):\u00a0 \u00a0 import urllib.request\u00a0 \u00a0 with urllib.request.urlopen('https://gist.githubusercontent.com/zijianjoy/a288d582e477f8021a1fcffcfd9a1803/raw/68519f72abb59152d92cf891b4719cd95c40e4b6/table_visualization.md') as table:\u00a0 \u00a0 \u00a0 \u00a0 markdown_content = table.read().decode('utf-8')\u00a0 \u00a0 \u00a0 \u00a0 with open(markdown_artifact.path, 'w') as f:\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 f.write(markdown_content)\n```\n**Markdown artifact in the Google Cloud console:**\n**Markdown artifact information in the Google Cloud console:**### Create your pipeline\nAfter you have defined your component with the HTML or Markdown artifact create and run a pipeline that use the component.\n```\n@dsl.pipeline(\u00a0 \u00a0 name=f'metrics-visualization-pipeline')def metrics_visualization_pipeline():\u00a0 \u00a0 html_visualization_op = html_visualization()\u00a0 \u00a0 markdown_visualization_op = markdown_visualization()\n```\nAfter submitting the pipeline run, you can view the graph for this run in the Google Cloud console. This graph includes the HTML and Markdown artifacts you declared in corresponding components. You can select these artifacts to view detailed visualization.", "guide": "Vertex AI"}