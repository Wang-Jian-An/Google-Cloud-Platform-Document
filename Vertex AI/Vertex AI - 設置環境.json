{"title": "Vertex AI - \u8a2d\u7f6e\u74b0\u5883", "url": "https://cloud.google.com/vertex-ai/docs/training/neural-architecture-search/environment-setup?hl=zh-cn", "abstract": "# Vertex AI - \u8a2d\u7f6e\u74b0\u5883\n\u5728\u5553\u52d5 Vertex AI \u795e\u7d93\u67b6\u69cb\u641c\u7d22\u5be6\u9a57\u4e4b\u524d\uff0c\u8acb\u6309\u7167\u4ee5\u4e0b\u90e8\u5206\u8a2d\u7f6e\u74b0\u5883\u3002\n", "content": "## \u6e96\u5099\u5de5\u4f5c\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- \u5982\u9700\u5411\u6240\u6709\u795e\u7d93\u67b6\u69cb\u641c\u7d22\u7528\u6236\u6388\u4e88 [Vertex AI User](https://cloud.google.com/iam/docs/understanding-roles?hl=zh-cn#vertex-ai-roles) \u89d2\u8272 (`roles/aiplatform.user`)\uff0c\u8acb\u8207\u60a8\u7684\u9805\u76ee\u7ba1\u7406\u54e1\u806f\u7e6b\u3002\n- [\u5b89\u88dd Docker](https://docs.docker.com/install/linux/docker-ce/ubuntu/) \u3002\u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f\u57fa\u65bc Linux \u7684\u64cd\u4f5c\u7cfb\u7d71\uff08\u4f8b\u5982 Ubuntu \u6216 Debian\uff09\uff0c\u8acb\u5c07\u60a8\u7684\u7528\u6236\u540d\u6dfb\u52a0\u5230 `docker` \u7fa3\u7d44\uff0c\u9019\u6a23\u60a8\u5c31\u53ef\u4ee5\u5728\u4e0d\u4f7f\u7528 `sudo` \u7684\u60c5\u6cc1\u4e0b\u904b\u884c Docker\uff1a```\nsudo usermod -a -G docker ${USER}\n``` **\u6ce8\u610f** \uff1a `docker` \u7fa3\u7d44\u76f8\u7576\u65bc `root` \u7528\u6236\u3002 \u5982\u9700\u77ad\u89e3\u9019\u6703\u5982\u4f55\u5f71\u97ff\u7cfb\u7d71\u7684\u5b89\u5168\u6027\uff0c\u8acb\u53c3\u95b1 [Docker \u6587\u6a94](https://docs.docker.com/engine/security/security/#docker-daemon-attack-surface) \u3002\u5728\u5c07\u60a8\u81ea\u5df1\u6dfb\u52a0\u5230 `docker` \u7fa3\u7d44\u4e4b\u5f8c\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u91cd\u5553\u7cfb\u7d71\u3002\n- \u6253\u958b Docker\u3002\u8981\u78ba\u4fdd Docker \u6b63\u5728\u904b\u884c\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b Docker \u547d\u4ee4\u4ee5\u8fd4\u56de\u7576\u524d\u6642\u9593\u548c\u65e5\u671f\uff1a```\ndocker run busybox date\n```\n- \u4f7f\u7528`gcloud`\u4f5c\u7232 Docker \u7684\u6191\u64da\u5e6b\u52a9\u7a0b\u5e8f\uff1a```\ngcloud auth configure-docker\n```\n- \uff08\u53ef\u9078\uff09\u5982\u679c\u8981\u5728\u672c\u5730\u4f7f\u7528 GPU \u904b\u884c\u5bb9\u5668\uff0c\u8acb\u5b89\u88dd [nvidia-docker](https://github.com/NVIDIA/nvidia-docker#quickstart) \u3002\n### \u8a2d\u7f6e Cloud Storage \u5b58\u5132\u6876\n\u672c\u90e8\u5206\u6f14\u793a\u5982\u4f55\u5275\u5efa\u65b0\u5b58\u5132\u6876\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u73fe\u6709\u5b58\u5132\u6876\uff0c\u4f46\u5b83\u6240\u5728\u5340\u57df\u5fc5\u9808\u8207\u60a8\u6b63\u5728\u904b\u884c AI Platform \u4f5c\u696d\u7684\u5340\u57df\u76f8\u540c\u3002\u6b64\u5916\uff0c\u5982\u679c\u8a72\u5b58\u5132\u6876\u4e0d\u5728\u60a8\u7528\u65bc\u904b\u884c\u795e\u7d93\u67b6\u69cb\u641c\u7d22\u7684\u9805\u76ee\u4e2d\uff0c\u5247\u60a8\u5fc5\u9808\u660e\u78ba\u6388\u4e88\u5c0d\u795e\u7d93\u67b6\u69cb\u641c\u7d22\u670d\u52d9\u8cec\u865f\u7684\u8a2a\u554f\u6b0a\u9650\u3002\n- \u7232\u65b0\u5b58\u5132\u5206\u5340\u6307\u5b9a\u540d\u7a31\u3002\u8a72\u540d\u7a31\u5728 Cloud Storage \u7684\u6240\u6709\u5b58\u5132\u6876\u4e2d\u5fc5\u9808\u662f\u552f\u4e00\u7684\u3002```\nBUCKET_NAME=\"YOUR_BUCKET_NAME\"\n```\u4f8b\u5982\uff0c\u4f7f\u7528\u9644\u52a0\u4e86 `-vertexai-nas` \u7684\u9805\u76ee\u540d\u7a31\uff1a```\nPROJECT_ID=\"YOUR_PROJECT_ID\"BUCKET_NAME=${PROJECT_ID}-vertexai-nas\n```\n- \u6aa2\u67e5\u60a8\u5275\u5efa\u7684\u5b58\u5132\u6876\u540d\u7a31\u3002```\necho $BUCKET_NAME\n```\n- \u7232\u60a8\u7684\u5b58\u5132\u5206\u5340\u9078\u64c7\u4e00\u500b\u5340\u57df\uff0c\u4e26\u8a2d\u7f6e `REGION` \u74b0\u5883\u8b8a\u91cf\u3002\u4f7f\u7528\u60a8\u8a08\u5283\u5728\u5176\u4e2d\u904b\u884c\u795e\u7d93\u67b6\u69cb\u641c\u7d22\u4f5c\u696d\u7684\u5340\u57df\u3002\u4f8b\u5982\uff0c\u4ee5\u4e0b\u4ee3\u78bc\u6703\u5275\u5efa `REGION` \u4e26\u5c07\u5176\u8a2d\u7f6e\u7232 `us-central1` \uff1a```\nREGION=us-central1\n```\n- \u5275\u5efa\u65b0\u7684\u5b58\u5132\u6876\uff1a```\ngsutil mb -l $REGION gs://$BUCKET_NAME\n```## \u7232\u9805\u76ee\u7533\u8acb\u984d\u5916\u7684\u8a2d\u5099\u914d\u984d\n[\u6559\u7a0b](https://cloud.google.com/vertex-ai/docs/training/neural-architecture-search/nas-tutorials?hl=zh-cn) \u4f7f\u7528\u5927\u7d04\u4e94\u81fa CPU \u6a5f\u5668\uff0c\u4e0d\u9700\u8981\u4efb\u4f55\u984d\u5916\u7684\u914d\u984d\u3002\u904b\u884c\u6559\u7a0b\u5f8c\uff0c\u8acb\u904b\u884c\u60a8\u7684\u795e\u7d93\u67b6\u69cb\u641c\u7d22\u4f5c\u696d\u3002\n\u795e\u7d93\u67b6\u69cb\u641c\u7d22\u4f5c\u696d\u6703\u4e26\u884c\u8a13\u7df4\u4e00\u6279\u6a21\u578b\u3002\u6bcf\u500b\u7d93\u904e\u8a13\u7df4\u7684\u6a21\u578b\u5c0d\u61c9\u4e00\u500b\u8a66\u9a57 \u3002\u53c3\u95b1 [\u8a2d\u7f6e number-of-parallel-trials](https://cloud.google.com/vertex-ai/docs/training/neural-architecture-search/suggested-workflow?hl=zh-cn#parallel_trials) \u90e8\u5206\uff0c\u4f30\u7b97\u641c\u7d22\u4f5c\u696d\u9700\u8981\u7684 CPU \u548c GPU \u6578\u91cf\u3002\u4f8b\u5982\uff0c\u5982\u679c\u6bcf\u500b\u8a66\u9a57\u4f7f\u7528 2 \u500b T4 GPU \u4e26\u4e14\u60a8\u5c07 `number-of-parallel-trials` \u8a2d\u7f6e\u7232 20\uff0c\u5247\u4e00\u500b\u641c\u7d22\u4f5c\u696d\u9700\u8981\u7684\u7e3d\u914d\u984d\u7232 40 \u500b T4 GPU\u3002\u6b64\u5916\uff0c\u5982\u679c\u6bcf\u500b\u8a66\u9a57\u90fd\u4f7f\u7528 `highmem-16` CPU\uff0c\u5247\u6bcf\u500b\u8a66\u9a57\u9700\u8981 16 \u500b CPU \u55ae\u5143\uff0c20 \u500b\u4e26\u884c\u8a66\u9a57\u9700\u8981 320 \u500b CPU \u55ae\u5143\u3002\u4f46\u662f\uff0c\u6211\u5011\u81f3\u5c11\u9700\u8981 10 \u500b\u4e26\u884c\u8a66\u9a57\u914d\u984d\uff08\u6216 20 \u500b GPU \u914d\u984d\uff09\u3002 GPU \u7684\u9ed8\u8a8d\u521d\u59cb\u914d\u984d\u56e0\u5340\u57df\u548c GPU \u985e\u578b\u800c\u7570\uff0cTesla_T4 \u901a\u5e38\u7232 0\u30016 \u6216 12\uff0cTesla_V100 \u901a\u5e38\u7232 0 \u6216 6\u3002 CPU \u7684\u9ed8\u8a8d\u521d\u59cb\u914d\u984d\u56e0\u5340\u57df\u800c\u7570\uff0c\u901a\u5e38\u7232 20\u3001450 \u6216 2,200\u3002\n**\u6ce8\u610f** \uff1a\u795e\u7d93\u67b6\u69cb\u641c\u7d22\u76ee\u524d\u4e0d\u652f\u6301 TPU\u3002\n\u53ef\u9078\uff1a\u5982\u679c\u60a8\u8a08\u5283\u4e26\u884c\u904b\u884c\u591a\u500b\u641c\u7d22\u4f5c\u696d\uff0c\u8acb\u63d0\u9ad8\u914d\u984d\u8981\u6c42\u3002 \u7533\u8acb\u914d\u984d\u5f8c\u60a8\u7121\u9700\u7acb\u5373\u4ed8\u8cbb\uff0c\u5728\u904b\u884c\u4f5c\u696d\u5f8c\u624d\u9700\u8981\u4ed8\u8cbb\u3002\n**\u6ce8\u610f** \uff1a\u914d\u984d\u662f\u6309\u5340\u57df\u7533\u8acb\u7684\u3002\u4f8b\u5982\uff0c\u5728 `europe-west4` \u5340\u57df\u904b\u884c\u4f5c\u696d\u4e0d\u80fd\u4f7f\u7528 `us-central1` \u914d\u984d\u3002\n\u5982\u679c\u60a8\u6c92\u6709\u8db3\u5920\u7684\u914d\u984d\uff0c\u4e26\u5617\u8a66\u5553\u52d5\u9700\u8981\u8d85\u51fa\u914d\u984d\u7684\u8cc7\u6e90\u7684\u4f5c\u696d\uff0c\u5247\u4f5c\u696d\u4e0d\u6703\u5553\u52d5\uff0c\u4e26\u986f\u793a\u5982\u4e0b\u6240\u793a\u7684\u932f\u8aa4\uff1a\n```\nException: Starting job failed: {'code': 429, 'message': 'The following quota metrics exceed quota limits: aiplatform.googleapis.com/custom_model_training_cpus,aiplatform.googleapis.com/custom_model_training_nvidia_v100_gpus,aiplatform.googleapis.com/custom_model_training_pd_ssd', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.DebugInfo', 'detail': '[ORIGINAL ERROR] generic::resource_exhausted: com.google.cloud.ai.platform.common.errors.AiPlatformException: code=RESOURCE_EXHAUSTED, message=The following quota metrics exceed quota limits: aiplatform.googleapis.com/custom_model_training_cpus,aiplatform.googleapis.com/custom_model_training_nvidia_v100_gpus,aiplatform.googleapis.com/custom_model_training_pd_ssd, cause=null [google.rpc.error_details_ext] { code: 8 message: \"The following quota metrics exceed quota limits: aiplatform.googleapis.com/custom_model_training_cpus,aiplatform.googleapis.com/custom_model_training_nvidia_v100_gpus,aiplatform.googleapis.com/custom_model_training_pd_ssd\" }'}]}\n```\n\u5728\u67d0\u4e9b\u60c5\u6cc1\u4e0b\uff0c\u5982\u679c\u540c\u4e00\u9805\u76ee\u7684\u591a\u500b\u4f5c\u696d\u540c\u6642\u5553\u52d5\uff0c\u4e26\u4e14\u914d\u984d\u4e0d\u8db3\u4ee5\u652f\u6301\u6240\u6709\u4f5c\u696d\uff0c\u5247\u5176\u4e2d\u4e00\u500b\u4f5c\u696d\u5c07\u4fdd\u6301\u6392\u968a\u72c0\u614b\uff0c\u4e0d\u6703\u958b\u59cb\u8a13\u7df4\u3002\u5728\u9019\u7a2e\u60c5\u6cc1\u4e0b\uff0c\u8acb\u53d6\u6d88\u6392\u968a\u7684\u4f5c\u696d\uff0c\u7136\u5f8c\u7533\u8acb\u66f4\u591a\u914d\u984d\u6216\u7b49\u5f85\u4e0a\u4e00\u500b\u4f5c\u696d\u5b8c\u6210\u3002\n\u60a8\u53ef\u4ee5\u5f9e **\u914d\u984d** \u9801\u9762\u7533\u8acb\u984d\u5916\u7684\u8a2d\u5099\u914d\u984d\u3002\u60a8\u53ef\u4ee5\u61c9\u7528\u904e\u6ffe\u689d\u4ef6\u4f86\u67e5\u627e\u9700\u8981\u4fee\u6539\u7684\u914d\u984d\uff1a\n- \u5c0d\u65bc **\u670d\u52d9** \uff0c\u8acb\u9078\u64c7 **Vertex AI API** \u3002\n- \u5c0d\u65bc **\u5340\u57df** \uff0c\u8acb\u9078\u64c7\u8981\u904e\u6ffe\u7684\u5340\u57df\u3002\n- \u5c0d\u65bc **\u914d\u984d** \uff0c\u8acb\u9078\u64c7\u524d\u7db4\u7232 **\u81ea\u5b9a\u7fa9\u6a21\u578b\u8a13\u7df4** \u7684\u52a0\u901f\u5668\u540d\u7a31\u3002- \u5c0d\u65bc V100 GPU\uff0c\u8a72\u503c\u7232 **\u6bcf\u500b\u5340\u57df\u7684\u81ea\u5b9a\u7fa9\u6a21\u578b\u8a13\u7df4 Nvidia V100 GPU** \u3002\n- \u5c0d\u65bc CPU\uff0c\u8a72\u503c\u53ef\u4ee5\u7232 **\u6bcf\u500b\u5340\u57df\u7684 N1/E2 \u6a5f\u5668\u985e\u578b\u7684\u81ea\u5b9a\u7fa9\u6a21\u578b\u8a13\u7df4 CPU** \u3002CPU \u7684\u6578\u91cf\u8868\u793a CPU \u55ae\u4f4d\u3002\u5982\u679c\u60a8\u9700\u8981 8 \u500b`highmem-16`CPU\uff0c\u5247\u7533\u8acb 8\u00a0* 16\u00a0= 128 \u500b CPU \u55ae\u5143\u7684\u914d\u984d\u3002\u6b64\u5916\uff0c\u8f38\u5165\u6240\u9700\u7684 **\u5340\u57df** \u503c\u3002\u5275\u5efa\u914d\u984d\u7533\u8acb\u5f8c\uff0c\u60a8\u6703\u6536\u5230\u4e00\u500b `Case number` \u548c\u95dc\u65bc\u8acb\u6c42\u72c0\u614b\u7684\u5f8c\u7e8c\u96fb\u5b50\u90f5\u4ef6\u3002GPU \u914d\u984d\u5be9\u6279\u53ef\u80fd\u9700\u8981\u5927\u7d04\u5169\u5230\u4e94\u500b\u5de5\u4f5c\u65e5\u3002\u901a\u5e38\uff0c20-30 \u500b GPU \u7684\u914d\u984d\u7533\u8acb\u6703\u8f03\u5feb\u7372\u6279\uff0c\u5927\u7d04\u9700\u8981\u5169\u5230\u4e09\u5929\uff0c100 \u500b GPU \u7684\u914d\u984d\u7533\u8acb\u5247\u53ef\u80fd\u9700\u8981\u4e94\u500b\u5de5\u4f5c\u65e5\u3002CPU \u914d\u984d\u5be9\u6279\u6700\u591a\u9700\u8981\u5169\u500b\u5de5\u4f5c\u65e5\u3002\u4f46\u662f\uff0c\u5982\u679c\u67d0\u500b\u5340\u57df\u7684\u67d0\u500b GPU \u985e\u578b\u56b4\u91cd\u77ed\u7f3a\uff0c\u90a3\u9ebc\u5373\u4f7f\u7533\u8acb\u7684\u914d\u984d\u8f03\u5c0f\uff0c\u4e5f\u7121\u6cd5\u4fdd\u8b49\u7372\u6279\u3002\u5728\u9019\u7a2e\u60c5\u6cc1\u4e0b\uff0c\u53ef\u80fd\u6703\u8981\u6c42\u60a8\u9078\u64c7\u5176\u4ed6\u5340\u57df\u6216 GPU \u985e\u578b\u3002\u4e00\u822c\u800c\u8a00\uff0cT4 GPU \u6bd4 V100 \u66f4\u5bb9\u6613\u7372\u5f97\u3002T4 GPU \u66f4\u8017\u6642\uff0c\u4f46\u4e5f\u66f4\u7d93\u6fdf\u5be6\u60e0\u3002\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7533\u8acb\u66f4\u9ad8\u914d\u984d\u9650\u5236](https://cloud.google.com/docs/quotas/view-manage?hl=zh-cn#requesting_higher_quota) \u3002\n## \u7232\u60a8\u7684\u9805\u76ee\u8a2d\u7f6e\u5de5\u4ef6\u8a3b\u518a\u8868\n\u60a8\u5fc5\u9808\u7232\u63a8\u9001 Docker \u6620\u50cf\u7684\u9805\u76ee\u548c\u5340\u57df\u8a2d\u7f6e [\u5de5\u4ef6\u8a3b\u518a\u8868](https://cloud.google.com/artifact-registry/docs/overview?hl=zh-cn#introduction) \u3002\n\u8f49\u5230\u9805\u76ee\u7684 **\u5de5\u4ef6\u8a3b\u518a\u8868** \u9801\u9762\u3002\u5982\u679c\u5c1a\u672a\u5553\u7528\u5de5\u4ef6\u8a3b\u518a\u8868 API\uff0c\u8acb\u5148\u7232\u9805\u76ee\u5553\u7528\uff1a\n\u5553\u7528\u5f8c\uff0c\u9ede\u64ca **\u5275\u5efa\u4ee3\u78bc\u5eab** \u4ee5\u958b\u59cb\u5275\u5efa\u65b0\u7684\u4ee3\u78bc\u5eab\uff1a\n\u9078\u64c7 **\u540d\u7a31** \u4f5c\u7232 **nas** \uff0c\u9078\u64c7 **\u683c\u5f0f** \u4f5c\u7232 **Docker** \uff0c\u7136\u5f8c\u9078\u64c7 **\u4f4d\u7f6e\u985e\u578b** \u4f5c\u7232 **\u5340\u57df** \u3002\u5c0d\u65bc **\u5340\u57df** \uff0c\u9078\u64c7\u904b\u884c\u4f5c\u696d\u7684\u4f4d\u7f6e\uff0c\u7136\u5f8c\u9ede\u64ca **\u5275\u5efa** \u3002\n\u9019\u61c9\u8a72\u6703\u5275\u5efa\u60a8\u6240\u9700\u7684 Docker \u4ee3\u78bc\u5eab\uff0c\u5982\u4e0b\u6240\u793a\uff1a\n\u60a8\u9084\u9700\u8981\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49\u4ee5\u5c07 docker \u63a8\u9001\u5230\u6b64\u4ee3\u78bc\u5eab\u3002\u4e0b\u9762\u7684 [\u672c\u5730\u74b0\u5883\u8a2d\u7f6e\u90e8\u5206](#local-environment-setup) \u5305\u542b\u6b64\u6b65\u9a5f\u3002\n## \u8a2d\u7f6e\u672c\u5730\u74b0\u5883\n\u60a8\u53ef\u4ee5\u5728\u672c\u5730\u74b0\u5883\u4e2d\u4f7f\u7528 Bash shell \u904b\u884c\u9019\u4e9b\u6b65\u9a5f\uff0c\u4e5f\u53ef\u4ee5\u5728 Vertex AI Workbench \u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u5be6\u4f8b\u4e2d\u904b\u884c\u9019\u4e9b\u6b65\u9a5f\u3002\n- \u8a2d\u7f6e\u57fa\u672c\u74b0\u5883\u8b8a\u91cf\uff1a```\ngcloud config set project PROJECT_IDgcloud auth logingcloud auth application-default login\n```\n- \u7232\u5de5\u4ef6\u8a3b\u518a\u8868\u8a2d\u7f6e [docker \u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/artifact-registry/docs/docker/authentication?hl=zh-cn#gcloud-helper) \uff1a```\n# example: REGION=europe-west4gcloud auth configure-docker REGION-docker.pkg.dev\n```\n- \uff08\u53ef\u9078\uff09\u914d\u7f6e Python 3 \u865b\u64ec\u74b0\u5883\u3002\u5efa\u8b70\u4f7f\u7528 Python 3\uff0c\u4f46\u9019\u4e0d\u662f\u5fc5\u9700\u7684\uff1a```\nsudo apt install python3-pip && \\pip3 install virtualenv && \\python3 -m venv --system-site-packages ~/./nas_venv && \\source ~/./nas_venv/bin/activate\n```\n- \u5b89\u88dd\u5176\u4ed6\u5eab\uff1a```\npip install google-cloud-storage==2.6.0pip install pyglove==0.1.0\n```## \u8a2d\u7f6e\u670d\u52d9\u8cec\u865f\n\u5728\u904b\u884c NAS \u4f5c\u696d\u4e4b\u524d\uff0c\u9700\u8981\u8a2d\u7f6e [\u670d\u52d9\u8cec\u865f](https://cloud.google.com/iam/docs/service-accounts?hl=zh-cn) \u3002\u60a8\u53ef\u4ee5\u5728\u672c\u5730\u74b0\u5883\u4e2d\u4f7f\u7528 Bash shell \u904b\u884c\u9019\u4e9b\u6b65\u9a5f\uff0c\u4e5f\u53ef\u4ee5\u5728 Vertex AI Workbench \u7528\u6236\u7ba1\u7406\u7684\u7b46\u8a18\u672c\u5be6\u4f8b\u4e2d\u904b\u884c\u9019\u4e9b\u6b65\u9a5f\u3002\n- \u5275\u5efa\u670d\u52d9\u8cec\u865f\uff1a```\ngcloud iam service-accounts create NAME \\\u00a0 \u00a0 --description=DESCRIPTION \\\u00a0 \u00a0 --display-name=DISPLAY_NAME\n```\n- \u5c07 `aiplatform.user` \u548c `storage.objectAdmin` \u89d2\u8272\u6388\u4e88\u670d\u52d9\u8cec\u865f\uff1a```\ngcloud projects add-iam-policy-binding PROJECT_ID \\\u00a0 \u00a0 --member=serviceAccount:NAME@PROJECT_ID.iam.gserviceaccount.com \\\u00a0 \u00a0 --role=roles/aiplatform.usergcloud projects add-iam-policy-binding PROJECT_ID \\\u00a0 \u00a0 --member=serviceAccount:NAME@PROJECT_ID.iam.gserviceaccount.com \\\u00a0 \u00a0 --role=roles/storage.objectAdmin\n```\n\u4f8b\u5982\uff0c\u4ee5\u4e0b\u547d\u4ee4\u5728\u9805\u76ee `my-nas-project` \u4e2d\u5275\u5efa\u540d\u7232 `my-nas-sa` \u7684\u670d\u52d9\u8cec\u865f\uff0c\u5b83\u5177\u6709 `aiplatform.user` \u548c `storage.objectAdmin` \u89d2\u8272\uff1a\n```\n\u00a0 gcloud iam service-accounts create my-nas-sa \\\u00a0 \u00a0 \u00a0 --description=\"Service account for NAS\" \\\u00a0 \u00a0 \u00a0 --display-name=\"NAS service account\"\u00a0 gcloud projects add-iam-policy-binding my-nas-project \\\u00a0 \u00a0 \u00a0 --member=serviceAccount:my-nas-sa@my-nas-project.iam.gserviceaccount.com \\\u00a0 \u00a0 \u00a0 --role=roles/aiplatform.user\u00a0 gcloud projects add-iam-policy-binding my-nas-project \\\u00a0 \u00a0 \u00a0 --member=serviceAccount:my-nas-sa@my-nas-project.iam.gserviceaccount.com \\\u00a0 \u00a0 \u00a0 --role=roles/storage.objectAdmin\n```\n## \u4e0b\u8f09\u4ee3\u78bc\n\u5982\u9700\u5553\u52d5\u795e\u7d93\u67b6\u69cb\u641c\u7d22\u5be6\u9a57\uff0c\u60a8\u9700\u8981\u4e0b\u8f09\u793a\u4f8b Python \u4ee3\u78bc\uff0c\u5176\u4e2d\u5305\u542b\u9810\u69cb\u5efa\u7684\u8a13\u7df4\u7a0b\u5e8f\u3001\u641c\u7d22\u7a7a\u9593\u5b9a\u7fa9\u548c\u95dc\u806f\u7684\u5ba2\u6236\u7aef\u5eab\u3002\n\u57f7\u884c\u4ee5\u4e0b\u6b65\u9a5f\u4f86\u4e0b\u8f09\u6e90\u4ee3\u78bc\u3002\n- \u6253\u958b\u65b0\u7684 Shell \u7d42\u7aef\u3002\n- \u904b\u884c Git \u514b\u9686\u547d\u4ee4\uff1a```\ngit clone https://github.com/google/vertex-ai-nas.git\n```", "guide": "Vertex AI"}