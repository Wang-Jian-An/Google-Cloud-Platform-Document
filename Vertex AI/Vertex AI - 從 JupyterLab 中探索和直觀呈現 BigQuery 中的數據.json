{"title": "Vertex AI - \u5f9e JupyterLab \u4e2d\u63a2\u7d22\u548c\u76f4\u89c0\u5448\u73fe BigQuery \u4e2d\u7684\u6578\u64da", "url": "https://cloud.google.com/vertex-ai/docs/workbench/managed/visualize-data-bigquery?hl=zh-cn", "abstract": "# Vertex AI - \u5f9e JupyterLab \u4e2d\u63a2\u7d22\u548c\u76f4\u89c0\u5448\u73fe BigQuery \u4e2d\u7684\u6578\u64da\n# \u5f9e JupyterLab \u4e2d\u63a2\u7d22\u548c\u76f4\u89c0\u5448\u73fe BigQuery \u4e2d\u7684\u6578\u64da\nVertex AI Workbench \u8a17\u7ba1\u5f0f\u7b46\u8a18\u672c [\u5df2\u68c4\u7528](https://cloud.google.com/vertex-ai/docs/deprecations?hl=zh-cn) \u3002\u81ea 2025 \u5e74 1 \u6708 30 \u65e5\u8d77\uff0c\u6211\u5011\u5c07\u7d42\u6b62\u5c0d\u8a17\u7ba1\u5f0f\u7b46\u8a18\u672c\u7684\u652f\u6301\uff0c\u4e26\u4e14\u5c07\u4e0d\u518d\u652f\u6301\u5275\u5efa\u8a17\u7ba1\u5f0f\u7b46\u8a18\u672c\u5be6\u4f8b\u3002\u73fe\u6709\u5be6\u4f8b\u4ecd\u7136\u53ef\u4ee5\u6b63\u5e38\u4f7f\u7528\uff0c\u4f46\u6211\u5011\u5c07\u4e0d\u518d\u63d0\u4f9b\u88dc\u4e01\u3001\u66f4\u65b0\u548c\u5347\u7d1a\u3002\u5982\u9700\u7e7c\u7e8c\u4f7f\u7528 Vertex AI Workbench\uff0c\u6211\u5011\u5efa\u8b70\u60a8 [\u5c07\u8a17\u7ba1\u5f0f\u7b46\u8a18\u672c\u5be6\u4f8b\u9077\u79fb\u5230 Vertex AI Workbench \u5be6\u4f8b](https://cloud.google.com/vertex-ai/docs/workbench/managed/migrate-to-instances?hl=zh-cn) \u3002\n\u672c\u9801\u9762\u5c55\u793a\u4e86\u4e00\u4e9b\u793a\u4f8b\uff0c\u4ecb\u7d39\u5982\u4f55\u5f9e Vertex AI Workbench \u4ee3\u7ba1\u5f0f\u7b46\u8a18\u672c\u5be6\u4f8b\u7684 JupyterLab \u754c\u9762\u4e2d\u63a2\u7d22\u548c\u76f4\u89c0\u5448\u73fe\u5b58\u5132\u5728 BigQuery \u4e2d\u7684\u6578\u64da\u3002\n", "content": "## \u6e96\u5099\u5de5\u4f5c\n[\u5275\u5efa\u4ee3\u7ba1\u5f0f\u7b46\u8a18\u672c\u5be6\u4f8b](https://cloud.google.com/vertex-ai/docs/workbench/managed/create-instance?hl=zh-cn#create) \uff08\u5982\u679c\u60a8\u5c1a\u672a\u5275\u5efa\uff09\u3002\n## \u6253\u958b JupyterLab\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u524d\u5f80 **\u4ee3\u7ba1\u5f0f\u7b46\u8a18\u672c** \u9801\u9762\u3002 [\u524d\u5f80\u201c\u4ee3\u7ba1\u5f0f\u7b46\u8a18\u672c\u201d](https://console.cloud.google.com/vertex-ai/workbench/managed?hl=zh-cn) \n- \u5728\u4ee3\u7ba1\u5f0f\u7b46\u8a18\u672c\u5be6\u4f8b\u7684\u540d\u7a31\u65c1\u908a\uff0c\u9ede\u64ca **\u6253\u958b JupyterLab** \u3002\u60a8\u7684\u4ee3\u7ba1\u5f0f\u7b46\u8a18\u672c\u5be6\u4f8b\u6703\u6253\u958b JupyterLab\u3002## \u5f9e BigQuery \u4e2d\u8b80\u53d6\u6578\u64da\u3002\n\u5728\u63a5\u4e0b\u4f86\u7684\u5169\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u5f9e BigQuery \u4e2d\u8b80\u53d6\u6578\u64da\u4ee5\u5099\u5f8c\u7e8c\u76f4\u89c0\u5448\u73fe\u3002\u9019\u4e9b\u6b65\u9a5f\u8207 [\u5f9e JupyterLab \u4e2d\u67e5\u8a62 BigQuery \u4e2d\u7684\u6578\u64da](https://cloud.google.com/vertex-ai/docs/workbench/managed/bigquery?hl=zh-cn) \u4e2d\u7684\u6b65\u9a5f\u76f8\u540c\uff0c\u56e0\u6b64\uff0c\u5982\u679c\u60a8\u5df2\u5b8c\u6210\u9019\u4e9b\u6b65\u9a5f\uff0c\u5247\u53ef\u4ee5\u8df3\u81f3 [\u7372\u53d6 BigQuery \u8868\u4e2d\u7684\u6578\u64da\u6458\u8981](#summary) \u3002\n### \u4f7f\u7528 %%bigquery \u9b54\u6cd5\u547d\u4ee4\u67e5\u8a62\u6578\u64da\n\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u53ef\u4ee5\u76f4\u63a5\u5728\u7b46\u8a18\u672c\u55ae\u5143\u4e2d\u5beb\u5165 SQL\uff0c\u4e26\u5c07 BigQuery \u4e2d\u7684\u6578\u64da\u8b80\u53d6\u5230 Python \u7b46\u8a18\u672c\u3002\n\u4f7f\u7528\u4e00\u500b\u6216\u5169\u500b\u767e\u5206\u6bd4\u5b57\u7b26\uff08 `%` \u6216 `%%` \uff09\u7684\u9b54\u6cd5\u547d\u4ee4\u53ef\u8b93\u60a8\u4f7f\u7528\u6700\u5c11\u7684\u8a9e\u6cd5\u5728\u7b46\u8a18\u672c\u4e2d\u8207 BigQuery \u9032\u884c\u4ea4\u4e92\u3002Python \u7248 BigQuery \u5ba2\u6236\u7aef\u5eab\u6703\u81ea\u52d5\u5b89\u88dd\u5728\u4ee3\u7ba1\u5f0f\u7b46\u8a18\u672c\u5be6\u4f8b\u4e2d\u3002\u5728\u5f8c\u81fa\uff0c `%%bigquery` \u9b54\u6cd5\u547d\u4ee4\u4f7f\u7528 Python \u7248 BigQuery \u5ba2\u6236\u7aef\u5eab\u904b\u884c\u7d66\u5b9a\u67e5\u8a62\uff0c\u5c07\u7d50\u679c\u8f49\u63db\u7232 Pandas DataFrame\uff0c\u4ee5\u53ca\u8996\u9700\u8981\u5c07\u7d50\u679c\u4fdd\u5b58\u5230\u8b8a\u91cf\u4e2d\uff0c\u7136\u5f8c\u986f\u793a\u7d50\u679c\u3002\n**\u6ce8\u610f** \uff1a\u5f9e `google-cloud-bigquery` Python \u8edf\u4ef6\u5305 1.26.0 \u7248\u958b\u59cb\uff0c\u9ed8\u8a8d\u4f7f\u7528 [BigQuery Storage API](https://cloud.google.com/bigquery/docs/reference/storage?hl=zh-cn) \u5f9e `%%bigquery` \u9b54\u6cd5\u547d\u4ee4\u4e0b\u8f09\u7d50\u679c\u3002\n- \u5982\u9700\u6253\u958b\u7b46\u8a18\u672c\u6587\u4ef6\uff0c\u8acb\u9078\u64c7 **\u6587\u4ef6 > \u65b0\u5efa > \u7b46\u8a18\u672c** \u3002\n- \u5728 **\u9078\u64c7\u5167\u6838** \u5c0d\u8a71\u6846\u4e2d\uff0c\u9078\u64c7 **Python\uff08\u672c\u5730\uff09** \uff0c\u7136\u5f8c\u9ede\u64ca **\u9078\u64c7** \u3002\u7cfb\u7d71\u6703\u6253\u958b\u60a8\u7684\u65b0 IPYNB \u6587\u4ef6\u3002\n- \u5982\u9700\u7372\u53d6 `international_top_terms` \u6578\u64da\u96c6\u4e2d\u570b\u5bb6/\u5730\u5340\u7684\u5340\u57df\u6578\uff0c\u8acb\u8f38\u5165\u4ee5\u4e0b\u8a9e\u53e5\uff1a```\n%%bigquerySELECT\u00a0 country_code,\u00a0 country_name,\u00a0 COUNT(DISTINCT region_code) AS num_regionsFROM\u00a0 `bigquery-public-data.google_trends.international_top_terms`WHERE\u00a0 refresh_date = DATE_SUB(CURRENT_DATE, INTERVAL 1 DAY)GROUP BY\u00a0 country_code,\u00a0 country_nameORDER BY\u00a0 num_regions DESC;\n```\n- \u9ede\u64ca play_circle_filled **\u904b\u884c\u55ae\u5143** \u3002\u8f38\u51fa\u985e\u4f3c\u65bc\u4ee5\u4e0b\u5167\u5bb9\uff1a```\nQuery complete after 0.07s: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 4/4 [00:00<00:00, 1440.60query/s]\nDownloading: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 41/41 [00:02><00:00, 20.21rows/s]\n... country_code country_name num_regions 0 TR Turkey 81 1 TH Thailand 77 2 VN Vietnam 63 3 JP Japan 47 4 RO Romania 42 5 NG Nigeria 37 6 IN India 36 7 ID Indonesia 34 8 CO Colombia 33 9 MX Mexico 32 10 BR Brazil 27 11 EG Egypt 27 12 UA Ukraine 27 13 CH Switzerland 26 14 AR Argentina 24 15 FR France 22 16 SE Sweden 21 17 HU Hungary 20 18 IT Italy 20 19 PT Portugal 20 20 NO Norway 19 21 FI Finland 18 22 NZ New Zealand 17 23 PH Philippines 17>\n``` **\u6ce8\u610f** \uff1a\u60a8\u7684\u7d50\u679c\u53ef\u80fd\u8207\u4e0a\u9762\u7684\u7d50\u679c\u4e0d\u540c\uff0c\u56e0\u7232\u6b63\u5728\u67e5\u8a62\u7684 `google_trends` \u6578\u64da\u96c6\u6703\u4e0d\u65b7\u96a8\u7740\u65b0\u6578\u64da\u800c\u5237\u65b0\u3002\n- \u5728\u4e0b\u4e00\u500b\u55ae\u5143\uff08\u5728\u4e0a\u4e00\u500b\u55ae\u5143\u7684\u8f38\u51fa\u4e0b\u65b9\uff09\u4e2d\uff0c\u8f38\u5165\u4ee5\u4e0b\u547d\u4ee4\u4ee5\u904b\u884c\u76f8\u540c\u67e5\u8a62\uff0c\u4f46\u9019\u6b21\u6703\u5c07\u7d50\u679c\u4fdd\u5b58\u5230\u540d\u7232 `regions_by_country` \u7684\u65b0 Pandas DataFrame \u4e2d\u3002\u60a8\u901a\u904e\u5728 `%%bigquery` \u9b54\u6cd5\u547d\u4ee4\u4e2d\u4f7f\u7528\u53c3\u6578\u4f86\u63d0\u4f9b\u8a72\u540d\u7a31\u3002```\n%%bigquery regions_by_countrySELECT\u00a0 country_code,\u00a0 country_name,\u00a0 COUNT(DISTINCT region_code) AS num_regionsFROM\u00a0 `bigquery-public-data.google_trends.international_top_terms`WHERE\u00a0 refresh_date = DATE_SUB(CURRENT_DATE, INTERVAL 1 DAY)GROUP BY\u00a0 country_code, country_nameORDER BY\u00a0 num_regions DESC;\n``` **\u6ce8\u610f** \uff1a\u5982\u9700\u8a73\u7d30\u77ad\u89e3 `%%bigquery` \u547d\u4ee4\u7684\u53ef\u7528\u53c3\u6578\uff0c\u8acb\u53c3\u95b1 [\u5ba2\u6236\u7aef\u5eab\u9b54\u6cd5\u547d\u4ee4\u6587\u6a94](https://cloud.google.com/python/docs/reference/bigquery/latest/magics?hl=zh-cn) \u3002\n- \u9ede\u64ca play_circle_filled **\u904b\u884c\u55ae\u5143** \u3002\n- \u5728\u4e0b\u4e00\u500b\u55ae\u5143\u4e2d\uff0c\u8f38\u5165\u4ee5\u4e0b\u547d\u4ee4\u4ee5\u67e5\u770b\u60a8\u525b\u525b\u8b80\u53d6\u7684\u67e5\u8a62\u7d50\u679c\u7684\u524d\u5e7e\u884c\uff1a```\nregions_by_country.head()\n```\n- \u9ede\u64ca play_circle_filled **\u904b\u884c\u55ae\u5143** \u3002Pandas DataFrame `regions_by_country` \u5df2\u6e96\u5099\u597d\u7e6a\u88fd\u5716\u8868\u3002\n### \u76f4\u63a5\u4f7f\u7528 BigQuery \u5ba2\u6236\u7aef\u5eab\u67e5\u8a62\u6578\u64da\n\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u4f7f\u7528 Python \u7248 BigQuery \u5ba2\u6236\u7aef\u5eab\u76f4\u63a5\u8b80\u53d6\u6578\u64da\u5230 Python \u7b46\u8a18\u672c\u4e2d\u3002\n\u8a72\u5ba2\u6236\u7aef\u5eab\u53ef\u8b93\u60a8\u66f4\u597d\u5730\u63a7\u5236\u67e5\u8a62\uff0c\u4e26\u53ef\u8b93\u60a8\u4f7f\u7528\u66f4\u5fa9\u96dc\u7684\u67e5\u8a62\u548c\u4f5c\u696d\u914d\u7f6e\u3002\u85c9\u52a9\u8a72\u5eab\u8207 Pandas \u7684\u96c6\u6210\uff0c\u60a8\u53ef\u4ee5\u7d50\u5408\u8072\u660e\u6027 SQL \u8207\u547d\u4ee4\u5f0f\u4ee3\u78bc (Python) \u7684\u5f37\u5927\u529f\u80fd\uff0c\u4f86\u5206\u6790\u3001\u76f4\u89c0\u5448\u73fe\u548c\u8f49\u63db\u6578\u64da\u3002\n**\u6ce8\u610f** \uff1a\u6709\u8a31\u591a Python \u6578\u64da\u5206\u6790\u3001\u6578\u64da\u6574\u7406\u548c\u53ef\u8996\u5316\u5eab\uff08\u4f8b\u5982 `numpy` \u3001 `pandas` \u3001 `matplotlib` \u7b49\uff09\u53ef\u4f9b\u60a8\u4f7f\u7528\u3002\u5176\u4e2d\u4e00\u4e9b\u5eab\u662f\u4ee5 DataFrame \u5c0d\u8c61\u7232\u57fa\u790e\u800c\u69cb\u5efa\u7684\u3002\n- \u5728\u4e0b\u4e00\u500b\u55ae\u5143\u4e2d\uff0c\u8f38\u5165\u4ee5\u4e0b Python \u4ee3\u78bc\u4ee5\u5c0e\u5165 Python \u7248 BigQuery \u5ba2\u6236\u7aef\u5eab\u4e26\u521d\u59cb\u5316\u5ba2\u6236\u7aef\uff1a```\nfrom google.cloud import bigqueryclient = bigquery.Client()\n```BigQuery \u5ba2\u6236\u7aef\u7528\u65bc\u901a\u904e BigQuery API \u6536\u767c\u6d88\u606f\u3002\n- \u9ede\u64ca play_circle_filled **\u904b\u884c\u55ae\u5143** \u3002\n- \u5728\u4e0b\u4e00\u500b\u55ae\u5143\u4e2d\uff0c\u8f38\u5165\u4ee5\u4e0b\u4ee3\u78bc\u4ee5\u6aa2\u7d22\u7f8e\u570b [top_terms](https://console.cloud.google.com/bigquery?p=bigquery-public-data&%3Bd=google_trends&%3Bt=top_terms&%3Bpage=table&hl=zh-cn) \u5728\u67d0\u500b\u6642\u9593\u6bb5\u5167\u4ee5\u67d0\u500b\u5929\u6578\u7232\u6642\u9593\u55ae\u4f4d\u800c\u91cd\u758a\u7684\u6bcf\u65e5\u71b1\u9580\u5b57\u8a5e\u7684\u767e\u5206\u6bd4\u3002\u6b64\u8655\u7684\u601d\u8def\u662f\u67e5\u770b\u6bcf\u5929\u7684\u71b1\u9580\u5b57\u8a5e\uff0c\u4e26\u67e5\u770b\u5b83\u5011\u8207\u524d\u4e00\u5929\u3001\u524d 2 \u5929\u3001\u524d 3 \u5929\u7b49\u6642\u9593\u55ae\u4f4d\uff08\u5927\u6982\u4e00\u500b\u6708\u7bc4\u570d\u5167\u6240\u6709\u65e5\u671f\u5c0d\uff09\u4e2d\u71b1\u9580\u5b57\u8a5e\u7684\u91cd\u758a\u767e\u5206\u6bd4\u3002```\nsql = \"\"\"WITH\u00a0 TopTermsByDate AS (\u00a0 \u00a0 SELECT DISTINCT refresh_date AS date, term\u00a0 \u00a0 FROM `bigquery-public-data.google_trends.top_terms`\u00a0 ),\u00a0 DistinctDates AS (\u00a0 \u00a0 SELECT DISTINCT date\u00a0 \u00a0 FROM TopTermsByDate\u00a0 )SELECT\u00a0 DATE_DIFF(Dates2.date, Date1Terms.date, DAY)\u00a0 \u00a0 AS days_apart,\u00a0 COUNT(DISTINCT (Dates2.date || Date1Terms.date))\u00a0 \u00a0 AS num_date_pairs,\u00a0 COUNT(Date1Terms.term) AS num_date1_terms,\u00a0 SUM(IF(Date2Terms.term IS NOT NULL, 1, 0))\u00a0 \u00a0 AS overlap_terms,\u00a0 SAFE_DIVIDE(\u00a0 \u00a0 SUM(IF(Date2Terms.term IS NOT NULL, 1, 0)),\u00a0 \u00a0 COUNT(Date1Terms.term)\u00a0 \u00a0 ) AS pct_overlap_termsFROM\u00a0 TopTermsByDate AS Date1TermsCROSS JOIN\u00a0 DistinctDates AS Dates2LEFT JOIN\u00a0 TopTermsByDate AS Date2Terms\u00a0 ON\u00a0 \u00a0 Dates2.date = Date2Terms.date\u00a0 \u00a0 AND Date1Terms.term = Date2Terms.termWHERE\u00a0 Date1Terms.date <= Dates2.dateGROUP BY\u00a0 days_apartORDER BY\u00a0 days_apart;\"\"\"pct_overlap_terms_by_days_apart = client.query(sql).to_dataframe()pct_overlap_terms_by_days_apart.head()\n```\u6b63\u5728\u4f7f\u7528\u7684 SQL \u88ab\u5c01\u88dd\u5728 Python \u5b57\u7b26\u4e32\u4e2d\uff0c\u7136\u5f8c\u50b3\u905e\u7d66 [query() \u65b9\u6cd5](https://cloud.google.com/python/docs/reference/bigquery/latest/google.cloud.bigquery.client.Client?hl=zh-cn#google_cloud_bigquery_client_Client_query) \u4ee5\u904b\u884c\u67e5\u8a62\u3002 [to_dataframe \u65b9\u6cd5](https://cloud.google.com/python/docs/reference/bigquery/latest/google.cloud.bigquery.job.QueryJob?hl=zh-cn#google_cloud_bigquery_job_QueryJob_to_dataframe) \u7b49\u5f85\u67e5\u8a62\u5b8c\u6210\uff0c\u4e26\u4f7f\u7528 BigQuery Storage API \u5c07\u7d50\u679c\u4e0b\u8f09\u5230 Pandas DataFrame\u3002\n- \u9ede\u64ca play_circle_filled **\u904b\u884c\u55ae\u5143** \u3002\u524d\u5e7e\u884c\u67e5\u8a62\u7d50\u679c\u6703\u986f\u793a\u5728\u4ee3\u78bc\u55ae\u5143\u4e0b\u65b9\u3002```\n days_apart num_date_pairs num_date1_terms overlap_terms pct_overlap_terms\n 0   0    32    800   800   1.000000\n 1   1    31    775   203   0.261935\n 2   2    30    750    73   0.097333\n 3   3    29    725    31   0.042759\n 4   4    28    700    23   0.032857\n``` **\u6ce8\u610f** \uff1a\u60a8\u7684\u7d50\u679c\u53ef\u80fd\u8207\u4e0a\u9762\u7684\u7d50\u679c\u4e0d\u540c\uff0c\u56e0\u7232\u6b63\u5728\u67e5\u8a62\u7684 `google_trends` \u6578\u64da\u96c6\u6703\u4e0d\u65b7\u96a8\u7740\u65b0\u6578\u64da\u800c\u5237\u65b0\u3002\n\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u5982\u4f55\u4f7f\u7528 BigQuery \u5ba2\u6236\u7aef\u5eab\uff0c\u8acb\u53c3\u95b1 [\u4f7f\u7528\u5ba2\u6236\u7aef\u5eab](https://cloud.google.com/bigquery/docs/quickstarts/quickstart-client-libraries?hl=zh-cn) \u5feb\u901f\u5165\u9580\u3002\n## \u7372\u53d6 BigQuery \u8868\u4e2d\u6578\u64da\u7684\u6458\u8981\n\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u4f7f\u7528\u7b46\u8a18\u672c\u5feb\u6377\u65b9\u5f0f\u7372\u53d6 BigQuery \u8868\u6240\u6709\u5b57\u6bb5\u7684\u6458\u8981\u7d71\u8a08\u4fe1\u606f\u548c\u53ef\u8996\u5316\u5167\u5bb9\u3002 \u9019\u662f\u5728\u9032\u4e00\u6b65\u63a2\u7d22\u6578\u64da\u4e4b\u524d\u5206\u6790\u6578\u64da\u7684\u5feb\u901f\u65b9\u6cd5\u3002\nBigQuery \u5ba2\u6236\u7aef\u5eab\u63d0\u4f9b\u4e86\u4e00\u500b\u9b54\u6cd5\u547d\u4ee4 `%bigquery_stats` \uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u7279\u5b9a\u7684\u8868\u540d\u7a31\u8abf\u7528\u8a72\u547d\u4ee4\uff0c\u4ee5\u63d0\u4f9b\u8868\u6982\u89bd\u548c\u8868\u6bcf\u4e00\u5217\u7684\u8a73\u7d30\u7d71\u8a08\u4fe1\u606f\u3002\n- \u5728\u4e0b\u4e00\u500b\u55ae\u5143\u4e2d\uff0c\u8f38\u5165\u4ee5\u4e0b\u4ee3\u78bc\u4ee5\u5728 US [top_terms \u8868](https://console.cloud.google.com/bigquery?p=bigquery-public-data&%3Bd=google_trends&%3Bt=top_terms&%3Bpage=table&hl=zh-cn) \u4e0a\u904b\u884c\u8a72\u5206\u6790\uff1a```\n%bigquery_stats bigquery-public-data.google_trends.top_terms\n```\n- \u9ede\u64ca play_circle_filled **\u904b\u884c\u55ae\u5143** \u3002\u904b\u884c\u4e00\u6bb5\u6642\u9593\u5f8c\uff0c\u7cfb\u7d71\u6703\u986f\u793a\u4e00\u500b\u5716\u7247\uff0c\u5176\u4e2d\u5305\u542b `top_terms` \u8868\u7684 7 \u500b\u8b8a\u91cf\u4e2d\u6bcf\u500b\u8b8a\u91cf\u7684\u5404\u7a2e\u7d71\u8a08\u4fe1\u606f\u3002\u4e0b\u5716\u986f\u793a\u4e86\u4e00\u4e9b\u793a\u4f8b\u8f38\u51fa\u7684\u90e8\u5206\u5167\u5bb9\uff1a \n**\u6ce8\u610f** \uff1a\u60a8\u7684\u7d50\u679c\u53ef\u80fd\u8207\u4e0a\u9762\u7684\u7d50\u679c\u4e0d\u540c\uff0c\u56e0\u7232\u6b63\u5728\u67e5\u8a62\u7684 `google_trends` \u6578\u64da\u96c6\u6703\u4e0d\u65b7\u96a8\u7740\u65b0\u6578\u64da\u800c\u5237\u65b0\u3002\n## \u76f4\u89c0\u5448\u73fe BigQuery \u6578\u64da\n\u5728\u672c\u90e8\u5206\u4e2d\uff0c\u60a8\u5c07\u4f7f\u7528\u5716\u8868\u529f\u80fd\u76f4\u89c0\u5448\u73fe\u4e4b\u524d\u5728 Jupyter \u7b46\u8a18\u672c\u4e2d\u904b\u884c\u7684\u67e5\u8a62\u7684\u7d50\u679c\u3002\n- \u5728\u4e0b\u4e00\u500b\u55ae\u5143\u4e2d\u8f38\u5165\u4ee5\u4e0b\u4ee3\u78bc\uff0c\u4ee5\u4fbf\u4f7f\u7528 Pandas `DataFrame.plot()` \u65b9\u6cd5\u5275\u5efa\u689d\u5f62\u5716\uff0c\u7528\u65bc\u76f4\u89c0\u5448\u73fe\u6309\u570b\u5bb6/\u5730\u5340\u8fd4\u56de\u5340\u57df\u6578\u7684\u67e5\u8a62\u7d50\u679c\uff1a```\nregions_by_country.plot(kind=\"bar\", x=\"country_name\", y=\"num_regions\", figsize=(15, 10))\n```\n- \u9ede\u64ca play_circle_filled **\u904b\u884c\u55ae\u5143** \u3002\u5716\u8868\u985e\u4f3c\u65bc\u4ee5\u4e0b\u5167\u5bb9\uff1a \n- \u5728\u4e0b\u4e00\u500b\u55ae\u5143\u4e2d\u8f38\u5165\u4ee5\u4e0b\u4ee3\u78bc\uff0c\u4ee5\u4fbf\u4f7f\u7528 pandas `DataFrame.plot()` \u65b9\u6cd5\u5275\u5efa\u6563\u9ede\u5716\uff0c\u4ee5\u76f4\u89c0\u5448\u73fe\u71b1\u9580\u641c\u7d22\u5b57\u8a5e\u5728\u4ee5\u56fa\u5b9a\u5929\u6578\u7232\u55ae\u4f4d\u7684\u6642\u9593\u6bb5\u4e2d\u91cd\u758a\u767e\u5206\u6bd4\u7684\u67e5\u8a62\u7d50\u679c\u3002```\npct_overlap_terms_by_days_apart.plot(\u00a0 kind=\"scatter\",\u00a0 x=\"days_apart\",\u00a0 y=\"pct_overlap_terms\",\u00a0 s=len(pct_overlap_terms_by_days_apart[\"num_date_pairs\"]) * 20,\u00a0 figsize=(15, 10)\u00a0 )\n```\n- \u9ede\u64ca play_circle_filled **\u904b\u884c\u55ae\u5143** \u3002\u5716\u8868\u985e\u4f3c\u65bc\u4ee5\u4e0b\u5167\u5bb9\u3002\u6bcf\u500b\u9ede\u7684\u5927\u5c0f\u53cd\u6620\u4e86\u6578\u64da\u4e2d\u4ee5\u8f03\u591a\u5929\u6578\u7232\u6642\u9593\u55ae\u4f4d\u7684\u6642\u9593\u6bb5\u4e2d\u65e5\u671f\u5c0d\u7684\u6578\u91cf\u3002\u4f8b\u5982\uff0c\u4ee5 1 \u5929\u7232\u6642\u9593\u55ae\u4f4d\u7684\u6642\u9593\u6bb5\u4e2d\u7684\u65e5\u671f\u5c0d\u6578\u91cf\u591a\u65bc\u4ee5\u4ee5 30 \u5929\u7232\u6642\u9593\u55ae\u4f4d\u7684\u6642\u9593\u6bb5\u4e2d\u7684\u65e5\u671f\u5c0d\u6578\u91cf\uff0c\u7cfb\u7d71\u6703\u63d0\u4f9b\u66f4\u591a\u53e5\u5c0d\uff0c\u56e0\u7232\u5728\u4e00\u500b\u6708\u7684\u6642\u9593\u4e2d\u6bcf\u5929\u63d0\u4f9b\u71b1\u9580\u641c\u7d22\u5b57\u8a5e\u3002 \n\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u6578\u64da\u53ef\u8996\u5316\uff0c\u8acb\u53c3\u95b1 [Pandas \u6587\u6a94](https://pandas.pydata.org/pandas-docs/stable/visualization.html) \u3002\n## \u5f8c\u7e8c\u6b65\u9a5f\n\u5982\u9700\u67e5\u770b\u5728\u4ee3\u7ba1\u5f0f\u7b46\u8a18\u672c\u4e2d\u7684\u5168\u9762\u5de5\u4f5c\u6d41\u4e2d\u63a2\u7d22\u548c\u76f4\u89c0\u5448\u73fe BigQuery \u6578\u64da\u7684\u793a\u4f8b\uff0c\u8acb\u5728\u4ee5\u4e0b\u74b0\u5883\u4e4b\u4e00\u4e2d\u904b\u884c\u201c\u5728\u7b46\u8a18\u672c\u4e2d\u5c0d BigQuery \u6578\u64da\u9032\u884c\u4ea4\u4e92\u5f0f\u63a2\u7d22\u6027\u5206\u6790\u201dJupyter \u7b46\u8a18\u672c\uff1a [\u5728 Colab \u4e2d\u904b\u884c](https://colab.research.google.com/github/GoogleCloudPlatform/vertex-ai-samples/blob/main/notebooks/official/workbench/exploratory_data_analysis/explore_data_in_bigquery_with_workbench.ipynb?hl=zh-cn) | [\u5728 Vertex AI Workbench \u4ee3\u7ba1\u5f0f\u7b46\u8a18\u672c\u4e2d\u6253\u958b](https://console.cloud.google.com/vertex-ai/workbench/deploy-managed-notebook?download_url=https%3A%2F%2Fraw.githubusercontent.com%2FGoogleCloudPlatform%2Fvertex-ai-samples%2Fmain%2Fnotebooks%2Fofficial%2Fworkbench%2Fexploratory_data_analysis%2Fexplore_data_in_bigquery_with_workbench.ipynb&hl=zh-cn) | [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/vertex-ai-samples/blob/main/notebooks/official/workbench/exploratory_data_analysis/explore_data_in_bigquery_with_workbench.ipynb)", "guide": "Vertex AI"}