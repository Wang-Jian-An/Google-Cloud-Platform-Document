{"title": "Vertex AI - \u5275\u5efa\u81ea\u5b9a\u7fa9\u8a13\u7df4\u4f5c\u696d", "url": "https://cloud.google.com/vertex-ai/docs/training/create-custom-job?hl=zh-cn", "abstract": "# Vertex AI - \u5275\u5efa\u81ea\u5b9a\u7fa9\u8a13\u7df4\u4f5c\u696d\n\u81ea\u5b9a\u7fa9\u8a13\u7df4\u4f5c\u696d\uff08Vertex AI API \u4e2d\u7684 `CustomJob` \u8cc7\u6e90\uff09\u662f\u5728 Vertex AI \u4e2d\u904b\u884c\u81ea\u5b9a\u7fa9\u6a5f\u5668\u5b78\u7fd2 (ML) \u8a13\u7df4\u4ee3\u78bc\u7684\u57fa\u672c\u65b9\u6cd5\u3002\n", "content": "## \u63d0\u4ea4\u4f5c\u696d\u4e4b\u524d\n\u5728\u5728 Vertex AI \u4e2d\u5275\u5efa `CustomJob` \u4e4b\u524d\uff0c\u60a8\u5fc5\u9808\u5275\u5efa\u4e00\u500b Python \u8a13\u7df4\u61c9\u7528\u6216\u81ea\u5b9a\u7fa9\u5bb9\u5668\u6620\u50cf\u4f86\u5b9a\u7fa9\u8981\u5728 Vertex AI \u4e0a\u904b\u884c\u7684\u8a13\u7df4\u4ee3\u78bc\u548c\u4f9d\u8cf4\u9805\u3002\n\u6211\u5011\u5efa\u8b70\u60a8\u4f7f\u7528 [\u672c\u6307\u5357\u5f8c\u9762\u90e8\u5206](#create) \u4e2d\u63cf\u8ff0\u7684 Google Cloud CLI \u7684\u81ea\u52d5\u5c01\u88dd\u529f\u80fd \uff0c\u5f9e\u672c\u5730\u8a08\u7b97\u6a5f\u4e0a\u7684\u4ee3\u78bc\u5275\u5efa Docker \u5bb9\u5668\u6620\u50cf\uff0c\u5c07\u6b64\u5bb9\u5668\u6620\u50cf\u63a8\u9001\u5230 Container Registry\uff0c\u4e26\u5275\u5efa\u4e00\u500b `CustomJob` \uff0c\u6240\u6709\u9019\u4e9b\u7528\u4e00\u500b\u547d\u4ee4\u5b8c\u6210\u3002\n\u5426\u5247\uff0c\u60a8\u5fc5\u9808\u624b\u52d5\u5275\u5efa [Python \u8a13\u7df4\u61c9\u7528](https://cloud.google.com/vertex-ai/docs/training/create-python-pre-built-container?hl=zh-cn) \u6216 [\u81ea\u5b9a\u7fa9\u5bb9\u5668\u6620\u50cf](https://cloud.google.com/vertex-ai/docs/training/create-custom-container?hl=zh-cn) \u3002\n\u5982\u679c\u60a8\u4e0d\u78ba\u5b9a\u9078\u64c7\u54ea\u500b\u9078\u9805\uff0c\u8acb\u53c3\u95b1 [\u8a13\u7df4\u4ee3\u78bc\u8981\u6c42](https://cloud.google.com/vertex-ai/docs/training/code-requirements?hl=zh-cn) \u77ad\u89e3\u8a73\u60c5\u3002\n## \u81ea\u5b9a\u7fa9\u4f5c\u696d\u5305\u542b\u7684\u5167\u5bb9\n\u5275\u5efa \u81ea\u5b9a\u7fa9\u4f5c\u696d\u6642\uff0c\u60a8\u9700\u8981\u6307\u5b9a Vertex AI \u904b\u884c\u8a13\u7df4\u4ee3\u78bc\u6240\u9700\u7684\u8a2d\u7f6e\uff0c\u5305\u62ec\uff1a\n- \u7528\u65bc\u55ae\u7bc0\u9ede\u8a13\u7df4\u7684\u4e00\u500b\u5de5\u4f5c\u5668\u6c60 ( [WorkerPoolSpec](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/CustomJobSpec?hl=zh-cn#workerpoolspec) )\uff0c\u6216\u7528\u65bc\u5206\u4f48\u5f0f\u8a13\u7df4\u7684\u591a\u500b\u5de5\u4f5c\u5668\u6c60\n- \u7528\u65bc\u914d\u7f6e\u4f5c\u696d\u8abf\u5ea6\u7684\u53ef\u9078\u8a2d\u7f6e ( [Scheduling](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/CustomJobSpec?hl=zh-cn#scheduling) )\u3001 [\u7232\u8a13\u7df4\u4ee3\u78bc\u8a2d\u7f6e\u7279\u5b9a\u7684\u74b0\u5883\u8b8a\u91cf](https://cloud.google.com/vertex-ai/docs/training/code-requirements?hl=zh-cn#environment-variables) \u3001 [\u4f7f\u7528\u81ea\u5b9a\u7fa9\u670d\u52d9\u8cec\u865f](https://cloud.google.com/vertex-ai/docs/general/custom-service-account?hl=zh-cn) \u548c [\u4f7f\u7528 VPC \u7db2\u7d61\u5c0d\u7b49\u4e92\u9023](https://cloud.google.com/vertex-ai/docs/general/vpc-peering?hl=zh-cn) \n\u5728\u5de5\u4f5c\u5668\u6c60\u4e2d\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u4ee5\u4e0b\u8a2d\u7f6e\uff1a\n- [\u6a5f\u5668\u985e\u578b\u548c\u52a0\u901f\u5668](https://cloud.google.com/vertex-ai/docs/training/configure-compute?hl=zh-cn) \n- [\u5de5\u4f5c\u5668\u6c60\u904b\u884c\u7684\u8a13\u7df4\u4ee3\u78bc\u7684\u914d\u7f6e](https://cloud.google.com/vertex-ai/docs/training/configure-container-settings?hl=zh-cn) \uff1aPython \u8a13\u7df4\u61c9\u7528 ( [PythonPackageSpec](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/CustomJobSpec?hl=zh-cn#pythonpackagespec) ) \u6216\u81ea\u5b9a\u7fa9\u5bb9\u5668 ( [ContainerSpec](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/CustomJobSpec?hl=zh-cn#containerspec) )\n\u60a8\u9084\u53ef\u4ee5\u5c07\u81ea\u5b9a\u7fa9\u4f5c\u696d\u914d\u7f6e\u7232\u5728\u6c38\u4e45\u6027\u8cc7\u6e90\u4e0a\u904b\u884c\uff0c\u800c\u4e0d\u662f\u5728\u4f5c\u696d\u5553\u52d5\u671f\u9593\u5275\u5efa\u65b0\u7684\u8a08\u7b97\u8cc7\u6e90\u3002\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u6c38\u4e45\u6027\u8cc7\u6e90\uff0c\u8acb\u53c3\u95b1 [\u6c38\u4e45\u6027\u8cc7\u6e90\u6982\u89bd](https://cloud.google.com/vertex-ai/docs/training/persistent-resource-overview?hl=zh-cn) \u3002\n## \u914d\u7f6e\u5206\u4f48\u5f0f\u8a13\u7df4\n\u60a8\u53ef\u4ee5\u901a\u904e\u6307\u5b9a\u591a\u500b\u5de5\u4f5c\u5668\u6c60\uff0c\u7232\u5206\u4f48\u5f0f\u8a13\u7df4\u5206\u4f48\u5f0f\u8a13\u7df4\u914d\u7f6e `CustomJob` \u3002\n\u6b64\u9801\u9762\u4e0a\u7684\u5927\u591a\u6578\u793a\u4f8b\u5747\u7232\u4f7f\u7528\u4e00\u500b\u5de5\u4f5c\u5668\u6c60\u7684\u55ae\u526f\u672c\u8a13\u7df4\u4f5c\u696d\u3002\u8981\u4fee\u6539\u5b83\u5011\u4ee5\u9032\u884c\u5206\u4f48\u5f0f\u8a13\u7df4\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- \u4f7f\u7528\u7b2c\u4e00\u500b\u5de5\u4f5c\u5668\u6c60\u914d\u7f6e\u4e3b\u526f\u672c\uff0c\u4e26\u5c07\u526f\u672c\u8a08\u6578\u8a2d\u7f6e\u7232 1\u3002\n- [\u6dfb\u52a0\u66f4\u591a\u5de5\u4f5c\u5668\u6c60](https://cloud.google.com/vertex-ai/docs/training/distributed-training?hl=zh-cn#additional-worker-pools) \u4f86\u914d\u7f6e\u5de5\u4f5c\u5668\u526f\u672c\u3001\u53c3\u6578\u670d\u52d9\u5668\u526f\u672c\u6216\u8a55\u4f30\u5668\u526f\u672c\uff08\u5982\u679c\u60a8\u7684\u6a5f\u5668\u5b78\u7fd2\u6846\u67b6\u652f\u6301\u5206\u4f48\u5f0f\u8a13\u7df4\u7684\u9019\u4e9b\u984d\u5916\u96c6\u7fa3\u4efb\u52d9\uff09\u3002\n\u8a73\u7d30\u77ad\u89e3\u5982\u4f55 [\u4f7f\u7528\u5206\u4f48\u5f0f\u8a13\u7df4](https://cloud.google.com/vertex-ai/docs/training/distributed-training?hl=zh-cn) \u3002\n## \u5275\u5efa CustomJob\n\u8981\u5275\u5efa `CustomJob` \uff0c\u8acb\u6309\u7167\u4ee5\u4e0b\u6a19\u7c64\u9801\u4e4b\u4e00\u4e2d\u7684\u8aaa\u660e\u64cd\u4f5c\uff0c\u5177\u9ad4\u53d6\u6c7a\u65bc\u60a8\u8981\u4f7f\u7528\u7684\u5de5\u5177\u3002\u5982\u679c\u60a8\u4f7f\u7528 gcloud CLI\uff0c\u5247\u53ef\u4ee5\u4f7f\u7528\u55ae\u689d\u547d\u4ee4\u5c07\u672c\u5730\u6a5f\u5668\u4e0a\u7684\u8a13\u7df4\u4ee3\u78bc\u81ea\u52d5\u6253\u5305\u5230 Docker \u5bb9\u5668\u6620\u50cf\u4e2d\uff0c\u4e26\u5c07\u8a72\u5bb9\u5668\u6620\u50cf\u63a8\u9001\u5230 Container Registry\uff0c\u7136\u5f8c\u5275\u5efa `CustomJob` \u3002\u5176\u4ed6\u9078\u9805\u5047\u5b9a\u60a8\u5df2 [\u5275\u5efa Python \u8a13\u7df4\u61c9\u7528\u6216\u81ea\u5b9a\u7fa9\u5bb9\u5668\u6620\u50cf](#before) \u3002\n\u4ee5\u4e0b\u793a\u4f8b\u4f7f\u7528 [gcloud ai custom-jobs create \u547d\u4ee4](https://cloud.google.com/sdk/gcloud/reference/ai/custom-jobs/create?hl=zh-cn) \u3002\n\u5982\u679c\u60a8\u7684\u8a13\u7df4\u4ee3\u78bc\u5728\u672c\u5730\u8a08\u7b97\u6a5f\u4e0a\uff0c\u6211\u5011\u5efa\u8b70\u60a8\u6309\u7167 [\u4f7f\u7528\u81ea\u52d5\u5c01\u88dd](#autopackaging) \u90e8\u5206\u9032\u884c\u64cd\u4f5c\u3002\u6216\u8005\uff0c\u5982\u679c\u60a8\u5df2 [\u5275\u5efa Python \u8a13\u7df4\u61c9\u7528\u6216\u81ea\u5b9a\u7fa9\u5bb9\u5668\u6620\u50cf](#before) \uff0c\u8acb\u76f4\u63a5\u8df3\u5230 [\u7121\u81ea\u52d5\u5c01\u88dd](#without-autopackaging) \u90e8\u5206\u3002\n### \u4f7f\u7528\u81ea\u52d5\u5c01\u88dd\u5982\u679c\u60a8\u7684\u672c\u5730\u8a08\u7b97\u6a5f\u4e0a\u6709\u8a13\u7df4\u4ee3\u78bc\uff0c\u5247\u53ef\u4ee5\u4f7f\u7528\u55ae\u500b\u547d\u4ee4\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a- \u6839\u64da\u60a8\u7684\u4ee3\u78bc\u69cb\u5efa\u81ea\u5b9a\u7fa9 Docker \u6620\u50cf\u3002\n- \u5c07\u6620\u50cf\u63a8\u9001\u5230 Container Registry\u3002\n- \u6839\u64da\u6620\u50cf\u5553\u52d5`CustomJob`\u3002\n\u7d50\u679c\u985e\u4f3c\u65bc\u4f7f\u7528\u4efb\u4f55\u5176\u4ed6\u81ea\u5b9a\u7fa9\u5bb9\u5668\u5275\u5efa `CustomJob` \uff1a\u5982\u679c\u6b64\u547d\u4ee4\u5c0d\u5de5\u4f5c\u6d41\u4f86\u8aaa\u5f88\u65b9\u4fbf\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u6b64\u7248\u672c\u7684\u547d\u4ee4\u3002\u7531\u65bc\u6b64\u7248\u672c\u7684\u547d\u4ee4\u6703\u69cb\u5efa\u548c\u63a8\u9001 Docker \u6620\u50cf\uff0c\u56e0\u6b64\u60a8\u5fc5\u9808\u5728\u672c\u5730\u8a08\u7b97\u6a5f\u4e0a\u57f7\u884c\u4ee5\u4e0b\u914d\u7f6e\uff1a- [\u5b89\u88dd Docker Engine\u3002](https://docs.docker.com/engine/install/) \n- \u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f Linux\uff0c\u8acb [\u914d\u7f6e Docker\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u5728\u6c92\u6709 sudo \u7684\u60c5\u6cc1\u4e0b\u904b\u884c\u5b83](https://docs.docker.com/engine/install/linux-postinstall/#manage-docker-as-a-non-root-user) \u3002\n-   Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them  \u5553\u7528 Container Registry API\u3002 [\u5553\u7528 API](https://console.cloud.google.com/flows/enableapi?apiid=containerregistry.googleapis.com&hl=zh-cn) \n- [\u7232 Docker \u914d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/container-registry/docs/quickstart?hl=zh-cn#auth) \uff0c\u4ee5\u4fbf\u5c07 Docker \u6620\u50cf\u63a8\u9001\u5230 Container Registry\uff1a```\ngcloud auth configure-docker\n```\n\u4ee5\u4e0b\u547d\u4ee4\u57fa\u65bc\u9810\u69cb\u5efa\u7684\u8a13\u7df4\u5bb9\u5668\u6620\u50cf\u548c\u672c\u5730 Python \u4ee3\u78bc\u69cb\u5efa Docker \u6620\u50cf\uff0c\u5c07\u8a72\u6620\u50cf\u63a8\u9001\u5230 Container Registry\uff0c\u7136\u5f8c\u5275\u5efa `CustomJob` \u3002\n```\ngcloud ai custom-jobs create \\\u00a0 --region=LOCATION \\\u00a0 --display-name=JOB_NAME \\\u00a0 --worker-pool-spec=machine-type=MACHINE_TYPE,replica-count=REPLICA_COUNT,executor-image-uri=EXECUTOR_IMAGE_URI,local-package-path=WORKING_DIRECTORY,script=SCRIPT_PATH\n```\n\u66ff\u63db\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1a\u5c07\u904b\u884c\u5bb9\u5668\u6216 Python \u8edf\u4ef6\u5305\u7684\u5340\u57df\u3002\n- \uff1a\u5fc5\u586b\u3002 `CustomJob` \u7684\u986f\u793a\u540d\u3002\n- \uff1a\u6a5f\u5668\u985e\u578b\u3002\u8acb\u53c3\u95b1 [\u53ef\u7528\u65bc\u8a13\u7df4\u7684\u6a5f\u5668\u985e\u578b](https://cloud.google.com/vertex-ai/docs/training/configure-compute?hl=zh-cn) \u3002\n- \uff1a\u8981\u4f7f\u7528\u7684\u5de5\u4f5c\u5668\u526f\u672c\u7684\u6578\u91cf\u3002\u5728\u5927\u591a\u6578\u60c5\u6cc1\u4e0b\uff0c\u5c0d\u65bc [\u7b2c\u4e00\u500b\u5de5\u4f5c\u5668\u6c60](#configure_distributed_training) \uff0c\u8acb\u8a2d\u7f6e\u7232 `1` \u3002\n- \uff1a\u904b\u884c\u6240\u63d0\u4f9b\u4ee3\u78bc\u7684\u5bb9\u5668\u6620\u50cf\u7684 URI\u3002\u8acb\u53c3\u95b1 [\u53ef\u7528\u65bc\u8a13\u7df4\u7684\u9810\u69cb\u5efa\u5bb9\u5668](https://cloud.google.com/vertex-ai/docs/training/pre-built-containers?hl=zh-cn) \u3002\u6b64\u6620\u50cf\u5145\u7576\u60a8\u4f7f\u7528\u6b64\u547d\u4ee4\u69cb\u5efa\u7684\u65b0 Docker \u6620\u50cf\u7684\u57fa\u790e\u6620\u50cf\u3002\n- \uff1a\u672c\u5730\u6587\u4ef6\u7cfb\u7d71\u4e2d\u7684\u76ee\u9304\uff0c\u5305\u542b\u904b\u884c\u8a13\u7df4\u4ee3\u78bc\u7684\u5165\u53e3\u9ede\u8173\u672c\uff08\u8acb\u53c3\u95b1\u4ee5\u4e0b\u5217\u8868\u9805\uff09\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u8a72\u8173\u672c\u7684\u7236\u7d1a\u76ee\u9304\u6216\u66f4\u9ad8\u7d1a\u5225\u7684\u76ee\u9304\u3002\u7232\u4e86\u6307\u5b9a\u5b8c\u5168\u9650\u5b9a\u7684 Python \u6a21\u584a\u540d\u7a31\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u4f7f\u7528\u66f4\u9ad8\u7d1a\u5225\u7684\u76ee\u9304\uff08\u8acb\u53c3\u95b1\u4e0b\u9762\u7684\u5217\u8868\u9805\uff09\u3002\u5982\u679c\u66f4\u9ad8\u7d1a\u5c64\u7684\u76ee\u9304\u5305\u542b `requirements.txt` \u6216 `setup.py` \uff0c\u60a8\u53ef\u80fd\u9084\u9700\u8981\u4f7f\u7528\u66f4\u9ad8\u7d1a\u5225\u76ee\u9304\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u5b89\u88dd\u4f9d\u8cf4\u9805](#install-dependencies) \u3002\u8acb\u6ce8\u610f\u5373\u4f7f\u60a8\u6307\u5b9a\u66f4\u9ad8\u7d1a\u5225\u7684\u76ee\u9304\uff0c\u6b64\u547d\u4ee4\u4e5f\u6703\u5c07\u5165\u53e3\u9ede\u8173\u672c\u7684\u7236\u76ee\u9304\u8907\u88fd\u5230 Docker \u6620\u50cf\u3002\n- \uff1a\u76f8\u5c0d\u65bc\u672c\u5730\u6587\u4ef6\u7cfb\u7d71\u4e0a\u7684 \u7684\u8def\u5f91\uff0c\u6307\u5411\u4f5c\u7232\u8a13\u7df4\u4ee3\u78bc\u5165\u53e3\u9ede\u7684\u8173\u672c\u3002\u8a72\u8173\u672c\u53ef\u4ee5\u662f Python \u8173\u672c\uff08\u4ee5 `.py` \u7d50\u5c3e\uff09\u6216 Bash \u8173\u672c\u3002\u4f8b\u5982\uff0c\u5982\u679c\u8981\u904b\u884c `/hello-world/trainer/task.py` \u4e14 \u7232 `/hello-world` \uff0c\u8acb\u4f7f\u7528 `trainer/task.py` \u4f5c\u7232\u6b64\u503c\u3002\u60a8\u53ef\u4ee5\u9078\u64c7\u5c07 `script=` `` \u66ff\u63db\u7232 `python-module=` `` \uff0c\u4ee5\u6307\u5b9a \u4e2d Python \u6a21\u584a\u7684\u540d\u7a31\uff0c\u4ee5\u4f5c\u7232\u8a13\u7df4\u7684\u5165\u53e3\u9ede\u904b\u884c\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a `python-module=trainer.task` \uff0c\u800c\u4e0d\u662f `script=trainer/task.py` \u3002\u5728\u9019\u7a2e\u60c5\u6cc1\u4e0b\uff0c\u751f\u6210\u7684 Docker \u5bb9\u5668\u6703\u5c07\u4ee3\u78bc [\u4f5c\u7232\u6a21\u584a\u52a0\u8f09](https://docs.python.org/3/using/cmdline.html#cmdoption-m) \u800c\u4e0d\u662f\u52a0\u8f09\u8173\u672c\u3002\u5982\u679c\u60a8\u7684\u5165\u53e3\u9ede\u8173\u672c\u5728 \u4e2d\u5c0e\u5165\u5176\u4ed6 Python \u6a21\u584a\uff0c\u5247\u5efa\u8b70\u60a8\u4f7f\u7528\u6b64\u9078\u9805\u3002\n\u4f7f\u7528\u81ea\u52d5\u5c01\u88dd\u529f\u80fd\u6642\uff0c\u60a8\u53ef\u4ee5\u6309\u7167\u8207\u4f7f\u7528 gcloud CLI \u7684 `local-run` \u547d\u4ee4\u76f8\u540c\u7684\u65b9\u5f0f\u5728\u5bb9\u5668\u4e2d\u5b89\u88dd Python \u4f9d\u8cf4\u9805\u3002\u5982\u9700\u77ad\u89e3\u5b89\u88dd Python \u4f9d\u8cf4\u9805\u7684\u5404\u7a2e\u65b9\u6cd5\uff0c\u8acb\u53c3\u95b1 `local-run` \u547d\u4ee4\u6307\u5357\u7684 [\u5b89\u88dd\u4f9d\u8cf4\u9805](https://cloud.google.com/vertex-ai/docs/training/containerize-run-code-local?hl=zh-cn#dependencies) \u90e8\u5206\u3002\n\u4f7f\u7528\u81ea\u52d5\u5c01\u88dd\u6642\uff0c\u6307\u5b9a\u4f9d\u8cf4\u9805\u7684\u8a9e\u6cd5\u8207\u4f7f\u7528 `local-run` \u547d\u4ee4\u6642\u7565\u6709\u4e0d\u540c\u3002\u60a8\u5fc5\u9808\u5728 `--worker-pool-spec` \u6a19\u8a8c\u7684\u503c\u4e2d\u4f7f\u7528\u9078\u9805\uff0c\u800c\u4e0d\u662f\u4f7f\u7528\u547d\u4ee4\u884c\u6a19\u8a8c\u4f86\u6307\u5b9a\u4f9d\u8cf4\u9805\u3002\u6b64\u5916\uff0c\u9019\u4e9b\u9078\u9805\u4e2d\u7684\u503c\u5fc5\u9808\u7528\u5206\u865f\uff08\u800c\u4e0d\u662f\u9017\u865f\uff09\u5206\u9694\u3002 \u3002\u5177\u9ad4\u800c\u8a00\uff0c\u8a9e\u6cd5\uff1a- \u4f7f\u7528 `--worker-pool-spec` \u6a19\u8a8c\u7684\u503c\u4e2d\u7684 `local-package-path` \u9078\u9805\uff0c\u800c\u4e0d\u662f `local-run` \u547d\u4ee4\u7684 `--local-package-path` \u6a19\u8a8c\u3002\u5982\u679c\u60a8\u4f7f\u7528\u6b64\u9078\u9805\u6307\u5b9a\u7684\u5de5\u4f5c\u76ee\u9304\u5305\u542b `requirements.txt` \u6216 `setup.py` \u6587\u4ef6\uff0c\u5247\u81ea\u52d5\u5c01\u88dd\u529f\u80fd\u6703\u6839\u64da\u6b64\u6587\u4ef6\u5b89\u88dd\u4f9d\u8cf4\u9805\u3002\u4e0a\u9762\u7684\u793a\u4f8b\u6f14\u793a\u4e86\u6b64\u8a9e\u6cd5\u3002\n- \uff08\u53ef\u9078\uff09\u5728 `--worker-pool-spec` \u6a19\u8a8c\u7684\u503c\u4e2d\u4f7f\u7528 `requirements` \u9078\u9805\uff0c\u800c\u4e0d\u662f `--requirements` \u6a19\u8a8c\u3002\u8acb\u52ff\u4f7f\u7528\u9017\u865f\u5206\u9694 PyPI \u4f9d\u8cf4\u9805\uff0c\u800c\u662f\u4f7f\u7528\u5206\u865f\u3002\n- \uff08\u53ef\u9078\uff09\u5728 `--worker-pool-spec` \u6a19\u8a8c\u7684\u503c\u4e2d\u4f7f\u7528 `extra-packages` \u9078\u9805\uff0c\u800c\u4e0d\u662f `--extra-packages` \u6a19\u8a8c\u3002\u8acb\u52ff\u4f7f\u7528\u9017\u865f\u5206\u9694\u672c\u5730\u4f9d\u8cf4\u9805\uff0c\u800c\u662f\u4f7f\u7528\u5206\u865f\u3002\n- \uff08\u53ef\u9078\uff09\u5728 `--worker-pool-spec` \u6a19\u8a8c\u7684\u503c\u4e2d\u4f7f\u7528 `extra-dirs` \u9078\u9805\uff0c\u800c\u4e0d\u662f `--extra-dirs` \u6a19\u8a8c\u3002\u8acb\u52ff\u4f7f\u7528\u9017\u865f\u5206\u9694\u76ee\u9304\u8def\u5f91\uff0c\u800c\u662f\u4f7f\u7528\u5206\u865f\u3002\n\u4ee5\u4e0b\u793a\u4f8b\u5c55\u793a\u77ad\u5982\u4f55\u4f7f\u7528\u6240\u6709\u53ef\u9078\u6280\u8853\u5b89\u88dd\u4f9d\u8cf4\u9805\u3002\uff08\u60a8\u53ef\u4ee5\u6307\u5b9a\u5176\u4e2d\u7684\u4efb\u4f55\u5b50\u96c6\u3002\uff09\u7232\u4e86\u6f14\u793a\u5206\u865f\u8a9e\u6cd5\uff0c\u8a72\u793a\u4f8b\u7232\u6bcf\u500b\u9078\u9805\u6307\u5b9a\u4e86\u5169\u500b\u503c\u3002\u8981\u7e2e\u77ed\u793a\u4f8b\u7684\u9577\u5ea6\uff0c\u8acb\u5c07\u5176\u4ed6 `--worker-pool-spec` \u9078\u9805\u66ff\u63db\u7232 `[...]` \u3002\n```\ngcloud ai custom-jobs create \\\u00a0 --region=LOCATION \\\u00a0 --display-name=JOB_NAME \\\u00a0 --worker-pool-spec=[...],requirements=PYPI_DEP_1;PYPI_DEP_2,extra-packages=LOCAL_DEP_1;LOCAL_DEP_2,extra-dirs=EXTRA_DIR_1;EXTRA_DIR_2\n```\n\u5982\u9700\u77ad\u89e3\u9019\u4e9b\u4f54\u4f4d\u7b26\u7684\u9069\u7576\u503c\uff0c\u8acb\u53c3\u95b1 `local-run` \u547d\u4ee4\u6307\u5357\u4e2d\u7684\u201c\u5b89\u88dd\u4f9d\u8cf4\u9805\u201d\u3002\n### \u4e0d\u81ea\u52d5\u5c01\u88dd\u5982\u679c\u60a8\u4e0d\u4f7f\u7528\u81ea\u52d5\u5c01\u88dd\uff0c\u5247\u53ef\u4ee5\u4f7f\u7528\u985e\u4f3c\u65bc\u4ee5\u4e0b\u5176\u4e2d\u4e00\u9805\u7684\u547d\u4ee4\u5275\u5efa `CustomJob` \u3002\u6839\u64da\u60a8 [\u662f\u5275\u5efa Python \u8a13\u7df4\u61c9\u7528\u9084\u662f\u81ea\u5b9a\u7fa9\u5bb9\u5668\u6620\u50cf](#before) \uff0c\u9078\u64c7\u4ee5\u4e0b\u6a19\u7c64\u9801\u4e4b\u4e00\uff1a\n```\ngcloud ai custom-jobs create \\\u00a0 --region=LOCATION \\\u00a0 --display-name=JOB_NAME \\\u00a0 --python-package-uris=PYTHON_PACKAGE_URIS \\\u00a0 --worker-pool-spec=machine-type=MACHINE_TYPE,replica-count=REPLICA_COUNT,executor-image-uri=EXECUTOR_IMAGE_URI,python-module=PYTHON_MODULE\n```\n\u66ff\u63db\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1a\u5c07\u904b\u884c\u5bb9\u5668\u6216 Python \u8edf\u4ef6\u5305\u7684\u5340\u57df\u3002\n- \uff1a\u5fc5\u586b\u3002`CustomJob`\u7684\u986f\u793a\u540d\u3002\n- \uff1a\u4ee5\u9017\u865f\u5206\u9694\u7684 Cloud Storage URI \u5217\u8868\uff0c\u6307\u5b9a\u4f5c\u7232\u8a13\u7df4\u7a0b\u5e8f\u7684 Python \u8edf\u4ef6\u5305\u6587\u4ef6\u53ca\u5176\u5f9e\u5c6c\u8edf\u4ef6\u5305\u3002\u8edf\u4ef6\u5305 URI \u7684\u6578\u91cf\u4e0a\u9650\u7232 100\u3002\n- \uff1a\u6a5f\u5668\u985e\u578b\u3002\u8acb\u53c3\u95b1 [\u53ef\u7528\u65bc\u8a13\u7df4\u7684\u6a5f\u5668\u985e\u578b](https://cloud.google.com/vertex-ai/docs/training/configure-compute?hl=zh-cn) \u3002\n- \uff1a\u8981\u4f7f\u7528\u7684\u5de5\u4f5c\u5668\u526f\u672c\u7684\u6578\u91cf\u3002\u5728\u5927\u591a\u6578\u60c5\u6cc1\u4e0b\uff0c\u5c0d\u65bc [\u7b2c\u4e00\u500b\u5de5\u4f5c\u5668\u6c60](#configure_distributed_training) \uff0c\u8acb\u8a2d\u7f6e\u7232`1`\u3002\n- \uff1a\u904b\u884c\u6240\u63d0\u4f9b\u4ee3\u78bc\u7684\u5bb9\u5668\u6620\u50cf\u7684 URI\u3002\u8acb\u53c3\u95b1 [\u53ef\u7528\u65bc\u8a13\u7df4\u7684\u9810\u69cb\u5efa\u5bb9\u5668](https://cloud.google.com/vertex-ai/docs/training/pre-built-containers?hl=zh-cn) \u3002\n- \uff1a\u5b89\u88dd\u8edf\u4ef6\u5305\u5f8c\u8981\u904b\u884c\u7684 Python \u6a21\u584a\u540d\u7a31\u3002\n```\ngcloud ai custom-jobs create \\\u00a0 --region=LOCATION \\\u00a0 --display-name=JOB_NAME \\\u00a0 --worker-pool-spec=machine-type=MACHINE_TYPE,replica-count=REPLICA_COUNT,container-image-uri=CUSTOM_CONTAINER_IMAGE_URI\n```\n\u66ff\u63db\u4ee5\u4e0b\u5167\u5bb9\uff1a- \uff1a\u5c07\u904b\u884c\u5bb9\u5668\u6216 Python \u8edf\u4ef6\u5305\u7684\u5340\u57df\u3002\n- \uff1a\u5fc5\u586b\u3002`CustomJob`\u7684\u986f\u793a\u540d\u3002\n- \uff1a\u6a5f\u5668\u985e\u578b\u3002\u8acb\u53c3\u95b1 [\u53ef\u7528\u65bc\u8a13\u7df4\u7684\u6a5f\u5668\u985e\u578b](https://cloud.google.com/vertex-ai/docs/training/configure-compute?hl=zh-cn) \u3002\n- \uff1a\u8981\u4f7f\u7528\u7684\u5de5\u4f5c\u5668\u526f\u672c\u7684\u6578\u91cf\u3002\u5728\u5927\u591a\u6578\u60c5\u6cc1\u4e0b\uff0c\u5c0d\u65bc [\u7b2c\u4e00\u500b\u5de5\u4f5c\u5668\u6c60](#configure_distributed_training) \uff0c\u8acb\u8a2d\u7f6e\u7232`1`\u3002\n- \uff1a\u8981\u5728\u6bcf\u500b\u5de5\u4f5c\u5668\u526f\u672c\u4e0a\u904b\u884c\u7684\u5bb9\u5668\u6620\u50cf\u7684 Artifact Registry\u3001Container Registry \u6216 Docker Hub URI\u3002### \u5206\u4f48\u5f0f\u8a13\u7df4\u8981\u57f7\u884c [\u5206\u4f48\u5f0f\u8a13\u7df4](#configure_distributed_training) \uff0c\u8acb\u591a\u6b21\u6307\u5b9a `--worker-pool-spec` \u6a19\u8a8c\uff0c\u6bcf\u500b\u5de5\u4f5c\u5668\u6c60\u4e00\u6b21\u3002\n\u5982\u679c\u60a8\u4f7f\u7528\u81ea\u52d5\u5c01\u88dd\uff0c\u5247\u5fc5\u9808\u50c5\u6307\u5b9a `local-package-path` \u3001 `script` \u4ee5\u53ca\u8207\u7b2c\u4e00\u500b\u5de5\u4f5c\u5668\u6c60\u4e2d\u7684\u81ea\u52d5\u5c01\u88dd\u76f8\u95dc\u7684\u5176\u4ed6\u9078\u9805\u3002\u5728\u5f8c\u7e8c\u5de5\u4f5c\u5668\u6c60\u4e2d\u7701\u7565\u8207\u8a13\u7df4\u4ee3\u78bc\u76f8\u95dc\u7684\u5b57\u6bb5\uff0c\u6240\u6709\u5b57\u6bb5\u90fd\u5c07\u4f7f\u7528\u901a\u904e\u81ea\u52d5\u5c01\u88dd\u69cb\u5efa\u7684\u76f8\u540c\u8a13\u7df4\u5bb9\u5668\u3002\n\u4f8b\u5982\uff0c\u4ee5\u4e0b\u547d\u4ee4\u6703\u8abf\u6574\u524d\u9762\u7684\u81ea\u52d5\u5c01\u88dd\u793a\u4f8b\u4ee5\u4f7f\u7528\u7b2c\u4e8c\u500b\u5de5\u4f5c\u5668\u6c60\uff1a\n```\ngcloud ai custom-jobs create \\\u00a0 --region=LOCATION \\\u00a0 --display-name=JOB_NAME \\\u00a0 --worker-pool-spec=machine-type=MACHINE_TYPE,replica-count=REPLICA_COUNT,executor-image-uri=EXECUTOR_IMAGE_URI,local-package-path=WORKING_DIRECTORY,script=SCRIPT_PATH \\\u00a0 --worker-pool-spec=machine-type=SECOND_POOL_MACHINE_TYPE,replica-count=SECOND_POOL_REPLICA_COUNT\n```\n\u5982\u679c\u60a8\u4e0d\u4f7f\u7528\u81ea\u52d5\u5c01\u88dd\uff0c\u8acb\u5b8c\u5168\u7368\u7acb\u5730\u6307\u5b9a\u6bcf\u500b\u5de5\u4f5c\u5668\u6c60\uff1b\u8acb\u52ff\u7701\u7565\u4efb\u4f55\u5b57\u6bb5\u3002\n\u4ee5\u4e0b\u547d\u4ee4\u8abf\u6574\u4e86\u4e4b\u524d\u7684\u793a\u4f8b\u4ee5\u4f7f\u7528\u7b2c\u4e8c\u500b\u5de5\u4f5c\u5668\u6c60\uff1a\n```\ngcloud ai custom-jobs create \\\u00a0 --region=LOCATION \\\u00a0 --display-name=JOB_NAME \\\u00a0 --python-package-uris=PYTHON_PACKAGE_URIS \\\u00a0 --worker-pool-spec=machine-type=MACHINE_TYPE,replica-count=REPLICA_COUNT,executor-image-uri=EXECUTOR_IMAGE_URI,python-module=PYTHON_MODULE \\\u00a0 --worker-pool-spec=machine-type=SECOND_POOL_MACHINE_TYPE,replica-count=SECOND_POOL_REPLICA_COUNT,executor-image-uri=SECOND_POOL_EXECUTOR_IMAGE_URI,python-module=SECOND_POOL_PYTHON_MODULE\n```\n **\u6ce8\u610f** \uff1a\u5728\u9019\u7a2e\u60c5\u6cc1\u4e0b\uff0c\u6bcf\u500b\u5de5\u4f5c\u5668\u6c60\u4f7f\u7528\u76f8\u540c\u7684 Python \u8edf\u4ef6\u5305 URI\u3002\n```\ngcloud ai custom-jobs create \\\u00a0 --region=LOCATION \\\u00a0 --display-name=JOB_NAME \\\u00a0 --worker-pool-spec=machine-type=MACHINE_TYPE,replica-count=REPLICA_COUNT,container-image-uri=CUSTOM_CONTAINER_IMAGE_URI \\\u00a0 --worker-pool-spec=machine-type=SECOND_POOL_MACHINE_TYPE,replica-count=SECOND_POOL_REPLICA_COUNT,container-image-uri=SECOND_POOL_CUSTOM_CONTAINER_IMAGE_URI\n```\n### \u9ad8\u7d1a\u914d\u7f6e\u5982\u679c\u60a8\u60f3\u6307\u5b9a\u524d\u9762\u793a\u4f8b\u4e2d\u672a\u63d0\u4f9b\u7684\u914d\u7f6e\u9078\u9805\uff0c\u5247\u53ef\u4ee5\u4f7f\u7528 `--config` \u6a19\u8a8c\u6307\u5b9a\u672c\u5730\u74b0\u5883\u4e2d\u7684 `config.yaml` \u6587\u4ef6\u7684\u8def\u5f91\uff0c\u8a72\u6587\u4ef6\u5305\u542b [CustomJobSpec](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/CustomJobSpec?hl=zh-cn) \u7684\u5b57\u6bb5\u3002\u4f8b\u5982\uff1a\n```\ngcloud ai custom-jobs create \\\u00a0 --region=LOCATION \\\u00a0 --display-name=JOB_NAME \\\u00a0 --config=config.yaml\n```\n\u8acb\u53c3\u95b1 [config.yaml \u6587\u4ef6\u793a\u4f8b](https://cloud.google.com/sdk/gcloud/reference/ai/custom-jobs/create?hl=zh-cn#--config) \u3002\u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u60a8\u7121\u6cd5\u76f4\u63a5\u5275\u5efa `CustomJob` \u8cc7\u6e90\u3002\u4f46\u662f\uff0c\u60a8\u53ef\u4ee5\u5275\u5efa\u4e00\u500b\u5275\u5efa `CustomJob` \u7684 `TrainingPipeline` \u8cc7\u6e90\u3002\n\u4ee5\u4e0b\u8aaa\u660e\u4ecb\u7d39\u77ad\u5982\u4f55\u5275\u5efa `TrainingPipeline` \uff0c\u7528\u65bc\u5275\u5efa `CustomJob` \u4e14\u4e0d\u57f7\u884c\u5176\u4ed6\u64cd\u4f5c\u3002\u5982\u679c\u60a8\u60f3\u8981\u4f7f\u7528\u5176\u4ed6 `TrainingPipeline` \u529f\u80fd\uff08\u4f8b\u5982\u4f7f\u7528\u4ee3\u7ba1\u5f0f\u6578\u64da\u96c6\u9032\u884c\u8a13\u7df4\u6216\u5728\u8a13\u7df4\u7d50\u675f\u6642\u5275\u5efa `Model` \u8cc7\u6e90\uff09\uff0c\u8acb\u53c3\u95b1 [\u5275\u5efa\u8a13\u7df4\u6d41\u6c34\u7dda](https://cloud.google.com/vertex-ai/docs/training/create-training-pipeline?hl=zh-cn) \u3002- \u5728 Google Cloud \u63a7\u5236\u6aaf\u7684 Vertex AI \u90e8\u5206\u4e2d\uff0c\u8f49\u5230 **\u8a13\u7df4\u6d41\u6c34\u7dda** \u9801\u9762\u3002 [\u8f49\u5230\u201c\u8a13\u7df4\u6d41\u6c34\u7dda\u201d](https://console.cloud.google.com/vertex-ai/training/training-pipelines?hl=zh-cn) \n- \u9ede\u64ca **add_box \u5275\u5efa** \u4ee5\u6253\u958b **\u8a13\u7df4\u65b0\u6a21\u578b** \u7a97\u683c\u3002 **\u6ce8\u610f** \uff1a\u60a8\u53ef\u4ee5\u5728\u700f\u89bd\u5668\u4e2d\u8f38\u5165 [model.new](https://model.new) \uff0c\u4ee5\u76f4\u63a5\u8f49\u5230\u6a21\u578b\u5275\u5efa\u9801\u9762\u3002\n- \u5728 **\u8a13\u7df4\u65b9\u6cd5** \u6b65\u9a5f\u4e2d\uff0c\u6307\u5b9a\u4ee5\u4e0b\u8a2d\u7f6e\uff1a- \u5728 **\u6578\u64da\u96c6** \u4e0b\u62c9\u5217\u8868\u4e2d\uff0c\u9078\u64c7 **\u7121\u4ee3\u7ba1\u5f0f\u6578\u64da\u96c6** \u3002\n- \u9078\u64c7 **\u81ea\u5b9a\u7fa9\u8a13\u7df4\uff08\u9ad8\u7d1a\uff09** \u3002\n\u9ede\u64ca **\u7e7c\u7e8c** \u3002\n- \u5728 **\u6a21\u578b\u8a73\u60c5** \u6b65\u9a5f\u4e2d\uff0c\u9078\u64c7 **\u8a13\u7df4\u65b0\u6a21\u578b** \u6216 **\u8a13\u7df4\u65b0\u7248\u672c** \u3002\u5982\u679c\u60a8\u9078\u64c7\u8a13\u7df4\u65b0\u6a21\u578b\uff0c\u8acb\u7232\u6a21\u578b\u8f38\u5165\u4e00\u500b\u540d\u7a31 \u3002\u9ede\u64ca **\u7e7c\u7e8c** \u3002\n- \u5728 **\u8a13\u7df4\u5bb9\u5668** \u6b65\u9a5f\u4e2d\uff0c\u6307\u5b9a\u4ee5\u4e0b\u8a2d\u7f6e\uff1a- \u9078\u64c7 [\u8981\u4f7f\u7528\u9810\u69cb\u5efa\u5bb9\u5668\u9084\u662f\u81ea\u5b9a\u7fa9\u5bb9\u5668](https://cloud.google.com/vertex-ai/docs/training/custom-training-methods?hl=zh-cn#pre-built-custom) \u9032\u884c\u8a13\u7df4\u3002\n- \u6839\u64da\u60a8\u7684\u9078\u64c7\uff0c\u57f7\u884c\u4ee5\u4e0b\u76f8\u61c9\u64cd\u4f5c\uff1a- \u5982\u679c\u8981\u4f7f\u7528\u9810\u69cb\u5efa\u5bb9\u5668\u9032\u884c\u8a13\u7df4\uff0c\u8acb\u5411 Vertex AI \u63d0\u4f9b\u4f7f\u7528\u60a8\u4e0a\u50b3\u5230 Cloud Storage \u7684\u8a13\u7df4\u8edf\u4ef6\u5305\u6240\u9700\u7684\u4fe1\u606f\uff1a- \u4f7f\u7528 **\u6a21\u578b\u6846\u67b6** \u548c **\u6a21\u578b\u6846\u67b6\u7248\u672c** \u4e0b\u62c9\u5217\u8868\u6307\u5b9a\u8981\u4f7f\u7528\u7684 [\u9810\u69cb\u5efa\u5bb9\u5668](https://cloud.google.com/vertex-ai/docs/training/pre-built-containers?hl=zh-cn) \u3002\n- \u5728 **\u8edf\u4ef6\u5305\u4f4d\u7f6e** \u5b57\u6bb5\u4e2d\uff0c\u6307\u5b9a [\u60a8\u5275\u5efa\u4e26\u4e0a\u50b3\u7684 Python \u8a13\u7df4\u61c9\u7528](https://cloud.google.com/vertex-ai/docs/training/create-python-pre-built-container?hl=zh-cn) \u7684 Cloud Storage URI\u3002\u6b64\u6587\u4ef6\u901a\u5e38\u4ee5 `.tar.gz` \u7d50\u5c3e\u3002\n- \u5728 **Python \u6a21\u584a** \u5b57\u6bb5\u4e2d\uff0c\u8f38\u5165 [\u8a13\u7df4\u61c9\u7528\u7684\u5165\u53e3\u9ede\u7684\u6a21\u584a\u540d\u7a31](https://cloud.google.com/vertex-ai/docs/training/create-python-pre-built-container?hl=zh-cn#python-modules) \u3002\n- \u5982\u679c\u8981\u4f7f\u7528 [\u81ea\u5b9a\u7fa9\u5bb9\u5668\u9032\u884c\u8a13\u7df4](https://cloud.google.com/vertex-ai/docs/training/create-custom-container?hl=zh-cn) \uff0c\u8acb\u5728 **\u5bb9\u5668\u6620\u50cf** \u5b57\u6bb5\u4e2d\u6307\u5b9a\u5bb9\u5668\u6620\u50cf\u7684 Artifact Registry \u6216 Docker Hub URI\u3002\n- \u5728 **Model output directory** \u5b57\u6bb5\u4e2d\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a\u60a8\u6709\u6b0a\u8a2a\u554f\u7684\u5b58\u5132\u6876\u4e2d\u7684\u76ee\u9304\u7684 Cloud Storage URI\u3002\u76ee\u9304\u4e0d\u9700\u8981\u5df2\u7d93\u5b58\u5728\u3002\u6b64\u503c\u6703\u5728 [baseOutputDirectory API \u5b57\u6bb5](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/CustomJobSpec?hl=zh-cn#FIELDS.base_output_directory) \u4e2d\u50b3\u905e\u7d66 Vertex AI\uff0c\u8a72\u5b57\u6bb5\u8a2d\u7f6e [\u8a13\u7df4\u61c9\u7528\u5728\u5176\u904b\u884c\u6642\u53ef\u4ee5\u8a2a\u554f\u7684\u5e7e\u500b\u74b0\u5883\u8b8a\u91cf](https://cloud.google.com/vertex-ai/docs/training/code-requirements?hl=zh-cn#environment-variables) \u3002\n- **\u53ef\u9078** \uff1a\u5728 **\u53c3\u6578** \u5b57\u6bb5\u4e2d\uff0c\u60a8\u53ef\u4ee5\u6307\u5b9a Vertex AI \u958b\u59cb\u904b\u884c\u8a13\u7df4\u4ee3\u78bc\u6642\u4f7f\u7528\u7684\u53c3\u6578\u3002\u6240\u6709\u53c3\u6578\u7684\u7e3d\u9577\u5ea6\u4e0a\u9650\u7232 10 \u842c\u500b\u5b57\u7b26\u3002\u9019\u4e9b\u53c3\u6578\u7684\u884c\u7232\u56e0\u60a8\u4f7f\u7528\u7684\u5bb9\u5668\u985e\u578b\u800c\u7570\uff1a- \u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f\u9810\u69cb\u5efa\u5bb9\u5668\uff0cVertex AI \u6703\u5c07\u53c3\u6578\u4f5c\u7232\u547d\u4ee4\u884c\u6a19\u8a8c\u50b3\u905e\u7d66 **Python \u6a21\u584a** \u3002\n- \u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f\u81ea\u5b9a\u7fa9\u5bb9\u5668\uff0c\u5247 Vertex AI \u6703 [\u4f7f\u7528\u53c3\u6578\u66ff\u63db\u5bb9\u5668\u7684 CMD \u6307\u4ee4](https://cloud.google.com/vertex-ai/docs/training/configure-container-settings?hl=zh-cn#configure) \u3002\u9ede\u64ca **\u7e7c\u7e8c** \u3002\n- \u5728 **\u8d85\u53c3\u6578\u8abf\u7bc0** \u6b65\u9a5f\u4e2d\uff0c\u78ba\u4fdd\u672a\u9078\u4e2d **\u5553\u7528\u8d85\u53c3\u6578\u8abf\u7bc0** \u8907\u9078\u6846\u3002\u9ede\u64ca **\u7e7c\u7e8c** \u3002\n- \u5728 **\u8a08\u7b97\u548c\u50f9\u683c** \u6b65\u9a5f\u4e2d\uff0c\u6307\u5b9a\u4ee5\u4e0b\u8a2d\u7f6e\uff1a- \u5728 **\u5340\u57df** \u4e0b\u62c9\u5217\u8868\u4e2d\uff0c\u9078\u64c7\u4e00\u500b [\u652f\u6301\u81ea\u5b9a\u7fa9\u8a13\u7df4\u7684\u5340\u57df](https://cloud.google.com/vertex-ai/docs/general/locations?hl=zh-cn) \u3002\n- \u5728 **\u5de5\u4f5c\u5668\u6c60 0** \u90e8\u5206\u4e2d\uff0c\u6307\u5b9a\u7528\u65bc\u8a13\u7df4\u7684 [\u8a08\u7b97\u8cc7\u6e90](https://cloud.google.com/vertex-ai/docs/training/configure-compute?hl=zh-cn) \u3002\u5982\u679c\u6307\u5b9a\u52a0\u901f\u5668\uff0c\u8acb [\u78ba\u4fdd\u6240\u9078\u52a0\u901f\u5668\u985e\u578b\u5728\u6240\u9078\u5340\u57df\u53ef\u7528](https://cloud.google.com/vertex-ai/docs/general/locations?hl=zh-cn#region_considerations) \u3002\u5982\u679c\u60a8\u8981\u57f7\u884c [\u5206\u4f48\u5f0f\u8a13\u7df4](https://cloud.google.com/vertex-ai/docs/training/distributed-training?hl=zh-cn) \uff0c\u5247\u9ede\u64ca **Add more worker pools** \uff0c\u4f75\u7232\u60a8\u9700\u8981\u7684\u6bcf\u500b\u984d\u5916\u5de5\u4f5c\u5668\u6c60\u6307\u5b9a\u4e00\u7d44\u984d\u5916\u7684\u8a08\u7b97\u8cc7\u6e90\u3002\n\u9ede\u64ca **\u7e7c\u7e8c** \u3002\n- \u5728 **\u9810\u6e2c\u5bb9\u5668** \u6b65\u9a5f\u4e2d\uff0c\u9078\u64c7 **No prediction container** \u3002\n- \u9ede\u64ca **\u958b\u59cb\u8a13\u7df4** \u4ee5\u5553\u52d5\u81ea\u5b9a\u7fa9\u8a13\u7df4\u6d41\u6c34\u7dda\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- \uff1a\u5c07\u904b\u884c\u5bb9\u5668\u6216 Python \u8edf\u4ef6\u5305\u7684\u5340\u57df\u3002\n- \uff1a\u60a8\u7684 [\u9805\u76ee ID](https://cloud.google.com/resource-manager/docs/creating-managing-projects?hl=zh-cn#identifiers) \u3002\n- \uff1a\u5fc5\u586b\u3002`CustomJob`\u7684\u986f\u793a\u540d\u3002\n- \u5b9a\u7fa9\u81ea\u5b9a\u7fa9\u8a13\u7df4\u4f5c\u696d\uff1a- \uff1a\u6a5f\u5668\u985e\u578b\u3002\u8acb\u53c3\u95b1 [\u53ef\u7528\u65bc\u8a13\u7df4\u7684\u6a5f\u5668\u985e\u578b](https://cloud.google.com/vertex-ai/docs/training/configure-compute?hl=zh-cn) \u3002\n- \uff1a\uff08\u53ef\u9078\uff09\u9644\u52a0\u5230\u4f5c\u696d\u7684\u52a0\u901f\u5668\u985e\u578b\u3002\n- \uff1a\uff08\u53ef\u9078\uff09\u9644\u52a0\u5230\u4f5c\u696d\u7684\u52a0\u901f\u5668\u6578\u91cf\u3002\n- \uff1a\uff08\u53ef\u9078\uff09\u7528\u65bc\u4f5c\u696d\u7684\u5553\u52d5\u78c1\u76e4\u985e\u578b\uff1a`pd-standard`\uff08\u9ed8\u8a8d\uff09\u6216`pd-ssd`\u3002 [\u8a73\u7d30\u77ad\u89e3\u78c1\u76e4\u985e\u578b](https://cloud.google.com/compute/docs/disks?hl=zh-cn#disk-types) \u3002\n- \uff1a\uff08\u53ef\u9078\uff09\u7528\u65bc\u4f5c\u696d\u7684\u5553\u52d5\u78c1\u76e4\u5927\u5c0f\uff08\u4ee5 GB \u7232\u55ae\u4f4d\uff09\u3002\u9ed8\u8a8d\u503c\u7232 100\u3002\n- \uff1a\u8981\u4f7f\u7528\u7684\u5de5\u4f5c\u5668\u526f\u672c\u7684\u6578\u91cf\u3002\u5728\u5927\u591a\u6578\u60c5\u6cc1\u4e0b\uff0c\u5c0d\u65bc [\u7b2c\u4e00\u500b\u5de5\u4f5c\u5668\u6c60](#configure_distributed_training) \uff0c\u8acb\u8a2d\u7f6e\u7232`1`\u3002\n- \u5982\u679c\u8a13\u7df4\u61c9\u7528\u5728\u81ea\u5b9a\u7fa9\u5bb9\u5668\u4e2d\u904b\u884c\uff0c\u8acb\u6307\u5b9a\u4ee5\u4e0b\u5167\u5bb9\uff1a\n- \uff1a\u8981\u5728\u6bcf\u500b\u5de5\u4f5c\u5668\u526f\u672c\u4e0a\u904b\u884c\u7684\u5bb9\u5668\u6620\u50cf\u7684 Artifact Registry\u3001Container Registry \u6216 Docker Hub URI\u3002\n- \uff1a\uff08\u53ef\u9078\uff09\u5553\u52d5\u5bb9\u5668\u6642\u8981\u8abf\u7528\u7684\u547d\u4ee4\u3002\u6b64\u547d\u4ee4\u6703\u66ff\u63db\u5bb9\u5668\u7684\u9ed8\u8a8d\u5165\u53e3\u9ede\u3002\n- \uff1a\uff08\u53ef\u9078\uff09\u5553\u52d5\u5bb9\u5668\u6642\u8981\u50b3\u905e\u7684\u53c3\u6578\u3002\n- \u5982\u679c\u8a13\u7df4\u61c9\u7528\u662f\u5728\u9810\u69cb\u5efa\u5bb9\u5668\u4e2d\u904b\u884c\u7684 Python \u8edf\u4ef6\u5305\uff0c\u8acb\u6307\u5b9a\u4ee5\u4e0b\u5167\u5bb9\uff1a\n- \uff1a\u904b\u884c\u6240\u63d0\u4f9b\u4ee3\u78bc\u7684\u5bb9\u5668\u6620\u50cf\u7684 URI\u3002\u8acb\u53c3\u95b1 [\u53ef\u7528\u65bc\u8a13\u7df4\u7684\u9810\u69cb\u5efa\u5bb9\u5668](https://cloud.google.com/vertex-ai/docs/training/pre-built-containers?hl=zh-cn) \u3002\n- \uff1a\u4ee5\u9017\u865f\u5206\u9694\u7684 Cloud Storage URI \u5217\u8868\uff0c\u6307\u5b9a\u4f5c\u7232\u8a13\u7df4\u7a0b\u5e8f\u7684 Python \u8edf\u4ef6\u5305\u6587\u4ef6\u53ca\u5176\u5f9e\u5c6c\u8edf\u4ef6\u5305\u3002\u8edf\u4ef6\u5305 URI \u7684\u6578\u91cf\u4e0a\u9650\u7232 100\u3002\n- \uff1a\u5b89\u88dd\u8edf\u4ef6\u5305\u5f8c\u8981\u904b\u884c\u7684 Python \u6a21\u584a\u540d\u7a31\u3002\n- \uff1a\uff08\u53ef\u9078\uff09\u8981\u50b3\u905e\u7d66 Python \u6a21\u584a\u7684\u547d\u4ee4\u884c\u53c3\u6578\u3002\n- \u77ad\u89e3 [\u4f5c\u696d\u8abf\u5ea6\u9078\u9805](https://cloud.google.com/vertex-ai/docs/reference/rest/v1/CustomJobSpec?hl=zh-cn#Scheduling) \u3002\n- \uff1a\uff08\u53ef\u9078\uff09\u4f5c\u696d\u7684\u6700\u9577\u904b\u884c\u6642\u9593\u3002\n- \u6307\u5b9a\u8981\u61c9\u7528\u65bc\u6b64\u81ea\u5b9a\u7fa9\u4f5c\u696d\u7684\u4efb\u4f55\u6a19\u7c64\u7684\u548c\u3002\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nPOST https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/customJobs\n```\n\u8acb\u6c42 JSON \u6b63\u6587\uff1a\n```\n{\n \"displayName\": \"JOB_NAME\",\n \"jobSpec\": {\n \"workerPoolSpecs\": [  {\n  \"machineSpec\": {\n   \"machineType\": MACHINE_TYPE,\n   \"acceleratorType\": ACCELERATOR_TYPE,\n   \"acceleratorCount\": ACCELERATOR_COUNT\n  },\n  \"replicaCount\": REPLICA_COUNT,\n  \"diskSpec\": {\n   \"bootDiskType\": DISK_TYPE,\n   \"bootDiskSizeGb\": DISK_SIZE\n  },\n  // Union field task can be only one of the following:\n  \"containerSpec\": {\n   \"imageUri\": CUSTOM_CONTAINER_IMAGE_URI,\n   \"command\": [   CUSTOM_CONTAINER_COMMAND\n   ],\n   \"args\": [   CUSTOM_CONTAINER_ARGS\n   ]\n  },\n  \"pythonPackageSpec\": {\n   \"executorImageUri\": EXECUTOR_IMAGE_URI,\n   \"packageUris\": [   PYTHON_PACKAGE_URIS\n   ],\n   \"pythonModule\": PYTHON_MODULE,\n   \"args\": [   PYTHON_PACKAGE_ARGS\n   ]\n  }\n  // End of list of possible types for union field task.\n  }\n  // Specify one workerPoolSpec for single replica training, or multiple workerPoolSpecs\n  // for distributed training.\n ],\n \"scheduling\": {\n  \"timeout\": TIMEOUT\n }\n },\n \"labels\": {\n LABEL_NAME_1\": LABEL_VALUE_1,\n LABEL_NAME_2\": LABEL_VALUE_2\n }\n}\n```\n\u5982\u9700\u767c\u9001\u8acb\u6c42\uff0c\u8acb\u9078\u64c7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\uff1a\n **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/customJobs\"\n``` **\u6ce8\u610f** \uff1a\u4ee5\u4e0b\u547d\u4ee4\u5047\u5b9a\u60a8\u5df2\u4f7f\u7528\u60a8\u7684\u7528\u6236\u8cec\u865f\u901a\u904e\u904b\u884c [gcloud init](https://cloud.google.com/sdk/gcloud/reference/init?hl=zh-cn) \u6216 [gcloud auth login](https://cloud.google.com/sdk/gcloud/reference/auth/login?hl=zh-cn) \u767b\u9304`gcloud`CLI\uff0c\u6216\u8005\u4f7f\u7528\u4e86 [Cloud Shell](https://cloud.google.com/shell/docs?hl=zh-cn) \uff0c\u9019\u6703\u4f7f\u60a8\u81ea\u52d5\u767b\u9304`gcloud`CLI\u3002\u60a8\u53ef\u4ee5\u904b\u884c [gcloud auth list](https://cloud.google.com/sdk/gcloud/reference/auth/list?hl=zh-cn) \u4f86\u6aa2\u67e5\u7576\u524d\u6d3b\u8e8d\u7684\u8cec\u865f\u3002\n\u5c07\u8acb\u6c42\u6b63\u6587\u4fdd\u5b58\u5728\u540d\u7232 `request.json` \u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u5f8c\u57f7\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://LOCATION-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/LOCATION/customJobs\" | Select-Object -Expand Content\n```\n\u97ff\u61c9\u5305\u542b\u6709\u95dc\u898f\u7bc4\u7684\u4fe1\u606f\u4ee5\u53ca \u3002\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300aVertex AI \u5feb\u901f\u5165\u9580\uff1a\u4f7f\u7528\u5ba2\u6236\u7aef\u5eab\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Java \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Vertex AI Java API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/java/docs/reference/google-cloud-aiplatform/latest/com.google.cloud.aiplatform.v1?hl=zh-cn) \u3002\n\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/java-docs-samples/blob/HEAD/aiplatform/src/main/java/aiplatform/CreateCustomJobSample.java) \n```\nimport com.google.cloud.aiplatform.v1.AcceleratorType;import com.google.cloud.aiplatform.v1.ContainerSpec;import com.google.cloud.aiplatform.v1.CustomJob;import com.google.cloud.aiplatform.v1.CustomJobSpec;import com.google.cloud.aiplatform.v1.JobServiceClient;import com.google.cloud.aiplatform.v1.JobServiceSettings;import com.google.cloud.aiplatform.v1.LocationName;import com.google.cloud.aiplatform.v1.MachineSpec;import com.google.cloud.aiplatform.v1.WorkerPoolSpec;import java.io.IOException;// Create a custom job to run machine learning training code in Vertex AIpublic class CreateCustomJobSample {\u00a0 public static void main(String[] args) throws IOException {\u00a0 \u00a0 // TODO(developer): Replace these variables before running the sample.\u00a0 \u00a0 String project = \"PROJECT\";\u00a0 \u00a0 String displayName = \"DISPLAY_NAME\";\u00a0 \u00a0 // Vertex AI runs your training application in a Docker container image. A Docker container\u00a0 \u00a0 // image is a self-contained software package that includes code and all dependencies. Learn\u00a0 \u00a0 // more about preparing your training application at\u00a0 \u00a0 // https://cloud.google.com/vertex-ai/docs/training/overview#prepare_your_training_application\u00a0 \u00a0 String containerImageUri = \"CONTAINER_IMAGE_URI\";\u00a0 \u00a0 createCustomJobSample(project, displayName, containerImageUri);\u00a0 }\u00a0 static void createCustomJobSample(String project, String displayName, String containerImageUri)\u00a0 \u00a0 \u00a0 throws IOException {\u00a0 \u00a0 JobServiceSettings settings =\u00a0 \u00a0 \u00a0 \u00a0 JobServiceSettings.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setEndpoint(\"us-central1-aiplatform.googleapis.com:443\")\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 String location = \"us-central1\";\u00a0 \u00a0 // Initialize client that will be used to send requests. This client only needs to be created\u00a0 \u00a0 // once, and can be reused for multiple requests.\u00a0 \u00a0 try (JobServiceClient client = JobServiceClient.create(settings)) {\u00a0 \u00a0 \u00a0 MachineSpec machineSpec =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 MachineSpec.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setMachineType(\"n1-standard-4\")\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setAcceleratorType(AcceleratorType.NVIDIA_TESLA_K80)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setAcceleratorCount(1)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 \u00a0 ContainerSpec containerSpec =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ContainerSpec.newBuilder().setImageUri(containerImageUri).build();\u00a0 \u00a0 \u00a0 WorkerPoolSpec workerPoolSpec =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 WorkerPoolSpec.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setMachineSpec(machineSpec)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setReplicaCount(1)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setContainerSpec(containerSpec)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 \u00a0 CustomJobSpec customJobSpecJobSpec =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 CustomJobSpec.newBuilder().addWorkerPoolSpecs(workerPoolSpec).build();\u00a0 \u00a0 \u00a0 CustomJob customJob =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 CustomJob.newBuilder()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setDisplayName(displayName)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setJobSpec(customJobSpecJobSpec)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 \u00a0 LocationName parent = LocationName.of(project, location);\u00a0 \u00a0 \u00a0 CustomJob response = client.createCustomJob(parent, customJob);\u00a0 \u00a0 \u00a0 System.out.format(\"response: %s\\n\", response);\u00a0 \u00a0 \u00a0 System.out.format(\"Name: %s\\n\", response.getName());\u00a0 \u00a0 }\u00a0 }}\n```\u5728\u5617\u8a66\u6b64\u793a\u4f8b\u4e4b\u524d\uff0c\u8acb\u6309\u7167 [\u300aVertex AI \u5feb\u901f\u5165\u9580\uff1a\u4f7f\u7528\u5ba2\u6236\u7aef\u5eab\u300b](https://cloud.google.com/vertex-ai/docs/start/client-libraries?hl=zh-cn) \u4e2d\u7684 Node.js \u8a2d\u7f6e\u8aaa\u660e\u57f7\u884c\u64cd\u4f5c\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Vertex AI Node.js API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/nodejs/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n\u5982\u9700\u5411 Vertex AI \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/nodejs-docs-samples/blob/HEAD/ai-platform/snippets/create-custom-job.js) \n```\n/**\u00a0* TODO(developer): Uncomment these variables before running the sample.\\\u00a0* (Not necessary if passing values as arguments)\u00a0*/// const customJobDisplayName = 'YOUR_CUSTOM_JOB_DISPLAY_NAME';// const containerImageUri = 'YOUR_CONTAINER_IMAGE_URI';// const project = 'YOUR_PROJECT_ID';// const location = 'YOUR_PROJECT_LOCATION';// Imports the Google Cloud Job Service Client libraryconst {JobServiceClient} = require('@google-cloud/aiplatform');// Specifies the location of the api endpointconst clientOptions = {\u00a0 apiEndpoint: 'us-central1-aiplatform.googleapis.com',};// Instantiates a clientconst jobServiceClient = new JobServiceClient(clientOptions);async function createCustomJob() {\u00a0 // Configure the parent resource\u00a0 const parent = `projects/${project}/locations/${location}`;\u00a0 const customJob = {\u00a0 \u00a0 displayName: customJobDisplayName,\u00a0 \u00a0 jobSpec: {\u00a0 \u00a0 \u00a0 workerPoolSpecs: [\u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 machineSpec: {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 machineType: 'n1-standard-4',\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 acceleratorType: 'NVIDIA_TESLA_K80',\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 acceleratorCount: 1,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 replicaCount: 1,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 containerSpec: {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 imageUri: containerImageUri,\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 command: [],\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 args: [],\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 ],\u00a0 \u00a0 },\u00a0 };\u00a0 const request = {parent, customJob};\u00a0 // Create custom job request\u00a0 const [response] = await jobServiceClient.createCustomJob(request);\u00a0 console.log('Create custom job response:\\n', JSON.stringify(response));}createCustomJob();\n```\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u6216\u66f4\u65b0 Python\uff0c\u8acb\u53c3\u95b1 [\u5b89\u88dd Python \u7248 Vertex AI SDK](https://cloud.google.com/vertex-ai/docs/start/use-vertex-ai-python-sdk?hl=zh-cn) \u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [   Python API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/python/docs/reference/aiplatform/latest?hl=zh-cn) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/googleapis/python-aiplatform/blob/HEAD/samples/model-builder/create_custom_job_with_experiment_autologging_sample.py) \n```\ndef create_custom_job_with_experiment_autologging_sample(\u00a0 \u00a0 project: str,\u00a0 \u00a0 location: str,\u00a0 \u00a0 staging_bucket: str,\u00a0 \u00a0 display_name: str,\u00a0 \u00a0 script_path: str,\u00a0 \u00a0 container_uri: str,\u00a0 \u00a0 service_account: str,\u00a0 \u00a0 experiment: str,\u00a0 \u00a0 experiment_run: Optional[str] = None,) -> None:\u00a0 \u00a0 aiplatform.init(project=project, location=location, staging_bucket=staging_bucket, experiment=experiment)\u00a0 \u00a0 job = aiplatform.CustomJob.from_local_script(\u00a0 \u00a0 \u00a0 \u00a0 display_name=display_name,\u00a0 \u00a0 \u00a0 \u00a0 script_path=script_path,\u00a0 \u00a0 \u00a0 \u00a0 container_uri=container_uri,\u00a0 \u00a0 \u00a0 \u00a0 enable_autolog=True,\u00a0 \u00a0 )\u00a0 \u00a0 job.run(\u00a0 \u00a0 \u00a0 \u00a0 service_account=service_account,\u00a0 \u00a0 \u00a0 \u00a0 experiment=experiment,\u00a0 \u00a0 \u00a0 \u00a0 experiment_run=experiment_run,\u00a0 \u00a0 )\n```\n## \u5f8c\u7e8c\u6b65\u9a5f\n- \u77ad\u89e3\u5982\u4f55\u4f7f\u7528 [TensorBoard Profiler](https://cloud.google.com/vertex-ai/docs/training/tensorboard-profiler?hl=zh-cn) \u627e\u51fa\u8a13\u7df4\u6027\u80fd\u74f6\u9838\uff0c\u4ee5\u66f4\u5feb\u3001\u66f4\u4f4e\u7684\u8cbb\u7528\u8a13\u7df4\u6a21\u578b\u3002\n- \u8acb\u53c3\u95b1 [\u5275\u5efa\u8a13\u7df4\u6d41\u6c34\u7dda](https://cloud.google.com/vertex-ai/docs/training/create-training-pipeline?hl=zh-cn) \uff0c\u77ad\u89e3\u5982\u4f55\u5275\u5efa\u8a13\u7df4\u6d41\u6c34\u7dda\u4ee5\u5728 Vertex AI \u4e2d\u904b\u884c\u81ea\u5b9a\u7fa9\u8a13\u7df4\u61c9\u7528\u3002", "guide": "Vertex AI"}