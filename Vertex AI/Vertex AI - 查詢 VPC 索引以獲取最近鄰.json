{"title": "Vertex AI - \u67e5\u8a62 VPC \u7d22\u5f15\u4ee5\u7372\u53d6\u6700\u8fd1\u9130", "url": "https://cloud.google.com/vertex-ai/docs/vector-search/query-index-vpc?hl=zh-cn", "abstract": "# Vertex AI - \u67e5\u8a62 VPC \u7d22\u5f15\u4ee5\u7372\u53d6\u6700\u8fd1\u9130\n\u5275\u5efa\u7d22\u5f15\u5f8c\uff0c\u60a8\u53ef\u4ee5\u904b\u884c\u67e5\u8a62\u4ee5\u7372\u53d6\u5176\u6700\u8fd1\u9130\u3002\n\u6bcf\u500b `DeployedIndex` \u90fd\u6709\u4e00\u500b `DEPLOYED_INDEX_SERVER_IP` \uff0c\u60a8\u53ef\u4ee5\u901a\u904e\u5217\u51fa `IndexEndpoints` \u9032\u884c\u6aa2\u7d22\u3002\u5982\u9700\u67e5\u8a62 `DeployedIndex` \uff0c\u8acb\u9023\u63a5\u5230\u5176\u5728\u7aef\u53e3 `10000` \u4e0a\u7684 `DEPLOYED_INDEX_SERVER_IP` \uff0c\u4e26\u8abf\u7528 `Match` \u6216 `BatchMatch` \u65b9\u6cd5\u3002\u6b64\u5916\uff0c\u60a8\u9084\u53ef\u4ee5\u4f7f\u7528 `DOC_ID` \u9032\u884c\u67e5\u8a62\u3002\n\u4ee5\u4e0b\u793a\u4f8b\u4f7f\u7528\u958b\u6e90\u5de5\u5177 `grpc_cli` \u5c07 grpc \u8acb\u6c42\u767c\u9001\u5230\u5df2\u90e8\u7f72\u7684\u7d22\u5f15\u670d\u52d9\u5668\u3002\n\u5728\u7b2c\u4e00\u500b\u793a\u4f8b\u4e2d\uff0c\u4f7f\u7528 `Match` \u65b9\u6cd5\u4f86\u767c\u9001\u55ae\u500b\u67e5\u8a62\u3002\n```\n./grpc_cli call ${DEPLOYED_INDEX_SERVER_IP}:10000 google.cloud.aiplatform.container.v1.MatchService.Match '{deployed_index_id: \"${DEPLOYED_INDEX_ID}\", float_val: [-0.1,..]}'\n```\n\u5728\u7b2c\u4e8c\u500b\u793a\u4f8b\u4e2d\uff0c\u5c07\u5169\u500b\u55ae\u7368\u7684\u67e5\u8a62\u7d44\u5408\u5230\u540c\u4e00\u500b `BatchMatch` \u8acb\u6c42\u4e2d\u3002\n```\n./grpc_cli call ${DEPLOYED_INDEX_SERVER_IP}:10000 google.cloud.aiplatform.container.v1.MatchService.BatchMatch 'requests: [{deployed_index_id: \"${DEPLOYED_INDEX_ID}\", requests: [{deployed_index_id: \"${DEPLOYED_INDEX_ID}\", float_val: [-0.1,..]}, {deployed_index_id: \"${DEPLOYED_INDEX_ID}\", float_val: [-0.2,..]}]}]'\n```\n\u60a8\u5fc5\u9808\u5f9e [\u670d\u52d9\u5c0d\u7b49\u4e92\u9023\u7684\u540c\u4e00 VPC](#vpc-network-peering-setup) \u4e2d\u904b\u884c\u7684\u5ba2\u6236\u7aef\u8abf\u7528\u9019\u4e9b API\u3002\n\u5982\u9700\u4f7f\u7528 `DOC_ID` \u904b\u884c\u67e5\u8a62\uff0c\u8acb\u4f7f\u7528\u4ee5\u4e0b\u793a\u4f8b\u3002\n```\n./grpc_cli call ${DEPLOYED_INDEX_SERVER_IP}:10000 google.cloud.aiplatform.container.v1.MatchService.Match \"deployed_index_id:'\"test_index1\"',embedding_id: '\"606431\"'\"\n```\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u5ba2\u6236\u7aef\u5eab\u8aaa\u660e](https://cloud.google.com/apis/docs/client-libraries-explained?hl=zh-cn) \u3002\n\u6309\u7167\u4ee5\u4e0b\u8aaa\u660e\u5f9e\u63a7\u5236\u6aaf\u67e5\u8a62 VPC \u7d22\u5f15\u3002- \u5728 Google Cloud \u63a7\u5236\u6aaf\u7684 Vertex AI \u90e8\u5206\u4e2d\uff0c\u524d\u5f80 **\u90e8\u7f72\u548c\u4f7f\u7528** \u90e8\u5206\u3002\u9078\u64c7 **Vector Search** [\u524d\u5f80 Vector Search](https://console.cloud.google.com/vertex-ai/matching-engine/indexes?hl=zh-cn) \n- \u9078\u64c7\u8981\u67e5\u8a62\u7684 VPC \u7d22\u5f15\u3002\u6b64\u6642\u6703\u6253\u958b **\u7d22\u5f15\u4fe1\u606f** \u9801\u9762\u3002\n- \u5411\u4e0b\u6efe\u52d5\u5230 **\u5df2\u90e8\u7f72\u7684\u7d22\u5f15** \u90e8\u5206\uff0c\u7136\u5f8c\u9078\u64c7\u8981\u67e5\u8a62\u7684\u5df2\u90e8\u7f72\u7d22\u5f15\u3002\u6b64\u6642\u6703\u6253\u958b **\u5df2\u90e8\u7f72\u7684\u7d22\u5f15\u4fe1\u606f** \u9801\u9762\u3002\n- \u5728 **\u67e5\u8a62\u7d22\u5f15** \u90e8\u5206\u4e2d\uff0c\u9078\u64c7\u67e5\u8a62\u53c3\u6578\u3002\u60a8\u53ef\u4ee5\u9078\u64c7\u6309\u5411\u91cf\u6216\u7279\u5b9a\u6578\u64da\u9ede\u9032\u884c\u67e5\u8a62\u3002\n- \u4f7f\u7528\u958b\u6e90\u5de5\u5177 grpc_cli \u6216\u4f7f\u7528 Python \u7248 Vertex AI SDK \u57f7\u884c\u67e5\u8a62\u3002", "content": "## \u5f8c\u7e8c\u6b65\u9a5f\n- \u77ad\u89e3\u5982\u4f55 [\u66f4\u65b0\u548c\u91cd\u5efa\u7d22\u5f15](https://cloud.google.com/vertex-ai/docs/vector-search/update-rebuild-index?hl=zh-cn) \n- \u77ad\u89e3\u5982\u4f55 [\u904e\u6ffe\u5411\u91cf\u5339\u914d](https://cloud.google.com/vertex-ai/docs/vector-search/filtering?hl=zh-cn) \n- \u77ad\u89e3\u5982\u4f55 [\u76e3\u63a7\u7d22\u5f15](https://cloud.google.com/vertex-ai/docs/vector-search/monitor?hl=zh-cn)", "guide": "Vertex AI"}