{"title": "Documentation - Backup API overview", "url": "https://cloud.google.com/distributed-cloud/hosted/docs/latest/gdch/overview", "abstract": "# Documentation - Backup API overview\nKubernetes was designed for extensibility. You can add new APIs such as the Backup, GKE Backup Agent, and Backup Control Plane APIs to a Kubernetes cluster. These APIs conform to a uniform API model, the Kubernetes Resource Model (KRM).\nThese APIs use Kubernetes custom resources and rely on the KRM. The APIs are used to manage the lifecycle of backups, and to create backup repositories, policies, and plans.\n", "content": "## Service endpoints\nThe following URLs are the API endpoints for the Backup KRM API:\n```\nhttps://GDCH_API_SERVER_ENDPOINT/apis/backup.gdc.goog/v1\n```\nThe following URL is the API endpoint for the GKE Backup Agent API:\n```\nhttps://GDCH_API_SERVER_ENDPOINT/apis/gkebackup.gke.io/v1\n```\nThe following URL is the API endpoint for the Backup Control Plane API:\n```\nhttps://GDCH_API_SERVER_ENDPOINT/apis/backup.gdc.goog/v1\n```\nReplace `` with the endpoint of the GDCH API server.\n## Discovery document\nUse the `kubectl proxy --port=8001` command to open a proxy to the API server on your local machine. From there, you can access the discovery document at one of the following URLs:\n- `http://127.0.0.1:8001/apis/backup.gdc.goog/v1`\n- `http://127.0.0.1:8001/apis/gkebackup.gke.io/v1`## Example BackupPlan resource\nHere is an example of a `BackupPlan` resource:\n```\n\u00a0 \u00a0 apiVersion: backup.gdc.goog/v1\u00a0 \u00a0 kind: BackupPlan\u00a0 \u00a0 metadata:\u00a0 \u00a0 \u00a0 name: backup-plan\u00a0 \u00a0 \u00a0 namespace: default\u00a0 \u00a0 spec:\u00a0 \u00a0 \u00a0 clusterName: \"cluster-sample\"\u00a0 \u00a0 \u00a0 backupSchedule:\u00a0 \u00a0 \u00a0 \u00a0 cronSchedule: \"*/30 * * * *\"\u00a0 \u00a0 \u00a0 \u00a0 paused: false\u00a0 \u00a0 \u00a0 backupConfig:\u00a0 \u00a0 \u00a0 \u00a0 backupScope:\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 selectedNamespaces:\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 namespaces: [\"nginx\"]\u00a0 \u00a0 \u00a0 \u00a0 backupRepository: \"backup-repository\"\u00a0 \u00a0 \u00a0 retentionPolicy:\u00a0 \u00a0 \u00a0 \u00a0 backupDeleteLockDays: 10\u00a0 \u00a0 \u00a0 \u00a0 backupRetainDays: 10\n```\n## Example ProtectedApplication resource\nHere is an example of a `ProtectedApplication` resource:\n```\n\u00a0 \u00a0 apiVersion: gkebackup.gke.io/v1\u00a0 \u00a0 kind: ProtectedApplication\u00a0 \u00a0 metadata:\u00a0 \u00a0 \u00a0 name: protected-application-test\u00a0 \u00a0 \u00a0 namespace: applications\u00a0 \u00a0 spec:\u00a0 \u00a0 \u00a0 applicationName: protectedApplication\u00a0 \u00a0 \u00a0 resourceSelection:\u00a0 \u00a0 \u00a0 \u00a0 type: Selector\u00a0 \u00a0 \u00a0 \u00a0 selector:\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 matchLabels:\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 app: protected\u00a0 \u00a0 \u00a0 components:\u00a0 \u00a0 \u00a0 \u00a0 - name: protect-application-deployment\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 resourceKind: Deployment\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 resourceNames:\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 - protected-application-deployment\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 strategy:\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 type: BackupAllRestoreAll\n```\n## Example BackupRepositoryManager resource\nHere is an example of a `BackupRepositoryManager` resource:\n```\napiVersion: backup.gdc.goog/v1kind: BackupRepositoryManagermetadata:\u00a0 name: backup-repository-gcsspec:\u00a0 readWriteCluster:\u00a0 \u00a0 name: user-1-user\u00a0 \u00a0 namespace: user-1-user-cluster\u00a0 backupRepositorySpec:\u00a0 \u00a0 secretReference:\u00a0 \u00a0 \u00a0 namespace: \"gcs-secret-ns\"\u00a0 \u00a0 \u00a0 name: \"gcs-secret\"\u00a0 \u00a0 endpoint: \"http://storage.googleapis.com\"\u00a0 \u00a0 type: \"S3\"\u00a0 \u00a0 s3Options:\u00a0 \u00a0 \u00a0 bucket: \"bucket-name\"\u00a0 \u00a0 \u00a0 region: \"us-east-1\"\u00a0 \u00a0 \u00a0 forcePathStyle: true\u00a0 \u00a0 importPolicy: \"ReadWrite\"\n```", "guide": "Documentation"}