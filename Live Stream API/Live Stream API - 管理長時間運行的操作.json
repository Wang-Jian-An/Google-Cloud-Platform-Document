{"title": "Live Stream API - \u7ba1\u7406\u9577\u6642\u9593\u904b\u884c\u7684\u64cd\u4f5c", "url": "https://cloud.google.com/livestream/docs/how-to/manage-long-running-operations?hl=zh-cn", "abstract": "# Live Stream API - \u7ba1\u7406\u9577\u6642\u9593\u904b\u884c\u7684\u64cd\u4f5c\n\u672c\u9801\u9762\u4ecb\u7d39\u5982\u4f55\u7ba1\u7406 Live Stream API \u9577\u6642\u9593\u904b\u884c\u7684\u64cd\u4f5c (LRO) \u7684\u751f\u547d\u9031\u671f\u3002\n\u5982\u679c\u65b9\u6cd5\u8abf\u7528\u53ef\u80fd\u9700\u8981\u5f88\u9577\u6642\u9593\u624d\u80fd\u5b8c\u6210\uff0c\u7cfb\u7d71\u5c31\u6703\u8fd4\u56de [\u9577\u6642\u9593\u904b\u884c\u7684\u64cd\u4f5c](https://google.aip.dev/151) \u3002\u4f8b\u5982\uff0c\u5728\u60a8\u6bcf\u6b21\u8abf\u7528 [projects.locations.inputs.create](https://cloud.google.com/livestream/docs/reference/rest/v1/projects.locations.inputs/create?hl=zh-cn) \u6642\uff0cLive Stream API \u90fd\u6703\u5275\u5efa\u4e00\u500b LRO\u3002LRO \u6703\u8ddf\u8e64\u8655\u7406\u4f5c\u696d\u7684\u72c0\u614b\u3002\n\u60a8\u53ef\u4ee5\u4f7f\u7528 Live Stream API \u63d0\u4f9b\u7684 [projects.locations.operations \u65b9\u6cd5](https://cloud.google.com/livestream/docs/reference/rest/v1/projects.locations.operations?hl=zh-cn) \u4f86\u6aa2\u67e5 LRO \u7684 [\u72c0\u614b](#get-operation) \u3002\u60a8\u9084\u53ef\u4ee5 [\u5217\u51fa](#list-operations) \u3001 [\u53d6\u6d88](#cancel-operation) \u6216 [\u522a\u9664](#delete-operation) LRO\u3002\nLRO \u5728 Google Cloud \u9805\u76ee\u548c\u4f4d\u7f6e\u7d1a\u5225\u9032\u884c\u7ba1\u7406\u3002\u5411 API \u767c\u51fa\u8acb\u6c42\u6642\uff0c\u8acb\u5305\u542b Google Cloud \u9805\u76ee\u4ee5\u53ca LRO \u7684\u904b\u884c\u4f4d\u7f6e\u3002\n\u5728 LR \u5b8c\u6210\u4e4b\u5f8c\uff0cLRO \u7684\u8a18\u9304\u6703\u4fdd\u7559\u5927\u7d04 30 \u5929\uff0c\u4e5f\u5c31\u662f\u8aaa\uff0c\u5728\u9019\u6bb5\u6642\u9593\u4e4b\u5f8c\uff0c\u60a8\u5c07\u7121\u6cd5\u518d\u67e5\u770b\u6216\u5217\u51fa LRO\u3002\n", "content": "## \u7372\u53d6\u6709\u95dc\u9577\u6642\u9593\u904b\u884c\u7684\u64cd\u4f5c\u7684\u8a73\u7d30\u4fe1\u606f\n\u5047\u8a2d\u60a8 [\u5275\u5efa\u4e86\u4e00\u500b\u8f38\u5165\u7aef\u9ede](https://cloud.google.com/livestream/docs/how-to/create-input-endpoints?hl=zh-cn) \u3002\u97ff\u61c9\u4e2d\u7684 `name` \u503c\u8868\u660e Live Stream API \u5275\u5efa\u4e86\u4e00\u500b\u540d\u7232 `projects/` `` `/locations/` `` `/operations/` `` \u7684 LRO\u3002\n\u5982\u9700\u6aa2\u67e5\u662f\u5426\u5df2\u5275\u5efa\u8f38\u5165\u7aef\u9ede\uff0c\u8acb\u4f7f\u7528 [projects.locations.operations.get](https://cloud.google.com/livestream/docs/reference/rest/v1/projects.locations.operations/get?hl=zh-cn) \u65b9\u6cd5\u3002\u5982\u679c\u97ff\u61c9\u5305\u542b `\"done\": false` \uff0c\u8acb\u91cd\u8907\u8a72\u547d\u4ee4\uff0c\u76f4\u5230\u97ff\u61c9\u5305\u542b `\"done\": true` \u3002\u6b64\u64cd\u4f5c\u53ef\u80fd\u9700\u8981\u5e7e\u5206\u9418\u624d\u80fd\u5b8c\u6210\u3002\n\u60a8\u9084\u53ef\u4ee5\u901a\u904e [\u5217\u51fa\u9577\u6642\u9593\u904b\u884c\u7684\u64cd\u4f5c](#list-operations) \u4f86\u6aa2\u7d22 LRO \u540d\u7a31\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a\n- ``\uff1a\u60a8\u7684 Google Cloud \u9805\u76ee\u7de8\u865f\uff1b\u4f4d\u65bc [IAM \u8a2d\u7f6e](https://console.cloud.google.com/iam-admin/settings?hl=zh-cn) \u9801\u9762\u4e0a\u7684 **\u9805\u76ee\u7de8\u865f** \u5b57\u6bb5\u4e2d\n- ``\uff1a\u8f38\u5165\u7aef\u9ede\u6240\u5728\u7684\u4f4d\u7f6e\uff1b\u8acb\u4f7f\u7528 [\u652f\u6301\u7684\u5340\u57df](https://cloud.google.com/livestream/docs/locations?hl=zh-cn) \u4e4b\u4e00\n- ``\uff1a\u64cd\u4f5c\u7684\u6a19\u8b58\u7b26\n\u5982\u9700\u767c\u9001\u60a8\u7684\u8acb\u6c42\uff0c\u8acb\u5c55\u958b\u4ee5\u4e0b\u9078\u9805\u4e4b\u4e00\uff1a\n\u60a8\u61c9\u8a72\u6536\u5230\u985e\u4f3c\u4ee5\u4e0b\u5167\u5bb9\u7684 JSON \u97ff\u61c9\uff1a\n```\n{\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION/operations/OPERATION_ID\",\n \"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.video.livestream.v1.OperationMetadata\",\n \"createTime\": CREATE_TIME,\n \"endTime\": END_TIME,\n \"target\": \"projects/PROJECT_NUMBER/locations/LOCATION/inputs/INPUT_ID\",\n \"verb\": \"create\",\n \"requestedCancellation\": false,\n \"apiVersion\": \"v1\"\n },\n \"done\": true,\n \"response\": {\n \"@type\": \"type.googleapis.com/google.cloud.video.livestream.v1.Input\",\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION/inputs/INPUT_ID\",\n \"createTime\": CREATE_TIME,\n \"updateTime\": UPDATE_TIME,\n \"type\": \"RTMP_PUSH\",\n \"uri\": INPUT_STREAM_URI, # For example, \"rtmp://1.2.3.4/live/b8ebdd94-c8d9-4d88-a16e-b963c43a953b\",\n \"tier\": \"HD\"\n }\n}\n```\n## \u5217\u51fa\u9577\u6642\u9593\u904b\u884c\u7684\u64cd\u4f5c\n\u5982\u9700\u5217\u51fa\u7d66\u5b9a\u4f4d\u7f6e\u4e2d\u7684\u6240\u6709\u64cd\u4f5c\uff0c\u8acb\u4f7f\u7528 [projects.locations.operations.list](https://cloud.google.com/livestream/docs/reference/rest/v1/projects.locations.operations/list?hl=zh-cn) \u65b9\u6cd5\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a\n- ``\uff1a\u60a8\u7684 Google Cloud \u9805\u76ee\u7de8\u865f\uff1b\u4f4d\u65bc [IAM \u8a2d\u7f6e](https://console.cloud.google.com/iam-admin/settings?hl=zh-cn) \u9801\u9762\u4e0a\u7684 **\u9805\u76ee\u7de8\u865f** \u5b57\u6bb5\u4e2d\n- ``\uff1a\u64cd\u4f5c\u7684\u4f4d\u7f6e\uff1b\u8acb\u4f7f\u7528 [\u652f\u6301\u7684\u5340\u57df](https://cloud.google.com/livestream/docs/locations?hl=zh-cn) \u4e4b\u4e00\n\u5982\u9700\u767c\u9001\u60a8\u7684\u8acb\u6c42\uff0c\u8acb\u5c55\u958b\u4ee5\u4e0b\u9078\u9805\u4e4b\u4e00\uff1a\n\u60a8\u61c9\u8a72\u6536\u5230\u985e\u4f3c\u4ee5\u4e0b\u5167\u5bb9\u7684 JSON \u97ff\u61c9\uff1a\n```\n{\n \"operations\": [ {\n  \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION/operations/OPERATION_ID\",\n  \"metadata\": {\n  \"@type\": \"type.googleapis.com/google.cloud.livestream.v1.OperationMetadata\",\n  \"createTime\": CREATE_TIME,\n  \"endTime\": END_TIME,\n  \"target\": \"projects/PROJECT_NUMBER/locations/LOCATION/inputs/INPUT_ID,\n  \"verb\": \"create\",\n  \"requestedCancellation\": false,\n  \"apiVersion\": \"v1\"\n  },\n  \"done\": false\n },\n {\n  \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION/operations/my-other-operation\",\n  \"metadata\": {\n  \"@type\": \"type.googleapis.com/google.cloud.livestream.v1.OperationMetadata\",\n  \"createTime\": CREATE_TIME,\n  \"endTime\": END_TIME,\n  \"target\": \"projects/PROJECT_NUMBER/locations/LOCATION/inputs/my-other-input\",\n  \"verb\": \"create\",\n  \"requestedCancellation\": false,\n  \"apiVersion\": \"v1\"\n  },\n  \"done\": true,\n  \"response\": {\n  \"@type\": \"type.googleapis.com/google.cloud.livestream.v1.Input\",\n  \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION/inputs/my-other-input\",\n  \"createTime\": CREATE_TIME,\n  \"updateTime\": UPDATE_TIME,\n  \"type\": \"RTMP_PUSH\",\n  \"uri\": INPUT_STREAM_URI,\n  \"tier\": \"HD\"\n  }\n }\n ]\n}\n```\n## \u53d6\u6d88\u9577\u6642\u9593\u904b\u884c\u7684\u64cd\u4f5c\n\u5982\u9700\u5c0d\u9577\u6642\u9593\u904b\u884c\u7684\u64cd\u4f5c\u5553\u52d5\u7570\u6b65\u53d6\u6d88\uff0c\u8acb\u4f7f\u7528 [projects.locations.operations.cancel](https://cloud.google.com/livestream/docs/reference/rest/v1/projects.locations.operations/cancel?hl=zh-cn) \u65b9\u6cd5\u3002\u670d\u52d9\u5668\u6703\u76e1\u53ef\u80fd\u53d6\u6d88\u64cd\u4f5c\uff0c\u4f46\u4e0d\u80fd\u4fdd\u8b49\u4e00\u5b9a\u6210\u529f\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a\n- ``\uff1a\u60a8\u7684 Google Cloud \u9805\u76ee\u7de8\u865f\uff1b\u4f4d\u65bc [IAM \u8a2d\u7f6e](https://console.cloud.google.com/iam-admin/settings?hl=zh-cn) \u9801\u9762\u4e0a\u7684 **\u9805\u76ee\u7de8\u865f** \u5b57\u6bb5\u4e2d\n- ``\uff1a\u64cd\u4f5c\u7684\u4f4d\u7f6e\uff1b\u8acb\u4f7f\u7528 [\u53d7\u652f\u6301\u7684\u5340\u57df](https://cloud.google.com/livestream/docs/locations?hl=zh-cn) \u4e4b\u4e00\n- ``\uff1a\u64cd\u4f5c\u7684\u6a19\u8b58\u7b26\n\u5982\u9700\u767c\u9001\u60a8\u7684\u8acb\u6c42\uff0c\u8acb\u5c55\u958b\u4ee5\u4e0b\u9078\u9805\u4e4b\u4e00\uff1a\n```\n{}\n```\n## \u522a\u9664\u9577\u6642\u9593\u904b\u884c\u7684\u64cd\u4f5c\n\u5982\u9700\u522a\u9664\u5df2\u5b8c\u6210\u7684\u9577\u6642\u9593\u904b\u884c\u7684\u64cd\u4f5c\uff0c\u8acb\u4f7f\u7528 [projects.locations.operations.delete](https://cloud.google.com/livestream/docs/reference/rest/v1/projects.locations.operations/delete?hl=zh-cn) \u65b9\u6cd5\u3002\u6b64\u65b9\u6cd5\u8868\u793a\u5ba2\u6236\u7aef\u4e0d\u518d\u95dc\u6ce8\u64cd\u4f5c\u7d50\u679c\u3002\u5b83\u4e0d\u6703\u53d6\u6d88\u64cd\u4f5c\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a\n- ``\uff1a\u60a8\u7684 Google Cloud \u9805\u76ee\u7de8\u865f\uff1b\u4f4d\u65bc [IAM \u8a2d\u7f6e](https://console.cloud.google.com/iam-admin/settings?hl=zh-cn) \u9801\u9762\u4e0a\u7684 **\u9805\u76ee\u7de8\u865f** \u5b57\u6bb5\u4e2d\n- ``\uff1a\u64cd\u4f5c\u7684\u4f4d\u7f6e\uff1b\u8acb\u4f7f\u7528 [\u53d7\u652f\u6301\u7684\u5340\u57df](https://cloud.google.com/livestream/docs/locations?hl=zh-cn) \u4e4b\u4e00\n- ``\uff1a\u64cd\u4f5c\u7684\u6a19\u8b58\u7b26\n\u5982\u9700\u767c\u9001\u60a8\u7684\u8acb\u6c42\uff0c\u8acb\u5c55\u958b\u4ee5\u4e0b\u9078\u9805\u4e4b\u4e00\uff1a\n```\n{}\n```", "guide": "Live Stream API"}