{"title": "Live Stream API - Configure a private pool", "url": "https://cloud.google.com/livestream/docs/how-to/vpc/configure-private-pool", "abstract": "# Live Stream API - Configure a private pool\nProcessing a live stream requires managing multiple components that perform tasks like ingestion, transcoding, and multiplexing. The Live Stream API manages these components and resources internally using . A pool is a processing unit allocated for each Google Cloud project per region and is shared between all channels in a given region.\nBy default, when you create an [Input](/livestream/docs/reference/rest/v1/projects.locations.inputs) resource, you are given an endpoint URI containing a public IP address where you can send your input streams. Whether you stream from an on-premises network or from a Google Cloud virtual private cloud (VPC) network, the data traverses the public internet to reach the live stream service endpoint.\nAs an alternative, you can set up private services access to the live stream service. Private services access is a secure, private connection between your Google Cloud virtual private cloud (VPC) network and Google-managed or third-party services. This connection enables VM instances in your VPC network to communicate with these services using internal IP addresses, without exposing traffic to the public internet. When you enable private services access in the Live Stream API, an internal IP address is reserved from your VPC network to be used as the input endpoint. This has the following advantages:\n- **Improved security** : Private services access allows you to connect to Live Stream API input endpoints without exposing your traffic to the public internet. This can help to improve your security posture and reduce your risk of a data breach.\n- **Increased performance** : Private services access can improve the performance of your connections by avoiding the public internet. This can be especially beneficial to achieve lower latency and higher throughput.\nYou can also pair private services access with either Cloud Interconnect or Cloud VPN to provide an end-to-end private connection between your on-premises network and the live stream service.\n", "content": "## Before you begin\nTo configure a private pool, complete the following prerequisites:\n- You must have an [existing VPC network](/vpc/docs/create-modify-vpc-networks#create-custom-network) that you can use to connect to the service producer's network. VM instances must use this VPC network to connect to services over a private connection.\n- You must [configure private services access](/livestream/docs/how-to/vpc/configure-private-services-access) on the VPC network.\n- All channels in the region must be [stopped](/livestream/docs/how-to/create-channels#stop_channel) , otherwise the Live Stream API rejects the request to update the pool's peered network.\n- All channels in the region cannot be started while the pool is being updated.## Configure a private pool\n- Make sure a default pool is already created. The default pool for a location is created when you create the first [Input](/livestream/docs/reference/rest/v1/projects.locations.inputs) resource.Before using any of the request data, make the following replacements:- ``: your Google Cloud project number; this is located in the **Project number** field on the [IAM Settings](https://console.cloud.google.com/iam-admin/settings) page\n- ``: use one of the [supported regions](/livestream/docs/locations) in which  you have already created an input\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION/pools/default\",\n \"createTime\": CREATE_TIME,\n \"updateTime\": UPDATE_TIME\n}\n```- Update the pool with the peered network name.Before using any of the request data, make the following replacements:- ``: your Google Cloud project number; this is located in the **Project number** field on the [IAM Settings](https://console.cloud.google.com/iam-admin/settings) page\n- ``: the location of the default pool; use one  of the [supported regions](/livestream/docs/locations) \n- ``: the user-defined identifier for the network  in the current project to peer with the service\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION/operations/OPERATION_ID\",\n \"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.video.livestream.v1.OperationMetadata\",\n \"createTime\": CREATE_TIME,\n \"target\": \"projects/PROJECT_NUMBER/locations/LOCATION/pools/default\",\n \"verb\": \"update\",\n \"requestedCancellation\": false,\n \"apiVersion\": \"v1\"\n },\n \"done\": false\n}\n```\nThe request initiates a long-running operation. Copy the returned to use in the next step.\n- Use the [projects.locations.operations.get](/livestream/docs/reference/rest/v1/projects.locations.operations/get) method to check if the update completed. Updating the pool might take up to 30 minutes to complete. If the response contains `\"done: false\"` , repeat the request until the response contains `\"done: true\"` .Before using any of the request data, make the following replacements:- ``: your Google Cloud project number; this is located in the **Project number** field on the [IAM Settings](https://console.cloud.google.com/iam-admin/settings) page\n- ``: the location where your resource is  located; use one of the [supported regions](/livestream/docs/locations) \n- ``: the identifier for the operation\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION/operations/OPERATION_ID\",\n \"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.video.livestream.v1.OperationMetadata\",\n \"createTime\": CREATE_TIME,\n \"endTime\": END_TIME,\n \"target\": \"projects/PROJECT_NUMBER/locations/LOCATION/pools/default\",\n \"verb\": \"update\",\n \"requestedCancellation\": false,\n \"apiVersion\": \"v1\"\n },\n \"done\": true,\n \"response\": {\n \"@type\": \"type.googleapis.com/google.cloud.video.livestream.v1.Pool\",\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION/pools/default\",\n \"createTime\": CREATE_TIME,\n \"updateTime\": UPDATE_TIME,\n \"networkConfig\": {\n  \"peeredNetwork\": \"projects/PROJECT_NUMBER/global/networks/NETWORK\"\n }\n }\n```After the update, all URIs for existing (and future) input endpoints in the region are internal IP addresses reserved from the VPC network provided. [List the input endpoints](/livestream/docs/how-to/create-input-endpoints#list_input_endpoints) to see the updated URIs.\n**Note:** After an update, starting the first channel in a region takes longer than usual.\n## Switching to the public pool\nTo revert back to the public pool, provide an empty string as the peered network name in the update pool request.\nBefore using any of the request data, make the following replacements:\n- ``: your Google Cloud project number; this is located in the **Project number** field on the [IAM Settings](https://console.cloud.google.com/iam-admin/settings) page\n- ``: the location of the default pool; use one  of the [supported regions](/livestream/docs/locations) \nTo send your request, expand one of these options:\nYou should receive a JSON response similar to the following:\n```\n{\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION/operations/OPERATION_ID\",\n \"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.video.livestream.v1.OperationMetadata\",\n \"createTime\": CREATE_TIME,\n \"target\": \"projects/PROJECT_NUMBER/locations/LOCATION/pools/default\",\n \"verb\": \"update\",\n \"requestedCancellation\": false,\n \"apiVersion\": \"v1\"\n },\n \"done\": false\n}\n```\nYou can again use the [projects.locations.operations.get](/livestream/docs/reference/rest/v1/projects.locations.operations/get) method to check if the update completed.\n**Note:** After an update, starting the first channel in a region takes longer than usual.", "guide": "Live Stream API"}