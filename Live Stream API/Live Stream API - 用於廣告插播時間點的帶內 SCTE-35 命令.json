{"title": "Live Stream API - \u7528\u65bc\u5ee3\u544a\u63d2\u64ad\u6642\u9593\u9ede\u7684\u5e36\u5167 SCTE-35 \u547d\u4ee4", "url": "https://cloud.google.com/livestream/docs/scte-ad-break-markers?hl=zh-cn", "abstract": "# Live Stream API - \u7528\u65bc\u5ee3\u544a\u63d2\u64ad\u6642\u9593\u9ede\u7684\u5e36\u5167 SCTE-35 \u547d\u4ee4\nLive Stream API \u652f\u6301\u5169\u7a2e\u5728\u76f4\u64ad\u4e2d\u63d2\u5165\u5ee3\u544a\u63d2\u64ad\u6642\u9593\u9ede\u7684\u65b9\u6cd5\uff1a\n- \u5275\u5efa [\u5ee3\u544a\u63d2\u64ad\u6e20\u9053\u4e8b\u4ef6](https://cloud.google.com/livestream/docs/how-to/create-channel-events?hl=zh-cn#ad-break-event) \n- \u63d2\u5165\u5e36\u5167 SCTE-35 \u547d\u4ee4\n\u672c\u9801\u4ecb\u7d39\u4e86\u7528\u65bc\u5ee3\u544a\u63d2\u64ad\u6642\u9593\u9ede\u7684\u5e36\u5167 SCTE-35 \u547d\u4ee4\u3002\n\u5ee3\u544a\u6a19\u8a18\u651c\u5e36\u5728\u8f38\u5165\u6d41\u4e0a\uff0c\u4e26\u4e14\u5fc5\u9808\u7b26\u5408 SCTE-35 \u898f\u7bc4 [Digital Program Insert Cueing Message For Cable](https://www.scte.org/standards/library/catalog/scte-35-digital-program-insertion-cueing-message/) \u3002\u53ef\u4ee5\u4f7f\u7528\u7b49\u65bc `0x86` \u7684\u57fa\u672c\u6578\u64da\u6d41\u985e\u578b\u5728 MPEG-TS \u57fa\u672c\u6578\u64da\u6d41\u4e2d\u50b3\u8f38 SCTE-35 \u6578\u64da\u3002\u53ea\u6709 SRT \u8f38\u5165\u6d41\u53ef\u7528\u65bc\u6ce8\u5165\u5e36\u5167 SCTE-35 \u547d\u4ee4\u3002\nLive Stream API \u6703\u89e3\u6790 TS \u57fa\u672c\u8996\u983b\u6d41\u4e2d\u7684\u6240\u6709 PID\u3002\n\u5728 SCTE-35 \u547d\u4ee4\u5217\u8868\u4e2d\uff0cLive Stream API \u652f\u6301 SCTE-35 \u4e2d\u5b9a\u7fa9\u7684 `splice_insert` \u547d\u4ee4\u3002\n", "content": "## HLS \u6e05\u55ae\u6587\u4ef6\n\u5c0d\u65bc HLS\uff0c\u6bcf\u500b\u63a5\u5408\u547d\u4ee4\u90fd\u6703\u5728\u6e05\u55ae\u64ad\u653e\u5217\u8868\u4e2d\u751f\u6210\u4e00\u500b `#EXT-X-CUE-OUT/#EXT-X-CUE-OUT-CONT/#EXT-X-CUE-IN` \u6a19\u8a18\u3002splice \u547d\u4ee4\u9084\u6703\u751f\u6210\u4e00\u500b `#EXT-OATCLS-SCTE35` \u689d\u76ee\uff0c\u5176\u4e2d\u5305\u542b\u4ee5 base64 \u683c\u5f0f\u7de8\u78bc\u7684 SCTE-35 \u6578\u64da\uff0c\u5982\u4e0b\u6240\u793a\uff1a\n```\n#EXT-X-PROGRAM-DATE-TIME:2023-05-19T17:44:44.143Z#EXTINF:4.000000720p60_h264_fmp4-0000000007.m4s#EXT-X-PROGRAM-DATE-TIME:2023-05-19T17:44:48.143Z#EXTINF:1.212833720p60_h264_fmp4-0000000008.m4s#EXT-OATCLS-SCTE35:/DAlAAAAAAAAAP/wFAVDE1agf+//yBysA/4APcxQAAAAAAAAXhEvvQ==#EXT-X-CUE-OUT:45.000000#EXT-X-PROGRAM-DATE-TIME:2023-05-19T17:44:49.356Z#EXTINF:2.787167720p60_h264_fmp4-0000000009.m4s#EXT-X-CUE-OUT-CONT:ElapsedTime=2.787167,Duration=45.000000,SCTE35=/DAlAAAAAAAAAP/wFAVDE1agf+//yBysA/4APcxQAAAAAAAAXhEvvQ==#EXT-X-PROGRAM-DATE-TIME:2023-05-19T17:44:52.143Z#EXTINF:4.000000720p60_h264_fmp4-0000000010.m4s#EXT-X-CUE-OUT-CONT:ElapsedTime=6.787167,Duration=45.000000,SCTE35=/DAlAAAAAAAAAP/wFAVDE1agf+//yBysA/4APcxQAAAAAAAAXhEvvQ==#EXT-X-PROGRAM-DATE-TIME:2023-05-19T17:44:56.143Z#EXTINF:4.000000720p60_h264_fmp4-0000000011.m4s#EXT-X-CUE-OUT-CONT:ElapsedTime=10.787167,Duration=45.000000,SCTE35=/DAlAAAAAAAAAP/wFAVDE1agf+//yBysA/4APcxQAAAAAAAAXhEvvQ==#EXT-X-PROGRAM-DATE-TIME:2023-05-19T17:45:00.143Z#EXTINF:4.000000720p60_h264_fmp4-0000000012.m4s#EXT-X-CUE-OUT-CONT:ElapsedTime=14.787167,Duration=45.000000,SCTE35=/DAlAAAAAAAAAP/wFAVDE1agf+//yBysA/4APcxQAAAAAAAAXhEvvQ==#EXT-X-PROGRAM-DATE-TIME:2023-05-19T17:45:04.143Z#EXTINF:4.000000720p60_h264_fmp4-0000000013.m4s#EXT-X-CUE-OUT-CONT:ElapsedTime=18.787167,Duration=45.000000,SCTE35=/DAlAAAAAAAAAP/wFAVDE1agf+//yBysA/4APcxQAAAAAAAAXhEvvQ==#EXT-X-PROGRAM-DATE-TIME:2023-05-19T17:45:08.143Z#EXTINF:4.000000720p60_h264_fmp4-0000000014.m4s#EXT-X-CUE-OUT-CONT:ElapsedTime=22.787167,Duration=45.000000,SCTE35=/DAlAAAAAAAAAP/wFAVDE1agf+//yBysA/4APcxQAAAAAAAAXhEvvQ==#EXT-X-PROGRAM-DATE-TIME:2023-05-19T17:45:12.143Z#EXTINF:4.000000720p60_h264_fmp4-0000000015.m4s#EXT-X-CUE-OUT-CONT:ElapsedTime=26.787167,Duration=45.000000,SCTE35=/DAlAAAAAAAAAP/wFAVDE1agf+//yBysA/4APcxQAAAAAAAAXhEvvQ==#EXT-X-PROGRAM-DATE-TIME:2023-05-19T17:45:16.143Z#EXTINF:4.000000720p60_h264_fmp4-0000000016.m4s#EXT-X-CUE-OUT-CONT:ElapsedTime=30.787167,Duration=45.000000,SCTE35=/DAlAAAAAAAAAP/wFAVDE1agf+//yBysA/4APcxQAAAAAAAAXhEvvQ==#EXT-X-PROGRAM-DATE-TIME:2023-05-19T17:45:20.143Z#EXTINF:4.000000720p60_h264_fmp4-0000000017.m4s#EXT-X-CUE-OUT-CONT:ElapsedTime=34.787167,Duration=45.000000,SCTE35=/DAlAAAAAAAAAP/wFAVDE1agf+//yBysA/4APcxQAAAAAAAAXhEvvQ==#EXT-X-PROGRAM-DATE-TIME:2023-05-19T17:45:24.143Z#EXTINF:4.000000720p60_h264_fmp4-0000000018.m4s#EXT-X-CUE-OUT-CONT:ElapsedTime=38.787167,Duration=45.000000,SCTE35=/DAlAAAAAAAAAP/wFAVDE1agf+//yBysA/4APcxQAAAAAAAAXhEvvQ==#EXT-X-PROGRAM-DATE-TIME:2023-05-19T17:45:28.143Z#EXTINF:4.000000720p60_h264_fmp4-0000000019.m4s#EXT-X-CUE-OUT-CONT:ElapsedTime=42.787167,Duration=45.000000,SCTE35=/DAlAAAAAAAAAP/wFAVDE1agf+//yBysA/4APcxQAAAAAAAAXhEvvQ==#EXT-X-PROGRAM-DATE-TIME:2023-05-19T17:45:32.143Z#EXTINF:2.000000720p60_h264_fmp4-0000000020.m4s#EXT-X-CUE-OUT-CONT:ElapsedTime=44.787167,Duration=45.000000,SCTE35=/DAlAAAAAAAAAP/wFAVDE1agf+//yBysA/4APcxQAAAAAAAAXhEvvQ==#EXT-X-PROGRAM-DATE-TIME:2023-05-19T17:45:34.143Z#EXTINF:0.212833720p60_h264_fmp4-0000000021.m4s#EXT-X-CUE-IN#EXT-X-PROGRAM-DATE-TIME:2023-05-19T17:45:34.358Z#EXTINF:3.784522720p60_h264_fmp4-0000000022.m4s\n```\n## DASH \u6e05\u55ae\u6587\u4ef6\n\u5c0d\u65bc DASH\uff0c\u6bcf\u500b\u63a5\u5408\u547d\u4ee4\u90fd\u6703\u751f\u6210\u4e00\u500b\u65b0\u7684\u53e5\u9ede\uff0c\u4e26\u5728 MPD \u6587\u4ef6\u4e2d\u5305\u542b `<EventStream>` \u90e8\u5206\uff0c\u5982\u4e0b\u6240\u793a\uff1a\n```\n<Period id=\"Dash-32.475\" start=\"PT32.475S\">\u00a0 <AdaptationSet segmentAlignment=\"true\" maxWidth=\"1280\" maxHeight=\"720\">\u00a0 \u00a0 <Representation mimeType=\"video/mp4\" id=\"720p60_h264_fmp4\" codecs=\"avc1.4d001f\" width=\"1280\" height=\"720\" startWithSAP=\"1\" bandwidth=\"2100000\">\u00a0 \u00a0 \u00a0 <SegmentTemplate timescale=\"1000000\" initialization=\"720p60_h264_fmp4/720p60_h264_fmp4-initialization_segment_0000000000.m4s\" media=\"720p60_h264_fmp4/720p60_h264_fmp4-$Number%010d$.m4s\" startNumber=\"9\" presentationTimeOffset=\"1684475755212833\">\u00a0 \u00a0 \u00a0 \u00a0 <SegmentTimeline>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475755212833\" d=\"2787167\"/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475758000000\" d=\"4000000\" r=\"9\"/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475798000000\" d=\"2000000\"/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475800000000\" d=\"212833\"/>\u00a0 \u00a0 \u00a0 \u00a0 </SegmentTimeline>\u00a0 \u00a0 \u00a0 </SegmentTemplate>\u00a0 \u00a0 </Representation>\u00a0 \u00a0 <Representation mimeType=\"video/mp4\" id=\"360p30_h264_fmp4\" codecs=\"avc1.4d001e\" width=\"640\" height=\"360\" startWithSAP=\"1\" bandwidth=\"600000\">\u00a0 \u00a0 \u00a0 <SegmentTemplate timescale=\"1000000\" initialization=\"360p30_h264_fmp4/360p30_h264_fmp4-initialization_segment_0000000000.m4s\" media=\"360p30_h264_fmp4/360p30_h264_fmp4-$Number%010d$.m4s\" startNumber=\"9\" presentationTimeOffset=\"1684475755212833\">\u00a0 \u00a0 \u00a0 \u00a0 <SegmentTimeline>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475755212833\" d=\"2787167\"/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475758000000\" d=\"4000000\" r=\"9\"/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475798000000\" d=\"2000000\"/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475800000000\" d=\"212833\"/>\u00a0 \u00a0 \u00a0 \u00a0 </SegmentTimeline>\u00a0 \u00a0 \u00a0 </SegmentTemplate>\u00a0 \u00a0 </Representation>\u00a0 </AdaptationSet>\u00a0 <AdaptationSet segmentAlignment=\"true\" mimeType=\"audio/mp4\" id=\"1\" label=\"441k_160_aac_fmp4\">\u00a0 \u00a0 <Representation id=\"441k_160_aac_fmp4\" codecs=\"mp4a.40.2\" audioSamplingRate=\"44100\" startWithSAP=\"1\" bandwidth=\"160000\">\u00a0 \u00a0 \u00a0 <SegmentTemplate timescale=\"1000000\" initialization=\"441k_160_aac_fmp4/441k_160_aac_fmp4-initialization_segment_0000000000.m4s\" media=\"441k_160_aac_fmp4/441k_160_aac_fmp4-$Number%010d$.m4s\" startNumber=\"9\" presentationTimeOffset=\"1684475755212833\">\u00a0 \u00a0 \u00a0 \u00a0 <SegmentTimeline>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475755212833\" d=\"2787167\"/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475758000000\" d=\"4000000\" r=\"9\"/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475798000000\" d=\"2000000\"/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475800000000\" d=\"212833\"/>\u00a0 \u00a0 \u00a0 \u00a0 </SegmentTimeline>\u00a0 \u00a0 \u00a0 </SegmentTemplate>\u00a0 \u00a0 </Representation>\u00a0 </AdaptationSet>\u00a0 <AdaptationSet segmentAlignment=\"true\" mimeType=\"audio/mp4\" id=\"2\" label=\"48k_160_aac_fmp4\">\u00a0 \u00a0 <Representation id=\"48k_160_aac_fmp4\" codecs=\"mp4a.40.2\" audioSamplingRate=\"48000\" startWithSAP=\"1\" bandwidth=\"128000\">\u00a0 \u00a0 \u00a0 <SegmentTemplate timescale=\"1000000\" initialization=\"48k_160_aac_fmp4/48k_160_aac_fmp4-initialization_segment_0000000000.m4s\" media=\"48k_160_aac_fmp4/48k_160_aac_fmp4-$Number%010d$.m4s\" startNumber=\"9\" presentationTimeOffset=\"1684475755212833\">\u00a0 \u00a0 \u00a0 \u00a0 <SegmentTimeline>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475755212833\" d=\"2787167\"/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475758000000\" d=\"4000000\" r=\"9\"/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475798000000\" d=\"2000000\"/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475800000000\" d=\"212833\"/>\u00a0 \u00a0 \u00a0 \u00a0 </SegmentTimeline>\u00a0 \u00a0 \u00a0 </SegmentTemplate>\u00a0 \u00a0 </Representation>\u00a0 </AdaptationSet>\u00a0 <AdaptationSet contentType=\"text\" lang=\"en-US\" segmentAlignment=\"true\">\u00a0 \u00a0 <Representation mimeType=\"text/vtt\" id=\"caption_webvtt_en_webvtt\" bandwidth=\"4698\">\u00a0 \u00a0 \u00a0 <SegmentTemplate timescale=\"1000000\" media=\"caption_webvtt_en_webvtt/caption_webvtt_en_webvtt-$Number%010d$.vtt\" startNumber=\"9\" presentationTimeOffset=\"1684475755212833\">\u00a0 \u00a0 \u00a0 \u00a0 <SegmentTimeline>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475755212833\" d=\"2787167\"/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475758000000\" d=\"4000000\" r=\"9\"/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475798000000\" d=\"2000000\"/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475800000000\" d=\"212833\"/>\u00a0 \u00a0 \u00a0 \u00a0 </SegmentTimeline>\u00a0 \u00a0 \u00a0 </SegmentTemplate>\u00a0 \u00a0 </Representation>\u00a0 </AdaptationSet>\u00a0 <AdaptationSet contentType=\"text\" lang=\"es-CO\" segmentAlignment=\"true\">\u00a0 \u00a0 <Representation mimeType=\"text/vtt\" id=\"caption_webvtt_es_webvtt\" bandwidth=\"5450\">\u00a0 \u00a0 \u00a0 <SegmentTemplate timescale=\"1000000\" media=\"caption_webvtt_es_webvtt/caption_webvtt_es_webvtt-$Number%010d$.vtt\" startNumber=\"9\" presentationTimeOffset=\"1684475755212833\">\u00a0 \u00a0 \u00a0 \u00a0 <SegmentTimeline>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475755212833\" d=\"2787167\"/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475758000000\" d=\"4000000\" r=\"9\"/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475798000000\" d=\"2000000\"/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475800000000\" d=\"212833\"/>\u00a0 \u00a0 \u00a0 \u00a0 </SegmentTimeline>\u00a0 \u00a0 \u00a0 </SegmentTemplate>\u00a0 \u00a0 </Representation>\u00a0 </AdaptationSet>\u00a0 <AdaptationSet contentType=\"text\" lang=\"zh-CN\" segmentAlignment=\"true\">\u00a0 \u00a0 <Representation mimeType=\"text/vtt\" id=\"caption_webvtt_zh_webvtt\" bandwidth=\"7329\">\u00a0 \u00a0 \u00a0 <SegmentTemplate timescale=\"1000000\" media=\"caption_webvtt_zh_webvtt/caption_webvtt_zh_webvtt-$Number%010d$.vtt\" startNumber=\"9\" presentationTimeOffset=\"1684475755212833\">\u00a0 \u00a0 \u00a0 \u00a0 <SegmentTimeline>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475755212833\" d=\"2787167\"/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475758000000\" d=\"4000000\" r=\"9\"/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475798000000\" d=\"2000000\"/>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <S t=\"1684475800000000\" d=\"212833\"/>\u00a0 \u00a0 \u00a0 \u00a0 </SegmentTimeline>\u00a0 \u00a0 \u00a0 </SegmentTemplate>\u00a0 \u00a0 </Representation>\u00a0 </AdaptationSet>\u00a0 <EventStream timescale=\"1000000\" schemeIdUri=\"urn:scte:scte35:2013:xml\">\u00a0 \u00a0 <Event duration=\"45000000\" id=\"1684475755\">\u00a0 \u00a0 \u00a0 <SpliceInfoSection xmlns=\"urn:scte:scte35:2013:xml\">\u00a0 \u00a0 \u00a0 \u00a0 <SpliceInsert outOfNetworkIndicator=\"true\" spliceImmediateFlag=\"true\">\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <BreakDuration autoReturn=\"true\" duration=\"45000000\"/>\u00a0 \u00a0 \u00a0 \u00a0 </SpliceInsert>\u00a0 \u00a0 \u00a0 </SpliceInfoSection>\u00a0 \u00a0 </Event>\u00a0 </EventStream></Period>\n```", "guide": "Live Stream API"}