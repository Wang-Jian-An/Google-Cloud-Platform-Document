{"title": "IAM - \u5217\u51fa\u548c\u4fee\u6539\u670d\u52d9\u8cec\u865f", "url": "https://cloud.google.com/iam/docs/service-accounts-list-edit?hl=zh-cn", "abstract": "# IAM - \u5217\u51fa\u548c\u4fee\u6539\u670d\u52d9\u8cec\u865f\n\u672c\u9801\u9762\u4ecb\u7d39\u5982\u4f55\u4f7f\u7528 Identity and Access Management (IAM) API\u3001Google Cloud \u63a7\u5236\u6aaf\u548c `gcloud` \u547d\u4ee4\u884c\u5de5\u5177\u5217\u51fa\u548c\u4fee\u6539\u670d\u52d9\u8cec\u865f\u3002\n", "content": "## \u6e96\u5099\u5de5\u4f5c\n-   Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them   \u5553\u7528 IAM API\u3002 [\u5553\u7528 API](https://console.cloud.google.com/flows/enableapi?apiid=iam.googleapis.com&%3Bredirect=https%3A%2F%2Fconsole.cloud.google.com&hl=zh-cn) \n- \u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49\u3002  Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them   \u9078\u64c7\u6a19\u7c64\u9801\u4ee5\u77ad\u89e3\u60a8\u6253\u7b97\u5982\u4f55\u4f7f\u7528\u672c\u9801\u9762\u4e0a\u7684\u793a\u4f8b\uff1a\n\u7576\u60a8\u4f7f\u7528 Google Cloud \u63a7\u5236\u6aaf\u8a2a\u554f Google Cloud \u670d\u52d9\u548c API \u6642\uff0c\u7121\u9700\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49\u3002\u60a8\u53ef\u4ee5\u5f9e\u4ee5\u4e0b\u4efb\u4e00\u958b\u767c\u74b0\u5883\u4f7f\u7528\u672c\u9801\u9762\u4e0a\u7684 gcloud CLI \u793a\u4f8b\uff1a- **Cloud Shell** \uff1a\u5982\u9700\u4f7f\u7528\u5df2\u8a2d\u7f6e gcloud CLI \u7684\u5728\u7dda\u7d42\u7aef\uff0c\u8acb\u6fc0\u6d3b Cloud Shell\u3002Cloud Shell \u6703\u8a71\u6703\u5728\u9801\u9762\u5e95\u90e8\u5553\u52d5\uff0c\u4e26\u986f\u793a\u547d\u4ee4\u884c\u63d0\u793a\u7b26\u3002\u8a72\u6703\u8a71\u53ef\u80fd\u9700\u8981\u5e7e\u79d2\u9418\u4f86\u5b8c\u6210\u521d\u59cb\u5316\u3002\n- **\u672c\u5730 shell** \uff1a\u5982\u9700\u5728\u672c\u5730\u958b\u767c\u74b0\u5883\u4e2d\u4f7f\u7528 gcloud CLI\uff0c\u8acb [\u5b89\u88dd](https://cloud.google.com/sdk/docs/install?hl=zh-cn) \u4e26 [\u521d\u59cb\u5316](https://cloud.google.com/sdk/docs/initializing?hl=zh-cn) gcloud CLI\u3002\n\u5982\u9700\u5f9e\u672c\u5730\u958b\u767c\u74b0\u5883\u4f7f\u7528\u672c\u9801\u9762\u4e0a\u7684 C++ \u793a\u4f8b\uff0c\u8acb\u5b89\u88dd\u4e26\u521d\u59cb\u5316 gcloud CLI\uff0c\u7136\u5f8c\u4f7f\u7528\u7528\u6236\u6191\u64da\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- [\u5b89\u88dd](https://cloud.google.com/sdk/docs/install?hl=zh-cn) Google Cloud CLI\u3002\n- \u5982\u9700 [\u521d\u59cb\u5316](https://cloud.google.com/sdk/docs/initializing?hl=zh-cn) gcloud CLI\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a```\ngcloud init\n```\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- \u7232\u60a8\u7684 Google \u8cec\u865f\u5275\u5efa\u672c\u5730\u8eab\u4efd\u9a57\u8b49\u6191\u64da\uff1a```\ngcloud auth application-default login\n```\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 Google Cloud \u8eab\u4efd\u9a57\u8b49\u6587\u6a94\u4e2d\u7684 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\u5982\u9700\u5f9e\u672c\u5730\u958b\u767c\u74b0\u5883\u4f7f\u7528\u672c\u9801\u9762\u4e0a\u7684 .NET \u793a\u4f8b\uff0c\u8acb\u5b89\u88dd\u4e26\u521d\u59cb\u5316 gcloud CLI\uff0c\u7136\u5f8c\u4f7f\u7528\u7528\u6236\u6191\u64da\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- [\u5b89\u88dd](https://cloud.google.com/sdk/docs/install?hl=zh-cn) Google Cloud CLI\u3002\n- \u5982\u9700 [\u521d\u59cb\u5316](https://cloud.google.com/sdk/docs/initializing?hl=zh-cn) gcloud CLI\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a```\ngcloud init\n```\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- \u7232\u60a8\u7684 Google \u8cec\u865f\u5275\u5efa\u672c\u5730\u8eab\u4efd\u9a57\u8b49\u6191\u64da\uff1a```\ngcloud auth application-default login\n```\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 Google Cloud \u8eab\u4efd\u9a57\u8b49\u6587\u6a94\u4e2d\u7684 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\u5982\u9700\u5f9e\u672c\u5730\u958b\u767c\u74b0\u5883\u4f7f\u7528\u672c\u9801\u9762\u4e0a\u7684 Go \u793a\u4f8b\uff0c\u8acb\u5b89\u88dd\u4e26\u521d\u59cb\u5316 gcloud CLI\uff0c\u7136\u5f8c\u4f7f\u7528\u7528\u6236\u6191\u64da\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- [\u5b89\u88dd](https://cloud.google.com/sdk/docs/install?hl=zh-cn) Google Cloud CLI\u3002\n- \u5982\u9700 [\u521d\u59cb\u5316](https://cloud.google.com/sdk/docs/initializing?hl=zh-cn) gcloud CLI\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a```\ngcloud init\n```\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- \u7232\u60a8\u7684 Google \u8cec\u865f\u5275\u5efa\u672c\u5730\u8eab\u4efd\u9a57\u8b49\u6191\u64da\uff1a```\ngcloud auth application-default login\n```\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 Google Cloud \u8eab\u4efd\u9a57\u8b49\u6587\u6a94\u4e2d\u7684 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\u5982\u9700\u5f9e\u672c\u5730\u958b\u767c\u74b0\u5883\u4f7f\u7528\u672c\u9801\u9762\u4e0a\u7684 Java \u793a\u4f8b\uff0c\u8acb\u5b89\u88dd\u4e26\u521d\u59cb\u5316 gcloud CLI\uff0c\u7136\u5f8c\u4f7f\u7528\u7528\u6236\u6191\u64da\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- [\u5b89\u88dd](https://cloud.google.com/sdk/docs/install?hl=zh-cn) Google Cloud CLI\u3002\n- \u5982\u9700 [\u521d\u59cb\u5316](https://cloud.google.com/sdk/docs/initializing?hl=zh-cn) gcloud CLI\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a```\ngcloud init\n```\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- \u7232\u60a8\u7684 Google \u8cec\u865f\u5275\u5efa\u672c\u5730\u8eab\u4efd\u9a57\u8b49\u6191\u64da\uff1a```\ngcloud auth application-default login\n```\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 Google Cloud \u8eab\u4efd\u9a57\u8b49\u6587\u6a94\u4e2d\u7684 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\u5982\u9700\u5f9e\u672c\u5730\u958b\u767c\u74b0\u5883\u4f7f\u7528\u672c\u9801\u9762\u4e0a\u7684 Python \u793a\u4f8b\uff0c\u8acb\u5b89\u88dd\u4e26\u521d\u59cb\u5316 gcloud CLI\uff0c\u7136\u5f8c\u4f7f\u7528\u7528\u6236\u6191\u64da\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- [\u5b89\u88dd](https://cloud.google.com/sdk/docs/install?hl=zh-cn) Google Cloud CLI\u3002\n- \u5982\u9700 [\u521d\u59cb\u5316](https://cloud.google.com/sdk/docs/initializing?hl=zh-cn) gcloud CLI\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a```\ngcloud init\n```\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- \u7232\u60a8\u7684 Google \u8cec\u865f\u5275\u5efa\u672c\u5730\u8eab\u4efd\u9a57\u8b49\u6191\u64da\uff1a```\ngcloud auth application-default login\n```\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 Google Cloud \u8eab\u4efd\u9a57\u8b49\u6587\u6a94\u4e2d\u7684 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\u5982\u9700\u5728\u672c\u5730\u958b\u767c\u74b0\u5883\u4e2d\u4f7f\u7528\u672c\u9801\u9762\u4e0a\u7684 REST API \u793a\u4f8b\uff0c\u8acb\u4f7f\u7528\u60a8\u63d0\u4f9b\u7d66 gcloud CLI \u7684\u6191\u64da\u3002- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- [\u5b89\u88dd](https://cloud.google.com/sdk/docs/install?hl=zh-cn) Google Cloud CLI\uff0c\u7136\u5f8c\u901a\u904e\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4 [\u521d\u59cb\u5316](https://cloud.google.com/sdk/docs/initializing?hl=zh-cn) Google Cloud CLI\uff1a\n- ```\ngcloud init\n```\n- \u77ad\u89e3 [IAM \u670d\u52d9\u8cec\u865f](https://cloud.google.com/iam/docs/service-account-overview?hl=zh-cn) \n### \u6240\u9700\u7684\u89d2\u8272\n\u5982\u9700\u7372\u5f97\u7ba1\u7406\u670d\u52d9\u8cec\u865f\u6240\u9700\u7684\u6b0a\u9650\uff0c\u8acb\u8b93\u7ba1\u7406\u54e1\u5411\u60a8\u6388\u4e88\u9805\u76ee\u7684\u4ee5\u4e0b IAM \u89d2\u8272\uff1a\n- \u67e5\u770b\u670d\u52d9\u8cec\u865f\uff1a [View Service Accounts](https://cloud.google.com/iam/docs/understanding-roles?hl=zh-cn#iam.serviceAccountViewer) (`roles/iam.serviceAccountViewer`)\n- \u4fee\u6539\u670d\u52d9\u8cec\u865f\uff1a [Service Account Admin](https://cloud.google.com/iam/docs/understanding-roles?hl=zh-cn#iam.serviceAccountAdmin) (`roles/iam.serviceAccountAdmin`)\n\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u5982\u4f55\u6388\u4e88\u89d2\u8272\uff0c\u8acb\u53c3\u95b1 [\u7ba1\u7406\u8a2a\u554f\u6b0a\u9650](https://cloud.google.com/iam/docs/granting-changing-revoking-access?hl=zh-cn) \u3002\n\u60a8\u4e5f\u53ef\u4ee5\u901a\u904e [\u81ea\u5b9a\u7fa9\u89d2\u8272](https://cloud.google.com/iam/docs/creating-custom-roles?hl=zh-cn) \u6216\u5176\u4ed6 [\u9810\u5b9a\u7fa9\u89d2\u8272](https://cloud.google.com/iam/docs/understanding-roles?hl=zh-cn) \u4f86\u7372\u53d6\u6240\u9700\u7684\u6b0a\u9650\u3002\n\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u9019\u4e9b\u89d2\u8272\uff0c\u8acb\u53c3\u95b1 [\u670d\u52d9\u8cec\u865f\u89d2\u8272](https://cloud.google.com/iam/docs/understanding-roles?hl=zh-cn#service-accounts-roles) \u3002\nIAM \u57fa\u672c\u89d2\u8272\u4e5f\u5177\u6709\u7ba1\u7406\u670d\u52d9\u8cec\u865f\u7684\u6b0a\u9650\u3002\u60a8\u4e0d\u61c9\u5728\u751f\u7522\u74b0\u5883\u4e2d\u6388\u4e88\u57fa\u672c\u89d2\u8272\uff0c\u4f46\u53ef\u4ee5\u5728\u958b\u767c\u6216\u6e2c\u8a66\u74b0\u5883\u4e2d\u6388\u4e88\u9019\u4e9b\u89d2\u8272\u3002\n## \u5217\u51fa\u670d\u52d9\u8cec\u865f\n\u60a8\u53ef\u4ee5\u5217\u51fa\u9805\u76ee\u4e2d\u7684 [\u7528\u6236\u7ba1\u7406\u7684\u670d\u52d9\u8cec\u865f](https://cloud.google.com/iam/docs/service-accounts?hl=zh-cn#user-managed) \u4ee5\u5e6b\u52a9\u60a8\u5be9\u8988\u670d\u52d9\u8cec\u865f\u548c\u5bc6\u9470\uff0c\u4e5f\u53ef\u4ee5\u5217\u51fa\u7528\u65bc\u7ba1\u7406\u670d\u52d9\u8cec\u865f\u7684\u81ea\u5b9a\u7fa9\u5de5\u5177\u3002\n\u60a8\u7121\u6cd5\u5217\u51fa\u53ef\u80fd\u51fa\u73fe\u5728\u9805\u76ee\u7684\u5141\u8a31\u653f\u7b56\u548c\u5be9\u8988\u65e5\u8a8c\u4e2d\u7684 [\u670d\u52d9\u4ee3\u7406](https://cloud.google.com/iam/docs/service-agents?hl=zh-cn) \u6216\u5176\u4ed6 [Google \u7ba1\u7406\u7684\u670d\u52d9\u8cec\u865f](https://cloud.google.com/iam/docs/service-account-types?hl=zh-cn#google-managed) \u3002Google \u7ba1\u7406\u7684\u670d\u52d9\u8cec\u865f\u4e0d\u5728\u60a8\u7684\u9805\u76ee\u4e2d\uff0c\u60a8\u7121\u6cd5\u76f4\u63a5\u8a2a\u554f\u5b83\u5011\u3002\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u8f49\u5230 **\u670d\u52d9\u8cec\u865f** \u9801\u9762\u3002 [\u8f49\u5230\u201c\u670d\u52d9\u8cec\u865f\u201d](https://console.cloud.google.com/iam-admin/serviceaccounts?hl=zh-cn) \n- \u9078\u64c7\u4e00\u500b\u9805\u76ee\u3002 **\u670d\u52d9\u8cec\u865f** \u9801\u9762\u5217\u51fa\u4e86\u60a8\u6240\u9078\u9805\u76ee\u4e2d\u6240\u6709\u7528\u6236\u7ba1\u7406\u7684\u670d\u52d9\u8cec\u865f\u3002\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u6fc0\u6d3b Cloud Shell\u3002 [\u6fc0\u6d3b Cloud Shell](https://console.cloud.google.com/?cloudshell=true&hl=zh-cn)  [Cloud Shell](https://cloud.google.com/shell/docs/how-cloud-shell-works?hl=zh-cn) \u6703\u8a71\u96a8\u5373\u6703\u5728 Google Cloud \u63a7\u5236\u6aaf\u7684\u5e95\u90e8\u5553\u52d5\uff0c\u4e26\u986f\u793a\u547d\u4ee4\u884c\u63d0\u793a\u7b26\u3002Cloud Shell \u662f\u4e00\u500b\u5df2\u5b89\u88dd Google Cloud CLI \u4e14\u5df2\u7232\u7576\u524d\u9805\u76ee\u8a2d\u7f6e\u503c\u7684 Shell \u74b0\u5883\u3002\u8a72\u6703\u8a71\u53ef\u80fd\u9700\u8981\u5e7e\u79d2\u9418\u6642\u9593\u4f86\u5b8c\u6210\u521d\u59cb\u5316\u3002\n- \u57f7\u884c ` [gcloud iam service-accounts list](https://cloud.google.com/sdk/gcloud/reference/iam/service-accounts/list?hl=zh-cn) ` \u547d\u4ee4\u53ef\u5217\u51fa\u9805\u76ee\u4e2d\u7684\u6240\u6709\u670d\u52d9\u8cec\u865f\u3002\u547d\u4ee4\uff1a```\ngcloud iam service-accounts list\n```\u8f38\u51fa\u6703\u5217\u51fa\u9805\u76ee\u4e2d\u6240\u6709\u7528\u6236\u7ba1\u7406\u7684\u670d\u52d9\u8cec\u865f\uff1a```\nNAME     EMAIL\nSA_DISPLAY_NAME_1 SA_NAME_1@PROJECT_ID.iam.gserviceaccount.com\nSA_DISPLAY_NAME_2 SA_NAME_2@PROJECT_ID.iam.gserviceaccount.com\n```\n\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u548c\u4f7f\u7528 IAM \u5ba2\u6236\u7aef\u5eab\uff0c\u8acb\u53c3\u95b1 [IAM \u5ba2\u6236\u7aef\u5eab](https://cloud.google.com/iam/docs/reference/libraries?hl=zh-cn) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [IAM C++ API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/cpp/docs/reference/iam/latest?hl=zh-cn) \u3002\n\u5982\u9700\u5411 IAM \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u6e96\u5099\u5de5\u4f5c](#before-you-begin) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/googleapis/google-cloud-cpp/blob/HEAD/google/cloud/iam/samples/iam_samples.cc) \n```\nnamespace iam = ::google::cloud::iam_admin_v1;[](std::string const& project_id) {\u00a0 iam::IAMClient client(iam::MakeIAMConnection());\u00a0 int count = 0;\u00a0 for (auto& sa : client.ListServiceAccounts(\"projects/\" + project_id)) {\u00a0 \u00a0 if (!sa) throw std::move(sa).status();\u00a0 \u00a0 std::cout << \"ServiceAccount successfully retrieved: \" << sa->name()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 << \"\\n\";\u00a0 \u00a0 ++count;\u00a0 }\u00a0 if (count == 0) {\u00a0 \u00a0 std::cout << \"No service accounts found in project: \" << project_id\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 << \"\\n\";\u00a0 }}\n```\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u548c\u4f7f\u7528 IAM \u5ba2\u6236\u7aef\u5eab\uff0c\u8acb\u53c3\u95b1 [IAM \u5ba2\u6236\u7aef\u5eab](https://cloud.google.com/iam/docs/reference/libraries?hl=zh-cn) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [IAM C# API \u53c3\u8003\u6587\u6a94](https://developers.google.com/api-client-library/dotnet/apis/iam/v1?hl=zh-cn) \u3002\n\u5982\u9700\u5411 IAM \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u6e96\u5099\u5de5\u4f5c](#before-you-begin) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/dotnet-docs-samples/blob/HEAD/iam/api/ServiceAccounts/ServiceAccountsList.cs) \n```\nusing System;using System.Collections.Generic;using Google.Apis.Auth.OAuth2;using Google.Apis.Iam.v1;using Google.Apis.Iam.v1.Data;public partial class ServiceAccounts{\u00a0 \u00a0 public static IList<ServiceAccount> ListServiceAccounts(string projectId)\u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 var credential = GoogleCredential.GetApplicationDefault()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .CreateScoped(IamService.Scope.CloudPlatform);\u00a0 \u00a0 \u00a0 \u00a0 var service = new IamService(new IamService.Initializer\u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 HttpClientInitializer = credential\u00a0 \u00a0 \u00a0 \u00a0 });\u00a0 \u00a0 \u00a0 \u00a0 var response = service.Projects.ServiceAccounts.List(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"projects/\" + projectId).Execute();\u00a0 \u00a0 \u00a0 \u00a0 foreach (ServiceAccount account in response.Accounts)\u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Console.WriteLine(\"Name: \" + account.Name);\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Console.WriteLine(\"Display Name: \" + account.DisplayName);\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Console.WriteLine(\"Email: \" + account.Email);\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Console.WriteLine();\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 return response.Accounts;\u00a0 \u00a0 }}\n```\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u548c\u4f7f\u7528 IAM \u5ba2\u6236\u7aef\u5eab\uff0c\u8acb\u53c3\u95b1 [IAM \u5ba2\u6236\u7aef\u5eab](https://cloud.google.com/iam/docs/reference/libraries?hl=zh-cn) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [IAM Go API \u53c3\u8003\u6587\u6a94](https://godoc.org/google.golang.org/genproto/googleapis/iam/admin/v1) \u3002\n\u5982\u9700\u5411 IAM \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u6e96\u5099\u5de5\u4f5c](#before-you-begin) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/golang-samples/blob/HEAD/iam/snippets/service_accounts_list.go) \n```\nimport (\u00a0 \u00a0 \u00a0 \u00a0 \"context\"\u00a0 \u00a0 \u00a0 \u00a0 \"fmt\"\u00a0 \u00a0 \u00a0 \u00a0 \"io\"\u00a0 \u00a0 \u00a0 \u00a0 iam \"google.golang.org/api/iam/v1\")// listServiceAccounts lists a project's service accounts.func listServiceAccounts(w io.Writer, projectID string) ([]*iam.ServiceAccount, error) {\u00a0 \u00a0 \u00a0 \u00a0 ctx := context.Background()\u00a0 \u00a0 \u00a0 \u00a0 service, err := iam.NewService(ctx)\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return nil, fmt.Errorf(\"iam.NewService: %w\", err)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 response, err := service.Projects.ServiceAccounts.List(\"projects/\" + projectID).Do()\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return nil, fmt.Errorf(\"Projects.ServiceAccounts.List: %w\", err)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 for _, account := range response.Accounts {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 fmt.Fprintf(w, \"Listing service account: %v\\n\", account.Name)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 return response.Accounts, nil}\n```\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u548c\u4f7f\u7528 IAM \u5ba2\u6236\u7aef\u5eab\uff0c\u8acb\u53c3\u95b1 [IAM \u5ba2\u6236\u7aef\u5eab](https://cloud.google.com/iam/docs/reference/libraries?hl=zh-cn) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [IAM Java API \u53c3\u8003\u6587\u6a94](https://developers.google.com/api-client-library/java/apis/iam/v1?hl=zh-cn) \u3002\n\u5982\u9700\u5411 IAM \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u6e96\u5099\u5de5\u4f5c](#before-you-begin) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/java-docs-samples/blob/HEAD/iam/api-client/src/main/java/iam/snippets/ListServiceAccounts.java) \n```\nimport com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;import com.google.api.client.json.gson.GsonFactory;import com.google.api.services.iam.v1.Iam;import com.google.api.services.iam.v1.IamScopes;import com.google.api.services.iam.v1.model.ListServiceAccountsResponse;import com.google.api.services.iam.v1.model.ServiceAccount;import com.google.auth.http.HttpCredentialsAdapter;import com.google.auth.oauth2.GoogleCredentials;import java.io.IOException;import java.security.GeneralSecurityException;import java.util.Collections;import java.util.List;public class ListServiceAccounts {\u00a0 // Lists all service accounts for the current project.\u00a0 public static void listServiceAccounts(String projectId) {\u00a0 \u00a0 // String projectId = \"my-project-id\"\u00a0 \u00a0 Iam service = null;\u00a0 \u00a0 try {\u00a0 \u00a0 \u00a0 service = initService();\u00a0 \u00a0 } catch (IOException | GeneralSecurityException e) {\u00a0 \u00a0 \u00a0 System.out.println(\"Unable to initialize service: \\n\" + e.toString());\u00a0 \u00a0 \u00a0 return;\u00a0 \u00a0 }\u00a0 \u00a0 try {\u00a0 \u00a0 \u00a0 ListServiceAccountsResponse response =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 service.projects().serviceAccounts().list(\"projects/\" + projectId).execute();\u00a0 \u00a0 \u00a0 List<ServiceAccount> serviceAccounts = response.getAccounts();\u00a0 \u00a0 \u00a0 for (ServiceAccount account : serviceAccounts) {\u00a0 \u00a0 \u00a0 \u00a0 System.out.println(\"Name: \" + account.getName());\u00a0 \u00a0 \u00a0 \u00a0 System.out.println(\"Display Name: \" + account.getDisplayName());\u00a0 \u00a0 \u00a0 \u00a0 System.out.println(\"Email: \" + account.getEmail());\u00a0 \u00a0 \u00a0 \u00a0 System.out.println();\u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 } catch (IOException e) {\u00a0 \u00a0 \u00a0 System.out.println(\"Unable to list service accounts: \\n\" + e.toString());\u00a0 \u00a0 }\u00a0 }\u00a0 private static Iam initService() throws GeneralSecurityException, IOException {\u00a0 \u00a0 // Use the Application Default Credentials strategy for authentication. For more info, see:\u00a0 \u00a0 // https://cloud.google.com/docs/authentication/production#finding_credentials_automatically\u00a0 \u00a0 GoogleCredentials credential =\u00a0 \u00a0 \u00a0 \u00a0 GoogleCredentials.getApplicationDefault()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .createScoped(Collections.singleton(IamScopes.CLOUD_PLATFORM));\u00a0 \u00a0 // Initialize the IAM service, which can be used to send requests to the IAM API.\u00a0 \u00a0 Iam service =\u00a0 \u00a0 \u00a0 \u00a0 new Iam.Builder(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 GoogleNetHttpTransport.newTrustedTransport(),\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 GsonFactory.getDefaultInstance(),\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 new HttpCredentialsAdapter(credential))\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setApplicationName(\"service-accounts\")\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 return service;\u00a0 }}\n```\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u548c\u4f7f\u7528 IAM \u5ba2\u6236\u7aef\u5eab\uff0c\u8acb\u53c3\u95b1 [IAM \u5ba2\u6236\u7aef\u5eab](https://cloud.google.com/iam/docs/reference/libraries?hl=zh-cn) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [IAM Python API \u53c3\u8003\u6587\u6a94](https://developers.google.com/api-client-library/python/apis/iam/v1?hl=zh-cn) \u3002\n\u5982\u9700\u5411 IAM \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u6e96\u5099\u5de5\u4f5c](#before-you-begin) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/python-docs-samples/blob/HEAD/iam/api-client/service_accounts.py) \n```\nimport osfrom google.oauth2 import service_account \u00a0# type: ignoreimport googleapiclient.discovery \u00a0# type: ignoredef list_service_accounts(project_id: str) -> dict:\u00a0 \u00a0 \"\"\"Lists all service accounts for the current project.\"\"\"\u00a0 \u00a0 credentials = service_account.Credentials.from_service_account_file(\u00a0 \u00a0 \u00a0 \u00a0 filename=os.environ[\"GOOGLE_APPLICATION_CREDENTIALS\"],\u00a0 \u00a0 \u00a0 \u00a0 scopes=[\"https://www.googleapis.com/auth/cloud-platform\"],\u00a0 \u00a0 )\u00a0 \u00a0 service = googleapiclient.discovery.build(\"iam\", \"v1\", credentials=credentials)\u00a0 \u00a0 service_accounts = (\u00a0 \u00a0 \u00a0 \u00a0 service.projects()\u00a0 \u00a0 \u00a0 \u00a0 .serviceAccounts()\u00a0 \u00a0 \u00a0 \u00a0 .list(name=\"projects/\" + project_id)\u00a0 \u00a0 \u00a0 \u00a0 .execute()\u00a0 \u00a0 )\u00a0 \u00a0 for account in service_accounts[\"accounts\"]:\u00a0 \u00a0 \u00a0 \u00a0 print(\"Name: \" + account[\"name\"])\u00a0 \u00a0 \u00a0 \u00a0 print(\"Email: \" + account[\"email\"])\u00a0 \u00a0 \u00a0 \u00a0 print(\" \")\u00a0 \u00a0 return service_accounts\n``` ` [serviceAccounts.list](https://cloud.google.com/iam/docs/reference/rest/v1/projects.serviceAccounts/list?hl=zh-cn) ` \u65b9\u6cd5\u53ef\u5217\u51fa\u9805\u76ee\u4e2d\u7684\u6bcf\u500b\u7528\u6236\u7ba1\u7406\u7684\u670d\u52d9\u8cec\u865f\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- ``\uff1a\u60a8\u7684 Google Cloud \u9805\u76ee ID\u3002\u9805\u76ee ID \u662f\u5b57\u6bcd\u6578\u5b57\u5b57\u7b26\u4e32\uff0c\u4f8b\u5982`my-project`\u3002\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nGET https://iam.googleapis.com/v1/projects/PROJECT_ID/serviceAccounts\n```\n\u5982\u9700\u767c\u9001\u60a8\u7684\u8acb\u6c42\uff0c\u8acb\u5c55\u958b\u4ee5\u4e0b\u9078\u9805\u4e4b\u4e00\uff1a\n\u60a8\u61c9\u8a72\u6536\u5230\u985e\u4f3c\u4ee5\u4e0b\u5167\u5bb9\u7684 JSON \u97ff\u61c9\uff1a\n```\n{\n \"accounts\": [ {\n  \"name\": \"projects/my-project/serviceAccounts/sa-1@my-project.iam.gserviceaccount.com\",\n  \"projectId\": \"my-project\",\n  \"uniqueId\": \"123456789012345678901\",\n  \"email\": \"sa-1@my-project.iam.gserviceaccount.com\",\n  \"description\": \"My first service account\",\n  \"displayName\": \"Service account 1\",\n  \"etag\": \"BwUpTsLVUkQ=\",\n  \"oauth2ClientId\": \"987654321098765432109\"\n },\n {\n  \"name\": \"projects/my-project/serviceAccounts/sa-2@my-project.iam.gserviceaccount.com\",\n  \"projectId\": \"my-project\",\n  \"uniqueId\": \"234567890123456789012\",\n  \"email\": \"sa-2@my-project.iam.gserviceaccount.com\",\n  \"description\": \"My second service account\",\n  \"displayName\": \"Service account 2\",\n  \"etag\": \"UkQpTwBVUsL=\",\n  \"oauth2ClientId\": \"876543210987654321098\"\n }\n ]\n}\n```\n## \u4fee\u6539\u670d\u52d9\u8cec\u865f\n\u901a\u5e38\u53ef\u901a\u904e\u670d\u52d9\u8cec\u865f\u7684\u986f\u793a\u540d\uff08\u6613\u8a18\u540d\u7a31\uff09\u548c\u8aaa\u660e\u7372\u77e5\u6709\u95dc\u8a72\u670d\u52d9\u8cec\u865f\u7684\u984d\u5916\u4fe1\u606f\uff0c\u4f8b\u5982\u670d\u52d9\u8cec\u865f\u7684\u7528\u9014\u6216\u8a72\u8cec\u865f\u7684\u806f\u7e6b\u4eba\u3002\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u8f49\u5230 **\u670d\u52d9\u8cec\u865f** \u9801\u9762\u3002 [\u8f49\u5230\u201c\u670d\u52d9\u8cec\u865f\u201d](https://console.cloud.google.com/iam-admin/serviceaccounts?hl=zh-cn) \n- \u9078\u64c7\u4e00\u500b\u9805\u76ee\u3002\n- \u9ede\u64ca\u8981\u91cd\u547d\u540d\u7684\u670d\u52d9\u8cec\u865f\u7684\u96fb\u5b50\u90f5\u4ef6\u5730\u5740\u3002\n- \u5728 **\u540d\u7a31** \u6846\u4e2d\u8f38\u5165\u65b0\u540d\u7a31\uff0c\u7136\u5f8c\u9ede\u64ca **\u4fdd\u5b58** \u3002\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u6fc0\u6d3b Cloud Shell\u3002 [\u6fc0\u6d3b Cloud Shell](https://console.cloud.google.com/?cloudshell=true&hl=zh-cn)  [Cloud Shell](https://cloud.google.com/shell/docs/how-cloud-shell-works?hl=zh-cn) \u6703\u8a71\u96a8\u5373\u6703\u5728 Google Cloud \u63a7\u5236\u6aaf\u7684\u5e95\u90e8\u5553\u52d5\uff0c\u4e26\u986f\u793a\u547d\u4ee4\u884c\u63d0\u793a\u7b26\u3002Cloud Shell \u662f\u4e00\u500b\u5df2\u5b89\u88dd Google Cloud CLI \u4e14\u5df2\u7232\u7576\u524d\u9805\u76ee\u8a2d\u7f6e\u503c\u7684 Shell \u74b0\u5883\u3002\u8a72\u6703\u8a71\u53ef\u80fd\u9700\u8981\u5e7e\u79d2\u9418\u6642\u9593\u4f86\u5b8c\u6210\u521d\u59cb\u5316\u3002\n- \u57f7\u884c ` [gcloud iam service-accounts update](https://cloud.google.com/sdk/gcloud/reference/iam/service-accounts/update?hl=zh-cn) ` \u547d\u4ee4\u53ef\u66f4\u65b0\u670d\u52d9\u8cec\u865f\u3002\u547d\u4ee4\uff1a```\ngcloud iam service-accounts update \\\n SA_NAME@PROJECT_ID.iam.gserviceaccount.com \\\n --description=\"UPDATED_SA_DESCRIPTION\" \\\n --display-name=\"UPDATED_DISPLAY_NAME\"\n```\u8f38\u51fa\u662f\u91cd\u547d\u540d\u5f8c\u7684\u670d\u52d9\u8cec\u865f\uff1a```\ndescription: UPDATED_SA_DESCRIPTION\ndisplayName: UPDATED_DISPLAY_NAME\nname: projects/PROJECT_ID/serviceAccounts/SA_NAME@PROJECT_ID.iam.gserviceaccount.com\n```\n\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u548c\u4f7f\u7528 IAM \u5ba2\u6236\u7aef\u5eab\uff0c\u8acb\u53c3\u95b1 [IAM \u5ba2\u6236\u7aef\u5eab](https://cloud.google.com/iam/docs/reference/libraries?hl=zh-cn) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [IAM C++ API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/cpp/docs/reference/iam/latest?hl=zh-cn) \u3002\n\u5982\u9700\u5411 IAM \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u6e96\u5099\u5de5\u4f5c](#before-you-begin) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/googleapis/google-cloud-cpp/blob/HEAD/google/cloud/iam/samples/iam_samples.cc) \n```\nnamespace iam = ::google::cloud::iam_admin_v1;[](std::string const& name, std::string const& display_name) {\u00a0 iam::IAMClient client(iam::MakeIAMConnection());\u00a0 google::iam::admin::v1::PatchServiceAccountRequest request;\u00a0 google::iam::admin::v1::ServiceAccount service_account;\u00a0 service_account.set_name(name);\u00a0 service_account.set_display_name(display_name);\u00a0 google::protobuf::FieldMask update_mask;\u00a0 *update_mask.add_paths() = \"display_name\";\u00a0 *request.mutable_service_account() = service_account;\u00a0 *request.mutable_update_mask() = update_mask;\u00a0 auto response = client.PatchServiceAccount(request);\u00a0 if (!response) throw std::move(response).status();\u00a0 std::cout << \"ServiceAccount successfully updated: \"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 << response->DebugString() << \"\\n\";}\n```\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u548c\u4f7f\u7528 IAM \u5ba2\u6236\u7aef\u5eab\uff0c\u8acb\u53c3\u95b1 [IAM \u5ba2\u6236\u7aef\u5eab](https://cloud.google.com/iam/docs/reference/libraries?hl=zh-cn) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [IAM C# API \u53c3\u8003\u6587\u6a94](https://developers.google.com/api-client-library/dotnet/apis/iam/v1?hl=zh-cn) \u3002\n\u5982\u9700\u5411 IAM \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u6e96\u5099\u5de5\u4f5c](#before-you-begin) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/dotnet-docs-samples/blob/HEAD/iam/api/ServiceAccounts/ServiceAccountsRename.cs) \n```\nusing System;using Google.Apis.Auth.OAuth2;using Google.Apis.Iam.v1;using Google.Apis.Iam.v1.Data;public partial class ServiceAccounts{\u00a0 \u00a0 public static ServiceAccount RenameServiceAccount(string email,\u00a0 \u00a0 \u00a0 \u00a0 string newDisplayName)\u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 var credential = GoogleCredential.GetApplicationDefault()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .CreateScoped(IamService.Scope.CloudPlatform);\u00a0 \u00a0 \u00a0 \u00a0 var service = new IamService(new IamService.Initializer\u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 HttpClientInitializer = credential\u00a0 \u00a0 \u00a0 \u00a0 });\u00a0 \u00a0 \u00a0 \u00a0 // First, get a ServiceAccount using List() or Get().\u00a0 \u00a0 \u00a0 \u00a0 string resource = \"projects/-/serviceAccounts/\" + email;\u00a0 \u00a0 \u00a0 \u00a0 var serviceAccount = service.Projects.ServiceAccounts.Get(resource)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .Execute();\u00a0 \u00a0 \u00a0 \u00a0 // Then you can update the display name.\u00a0 \u00a0 \u00a0 \u00a0 serviceAccount.DisplayName = newDisplayName;\u00a0 \u00a0 \u00a0 \u00a0 serviceAccount = service.Projects.ServiceAccounts.Update(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 serviceAccount, resource).Execute();\u00a0 \u00a0 \u00a0 \u00a0 Console.WriteLine($\"Updated display name for {serviceAccount.Email} \" +\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"to: \" + serviceAccount.DisplayName);\u00a0 \u00a0 \u00a0 \u00a0 return serviceAccount;\u00a0 \u00a0 }}\n```\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u548c\u4f7f\u7528 IAM \u5ba2\u6236\u7aef\u5eab\uff0c\u8acb\u53c3\u95b1 [IAM \u5ba2\u6236\u7aef\u5eab](https://cloud.google.com/iam/docs/reference/libraries?hl=zh-cn) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [IAM Go API \u53c3\u8003\u6587\u6a94](https://godoc.org/google.golang.org/genproto/googleapis/iam/admin/v1) \u3002\n\u5982\u9700\u5411 IAM \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u6e96\u5099\u5de5\u4f5c](#before-you-begin) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/golang-samples/blob/HEAD/iam/snippets/service_accounts_rename.go) \n```\nimport (\u00a0 \u00a0 \u00a0 \u00a0 \"context\"\u00a0 \u00a0 \u00a0 \u00a0 \"fmt\"\u00a0 \u00a0 \u00a0 \u00a0 \"io\"\u00a0 \u00a0 \u00a0 \u00a0 iam \"google.golang.org/api/iam/v1\")// renameServiceAccount renames a service account.func renameServiceAccount(w io.Writer, email, newDisplayName string) (*iam.ServiceAccount, error) {\u00a0 \u00a0 \u00a0 \u00a0 ctx := context.Background()\u00a0 \u00a0 \u00a0 \u00a0 service, err := iam.NewService(ctx)\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return nil, fmt.Errorf(\"iam.NewService: %w\", err)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 // First, get a ServiceAccount using List() or Get().\u00a0 \u00a0 \u00a0 \u00a0 resource := \"projects/-/serviceAccounts/\" + email\u00a0 \u00a0 \u00a0 \u00a0 serviceAccount, err := service.Projects.ServiceAccounts.Get(resource).Do()\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return nil, fmt.Errorf(\"Projects.ServiceAccounts.Get: %w\", err)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 // Then you can update the display name.\u00a0 \u00a0 \u00a0 \u00a0 serviceAccount.DisplayName = newDisplayName\u00a0 \u00a0 \u00a0 \u00a0 serviceAccount, err = service.Projects.ServiceAccounts.Update(resource, serviceAccount).Do()\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return nil, fmt.Errorf(\"Projects.ServiceAccounts.Update: %w\", err)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 fmt.Fprintf(w, \"Updated service account: %v\", serviceAccount.Email)\u00a0 \u00a0 \u00a0 \u00a0 return serviceAccount, nil}\n```\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u548c\u4f7f\u7528 IAM \u5ba2\u6236\u7aef\u5eab\uff0c\u8acb\u53c3\u95b1 [IAM \u5ba2\u6236\u7aef\u5eab](https://cloud.google.com/iam/docs/reference/libraries?hl=zh-cn) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [IAM Java API \u53c3\u8003\u6587\u6a94](https://developers.google.com/api-client-library/java/apis/iam/v1?hl=zh-cn) \u3002\n\u5982\u9700\u5411 IAM \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u6e96\u5099\u5de5\u4f5c](#before-you-begin) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/java-docs-samples/blob/HEAD/iam/api-client/src/main/java/iam/snippets/RenameServiceAccount.java) \n```\nimport com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;import com.google.api.client.json.gson.GsonFactory;import com.google.api.services.iam.v1.Iam;import com.google.api.services.iam.v1.IamScopes;import com.google.api.services.iam.v1.model.ServiceAccount;import com.google.auth.http.HttpCredentialsAdapter;import com.google.auth.oauth2.GoogleCredentials;import java.io.IOException;import java.security.GeneralSecurityException;import java.util.Collections;public class RenameServiceAccount {\u00a0 // Changes a service account's display name.\u00a0 public static void renameServiceAccount(String projectId, String serviceAccountName) {\u00a0 \u00a0 // String projectId = \"my-project-id\";\u00a0 \u00a0 // String serviceAccountName = \"my-service-account-name\";\u00a0 \u00a0 Iam service = null;\u00a0 \u00a0 try {\u00a0 \u00a0 \u00a0 service = initService();\u00a0 \u00a0 } catch (IOException | GeneralSecurityException e) {\u00a0 \u00a0 \u00a0 System.out.println(\"Unable to initialize service: \\n\" + e.toString());\u00a0 \u00a0 \u00a0 return;\u00a0 \u00a0 }\u00a0 \u00a0 String serviceAccountEmail = serviceAccountName + \"@\" + projectId + \".iam.gserviceaccount.com\";\u00a0 \u00a0 try {\u00a0 \u00a0 \u00a0 // First, get a service account using List() or Get()\u00a0 \u00a0 \u00a0 ServiceAccount serviceAccount =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 service\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .projects()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .serviceAccounts()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .get(\"projects/-/serviceAccounts/\" + serviceAccountEmail)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .execute();\u00a0 \u00a0 \u00a0 // Then you can update the display name\u00a0 \u00a0 \u00a0 serviceAccount.setDisplayName(\"your-new-display-name\");\u00a0 \u00a0 \u00a0 serviceAccount =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 service\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .projects()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .serviceAccounts()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .update(serviceAccount.getName(), serviceAccount)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .execute();\u00a0 \u00a0 \u00a0 System.out.println(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"Updated display name for \"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 + serviceAccount.getName()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 + \" to: \"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 + serviceAccount.getDisplayName());\u00a0 \u00a0 } catch (IOException e) {\u00a0 \u00a0 \u00a0 System.out.println(\"Unable to rename service account: \\n\" + e.toString());\u00a0 \u00a0 }\u00a0 }\u00a0 private static Iam initService() throws GeneralSecurityException, IOException {\u00a0 \u00a0 // Use the Application Default Credentials strategy for authentication. For more info, see:\u00a0 \u00a0 // https://cloud.google.com/docs/authentication/production#finding_credentials_automatically\u00a0 \u00a0 GoogleCredentials credential =\u00a0 \u00a0 \u00a0 \u00a0 GoogleCredentials.getApplicationDefault()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .createScoped(Collections.singleton(IamScopes.CLOUD_PLATFORM));\u00a0 \u00a0 // Initialize the IAM service, which can be used to send requests to the IAM API.\u00a0 \u00a0 Iam service =\u00a0 \u00a0 \u00a0 \u00a0 new Iam.Builder(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 GoogleNetHttpTransport.newTrustedTransport(),\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 GsonFactory.getDefaultInstance(),\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 new HttpCredentialsAdapter(credential))\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setApplicationName(\"service-accounts\")\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 return service;\u00a0 }}\n```\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u548c\u4f7f\u7528 IAM \u5ba2\u6236\u7aef\u5eab\uff0c\u8acb\u53c3\u95b1 [IAM \u5ba2\u6236\u7aef\u5eab](https://cloud.google.com/iam/docs/reference/libraries?hl=zh-cn) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [IAM Python API \u53c3\u8003\u6587\u6a94](https://developers.google.com/api-client-library/python/apis/iam/v1?hl=zh-cn) \u3002\n\u5982\u9700\u5411 IAM \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u6e96\u5099\u5de5\u4f5c](#before-you-begin) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/python-docs-samples/blob/HEAD/iam/api-client/service_accounts.py) \n```\nimport osfrom google.oauth2 import service_account \u00a0# type: ignoreimport googleapiclient.discovery \u00a0# type: ignoredef rename_service_account(email: str, new_display_name: str) -> dict:\u00a0 \u00a0 \"\"\"Changes a service account's display name.\"\"\"\u00a0 \u00a0 # First, get a service account using List() or Get()\u00a0 \u00a0 credentials = service_account.Credentials.from_service_account_file(\u00a0 \u00a0 \u00a0 \u00a0 filename=os.environ[\"GOOGLE_APPLICATION_CREDENTIALS\"],\u00a0 \u00a0 \u00a0 \u00a0 scopes=[\"https://www.googleapis.com/auth/cloud-platform\"],\u00a0 \u00a0 )\u00a0 \u00a0 service = googleapiclient.discovery.build(\"iam\", \"v1\", credentials=credentials)\u00a0 \u00a0 resource = \"projects/-/serviceAccounts/\" + email\u00a0 \u00a0 my_service_account = (\u00a0 \u00a0 \u00a0 \u00a0 service.projects().serviceAccounts().get(name=resource).execute()\u00a0 \u00a0 )\u00a0 \u00a0 # Then you can update the display name\u00a0 \u00a0 my_service_account[\"displayName\"] = new_display_name\u00a0 \u00a0 my_service_account = (\u00a0 \u00a0 \u00a0 \u00a0 service.projects()\u00a0 \u00a0 \u00a0 \u00a0 .serviceAccounts()\u00a0 \u00a0 \u00a0 \u00a0 .update(name=resource, body=my_service_account)\u00a0 \u00a0 \u00a0 \u00a0 .execute()\u00a0 \u00a0 )\u00a0 \u00a0 print(\u00a0 \u00a0 \u00a0 \u00a0 \"Updated display name for {} to: {}\".format(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 my_service_account[\"email\"], my_service_account[\"displayName\"]\u00a0 \u00a0 \u00a0 \u00a0 )\u00a0 \u00a0 )\u00a0 \u00a0 return my_service_account\n``` ` [serviceAccounts.patch](https://cloud.google.com/iam/docs/reference/rest/v1/projects.serviceAccounts/patch?hl=zh-cn) ` \u65b9\u6cd5\u53ef\u66f4\u65b0\u670d\u52d9\u8cec\u865f\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- ``\uff1a\u60a8\u7684 Google Cloud \u9805\u76ee ID\u3002\u9805\u76ee ID \u662f\u5b57\u6bcd\u6578\u5b57\u5b57\u7b26\u4e32\uff0c\u4f8b\u5982`my-project`\u3002\n- ``\uff1a\u60a8\u7684\u670d\u52d9\u8cec\u865f\u7684 ID\u3002\u6b64 ID \u53ef\u4ee5\u662f\u670d\u52d9\u8cec\u865f\u7684\u96fb\u5b50\u90f5\u4ef6\u5730\u5740\uff08\u683c\u5f0f\u7232`` `@` `` `.iam.gserviceaccount.com`\uff09\u6216\u670d\u52d9\u8cec\u865f\u7684\u552f\u4e00\u6578\u5b57 ID\u3002\n- ``\uff1a\u60a8\u7684\u670d\u52d9\u8cec\u865f\u7684\u5b57\u6bcd\u6578\u5b57 ID\u3002\u6b64\u540d\u7a31\u5fc5\u9808\u4ecb\u65bc 6 \u5230 30 \u500b\u5b57\u7b26\u4e4b\u9593\uff0c\u4e14\u53ef\u4ee5\u5305\u542b\u5c0f\u5beb\u5b57\u6bcd\u6578\u5b57\u5b57\u7b26\u548c\u77ed\u5283\u7dda\u3002\n- \u8acb\u81f3\u5c11\u66ff\u63db\u4ee5\u4e0b\u5176\u4e2d\u4e00\u9805\uff1a\n- ``\uff1a\u60a8\u7684\u670d\u52d9\u8cec\u865f\u7684\u65b0\u986f\u793a\u540d\u3002\n- ``\uff1a\u60a8\u7684\u670d\u52d9\u8cec\u865f\u7684\u65b0\u8aaa\u660e\u3002\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nPATCH https://iam.googleapis.com/v1/projects/PROJECT_ID/serviceAccounts/SA_ID \n```\n\u8acb\u6c42 JSON \u6b63\u6587\uff1a\n```\n{\n \"serviceAccount\": {\n \"email\": \"SA_NAME@PROJECT_ID.iam.gserviceaccount.com\",\n \"displayName\": \"UPDATED_DISPLAY_NAME\",\n \"description\": \"UPDATED_DESCRIPTION\"\n },\n \"updateMask\": \"displayName,description\"\n}\n```\n\u5982\u9700\u767c\u9001\u60a8\u7684\u8acb\u6c42\uff0c\u8acb\u5c55\u958b\u4ee5\u4e0b\u9078\u9805\u4e4b\u4e00\uff1a\n\u60a8\u61c9\u8a72\u6536\u5230\u985e\u4f3c\u4ee5\u4e0b\u5167\u5bb9\u7684 JSON \u97ff\u61c9\uff1a\n```\n{\n \"name\": \"projects/my-project/serviceAccounts/my-service-account@my-project.iam.gserviceaccount.com\",\n \"displayName\": \"My updated service account\",\n \"description\": \"An updated description of my service account\"\n}\n```\n## \u5f8c\u7e8c\u6b65\u9a5f\n- \u77ad\u89e3\u5982\u4f55 [\u505c\u7528\u548c\u5553\u7528\u670d\u52d9\u8cec\u865f](https://cloud.google.com/iam/docs/service-accounts-disable-enable?hl=zh-cn) \u3002\n- \u67e5\u770b [\u5c07 IAM \u89d2\u8272\u6388\u4e88\u6240\u6709\u985e\u578b\u7684\u4e3b\u8cec\u865f](https://cloud.google.com/iam/docs/granting-changing-revoking-access?hl=zh-cn) \uff08\u5305\u62ec\u670d\u52d9\u8cec\u865f\uff09\u7684\u6d41\u7a0b\u3002\n- \u77ad\u89e3\u5982\u4f55\u4f7f\u7528 [\u89d2\u8272\u5efa\u8b70](https://cloud.google.com/iam/docs/recommender-overview?hl=zh-cn) \u4f86\u7e2e\u5c0f\u6240\u6709\u4e3b\u8cec\u865f\uff08\u5305\u62ec\u670d\u52d9\u8cec\u865f\uff09\u7684\u6b0a\u9650\u7bc4\u570d\u3002\n- \u77ad\u89e3\u5982\u4f55 [\u5c07\u670d\u52d9\u8cec\u865f\u95dc\u806f\u5230\u8cc7\u6e90](https://cloud.google.com/iam/docs/attach-service-accounts?hl=zh-cn) \u3002", "guide": "IAM"}