{"title": "IAM - \u5217\u51fa\u548c\u7372\u53d6\u670d\u52d9\u8cec\u865f\u5bc6\u9470", "url": "https://cloud.google.com/iam/docs/keys-list-get?hl=zh-cn", "abstract": "# IAM - \u5217\u51fa\u548c\u7372\u53d6\u670d\u52d9\u8cec\u865f\u5bc6\u9470\n\u672c\u9801\u9762\u4ecb\u7d39\u77ad\u5982\u4f55\u4f7f\u7528 Google Cloud \u63a7\u5236\u6aaf\u3001 [Google Cloud CLI](https://cloud.google.com/sdk/gcloud?hl=zh-cn) \u3001 [Identity and Access Management API](https://cloud.google.com/iam/docs/reference/rest?hl=zh-cn) \u6216\u67d0\u500b [Google Cloud \u5ba2\u6236\u7aef\u5eab](https://cloud.google.com/apis/docs/cloud-client-libraries?hl=zh-cn) \u4f86\u5217\u51fa\u548c\u7372\u53d6\u670d\u52d9\u8cec\u865f\u5bc6\u9470\u3002\n**\u6ce8\u610f** \uff1a\u5982\u679c\u60a8\u9700\u8981\u5f9e Google Cloud \u5916\u90e8\uff08\u4f8b\u5982 Amazon Web Services (AWS) \u6216 Microsoft Azure\uff09\u904b\u884c\u7684\u5de5\u4f5c\u8ca0\u8f09\u8a2a\u554f\u8cc7\u6e90\uff0c\u8acb\u8003\u616e\u4f7f\u7528 [\u5de5\u4f5c\u8ca0\u8f09\u8eab\u4efd\u806f\u5408](https://cloud.google.com/iam/docs/workload-identity-federation?hl=zh-cn) \uff0c\u800c\u4e0d\u662f\u670d\u52d9\u8cec\u865f\u5bc6\u9470\u3002\u85c9\u52a9\u806f\u5408\uff0c\u60a8\u7684\u5de5\u4f5c\u8ca0\u8f09\u4fbf\u53ef\u4ee5\u4f7f\u7528\u77ed\u671f\u6709\u6548\u7684\u8a2a\u554f\u4ee4\u724c\u76f4\u63a5\u8a2a\u554f\u8cc7\u6e90\uff0c\u800c\u8207\u670d\u52d9\u8cec\u865f\u5bc6\u9470\u76f8\u95dc\u806f\u7684\u7dad\u8b77\u548c\u5b89\u5168\u8ca0\u64d4\u4e5f\u5f97\u4ee5\u6d88\u9664\u3002\n", "content": "## \u6e96\u5099\u5de5\u4f5c\n-   Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them   \u5553\u7528 IAM API\u3002 [\u5553\u7528 API](https://console.cloud.google.com/flows/enableapi?apiid=iam.googleapis.com&%3Bredirect=https%3A%2F%2Fconsole.cloud.google.com&hl=zh-cn) \n- \u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49\u3002  Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them   \u9078\u64c7\u6a19\u7c64\u9801\u4ee5\u77ad\u89e3\u60a8\u6253\u7b97\u5982\u4f55\u4f7f\u7528\u672c\u9801\u9762\u4e0a\u7684\u793a\u4f8b\uff1a\n\u7576\u60a8\u4f7f\u7528 Google Cloud \u63a7\u5236\u6aaf\u8a2a\u554f Google Cloud \u670d\u52d9\u548c API \u6642\uff0c\u7121\u9700\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49\u3002\u60a8\u53ef\u4ee5\u5f9e\u4ee5\u4e0b\u4efb\u4e00\u958b\u767c\u74b0\u5883\u4f7f\u7528\u672c\u9801\u9762\u4e0a\u7684 gcloud CLI \u793a\u4f8b\uff1a- **Cloud Shell** \uff1a\u5982\u9700\u4f7f\u7528\u5df2\u8a2d\u7f6e gcloud CLI \u7684\u5728\u7dda\u7d42\u7aef\uff0c\u8acb\u6fc0\u6d3b Cloud Shell\u3002Cloud Shell \u6703\u8a71\u6703\u5728\u9801\u9762\u5e95\u90e8\u5553\u52d5\uff0c\u4e26\u986f\u793a\u547d\u4ee4\u884c\u63d0\u793a\u7b26\u3002\u8a72\u6703\u8a71\u53ef\u80fd\u9700\u8981\u5e7e\u79d2\u9418\u4f86\u5b8c\u6210\u521d\u59cb\u5316\u3002\n- **\u672c\u5730 shell** \uff1a\u5982\u9700\u5728\u672c\u5730\u958b\u767c\u74b0\u5883\u4e2d\u4f7f\u7528 gcloud CLI\uff0c\u8acb [\u5b89\u88dd](https://cloud.google.com/sdk/docs/install?hl=zh-cn) \u4e26 [\u521d\u59cb\u5316](https://cloud.google.com/sdk/docs/initializing?hl=zh-cn) gcloud CLI\u3002\n\u5982\u9700\u5f9e\u672c\u5730\u958b\u767c\u74b0\u5883\u4f7f\u7528\u672c\u9801\u9762\u4e0a\u7684 C++ \u793a\u4f8b\uff0c\u8acb\u5b89\u88dd\u4e26\u521d\u59cb\u5316 gcloud CLI\uff0c\u7136\u5f8c\u4f7f\u7528\u7528\u6236\u6191\u64da\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- [\u5b89\u88dd](https://cloud.google.com/sdk/docs/install?hl=zh-cn) Google Cloud CLI\u3002\n- \u5982\u9700 [\u521d\u59cb\u5316](https://cloud.google.com/sdk/docs/initializing?hl=zh-cn) gcloud CLI\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a```\ngcloud init\n```\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- \u7232\u60a8\u7684 Google \u8cec\u865f\u5275\u5efa\u672c\u5730\u8eab\u4efd\u9a57\u8b49\u6191\u64da\uff1a```\ngcloud auth application-default login\n```\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 Google Cloud \u8eab\u4efd\u9a57\u8b49\u6587\u6a94\u4e2d\u7684 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\u5982\u9700\u5f9e\u672c\u5730\u958b\u767c\u74b0\u5883\u4f7f\u7528\u672c\u9801\u9762\u4e0a\u7684 .NET \u793a\u4f8b\uff0c\u8acb\u5b89\u88dd\u4e26\u521d\u59cb\u5316 gcloud CLI\uff0c\u7136\u5f8c\u4f7f\u7528\u7528\u6236\u6191\u64da\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- [\u5b89\u88dd](https://cloud.google.com/sdk/docs/install?hl=zh-cn) Google Cloud CLI\u3002\n- \u5982\u9700 [\u521d\u59cb\u5316](https://cloud.google.com/sdk/docs/initializing?hl=zh-cn) gcloud CLI\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a```\ngcloud init\n```\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- \u7232\u60a8\u7684 Google \u8cec\u865f\u5275\u5efa\u672c\u5730\u8eab\u4efd\u9a57\u8b49\u6191\u64da\uff1a```\ngcloud auth application-default login\n```\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 Google Cloud \u8eab\u4efd\u9a57\u8b49\u6587\u6a94\u4e2d\u7684 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\u5982\u9700\u5f9e\u672c\u5730\u958b\u767c\u74b0\u5883\u4f7f\u7528\u672c\u9801\u9762\u4e0a\u7684 Go \u793a\u4f8b\uff0c\u8acb\u5b89\u88dd\u4e26\u521d\u59cb\u5316 gcloud CLI\uff0c\u7136\u5f8c\u4f7f\u7528\u7528\u6236\u6191\u64da\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- [\u5b89\u88dd](https://cloud.google.com/sdk/docs/install?hl=zh-cn) Google Cloud CLI\u3002\n- \u5982\u9700 [\u521d\u59cb\u5316](https://cloud.google.com/sdk/docs/initializing?hl=zh-cn) gcloud CLI\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a```\ngcloud init\n```\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- \u7232\u60a8\u7684 Google \u8cec\u865f\u5275\u5efa\u672c\u5730\u8eab\u4efd\u9a57\u8b49\u6191\u64da\uff1a```\ngcloud auth application-default login\n```\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 Google Cloud \u8eab\u4efd\u9a57\u8b49\u6587\u6a94\u4e2d\u7684 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\u5982\u9700\u5f9e\u672c\u5730\u958b\u767c\u74b0\u5883\u4f7f\u7528\u672c\u9801\u9762\u4e0a\u7684 Java \u793a\u4f8b\uff0c\u8acb\u5b89\u88dd\u4e26\u521d\u59cb\u5316 gcloud CLI\uff0c\u7136\u5f8c\u4f7f\u7528\u7528\u6236\u6191\u64da\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- [\u5b89\u88dd](https://cloud.google.com/sdk/docs/install?hl=zh-cn) Google Cloud CLI\u3002\n- \u5982\u9700 [\u521d\u59cb\u5316](https://cloud.google.com/sdk/docs/initializing?hl=zh-cn) gcloud CLI\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a```\ngcloud init\n```\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- \u7232\u60a8\u7684 Google \u8cec\u865f\u5275\u5efa\u672c\u5730\u8eab\u4efd\u9a57\u8b49\u6191\u64da\uff1a```\ngcloud auth application-default login\n```\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 Google Cloud \u8eab\u4efd\u9a57\u8b49\u6587\u6a94\u4e2d\u7684 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\u5982\u9700\u5f9e\u672c\u5730\u958b\u767c\u74b0\u5883\u4f7f\u7528\u672c\u9801\u9762\u4e0a\u7684 Python \u793a\u4f8b\uff0c\u8acb\u5b89\u88dd\u4e26\u521d\u59cb\u5316 gcloud CLI\uff0c\u7136\u5f8c\u4f7f\u7528\u7528\u6236\u6191\u64da\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- [\u5b89\u88dd](https://cloud.google.com/sdk/docs/install?hl=zh-cn) Google Cloud CLI\u3002\n- \u5982\u9700 [\u521d\u59cb\u5316](https://cloud.google.com/sdk/docs/initializing?hl=zh-cn) gcloud CLI\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a```\ngcloud init\n```\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- \u7232\u60a8\u7684 Google \u8cec\u865f\u5275\u5efa\u672c\u5730\u8eab\u4efd\u9a57\u8b49\u6191\u64da\uff1a```\ngcloud auth application-default login\n```\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 Google Cloud \u8eab\u4efd\u9a57\u8b49\u6587\u6a94\u4e2d\u7684 [\u7232\u672c\u5730\u958b\u767c\u74b0\u5883\u8a2d\u7f6e\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#local-dev) \u3002\u5982\u9700\u5728\u672c\u5730\u958b\u767c\u74b0\u5883\u4e2d\u4f7f\u7528\u672c\u9801\u9762\u4e0a\u7684 REST API \u793a\u4f8b\uff0c\u8acb\u4f7f\u7528\u60a8\u63d0\u4f9b\u7d66 gcloud CLI \u7684\u6191\u64da\u3002- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- [\u5b89\u88dd](https://cloud.google.com/sdk/docs/install?hl=zh-cn) Google Cloud CLI\uff0c\u7136\u5f8c\u901a\u904e\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4 [\u521d\u59cb\u5316](https://cloud.google.com/sdk/docs/initializing?hl=zh-cn) Google Cloud CLI\uff1a\n- ```\ngcloud init\n```\n- \u77ad\u89e3 [\u670d\u52d9\u8cec\u865f\u6191\u64da](https://cloud.google.com/iam/docs/service-account-creds?hl=zh-cn) \u3002\n### \u6240\u9700\u7684\u89d2\u8272\n\u5982\u9700\u7372\u5f97\u5217\u51fa\u548c\u7372\u53d6\u670d\u52d9\u8cec\u865f\u5bc6\u9470\u6240\u9700\u7684\u6b0a\u9650\uff0c\u8acb\u8b93\u7ba1\u7406\u54e1\u5411\u60a8\u6388\u4e88\u8981\u7ba1\u7406\u5bc6\u9470\u7684\u9805\u76ee\u6216\u670d\u52d9\u8cec\u865f\u7684 [View Service Accounts](https://cloud.google.com/iam/docs/understanding-roles?hl=zh-cn#iam.serviceAccountViewer) ( `roles/iam.serviceAccountViewer` ) IAM \u89d2\u8272\u3002 \u5982\u9700\u8a73\u7d30\u77ad\u89e3\u5982\u4f55\u6388\u4e88\u89d2\u8272\uff0c\u8acb\u53c3\u95b1 [\u7ba1\u7406\u8a2a\u554f\u6b0a\u9650](https://cloud.google.com/iam/docs/granting-changing-revoking-access?hl=zh-cn) \u3002\n\u60a8\u4e5f\u53ef\u4ee5\u901a\u904e [\u81ea\u5b9a\u7fa9\u89d2\u8272](https://cloud.google.com/iam/docs/creating-custom-roles?hl=zh-cn) \u6216\u5176\u4ed6 [\u9810\u5b9a\u7fa9\u89d2\u8272](https://cloud.google.com/iam/docs/understanding-roles?hl=zh-cn) \u4f86\u7372\u53d6\u6240\u9700\u7684\u6b0a\u9650\u3002\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u670d\u52d9\u8cec\u865f\u89d2\u8272](https://cloud.google.com/iam/docs/understanding-roles?hl=zh-cn#service-accounts-roles) \u3002\nIAM \u57fa\u672c\u89d2\u8272\u9084\u5305\u542b\u7ba1\u7406\u670d\u52d9\u8cec\u865f\u5bc6\u9470\u7684\u6b0a\u9650\u3002\u60a8\u4e0d\u61c9\u5728\u751f\u7522\u74b0\u5883\u4e2d\u6388\u4e88\u57fa\u672c\u89d2\u8272\uff0c\u4f46\u53ef\u4ee5\u5728\u958b\u767c\u6216\u6e2c\u8a66\u74b0\u5883\u4e2d\u6388\u4e88\u9019\u4e9b\u89d2\u8272\u3002\n## \u5217\u51fa\u670d\u52d9\u8cec\u865f\u5bc6\u9470\n\u60a8\u53ef\u4ee5\u4f7f\u7528 Google Cloud \u63a7\u5236\u6aaf\u3001gcloud CLI\u3001 [serviceAccount.keys.list()](https://cloud.google.com/iam/reference/rest/v1/projects.serviceAccounts.keys/list?hl=zh-cn) \u65b9\u6cd5\u6216\u67d0\u500b [\u5ba2\u6236\u7aef\u5eab](https://cloud.google.com/apis/docs/cloud-client-libraries?hl=zh-cn) \u5217\u51fa\u670d\u52d9\u8cec\u865f\u7684\u5bc6\u9470\u3002\n`serviceAccount.keys.list()` \u65b9\u6cd5\u901a\u5e38\u7528\u65bc\u5be9\u8988\u670d\u52d9\u8cec\u865f\u548c\u5bc6\u9470\uff0c\u6216\u8005\u69cb\u5efa\u7528\u65bc\u7ba1\u7406\u670d\u52d9\u8cec\u865f\u7684\u81ea\u5b9a\u7fa9\u5de5\u5177\u3002\n\u8981\u4e86\u89e3\u60a8\u7684\u5bc6\u9470\u5c6c\u65bc\u54ea\u500b\u9805\u76ee\uff0c\u60a8\u53ef\u4ee5\u4ee5 JSON \u6587\u4ef6\u7684\u683c\u5f0f\u4e0b\u8f09\u8a72\u5bc6\u9470\u4e26\u67e5\u770b\u8a72\u6587\u4ef6\u3002\n\u60a8\u53ef\u80fd\u6703\u767c\u73fe\u6709\u4e9b\u5217\u51fa\u7684\u5bc6\u9470\u4e26\u4e0d\u662f\u7531\u60a8\u5275\u5efa\u7684\u3002\u9019\u4e9b\u5bc6\u9470\u7531 Google \u5275\u5efa\uff0c\u7531 Service Account Credentials API \u4f7f\u7528\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Google \u7ba1\u7406\u7684\u5bc6\u9470\u5c0d](https://cloud.google.com/iam/docs/service-account-creds?hl=zh-cn#google-managed-keys) \u3002\n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u8f49\u5230 **\u670d\u52d9\u8cec\u865f** \u9801\u9762\u3002 [\u8f49\u5230\u201c\u670d\u52d9\u8cec\u865f\u201d](https://console.cloud.google.com/iam-admin/serviceaccounts?walkthrough_id=iam--list-service-account-keys&start_index=1&hl=zh-cn#step_index=1) school \u5176\u9918\u6b65\u9a5f\u5c07\u81ea\u52d5\u986f\u793a\u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\u3002\n- \u9078\u64c7\u4e00\u500b\u9805\u76ee\u3002\n- \u5728 **\u670d\u52d9\u8cec\u865f** \u9801\u9762\u4e0a\uff0c\u9ede\u64ca\u8981\u5217\u51fa\u5176\u5bc6\u9470\u7684\u670d\u52d9\u8cec\u865f\u7684\u96fb\u5b50\u90f5\u4ef6\u5730\u5740\u3002\n- \u9ede\u64ca **\u5bc6\u9470** \u3002 Google Cloud \u63a7\u5236\u6aaf\u6703\u986f\u793a\u8a72\u670d\u52d9\u8cec\u865f\u7684\u5bc6\u9470\u5217\u8868\u3002\n\u57f7\u884c [gcloud iam service-accounts keys list](https://cloud.google.com/sdk/gcloud/reference/iam/service-accounts/keys/list?hl=zh-cn) \u547d\u4ee4\u4f86\u5217\u51fa\u670d\u52d9\u8cec\u865f\u5bc6\u9470\u3002\n\u66ff\u63db\u4ee5\u4e0b\u503c\uff1a- ``\uff1a\u8981\u7232\u5176\u5217\u51fa\u5bc6\u9470\u7684\u670d\u52d9\u8cec\u865f\u7684\u540d\u7a31\u3002\n- ``\uff1a\u60a8\u7684 Google Cloud \u9805\u76ee ID\u3002\n```\ngcloud iam service-accounts keys list \\\n --iam-account=SA_NAME@PROJECT_ID.iam.gserviceaccount.com\n```\n\u8f38\u51fa\u5982\u4e0b\uff1a\n| 0          | 1     | 2     | 3  |\n|:-----------------------------------------|:---------------------|:---------------------|:-------|\n| KEY_ID         | CREATED_AT   | EXPIRES_AT   | \u5df2\u505c\u7528 |\n| 8e6e3936d7024646f8ceb39792006c07f4a9760c | 2021-01-01T21:01:42Z | 9999-12-31T23:59:59Z | nan |\n| 937c98f870f5c8db970af527aa3c12fd88b1c20a | 2021-01-01T20:55:40Z | 9999-12-31T23:59:59Z | True |\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u548c\u4f7f\u7528 IAM \u5ba2\u6236\u7aef\u5eab\uff0c\u8acb\u53c3\u95b1 [IAM \u5ba2\u6236\u7aef\u5eab](https://cloud.google.com/iam/docs/reference/libraries?hl=zh-cn) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [IAM C++ API \u53c3\u8003\u6587\u6a94](https://cloud.google.com/cpp/docs/reference/iam/latest?hl=zh-cn) \u3002\n\u5982\u9700\u5411 IAM \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u6e96\u5099\u5de5\u4f5c](#before-you-begin) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/googleapis/google-cloud-cpp/blob/HEAD/google/cloud/iam/samples/iam_samples.cc) \n```\nnamespace iam = ::google::cloud::iam_admin_v1;[](std::string const& service_account_name,\u00a0 \u00a0std::vector<std::string> const& key_type_labels) {\u00a0 iam::IAMClient client(iam::MakeIAMConnection());\u00a0 std::vector<google::iam::admin::v1::ListServiceAccountKeysRequest::KeyType>\u00a0 \u00a0 \u00a0 key_types;\u00a0 for (auto const& type : key_type_labels) {\u00a0 \u00a0 if (type == \"USER_MANAGED\") {\u00a0 \u00a0 \u00a0 key_types.push_back(google::iam::admin::v1::\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ListServiceAccountKeysRequest::USER_MANAGED);\u00a0 \u00a0 } else if (type == \"SYSTEM_MANAGED\") {\u00a0 \u00a0 \u00a0 key_types.push_back(google::iam::admin::v1::\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ListServiceAccountKeysRequest::SYSTEM_MANAGED);\u00a0 \u00a0 }\u00a0 }\u00a0 auto response =\u00a0 \u00a0 \u00a0 client.ListServiceAccountKeys(service_account_name, key_types);\u00a0 if (!response) throw std::move(response).status();\u00a0 std::cout << \"ServiceAccountKeys successfully retrieved: \"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 << response->DebugString() << \"\\n\";}\n```\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u548c\u4f7f\u7528 IAM \u5ba2\u6236\u7aef\u5eab\uff0c\u8acb\u53c3\u95b1 [IAM \u5ba2\u6236\u7aef\u5eab](https://cloud.google.com/iam/docs/reference/libraries?hl=zh-cn) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [IAM C# API \u53c3\u8003\u6587\u6a94](https://developers.google.com/api-client-library/dotnet/apis/iam/v1?hl=zh-cn) \u3002\n\u5982\u9700\u5411 IAM \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u6e96\u5099\u5de5\u4f5c](#before-you-begin) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/dotnet-docs-samples/blob/HEAD/iam/api/ServiceAccountKeys/ServiceAccountKeysList.cs) \n```\nusing System;using System.Collections.Generic;using Google.Apis.Auth.OAuth2;using Google.Apis.Iam.v1;using Google.Apis.Iam.v1.Data;public partial class ServiceAccountKeys{\u00a0 \u00a0 public static IList<ServiceAccountKey> ListKeys(string serviceAccountEmail)\u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 var credential = GoogleCredential.GetApplicationDefault()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .CreateScoped(IamService.Scope.CloudPlatform);\u00a0 \u00a0 \u00a0 \u00a0 var service = new IamService(new IamService.Initializer\u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 HttpClientInitializer = credential\u00a0 \u00a0 \u00a0 \u00a0 });\u00a0 \u00a0 \u00a0 \u00a0 var response = service.Projects.ServiceAccounts.Keys\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .List($\"projects/-/serviceAccounts/{serviceAccountEmail}\")\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .Execute();\u00a0 \u00a0 \u00a0 \u00a0 foreach (ServiceAccountKey key in response.Keys)\u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Console.WriteLine(\"Key: \" + key.Name);\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 return response.Keys;\u00a0 \u00a0 }}\n```\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u548c\u4f7f\u7528 IAM \u5ba2\u6236\u7aef\u5eab\uff0c\u8acb\u53c3\u95b1 [IAM \u5ba2\u6236\u7aef\u5eab](https://cloud.google.com/iam/docs/reference/libraries?hl=zh-cn) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [IAM Go API \u53c3\u8003\u6587\u6a94](https://godoc.org/google.golang.org/genproto/googleapis/iam/admin/v1) \u3002\n\u5982\u9700\u5411 IAM \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u6e96\u5099\u5de5\u4f5c](#before-you-begin) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/golang-samples/blob/HEAD/iam/snippets/service_account_keys_list.go) \n```\nimport (\u00a0 \u00a0 \u00a0 \u00a0 \"context\"\u00a0 \u00a0 \u00a0 \u00a0 \"fmt\"\u00a0 \u00a0 \u00a0 \u00a0 \"io\"\u00a0 \u00a0 \u00a0 \u00a0 iam \"google.golang.org/api/iam/v1\")// listKey lists a service account's keys.func listKeys(w io.Writer, serviceAccountEmail string) ([]*iam.ServiceAccountKey, error) {\u00a0 \u00a0 \u00a0 \u00a0 ctx := context.Background()\u00a0 \u00a0 \u00a0 \u00a0 service, err := iam.NewService(ctx)\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return nil, fmt.Errorf(\"iam.NewService: %w\", err)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 resource := \"projects/-/serviceAccounts/\" + serviceAccountEmail\u00a0 \u00a0 \u00a0 \u00a0 response, err := service.Projects.ServiceAccounts.Keys.List(resource).Do()\u00a0 \u00a0 \u00a0 \u00a0 if err != nil {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 return nil, fmt.Errorf(\"Projects.ServiceAccounts.Keys.List: %w\", err)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 for _, key := range response.Keys {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 fmt.Fprintf(w, \"Listing key: %v\", key.Name)\u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 return response.Keys, nil}\n```\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u548c\u4f7f\u7528 IAM \u5ba2\u6236\u7aef\u5eab\uff0c\u8acb\u53c3\u95b1 [IAM \u5ba2\u6236\u7aef\u5eab](https://cloud.google.com/iam/docs/reference/libraries?hl=zh-cn) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [IAM Java API \u53c3\u8003\u6587\u6a94](https://developers.google.com/api-client-library/java/apis/iam/v1?hl=zh-cn) \u3002\n\u5982\u9700\u5411 IAM \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u6e96\u5099\u5de5\u4f5c](#before-you-begin) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/java-docs-samples/blob/HEAD/iam/api-client/src/main/java/iam/snippets/ListServiceAccountKeys.java) \n```\nimport com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;import com.google.api.client.json.gson.GsonFactory;import com.google.api.services.iam.v1.Iam;import com.google.api.services.iam.v1.IamScopes;import com.google.api.services.iam.v1.model.ServiceAccountKey;import com.google.auth.http.HttpCredentialsAdapter;import com.google.auth.oauth2.GoogleCredentials;import java.io.IOException;import java.security.GeneralSecurityException;import java.util.Collections;import java.util.List;public class ListServiceAccountKeys {\u00a0 // Lists all keys for a service account.\u00a0 public static void listKeys(String projectId, String serviceAccountName) {\u00a0 \u00a0 // String projectId = \"my-project-id\";\u00a0 \u00a0 // String serviceAccountName = \"my-service-account-name\";\u00a0 \u00a0 Iam service = null;\u00a0 \u00a0 try {\u00a0 \u00a0 \u00a0 service = initService();\u00a0 \u00a0 } catch (IOException | GeneralSecurityException e) {\u00a0 \u00a0 \u00a0 System.out.println(\"Unable to initialize service: \\n\" + e.toString());\u00a0 \u00a0 \u00a0 return;\u00a0 \u00a0 }\u00a0 \u00a0 String serviceAccountEmail = serviceAccountName + \"@\" + projectId + \".iam.gserviceaccount.com\";\u00a0 \u00a0 try {\u00a0 \u00a0 \u00a0 List<ServiceAccountKey> keys =\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 service\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .projects()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .serviceAccounts()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .keys()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .list(\"projects/-/serviceAccounts/\" + serviceAccountEmail)\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .execute()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .getKeys();\u00a0 \u00a0 \u00a0 for (ServiceAccountKey key : keys) {\u00a0 \u00a0 \u00a0 \u00a0 System.out.println(\"Key: \" + key.getName());\u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 } catch (IOException e) {\u00a0 \u00a0 \u00a0 System.out.println(\"Unable to list service account keys: \\n\" + e.toString());\u00a0 \u00a0 }\u00a0 }\u00a0 private static Iam initService() throws GeneralSecurityException, IOException {\u00a0 \u00a0 // Use the Application Default Credentials strategy for authentication. For more info, see:\u00a0 \u00a0 // https://cloud.google.com/docs/authentication/production#finding_credentials_automatically\u00a0 \u00a0 GoogleCredentials credential =\u00a0 \u00a0 \u00a0 \u00a0 GoogleCredentials.getApplicationDefault()\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .createScoped(Collections.singleton(IamScopes.CLOUD_PLATFORM));\u00a0 \u00a0 // Initialize the IAM service, which can be used to send requests to the IAM API.\u00a0 \u00a0 Iam service =\u00a0 \u00a0 \u00a0 \u00a0 new Iam.Builder(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 GoogleNetHttpTransport.newTrustedTransport(),\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 GsonFactory.getDefaultInstance(),\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 new HttpCredentialsAdapter(credential))\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .setApplicationName(\"service-account-keys\")\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 .build();\u00a0 \u00a0 return service;\u00a0 }}\n```\u5982\u9700\u77ad\u89e3\u5982\u4f55\u5b89\u88dd\u548c\u4f7f\u7528 IAM \u5ba2\u6236\u7aef\u5eab\uff0c\u8acb\u53c3\u95b1 [IAM \u5ba2\u6236\u7aef\u5eab](https://cloud.google.com/iam/docs/reference/libraries?hl=zh-cn) \u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [IAM Python API \u53c3\u8003\u6587\u6a94](https://developers.google.com/api-client-library/python/apis/iam/v1?hl=zh-cn) \u3002\n\u5982\u9700\u5411 IAM \u9032\u884c\u8eab\u4efd\u9a57\u8b49\uff0c\u8acb\u8a2d\u7f6e\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u3002  \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u6e96\u5099\u5de5\u4f5c](#before-you-begin) \u3002\n [\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/python-docs-samples/blob/HEAD/iam/api-client/service_account_keys.py) \n```\nimport osfrom google.oauth2 import service_accountimport googleapiclient.discovery \u00a0# type: ignoredef list_keys(service_account_email: str) -> None:\u00a0 \u00a0 \"\"\"Lists all keys for a service account.\"\"\"\u00a0 \u00a0 credentials = service_account.Credentials.from_service_account_file(\u00a0 \u00a0 \u00a0 \u00a0 filename=os.environ[\"GOOGLE_APPLICATION_CREDENTIALS\"],\u00a0 \u00a0 \u00a0 \u00a0 scopes=[\"https://www.googleapis.com/auth/cloud-platform\"],\u00a0 \u00a0 )\u00a0 \u00a0 service = googleapiclient.discovery.build(\"iam\", \"v1\", credentials=credentials)\u00a0 \u00a0 keys = (\u00a0 \u00a0 \u00a0 \u00a0 service.projects()\u00a0 \u00a0 \u00a0 \u00a0 .serviceAccounts()\u00a0 \u00a0 \u00a0 \u00a0 .keys()\u00a0 \u00a0 \u00a0 \u00a0 .list(name=\"projects/-/serviceAccounts/\" + service_account_email)\u00a0 \u00a0 \u00a0 \u00a0 .execute()\u00a0 \u00a0 )\u00a0 \u00a0 for key in keys[\"keys\"]:\u00a0 \u00a0 \u00a0 \u00a0 print(\"Key: \" + key[\"name\"])\n```` [projects.serviceAccounts.keys.list](https://cloud.google.com/iam/docs/reference/rest/v1/projects.serviceAccounts.keys/list?hl=zh-cn) ` \u65b9\u6cd5\u53ef\u5217\u51fa\u670d\u52d9\u8cec\u865f\u7684\u6240\u6709\u670d\u52d9\u8cec\u865f\u5bc6\u9470\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- ``\uff1a\u60a8\u7684 Google Cloud \u9805\u76ee ID\u3002\u9805\u76ee ID \u662f\u5b57\u6bcd\u6578\u5b57\u5b57\u7b26\u4e32\uff0c\u4f8b\u5982`my-project`\u3002\n- ``\uff1a\u60a8\u8981\u5217\u51fa\u5176\u5bc6\u9470\u7684\u670d\u52d9\u8cec\u865f\u7684\u540d\u7a31\u3002\n- ``\uff1a\u53ef\u9078\u3002\u60a8\u60f3\u8981\u5728\u97ff\u61c9\u4e2d\u5305\u542b\u7684\u5bc6\u9470\u985e\u578b\u7684\u82f1\u6587\u9017\u865f\u5206\u9694\u5217\u8868\u3002\u5bc6\u9470\u985e\u578b\u6703\u6307\u51fa\u5bc6\u9470\u662f\u7531\u7528\u6236\u7ba1\u7406 (`USER_MANAGED`) \u9084\u662f\u7531\u7cfb\u7d71\u7ba1\u7406 (`SYSTEM_MANAGED`)\u3002\u5982\u679c\u7559\u7a7a\uff0c\u5247\u8fd4\u56de\u6240\u6709\u5bc6\u9470\u3002\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nGET https://iam.googleapis.com/v1/projects/PROJECT_ID/serviceAccounts/SA_NAME@PROJECT_ID.iam.gserviceaccount.com/keys?keyTypes=KEY_TYPES\n```\n\u5982\u9700\u767c\u9001\u60a8\u7684\u8acb\u6c42\uff0c\u8acb\u5c55\u958b\u4ee5\u4e0b\u9078\u9805\u4e4b\u4e00\uff1a\n\u60a8\u61c9\u8a72\u6536\u5230\u985e\u4f3c\u4ee5\u4e0b\u5167\u5bb9\u7684 JSON \u97ff\u61c9\uff1a\n```\n{\n \"keys\": [ {\n  \"name\": \"projects/my-project/serviceAccounts/my-service-account@my-project.iam.gserviceaccount.com/keys/90c48f61c65cd56224a12ab18e6ee9ca9c3aee7c\",\n  \"validAfterTime\": \"2020-03-04T17:39:47Z\",\n  \"validBeforeTime\": \"9999-12-31T23:59:59Z\",\n  \"keyAlgorithm\": \"KEY_ALG_RSA_2048\",\n  \"keyOrigin\": \"GOOGLE_PROVIDED\",\n  \"keyType\": \"USER_MANAGED\"\n },\n {\n  \"name\": \"projects/my-project/serviceAccounts/my-service-account@my-project.iam.gserviceaccount.com/keys/e5e3800831ac1adc8a5849da7d827b4724b1fce8\",\n  \"validAfterTime\": \"2020-03-31T23:50:09Z\",\n  \"validBeforeTime\": \"9999-12-31T23:59:59Z\",\n  \"keyAlgorithm\": \"KEY_ALG_RSA_2048\",\n  \"keyOrigin\": \"GOOGLE_PROVIDED\",\n  \"keyType\": \"USER_MANAGED\"\n },\n {\n  \"name\": \"projects/my-project/serviceAccounts/my-service-account@my-project.iam.gserviceaccount.com/keys/b97699f042b8eee6a846f4f96259fbcd13e2682e\",\n  \"validAfterTime\": \"2020-05-17T18:58:13Z\",\n  \"validBeforeTime\": \"9999-12-31T23:59:59Z\",\n  \"keyAlgorithm\": \"KEY_ALG_RSA_2048\",\n  \"keyOrigin\": \"GOOGLE_PROVIDED\",\n  \"keyType\": \"USER_MANAGED\",\n  \"disabled\": true\n }\n ]\n}\n```\n## \u7372\u53d6\u670d\u52d9\u8cec\u865f\u5bc6\u9470\n\u60a8\u53ef\u4ee5\u4f7f\u7528 gcloud CLI \u6216 REST API \u7372\u53d6\u4e00\u500b\u670d\u52d9\u8cec\u865f\u5bc6\u9470\u7684\u516c\u9470\u6578\u64da\u3002\u6b64\u5916\u9084\u53ef\u4ee5\u4f7f\u7528 Google Cloud \u63a7\u5236\u6aaf\u3001gcloud CLI \u6216 REST API \u4f86\u7372\u53d6\u5bc6\u9470\u7684\u5143\u6578\u64da\uff0c\u4f8b\u5982\u5bc6\u9470\u4f7f\u7528\u7684\u7b97\u6cd5\uff0c\u4ee5\u53ca\u5bc6\u9470\u662f\u7531\u60a8\u7ba1\u7406\u9084\u662f\u7531 Google \u7ba1\u7406\u3002\n**\u6ce8\u610f** \uff1a\u60a8\u7121\u6cd5\u7372\u53d6\u670d\u52d9\u8cec\u865f\u5bc6\u9470\u7684\u79c1\u9470\u6578\u64da\u3002\u50c5\u5728\u5275\u5efa\u5bc6\u9470\u6642\u624d\u80fd\u7372\u5f97\u6b64\u6578\u64da\u3002\n**\u5982\u9700\u7372\u53d6\u670d\u52d9\u8cec\u865f\u5bc6\u9470\u7684\u516c\u9470\u6578\u64da\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c** \uff1a\n\u4f7f\u7528 gcloud CLI \u6216 REST API\u3002Google Cloud \u63a7\u5236\u6aaf\u4e2d\u4e0d\u63d0\u4f9b\u9019\u4e9b\u64cd\u4f5c\u3002\n **\u5982\u9700\u7372\u53d6\u670d\u52d9\u8cec\u865f\u5bc6\u9470\u7684\u5143\u6578\u64da\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c** \uff1a- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\uff0c\u8f49\u5230 **\u670d\u52d9\u8cec\u865f** \u9801\u9762\u3002 [\u8f49\u5230\u201c\u670d\u52d9\u8cec\u865f\u201d](https://console.cloud.google.com/iam-admin/serviceaccounts?walkthrough_id=iam--get-service-account-keys&start_index=1&hl=zh-cn#step_index=1) school \u5176\u9918\u6b65\u9a5f\u5c07\u81ea\u52d5\u986f\u793a\u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d\u3002\n- \u9078\u64c7\u4e00\u500b\u9805\u76ee\u3002\n- \u5728 **\u670d\u52d9\u8cec\u865f** \u9801\u9762\u4e0a\uff0c\u9ede\u64ca\u8981\u5217\u51fa\u5176\u5bc6\u9470\u7684\u670d\u52d9\u8cec\u865f\u7684\u96fb\u5b50\u90f5\u4ef6\u5730\u5740\u3002\n- \u9ede\u64ca **\u5bc6\u9470** \u3002 Google Cloud \u63a7\u5236\u6aaf\u6703\u986f\u793a\u670d\u52d9\u8cec\u865f\u7684\u5bc6\u9470\u5217\u8868\uff0c\u5176\u4e2d\u5305\u62ec\u5404\u5bc6\u9470\u7684\u5143\u6578\u64da\u3002\n **\u5982\u9700\u7372\u53d6\u670d\u52d9\u8cec\u865f\u5bc6\u9470\u7684\u516c\u9470\u6578\u64da\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c** \uff1a\n\u904b\u884c [gcloud beta iam service-accounts keys get-public-key](https://cloud.google.com/sdk/gcloud/reference/beta/iam/service-accounts/keys/get-public-key?hl=zh-cn) \u547d\u4ee4\uff1a\n```\ngcloud beta iam service-accounts keys get-public-key KEY_ID \\\u00a0 \u00a0 --iam-account=SA_NAME@PROJECT_ID.iam.gserviceaccount.com \\\u00a0 \u00a0 --output-file=FILENAME\n```\n\u8acb\u63d0\u4f9b\u4ee5\u4e0b\u503c\uff1a- ``\uff1a\u60a8\u8981\u7372\u53d6\u7684\u516c\u9470\u7684 ID\u3002 \u5982\u9700\u67e5\u627e\u5bc6\u9470\u7684 ID\uff0c\u8acb [\u5217\u51fa\u670d\u52d9\u8cec\u865f\u7684\u6240\u6709\u5bc6\u9470](#list-keys) \uff0c\u627e\u5230\u8981\u7372\u53d6\u7684\u5bc6\u9470\uff0c\u7136\u5f8c\u8907\u88fd\u5176 ID\u3002\n- ``\uff1a\u60a8\u8981\u7372\u53d6\u5176\u516c\u9470\u7684\u670d\u52d9\u8cec\u865f\u7684\u540d\u7a31\u3002\n- ``\uff1a\u60a8\u7684 Google Cloud \u9805\u76ee ID\u3002\n- ``\uff1a\u8981\u5728\u5176\u4e2d\u4fdd\u5b58\u516c\u9470\u6578\u64da\u7684\u6587\u4ef6\u3002\n\u9ed8\u8a8d\u60c5\u6cc1\u4e0b\uff0c\u516c\u9470\u6578\u64da\u4f7f\u7528 X.509 PEM \u683c\u5f0f\u4fdd\u5b58\u3002\u5982\u9700\u7372\u53d6\u539f\u59cb\u516c\u9470\uff0c\u8acb\u904b\u884c\u5e36\u6709\u9644\u52a0\u6a19\u8a8c `--type=raw` \u7684\u8a72\u547d\u4ee4\u3002\n\u4f8b\u5982\uff0c\u4ee5\u4e0b\u547d\u4ee4\u6703\u7372\u53d6\u5c6c\u65bc\u670d\u52d9\u8cec\u865f `my-service-account@my-project.iam.gserviceaccount.com` \u7684\u5bc6\u9470 `c97cc34494c07c9b483701f28368f20145b9ef97` \u7684\u516c\u9470\u6578\u64da\uff0c\u7136\u5f8c\u5c07\u516c\u9470\u6578\u64da\u4fdd\u5b58\u5230 `public_key.pem` \u6587\u4ef6\u4e2d\uff1a\n```\ngcloud beta iam service-accounts keys get-public-key \\\u00a0 \u00a0 c97cc34494c07c9b483701f28368f20145b9ef97 \\\u00a0 \u00a0 --iam-account=my-service-account@my-project.iam.gserviceaccount.com \\\u00a0 \u00a0 --output-file=public_key.pem\n```\n **\u5982\u9700\u7372\u53d6\u670d\u52d9\u8cec\u865f\u5bc6\u9470\u7684\u5143\u6578\u64da\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c** \uff1a\n\u904b\u884c [gcloud iam service-accounts keys list](https://cloud.google.com/sdk/gcloud/reference/iam/service-accounts/keys/list?hl=zh-cn) \u547d\u4ee4\uff1a\n```\ngcloud iam service-accounts keys list --iam-account=SA_NAME \\\u00a0 \u00a0 --filter=\"name~KEY_ID\" --format=json\n```\n\u8acb\u63d0\u4f9b\u4ee5\u4e0b\u503c\uff1a- ``\uff1a\u60a8\u8981\u7372\u53d6\u5176\u5bc6\u9470\u5143\u6578\u64da\u7684\u670d\u52d9\u8cec\u865f\u7684\u540d\u7a31\u3002\n- ``\uff1a\u60a8\u8981\u67e5\u770b\u5176\u5143\u6578\u64da\u7684\u5bc6\u9470\u7684 ID\u3002\n\u4f8b\u5982\uff0c\u4ee5\u4e0b\u547d\u4ee4\u6703\u7372\u53d6\u5c6c\u65bc\u670d\u52d9\u8cec\u865f `my-service-account@my-project.iam.gserviceaccount.com` \u7684\u5bc6\u9470 `c97cc34494c07c9b483701f28368f20145b9ef97` \u7684\u5143\u6578\u64da\uff1a\n```\ngcloud iam service-accounts keys list \\\u00a0 \u00a0 --iam-account=my-service-account@my-project.iam.gserviceaccount.com \\\u00a0 \u00a0 --filter=\"name~c97cc34494c07c9b483701f28368f20145b9ef97\" --format=json\n``` ` [projects.serviceAccounts.keys.get](https://cloud.google.com/iam/docs/reference/rest/v1/projects.serviceAccounts.keys/get?hl=zh-cn) ` \u65b9\u6cd5\u5c07\u8fd4\u56de\u8a72\u670d\u52d9\u8cec\u865f\u7684\u4e00\u500b\u516c\u9470\u7684\u76f8\u95dc\u4fe1\u606f\u3002\n\u5728\u4f7f\u7528\u4efb\u4f55\u8acb\u6c42\u6578\u64da\u4e4b\u524d\uff0c\u8acb\u5148\u9032\u884c\u4ee5\u4e0b\u66ff\u63db\uff1a- ``\uff1a\u60a8\u7684 Google Cloud \u9805\u76ee ID\u3002\u9805\u76ee ID \u662f\u5b57\u6bcd\u6578\u5b57\u5b57\u7b26\u4e32\uff0c\u4f8b\u5982`my-project`\u3002\n- ``\uff1a\u60a8\u8981\u7372\u53d6\u5176\u516c\u9470\u7684\u670d\u52d9\u8cec\u865f\u7684\u540d\u7a31\u3002\n- ``\uff1a\u60a8\u8981\u7372\u53d6\u7684\u516c\u9470\u7684 ID\u3002 \u5982\u9700\u67e5\u627e\u5bc6\u9470\u7684 ID\uff0c\u8acb [\u5217\u51fa\u670d\u52d9\u8cec\u865f\u7684\u6240\u6709\u5bc6\u9470](#list-keys) \uff0c\u627e\u5230\u8981\u7372\u53d6\u7684\u5bc6\u9470\uff0c\u7136\u5f8c\u5f9e`name`\u5b57\u6bb5\u7684\u672b\u5c3e\u8907\u88fd\u5176 ID\u3002\u5bc6\u9470\u7684 ID \u662f`keys/`\u4e4b\u5f8c\u7684\u6240\u6709\u5167\u5bb9\u3002\n- ``\uff1a\u7528\u65bc\u8fd4\u56de\u516c\u9470\u7684\u683c\u5f0f\u3002\u4f7f\u7528`TYPE_X509_PEM_FILE`\u53ef\u6307\u5b9a X.509 PEM \u683c\u5f0f\uff0c\u6216\u4f7f\u7528`TYPE_RAW_PUBLIC_KEY`\u4ee5\u6307\u5b9a\u539f\u59cb\u516c\u9470\u3002\u5982\u679c\u7701\u7565\u6b64\u67e5\u8a62\u53c3\u6578\uff0c\u5247\u8a72\u65b9\u6cd5\u6703\u8fd4\u56de\u5bc6\u9470\u7684\u5143\u6578\u64da\uff0c\u800c\u4e0d\u6703\u8fd4\u56de\u516c\u9470\u6578\u64da\u3002\nHTTP \u65b9\u6cd5\u548c\u7db2\u5740\uff1a\n```\nGET https://iam.googleapis.com/v1/projects/PROJECT_ID/serviceAccounts/SA_NAME@PROJECT_ID.iam.gserviceaccount.com/keys/KEY_ID?publicKeyType=KEY_TYPE\n```\n\u5982\u9700\u767c\u9001\u60a8\u7684\u8acb\u6c42\uff0c\u8acb\u5c55\u958b\u4ee5\u4e0b\u9078\u9805\u4e4b\u4e00\uff1a\n\u60a8\u61c9\u8a72\u6536\u5230\u985e\u4f3c\u4ee5\u4e0b\u5167\u5bb9\u7684 JSON \u97ff\u61c9\uff1a\n```\n{\n \"name\": \"projects/my-project/serviceAccounts/my-service-account@my-project.iam.gserviceaccount.com/keys/f4a83933ac07cf52bb74e0e66d99662a09f51a36\",\n \"validAfterTime\": \"2021-12-10T17:32:06Z\",\n \"validBeforeTime\": \"9999-12-31T23:59:59Z\",\n \"publicKeyData\": \"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvRENDQWVTZ0F3SUJBZ0lJT2lCdm9hR09nV0F3RFFZSktvWklodmNOQVFFRkJRQXdJREVlTUJ3R0ExVUUKQXhNVk1UQXhNVGsxTlRFMk5UWXlPRGszTmpFek1qQXpNQ0FYRFRJeE1USXhNREUzTXpJd05sb1lEems1T1RreApNak14TWpNMU9UVTVXakFnTVI0d0hBWURWUVFERXhVeE1ERXhPVFUxTVRZMU5qSTRPVGMyTVRNeU1ETXdnZ0VpCk1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRQzdzeDBFcXVUMGNwSXhlczl1SW0yRy9DS3EKdnc4YTl2a2JkaWZZbDZHSDh1ZUxEWDhGNHVUeEVQMkNzU3JLTHZtOFo2My9IVUxnWjBtQXByb0JlM08vaVR1ZwpmYVZ0NVNtakhvWm9YQ1lpbjR0MS93SkpvdDhrRFdPeDZhOEdieUdqZ215ak8yYk1XdEtaQ2dqeGZ3cUV0MmN3CklnajA5VzJKYTlHTWRsdVA0VGVubTRKSkJoaFpFbTJ1bVAwYVZZdkRnUWF5d0RCYnJuNG8yY0EzSWplRDZGM1gKK0VHRDNKU0s4VW02Sk5sM21adGp6VWNZSHBrYkF0U1A2ZDI5d1RmZkdIRFY0THJRWlM3bG15d3hsb3p5WnpaawpCOFpHckMzSkF1MVNVRTdQOTN6bWtFb1B6MlRUNWhaYXZMWFQ5TGM2SExiRklRVHFnVEJVWHlNMkpIcGZBZ01CCkFBR2pPREEyTUF3R0ExVWRFd0VCL3dRQ01BQXdEZ1lEVlIwUEFRSC9CQVFEQWdlQU1CWUdBMVVkSlFFQi93UU0KTUFvR0NDc0dBUVVGQndNQ01BMEdDU3FHU0liM0RRRUJCUVVBQTRJQkFRQkhPNXlpUDY3NkE4UEN2RjdRSzdFMApYZVljbzdsSStFZkowaGJrWVlmdUtnSENPcXcvd3FBbCtOSithanljT2FPWDFPMlRZN3ZOc05pR2t3eWc2QXdqCklhL1NHVjd3NkxpS2JldFRuSVp4UlhRY25lcnVvZEwycUR5eWphMDJJSXJVTmVKY1o0MVJBNXRTL3NkcTFGNm4KM0NjSXFoZTI1OTA4TUNna3cwaFB1K0VLbFF6R1B5T3pVRHBLdXg0cnRBaHJTYTBUVW1wbEMxdTJnUk1YRkF6aApWUjU0V2dNa2tabURyalBNeWdBS3JmNkd0bHo2VHRTYTVLb1BWdGpsWExUQkxaSnlhdk4zc1F2dFlBK1NFQWpWCnA1N1ZabFBYZmR0dWN4ekJaOC9zS25SOHNyYU5hVWFjamg1NEE1Nm1URTE3b0IyUWkrTHBJUTYvNnVqVnNXaUYKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=\",\n \"keyAlgorithm\": \"KEY_ALG_RSA_2048\",\n \"keyOrigin\": \"GOOGLE_PROVIDED\",\n \"keyType\": \"USER_MANAGED\"\n}\n```\n## \u5f8c\u7e8c\u6b65\u9a5f\n- \u77ad\u89e3\u5982\u4f55 [\u5275\u5efa\u548c\u522a\u9664\u670d\u52d9\u8cec\u865f\u5bc6\u9470](https://cloud.google.com/iam/docs/keys-create-delete?hl=zh-cn) \u3002\n- \u77ad\u89e3\u5982\u4f55 [\u505c\u7528\u548c\u5553\u7528\u670d\u52d9\u8cec\u865f\u5bc6\u9470](https://cloud.google.com/iam/docs/keys-disable-enable?hl=zh-cn) \u3002\n- \u77ad\u89e3 [\u4f7f\u7528\u670d\u52d9\u8cec\u865f\u5bc6\u9470\u9032\u884c\u8eab\u4efd\u9a57\u8b49\u7684\u66ff\u4ee3\u65b9\u6848](https://cloud.google.com/docs/authentication?hl=zh-cn#auth-decision-tree) \u3002\n- \u77ad\u89e3\u5982\u4f55\u4f7f\u7528\u670d\u52d9\u8cec\u865f\u5bc6\u9470\u9032\u884c [\u670d\u52d9\u8cec\u865f\u8eab\u4efd\u9a57\u8b49](https://cloud.google.com/docs/authentication/provide-credentials-adc?hl=zh-cn#wlif-key) \u3002\n- \u77ad\u89e3 [\u7ba1\u7406\u670d\u52d9\u8cec\u865f\u5bc6\u9470\u7684\u6700\u4f73\u5be6\u8e10](https://cloud.google.com/iam/docs/best-practices-for-managing-service-account-keys?hl=zh-cn) \u3002", "guide": "IAM"}