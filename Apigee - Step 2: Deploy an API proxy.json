{"title": "Apigee - Step 2: Deploy an API proxy", "url": "https://cloud.google.com/apigee/docs/api-platform/get-started/what-apigee", "abstract": "# Apigee - Step 2: Deploy an API proxy\nNow that you've configured and the Apigee UI, and installed and configured the runtime, you're ready to see how it all works together.\n", "content": "## 1. Create a new API proxy using the Apigee UI\nThis section describes how to create a new API proxy in the UI using the API Proxy Wizard.\n**Note:** There is a  new version of the Apigee UI, which is integrated with the Google Cloud console. The new UI is called. The instructions in the first two tabs below explain how to use either Apigee in Cloud console or classic Apigee.\nTo create a new API proxy using Apigee in Cloud console:- Open [Apigee UI in Cloud console](https://console.cloud.google.com/apigee) in a browser.\n- Select your organization from the dropdown menu in the upper left corner.\n- Select **Proxy development > API proxies** in the main view.\n- Click **Create** .The API Proxy Wizard starts.\n- Select **Reverse proxy** (most common).The **Proxy details** view is displayed.\n- Configure your proxy with the following settings:- **Proxy name:** Enter **myproxy** . The remaining steps in this section assume    that this is your proxy's ID.\n- **Base path:** Automatically set to **/** followed by the    proxy name, which in this example is **/myproxy** . The **Base\n    path** is part of the URL used to make requests to your API. Edge uses the URL to    match and route incoming requests to the proper API proxy.\n- (Optional) ** Description:** Enter a description for your new API proxy, such    as \"Testing Apigee hybrid with a simple proxy\".\n- **Target (Existing API):** Enter \"https://mocktarget.apigee.net\". This defines the    target URL that Apigee invokes on a request to the API proxy. The mocktarget service is    hosted at Apigee and returns simple data. It requires no API key or access token.\nYour API proxy's details should look like the following:\n- Click **Next** .\n- On the **Policies** screen, select **Pass through (no authorization)** as the   security option.\n- Click **Next** .\n- Under **Deploy (optional)** , you have the option to select one or more   environments   in which to deploy your proxy, in the **Deployment environments** field.   If you prefer not to deploy the proxy at this   point, leave the **Deployment environments** field empty. You can always deploy   the proxy later.\n- Click **Create** .   Apigee generates the proxy (sometimes referred to as).\nApigee displays the **Proxy summary** view.  If you chose to deploy the proxy, the **Deployments** section displays the **Revision** number, which is 1 when you first deploy. The **Status** column displays the  environments in which the proxy is deployed with a green status indicator.\nBelow that, the **Endpoints** section displays:- **Proxy endpoints** : The basepath you set for the proxy, which is this example    is`/myproxy`.\n- **Target endpoints** : The basepath you set for the target, which in this    example is`https://mocktarget.apigee.net`.\nTo create a new API proxy using Classic Apigee:- Open [Apigee UI](https://apigee.google.com) in a browser.\n- Select your organization from the dropdown menu in the upper left corner.\n- Select **Develop > API Proxies** in the main view.\n- Click **Create New** .The API Proxy Wizard starts.\n- Select **Reverse proxy** (most common).The **Proxy details** view is displayed.\n- Configure your proxy with the following settings:- **Proxy Name:** Enter \"myproxy\". The remaining steps in this section assume   that this is your proxy's ID.\n- **Proxy Base Path:** Automatically set to \"/myproxy\". The **Proxy Base\n  Path** is part of the URL used to make requests to your API. Edge uses the URL to   match and route incoming requests to the proper API proxy.\n- (Optional) ** Description:** Enter a description for your new API proxy, such   as \"Testing Apigee hybrid with a simple proxy\".\n- **Target (Existing API):** Enter \"https://mocktarget.apigee.net\". This defines the   target URL that Apigee invokes on a request to the API proxy. The mocktarget service is   hosted at Apigee and returns simple data. It requires no API key or access token.\nYour API proxy's details should look like the following:\n- Click **Next** .\n- On the **Policies** screen, select **Pass through (no authorization)** as the  security option.\n- Click **Next** .\n- On the **Summary** screen, select an environment to deploy your proxy to and  click **Create and Deploy** .Hybrid generates the proxy (sometimes referred to as ): \n- Click **Go to proxy list** .Apigee displays the **Proxies** view, which displays a list of API proxies. Your  new proxy should display with a green status indicator, meaning that it has been deployed.## \n 2. Call the API proxy\nWhen the UI indicates your proxy is deployed, you can try calling it using cURL or the REST client of your choice. For example:\n- Make sure your`DOMAIN`environment variable is set to the domain name you used for  the hostname for your environment group in [Project and org  setup - Step 3: Create an environment group](/apigee/docs/hybrid/v1.11/precog-add-environment) .```\necho $DOMAIN\n```\n- Find the external IP address and port of the Apigee ingress gateway with the following command:```\nkubectl get svc -n apigee -l app=apigee-ingressgateway\n```Your output should look something like:```\nNAME          TYPE   CLUSTER-IP EXTERNAL-IP  PORT(S)          AGE\napigee-ingressgateway-prod-hybrid-37a39bd LoadBalancer 192.0.2.123 233.252.0.123 15021:32049/TCP,80:31624/TCP,443:30723/TCP 16h\n```\n- Export your external IP and port to variables:```\nexport INGRESS_IP_ADDRESS=EXTERNAL_IP_ADDRESS\nexport INGRESS_PORT=PORT_NUMBER\n```\n- Call the API proxy:```\ncurl -H Host:$DOMAIN --resolve \\\n $DOMAIN:$INGRESS_PORT:$INGRESS_IP_ADDRESS \\\n https://$DOMAIN:$INGRESS_PORT/myproxy -k\n```For example:```\ncurl -H Host:example.com --resolve example.com:443:233.252.0.123 https://example.com:443/myproxy -k\n```\nTo learn more about building and deploying API proxies, see [Build your first proxy overview](/apigee/docs/api-platform/get-started/get-started) .\n**Congratulations!** You've successfully installed Apigee hybrid. To learn more about building and deploying API proxies, see [Introduction to API proxy building](/apigee/docs/api-platform/fundamentals/build-simple-api-proxy) .", "guide": "Apigee"}