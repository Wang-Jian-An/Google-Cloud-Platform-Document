{"title": "Apigee - Expand Istio property replica counts to avoid problems when draining Istio nodes", "url": "https://cloud.google.com/apigee/docs/api-platform/get-started/what-apigee", "abstract": "# Apigee - Expand Istio property replica counts to avoid problems when draining Istio nodes\nYou are currently viewing version 1.3 of the Apigee hybrid documentation. **This version is end of life.** You should upgrade to a newer version. For more information, see [Supported versions](/apigee/docs/hybrid/supported-platforms#supported-versions) .\nWhen draining Istio pods some nodes may not drain because they have a replica count of 1, while 3 or more replicas are required. In order to avoid this, you should set the minimum replica count for each property to at least 3.\nWhen backing up and draining Istio nodes you may see errors like:\n```\nkubectl drain` failed to evict and reschedule pods to another node due to PodDisruptionBudget definitions:\n===\nNAMESPACE NAME MIN AVAILABLE MAX UNAVAILABLE ALLOWED DISRUPTIONS AGE\nistio-system istio-ingressgateway 1 N/A 2 5d11h\nistio-system istio-pilot 1 N/A 2 5d11h\n===\n```\nFor `istio-ingressgateway` and `istio-pilot` you can set the `istio.ingressgateway.replicaCountMin` and `istio.pilot.replicaCountMin` properties to **3** or higher. See the [Configuration properties reference, istio](/apigee/docs/hybrid/v1.3/config-prop-ref#istio) .\nFor other `istio` components (that don't have a replicaCountMin property), see [Manually upgrading a cluster or node pool](https://cloud.google.com/kubernetes-engine/docs/how-to/upgrading-a-cluster) in the GKE documentation or [IstioOperator Options](https://istio.io/latest/docs/reference/config/istio.operator.v1alpha1/) in the Istio documentation", "content": ".", "guide": "Apigee"}