{"title": "Apigee - Viewing restore logs", "url": "https://cloud.google.com/apigee/docs/api-platform/get-started/what-apigee", "abstract": "# Apigee - Viewing restore logs\nYou are currently viewing version 1.6 of the Apigee hybrid documentation. **This version is end of life.** You should upgrade to a newer version. For more information, see [Supported versions](/apigee/docs/hybrid/supported-platforms#supported-versions) .\nThis page describes how you can check the restore job logs to confirm completion and validate the restore.\n", "content": "## \n Verifying completion\nTo verify that the restore operation completed successfully:\n- Use the following command to check if the restore operation completed without error:```\nkubectl get pods -n -l job-name=apigee-cassandra-restore\n```The output is similar to the following:```\nNAME \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 READY \u00a0 \u00a0 STATUS \u00a0 \u00a0 \u00a0RESTARTS \u00a0 AGEapigee-cassandra-restore-6tttv \u00a0 \u00a0 0/1 \u00a0 \u00a0 \u00a0 Completed \u00a0 0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a023m\n```\n- Use the following command to check if the cassandra replicas are up and running:```\nkubectl get pods -n -l app=apigee-cassandra\n```The output is similar to the following:```\nNAME \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 READY \u00a0 \u00a0 STATUS \u00a0 \u00a0 \u00a0RESTARTS \u00a0 AGEapigee-cassandra-default-0 \u00a0 \u00a0 1/1 \u00a0 \u00a0 \u00a0 Running \u00a0 \u00a0 0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a024mapigee-cassandra-default-1 \u00a0 \u00a0 1/1 \u00a0 \u00a0 \u00a0 Running \u00a0 \u00a0 0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a023mapigee-cassandra-default-2 \u00a0 \u00a0 1/1 \u00a0 \u00a0 \u00a0 Running \u00a0 \u00a0 0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a022m\n```## \n Viewing restore logs\nTo view the restore logs of a Kubernetes pod, run the `kubectl logs -f <pod_name> -n <namespace>` command. For example:\n```\nkubectl logs -f apigee-cassandra-restore-b4lgf -n apigee\n```\n## \n Validating restore\nUpon completing the restore operation, you can use the control plane to confirm that your organization's developers, apps, and API products were restored correctly.\nTo view the restored data:\n- On the command line, get or refresh your gcloud authentication credentials, as the following example shows:```\nTOKEN=$(gcloud auth print-access-token)\n```\n- Use the following command to validate your organization's data, whereis  an Apigee organization deployed in the cluster:- For developer data:```\ncurl -s -H \"$auth\" https://apigee.googleapis.com/v1/organizations/APIGEE_ORG/developers\n```\n- For apps data:```\ncurl -s -H \"$auth\" https://apigee.googleapis.com/v1/organizations/APIGEE_ORG/apps\n```\n- For API product data:```\ncurl -s -H \"$auth\" https://apigee.googleapis.com/v1/organizations/APIGEE_ORG/apiproducts\n```**Note** : Confirm that your APIs are working as expected before adding a restored cluster  to your traffic.\n## \n DNS Configuration for new cluster and traffic cutover\nOnce you are satisfied with validation, redirect the traffic to the new cluster and change the dns entry to new ingress `EXTERNAL-IP` address.\nGet the `EXTERNAL-IP` with the following command:\n```\nkubectl get svc -n istio-system\n```\n```\nNAME \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 TYPE \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 CLUSTER-IP \u00a0 \u00a0 EXTERNAL-IP \u00a0 \u00a0PORT(S) \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0AGEistio-ingressgateway \u00a0 \u00a0 \u00a0 LoadBalancer \u00a0 10.11.123.45 \u00a0 34.56.78.90 \u00a0 15021:32225/TCP,80:32208/TCP,443:31942/TCP,15012:32689/TCP,15443:31936/TCP \u00a0 1d\n```", "guide": "Apigee"}