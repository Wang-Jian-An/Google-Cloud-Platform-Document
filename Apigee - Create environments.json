{"title": "Apigee - Create environments", "url": "https://cloud.google.com/apigee/docs/api-platform/get-started/what-apigee", "abstract": "# Apigee - Create environments\nYou are currently viewing version 1.1 of the Apigee hybrid documentation. **This version is end of life.** You should upgrade to a newer version. For more information, see [Supported versions](/apigee/docs/hybrid/supported-platforms#supported-versions) .\nThis topic explains how to create new environments. For an introduction, see [About environments and environment groups](/apigee/docs/api-platform/fundamentals/environments-overview) .\n", "content": "## How to add an environment\nThe steps for adding an environment are described in adding and configuring an environment are explained in [Step 5: Add an environment](/apigee/docs/hybrid/v1.1/precog-add-environment) and [ Specify configuration overrides](/apigee/docs/hybrid/v1.1/install-copy-overrides#specify-configuration-overrides) .\n## \n How to add multiple environments\n- Create a new environment in the [Apigee UI](https://apigee.google.com) or with the [Create environments API](/apigee/docs/reference/apis/apigee/rest/v1/organizations.environments/create) . For the basic steps, see [Step 5: Add an environment](/apigee/docs/hybrid/v1.1/precog-add-environment) .\n- Add a new environment definition to the `envs` array in your overrides file. Give the new environment the same name as the one you created in the UI. For example, the following configuration defines two environments: **test** and **prod** :```\nnamespace: my-namespace\norg: my-organization\n...\nenvs:\n - name: test\n sslCertPath: \"your_certpath/ingress-cert.crt\"\n sslKeyPath: \"your_keypath/ingress-key.key\"\n hostAlias: \"apitest.example.com\"\n serviceAccountPaths:\n  synchronizer: \"your_keypath/synchronizer-manager-service-account.json\n  udca: \"your_keypath/analytic-agent-service-account.json\n - name: prod\n sslCertPath: \"your_certpath/ingress-cert.crt\"\n sslKeyPath: \"your_keypath/ingress-key.key\"\n hostAlias: \"apiprod.example.com\"\n serviceAccountPaths:\n  synchronizer: \"your_keypath/synchronizer-manager-service-account.json\n  udca: \"your_keypath/analytic-agent-service-account.json\n...\n```\nFor a complete list of environment configuration elements, see [envs]() in the [Configuration property reference](/apigee/docs/hybrid/v1.1/config-prop-ref#envs) .\n## Host aliases with multiple environments\nIf you have multiple enviroments, each one can have its own host alias, or multiple enviromments  can share the same host alias. For details, see [ About virtual hosts and environments](/apigee/docs/hybrid/v1.1/environments-about#about-virtual-hosts-and-environments) and [ Environments can share the same host alias](/apigee/docs/hybrid/v1.1/environments-about#environments-can-share-the-same-host-alias) . If multiple environments share the same  host alias, you must use the technique called [base path routing](/apigee/docs/hybrid/v1.1/base-path-routing) to route proxy requests to the correct environment.\n## TLS keys and certificates\nWhen you create a new environment, you must provide a TLS key and certificate to the environment configuration. The key/cert are used to provide secure communication with the ingress gateway.\nIt is up to you how you generate proper TLS certificate/key pairs for your hybrid configuration. The following topics are provided as samples only, intended primarily for trying out or testing a new hybrid installation if it isn't feasible to obtain TLS credentials in another way:\n- See [Obtain TLS credentials](/apigee/docs/hybrid/v1.1/lets-encrypt) for a set of sample  steps for creating an authorized TLS certificate/key pair.\n- You can use a self-signed certificate/key pair(s) for testing purposes only. See [Generate self-signed TLS credentials](/apigee/docs/hybrid/v1.1/environment-self-signed-tls) .", "guide": "Apigee"}