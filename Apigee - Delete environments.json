{"title": "Apigee - Delete environments", "url": "https://cloud.google.com/apigee/docs/api-platform/get-started/what-apigee", "abstract": "# Apigee - Delete environments\nYou are currently viewing version 1.1 of the Apigee hybrid documentation. **This version is end of life.** You should upgrade to a newer version. For more information, see [Supported versions](/apigee/docs/hybrid/supported-platforms#supported-versions) .\nThis topic explains how to delete environments. For an introduction, see [About environments and environment groups](/apigee/docs/api-platform/fundamentals/environments-overview) .\n", "content": "## \n About deleting environments\nTo delete an environment properly, you must make several configuration changes and apply them to your cluster. These changes include removing the environment definition from your overrides file, deleting the `synchronizer` , `runtime` , and `udca` components, and finally re-applying your overrides to restore your cluster without including the environment you wish to delete.\nThe reason you can't only delete the environment in one step is because the other elements, `synchronizer` , `runtime` , and `udca` are connected to each environment through their internal configurations. Only by deleting them and re-applying them can you properly delete an environment.\n## \n How to delete an environment\nAssume that you have two environments, **test** and **prod** . In your overrides file, the definitions might look something like this:\n```\n...\nenvs:\n - name: test\n sslCertPath: \"your_certpath/ingress-cert.crt\"\n sslKeyPath: \"your_keypath/ingress-key.key\"\n hostAlias: \"apitest.example.com\"\n serviceAccountPaths:\n  synchronizer: \"your_keypath/synchronizer-manager-service-account.json\n  udca: \"your_keypath/analytic-agent-service-account.json\n - name: prod\n sslCertPath: \"your_certpath/ingress-cert.crt\"\n sslKeyPath: \"your_keypath/ingress-key.key\"\n hostAlias: \"apiprod.example.com\"\n serviceAccountPaths:\n  synchronizer: \"your_keypath/synchronizer-manager-service-account.json\n  udca: \"your_keypath/analytic-agent-service-account.json\n...\n```\nTo delete the **prod** environment, follow these steps:\n- Copy your original overrides file -- the one that contains both the **prod** and **test** environment definitions --  to a new file called, for example,`prod-delete.yaml`.\n- Open`prod-delete.yaml`.\n- Delete the`test`environment definition from`envs`,  leaving only the **prod** definition. For example:```\n...\nenvs:\n - name: prod\n sslCertPath: \"your_certpath/ingress-cert.crt\"\n sslKeyPath: \"your_keypath/ingress-key.key\"\n hostAlias: \"apitest.example.com\"\n serviceAccountPaths:\n  synchronizer: \"your_keypath/synchronizer-manager-service-account.json\n  udca: \"your_keypath/analytic-agent-service-account.json\n```\n- Remove everything else from`prod-delete.yaml` **except** the`cassandra`config, if present:After making the above changes, your overrides file should look something  like this:```\n...\nenvs:\n - name: prod\n sslCertPath: \"your_certpath/ingress-cert.crt\"\n sslKeyPath: \"your_keypath/ingress-key.key\"\n hostAlias: \"apitest.example.com\"\n serviceAccountPaths:\n  synchronizer: \"your_keypath/synchronizer-manager-service-account.json\n  udca: \"your_keypath/analytic-agent-service-account.json\ncassandra:\n replicaCount: 3\n resources:\n requests:\n  cpu: 3500m\n  memory: 7Gi\n storage:\n storageClass: pd-ssd\n capacity: 10Gi\n \n```\n- Run this command to delete the specified components:```\napigeectl delete -f prod-delete.yaml -c runtime, udca, synchronizer\n```\n- Open your **original** overrides file (the one that includes both the test and prod environment definitions).\n- Delete the`prod`environment definition from the`envs`element. You only want the`test`environment definition to be present in the file.\n- Apply the modified overrides file to your cluster. This command will recreate the deleted  elements and, because it is omitted, not recreate the`prod`environment.```\napigeectl apply -f prod-delete.yaml -c runtime, udca, synchronizer\n```\n- Save your changes.\n- You're not quite done. You must now update the environments in the hybrid UI.\n- Open a browser and navigate to the hybrid UI at [Apigee UI](https://apigee.google.com) .\n- Remove the environment using the steps described [Delete an existing environment in the Hybrid UI](/apigee/docs/hybrid/v1.1/manage-environments#delete) .", "guide": "Apigee"}