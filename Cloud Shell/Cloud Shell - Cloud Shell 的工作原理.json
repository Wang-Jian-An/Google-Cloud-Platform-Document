{"title": "Cloud Shell - Cloud Shell \u7684\u5de5\u4f5c\u539f\u7406", "url": "https://cloud.google.com/shell/docs/how-cloud-shell-works?hl=zh-cn", "abstract": "# Cloud Shell - Cloud Shell \u7684\u5de5\u4f5c\u539f\u7406\nCloud Shell \u6703\u9810\u914d\u4e00\u500b\u904b\u884c\u57fa\u65bc Debian \u7684 Linux \u64cd\u4f5c\u7cfb\u7d71\u7684 Compute Engine \u865b\u64ec\u6a5f\u4ee5\u4f9b\u81e8\u6642\u4f7f\u7528\u3002\u6b64\u865b\u64ec\u6a5f\u7531 Google Cloud \u64c1\u6709\u548c\u7ba1\u7406\uff0c\u56e0\u6b64\u4e0d\u6703\u51fa\u73fe\u5728\u60a8\u7684\u4efb\u4f55 Google Cloud \u9805\u76ee\u4e2d\u3002\n**\u6ce8\u610f** \uff1a\u60a8\u7684\u7d44\u7e54\u63a7\u5236\u60a8\u662f\u5426\u6709\u6b0a\u8a2a\u554f Cloud Shell\u3002\nCloud Shell \u5be6\u4f8b\u6309\u6bcf\u500b\u7528\u6236\u3001\u6bcf\u500b\u6703\u8a71\u9032\u884c\u9810\u914d\u3002\u7576\u60a8\u7684 Cloud Shell \u6703\u8a71\u8655\u65bc\u6d3b\u8e8d\u72c0\u614b\u6642\uff0c\u6b64\u5be6\u4f8b\u6703\u6301\u7e8c\u5b58\u5728\uff1b\u5982\u679c\u8655\u65bc\u975e\u6d3b\u8e8d\u72c0\u614b\u4e00\u5c0f\u6642\u5f8c\uff0c\u60a8\u7684\u6703\u8a71\u5c07\u7d42\u6b62\uff0c\u5176\u865b\u64ec\u6a5f\u5c07\u88ab\u6368\u68c4\u3002\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u7528\u91cf\u914d\u984d\uff0c\u8acb\u53c3\u95b1 [\u9650\u5236\u6307\u5357](https://cloud.google.com/shell/docs/limitations?hl=zh-cn#usage_limits) \u3002\n\u6191\u85c9\u9ed8\u8a8d\u7684 Cloud Shell \u9ad4\u9a57\uff0c\u60a8\u5c07\u5206\u914d\u6709\u4e00\u500b\u81e8\u6642\u7684\u3001\u9810\u914d\u7f6e\u7684\u865b\u64ec\u6a5f\uff0c\u4e26\u4e14\u60a8\u4f7f\u7528\u7684\u74b0\u5883\u662f\u5728\u8a72\u865b\u64ec\u6a5f\u4e0a\u904b\u884c\u7684 Docker \u5bb9\u5668\u3002\u60a8\u9084\u53ef\u4ee5\u5728\u865b\u64ec\u6a5f\u5553\u52d5\u6642\u81ea\u52d5 [\u81ea\u5b9a\u7fa9\u74b0\u5883](https://cloud.google.com/shell/docs/custom-environments?hl=zh-cn) \uff0c\u4ee5\u78ba\u4fdd Cloud Shell \u5be6\u4f8b\u5305\u542b\u60a8\u7684\u9996\u9078\u5de5\u5177\u3002\n", "content": "## \u6c38\u4e45\u6027\u78c1\u76e4\u5b58\u5132\u7a7a\u9593\nCloud Shell \u514d\u8cbb\u9810\u914d 5 GB \u7684 [\u6c38\u4e45\u6027\u78c1\u76e4\u5b58\u5132\u7a7a\u9593](https://cloud.google.com/compute/docs/disks/persistent-disks?hl=zh-cn) \uff0c\u88dd\u8f09\u7232\u60a8\u5728\u865b\u64ec\u6a5f\u5be6\u4f8b\u4e0a\u7684 `$HOME` \u76ee\u9304\u3002\u6b64\u5b58\u5132\u7a7a\u9593\u6309\u7528\u6236\u5206\u914d\uff0c\u4e26\u4e14\u53ef\u4ee5\u4f9b\u591a\u500b\u9805\u76ee\u4f7f\u7528\u3002\u8207\u5be6\u4f8b\u672c\u8eab\u4e0d\u540c\uff0c\u6b64\u5b58\u5132\u7a7a\u9593\u4e0d\u6703\u56e0\u8655\u65bc\u975e\u6d3b\u8e8d\u72c0\u614b\u800c\u8d85\u6642\u3002\u60a8\u5b58\u5132\u5728\u4e3b\u76ee\u9304\u4e2d\u7684\u6240\u6709\u6587\u4ef6\uff08\u5305\u62ec\u5b89\u88dd\u7684\u8edf\u4ef6\u3001\u8173\u672c\u4ee5\u53ca `.bashrc` \u548c `.vimrc` \u7b49\u7528\u6236\u914d\u7f6e\u6587\u4ef6\uff09\u5728\u4e0d\u540c\u6703\u8a71\u4e4b\u9593\u4fdd\u6301\u4e0d\u8b8a\u3002\u60a8\u7684 `$HOME` \u76ee\u9304\u53ea\u6709\u60a8\u81ea\u5df1\u53ef\u4ee5\u770b\u5230\uff0c\u5176\u4ed6\u7528\u6236\u7121\u6cd5\u8a2a\u554f\u3002\n**\u8b66\u544a** \uff1a\u5982\u679c\u60a8\u522a\u9664 `$HOME` \u76ee\u9304\uff0c\u6216\u8005\u5728 120 \u5929\u5167\u6c92\u6709\u8a2a\u554f Cloud Shell\uff0cCloud Shell \u6703\u81ea\u52d5\u522a\u9664\u60a8\u7684 `$HOME` \u76ee\u9304\uff0c\u4e26\u4e14\u7121\u6cd5\u6062\u5fa9\u60a8\u7684\u6587\u4ef6\u3002\u5728\u9077\u79fb\u4e4b\u524d\uff0c\u60a8\u6703\u6536\u5230\u96fb\u5b50\u90f5\u4ef6\u901a\u77e5\u3002\u5553\u52d5 Cloud Shell \u6703\u8a71\u53ef\u9632\u6b62\u7cfb\u7d71\u56de\u6536 `$HOME` \u76ee\u9304\u6c38\u4e45\u6027\u5b58\u5132\u7a7a\u9593\u3002\n\u5982\u9700\u66f4\u597d\u5730\u63a7\u5236\u5b58\u5132\u7a7a\u9593\u6301\u4e45\u6027\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528 [Cloud Workstations](https://cloud.google.com/workstations/docs/overview?hl=zh-cn) \u3002\nCloud Shell \u9084\u63d0\u4f9b\u4e86 [\u66ab\u5b58\u6a21\u5f0f](https://cloud.google.com/shell/docs/using-cloud-shell?hl=zh-cn#choosing_ephemeral_mode) \uff0c\u5373\u6c92\u6709\u6c38\u4e45\u6027\u78c1\u76e4\u5b58\u5132\u7a7a\u9593\u7684 Cloud Shell \u9ad4\u9a57\u3002\u4f7f\u7528\u66ab\u5b58\u6a21\u5f0f\uff0c\u5553\u52d5\u6642\u9593\u66f4\u77ed\uff0c\u4f46\u5728\u6703\u8a71\u4e2d\u5275\u5efa\u7684\u6240\u6709\u6587\u4ef6\u5728\u6703\u8a71\u7d50\u675f\u6642\u90fd\u6703\u4e1f\u5931\u3002\n## \u6388\u6b0a\n\u7576\u60a8\u9996\u6b21\u5728 Cloud Shell \u4e2d\u8abf\u7528 Google Cloud API \u6216\u4f7f\u7528\u9700\u8981\u6191\u64da\u7684\u547d\u4ee4\u884c\u5de5\u5177\uff08\u4f8b\u5982 Google Cloud CLI\uff09\u6642\uff0cCloud Shell \u6703\u63d0\u793a\u60a8\u6388\u6b0a\u3002\u9ede\u64ca **\u6388\u6b0a** \u53ef\u8b93\u8a72\u5de5\u5177\u4f7f\u7528\u60a8\u7684\u6191\u64da\u9032\u884c\u8abf\u7528\u3002\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u4f7f\u7528 Cloud Shell \u6388\u6b0a](https://cloud.google.com/shell/docs/auth?hl=zh-cn) \u3002\n## \u9810\u5148\u914d\u7f6e\u7684\u74b0\u5883\u8b8a\u91cf\nCloud Shell \u5553\u52d5\u5f8c\uff0cGoogle Cloud \u63a7\u5236\u6aaf\u4e2d\u7684\u6d3b\u52d5\u9805\u76ee\u6703\u50b3\u64ad\u5230 Cloud Shell \u5167\u7684 `gcloud` \u914d\u7f6e\u4e2d\uff0c\u4ee5\u4f9b\u60a8\u7acb\u5373\u4f7f\u7528\u3002\u61c9\u7528\u9ed8\u8a8d\u6191\u64da\u5eab\u652f\u6301\u7528\u65bc\u5b9a\u7fa9\u9805\u76ee ID \u7684\u74b0\u5883\u8b8a\u91cf `GOOGLE_CLOUD_PROJECT` \u4e5f\u8a2d\u7f6e\u7232\u6307\u5411 Google Cloud \u63a7\u5236\u6aaf\u4e2d\u7684\u6d3b\u52d5\u9805\u76ee\u3002\u74b0\u5883\u8b8a\u91cf `WEB_HOST` \u6307\u5411 Cloud Shell \u865b\u64ec\u6a5f\u7684\u4e3b\u6a5f\u540d\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u8a72\u4e3b\u6a5f\u540d\u5411\u74b0\u5883\u767c\u51fa HTTPS \u8acb\u6c42\u3002\n**\u6ce8\u610f** \uff1a\u96d6\u7136 `GOOGLE_CLOUD_PROJECT` \u5f9e Google Cloud \u63a7\u5236\u6aaf\u7e7c\u627f\u6d3b\u8e8d\u9805\u76ee\uff0c\u4f46\u60a8\u7684 Cloud Shell \u5be6\u4f8b\u4e26\u672a\u8207\u6b64\u9805\u76ee\u76f4\u63a5\u95dc\u806f\uff0c\u4e5f\u4e0d\u7531\u6b64\u9805\u76ee\u7ba1\u7406\u3002\n## \u53ef\u7528\u5340\u9078\u64c7\nCloud Shell \u5206\u4f48\u5728\u591a\u500b Google Cloud \u5340\u57df\u4e2d\u3002\u9996\u6b21\u9023\u63a5\u5230 Cloud Shell \u6642\uff0c\u60a8\u5c07\u88ab\u81ea\u52d5\u5206\u914d\u5230\u6700\u8fd1\u7684\u53ef\u7528\u5340\u57df\u3002\u60a8\u7121\u6cd5\u9078\u64c7\u81ea\u5df1\u7684\u5340\u57df\uff0c\u5982\u679c Cloud Shell \u672a\u9078\u64c7\u6700\u8fd1\u7684\u5340\u57df\uff0c\u5247\u7576 Cloud Shell \u865b\u64ec\u6a5f\u672a\u88ab\u4f7f\u7528\u6642\uff0cCloud Shell \u6703\u5617\u8a66\u5c07\u60a8\u7684 Cloud Shell \u865b\u64ec\u6a5f\u9077\u79fb\u5230\u66f4\u8fd1\u7684\u5340\u57df\u4e2d\u3002\n\u8981\u67e5\u770b\u7576\u524d\u5340\u57df\uff0c\u8acb\u5f9e Cloud Shell \u6703\u8a71\u4e2d\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ncurl metadata/computeMetadata/v1/instance/zone\n```\n## \u6620\u50cf\u767c\u4f48\nCloud Shell \u5bb9\u5668\u6620\u50cf\u6bcf\u9031\u66f4\u65b0\u4e00\u6b21\uff0c\u4ee5\u4f7f\u9810\u5c01\u88dd\u7684\u5de5\u5177\u4fdd\u6301\u6700\u65b0\u3002\u9019\u610f\u5473\u7740 Cloud Shell \u59cb\u7d42\u9644\u5e36\u6700\u65b0\u7248\u672c\u7684 gcloud CLI\u3001Docker \u548c\u5176\u4ed6\u5be6\u7528\u7a0b\u5e8f\u3002\n## \u6839\u7528\u6236\n\u5728\u8a2d\u7f6e Cloud Shell \u6703\u8a71\u6642\uff0c\u60a8\u5c07\u7372\u5f97\u4e00\u500b\u5e38\u898f\u7684 Unix \u7528\u6236\u8cec\u865f\uff0c\u5176\u7528\u6236\u540d\u57fa\u65bc\u60a8\u7684\u96fb\u5b50\u90f5\u4ef6\u5730\u5740\u3002\u6709\u4e86\u6b64\u8a2a\u554f\u6b0a\u9650\uff0c\u60a8\u5c31\u53ef\u4ee5\u5728\u5206\u914d\u7684\u865b\u64ec\u6a5f\u4e0a\u64c1\u6709\u5b8c\u6574\u7684\u6839\u7528\u6236\u6b0a\u9650\uff0c\u751a\u81f3\u53ef\u4ee5\u6839\u64da\u9700\u8981\u904b\u884c sudo \u547d\u4ee4\u3002\n## \u53ef\u7528\u7684\u5de5\u5177\nCloud Shell \u865b\u64ec\u6a5f\u5be6\u4f8b\u9810\u5b89\u88dd\u4e86\u4ee5\u4e0b\u5de5\u5177\uff1a\n| \u985e\u578b    | \u5de5\u5177                    |\n|:-------------------|:-----------------------------------------------------------------------------------|\n| Linux Shell \u89e3\u91cb\u5668 | bash sh                   |\n| Linux \u5be6\u7528\u5de5\u5177  | \u6a19\u6e96 Debian \u7cfb\u7d71\u5be6\u7528\u5de5\u5177               |\n| gcloud CLI \u548c\u5de5\u5177 | App Engine SDK Google Cloud CLI\uff08\u5305\u62ec gcloud CLI\uff09 \u9069\u7528\u65bc Cloud Storage \u7684 gsutil |\n| \u6587\u672c\u7de8\u8f2f\u5668   | Emacs Vim Nano                  |\n| \u69cb\u5efa\u548c\u6253\u5305\u5de5\u5177  | Gradle Helm Make Maven Bazel npm nvm pip Composer         |\n| \u6e90\u4ee3\u78bc\u63a7\u5236\u5de5\u5177  | Git Mercurial                  |\n| \u5176\u4ed6\u5de5\u5177   | Docker iPython MySQL \u5ba2\u6236\u7aef gRPC \u7de8\u8b6f\u5668 TensorFlow Terraform      |\n\u60a8\u53ef\u4ee5\u5728\u865b\u64ec\u6a5f\u5be6\u4f8b\u4e0a\u5b89\u88dd\u5176\u4ed6\u8edf\u4ef6\u5305\uff0c\u4f46\u9664\u975e\u60a8\u5c07\u8edf\u4ef6\u5b89\u88dd\u5728 `$HOME` \u76ee\u9304\u4e2d\u6216\u5275\u5efa [\u81ea\u5b9a\u7fa9\u74b0\u5883](https://cloud.google.com/shell/docs/custom-environments?hl=zh-cn) \uff0c\u5426\u5247\u5728\u5be6\u4f8b\u7d42\u6b62\u5f8c\u5b89\u88dd\u7684\u8edf\u4ef6\u5305\u5c07\u4e0d\u6703\u4fdd\u7559\u3002\n## \u8a9e\u8a00\u652f\u6301\n**\u6ce8\u610f** \uff1a\u8a9e\u8a00\u7248\u672c\u53ef\u80fd\u6703\u66f4\u6539\u3002\u4f46\u662f\uff0c\u5982\u679c\u60a8\u9700\u8981\u4f7f\u7528 [\u74b0\u5883\u5b9a\u88fd\u8173\u672c](https://cloud.google.com/shell/docs/configuring-cloud-shell?hl=zh-cn#environment_customization) \uff0c\u5247\u60a8\u53ef\u4ee5\u5b89\u88dd\u4e0d\u540c\u7684\u7248\u672c\u3002\nCloud Shell \u865b\u64ec\u6a5f\u5be6\u4f8b\u9810\u5b89\u88dd\u4e86\u5c0d\u4ee5\u4e0b\u8a9e\u8a00\u7684\u652f\u6301\uff1a\n| \u8a9e\u8a00  | \u7248\u672c                 |\n|:----------|:-----------------------------------------------------------------------|\n| Java  | JRE/JDK 17.0.6 (OpenJDK)            |\n| Go  | 1.20.4                 |\n| Python | 3.9.2                 |\n| Node.js | v18.12.1                |\n| Ruby  | 2.7.8                 |\n| PHP  | 7.4.33                 |\n| .NET Core | SDK 2.1\u30013.1\u30015.0 \u548c 6.0 Core \u904b\u884c\u6642 2.1.30\u30013.1.32\u30015.0.17 \u548c 6.0.16 |\nJava \u74b0\u5883\u7684\u9ed8\u8a8d\u7248\u672c\u7232 11\u3002\u8981\u5c07\u7576\u524d Cloud Shell \u6703\u8a71\u66f4\u6539\u7232\u4f7f\u7528 JRE \u548c JDK 1.8 \u7248\uff0c\u8acb\u5728 Cloud Shell \u547d\u4ee4\u63d0\u793a\u7b26\u4e2d\u8f38\u5165\u4ee5\u4e0b\u5167\u5bb9\uff1a\n```\nsudo update-java-alternatives -s java-1.8.0-openjdk-amd64 && export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64\n```\n\u8981\u6539\u56de 11\uff0c\u8acb\u8f38\u5165\u4ee5\u4e0b\u5167\u5bb9\uff1a\n```\nsudo update-java-alternatives -s java-1.11.0-openjdk-amd64 && export JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64/jre\n```\n## \u5b89\u5168\u6a21\u5f0f\n\u5982\u679c\u60a8\u7684 `.bashrc` \u6216 `.tmux.conf` \u6587\u4ef6\u5b58\u5728\u554f\u984c\uff0cCloud Shell \u6703\u5728\u9023\u63a5\u5f8c\u7acb\u5373\u95dc\u9589\u3002\u5b89\u5168\u6a21\u5f0f\u6703\u91cd\u5553\u60a8\u7684 Cloud Shell \u5be6\u4f8b\uff0c\u4e26\u4ee5\u6839\u7528\u6236\u8eab\u4efd\u767b\u9304\uff0c\u5f9e\u800c\u8b93\u60a8\u80fd\u5920\u4fee\u5fa9\u6587\u4ef6\u4e2d\u7684\u6240\u6709\u554f\u984c\u3002\n\u5982\u9700\u5728\u5b89\u5168\u6a21\u5f0f\u4e0b\u6253\u958b Cloud Shell\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- \u5c07`cloudshellsafemode=true`\u9644\u52a0\u5230\u7db2\u5740\u3002\n- \u5728 Cloud Shell \u4e2d\uff0c\u4f9d\u6b21\u9ede\u64camore_vert\u3001 **\u5b89\u5168\u6a21\u5f0f** \u548c **\u91cd\u5553** \u3002\n\u5982\u9700\u6c38\u4e45\u522a\u9664\u4e3b\u76ee\u9304\u4e2d\u7684\u6240\u6709\u6587\u4ef6\u4e26\u5c07 Cloud Shell \u4e3b\u76ee\u9304\u6062\u5fa9\u5230\u6e05\u6f54\u72c0\u614b\uff0c\u60a8\u53ef\u4ee5 [\u91cd\u7f6e Cloud Shell \u865b\u64ec\u6a5f](https://cloud.google.com/shell/docs/resetting-cloud-shell?hl=zh-cn) \u3002", "guide": "Cloud Shell"}