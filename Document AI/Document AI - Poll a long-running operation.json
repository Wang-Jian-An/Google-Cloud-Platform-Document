{"title": "Document AI - Poll a long-running operation", "url": "https://cloud.google.com/document-ai/docs/samples/documentai-poll-operation?hl=zh-cn", "abstract": "# Document AI - Poll a long-running operation\nTo poll an operation, repeatedly call the `get_long_running_operation()` method until the operation finishes. Use a backoff between each poll request, such as 10 seconds.", "content": "## Explore furtherFor detailed documentation that includes this code sample, see the following:- [Managing long-running operations (LROs)](/document-ai/docs/long-running-operations) \n## Code sampleFor more information, see the [Document AI Python API reference documentation](/python/docs/reference/documentai/latest) .\nTo authenticate to Document AI, set up Application Default Credentials.  For more information, see [Set up authentication for a local development environment](/docs/authentication/provide-credentials-adc#local-dev) .\n [View on GitHub](https://github.com/GoogleCloudPlatform/python-docs-samples/blob/HEAD/documentai/snippets/poll_operation_sample.py) \n```\nfrom time import sleepfrom google.api_core.client_options import ClientOptionsfrom google.cloud import documentai \u00a0# type: ignorefrom google.longrunning.operations_pb2 import GetOperationRequest \u00a0# type: ignore# TODO(developer): Uncomment these variables before running the sample.# location = \"YOUR_PROCESSOR_LOCATION\" \u00a0# Format is \"us\" or \"eu\"# operation_name = \"YOUR_OPERATION_NAME\" \u00a0# Format is \"projects/{project_id}/locations/{location}/operations/{operation_id}\"def poll_operation_sample(location: str, operation_name: str) -> None:\u00a0 \u00a0 # You must set the `api_endpoint` if you use a location other than \"us\".\u00a0 \u00a0 opts = ClientOptions(api_endpoint=f\"{location}-documentai.googleapis.com\")\u00a0 \u00a0 client = documentai.DocumentProcessorServiceClient(client_options=opts)\u00a0 \u00a0 request = GetOperationRequest(name=operation_name)\u00a0 \u00a0 while True:\u00a0 \u00a0 \u00a0 \u00a0 # Make GetOperation request\u00a0 \u00a0 \u00a0 \u00a0 operation = client.get_operation(request=request)\u00a0 \u00a0 \u00a0 \u00a0 # Print the Operation Information\u00a0 \u00a0 \u00a0 \u00a0 print(operation)\u00a0 \u00a0 \u00a0 \u00a0 # Stop polling when Operation is no longer running\u00a0 \u00a0 \u00a0 \u00a0 if operation.done:\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 break\u00a0 \u00a0 \u00a0 \u00a0 # Wait 10 seconds before polling again\u00a0 \u00a0 \u00a0 \u00a0 sleep(10)\n```\n## What's nextTo search and filter code samples for other Google Cloud products, see the [Google Cloud sample browser](/docs/samples?product=documentai) .", "guide": "Document AI"}