{"title": "Document AI - Base64 encoding", "url": "https://cloud.google.com/document-ai/docs/base64?hl=zh-cn", "abstract": "# Document AI - Base64 encoding\n# Base64 encoding\nWhen sending document files to the Document AI API, you can send data directly in the [RawDocument.content](/document-ai/docs/reference/rest/v1/RawDocument) field with [online processing](/document-ai/docs/send-request#online-process)  **only** if your file is [20 MB or less](/document-ai/quotas#content_limits) . The input file will be in a binary format, which must be encoded before sending to Document AI.\nIf your input file exceeds the online processing limits, it must be stored in a Cloud Storage bucket in order to be sent for processing, which does not require encoding. Refer to the [batch processing documentation](/document-ai/docs/send-request#batch-process) for details.\n", "content": "## Using the command line\nWithin a gRPC request, you can simply write binary data out directly; however, JSON is used when making a REST request. JSON is a text format that does not directly support binary data, so you will need to convert such binary data into text using [Base64](https://en.wikipedia.org/wiki/Base64) encoding.\nMost development environments contain a native `base64` utility to encode a binary into ASCII text data. To encode a file:\nEncode the file using the `base64` command line tool, making sure to  prevent line-wrapping by using the `-w 0` flag:\n```\nbase64 INPUT_FILE -w 0 > OUTPUT_FILE\n```\nEncode the file using the `base64` command line tool:\n```\nbase64 -i INPUT_FILE -o OUTPUT_FILE\n```\nEncode the file using the `Base64.exe` tool:\n```\nBase64.exe -e INPUT_FILE > OUTPUT_FILE\n```\nEncode the file using the `Convert.ToBase64String` method:\n```\n[Convert]::ToBase64String([IO.File]::ReadAllBytes(\"./INPUT_FILE\")) > OUTPUT_FILE\n```\nCreate a JSON request file, inlining the base64-encoded data:\n```\n{\u00a0 \"skipHumanReview\": skipHumanReview,\u00a0 \"rawDocument\": {\u00a0 \u00a0 \"mimeType\": \"MIME_TYPE\",\u00a0 \u00a0 \"content\": \"BASE64_ENCODED_DATA\"\u00a0 },\u00a0 \"fieldMask\": \"FIELD_MASK\"}\n```\n## Using client libraries\nEmbedding binary data into requests through text editors is neither desirable or practical. In practice, you will be embedding base64 encoded files within client code. All supported programming languages have built-in mechanisms for base64 encoding content.\n```\n# Import the base64 encoding library.import base64# Pass the image data to an encoding function.def encode_image(image):\u00a0 \u00a0 with open(image, \"rb\") as image_file:\u00a0 \u00a0 \u00a0 \u00a0 encoded_string = base64.b64encode(image_file.read())\u00a0 \u00a0 return encoded_string\n```\n```\n// Read the file into memory.var fs = require('fs');var imageFile = fs.readFileSync('/path/to/file');// Convert the image data to a Buffer and base64 encode it.var encoded = Buffer.from(imageFile).toString('base64');\n```\n```\n// Import the Base64 encoding library.import org.apache.commons.codec.binary.Base64;// Encode the image.byte[] imageData = Base64.encodeBase64(imageFile.getBytes());String encodedString = Base64.getEncoder().encodeToString(imageData);\n```\n```\nimport (\u00a0 \u00a0 \"bufio\"\u00a0 \u00a0 \"encoding/base64\"\u00a0 \u00a0 \"io\"\u00a0 \u00a0 \"os\")// Open image file.f, _ := os.Open(\"image.jpg\")// Read entire image into byte slice.reader := bufio.NewReader(f)content, _ := io.ReadAll(reader)// Encode image as base64.base64.StdEncoding.EncodeToString(content)\n```", "guide": "Document AI"}