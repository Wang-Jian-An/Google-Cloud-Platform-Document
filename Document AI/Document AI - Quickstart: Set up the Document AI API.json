{"title": "Document AI - Quickstart: Set up the Document AI API", "url": "https://cloud.google.com/document-ai/docs/setup?hl=zh-cn", "abstract": "# Document AI - Quickstart: Set up the Document AI API\nThis guide provides all required setup steps to start using Document AI.\n", "content": "## About the Google Cloud console\nThe [Google Cloud console](https://console.cloud.google.com/) is a web UI used to provision, configure, manage, and monitor systems that use Google Cloud products. You use the Google Cloud console to set up and manage Document AI resources.\n## Create a project\nTo use services provided by Google Cloud, you must create a project, which organizes all your Google Cloud resources and consists of the following components:\n- A set of collaborators\n- Enabled APIs (and other resources)\n- Monitoring tools\n- Billing information\n- Authentication and access controls\n- [Document AI processors](/document-ai/docs/overview) \nYou can create one project, or you can create multiple projects. You can use your projects to organize your Google Cloud resources in a [resource hierarchy](/resource-manager/docs/cloud-platform-resource-hierarchy) . For more information on projects, see the [Resource Manager documentation](/resource-manager/docs/creating-managing-projects) .\nIn the Google Cloud console, on the project selector page,   select or [create a Google Cloud project](/resource-manager/docs/creating-managing-projects) .\n[Go to project selector](https://console.cloud.google.com/projectselector2/home/dashboard)\n## Enable the API\nYou must enable the Document AI API for your project. For more information on enabling APIs, see the [Service Usage documentation](/service-usage/docs/enable-disable) .\nEnable the Document AI API.\n[Enable the API](https://console.cloud.google.com/flows/enableapi?apiid=documentai.googleapis.com)\n## Enable billing\nA billing account defines who pays for a given set of resources. Billing accounts can be linked to one or more projects. Project usage is charged to the linked billing account. You configure billing when you create a project. For more information, see the [Billing documentation](/billing/docs) .\n[Make sure that billing is enabled for your Google Cloud project](/billing/docs/how-to/verify-billing-enabled#console) .\n## Locations\nDocument AI offers you some control over where the resources for your project are stored and processed. In particular, when you create a processor, you must choose a location to store and process your data. By default Document AI stores and processes resources in a US location. If you choose the European Union location, your data and processes are only stored in the European Union.\n**Note:** You and your users can access the data from any location.\n### Setting location using API\nYou must specify your processor's location whenever you send a processing request using the API. For example, if your processor is configured to store and process your data in the European Union, then use the URI eu-documentai.googleapis.com as follows:\n| 0   | 1                                                         |\n|:-------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| Process  | https://eu-documentai.googleapis.com/v1/projects/$PROJECT_ID/locations/eu/processors/$PROCESSOR_ID:process https://eu-documentai.googleapis.com/v1beta3/projects/$PROJECT_ID/locations/eu/processors/$PROCESSOR_ID:process   |\n| batchProcess | https://eu-documentai.googleapis.com/v1/projects/$PROJECT_ID/locations/eu/processors/$PROCESSOR_ID:batchProcess https://eu-documentai.googleapis.com/v1beta3/projects/$PROJECT_ID/locations/eu/processors/$PROCESSOR_ID:batchProcess |\n## Install the Document AI API client library\nYou have three options for calling the Document AI API:\n- [Google supported client libraries](/document-ai/docs/libraries) (recommended)\n- [REST](/document-ai/docs/reference/rest) \n- [gRPC](/document-ai/docs/reference/rpc) \nThe client libraries are available for several popular languages. For information on installing the client libraries, see [Document AI API client libraries](/document-ai/docs/libraries) .\n## Set up authentication\nAny client application that uses the API must be authenticated and granted access to the requested resources. This section describes important authentication concepts and provides steps for setting it up. For more information, see the [Authentication overview](/docs/authentication) .\n### About roles\nWhen calling an API, Google Cloud requires the calling [identity](/iam/docs/overview) (any applicable person, entity, or process and their defined attributes) to have the appropriate permissions. You can grant permissions by granting to a service account. For more information, see the [Identity and Access Management (IAM) documentation](/iam/docs/understanding-roles) .\nFor the purpose of trying the Document AI API, you can use the **Project > Owner** role in steps below. The **Project > Owner** role grants the service account full permission to resources in your project. If your service account does not require full permissions, you specify a more restrictive role using the [Google Cloud console](https://console.cloud.google.com/) . For a list of permissions and roles for Document AI, see [Document AI permissions](/document-ai/docs/access-control/iam-permissions) and [Document AI roles](/document-ai/docs/access-control/iam-roles) . For information on managing permissions using IAM roles, see [granting roles to service accounts](/iam/docs/granting-roles-to-service-accounts) .\n### About service accounts\nThere are multiple options for authentication, but it is recommended that you use for authentication and access control. A service account provides credentials for applications, as opposed to individuals. Projects own their service accounts. You can create many service accounts for a project. For more information, see [Service accounts](/docs/authentication#service-accounts) .\n### About service account keys\nService accounts are associated with one or more public/private key pairs. When you create a new key pair, you download the private key. The Google Cloud CLI uses your private key to generate credentials when calling the API. You are responsible for security of the private key and other management operations, such as key rotation.\n### Create a service account and download the private key file\nCreate a service account:\n- In the Google Cloud console, go to the **Create service account** page. [Go to Create service account](https://console.cloud.google.com/projectselector/iam-admin/serviceaccounts/create?supportedpurview=project) \n- Select your project.\n- In the **Service account name** field, enter a name. The Google Cloud console fills   in the **Service account ID** field based on this name.In the **Service account description** field, enter a description. For example, `Service account for quickstart` .\n- Click **Create and continue** .\n- Grant the **Project > Owner** role to the service account.To grant the role, find the **Select a role** list, then select **Project > Owner** . **Note** : The **Role** field affects which resources the service account can access in your project. You can revoke these roles or grant additional roles later. In production environments, do not grant the Owner, Editor, or Viewer roles. Instead, grant a [predefined role](/iam/docs/understanding-roles#predefined_roles) or [custom role](/iam/docs/understanding-custom-roles) that meets your needs.\n- Click **Continue** .\n- Click **Done** to finish creating the service account.Do not close your browser window. You will use it in the next step.\nCreate a service account key:\n- In the Google Cloud console, click the email address for the service account that you   created.\n- Click **Keys** .\n- Click **Add key** , and then click **Create new key** .\n- Click **Create** . A JSON key file is downloaded to your computer.\n- Click **Close** .\n### Use the service account key file in your environment\nProvide authentication credentials to your application code by setting the environment variable `GOOGLE_APPLICATION_CREDENTIALS` . This variable applies only to your current shell session. If you want the variable to apply to future shell sessions, set the variable in your shell startup file, for example in the `~/.bashrc` or `~/.profile` file.\n```\nexport GOOGLE_APPLICATION_CREDENTIALS=\"KEY_PATH\"\n```\nReplace `` with the path of the JSON file that contains your credentials.\nFor example:\n```\nexport GOOGLE_APPLICATION_CREDENTIALS=\"/home/user/Downloads/service-account-file.json\"\n```For PowerShell:\n```\n$env:GOOGLE_APPLICATION_CREDENTIALS=\"KEY_PATH\"\n```\nReplace `` with the path of the JSON file that contains your credentials.\nFor example:\n```\n$env:GOOGLE_APPLICATION_CREDENTIALS=\"C:\\Users\\username\\Downloads\\service-account-file.json\"\n```\nFor command prompt:\n```\nset GOOGLE_APPLICATION_CREDENTIALS=KEY_PATH\n```\nReplace `` with the path of the JSON file that contains your credentials.\n## Install and initialize the Google Cloud CLI (optional)\nThe [gcloud CLI](/sdk/gcloud) provides a set of tools that you can use to manage resources and applications hosted on Google Cloud.\nThe following link provides instructions:\n[Install](/sdk/docs/install) the Google Cloud CLI, then [initialize](/sdk/docs/initializing) it by running the following command:\n```\ngcloud init\n```\n## Test client libraries and authentication\nIf you have set up authentication in previous steps, you can use the gcloud CLI to test your authentication environment. Execute the following command and verify that no error occurs and that credentials are returned:\n```\ngcloud auth application-default print-access-token\n```\nThat command is used by all Document AI API command line REST samples to authenticate API calls.\n## Cross project file access setup\nWhen you set up your Document AI processor in one project, you might want this project to access input files stored in a different project in the same org that hosts Document AI processors.\nTo allow cross-project access, you must grant the `Storage Object Viewer` role to the default Document AI service account, as shown in the following figure.### Example\n- Supposehosts Document AI processors, and optionally hosts a bucket to which processor output is written.\n- owns the bucket that contains input files for Document AI processors.\n- To make files in accessible to , you must grant `Storage Object Viewer` permissions for the input bucket in to the Document AI service account of .\nFor more information about IAM and `Storage Object Viewer` , see [IAM roles for Cloud Storage](/storage/docs/access-control/iam-roles) .\n### Built-in service accounts\nA Document AI service account follows this naming convention:\n`service-{project number}@gcp-sa-prod-dai-core.iam.gserviceaccount.com`\nExample: `service-361747088407@gcp-sa-prod-dai-core.iam.gserviceaccount.com`\n## Next Steps: Use cases\nAfter the Document AI API has been enabled, then Document AI processors can be created and used. Which type of processor is best depends on your use case.", "guide": "Document AI"}