{"title": "Document AI - Create a Custom Document Classifier in the Google Cloud console", "url": "https://cloud.google.com/document-ai/docs/workbench/build-custom-classification-processor?hl=zh-cn", "abstract": "# Document AI - Create a Custom Document Classifier in the Google Cloud console\n# Create a Custom Document Classifier in the Google Cloud console\nYou can create Custom Document Classifiers (CDC) that are specifically suited to your documents, and trained and evaluated with your data. This processor identifies classes of documents from a user-defined set of classes. You can then use this trained processor on additional documents. You typically would use a CDC on documents that are different types, then use the identification to pass the documents to an extraction processor to extract the entities.\nA typical workflow to create and use a CDC is as follows:- Create a Custom Document Classifier in Document AI Workbench.\n- Create a dataset using an empty Cloud Storage bucket.\n- Define and create the processor schema.\n- Import documents.\n- Assign documents to the Training and Test sets.\n- Annotate documents manually in Document AI Workbench or with Labeling Tasks.\n- Train the processor.\n- Evaluate the processor.\n- Deploy the processor.\n- Test the processor.\n- Use the processor on your documents.\nYou can make your own configuration choices that suit your workflow.To follow step-by-step guidance for this task directly in the Google Cloud console, click **Guide me** :\n [Guide me](https://console.cloud.google.com/ai/document-ai?tutorial=document-ai--documentai-workbench_custom_classifier_console) ", "content": "## Before you begin\n## Create a processor\n- In the Google Cloud console, in the Document AI section, go to the **Workbench** page. [Workbench](https://console.cloud.google.com/ai/document-ai/workbench) \n- For **Custom Document Classifier** , click . \n- In the **Create processor** menu, enter a name for your processor, such as `my-custom-document-classifier` . \n- Select the region closest to you.\n- Click **Create** . The **Processor Details** tab appears.\n## Create a Cloud Storage bucket for the datasetIn order to train this new processor, you must create a dataset with training and testing data to help the processor identify the documents that you want to classify.\nThis dataset requires a new [Cloud Storage bucket](/storage) . Do not use the same bucket where your documents are currently stored.- Go to your processor's tab.\n- Click . You are prompted to select or create an empty Cloud Storage bucket or folder. \n- Click to open **Select folder** .\n- Click the icon and follow the prompts to create a new bucket. For more information on creating a Cloud Storage bucket, refer to [Cloud Storage buckets](/storage/docs/creating-buckets) . **Note:** A bucket is the top-level storage entity, in which you can nest folders. Instead of creating and selecting a bucket, you can also create and select an empty folder inside an existing bucket. For more information, see [Cloud Storage simulated folders](/storage/docs/objects#simulated-folders) .After you create the bucket, the **Select folder** page appears for that bucket.\n- On the **Select folder** page for your bucket, click the button at the bottom of the dialog box. \n- Make sure the **destination path** is populated with the bucket name you selected. Click . The dataset might take up to several minutes to create. \n## Import documents into a datasetNext, you will import your documents into your dataset.- On the **Train** tab, click . \n- For this example, enter this bucket name in . This links directly to one document.```\ncloud-samples-data/documentai/Custom/Patents/PDF/computer_vision_20.pdf\n```\n- For **Data split** , select **Unassigned** . The document in this folder will not be assigned to either the testing or training set. Leave **Import with auto-labeling** unchecked.\n- Click **Import** . Document AI reads the documents from the bucket into the dataset. It does not modify the import bucket or read from the bucket after the import is complete.\nWhen you import documents, you can optionally assign the documents to the **Training** or **Test** set when imported, or wait to assign them later.\nIf you want to delete a document or documents that you have imported, select them on the **Train** tab, and click **Delete** .\nFor more information about preparing your data for import, refer to the [Data preparation guide](/document-ai/docs/workbench/create-dataset) .## Define processor schemaYou can create the processor schema either before or after you import documents into your dataset. The schema provides labels that you will use to annotate documents.- On the **Train** tab, click in the lower left. The **Manage labels** page opens.\n- Click .\n- Enter the name for the label. Select the **Data type** . Click **Create** . Refer to [Define processor schema](/document-ai/docs/workbench/label-documents#define_processor_schema) for detailed instructions on creating and editing a schema. **Note:** Labels cannot be deleted. Instead, you can disable any label you do not want to use.\n- Create each of the following labels for the processor schema.| Name   | Data Type  |\n|:----------------|:--------------|\n| computer_vision | Document type |\n| crypto   | Document type |\n| med_tech  | Document type |\n| other   | Document type |\n- Click when the labels are complete. \n## Label a documentThe process of selecting text in a document, and applying labels is known as .- Return to the **Train** tab, and click to open the **Label management** console.\n- In the , select the appropriate label for the document.\n- If you're using the sample document provided, select `computer_vision` .The labeled document should look like this when complete: \n- Click when you have finished annotating the document.On the **Train** tab, the left-hand panel shows that 1 document has been labeled.\n## Assign annotated document to the training setNow that you have labeled this example document, you can assign it to the training set.- On the **Train** tab, select the checkbox.\n- From the list, select **Training** .\nIn the left-hand panel, you can find that 1 document has been assigned to the training set.## Import pre-labeled data to the training and test setsIn this guide, you are provided with pre-labeled data.\nIf working on your own project, you will have to determine how to label your data. Refer to [Labeling options](/document-ai/docs/workbench/label-documents#labeling_options) . Document AI Custom Processors require a minimum of 10 documents in both the training and test sets, along with 10 instances of each label in each set. We recommend that you have at least 50 documents in each set, with 50 instances of each label for best performance. In general, more training data produces higher accuracy.- Click .\n- Enter the following path in . This bucket contains pre-labeled documents in the [Document JSON](/document-ai/docs/reference/rest/v1/Document) format.```\ncloud-samples-data/documentai/Custom/Patents/JSON/Classification-InventionType\n```\n- From the **Data split** list, select **Auto-split** . This automatically splits the documents to have 80% in the training set, and 20% in the test set. Ignore the **Apply labels** section.\n- Click **Import** . The import might take several minutes to complete.\nWhen the import is finished, you will find the documents on the **Train** tab.## Optional: Batch label documents at importAfter the schema has been configured, you can label all documents that are in a particular directory at import to save time with labeling.- Click .\n- Enter the following path in . This bucket contains unlabeled documents in PDF format.```\ncloud-samples-data/documentai/Custom/Patents/PDF-CDC-BatchLabel\n```\n- From the **Data split** list, select **Auto-split** . This automatically splits the documents to have 80% in the training set, and 20% in the test set.\n- In the **Apply labels** section, select **Choose label** .\n- For these sample documents, select `other` .\n- Click **Import** and wait for the documents to import. You can leave this page and return later.\nWhen the import is finished, you will find the documents on the **Train** tab with the label applied.## Train the processorNow that you have imported the training and test data, you can train the processor. Because training might take several hours, make sure you have set up the processor with the appropriate data and labels before you begin training.- Click .\n- In the field, enter a name for this processor version, such as `my-cdc-version-1` .\n- (Optional) Click **View Label Stats** to find information about the document labels. That can help determine your coverage. Click **Close** to return to the training setup.\n- Click You can check the status on the right-hand panel.\n## Deploy the processor version\n- After training is complete, navigate to the tab. You can view details about the version you just trained.\n- Click the on the right of the version you want to deploy, and select **Deploy version** .\n- Select from the popup window.Deployment takes a few minutes to complete.\n## Evaluate and test the processor\n- After deployment is complete, navigate to the tab.On this page, you can view evaluation metrics including the F1 score, Precision and Recall for the full document, and individual labels. For more information about evaluation and statistics, refer to [Evaluate processor](/document-ai/docs/workbench/evaluate) .\n- Download a document that has not been involved in previous training or testing so that you can use it to evaluate the processor version. If using your own data, you would use a document set aside for this purpose. [file_downloadDownload PDF](https://storage.googleapis.com/cloud-samples-data/documentai/Custom/Patents/PDF/us_100.pdf) \n- Click and select the document you just downloaded.The **Custom Document Classifier analysis** page opens. The screen output will demonstrate how well the document was classified.You can also re-run the evaluation against a different test set or processor version.\n## Optional: Auto-label newly imported documentsAfter deploying a trained processor version, you can use [Auto-labeling](/document-ai/docs/workbench/label-documents#auto-label) to save time on labeling when importing new documents.- On the **Train** page, .\n- Copy and paste the following Cloud Storage path. This directory contains 5 unlabeled Patent PDFs. From the **Data split** dropdown list, select **Training** .```\ncloud-samples-data/documentai/Custom/Patents/PDF-CDC-AutoLabel\n```\n- In the **Apply labels** section, select **Auto-labeling** .\n- Select an existing processor version to label the documents.- For example:`2af620b2fd4d1fcf`\n- Click **Import** and wait for the documents to import. You can leave this page and return later.- When complete, the documents appear in the **Train** page in the **Auto-labeled** section.\n- You cannot use auto-labeled documents for training or testing without marking them as labeled. Go to the section to view the auto-labeled documents.\n- Select the first document to enter the labeling console.\n- Verify the label to ensure it is correct. Adjust if it is incorrect.\n- Select when finished.\n- Repeat the label verification for each auto-labeled document, then return to the **Train** page to use the data for training.\n## Use the processorYou have successfully created and trained a Custom Document Classifier processor.\nYou can manage your custom-trained processor versions just like any other processor version. For more information, refer to [Managing processor versions](/document-ai/docs/manage-processor-versions) .\nYou can [Send a processing request](/document-ai/docs/send-request) to your custom processor, and the [response can be handled the same as other classifier processors](/document-ai/docs/handle-response#splitting) .## Clean upTo avoid incurring charges to your Google Cloud account for   the resources used on this page, follow these steps.\nTo avoid unnecessary Google Cloud charges, use the [Google Cloud console](https://console.cloud.google.com/) to delete your processor and project if you do not need them.\nIf you created a new project to learn about Document AI and you no longer need the project, [delete the project](https://console.cloud.google.com/cloud-resource-manager) .\nIf you used an existing Google Cloud project, delete the resources you created to avoid incurring charges to your account:- In the Google Cloud console navigation menu, click **Document AI** and select **My Processors** .\n- Click in the same row as the processor you want to delete.\n- Click **Delete processor** , type the processor name, then click **Delete** again to confirm.\n## What's next\n- [Creating and using a Custom Document Extractor](/document-ai/docs/workbench/build-custom-processor) \n- [Creating and using a Custom Document Splitter](/document-ai/docs/workbench/build-custom-splitter-processor)", "guide": "Document AI"}