{"title": "Document AI - Evaluate a processor version", "url": "https://cloud.google.com/document-ai/docs/samples/documentai-evaluate-processor-version?hl=zh-cn", "abstract": "# Document AI - Evaluate a processor version\nEvaluate a processor version with a supplied dataset.", "content": "## Explore furtherFor detailed documentation that includes this code sample, see the following:- [Evaluate the performance of processors](/document-ai/docs/workbench/evaluate) \n## Code sampleFor more information, see the [Document AI Python API reference documentation](/python/docs/reference/documentai/latest) .\nTo authenticate to Document AI, set up Application Default Credentials.  For more information, see [Set up authentication for a local development environment](/docs/authentication/provide-credentials-adc#local-dev) .\n [View on GitHub](https://github.com/GoogleCloudPlatform/python-docs-samples/blob/HEAD/documentai/snippets/evaluate_processor_version_sample.py) \n```\nfrom google.api_core.client_options import ClientOptionsfrom google.cloud import documentai \u00a0# type: ignore# TODO(developer): Uncomment these variables before running the sample.# project_id = 'YOUR_PROJECT_ID'# location = 'YOUR_PROCESSOR_LOCATION' # Format is 'us' or 'eu'# processor_id = 'YOUR_PROCESSOR_ID'# processor_version_id = 'YOUR_PROCESSOR_VERSION_ID'# gcs_input_uri = # Format: gs://bucket/directory/def evaluate_processor_version_sample(\u00a0 \u00a0 project_id: str,\u00a0 \u00a0 location: str,\u00a0 \u00a0 processor_id: str,\u00a0 \u00a0 processor_version_id: str,\u00a0 \u00a0 gcs_input_uri: str,) -> None:\u00a0 \u00a0 # You must set the api_endpoint if you use a location other than 'us', e.g.:\u00a0 \u00a0 opts = ClientOptions(api_endpoint=f\"{location}-documentai.googleapis.com\")\u00a0 \u00a0 client = documentai.DocumentProcessorServiceClient(client_options=opts)\u00a0 \u00a0 # The full resource name of the processor version\u00a0 \u00a0 # e.g. `projects/{project_id}/locations/{location}/processors/{processor_id}/processorVersions/{processor_version_id}`\u00a0 \u00a0 name = client.processor_version_path(\u00a0 \u00a0 \u00a0 \u00a0 project_id, location, processor_id, processor_version_id\u00a0 \u00a0 )\u00a0 \u00a0 evaluation_documents = documentai.BatchDocumentsInputConfig(\u00a0 \u00a0 \u00a0 \u00a0 gcs_prefix=documentai.GcsPrefix(gcs_uri_prefix=gcs_input_uri)\u00a0 \u00a0 )\u00a0 \u00a0 # NOTE: Alternatively, specify a list of GCS Documents\u00a0 \u00a0 #\u00a0 \u00a0 # gcs_input_uri = \"gs://bucket/directory/file.pdf\"\u00a0 \u00a0 # input_mime_type = \"application/pdf\"\u00a0 \u00a0 #\u00a0 \u00a0 # gcs_document = documentai.GcsDocument(\u00a0 \u00a0 # \u00a0 \u00a0 gcs_uri=gcs_input_uri, mime_type=input_mime_type\u00a0 \u00a0 # )\u00a0 \u00a0 # gcs_documents = [gcs_document]\u00a0 \u00a0 # evaluation_documents = documentai.BatchDocumentsInputConfig(\u00a0 \u00a0 # \u00a0 \u00a0 gcs_documents=documentai.GcsDocuments(documents=gcs_documents)\u00a0 \u00a0 # )\u00a0 \u00a0 #\u00a0 \u00a0 request = documentai.EvaluateProcessorVersionRequest(\u00a0 \u00a0 \u00a0 \u00a0 processor_version=name,\u00a0 \u00a0 \u00a0 \u00a0 evaluation_documents=evaluation_documents,\u00a0 \u00a0 )\u00a0 \u00a0 # Make EvaluateProcessorVersion request\u00a0 \u00a0 # Continually polls the operation until it is complete.\u00a0 \u00a0 # This could take some time for larger files\u00a0 \u00a0 operation = client.evaluate_processor_version(request=request)\u00a0 \u00a0 # Print operation details\u00a0 \u00a0 # Format: projects/PROJECT_NUMBER/locations/LOCATION/operations/OPERATION_ID\u00a0 \u00a0 print(f\"Waiting for operation {operation.operation.name} to complete...\")\u00a0 \u00a0 # Wait for operation to complete\u00a0 \u00a0 response = documentai.EvaluateProcessorVersionResponse(operation.result())\u00a0 \u00a0 # Once the operation is complete,\u00a0 \u00a0 # Print evaluation ID from operation response\u00a0 \u00a0 print(f\"Evaluation Complete: {response.evaluation}\")\n```\n## What's nextTo search and filter code samples for other Google Cloud products, see the [Google Cloud sample browser](/docs/samples?product=documentai) .", "guide": "Document AI"}