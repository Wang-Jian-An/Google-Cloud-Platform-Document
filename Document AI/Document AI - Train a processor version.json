{"title": "Document AI - Train a processor version", "url": "https://cloud.google.com/document-ai/docs/samples/documentai-train-processor-version?hl=zh-cn", "abstract": "# Document AI - Train a processor version\nStart a new training job for a processor", "content": "## Explore furtherFor detailed documentation that includes this code sample, see the following:- [Train processor](/document-ai/docs/workbench/train-processor) \n## Code sampleFor more information, see the [Document AI Python API reference documentation](/python/docs/reference/documentai/latest) .\nTo authenticate to Document AI, set up Application Default Credentials.  For more information, see [Set up authentication for a local development environment](/docs/authentication/provide-credentials-adc#local-dev) .\n [View on GitHub](https://github.com/GoogleCloudPlatform/python-docs-samples/blob/HEAD/documentai/snippets/train_processor_version_sample.py) \n```\nfrom typing import Optionalfrom google.api_core.client_options import ClientOptionsfrom google.cloud import documentai \u00a0# type: ignore# TODO(developer): Uncomment these variables before running the sample.# project_id = 'YOUR_PROJECT_ID'# location = 'YOUR_PROCESSOR_LOCATION' # Format is 'us' or 'eu'# processor_id = 'YOUR_PROCESSOR_ID'# processor_version_display_name = 'new-processor-version'# train_data_uri = 'gs://bucket/directory/' # (Optional)# test_data_uri = 'gs://bucket/directory/' # (Optional)def train_processor_version_sample(\u00a0 \u00a0 project_id: str,\u00a0 \u00a0 location: str,\u00a0 \u00a0 processor_id: str,\u00a0 \u00a0 processor_version_display_name: str,\u00a0 \u00a0 train_data_uri: Optional[str] = None,\u00a0 \u00a0 test_data_uri: Optional[str] = None,) -> None:\u00a0 \u00a0 # You must set the api_endpoint if you use a location other than 'us', e.g.:\u00a0 \u00a0 opts = ClientOptions(api_endpoint=f\"{location}-documentai.googleapis.com\")\u00a0 \u00a0 client = documentai.DocumentProcessorServiceClient(client_options=opts)\u00a0 \u00a0 # The full resource name of the processor\u00a0 \u00a0 # e.g. `projects/{project_id}/locations/{location}/processors/{processor_id}\u00a0 \u00a0 parent = client.processor_path(project_id, location, processor_id)\u00a0 \u00a0 processor_version = documentai.ProcessorVersion(\u00a0 \u00a0 \u00a0 \u00a0 display_name=processor_version_display_name\u00a0 \u00a0 )\u00a0 \u00a0 # If train/test data is not supplied, the default sets in the Cloud Console will be used\u00a0 \u00a0 input_data = documentai.TrainProcessorVersionRequest.InputData(\u00a0 \u00a0 \u00a0 \u00a0 training_documents=documentai.BatchDocumentsInputConfig(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 gcs_prefix=documentai.GcsPrefix(gcs_uri_prefix=train_data_uri)\u00a0 \u00a0 \u00a0 \u00a0 ),\u00a0 \u00a0 \u00a0 \u00a0 test_documents=documentai.BatchDocumentsInputConfig(\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 gcs_prefix=documentai.GcsPrefix(gcs_uri_prefix=test_data_uri)\u00a0 \u00a0 \u00a0 \u00a0 ),\u00a0 \u00a0 )\u00a0 \u00a0 request = documentai.TrainProcessorVersionRequest(\u00a0 \u00a0 \u00a0 \u00a0 parent=parent, processor_version=processor_version, input_data=input_data\u00a0 \u00a0 )\u00a0 \u00a0 operation = client.train_processor_version(request=request)\u00a0 \u00a0 # Print operation details\u00a0 \u00a0 print(operation.operation.name)\u00a0 \u00a0 # Wait for operation to complete\u00a0 \u00a0 response = documentai.TrainProcessorVersionResponse(operation.result())\u00a0 \u00a0 metadata = documentai.TrainProcessorVersionMetadata(operation.metadata)\u00a0 \u00a0 print(f\"New Processor Version:{response.processor_version}\")\u00a0 \u00a0 print(f\"Training Set Validation: {metadata.training_dataset_validation}\")\u00a0 \u00a0 print(f\"Test Set Validation: {metadata.test_dataset_validation}\")\n```\n## What's nextTo search and filter code samples for other Google Cloud products, see the [Google Cloud sample browser](/docs/samples?product=documentai) .", "guide": "Document AI"}