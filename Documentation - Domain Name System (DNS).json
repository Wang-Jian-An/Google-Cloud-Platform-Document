{"title": "Documentation - Domain Name System (DNS)", "url": "https://cloud.google.com/distributed-cloud/hosted/docs/latest/gdch/overview", "abstract": "# Documentation - Domain Name System (DNS)\n| 0     | 1                            |\n|:-------------------|:---------------------------------------------------------------------------------------------------------------|\n| Workload location | Root and organization workloads                    |\n| Audit log source | Kubernetes audit logs                       |\n| Audited operations | Update a zone Create or delete a DNSSEC key Change a DNSSEC key (ZSK or KSK) for signing records in a DNS zone |\n", "content": "## Update a zone\n| ('Fields in the log entry that contain audit information', 'Audit metadata') | ('Fields in the log entry that contain audit information', 'Audit field name') | ('Fields in the log entry that contain audit information', 'Value')                                                           |\n|:-------------------------------------------------------------------------------|:---------------------------------------------------------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| User or service identity              | user.username                 | For example, \"user\":{ \"username\": \"dns@example.com\" }                                                              |\n| Target (Fields and values that call the API)         | requestURI                  | \"requestURI\":\"/api/v1/namespaces/dns-system/configmaps/gpc-coredns-external-zonefile\"                                                       |\n| Action (Fields containing the performed operation)        | verb                    | \"verb\":\"update\"                                                                        |\n| Event timestamp                | ts                    | For example, \"ts\":2022-11-11T22:02:02.074Z                                                                  |\n| Source of action                | sourceIPs                  | For example, \"sourceIPs\":[\"10.142.5.147\"]                                                                  |\n| Outcome                  | responseStatus.code                | For example, \"responseStatus\":{ \"code\":200 }                                                                 |\n| Other fields                 | annotations objectRef               | For example, \"annotations\":{ \"authorization.k8s.io/decision\":\"allow\" }, \"objectRef\":{ \"resourceVersion\":\"697063\", \"uid\":\"aed2e6f7-ca03-4bcd-9c07-167ccd4da88e\", \"apiVersion\":\"v1\", \"resource\":\"configmaps\", \"apiGroup\":\"UNKNOWN\", \"namespace\":\"dns-system\", \"name\":\"gpc-coredns-external-zonefile\" } |\n**Example log**\n```\n{\u00a0 \"_gdch_cluster\":\"root-admin\",\u00a0 \"_gdch_fluentbit_pod\":\"anthos-audit-logs-forwarder-7s769\",\u00a0 \"_gdch_service_name\":\"apiserver\",\u00a0 \"annotations\":{\u00a0 \u00a0 \"authorization.k8s.io/decision\":\"allow\",\u00a0 \u00a0 \"authorization.k8s.io/reason\": \"RBAC: allowed by ClusterRoleBinding \\\"dns-core-controllers-rolebinding\\\" of ClusterRole \\\"dns-core-controllers-role\\\" to ServiceAccount \\\"dns-core-controller-sa/dns-system\\\"\",\u00a0 \u00a0 },\u00a0 \"apiVersion\":\"audit.k8s.io/v1\",\u00a0 \"auditID\":\"ba0344d7-283f-4d79-aabc-e083al9b053a\",\u00a0 \"kind\":\"Event\",\u00a0 \"level\":\"Metadata\",\u00a0 \"objectRef\":{\u00a0 \u00a0 \"resourceVersion\":\"697063\",\u00a0 \u00a0 \"uid\":\"aed2e6f7-ca03-4bcd-9c07-167ccd4da88e\",\u00a0 \u00a0 \"apiVersion\":\"v1\",\u00a0 \u00a0 \"resource\":\"configmaps\",\u00a0 \u00a0 \"apiGroup\":\"UNKNOWN\",\u00a0 \u00a0 \"namespace\":\"dns-system\",\u00a0 \u00a0 \"name\":\"gpc-coredns-external-zonefile\"\u00a0 \u00a0 },\u00a0 \"requestReceivedTimestamp\":\"2022-11-11T22:02:02.034688Z\",\u00a0 \"requestURI\":\"/api/v1/namespaces/dns-system/configmaps/gpc-coredns-external-zonefile\",\u00a0 \"responseStatus\":{\u00a0 \u00a0 \"metadata\":{},\u00a0 \u00a0 \"code\":200\u00a0 \u00a0 },\u00a0 \"sourceIPs\":[\"10.142.5.147\"],\u00a0 \"stage\":\"ResponseComplete\",\u00a0 \"stageTimestamp\":\"2022-11-11T22:02:02.045045Z\",\u00a0 \"ts\":2022-11-11T22:02:02.074Z,\u00a0 \"tsNs\":1668204122074601081,\u00a0 \"user\":{\u00a0 \u00a0 \"uid\":\"08f727c9-5e3d-403f-bf35-06ef53f9832c\",\u00a0 \u00a0 \"groups\":[\u00a0 \u00a0 \u00a0 \"system:serviceaccounts\",\u00a0 \u00a0 \u00a0 \"system:serviceaccounts:dns-system\",\u00a0 \u00a0 \u00a0 \"system:authenticated\"\u00a0 \u00a0 \u00a0 ],\u00a0 \u00a0 \"username\": \"system:serviceaccount:dns-system:dns-core-controller-sa\",\u00a0 \u00a0 \"extra\": {\u00a0 \u00a0 \u00a0 \"authentication.kubernetes.io/pod-name\":[\"dns-core-controller-58c4646858-z8kmr\"],\u00a0 \u00a0 \u00a0 \"authentication.kubernetes.io/pod-uid\":[\"7cfc9b72-aacc-4e86-b43f-016498055230\"]\u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 },\u00a0 \"userAgent\":\"controller-manager/v0.0.0 (linux/amd64) kubernetes/$Format\",\u00a0 \"verb\":\"update\"}\n```\n## Create or delete a DNSSEC key\n| ('Fields in the log entry that contain audit information', 'Audit metadata') | ('Fields in the log entry that contain audit information', 'Audit field name') | ('Fields in the log entry that contain audit information', 'Value')                                                          |\n|:-------------------------------------------------------------------------------|:---------------------------------------------------------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| User or service identity              | user.username                 | For example, \"user\":{ \"username\": \"dns@example.com\" }                                                             |\n| Target (Fields and values that call the API)         | requestURI                  | \"requestURI\":\"/api/v1/namespaces/dns-system/secrets/gpc-coredns-external-ksks\"                                                       |\n| Action (Fields containing the performed operation)        | verb                    | \"verb\":\"update\"                                                                       |\n| Event timestamp                | ts                    | For example, \"ts\":2022-11-11T22:02:02.074Z                                                                |\n| Source of action                | sourceIPs                  | For example, \"sourceIPs\":[\"10.142.5.147\"]                                                                |\n| Outcome                  | responseStatus.code                | For example, \"responseStatus\":{ \"code\":200 }                                                               |\n| Other fields                 | annotations objectRef               | For example, \"annotations\":{ \"authorization.k8s.io/decision\":\"allow\" }, \"objectRef\":{ \"resource\": \"secrets\", \"namespace\":\"dns-system\", \"uid\":\"9a9c16ca-3601-4bc9-8683-629a61ea5234\", \"apiVersion\":\"v1\", \"resourceVersion\":\"825911\", \"apiGroup\":\"UNKNOWN\", \"name\":\"gpc-coredns-external-ksks\" } |\n**Example log**\n```\n{\u00a0 \"_gdch_cluster\":\"root-admin\",\u00a0 \"_gdch_fluentbit_pod\":\"audit-logs-forwarder-t15kb\",\u00a0 \"_gdch_service_name\":\"apiserver\",\u00a0 \"annotations\":{\u00a0 \u00a0 \"authorization.k8s.io/decision\":\"allow\",\u00a0 \u00a0 \"authorization.k8s.io/reason\":\"RBAC: allowed by RoleBinding 'dns@example.com-dns-key-manager/dns-system' of Role 'dns-key-manager' to User 'dns@example.com'\"\u00a0 \u00a0 },\u00a0 \"apiVersion\":\"audit.k8s.io/v1\",\u00a0 \"auditID\":\"87d3d836-b5a2-487a-8480-bc8078c5b248\",\u00a0 \"kind\":\"Event\",\u00a0 \"level\":\"Metadata\",\u00a0 \"objectRef\":{\u00a0 \u00a0 \"resource\": \"secrets\",\u00a0 \u00a0 \"namespace\":\"dns-system\",\u00a0 \u00a0 \"uid\":\"9a9c16ca-3601-4bc9-8683-629a61ea5234\",\u00a0 \u00a0 \"apiVersion\":\"v1\",\u00a0 \u00a0 \"resourceVersion\":\"825911\",\u00a0 \u00a0 \"apiGroup\":\"UNKNOWN\",\u00a0 \u00a0 \"name\":\"gpc-coredns-external-ksks\"\u00a0 \u00a0 },\u00a0 \"requestReceivedTimestamp\":\"2022-11-11T22:02:02.034688Z\",\u00a0 \"requestURI\":\"/api/v1/namespaces/dns-system/secrets/gpc-coredns-external-ksks\",\u00a0 \"responseStatus\":{\u00a0 \u00a0 \"metadata\":{},\u00a0 \u00a0 \"code\":200\u00a0 \u00a0 },\u00a0 \"sourceIPs\":[\"10.142.5.147\"],\u00a0 \"stage\":\"ResponseComplete\",\u00a0 \"stageTimestamp\":\"2022-11-11T22:02:02.045045Z\",\u00a0 \"ts\":2022-11-11T22:02:02.074Z,\u00a0 \"tsNs\":1668204122074601081,\u00a0 \"user\":{\u00a0 \u00a0 \"groups\":[\u00a0 \u00a0 \u00a0 \"system: authenticated\"\u00a0 \u00a0 \u00a0 ],\u00a0 \u00a0 \"username\": \"dns@example.com\"\u00a0 \u00a0 },\u00a0 \"userAgent\":\"gdcloud/v0.0.0 (linux/amd64) kubernetes/$Format\",\u00a0 \"verb\":\"update\"}\n```\n## Change a DNSSEC key\n| ('Fields in the log entry that contain audit information', 'Audit metadata') | ('Fields in the log entry that contain audit information', 'Audit field name') | ('Fields in the log entry that contain audit information', 'Value')                                                           |\n|:-------------------------------------------------------------------------------|:---------------------------------------------------------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| User or service identity              | user.username                 | For example, \"user\":{ \"username\": \"dns@example.com\" }                                                              |\n| Target (Fields and values that call the API)         | requestURI                  | \"requestURI\":\"/api/v1/namespaces/dns-system/configmaps/gpc-coredns-external-corefile\"                                                       |\n| Action (Fields containing the performed operation)        | verb                    | \"verb\":\"update\"                                                                        |\n| Event timestamp                | ts                    | For example, \"ts\":2022-11-11T22:02:02.074Z                                                                  |\n| Source of action                | sourceIPs                  | For example, \"sourceIPs\":[\"10.142.5.147\"]                                                                  |\n| Outcome                  | responseStatus.code                | For example, \"responseStatus\":{ \"code\":200 }                                                                 |\n| Other fields                 | annotations objectRef               | For example, \"annotations\":{ \"authorization.k8s.io/decision\":\"allow\" }, \"objectRef\":{ \"resourceVersion\":\"758987\", \"resource\":\"configmaps\", \"apiGroup\":\"UNKNOWN\", \"name\":\"gpc-coredns-external-corefile\", \"apiVersion\":\"v1\", \"namespace\":\"dns-system\", \"uid\":\"d831c851-4fa3-4\u00a330-92f6-c68cb36b0a80\" } |\n**Example log**\n```\n{\u00a0 \"_gdch_cluster\":\"root-admin\",\u00a0 \"_gdch_fluentbit_pod\":\"audit-logs-forwarder-8z2rm\",\u00a0 \"_gdch_service_name\":\"apiserver\",\u00a0 \"annotations\":{\u00a0 \u00a0 \"authorization.k8s.io/decision\":\"allow\",\u00a0 \u00a0 \"authorization.k8s.io/reason\":\"RBAC: allowed by RoleBinding 'dns@example.com-dns-key-manager/dns-system' of Role 'dns-key-manager' to User 'dns@example.com'\"\u00a0 \u00a0 },\u00a0 \"apiVersion\":\"audit.k8s.io/v1\",\u00a0 \"auditID\":\"ba0344d7-283f-4d79-aabc-e083al9b053a\",\u00a0 \"kind\":\"Event\",\u00a0 \"level\":\"Metadata\",\u00a0 \"objectRef\":{\u00a0 \u00a0 \"resourceVersion\":\"758987\",\u00a0 \u00a0 \"resource\":\"configmaps\",\u00a0 \u00a0 \"apiGroup\":\"UNKNOWN\",\u00a0 \u00a0 \"name\":\"gpc-coredns-external- corefile\",\u00a0 \u00a0 \"apiVersion\":\"v1\",\u00a0 \u00a0 \"namespace\":\"dns-system\",\u00a0 \u00a0 \"uid\":\"d831c851-4fa3-4\u00a330-92f6-c68cb36b0a80\"\u00a0 \u00a0 },\u00a0 \"requestReceivedTimestamp\":\"2022-11-11T22:02:02.034688Z\",\u00a0 \"requestURI\":\"/api/v1/namespaces/dns-system/configmaps/gpc-coredns-external-corefile\",\u00a0 \"responseStatus\":{\u00a0 \u00a0 \"metadata\":{},\u00a0 \u00a0 \"code\":200\u00a0 \u00a0 },\u00a0 \"sourceIPs\":[\"10.142.5.147\"],\u00a0 \"stage\":\"ResponseComplete\",\u00a0 \"stageTimestamp\":\"2022-11-11T22:02:02.045045Z\",\u00a0 \"ts\":2022-11-11T22:02:02.074Z,\u00a0 \"tsNs\":1668204122074601081,\u00a0 \"user\":{\u00a0 \u00a0 \"groups\":[\u00a0 \u00a0 \u00a0 \"system: authenticated\"\u00a0 \u00a0 \u00a0 ],\u00a0 \u00a0 \"username\": \"dns@example.com\"\u00a0 \u00a0 },\u00a0 \"userAgent\":\"gdcloud/v0.0.0 (linux/amd64) kubernetes/$Format\",\u00a0 \"verb\":\"update\"}\n```", "guide": "Documentation"}