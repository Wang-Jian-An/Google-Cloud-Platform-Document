{"title": "Apigee - Configure the Synchronizer", "url": "https://cloud.google.com/apigee/docs/api-platform/get-started/what-apigee", "abstract": "# Apigee - Configure the Synchronizer\nYou are currently viewing version 1.1 of the Apigee hybrid documentation. **This version is end of life.** You should upgrade to a newer version. For more information, see [Supported versions](/apigee/docs/hybrid/supported-platforms#supported-versions) .\nThis section describes the Synchronizer.\n", "content": "## Synchronizer overview\nIn Apigee hybrid, the Synchronizer's primary job is to poll and download the runtime contracts which are supplied by the management plane. Information communicated by contract includes API proxies, API products, caches, and virtual hosts.\nSynchronizer instances running in the runtime-plane are expected to poll the management plane on a regular basis, download the contracts and make the same available to local runtime instances.\nOne Synchronizer can support many Message Processors deployed in the same pod.\n## Enable Synchronizer access\nYou must grant the [Synchronizer](/apigee/docs/hybrid/v1.1/what-is-hybrid#synchronizer) permission to pull down Apigee artifacts, such as proxy bundles and resources from the management plane. You must call an Apigee API to authorize the Synchronizer to pull artifacts down from the management plane to the runtime plane.\n- Ensure that you have enabled the Apigee API as explained in the GCP setup steps.  For details, see [Step 3: Enable APIs](/apigee/docs/hybrid/v1.1/precog-enableapi) .\n- Locate the **write-enabled GCP service account key** (a JSON file) that you  downloaded as part of [Create service accounts](/apigee/docs/hybrid/v1.1/install-download-install#create-service-accounts) . The service account has the **Apigee Org Admin** role and is the one named \"apigee-org-admin\". If you did not previously create this service  account, you must do so before continuing.\n- Set the `GOOGLE_APPLICATION_CREDENTIALS` environment variable to the path where the  service account key is located:```\nexport GOOGLE_APPLICATION_CREDENTIALS=your_sa_credentials_file.json\n```\n- Call the [setSyncAuthorization](/apigee/docs/hybrid/v1.1/syncauthorization-reference) API to  enable the required permissions for Synchronizer: **IMPORTANT: ** Be sure that the service account name that you  add to this API has the role **Apigee Synchronizer Manager** . See also [Create service accounts](/apigee/docs/hybrid/v1.1/install-download-install#create-service-accounts) .```\ncurl -X POST -H \"Authorization: Bearer $(gcloud auth application-default print-access-token)\" \\\n -H \"Content-Type:application/json\" \\\n \"https://apigee.googleapis.com/v1/organizations/your_org_name:setSyncAuthorization\" \\\n -d '{\"identities\":[\"serviceAccount:synchronizer-manager-service-account-name\"]}'\n```Where:- `your_org_name`: The name of the hybrid organization.\n- `synchronizer-manager-service-account-name`: The name of a service account   with the **Apigee Synchronizer Manager** role. The name is formed like an   email address. For example:`my-synchronizer-manager-service_account@my_project_id.iam.gserviceaccount.com`\nExample:```\ncurl -X POST -H \"Authorization: Bearer $(gcloud auth application-default print-access-token)\" \\\n -H \"Content-Type:application/json\" \\\n \"https://apigee.googleapis.com/v1/organizations/my_org:setSyncAuthorization\" \\\n -d '{\"identities\":[\"serviceAccount:my-synchronizer-manager-service_account@my_project_id.iam.gserviceaccount.com\"]}'\n```For more information on this API, see [SyncAuthorization API](/apigee/docs/hybrid/v1.1/syncauthorization-reference) .\n- To verify that the service account was set, call the following API to get a list of service  accounts:```\ncurl -X POST -H \"Authorization: Bearer $(gcloud auth application-default print-access-token)\" \\\n -H \"Content-Type:application/json\" \\\n \"https://apigee.googleapis.com/v1/organizations/your_org_name:getSyncAuthorization\" \\\n -d ''\n```The output looks similar to the following:```\n{\n \"identities\":[  \"serviceAccount:my-synchronizer-manager-service_account@my_project_id.iam.gserviceaccount.com\"\n ],\n \"etag\":\"BwWJgyS8I4w=\"\n}\n```", "guide": "Apigee"}