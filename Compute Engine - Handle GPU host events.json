{"title": "Compute Engine - Handle GPU host events", "url": "https://cloud.google.com/compute/docs/instances", "abstract": "# Compute Engine - Handle GPU host events\nVMs that have attached GPUs cannot be [live migrated](/compute/docs/instances/live-migration-process#limitations) . You must set these VMs to [stop for host events](/compute/docs/instances/host-maintenance-overview#terminate_and_optionally_restart) . If needed, you can set your stopped VMs to [automatically restart](/compute/docs/instances/host-maintenance-overview#autorestart) after the maintenance event completes. Host maintenance events, on Compute Engine, have a [frequency of once every two weeks](/compute/docs/instances/host-maintenance-overview#maintenanceevents) but might occasionally run more frequently.\n**Note:** VMs with attached GPUs can take up to one hour to terminate after failures or [host errors](/compute/docs/faq#hosterror) .\nTo minimize disruptions to your workloads during a maintenance event, you can monitor the maintenance schedule for your virtual machine (VM) instance, and prepare your workloads to transition through the system restart.\nTo receive advanced notice of host events, monitor the `/computeMetadata/v1/instance/maintenance-event` metadata value. If the request to the metadata server returns `NONE` , then the VM isn't scheduled to stop. For example, run the following command from within a VM:\n```\ncurl http://metadata.google.internal/computeMetadata/v1/instance/maintenance-event -H \"Metadata-Flavor: Google\"\nNONE\n```\nIf the metadata server returns `TERMINATE_ON_HOST_MAINTENANCE` , then your VM is scheduled for stopping. Compute Engine gives GPU VMs a 1-hour stopping notice, while normal VMs receive only a 60-second notice. Configure your application to transition through the maintenance event. For example, you might use one of the following techniques:\n- Configure your application to temporarily move work in progress to a [Cloud Storage bucket](/storage/docs/uploading-objects) , then retrieve that data after the VM restarts.\n- Write data to a [secondary persistent disk](/compute/docs/disks/add-persistent-disk) . When the VM automatically restarts, the persistent disk can be reattached and your application can resume work.", "content": "## What's next?\n- Learn more about [GPU platforms](/compute/docs/gpus) .\n- To learn more about managing and scaling groups of VMs, see [Set the group's target size](/compute/docs/instance-groups/add-remove-vms-in-mig#set_the_groups_target_size) .\n- To monitor GPU performance, see [Monitoring GPU performance](/compute/docs/gpus/monitor-gpus) .\n- To improve network performance, see [Use higher network bandwidth](/compute/docs/gpus/optimize-gpus) .\n- Learn how to [troubleshoot VM shutdowns and reboots](/compute/docs/troubleshooting/troubleshooting-reboots) .", "guide": "Compute Engine"}