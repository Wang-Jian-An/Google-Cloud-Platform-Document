{"title": "Documentation - Marketplace (MKT)", "url": "https://cloud.google.com/distributed-cloud/hosted/docs/latest/gdch/overview", "abstract": "# Documentation - Marketplace (MKT)\n| 0     | 1                             |\n|:-------------------|:-------------------------------------------------------------------------------------------------------------------|\n| Workload location | Organization only workloads                      |\n| Audit log source | KRM API                           |\n| Audited operations | Creating a Marketplace service Updating a Marketplace service Revoking or granting access to a Marketplace service |\n", "content": "## Creating a Marketplace service\n| ('Fields in the log entry that contain audit information', 'Audit metadata') | ('Fields in the log entry that contain audit information', 'Audit field name') | ('Fields in the log entry that contain audit information', 'Value')     |\n|:-------------------------------------------------------------------------------|:---------------------------------------------------------------------------------|:------------------------------------------------------------------------------------|\n| User or service identity              | username                   | For example, \"username\": \"system:serviceaccount:gpc-system:fleet-admin-controller\" |\n| Target (Fields and values that call the API)         | apiGroup                   | For example, \"apiGroup\": \"marketplace.gdc.goog\"          |\n| Action (Fields containing the performed operation)        | verb                    | For example, \"verb\": \"create\"              |\n| Event timestamp                | requestReceivedTimestamp               | For example, \"requestReceivedTimestamp\":\"2022-12-04T03:07:21.657328Z\"    |\n| Source of action                | userAgent                  | For example, \"userAgent\": \"fleet-admin-cm/v0.0.0 (linux/amd64) kubernetes/$Format\" |\n| Outcome                  | response_code                 | For example, \"response_code\":\"200\"             |\n| Other fields                 | Not applicable                 | Not applicable                  |\n**Example log**\n```\n{\u00a0 \"_gdch_cluster\": \"org-1-admin\",\u00a0 \"apiVersion\": \"audit.k8s.io/v1\",\u00a0 \"auditID\": \"c142325e-8dee-4f36-b392-6d4dfe33947f\",\u00a0 \"kind\": \"Event\",\u00a0 \"level\": \"Metadata\",\u00a0 \"objectRef\": {\u00a0 \u00a0 \"name\": \"dataproc-service\",\u00a0 \u00a0 \"namespace\": \"gpc-system\",\u00a0 \u00a0 \"resource\": \"marketplaceservices\",\u00a0 \u00a0 \"apiGroup\": \"marketplace.gdc.goog\",\u00a0 \u00a0 \"apiVersion\": \"v1alpha1\"\u00a0 },\u00a0 \"requestReceivedTimestamp\": \"2022-12-04T03:07:21.657328Z\",\u00a0 \"requestURI\": \"/apis/marketplace.gdc.goog/v1alpha1/namespaces/gpc-system/marketplaceservices\"\u00a0 \"responseStatus\": {\u00a0 \u00a0 \"code\": 201,\u00a0 \u00a0 \"metadata\": {},\u00a0 }\u00a0 \u00a0\"sourceIPs\": [\u00a0 \u00a0 \"10.53.166.199\"\u00a0 ],\u00a0 \"stage\": \"ResponseComplete\",\u00a0 \"stageTimestamp\": \"2022-12-04T03:07:21.657328Z\",\u00a0 \"user\": {\u00a0 \u00a0 \"extra\": {\u00a0 \u00a0 \u00a0 \"authentication.kubernetes.io/pod-name\": [\u00a0 \u00a0 \u00a0 \u00a0 \"fleet-admin-controller-59cc779bfd-vtx96\"\u00a0 \u00a0 \u00a0 ],\u00a0 \u00a0 \u00a0 \"authentication.kubernetes.io/pod-uid\": [\u00a0 \u00a0 \u00a0 \u00a0 \"3f656979-43ea-4012-892c-a595cf94a17b\"\u00a0 \u00a0 \u00a0 ]\u00a0 \u00a0 }\u00a0 \u00a0 \"username\": \"system:serviceaccount:gpc-system:fleet-admin-controller\",\u00a0 \u00a0 \"uid\": \"884009bb-d50c-46a1-a68c-8fa1b91da675\"\u00a0 \u00a0 \"groups\": [\u00a0 \u00a0 \u00a0 \"system:serviceaccounts\",\u00a0 \u00a0 \u00a0 \"system:serviceaccounts:gpc-system\",\u00a0 \u00a0 \u00a0 \"system:authenticated\"\u00a0 \u00a0 ]\u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \"userAgent\": \"fleet-admin-cm/v0.0.0 (linux/amd64) kubernetes/$Format\",\u00a0 \u00a0 \u00a0 \"verb\": \"create\"}\n```\n## Updating a Marketplace service\n| ('Fields in the log entry that contain audit information', 'Audit metadata') | ('Fields in the log entry that contain audit information', 'Audit field name') | ('Fields in the log entry that contain audit information', 'Value')   |\n|:-------------------------------------------------------------------------------|:---------------------------------------------------------------------------------|:-----------------------------------------------------------------------------|\n| User or service identity              | username                   | For example, \"username\": \"kubernetes-admin\"         |\n| Target (Fields and values that call the API)         | apiGroup                   | For example, \"apiGroup\": \"marketplace.gdc.goog\"        |\n| Action (Fields containing the performed operation)        | verb                    | For example, \"verb\": \"patch\"             |\n| Event timestamp                | requestReceivedTimestamp               | For example, \"requestReceivedTimestamp\":\"2022-12-03T01:09:47.451242Z\"  |\n| Source of action                | userAgent                  | For example, \"userAgent\": \"kubectl/v1.23.5 (linux/amd64) kubernetes/c285e78\" |\n| Outcome                  | response_code                 | For example, \"response_code\":\"200\"           |\n| Other fields                 | Not applicable                 | Not applicable                |\n**Example log**\n```\n{\u00a0 \"cluster\": \"org-1-admin\",\u00a0 \"apiVersion\": \"audit.k8s.io/v1\",\u00a0 \"auditID\": \"c142325e-8dee-4f36-b392-6d4dfe33947f\",\u00a0 \"kind\": \"Event\",\u00a0 \"level\": \"Metadata\",\u00a0 \"objectRef\": {\u00a0 \u00a0 \"name\": \"dataproc-service\",\u00a0 \u00a0 \"namespace\": \"gpc-system\",\u00a0 \u00a0 \"resource\": \"marketplaceservices\",\u00a0 \u00a0 \"apiGroup\": \"marketplace.gdc.goog\",\u00a0 \u00a0 \"apiVersion\": \"v1alpha1\"\u00a0 },\u00a0 \"requestReceivedTimestamp\": \"2022-12-04T03:07:21.657328Z\",\u00a0 \"requestURI\": \"/apis/marketplace.gdc.goog/v1alpha1/namespaces/gpc-system/marketplaceservices/dataproc-service?fieldManager=kubectl-edit\"\u00a0 \"responseStatus\": {\u00a0 \u00a0 \"code\": 201,\u00a0 \u00a0 \"metadata\": {},\u00a0 }\u00a0 \u00a0\"sourceIPs\": [\u00a0 \u00a0 \"10.200.0.6\"\u00a0 ],\u00a0 \"stage\": \"ResponseComplete\",\u00a0 \"stageTimestamp\": \"2022-12-04T03:07:21.657328Z\",\u00a0 \u00a0\"user\": {\u00a0 \u00a0 \"groups\": [\u00a0 \u00a0 \u00a0 \"system:masters\",\u00a0 \u00a0 \u00a0 \"system:authenticated\"\u00a0 \u00a0 \u00a0 ],\u00a0 \u00a0 \u00a0 \"username\": \"kubernetes-admin\"\u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \"userAgent\": \"kubectl/v1.23.5 (linux/amd64) kubernetes/c285e78\",\u00a0 \u00a0 \u00a0 \"verb\": \"patch\"}\n```\n## Revoking or granting access to a Marketplace service\n| ('Fields in the log entry that contain audit information', 'Audit metadata') | ('Fields in the log entry that contain audit information', 'Audit field name') | ('Fields in the log entry that contain audit information', 'Value')    |\n|:-------------------------------------------------------------------------------|:---------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------|\n| User or service identity              | username                   | For example, \"username\": \"system:serviceaccount:gpc-system:fleet-admin-controller\" |\n| Target (Fields and values that call the API)         | apiGroup                   | For example, \"apiGroup\": \"rbac.authorization.k8s.io\"        |\n| Action (Fields containing the performed operation)        | verb                    | For example, \"verb\": \"create\"              |\n| Event timestamp                | time                    | For example, \"time\":\"2022-12-04T02:00:17.475634Z\"         |\n| Source of action                | username                   | For example, \"username\": \"fop-platform-admin@example.com\"       |\n| Outcome                  | response_code                 | For example, \"response_code\":\"201\"             |\n| Other fields                 | Not applicable                 | Not applicable                  |\n**Example log**\n```\n{\u00a0 \"cluster\": \"org-1-admin\",\u00a0 \"apiVersion\": \"audit.k8s.io/v1\",\u00a0 \"auditID\": \"c142325e-8dee-4f36-b392-6d4dfe33947f\",\u00a0 \"impersonatedUser\": {\u00a0 \"groups\": [\u00a0 \u00a0 \"system:authenticated\"\u00a0 \u00a0 \"username\": \"fop-platform-admin@example.com\"\u00a0 \u00a0 }\u00a0 \"kind\": \"Event\",\u00a0 \"level\": \"Metadata\",\u00a0 \"objectRef\": {\u00a0 \u00a0 \"apiVersion\": \"v1\"\u00a0 \u00a0 \"name\": \"user-fop-platform-admin--example--com-marketplace-service-editor\",\u00a0 \u00a0 \"resource\": \"clusterrolebindings\",\u00a0 \u00a0 \"apiGroup\": \"rbac.authorization.k8s.io\",\u00a0 },\u00a0 \"requestReceivedTimestamp\": \"2022-12-04T03:07:21.657328Z\",\u00a0 \"requestURI\": \"/apis/rbac.authorization.k8s.io/v1/clusterrolebindings\"\u00a0 \"responseStatus\": {\u00a0 \u00a0 \"code\": 201,\u00a0 \u00a0 \"metadata\": {},\u00a0 }\u00a0 \u00a0\"sourceIPs\": [\u00a0 \u00a0 \"10.253.164.220\"\u00a0 ],\u00a0 \"stage\": \"ResponseComplete\",\u00a0 \"stageTimestamp\": \"2022-12-04T03:07:21.657328Z\",\u00a0 \u00a0\"user\": {\u00a0 \u00a0 \"extra\": {\u00a0 \u00a0 \u00a0 \"authentication.kubernetes.io/pod-name\": [\u00a0 \u00a0 \u00a0 \u00a0 \"fleet-admin-gateway-server-c8b7f879c-zwchc\"\u00a0 \u00a0 \u00a0 ],\u00a0 \u00a0 \u00a0 \"authentication.kubernetes.io/pod-uid\": [\u00a0 \u00a0 \u00a0 \u00a0 \"f0ec7e0-a604-4b70-a5fc-793e0c158349\"\u00a0 \u00a0 \u00a0 ]\u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \"username\": \"system:serviceaccount:gpc-system:fleet-admin-gateway-server-sa\",\u00a0 \u00a0 \"uid\": \"72904c96-d59a-4344-8408-5751f42ffdd88\"\u00a0 \u00a0 \"groups\": [\u00a0 \u00a0 \u00a0 \"system:serviceaccounts\",\u00a0 \u00a0 \u00a0 \"system:serviceaccounts:gpc-system\",\u00a0 \u00a0 \u00a0 \"system:authenticated\"\u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \"userAgent\": \"ui-gateway-server/v0.0.0 (linux/amd64) kubernetes/$Format\",\u00a0 \u00a0 \u00a0 \"verb\": \"create\"}\n```", "guide": "Documentation"}