{"title": "Compute Engine - Capturing VM screenshots", "url": "https://cloud.google.com/compute/docs/instances", "abstract": "# Compute Engine - Capturing VM screenshots\nThis page describes how to capture a screenshot from a virtual machine (VM) instance by using the VM screenshot tool.\nCapturing a screenshot from a VM can help you troubleshoot a VM that is not otherwise accessible. For example, a VM might not be accessible if it is booting or has a disk image that is corrupted.\n", "content": "## Windows-based operating systems\nVM screenshots can help to troubleshoot failed RDP connections to Windows VMs, by identifying if the instance has started successfully. For information about troubleshooting RDP connections, see [TroubleshootingRDP](/compute/docs/troubleshooting/troubleshooting-rdp#vm-screenshot) .\n## Privacy considerations with remote desktop clients\nThe VM screenshot tool uses the display adapter of the VM to capture a screenshot of the local console session through a remote desktop client. Capturing a screenshot through the local console session might capture sensitive information from the user's desktop or browser.\nIf you are concerned about exposing sensitive information as part of a screenshot, configure your respective remote desktop client in the following way so that it does not use the local console session:\n- [Chrome Remote Desktop](https://remotedesktop.google.com/) : If you are using Chrome Remote Desktop, be sure to enable [Curtainmode](https://support.google.com/chrome/a/answer/2799701) so that it does not connect to the local console session.\n- [Microsoft RDP](https://docs.microsoft.com/en-us/windows-server/remote/remote-desktop-services/clients/remote-desktop-clients) : RDP clients connect by using [Windows Remote Desktop Services(RDS)](https://docs.microsoft.com/en-us/windows-server/remote/remote-desktop-services/welcome-to-rds) . Windows RDS lets RDP clients choose whether to start a new console session or connect to the existing one, and because of this, there might be privacy implications. For information about customizing RDS so that it does not connect to the local console session, see [Supported Remote Desktop RDP filesettings](https://docs.microsoft.com/en-us/windows-server/remote/remote-desktop-services/clients/rdp-files) .\nBefore sharing screenshots with [GoogleSupport](https://cloud.google.com/support-hub) , make sure to review them for sensitive information.\n## Before you begin\n- On your VM, [ enable the virtual display](/compute/docs/instances/enable-instance-virtual-display) . To enable the virtual display you do not need to install a virtual display driver for the operating system.\n- If you haven't already, set up authentication. [Authentication](/compute/docs/authentication) is the process by which your identity is verified for access to Google Cloud services and APIs. To run code or samples from a local development environment, you can authenticate to Compute Engine as follows.Select the tab for how you plan to use the samples on this page:\nWhen you use the Google Cloud console to access Google Cloud services and   APIs, you don't need to set up authentication.- [Install](/sdk/docs/install) the Google Cloud CLI, then [initialize](/sdk/docs/initializing) it by running the following command:```\ngcloud init\n``` **Note:** If you installed the gcloud CLI  previously, make sure you have the latest version by running`gcloud components  update`.\n- [ Set a default region and zone](/compute/docs/gcloud-compute#set_default_zone_and_region_in_your_local_client) .\nTo use the REST API samples on this page in a local development environment, you use the credentials you provide to the gcloud CLI.- [Install](/sdk/docs/install) the Google Cloud CLI, then [initialize](/sdk/docs/initializing) it by running the following command:\n- ```\ngcloud init\n```## Limitations\n- The instance must be in the `RUNNING` [life cyclestate](/compute/docs/instances/instance-life-cycle) .\n- The maximum rate for capturing screenshots is 20 per second, which is the [APIrate limit](/compute/docs/api-rate-limits) .\n- You can't initiate a screenshot while one is in progress.\n- You can capture one screenshot at a time.## Capturing a screenshot from a VM\nUse the following procedures to capture a screenshot from a VM.- In the Google Cloud console, go to the **VM instances** page. [Go to VM instances](https://console.cloud.google.com/compute/instances) \n- From the **VM instances** page, click the name of the VM instance to capture a screenshot from.\n- On the **VM instance details** page, click the **Screenshot** tab.\n- Click **Refresh** to generate a screenshot from the VM. If you have not [enabled a virtualdisplay](/compute/docs/instances/enable-instance-virtual-display) , the Google Cloud console does not show a screenshot.\nCapture a screenshot from a VM by using the [gcloud computeinstances get-screenshot command](/sdk/gcloud/reference/compute/instances) :\n```\ngcloud compute instances get-screenshot VM_NAME \\\n --destination=JPEG_FILENAME \\\n --zone=ZONE\n```\nReplace the following:- `` : name of the VM to capture a screenshot from.\n- `` : optional filename of the jpeg for the screenshot output. If you do not specify a filename, the raw jpeg data is sent to standard output (stdout).\n- `` : zone of the VM to capture a screenshot from.\nWith the Compute Engine API, capture a screenshot from a VM by using the [instances.getScreenshotrequest](/compute/docs/reference/rest/v1/instances/getScreenshot) :\n```\nGET https://compute.googleapis.com/compute/v1/projects/PROJECT/zo\nnes/ZONE/instances/VM_NAME/screenshot\n```\nReplace the following:- `` : ID of the project containing the VM to capture a screenshot from.\n- `` : zone containing the project.\n- `` : name of the VM to capture a screenshot from.## Example VM screenshots\n### The Compute Engine UEFI loading the boot manager\nThe following screenshot shows a [WindowsServer](/compute/docs/images/os-details#windows_server) VM that is unavailable while the boot manager is loading:\n### Windows Server 2016 Datacenter performing updates\nThe following screenshot shows a [Windows Server2016](/compute/docs/images/os-details#windows_server) VM that is unavailable while completing updates:\n### Windows Server 2016 loading system services\nThe following screenshot shows a [Windows Server2016](/compute/docs/images/os-details#windows_server) VM that is unavailable while loading system services:\n### Login screen for Windows Server 2016 Datacenter\nThe following screenshot shows a [Windows Server2016](/compute/docs/images/os-details#windows_server) VM that has completed startup and is ready to login:\n### Sysprep process of Windows Server 2019 Core\nThe following screenshot shows the [sysprepprocess](/compute/docs/instances/windows/creating-windows-os-image#create_server_image) of a [Windows Server 2019Core](/compute/docs/images/os-details#windows_server) VM instance:\n### Blue screen error from Windows Server 2016 Datacenter\nThe following screenshot shows a blue screen error from a [Windows Server2016 Datacenter](/compute/docs/images) VM instance:## What's next\n- Learn how to [collect diagnostic information from aVM](/compute/docs/instances/collecting-diagnostic-information) .\n- Learn how to [troubleshoot Windowsinstances](/compute/docs/troubleshooting/troubleshooting-windows) .", "guide": "Compute Engine"}