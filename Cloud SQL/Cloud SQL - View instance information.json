{"title": "Cloud SQL - View instance information", "url": "https://cloud.google.com/sql/docs/postgres/instance-info", "abstract": "# Cloud SQL - View instance information\nThis page describes how to view information about a Cloud SQL instance.\n", "content": "## View instance summary information\nYou can view summary information about Cloud SQL instances by using the Google Cloud console, [](/sdk/gcloud)  [gcloud CLI](/sdk/gcloud) , or the API.\n- In the Google Cloud console, go to the **Cloud SQL Instances** page. [Go to Cloud SQL Instances](https://console.cloud.google.com/sql) The following information appears about Cloud SQL instances that have [Private Service Connect](/sql/docs/postgres/about-private-service-connect) enabled for them:- **Internal connection method: ** whether Private Service Connect or [private services access](/sql/docs/postgres/configure-private-services-access) is used to connect to the instance\n- **Private IP address: ** the IP addresses of the [Private Service Connect endpoints](/sql/docs/postgres/about-private-service-connect#psc-endpoint) in the VPC network that connect to the [service attachment](/sql/docs/postgres/about-private-service-connect#service-attachment) of the instance\n- **DNS name:** the [DNS name](/sql/docs/postgres/about-private-service-connect#dns-name-record) of the instance\n- To see the current instance state, hold the pointer over the status icon  next to an instance name.If the instance is in a `FAILED` or `MAINTENANCE` state, then you can [clone the instance](/sql/docs/postgres/clone-instance#clone-unavailable-instance) by selecting a time from the past and restoring the instance to that time.\n- To open the **Overview** page of an instance, click the instance name.In the **Connect to this instance** card, the following additional information appears about Cloud SQL instances with Private Service Connect enabled:- **Private IP connectivity:** the status is **Enabled** because the instance must have an internal IP address\n- **Allowed projects:** these [projects](/sql/docs/postgres/about-private-service-connect#allowed-psc-projects) allow connections from Private Service Connect endpoints to the instance\n- **Service attachment:** the service attachment of the instance\n- **Public IP connectivity:** the status is **Disabled** because external IP connections aren't supported\n- To see connectivity information about the instance, including whether an internal or  external IP address is added to the instance, any authorized networks  associated with the instance, and whether other Google Cloud services, such  as BigQuery, can access data in Cloud SQL and make queries against this data  over an internal connection, click the **Connections** tab.For more information about this tab, see [About connection  options](/sql/docs/postgres/connect-overview) .\n- Click the **Networking** tab. The following information appears about instances that have Private Service Connect enabled for them:- The **Private IP** checkbox is selected, but deactivated. The instance must have an internal IP address, and this setting can't be changed.\n- The allowed projects for the instance.\n- The **Public IP** checkbox is selected, but deactivated.\n- The **Authorized networks** field is deactivated because the instance uses Private Service Connect, which doesn't support this feature.For information about installing and getting started with the gcloud CLI, see [Install the gcloud CLI](/sdk/docs/install) . For information about starting Cloud Shell, see [Use Cloud Shell](/shell/docs/using-cloud-shell) .- To view summary information about an instance, use the [gcloud sql instances describe](/sdk/gcloud/reference/sql/instances/describe) command:```\ngcloud sql instances describe INSTANCE_NAME \\--project=PROJECT_ID\n```Make the following replacements:- : the name of the Cloud SQL instance. If this instance has [Private Service Connect](/sql/docs/postgres/about-private-service-connect) enabled for it, then [Private Service Connect endpoints](/sql/docs/postgres/about-private-service-connect#psc-endpoint) in VPC networks can connect to it.\n- : the ID or [project number](/resource-manager/docs/creating-managing-projects#identifying_projects) of the Google Cloud project that contains the instance.\nHere's an example of the output for running this command:```\ngcloud sql instances describe myinstance \\--project=12345...dnsName: mydnsname...pscServiceAttachmentLink: projects/myproject/regions/myregion/serviceAttachments/myserviceattachment...\u00a0settings:\u00a0 ...\u00a0 ipConfiguration:\u00a0 ipv4Enabled: false\u00a0 pscConfig:\u00a0 \u00a0 allowedConsumerProjects:\u00a0 \u00a0 \u00a0 - projects/23456\u00a0 \u00a0 \u00a0 - projects/34567\u00a0 \u00a0 pscEnabled: true\n```\n- To view more-detailed information about instances that have Private Service Connect enabled for them, add the following parameters:\n- | Setting       | Parameter    | Notes                                                        |\n|:---------------------------------|:-------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| DNS Name       | dnsName     | The DNS name for the instance. We recommend that you create a DNS record with this name and point it to the IP address of the Private Service Connect endpoint. We also recommend that you use this name to connect to the instance. |\n| Service attachment    | pscServiceAttachmentLink | The URI that points to the service attachment of the instance. Use this URI to create the Private Service Connect endpoint.                           |\n| Allowed consumer projects  | allowedConsumerProjects | A list of the allowed projects for the instance. You can create Private Service Connect endpoints from any VPC networks in these projects to the service attachment of the instance.             |\n| Enabling Private Service Connect | pscEnabled    | Whether an instance has Private Service Connect enabled for it.                                          |\nTo create an instance, use a [Terraform resource](https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/sql_database_instance) .\n [  cloud_sql/postgres_instance_pvp/main.tf ](https://github.com/terraform-google-modules/terraform-docs-samples/blob/main/cloud_sql/postgres_instance_pvp/main.tf) [View on GitHub](https://github.com/terraform-google-modules/terraform-docs-samples/blob/main/cloud_sql/postgres_instance_pvp/main.tf) \n```\nresource \"google_sql_database_instance\" \"postgres_pvp_instance_name\" {\n name    = \"postgres-pvp-instance-name\"\n region   = \"asia-northeast1\"\n database_version = \"POSTGRES_14\"\n root_password = \"abcABC123!\"\n settings {\n tier = \"db-custom-2-7680\"\n password_validation_policy {\n  min_length     = 6\n  reuse_interval    = 2\n  complexity     = \"COMPLEXITY_DEFAULT\"\n  disallow_username_substring = true\n  password_change_interval = \"30s\"\n  enable_password_policy  = true\n }\n }\n # set `deletion_protection` to true, will ensure that one cannot accidentally delete this instance by\n # use of Terraform whereas `deletion_protection_enabled` flag protects this instance at the GCP level.\n deletion_protection = false\n}\n```To apply your Terraform configuration in a Google Cloud project, complete the steps in the following sections.## Prepare Cloud Shell\n- Launch [Cloud Shell](https://shell.cloud.google.com/) .\n- Set the default Google Cloud project  where you want to apply your Terraform configurations.You only need to run this command once per project, and you can run it in any directory.```\nexport GOOGLE_CLOUD_PROJECT=PROJECT_ID\n```Environment variables are overridden if you set explicit values in the Terraform  configuration file.\n## Prepare the directoryEach Terraform configuration file must have its own directory (also called a ).- In [Cloud Shell](https://shell.cloud.google.com/) , create a directory and a new  file within that directory. The filename must have the`.tf`extension\u2014for example`main.tf`. In this  tutorial, the file is referred to as`main.tf`.```\nmkdir DIRECTORY && cd DIRECTORY && touch main.tf\n```\n- If you are following a tutorial, you can copy the sample code in each section or step.Copy the sample code into the newly created `main.tf` .Optionally, copy the code from GitHub. This is recommended  when the Terraform snippet is part of an end-to-end solution.\n- Review and modify the sample parameters to apply to your environment.\n- Save your changes.\n- Initialize Terraform. You only need to do this once per directory.```\nterraform init\n```Optionally, to use the latest Google provider version, include the `-upgrade` option:```\nterraform init -upgrade\n```\n## Apply the changes\n- Review the configuration and verify that the resources that Terraform is going to create or  update match your expectations:```\nterraform plan\n```Make corrections to the configuration as necessary.\n- Apply the Terraform configuration by running the following command and entering`yes`at the prompt:```\nterraform apply\n```Wait until Terraform displays the \"Apply complete!\" message.\n- [Open your Google Cloud project](https://console.cloud.google.com/) to view  the results. In the Google Cloud console, navigate to your resources in the UI to make sure  that Terraform has created or updated them.\n **Note:** Terraform samples typically assume that the required APIs are enabled in your Google Cloud project.To delete your changes, do the following:- To disable deletion protection, in your Terraform configuration file set the`deletion_protection`argument to`false`.```\ndeletion_protection = \"false\"\n```\n- Apply the updated Terraform configuration by running the following command and    entering`yes`at the prompt:```\nterraform apply\n```\n- Remove resources previously applied with your Terraform configuration by running the following command and entering `yes` at the prompt:```\nterraform destroy\n```\nBefore using any of the request data, make the following replacements:- : the ID or [project number](/resource-manager/docs/creating-managing-projects#identifying_projects) of the Google Cloud project that contains the instance.\n- : the name of the Cloud SQL instance. If this instance has [Private Service Connect](/sql/docs/postgres/about-private-service-connect) enabled for it, then [Private Service Connect endpoints](/sql/docs/postgres/about-private-service-connect#psc-endpoint) in VPC networks can connect to it.\nHTTP method and URL:\n```\nGET https://sqladmin.googleapis.com/v1/projects/PROJECT_ID/instances/INSTANCE_NAME\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"kind\": \"sql#instance\",\n \"state\": \"RUNNABLE\",\n \"databaseVersion\": \"POSTGRES_13\",\n \"settings\": {\n \"authorizedGaeApplications\": [],\n \"tier\": \"db-custom-2-7680\",\n \"kind\": \"sql#settings\",\n \"availabilityType\": \"REGIONAL\",\n \"pricingPlan\": \"PER_USE\",\n \"replicationType\": \"SYNCHRONOUS\",\n \"activationPolicy\": \"ALWAYS\",\n \"ipConfiguration\": {\n  \"authorizedNetworks\": [],\n  \"pscConfig\": {\n  \"allowedConsumerProjects\": [   \"ALLOWED_PROJECTS\"\n  ],\n  \"pscEnabled\": true\n  },\n  \"ipv4Enabled\": false\n },\n ...\n \"createTime\": \"2023-06-14T18:48:34.975Z\",\n \"sqlNetworkArchitecture\": \"NEW_NETWORK_ARCHITECTURE\",\n \"pscServiceAttachmentLink\": \"projects/PROJECT_ID/regions/REGION_NAME/serviceAttachments/SERVICE_ATTACHMENT_ID\",\n \"dnsName\": \"DNS_NAME\"\n}\n```\nThe following fields exist for instances that have Private Service Connect enabled for them:- `allowedConsumerProjects`: a list of the [allowed projects](/sql/docs/postgres/about-private-service-connect#allowed-psc-projects) for the instance. You can create Private Service Connect endpoints from any VPC networks in these projects to the [service attachment](/sql/docs/postgres/about-private-service-connect#service-attachment) of the instance.\n- `pscEnabled`: whether an instance has Private Service Connect enabled for it.\n- `pscServiceAttachmentLink`: the URI that points to the service attachment of the instance. Use this URI to create the Private Service Connect endpoint.\n- `dnsName`: the [DNS name](/sql/docs/postgres/about-private-service-connect#dns-name-record) for the instance. We recommend that you create a [DNS record](/dns/docs/dns-overview#records) with this name and point it to the IP address of the Private Service Connect endpoint. We also recommend that you use this name to connect to the instance.\nTo see how to construct the [underlying REST API request](/sql/docs/postgres/admin-api/rest/v1/instances/get) for this task, see the [instances:get](/sql/docs/postgres/admin-api/rest/v1/instances/get) page.Before using any of the request data, make the following replacements:- : the ID or [project number](/resource-manager/docs/creating-managing-projects#identifying_projects) of the Google Cloud project that contains the instance.\n- : the name of the Cloud SQL instance. If this instance has [Private Service Connect](/sql/docs/postgres/about-private-service-connect) enabled for it, then [Private Service Connect endpoints](/sql/docs/postgres/about-private-service-connect#psc-endpoint) in VPC networks can connect to it.\nHTTP method and URL:\n```\nGET https://sqladmin.googleapis.com/sql/v1beta4/projects/PROJECT_ID/instances/INSTANCE_NAME\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"kind\": \"sql#instance\",\n \"state\": \"RUNNABLE\",\n \"databaseVersion\": \"POSTGRES_13\",\n \"settings\": {\n \"authorizedGaeApplications\": [],\n \"tier\": \"db-custom-2-7680\",\n \"kind\": \"sql#settings\",\n \"availabilityType\": \"REGIONAL\",\n \"pricingPlan\": \"PER_USE\",\n \"replicationType\": \"SYNCHRONOUS\",\n \"activationPolicy\": \"ALWAYS\",\n \"ipConfiguration\": {\n  \"authorizedNetworks\": [],\n  \"pscConfig\": {\n  \"allowedConsumerProjects\": [   \"ALLOWED_PROJECTS\"\n  ],\n  \"pscEnabled\": true\n  },\n  \"ipv4Enabled\": false\n },\n ...\n \"createTime\": \"2023-06-14T18:48:34.975Z\",\n \"sqlNetworkArchitecture\": \"NEW_NETWORK_ARCHITECTURE\",\n \"pscServiceAttachmentLink\": \"projects/PROJECT_ID/regions/REGION_NAME/serviceAttachments/SERVICE_ATTACHMENT_ID\",\n \"dnsName\": \"DNS_NAME\"\n}\n```\nThe following fields exist for instances that have Private Service Connect enabled for them:- `allowedConsumerProjects`: a list of the [allowed projects](/sql/docs/postgres/about-private-service-connect#allowed-psc-projects) for the instance. You can create Private Service Connect endpoints from any VPC networks in these projects to the [service attachment](/sql/docs/postgres/about-private-service-connect#service-attachment) of the instance.\n- `pscEnabled`: whether an instance has Private Service Connect enabled for it.\n- `pscServiceAttachmentLink`: the URI that points to the service attachment of the instance. Use this URI to create the Private Service Connect endpoint.\n- `dnsName`: the [DNS name](/sql/docs/postgres/about-private-service-connect#dns-name-record) for the instance. We recommend that you create a [DNS record](/dns/docs/dns-overview#records) with this name and point it to the IP address of the Private Service Connect endpoint. We also recommend that you use this name to connect to the instance.\nTo see how to construct the [underlying REST API request](/sql/docs/postgres/admin-api/rest/v1beta4/instances/get) for this task, see the [instances:get](/sql/docs/postgres/admin-api/rest/v1beta4/instances/get) page.\nYou might see some banners at the top suggesting actions that you might want to take.\n## Metrics\nThis section provides usage charts of key instance metrics that you can use to monitor your instances. When working with metric data, keep the following facts in mind:\n- A data point for a metric is an aggregate over all databases hosted by the instance.\n- Data is reported in local time.\n- Rendered charts do not refresh automatically; to see new data, you must refresh the page.\n- There is a delay of a few minutes between when metric data is recorded and the time it is displayed in the usage charts.\nFor more information about the metrics shown in the chart, see [Monitoring Cloud SQL instances](/sql/docs/postgres/monitor-instance#available-metrics) .\nFor a complete list of Cloud SQL metrics provided by Cloud Monitoring, see the [Cloud SQL metrics list](/monitoring/api/metrics_gcp#gcp-cloudsql) .\nFor more information about using Cloud Monitoring with Google Cloud, see the [Cloud Monitoring documentation](/monitoring/docs) .\n## Connect to this instance\nIn the **Connect to this instance** section, you can find your instance's IP addresses, VPC network, and connection name.\nTo open a terminal and connect to your instance, click **Connect using Cloud Shell** .\nTo open a related tutorial in the right pane, click **Connect from a Compute Engine VM instance** .\nTo go to [Connection options](/sql/docs/postgres/external-connection-methods) , click **See all connection methods** .\nFor more information about connecting to an instance, see [Connecting overview](/sql/docs/postgres/connect-overview) .\n## Service account\nThis section shows the instance's service account email address.\nFor more information, see the IAM [service accounts](/iam/docs/service-accounts) documentation.\n## Configuration\nThis section shows current configuration settings of the instance.\nTo change configuration settings, click **Edit configuration** .\nFor more information about editing the instance configuration, see [editing an instance](/sql/docs/postgres/edit-instance) .\n## Operations and logs\nThis section lists recent instance operations, such as creating backups.\nTo see recent operations, click **View all operations** .\nTo see logging information, click **View PostgreSQL Error Logs** .\nFor more information about the Operations and the Logs Explorer pages, see [Cloud SQL logging](/sql/docs/postgres/logging) .\nFor generic information about logging, see [Viewing logs](/logging/docs/view/logs_viewer) and [Exporting logs](/logging/docs/export/configure_export) .\n## Maintenance\nThis section shows the current maintenance update settings and schedule.\nTo change preferences, click **Edit maintenance preferences** .\nTo change notification settings, click **Edit notification preferences** .\nFor more information about maintenance in Cloud SQL, see [Maintenance overview](/sql/docs/postgres/maintenance) .\n## What's next\n- Learn more about [Cloud Monitoring metrics for Cloud SQL](/monitoring/api/metrics_gcp#gcp-cloudsql) .\n- Learn more about [instance settings](/sql/docs/postgres/instance-settings) .\n- Learn more about [editing an instance](/sql/docs/postgres/edit-instance) .", "guide": "Cloud SQL"}