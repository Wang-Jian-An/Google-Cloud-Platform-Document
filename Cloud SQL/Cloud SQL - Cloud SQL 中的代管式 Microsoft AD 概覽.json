{"title": "Cloud SQL - Cloud SQL \u4e2d\u7684\u4ee3\u7ba1\u5f0f Microsoft AD \u6982\u89bd", "url": "https://cloud.google.com/sql/docs/sqlserver/ad?hl=zh-cn", "abstract": "# Cloud SQL - Cloud SQL \u4e2d\u7684\u4ee3\u7ba1\u5f0f Microsoft AD \u6982\u89bd\n\u60a8\u53ef\u4ee5\u5c07 Cloud SQL for SQL Server \u8207 Managed Service for Microsoft Active Directory\uff08\u4e5f\u7a31\u7232\u4ee3\u7ba1\u5f0f Microsoft AD\uff09\u96c6\u6210\u3002\n\u672c\u9801\u9762\u5305\u542b\u5728\u60a8\u958b\u59cb\u96c6\u6210\u4e4b\u524d\u9700\u8981\u67e5\u770b\u7684\u4fe1\u606f\u3002\u67e5\u770b\u4ee5\u4e0b\u4fe1\u606f\uff08\u5305\u62ec [\u9650\u5236](#limitations-and-alternatives) \uff09\u5f8c\uff0c\u8acb\u53c3\u95b1 [\u5c07 Cloud SQL \u8207\u4ee3\u7ba1\u5f0f Microsoft AD \u914d\u5408\u4f7f\u7528](https://cloud.google.com/sql/docs/sqlserver/configure-ad?hl=zh-cn) \u3002\n", "content": "## \u8207\u4ee3\u7ba1\u5f0f Microsoft AD \u96c6\u6210\u7684\u512a\u52e2\n\u60a8\u53ef\u4ee5\u901a\u904e [\u4ee3\u7ba1\u5f0f Microsoft AD](https://cloud.google.com/managed-microsoft-ad/docs/overview?hl=zh-cn) \u9032\u884c\u8eab\u4efd\u9a57\u8b49\u3001\u6388\u6b0a\u7b49\u3002\u4f8b\u5982\uff0c\u5c07\u5be6\u4f8b\u52a0\u5165\u4ee3\u7ba1\u5f0f Microsoft AD \u7db2\u57df\u5f8c\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u57fa\u65bc AD \u7684\u8eab\u4efd\u7684 Windows \u8eab\u4efd\u9a57\u8b49\u9032\u884c\u767b\u9304\u3002\n\u5c07 Cloud SQL for SQL Server \u8207 AD \u7db2\u57df\u96c6\u6210\u5177\u6709 Cloud \u8207\u672c\u5730 AD \u7db2\u57df\u96c6\u6210\u7684\u984d\u5916\u512a\u52e2\u3002\n## \u96c6\u6210\u7684\u524d\u63d0\u689d\u4ef6\n**\u6ce8\u610f** \uff1a\u76ee\u524d\u50c5\u652f\u6301 2021 \u5e74 3 \u6708 12 \u65e5\u4e4b\u5f8c\u5275\u5efa\u7684\u5be6\u4f8b\u3002\u5982\u679c\u60a8\u5617\u8a66\u5c07\u5be6\u4f8b\u52a0\u5165\u7db2\u57df\u4f46\u5931\u6557\uff0c\u8acb\u6aa2\u67e5\u5be6\u4f8b\u5275\u5efa\u65e5\u671f\u3002\n\u60a8\u53ef\u4ee5\u8207\u4ee3\u7ba1\u5f0f Microsoft AD \u96c6\u6210\uff0c\u5f9e\u800c\u7232\u5be6\u4f8b [\u6dfb\u52a0\u5c0d Windows \u8eab\u4efd\u9a57\u8b49\u7684\u652f\u6301](https://cloud.google.com/sql/docs/sqlserver/configure-ad?hl=zh-cn) \u3002\u4f46\u662f\uff0c\u5728\u96c6\u6210\u4e4b\u524d\uff0c\u60a8\u7684 Google Cloud \u9805\u76ee\u9700\u8981\u5177\u6709\u4ee5\u4e0b\u5404\u9805\uff1a\n- \u4ee3\u7ba1\u5f0f Microsoft AD \u7db2\u57df\u3002\u5982\u9700\u77ad\u89e3\u5982\u4f55\u8a2d\u7f6e\u7db2\u57df\uff0c\u8acb\u53c3\u95b1 [\u5275\u5efa\u7db2\u57df](https://cloud.google.com/managed-microsoft-ad/docs/create-domain?hl=zh-cn) \u3002- \u672c\u5730 AD \u7db2\u57df\u9700\u8981\u4ee3\u7ba1\u5f0f AD \u4fe1\u4efb\u3002\u8acb\u53c3\u95b1 [\u5275\u5efa\u55ae\u5411\u4fe1\u4efb](https://cloud.google.com/managed-microsoft-ad/docs/create-trust?hl=zh-cn) \u548c [\u4f7f\u7528\u672c\u5730 AD \u7528\u6236\u5275\u5efa Windows \u767b\u9304 Cloud SQL](https://cloud.google.com/sql/docs/sqlserver/configure-ad?hl=zh-cn#on-premises-ad-users) \u3002\n- \u5982\u4e0b\u6240\u8ff0\u7684\u6bcf\u500b\u7522\u54c1\u3001\u6bcf\u500b\u9805\u76ee\u7684\u670d\u52d9\u8cec\u865f\uff1b\u8acb\u53c3\u95b1 [\u5275\u5efa\u670d\u52d9\u8cec\u865f](#creating-a-service-account) \u3002## \u5275\u5efa\u548c\u914d\u7f6e\u670d\u52d9\u8cec\u865f\n**\u6ce8\u610f** \uff1a\u5982\u9700\u5275\u5efa\u5177\u6709\u6240\u9700\u6b0a\u9650\u7684\u670d\u52d9\u8cec\u865f\uff0c\u60a8\u5fc5\u9808\u64c1\u6709`resourcemanager.projects.setIamPolicy`\u6b0a\u9650\u3002Project Owner\u3001Project IAM Admin \u548c Organization Administrator \u89d2\u8272\u5747\u64c1\u6709\u9019\u9805\u6b0a\u9650\u3002\u60a8\u9084\u5fc5\u9808\u5553\u7528 Cloud SQL Admin API\u3002\n\u60a8\u9700\u8981\u7232\u8a08\u5283\u8207\u4ee3\u7ba1\u5f0f Microsoft AD \u96c6\u6210\u7684\u9805\u76ee\u63d0\u4f9b\u6bcf\u500b\u7522\u54c1\u3001\u6bcf\u500b\u9805\u76ee\u7684\u670d\u52d9\u8cec\u865f\u3002\u4f7f\u7528 `gcloud` \u6216\u63a7\u5236\u6aaf\u5728\u9805\u76ee\u7d1a\u5c64\u5275\u5efa\u8cec\u865f\u3002\u6bcf\u500b\u7522\u54c1\u3001\u6bcf\u500b\u9805\u76ee\u7684\u670d\u52d9\u8cec\u865f\u90fd\u61c9\u88ab\u6388\u4e88\u9805\u76ee\u7684 `managedidentities.sqlintegrator` \u89d2\u8272\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [gcloud projects set-iam-policy](https://cloud.google.com/sdk/gcloud/reference/projects/set-iam-policy?hl=zh-cn) \u3002\n\u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f Google Cloud \u63a7\u5236\u6aaf\uff0c\u5247 Cloud SQL \u6703\u81ea\u52d5\u7232\u60a8\u5275\u5efa\u670d\u52d9\u8cec\u865f\uff0c\u4e26\u63d0\u793a\u60a8\u6388\u4e88 `managedidentities.sqlintegrator` \u89d2\u8272\u3002\n\u5982\u9700\u4f7f\u7528 `gcloud` \u5275\u5efa\u670d\u52d9\u8cec\u865f\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a\n```\ngcloud beta services identity create --service=sqladmin.googleapis.com \\\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0--project=[PROJECT]\n```\n\u8a72\u547d\u4ee4\u6703\u8fd4\u56de\u4ee5\u4e0b\u683c\u5f0f\u7684\u670d\u52d9\u8cec\u865f\u540d\u7a31\uff1a `service-[PROJECT_NUMBER]@gcp-sa-cloud-sql.iam.gserviceaccount.com`\n\u4e0b\u9762\u662f\u4e00\u500b\u670d\u52d9\u8cec\u865f\u540d\u7a31\u7684\u793a\u4f8b\uff1a `service-333445@gcp-sa-cloud-sql.iam.gserviceaccount.com`\n\u7232\u96c6\u6210\u6388\u4e88\u5fc5\u8981\u7684\u6b0a\u9650\u9700\u8981\u73fe\u6709\u6b0a\u9650\u3002\u5982\u9700\u77ad\u89e3\u6240\u9700\u6b0a\u9650\uff0c\u8acb\u53c3\u95b1 [\u6240\u9700\u6b0a\u9650](https://cloud.google.com/iam/docs/granting-changing-revoking-access?hl=zh-cn#required-permissions) \u3002\n\u5982\u9700\u7232\u96c6\u6210\u6388\u4e88\u5fc5\u8981\u7684\u6b0a\u9650\uff0c\u8acb\u904b\u884c\u4ee5\u4e0b\u547d\u4ee4\u3002\u5982\u679c\u60a8\u7684 Managed Microsoft AD \u4f4d\u65bc\u5176\u4ed6\u9805\u76ee\u4e2d\uff0c\u5247 [AD_PROJECT_ID] \u61c9\u8a72\u662f\u5305\u542b Managed Microsoft AD \u5be6\u4f8b\u7684\u9805\u76ee\uff0c\u800c\u670d\u52d9\u8cec\u865f\u7684 [SQL_PROJECT_NUMBER] \u61c9\u8a72\u662f\u5305\u542b SQL Server \u5be6\u4f8b\u7684\u9805\u76ee\uff1a\n```\ngcloud projects add-iam-policy-binding [AD_PROJECT_ID] \\--member=serviceAccount:service-[SQL_PROJECT_NUMBER]@gcp-sa-cloud-sql.iam.gserviceaccount.com \\--role=roles/managedidentities.sqlintegrator\n```\n\u53e6\u8acb\u53c3\u95b1 [gcloud beta services identity create](https://cloud.google.com/sdk/gcloud/reference/beta/services/identity/create?hl=zh-cn) \u3002\n## \u8207\u4ee3\u7ba1\u5f0f Microsoft AD \u96c6\u6210\u7684\u6700\u4f73\u505a\u6cd5\n\u898f\u5283\u96c6\u6210\u6642\uff0c\u8acb\u67e5\u770b\u4ee5\u4e0b\u5167\u5bb9\uff1a\n- [\u96c6\u6210\u7684\u524d\u63d0\u689d\u4ef6](#prerequisites-for-integration) \n- [\u8207\u5176\u4ed6\u9805\u76ee\u4e2d\u7684\u4ee3\u7ba1\u5f0f AD \u7db2\u57df\u96c6\u6210](https://cloud.google.com/sql/docs/sqlserver/configure-ad?hl=zh-cn#integrating-different-project) \n- [\u5728 Google Cloud \u4e0a\u904b\u884c Active Directory \u7684\u6700\u4f73\u505a\u6cd5](https://cloud.google.com/compute/docs/instances/windows/best-practices?hl=zh-cn) \n- [\u4ee3\u7ba1\u5f0f Microsoft AD \u6587\u6a94](https://cloud.google.com/managed-microsoft-ad/docs/overview?hl=zh-cn) \n- [\u5728\u5176\u4ed6\u5340\u57df\u4e2d\u90e8\u7f72\u7db2\u57df\u63a7\u5236\u5668](https://cloud.google.com/managed-microsoft-ad/docs/add-remove-regions?hl=zh-cn) \n- \u5728 Google Cloud \u63a7\u5236\u6aaf\u4e2d [\u4f7f\u7528 AD \u8a3a\u65b7\u5de5\u5177](https://cloud.google.com/sql/docs/sqlserver/ad-diagnosis-tool?hl=zh-cn) \u6392\u67e5\u672c\u5730\u7db2\u57df\u548c Cloud SQL for SQL Server \u5be6\u4f8b\u4e2d\u7684 AD \u8a2d\u7f6e\u554f\u984c\u3002\nSQL Server \u5be6\u4f8b\u548c\u4ee3\u7ba1\u5f0f AD \u5be6\u4f8b\u4f4d\u65bc\u540c\u4e00\u5340\u57df\u53ef\u63d0\u4f9b\u6700\u4f4e\u7684\u7db2\u7d61\u5ef6\u9072\u548c\u6700\u4f73\u6027\u80fd\u3002\u56e0\u6b64\uff0c\u8acb\u5118\u91cf\u5728\u540c\u4e00\u5340\u57df\u4e2d\u8a2d\u7f6e SQL Server \u5be6\u4f8b\u548c AD \u5be6\u4f8b\u3002\u6b64\u5916\uff0c\u7121\u8ad6\u60a8\u662f\u5426\u5728\u540c\u4e00\u5340\u57df\u4e2d\u8a2d\u7f6e\u9019\u4e9b\u5be6\u4f8b\uff0c\u90fd\u53ef\u901a\u904e\u8a2d\u7f6e\u4e3b\u8981\u5340\u57df\u548c\u5099\u4efd\u5340\u57df\u4f86\u5be6\u73fe\u66f4\u9ad8\u7684\u53ef\u7528\u6027\u3002\n### \u8207\u4ee3\u7ba1\u5f0f Microsoft AD \u96c6\u6210\u7684\u62d3\u64b2\nCloud SQL for SQL Server \u4e0d\u652f\u6301\u7db2\u57df\u672c\u5730\u7fa3\u7d44\u3002\u4f46\u662f\u60a8\u53ef\u4ee5\uff1a\n- \u76f4\u63a5\u5728 SQL Server \u4e2d\u6dfb\u52a0\u5168\u5c40\u7fa3\u7d44\u6216\u500b\u4eba\u7528\u6236\u767b\u9304\u4fe1\u606f\n- \u7576\u6240\u6709\u7fa3\u7d44\u548c\u7528\u6236\u90fd\u5c6c\u65bc\u540c\u4e00\u6797\u6642\u4f7f\u7528\u901a\u7528\u7fa3\u7d44\n\u5982\u679c\u652f\u6301\u7db2\u57df\u672c\u5730\u7fa3\u7d44\uff0c\u5247\u53ef\u4ee5\u5c07\u500b\u4eba\u7528\u6236\u8cec\u865f\u548c\u5168\u5c40\u901a\u7528\u7fa3\u7d44\u6dfb\u52a0\u7232\u7db2\u57df\u672c\u5730\u7fa3\u7d44\u7684\u5b50\u7d1a\uff08\u53ef\u4fdd\u8b77\u5c0d SQL Server \u7684\u8a2a\u554f\uff09\uff1b\u9019\u6a23\uff0c\u60a8\u4fbf\u53ef\u4ee5\u5c07\u7db2\u57df\u672c\u5730\u7fa3\u7d44\u6dfb\u52a0\u7232 SQL Server \u7684\u767b\u9304\u4fe1\u606f\u3002\u5728 Cloud SQL for SQL Server \u4e2d\uff0c\u60a8\u53ef\u4ee5\u5553\u7528\u985e\u4f3c\u529f\u80fd\uff0c\u5982\u672c\u90e8\u5206\u6240\u8ff0\u3002\n\u5982\u679c\u60a8\u5728\u591a\u500b\u6797\u4e2d\u6709\u591a\u500b\u7db2\u57df\uff0c\u4e26\u4e14\u6709\u591a\u500b\u5168\u5c40\u7fa3\u7d44\uff0c\u5247\u53ef\u4ee5\u76f4\u63a5\u5c07\u6240\u6709\u500b\u4eba\u7528\u6236\u8cec\u865f\u548c\u5168\u5c40\u901a\u7528\u7fa3\u7d44\u6dfb\u52a0\u7232 SQL Server \u7684\u767b\u9304\u4fe1\u606f\u3002\u5982\u9700\u67e5\u770b\u65b9\u6cd5 1 \u7684\u793a\u4f8b\uff0c\u8acb\u53c3\u95b1\u4e0b\u5716\uff1a\n\u5982\u679c\u60a8\u7684\u7db2\u57df\u4f4d\u65bc\u540c\u4e00\u6797\u4e2d\uff0c\u5247\u60a8\u53ef\u4ee5\u5728\u5176\u4e2d\u4e00\u500b\u7db2\u57df\u4e2d\u5b9a\u7fa9\u901a\u7528\u7fa3\u7d44\u3002\u7136\u5f8c\uff0c\u60a8\u53ef\u4ee5\u5c07\u6240\u6709\u500b\u4eba\u7528\u6236\u8cec\u865f\u548c\u5168\u5c40\u901a\u7528\u7fa3\u7d44\u6dfb\u52a0\u7232\u8a72\u5b9a\u7fa9\u7684\u901a\u7528\u7fa3\u7d44\u7684\u5b50\u7d1a\uff0c\u4e26\u5c07\u8a72\u5b9a\u7fa9\u7684\u901a\u7528\u7fa3\u7d44\u6dfb\u52a0\u7232 SQL Server \u7684\u767b\u9304\u4fe1\u606f\u3002\u5982\u9700\u67e5\u770b\u65b9\u6cd5 2 \u7684\u793a\u4f8b\uff0c\u8acb\u53c3\u95b1\u4e0b\u5716\uff1a\n## \u9650\u5236\u548c\u66ff\u4ee3\u65b9\u6848\n**\u6ce8\u610f** \uff1a\u5982\u9700\u77ad\u89e3\u8207\u672c\u90e8\u5206\u76f8\u95dc\u7684\u4fe1\u606f\uff0c\u8acb\u53c3\u95b1 [\u96c6\u6210\u4e0d\u53d7\u652f\u6301](#unsupported-for-integration) \u3002\n\u8207\u4ee3\u7ba1\u5f0f Microsoft AD \u96c6\u6210\u6642\uff0c\u5b58\u5728\u4ee5\u4e0b\u9650\u5236\uff1a\n- [\u4e0d\u652f\u6301\u7db2\u57df\u672c\u5730\u7fa3\u7d44](#unsupported-for-integration) \uff0c\u4f46\u60a8\u53ef\u4ee5\u76f4\u63a5\u5728 SQL Server \u4e2d\u6dfb\u52a0\u5168\u5c40\u7fa3\u7d44\u6216\u500b\u4eba\u7528\u6236\u767b\u9304\u4fe1\u606f\u3002\u6216\u8005\uff0c\u7576\u6240\u6709\u7fa3\u7d44\u548c\u7528\u6236\u90fd\u5c6c\u65bc\u540c\u4e00\u6797\u6642\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u901a\u7528\u7fa3\u7d44\u3002\n- \u901a\u5e38\uff0c\u7cfb\u7d71\u6703\u7232\u901a\u904e Google Cloud \u63a7\u5236\u6aaf\u5275\u5efa\u7684\u65b0\u7528\u6236\u5206\u914d`CustomerDbRootRole`\u89d2\u8272\uff0c\u8a72\u89d2\u8272\u5305\u542b\u4ee5\u4e0b [SQL Server Agent \u56fa\u5b9a\u6578\u64da\u5eab\u89d2\u8272](https://docs.microsoft.com/en-us/sql/ssms/agent/sql-server-agent-fixed-database-roles?view=sql-server-ver15) \uff1a`SQLAgentUserRole`\u3002\u4f46\u662f\uff0c\u901a\u904e SQL Server \u76f4\u63a5\u5275\u5efa\u7684\u7528\u6236\uff08\u4f8b\u5982\u4ee3\u7ba1\u5f0f Microsoft AD \u7528\u6236\uff09\u7121\u6cd5\u7372\u5f97\u6b64\u89d2\u8272\uff0c\u4e5f\u4e0d\u80fd\u4f7f\u7528 SQL Server Agent\uff0c\u56e0\u7232\u5fc5\u9808\u6388\u4e88\u6b64\u89d2\u8272\u7684 MSDB \u6578\u64da\u5eab\u5df2\u53d7\u5230\u4fdd\u8b77\u3002\n- \u67d0\u4e9b\u53d7\u9650\u64cd\u4f5c\u53ef\u80fd\u6703\u5c0e\u81f4\u4ee5\u4e0b\u932f\u8aa4\uff1a\u201c\u7121\u6cd5\u7372\u53d6\u6709\u95dc Windows NT \u7fa3\u7d44/\u7528\u6236\u7684\u4fe1\u606f\u201d\u3002\u9019\u7a2e\u53d7\u9650\u64cd\u4f5c\u7684\u4e00\u500b\u4f8b\u5b50\u662f\u7531\u4f86\u81ea\u901a\u904e\u4fe1\u4efb\u95dc\u4fc2\u9023\u63a5\u7684\u7db2\u57df\u4e2d\u7684\u7528\u6236\u5275\u5efa\u767b\u9304\u4fe1\u606f\u3002\u53e6\u4e00\u500b\u4f8b\u5b50\u662f\u5411\u901a\u904e\u4fe1\u4efb\u95dc\u4fc2\u9023\u63a5\u7684\u7db2\u57df\u4e2d\u7684\u7528\u6236\u6388\u4e88\u6b0a\u9650\u3002\u5728\u9019\u4e9b\u60c5\u6cc1\u4e0b\uff0c\u91cd\u8a66\u64cd\u4f5c\u901a\u5e38\u6703\u6210\u529f\u3002\u5982\u679c\u91cd\u8a66\u5931\u6557\uff0c\u8acb\u95dc\u9589\u9023\u63a5\u4e26\u6253\u958b\u65b0\u9023\u63a5\u3002\n- Windows \u4e0a\u7684 SQL Server \u4e0d\u652f\u6301\u5b8c\u5168\u9650\u5b9a\u57df\u540d (FQDN)\u3002\u56e0\u6b64\uff0c\u5728\u5275\u5efa SQL Server \u767b\u9304\u4fe1\u606f\u6642\uff0c\u8acb\u4f7f\u7528\u57df\u540d\u7c21\u7a31\uff0c\u800c\u4e0d\u662f FQDN\u3002\u4f8b\u5982\uff0c\u5982\u679c\u60a8\u7684\u57df\u540d\u662f`ad.mydomain.com`\uff0c\u5247\u8acb\u7232`ad\\user`\uff08\u800c\u4e0d\u662f`ad.mydomain.com\\user`\uff09\u5275\u5efa SQL Server \u767b\u9304\u4fe1\u606f\u3002\n- \u5982\u9700\u8a2a\u554f SQL Server \u5be6\u4f8b\uff0c\u8acb\u59cb\u7d42\u4f7f\u7528 FQDN\u3002\u4f8b\u5982\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u985e\u4f3c\u65bc`private.myinstance.us-central1.myproject.cloudsql.mydomain.com`\u7684 FQDN\u3002Netbios \u540d\u7a31\u4e0d\u53d7\u652f\u6301\uff0cDNS \u5f8c\u7db4\u88ab\u7701\u7565\u6642\u4e5f\u4e0d\u652f\u6301\u4efb\u4f55\u7c21\u7a31\u3002\n- \u60a8\u7121\u6cd5\u901a\u904e Google Cloud \u63a7\u5236\u6aaf\u7ba1\u7406\u57fa\u65bc Active Directory \u7528\u6236\u548c\u7fa3\u7d44\u7684 SQL Server \u767b\u9304\u4fe1\u606f\u3002\n- \u5728 Cloud SQL \u4e2d\uff0c\u5982\u679c SQL Server \u5be6\u4f8b\u662f\u5728 2021 \u5e74 3 \u6708 12 \u65e5\u7576\u5929\u6216\u4e4b\u524d\u5275\u5efa\u7684\uff0c\u5247\u8a72\u5be6\u4f8b\u7121\u6cd5\u8207\u4ee3\u7ba1\u5f0f Microsoft AD \u96c6\u6210\u3002\n- Windows \u8eab\u4efd\u9a57\u8b49\u4e0d\u652f\u6301\u5916\u90e8\u4fe1\u4efb\u3002\u932f\u8aa4\u53ef\u80fd\u5982\u4e0b\uff1a\u201c\u76ee\u6a19\u4e3b\u9ad4\u540d\u7a31\u4e0d\u6b63\u78ba\u3002 \u7121\u6cd5\u751f\u6210 SSI \u4e0a\u4e0b\u6587\u201d\u3002\u6b64\u5916\uff0c\u6839\u64da [Microsoft \u5efa\u8b70](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2003/dd560679(v=ws.10)) \uff0c\u4f7f\u7528\u6797\u4fe1\u4efb\uff08\u800c\u4e0d\u662f\u5916\u90e8\u4fe1\u4efb\uff09\u9032\u884c Kerberos \u8eab\u4efd\u9a57\u8b49\u3002\n**\u6ce8\u610f** \uff1a\u4e0d\u652f\u6301\u5c11\u65bc 8 \u500b\u5b57\u7b26\u7684\u4ee3\u7ba1\u7db2\u57df\uff08\u4f8b\u5982 xyz.com \u7684\u4e03\u5b57\u7b26\u7db2\u57df\uff09\u3002\u5982\u9700\u89e3\u6c7a\u6b64\u554f\u984c\uff0c\u8acb\u5275\u5efa\u4e00\u500b\u8f03\u9577\u7684\u4ee3\u7ba1\u5f0f\u7db2\u57df\u3002\n## \u96c6\u6210\u4e0d\u53d7\u652f\u6301\n**\u6ce8\u610f** \uff1a\u5982\u9700\u77ad\u89e3\u67d0\u4e9b\u4e0d\u53d7\u652f\u6301\u7684\u64cd\u4f5c\u7684\u66ff\u4ee3\u65b9\u6848\uff0c\u8acb\u53c3\u95b1 [\u9650\u5236\u548c\u66ff\u4ee3\u65b9\u6848](#limitations-and-alternatives) \u3002\n\u8207\u4ee3\u7ba1\u5f0f Microsoft AD \u96c6\u6210\u6642\uff0c\u4ee5\u4e0b\u529f\u80fd\u76ee\u524d\u4e0d\u53d7\u652f\u6301\uff1a\n- \u7db2\u57df\u672c\u5730\u7fa3\u7d44\u3002\n- \u901a\u904e\u4fe1\u4efb\u95dc\u4fc2\u9023\u63a5\u7684\u7db2\u57df\u4e2d\u7684\u7528\u6236\u522a\u9664 SQL Server \u767b\u9304\u3002\u60a8\u53ef\u4ee5\u901a\u904e\u4ee3\u7ba1\u5f0f\u7db2\u57df\u4e2d\u7684\u7528\u6236\u6216\u901a\u904e`sqlserver`\u767b\u9304\u4f86\u57f7\u884c\u6b64\u64cd\u4f5c\u3002\n- NTLM \u8eab\u4efd\u9a57\u8b49\u3002\n- \u4f7f\u7528\u901a\u904e\u4fe1\u4efb\u95dc\u4fc2\u9023\u63a5\u7684\u7db2\u57df\u4e2d\u7684 IP \u5730\u5740\u767b\u9304\u3002\n- \u5177\u6709\u9577\u540d\u7a31\uff08\u8d85\u904e 63 \u500b\u5b57\u7b26\uff09\u7684\u5be6\u4f8b\u3002## \u5f8c\u7e8c\u6b65\u9a5f\n- \u67e5\u770b [\u5275\u5efa\u4ee3\u7ba1\u5f0f Microsoft AD \u7db2\u57df\u7684\u5feb\u901f\u5165\u9580](https://cloud.google.com/managed-microsoft-ad/docs/create-domain?hl=zh-cn) \u3002\n- \u6e96\u5099 [\u5275\u5efa\u96c6\u6210\u7684 Cloud SQL \u5be6\u4f8b](https://cloud.google.com/sql/docs/sqlserver/configure-ad?hl=zh-cn#creating-an-instance-with-windows-authentication) \u3002\n- \u77ad\u89e3\u5982\u4f55\u5728\u672c\u5730\u7db2\u57df\u548c\u4ee3\u7ba1\u5f0f Microsoft AD \u7db2\u57df\u4e4b\u9593 [\u5275\u5efa\u4fe1\u4efb\u95dc\u4fc2](https://cloud.google.com/managed-microsoft-ad/docs/create-trust?hl=zh-cn) \u3002\n- \u77ad\u89e3\u5982\u4f55 [\u67e5\u770b\u96c6\u6210\u5be6\u4f8b](https://cloud.google.com/managed-microsoft-ad/docs/viewing-sql-server-integrations?hl=zh-cn) \u3002", "guide": "Cloud SQL"}