{"title": "Cloud SQL - Connect to Cloud SQL for SQL Server using the Cloud SQL Auth Proxy", "url": "https://cloud.google.com/sql/docs/sqlserver/connect-instance-auth-proxy", "abstract": "# Cloud SQL - Connect to Cloud SQL for SQL Server using the Cloud SQL Auth Proxy\n# Connect to Cloud SQL for SQL Server using the Cloud SQL Auth Proxy\nThis page shows you how to connect to Cloud SQL from a local test environment using the Cloud SQL Auth Proxy. The [Cloud SQL Auth Proxy](/sql/docs/sqlserver/sql-proxy) provides secure access to your Cloud SQL instance without the need for authorized networks or for configuring SSL. By using the Cloud SQL Auth Proxy, you can connect to your Cloud SQL instance securely.\nThe instructions on this page are for a test environment only and shouldn't be used for production environments. For more information on the configuration required for production environments, see [Use the Cloud SQL Auth Proxy in a production environment](/sql/docs/mysql/sql-proxy#production-environment) and [Connect using the Cloud SQL Auth Proxy](/sql/docs/mysql/connect-auth-proxy) .", "content": "## Before you begin **Note:** The name you use for your project must be between 4 and 30 characters. When you type the name, the form suggests a project ID, which you can edit. The project ID must be between 6 and 30 characters, with a lowercase letter as the first character. You can use a dash, lowercase letter, or digit for the remaining characters, but the last character cannot be a dash.- Enable the necessary Google Cloud APIs.\nIn the Google Cloud console, go to the **APIs** page.\n [Go to APIs](https://console.cloud.google.com/apis) \nEnable the Cloud SQL Admin API.\nClick the following button to open Cloud Shell, which provides   command-line access to your Google Cloud resources directly from the browser.   Cloud Shell can be used to run the `gcloud` commands presented throughout this quickstart.\n [Open Cloud Shell](/console/sql/instances?cloudshell=true) \nRun the [gcloud services enable](/sdk/gcloud/reference/services/enable) command   as follows using Cloud Shell to enable the APIs required for this quickstart.:\n```\ngcloud services enable sqladmin.googleapis.com\n```\nThis command enables the following APIs:- Cloud SQL Admin API\n## Create a Cloud SQL instanceIn this quickstart, you use the Google Cloud console. To use the [gcloud CLI](/sdk/gcloud) , cURL, or PowerShell, see [Create instances](/sql/docs/sqlserver/create-instance) .- In the Google Cloud console, go to the **Cloud SQL Instances** page. [Go to Cloud SQL Instances](https://console.cloud.google.com/sql) \n- Click **Create Instance** .\n- Click **Choose SQL Server** .\n- Enter`myinstance`for **Instance ID** .\n- Enter a password for the`sqlserver`user.\n- Click **Create** .You're returned to the instances list. You can click the new instance right away to see the details, but it won't be available for other operations until it initializes and starts. **Note:** In this example, the instance is created using default settings, including a public IP address.\nFor Debian/Ubuntu, install the applicable SQL Server command-line tools using [these instructions](https://docs.microsoft.com/en-us/sql/linux/sql-server-linux-setup-tools?view=sql-server-2017#ubuntu) .For CentOS/RHEL, install the applicable SQL Server command-line tools using [these instructions](https://docs.microsoft.com/en-us/sql/linux/sql-server-linux-setup-tools?view=sql-server-2017#install-tools-on-rhel-7) .For openSUSE, install the applicable SQL Server command-line tools using [these instructions](https://docs.microsoft.com/en-us/sql/linux/quickstart-install-connect-suse?view=sql-server-2017#tools) .See the [ landing page](https://docs.microsoft.com/en-us/sql/database-engine/install-windows/install-sql-server-database-engine?view=sql-server-2017) for installing SQL Server, as well as the [ SQL Server downloads page](https://www.microsoft.com/en-us/sql-server/sql-server-downloads) .\n## Install the Cloud SQL Auth Proxy clientFor installation, see [Installing the Cloud SQL Auth Proxy](/sql/docs/sqlserver/connect-auth-proxy#install) .## Get the instance connection name\n- In the Google Cloud console, go to the **Cloud SQL Instances** page. [Go to Cloud SQL Instances](https://console.cloud.google.com/sql) \n- Click the instance name to open its **Overview** page.\n- In the **Connect to this instance** section, copy the **Connection name** . The  connection name is in the format`projectID:region:instanceID`.\n## Start the Cloud SQL Auth ProxyStart the Cloud SQL Auth Proxy in its own terminal so you can monitor its output. Replace `INSTANCE_CONNECTION_NAME` with the instance connection name you copied in the previous step.\nFor Linux environments, use this command to launch the Cloud SQL Auth Proxy:\n```\n./cloud-sql-proxy INSTANCE_CONNECTION_NAME\n```\nIn PowerShell on Windows, use this command to launch the Cloud SQL Auth Proxy:\n```\n.\\cloud-sql-proxy.exe INSTANCE_CONNECTION_NAME\n```\nA message similar to the following appears:\n```\nListening on 127.0.0.1:1433 for INSTANCE_CONNECTION_NAME\nReady for new connections\n```\nRun the following command, replacing `USER_NAME` with your SQL Server username.\n```\nsqlcmd -S 127.0.0.1 -U USER_NAME\n```\nReturn to the terminal window where you started the Cloud SQL Auth Proxy. You should see a message similar to the following:\n`New connection for` ``## Clean upTo avoid incurring charges to your Google Cloud account for   the resources used on this page, follow these steps.- In the Google Cloud console, go to the **Cloud SQL Instances** page. [Go to Cloud SQL Instances](https://console.cloud.google.com/sql) \n- Select the`myinstance`instance to open the **Instance details** page.\n- In the icon bar at the top of the page, click **Delete** .\n- In the **Delete instance** window, type your instance's name and then click **Delete** .\n### Optional cleanup stepsIf you're not using the APIs that were enabled as part of this quickstart, you can disable them.- APIs that were enabled within this quickstart:- Cloud SQL Admin API- In the Google Cloud console, go to the **APIs** page. [Go to APIs](https://console.cloud.google.com/apis) \n- Select the Cloud SQL Admin API and then click the **Disable API** button.\n## What's next\n- See how to [troubleshoot information for the Cloud SQL Auth Proxy](/sql/docs/sqlserver/connect-auth-proxy#troubleshooting) .\n- Learn more [about the Cloud SQL Auth Proxy](/sql/docs/sqlserver/sql-proxy) .", "guide": "Cloud SQL"}