{"title": "Cloud SQL - Starting, stopping, and restarting instances", "url": "https://cloud.google.com/sql/docs/sqlserver/start-stop-restart-instance", "abstract": "# Cloud SQL - Starting, stopping, and restarting instances\nThis page describes how to start an instance, stop an instance, and restart an instance that is running.\n", "content": "## Activation policy\nWhen you start, stop, or restart an instance, you need to set an activation policy to use. The activation policy indicates if the instance is activated to accept connection requests.\nActivation policy options are:\n- `ALWAYS`- The instance is always up and running.\n- `NEVER`- The instance is not restarted.\n`ALWAYS`\n`NEVER`\n**Note:** `NEVER` is not supported for read replica instances.\n## Start an instance\nTo start a stopped instance:\n- In the Google Cloud console, go to the **Cloud SQL Instances** page. [Go to Cloud SQL Instances](https://console.cloud.google.com/sql) \n- To open the **Overview** page of an instance, click the instance name.\n- Click **Start** .\n- In the **Start database instance?** dialog box, click **Start** .The activation policy of the instance is set to **Always** and the instance is started.\nUse **ALWAYS** for the activation policy:\n```\ngcloud sql instances patch INSTANCE_NAME \\--activation-policy=ALWAYS\n```Before using any of the request data, make the following replacements:- : The project ID\n- : The instance ID\n- : The activation policy is **ALWAYS** or **NEVER** \nHTTP method and URL:\n```\nPATCH https://sqladmin.googleapis.com/v1/projects/project-id/instances/instance-id\n```\nRequest JSON body:\n```\n{\n \"settings\": {\n \"activationPolicy\": \"activation-policy\"\n }\n}\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"kind\": \"sql#operation\",\n \"targetLink\": \"https://sqladmin.googleapis.com/v1/projects/project-id/instances/instance-id\",\n \"status\": \"PENDING\",\n \"user\": \"user@example.com\",\n \"insertTime\": \"2020-01-20T21:30:35.667Z\",\n \"operationType\": \"UPDATE\",\n \"name\": \"operation-id\",\n \"targetId\": \"instance-id\",\n \"selfLink\": \"https://sqladmin.googleapis.com/v1/projects/project-id/operations/operation-id\",\n \"targetProject\": \"project-id\"\n}\n```\nBefore using any of the request data, make the following replacements:- : The project ID\n- : The instance ID\n- : The activation policy is **ALWAYS** or **NEVER** \nHTTP method and URL:\n```\nPATCH https://sqladmin.googleapis.com/sql/v1beta4/projects/project-id/instances/instance-id\n```\nRequest JSON body:\n```\n{\n \"settings\": {\n \"activationPolicy\": \"activation-policy\"\n }\n}\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"kind\": \"sql#operation\",\n \"targetLink\": \"https://sqladmin.googleapis.com/sql/v1beta4/projects/project-id/instances/instance-id\",\n \"status\": \"PENDING\",\n \"user\": \"user@example.com\",\n \"insertTime\": \"2020-01-20T21:30:35.667Z\",\n \"operationType\": \"UPDATE\",\n \"name\": \"operation-id\",\n \"targetId\": \"instance-id\",\n \"selfLink\": \"https://sqladmin.googleapis.com/sql/v1beta4/projects/project-id/operations/operation-id\",\n \"targetProject\": \"project-id\"\n}\n```\n[underlying REST API request](/sql/docs/sqlserver/admin-api/rest/v1beta4/instances/patch)\n[APIs Explorer on the instances:patch page](/sql/docs/sqlserver/admin-api/rest/v1beta4/instances/patch)\n## Stop an instance\nYou can manually stop an instance when needed. When you stop an instance, it remains stopped, and does not respond to application connections, until you start it again.\nStopping an instance suspends instance charges. The instance data is unaffected, and charges for storage and IP addresses continue to apply.\n**Note:** When an instance is nearly out of storage capacity, it's stopped to prevent the loss of information. A red circle with an exclamation mark indicates this status. When you open the instance, a red banner suggests that you [increase the storage capacity](/sql/docs/sqlserver/instance-settings#storage-capacity-2ndgen) and [enable automatic storage increases](/sql/docs/sqlserver/instance-settings#automatic-storage-increase-2ndgen) . Click the **Edit instance** button on the banner to increase storage capacity.As an alternative, you can restart the service to reduce storage requirements by deleting any data that you don't require (and also perform any other operations on the instance). After 24 hours, if the instance is still nearly out of storage capacity, it's again stopped with the same message.\n**Note:** You cannot `stop` a read replica instance.\nTo stop an instance:\n- In the Google Cloud console, go to the **Cloud SQL Instances** page. [Go to Cloud SQL Instances](https://console.cloud.google.com/sql) \n- To open the **Overview** page of an instance, click the instance name.\n- Click **Stop** .\n- In the **Stop database instance?** dialog box, click **Stop** .The activation policy of the instance is set to `Off` (Never) and the instance is stopped.\n```\ngcloud sql instances patch INSTANCE_NAME \\--activation-policy=NEVER\n```Before using any of the request data, make the following replacements:- : The project ID\n- : The instance ID\n- : The activation policy is **NEVER** \nHTTP method and URL:\n```\nPATCH https://sqladmin.googleapis.com/v1/projects/project-id/instances/instance-id\n```\nRequest JSON body:\n```\n{\n \"settings\": {\n \"activationPolicy\": \"activation-policy\"\n }\n}\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"kind\": \"sql#operation\",\n \"targetLink\": \"https://sqladmin.googleapis.com/v1/projects/project-id/instances/instance-id\",\n \"status\": \"PENDING\",\n \"user\": \"user@example.com\",\n \"insertTime\": \"2020-01-20T21:30:35.667Z\",\n \"operationType\": \"UPDATE\",\n \"name\": \"operation-id\",\n \"targetId\": \"instance-id\",\n \"selfLink\": \"https://sqladmin.googleapis.com/v1/projects/project-id/operations/operation-id\",\n \"targetProject\": \"project-id\"\n}\n```\nBefore using any of the request data, make the following replacements:- : The project ID\n- : The instance ID\n- : The activation policy is **NEVER** \nHTTP method and URL:\n```\nPATCH https://sqladmin.googleapis.com/sql/v1beta4/projects/project-id/instances/instance-id\n```\nRequest JSON body:\n```\n{\n \"settings\": {\n \"activationPolicy\": \"activation-policy\"\n }\n}\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"kind\": \"sql#operation\",\n \"targetLink\": \"https://sqladmin.googleapis.com/sql/v1beta4/projects/project-id/instances/instance-id\",\n \"status\": \"PENDING\",\n \"user\": \"user@example.com\",\n \"insertTime\": \"2020-01-20T21:30:35.667Z\",\n \"operationType\": \"UPDATE\",\n \"name\": \"operation-id\",\n \"targetId\": \"instance-id\",\n \"selfLink\": \"https://sqladmin.googleapis.com/sql/v1beta4/projects/project-id/operations/operation-id\",\n \"targetProject\": \"project-id\"\n}\n```\n[underlying REST API request](/sql/docs/sqlserver/admin-api/rest/v1beta4/instances/patch)\n[APIs Explorer on the instances:patch page](/sql/docs/sqlserver/admin-api/rest/v1beta4/instances/patch)\n## Restart an instance\nRestarting an instance drains the connections from the instance and stops it. Next, the instance restarts and is ready to accept new connections.\nRestarting an instance doesn't change the public or private IP addresses of the instance.\n**Note:** Restarting a running instance can resolve some problems with the instance. However, restarting an instance causes a disruption in service, and empties the instance cache, which results in a temporary reduction in performance. If you have restarted your instance recently, check the instance logs to ensure it has fully recovered before restarting it again.After you restart the instance, the process and buffer caches are stopped and then refreshed.\nTo restart an instance:\n- In the Google Cloud console, go to the **Cloud SQL Instances** page. [Go to Cloud SQL Instances](https://console.cloud.google.com/sql) \n- To open the **Overview** page of an instance, click the instance name.\n- Click **Restart** .\n- In the **Restart database instance?** dialog box, click **Restart** .\nRestart the instance:\n```\ngcloud sql instances restart INSTANCE_NAME\n```Before using any of the request data, make the following replacements:- : The project ID\n- : The instance ID\n- : The activation policy is **ALWAYS** or **NEVER** \nHTTP method and URL:\n```\nPOST https://sqladmin.googleapis.com/v1/projects/project-id/instances/instance-id/restart\n```\nRequest JSON body:\n```\n{\n \"settings\": {\n \"activationPolicy\": \"activation-policy\"\n }\n}\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"kind\": \"sql#operation\",\n \"targetLink\": \"https://sqladmin.googleapis.com/v1/projects/project-id/instances/instance-id\",\n \"status\": \"PENDING\",\n \"user\": \"user@example.com\",\n \"insertTime\": \"2020-01-20T21:30:35.667Z\",\n \"operationType\": \"RESTART\",\n \"name\": \"operation-id\",\n \"targetId\": \"instance-id\",\n \"selfLink\": \"https://sqladmin.googleapis.com/v1/projects/project-id/operations/operation-id\",\n \"targetProject\": \"project-id\"\n}\n```\nBefore using any of the request data, make the following replacements:- : The project ID\n- : The instance ID\n- : The activation policy is **ALWAYS** or **NEVER** \nHTTP method and URL:\n```\nPOST https://sqladmin.googleapis.com/sql/v1beta4/projects/project-id/instances/instance-id/restart\n```\nRequest JSON body:\n```\n{\n \"settings\": {\n \"activationPolicy\": \"activation-policy\"\n }\n}\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"kind\": \"sql#operation\",\n \"targetLink\": \"https://sqladmin.googleapis.com/sql/v1beta4/projects/project-id/instances/instance-id\",\n \"status\": \"PENDING\",\n \"user\": \"user@example.com\",\n \"insertTime\": \"2020-01-20T21:30:35.667Z\",\n \"operationType\": \"RESTART\",\n \"name\": \"operation-id\",\n \"targetId\": \"instance-id\",\n \"selfLink\": \"https://sqladmin.googleapis.com/sql/v1beta4/projects/project-id/operations/operation-id\",\n \"targetProject\": \"project-id\"\n}\n```\n[underlying REST API request](/sql/docs/sqlserver/admin-api/rest/v1beta4/instances/restart)\n[APIs Explorer on the instances:restart page](/sql/docs/sqlserver/admin-api/rest/v1beta4/instances/restart)", "guide": "Cloud SQL"}