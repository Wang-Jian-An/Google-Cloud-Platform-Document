{"title": "Cloud SQL - Edit instances", "url": "https://cloud.google.com/sql/docs/postgres/edit-instance", "abstract": "# Cloud SQL - Edit instances\nThis page describes how to edit an existing Cloud SQL instance.\nAfter you create an instance, you can edit it while it's running to change its settings. For information about instance settings and how changing settings can impact an instance, see [Instance Settings](/sql/docs/postgres/instance-settings) .\n**Note:** This procedure restarts the instance. See [How long are instances shut down during restart?](https://cloud.google.com/sql/docs/postgres/faq.md#shutdown)\n", "content": "## Edit an instance\nMost edits can be applied to an instance only when it's running.\n- In the Google Cloud console, go to the **Cloud SQL Instances** page. [Go to Cloud SQL Instances](https://console.cloud.google.com/sql) \n- To open the **Overview** page of an instance, click the instance name.\n- Click **Edit** .\n- In the **Customize your instance** section, if the **Show configuration\n options** menu appears, then click it.\n- Update any editable settings for your instance.Learn more about [instance settings](/sql/docs/postgres/instance-settings) .\n- Click **Save** .\nThis command modifies the backup start time.\n```\ngcloud sql instances patch INSTANCE_NAME \\--backup-start-time 16:00\n```\nThis command allows other Google Cloud services, such as BigQuery, to access data in Cloud SQL and make queries against this data over an internal connection.\n```\ngcloud sql instances patch INSTANCE_NAME \\--enable-google-private-path\n```\nIf a patch modifies a value that requires a restart, then you see a prompt to proceed with the change or cancel.\nTo learn more about instance configuration flags, see [gcloud sql instances patch](/sdk/gcloud/reference/sql/instances/patch) .\nThe following command modifies the backup start time and allows other Google Cloud services, such as BigQuery, to access data in Cloud SQL and make queries against this data over an internal connection.\nBefore using any of the request data, make the following replacements:- : The project ID.\n- : The instance ID.\n- : The network that you're adding or selecting to create a  private connection.\nHTTP method and URL:\n```\nPATCH https://sqladmin.googleapis.com/v1/projects/project-id/instances/instance-id\n```\nRequest JSON body:\n```\n{\n \"settings\": {\n \"backupConfiguration\": {\n  \"startTime\": \"16:00\",\n  \"enabled\": true,\n  \"binaryLogEnabled\": true\n }\n }\n \"ipConfiguration\": {\n  \"privateNetwork\": \"private-network\",\n  \"authorizedNetworks\": [],\n  \"ipv4Enabled\": false,\n \n  \"enablePrivatePathForGoogleCloudServices\": true\n \n }\n}\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"kind\": \"sql#operation\",\n \"targetLink\": \"https://sqladmin.googleapis.com/v1/projects/project-id/instances/instance-id\",\n \"status\": \"PENDING\",\n \"user\": \"user@example.com\",\n \"insertTime\": \"2020-01-16T02:32:12.281Z\",\n \"operationType\": \"UPDATE\",\n \"name\": \"operation-id\",\n \"targetId\": \"instance-id\",\n \"selfLink\": \"https://sqladmin.googleapis.com/v1/projects/project-id/operations/operation-id\",\n \"targetProject\": \"project-id\"\n}\n```\nIf a patch modifies a value that requires a restart, you will see a prompt to proceed with the change or cancel.\nTo see how the\n [underlying REST API request](/sql/docs/postgres/admin-api/rest/v1beta4/instances/patch) \nis constructed for this task, see the\n [APIs Explorer on the instances:patch page](/sql/docs/postgres/admin-api/rest/v1beta4/instances/patch) \n.\nThe following command modifies the backup start time and allows other Google Cloud services, such as BigQuery, to access data in Cloud SQL and make queries against this data over an internal connection.\nBefore using any of the request data, make the following replacements:- : The project ID.\n- : The instance ID.\n- : The network that you're adding or selecting to create a  private connection.\nHTTP method and URL:\n```\nPATCH https://sqladmin.googleapis.com/sql/v1beta4/projects/project-id/instances/instance-id\n```\nRequest JSON body:\n```\n{\n \"settings\": {\n \"backupConfiguration\": {\n  \"startTime\": \"16:00\",\n  \"enabled\": true,\n  \"binaryLogEnabled\": true\n }\n }\n \"ipConfiguration\": {\n  \"privateNetwork\": \"private-network\",\n  \"authorizedNetworks\": [],\n  \"ipv4Enabled\": false,\n \n  \"enablePrivatePathForGoogleCloudServices\": true\n \n }\n}\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"kind\": \"sql#operation\",\n \"targetLink\": \"https://sqladmin.googleapis.com/sql/v1beta4/projects/project-id/instances/instance-id\",\n \"status\": \"PENDING\",\n \"user\": \"user@example.com\",\n \"insertTime\": \"2020-01-16T02:32:12.281Z\",\n \"operationType\": \"UPDATE\",\n \"name\": \"operation-id\",\n \"targetId\": \"instance-id\",\n \"selfLink\": \"https://sqladmin.googleapis.com/sql/v1beta4/projects/project-id/operations/operation-id\",\n \"targetProject\": \"project-id\"\n}\n```\nIf the patch modifies a value that requires a restart, you will see a prompt to proceed with the change or cancel.\nTo see how the\n [underlying REST API request](/sql/docs/postgres/admin-api/rest/v1beta4/instances/patch) \nis constructed for this task, see the\n [APIs Explorer on the instances:patch page](/sql/docs/postgres/admin-api/rest/v1beta4/instances/patch) \n.\n## Edit an instance with Private Service Connect enabled\nYou can update an instance with [Private Service Connect](/sql/docs/postgres/about-private-service-connect) enabled by using [](/sdk/gcloud)  [gcloud CLI](/sdk/gcloud) or the API. For example, you can update projects associated with instances for the following purposes:\n- To allow connections from [Private Service Connect endpoints](/sql/docs/postgres/about-private-service-connect#psc-endpoint) to the Cloud SQL instances.\n- To remove projects from the list of [allowed projects](/sql/docs/postgres/about-private-service-connect#allowed-psc-projects) . For any project that's removed, connections to any existing Private Service Connect endpoints continue to work, but new endpoints aren't accepted.**Note: ** There are some limitations to modifying instances with Private Service Connect enabled. For more information, see [Limitations](/sql/docs/postgres/configure-private-service-connect#limitations) .\nTo update projects that can use Private Service Connect, use the [gcloud sql instances patch](/sdk/gcloud/reference/sql/instances/patch) command:\n```\ngcloud sql instances patch INSTANCE_NAME \\--project=PROJECT_ID \\--allowed-psc-projects=ALLOWED_PROJECTS\n```\nMake the following replacements:- : the name of the Cloud SQL instance to which Private Service Connect endpoints in VPC networks can connect.\n- : the ID or [project number](/resource-manager/docs/creating-managing-projects#identifying_projects) of the Google Cloud project that contains the instance to which Private Service Connect endpoints in VPC networks can connect.\n- : a list of allowed project IDs or numbers, separated by commas. These projects override projects that are already configured to use Private Service Connect. If a project isn't contained in this list, then you can't use it to create an instance and enable Private Service Connect for it.\nThe following example lets two projects ( `98765` and `87654` ) make connections from Private Service Connect endpoints to the `myinstance` Cloud SQL instance that's contained in the `12345` project:\n```\ngcloud sql instances patch myinstance \\--project=12345 \\--allowed-psc-projects='98765','87654'\n```\nTo remove all allowed projects, use the [gcloud sql instances patch](/sdk/gcloud/reference/sql/instances/patch) command and the `--clear-allowed-psc-projects` flag:\n```\ngcloud sql instances patch INSTANCE_NAME \\--project=PROJECT_ID \\--clear-allowed-psc-projects\n```\nThis flag ensures that no projects are allowed inadvertently.Before using any of the request data, make the following replacements:- : the ID or [project number](/resource-manager/docs/creating-managing-projects#identifying_projects) of the Google Cloud project that contains the instance to which Private Service Connect endpoints in VPC networks can connect.\n- : the name of the Cloud SQL instance to which Private Service Connect endpoints in VPC networks can connect.\n- : a list of allowed project IDs or numbers, separated by commas. These projects override projects that are already configured to use Private Service Connect. If a project isn't contained in this list, then you can't use it to create an instance and enable Private Service Connect for it.\nHTTP method and URL:\n```\nPATCH https://sqladmin.googleapis.com/v1/projects/PROJECT_ID/instances/INSTANCE_NAME\n```\nRequest JSON body:\n```\n{\n \"kind\": \"sql#instance\",\n \"name\": \"INSTANCE_NAME\",\n \"project\": \"PROJECT_ID\",\n \"settings\": {\n \"ipConfiguration\": {\n  \"pscConfig\": {\n  \"allowedConsumerProjects\": [ALLOWED_PROJECTS]\n  }\n },\n \"kind\": \"sql#settings\"\n }\n}\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"kind\": \"sql#operation\",\n \"targetLink\": \"https://sqladmin.googleapis.com/v1/projects/PROJECT_ID/instances/INSTANCE_NAME\",\n \"status\": \"PENDING\",\n \"user\": \"user@example.com\",\n \"insertTime\": \"2020-01-16T02:32:12.281Z\",\n \"operationType\": \"UPDATE\",\n \"name\": \"OPERATION_ID\",\n \"targetId\": \"INSTANCE_NAME\",\n \"selfLink\": \"https://sqladmin.googleapis.com/v1/projects/PROJECT_ID/operations/OPERATION_ID\",\n \"targetProject\": \"PROJECT_ID\"\n}\n```\nTo remove all allowed projects, use the `clear-allowed-psc-projects` flag. This flag ensures that no projects are allowed inadvertently.\nTo see how the\n [underlying REST API request](/sql/docs/postgres/admin-api/rest/v1beta4/instances/patch) \nis constructed for this task, see the\n [APIs Explorer on the instances:patch page](/sql/docs/postgres/admin-api/rest/v1beta4/instances/patch) \n.\nBefore using any of the request data, make the following replacements:- : the ID or [project number](/resource-manager/docs/creating-managing-projects#identifying_projects) of the Google Cloud project that contains the instance to which Private Service Connect endpoints in VPC networks can connect.\n- : the name of the Cloud SQL instance to which Private Service Connect endpoints in VPC networks can connect.\n- : a list of allowed project IDs or numbers, separated by commas. These projects override projects that are already configured to use Private Service Connect. If a project isn't contained in this list, then you can't use it to create an instance and enable Private Service Connect for it.\nHTTP method and URL:\n```\nPATCH https://sqladmin.googleapis.com/sql/v1beta4/projects/PROJECT_ID/instances/INSTANCE_NAME\n```\nRequest JSON body:\n```\n{\n \"kind\": \"sql#instance\",\n \"name\": \"INSTANCE_NAME\",\n \"project\": \"PROJECT_ID\",\n \"settings\": {\n \"ipConfiguration\": {\n  \"pscConfig\": {\n  \"allowedConsumerProjects\": [ALLOWED_PROJECTS]\n  }\n },\n \"kind\": \"sql#settings\"\n }\n}\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"kind\": \"sql#operation\",\n \"targetLink\": \"https://sqladmin.googleapis.com/sql/v1beta4/projects/PROJECT_ID/instances/INSTANCE_NAME\",\n \"status\": \"PENDING\",\n \"user\": \"user@example.com\",\n \"insertTime\": \"2020-01-16T02:32:12.281Z\",\n \"operationType\": \"UPDATE\",\n \"name\": \"OPERATION_ID\",\n \"targetId\": \"INSTANCE_NAME\",\n \"selfLink\": \"https://sqladmin.googleapis.com/sql/v1beta4/projects/PROJECT_ID/operations/OPERATION_ID\",\n \"targetProject\": \"PROJECT_ID\"\n}\n```\nTo remove all allowed projects, use the `clear-allowed-psc-projects` flag. This flag ensures that no projects are allowed inadvertently.\nTo see how the\n [underlying REST API request](/sql/docs/postgres/admin-api/rest/v1beta4/instances/patch) \nis constructed for this task, see the\n [APIs Explorer on the instances:patch page](/sql/docs/postgres/admin-api/rest/v1beta4/instances/patch) \n.", "guide": "Cloud SQL"}