{"title": "Cloud SQL - Upgrade an instance by using in-place upgrade", "url": "https://cloud.google.com/sql/docs/postgres/upgrade-cloud-sql-instance-to-enterprise-plus-in-place", "abstract": "# Cloud SQL - Upgrade an instance by using in-place upgrade\n**Note:** This page contains features related to Cloud SQL editions. For more information about Cloud SQL editions, see [Introduction to Cloud SQL editions](/sql/docs/mysql/editions-intro) .\nThis page shows you how to use the in-place upgrade method to upgrade a Cloud SQL Enterprise edition instance to Cloud SQL Enterprise Plus edition. Additionally, it also describes the procedure to downgrade a Cloud SQL Enterprise Plus edition instance to Cloud SQL Enterprise edition.\nUpgrading to Cloud SQL Enterprise Plus edition provides you with several benefits and performance enhancements. For more information, see [Introduction to Cloud SQL for PostgreSQL editions](/sql/docs/postgres/editions-intro) .\nTo enable these enhancements for your existing Cloud SQL Enterprise edition instances, you must upgrade them to Cloud SQL Enterprise Plus edition. The upgrade process takes a few minutes to complete with an expected downtime of less than 60 seconds. Additionally, this process doesn't require your applications to change the endpoints they connect to.\n", "content": "## Requirements\n- Ensure that you're running a Cloud SQL Enterprise edition instance on PostgreSQL 12 or later.If your instance is on an earlier version of PostgreSQL, then you must upgrade your instance to PostgreSQL 12 or later. For more information, see [Upgrade the database major version in-place](/sql/docs/postgres/upgrade-major-db-version-inplace) .\n- Ensure that your instance uses a solid state drive (SSD).## Upgrade an instance to Cloud SQL Enterprise Plus edition\n- In the Google Cloud console, go to the **Cloud SQL Instances** page. [Go to Cloud SQL Instances](https://console.cloud.google.com/sql) \n- To open the **Overview** page of an instance, click the instance name.\n- Click **Edit** .\n- In the **Choose a Cloud SQL edition** section, click **Upgrade** .\n- In the **Upgrade to Enterprise Plus** panel, enter your instance ID and then click **Upgrade edition** .\nAlternatively, you can also upgrade an instance by clicking **Upgrade** in **Configuration** section of the instance **Overview** page.The following code sample shows how to upgrade your instance to Cloud SQL Enterprise Plus edition:\n```\ngcloud sql instances patch INSTANCE_ID \\\u00a0 --edition=enterprise-plus \\\u00a0 --tier=MACHINE_TYPE \\\u00a0 --project=PROJECT_ID\n```\nOptional: you can also enable [data cache](/sql/docs/postgres/data-cache) for your instance by adding the `--enable-data-cache` flag.\nReplace the following:\n- : the project ID of the instance that you want to upgrade.\n- : name of the instance that you want to upgrade.\n- : the machine type of the instance that you want to upgrade to. For more information about machine types for Cloud SQL Enterprise Plus edition, see [Machine types for Cloud SQL Enterprise Plus edition instances](/sql/docs/postgres/create-instance#enterprise-plus) .\nThe following command upgrades your instance to Cloud SQL Enterprise edition and triggers a restart operation.\nBefore using any of the request data, make the following replacements:- : the project ID of the instance that you want to upgrade.\n- : the instance ID of the instance that you want to upgrade.\n- : the machine type of the instance that you want to upgrade to.  For more information about machine types for Cloud SQL Enterprise Plus edition, see [Machine types for Cloud SQL Enterprise Plus edition instances](/sql/docs/postgres/create-instance#enterprise-plus) .\nOptional: you can enable [data cache](/sql/docs/postgres/data-cache) by setting the `dataCacheEnabled` parameter as `true` .\nHTTP method and URL:\n```\nPATCH https://sqladmin.googleapis.com/v1/projects/PROJECT_ID/instances/INSTANCE_ID\n```\nRequest JSON body:\n```\n{\n \"settings\": {\n  \"tier\": \"MACHINE_TYPE\",\n  \"edition\": \"ENTERPRISE_PLUS\",\n  \"dataCacheConfig\": {\n  \"dataCacheEnabled\": true\n  },\n }\n}\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"kind\": \"sql#operation\",\n \"targetLink\": \"https://sqladmin.googleapis.com/v1/projects/PROJECT_ID/instances/INSTANCE_ID\",\n \"status\": \"PENDING\",\n \"user\": \"user@example.com\",\n \"insertTime\": \"2020-01-16T02:32:12.281Z\",\n \"operationType\": \"UPDATE\",\n \"name\": \"OPERATION_ID\",\n \"targetId\": \"INSTANCE_ID\",\n \"selfLink\": \"https://sqladmin.googleapis.com/v1/projects/PROJECT_ID/operations/OPERATION_ID\",\n \"targetProject\": \"PROJECT_ID\"\n}\n```\nThe following command upgrades your instance to Cloud SQL Enterprise edition and triggers a restart operation.\nBefore using any of the request data, make the following replacements:- : the project ID of the instance that you want to upgrade.\n- : the instance ID of the instance that you want to upgrade.\n- : the machine type of the instance that you want to upgrade to.  For more information about machine types for Cloud SQL Enterprise Plus edition, see [Machine types for Cloud SQL Enterprise Plus edition instances](/sql/docs/postgres/create-instance#enterprise-plus) .\nOptional: you can enable [data cache](/sql/docs/postgres/data-cache) by setting the `dataCacheEnabled` parameter as `true` .\nHTTP method and URL:\n```\nPATCH https://sqladmin.googleapis.com/v1beta4/projects/PROJECT_ID/instances/INSTANCE_ID\n```\nRequest JSON body:\n```\n{\n \"settings\": {\n  \"tier\": \"MACHINE_TYPE\",\n  \"edition\": \"ENTERPRISE_PLUS\",\n  \"dataCacheConfig\": {\n  \"dataCacheEnabled\": true\n  },\n }\n}\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"kind\": \"sql#operation\",\n \"targetLink\": \"https://sqladmin.googleapis.com/v1beta4/projects/PROJECT_ID/instances/INSTANCE_ID\",\n \"status\": \"PENDING\",\n \"user\": \"user@example.com\",\n \"insertTime\": \"2020-01-16T02:32:12.281Z\",\n \"operationType\": \"UPDATE\",\n \"name\": \"OPERATION_ID\",\n \"targetId\": \"INSTANCE_ID\",\n \"selfLink\": \"https://sqladmin.googleapis.com/v1beta4/projects/PROJECT_ID/operations/OPERATION_ID\",\n \"targetProject\": \"PROJECT_ID\"\n}\n```\n## Switch to Cloud SQL Enterprise edition\n**Note** : Cloud SQL disables the data cache automatically when you switch an instance from Cloud SQL Enterprise Plus edition to Cloud SQL Enterprise edition.\n- In the Google Cloud console, go to the **Cloud SQL Instances** page. [Go to Cloud SQL Instances](https://console.cloud.google.com/sql) \n- To open the **Overview** page of an instance, click the instance name.\n- Click **Edit** .\n- In the **Choose a Cloud SQL edition** section, click **Switch to Enterprise** .\n- In the **Switch to Enterprise** panel, enter your instance ID and then click **Switch edition** .\nAlternatively, you can also switch to Cloud SQL Enterprise edition by clicking **Switch to Enterprise** in **Configuration** section of the instance **Overview** page.The following code sample shows how to switch your instance to Cloud SQL Enterprise edition:\n```\ngcloud sql instances patch INSTANCE_ID \\\u00a0 --edition=enterprise \\\u00a0 --tier=MACHINE_TYPE \\\u00a0 --project=PROJECT_ID\n```\nReplace the following:\n- : the project ID of the instance.\n- : name of the instance.\n- : the machine type of the instance that you want to switch to. For more information about machine types for Cloud SQL Enterprise edition, see [Machine types for Cloud SQL Enterprise edition instances](/sql/docs/postgres/create-instance#enterprise) .\nThe following command switches your instance to Cloud SQL Enterprise edition and triggers a restart operation.\nBefore using any of the request data, make the following replacements:- : the project ID of the instance.\n- : the instance ID of the instance.\n- : the machine type of the instance that you want to switch to.  For more information about machine types for Cloud SQL Enterprise edition, see [Machine types for Cloud SQL Enterprise edition instances](/sql/docs/postgres/create-instance#enterprise) .\nHTTP method and URL:\n```\nPATCH https://sqladmin.googleapis.com/v1/projects/PROJECT_ID/instances/INSTANCE_ID\n```\nRequest JSON body:\n```\n{\n \"settings\": {\n  \"tier\": \"MACHINE_TYPE\",\n  \"edition\": \"ENTERPRISE\"\n }\n}\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"kind\": \"sql#operation\",\n \"targetLink\": \"https://sqladmin.googleapis.com/v1/projects/PROJECT_ID/instances/INSTANCE_ID\",\n \"status\": \"PENDING\",\n \"user\": \"user@example.com\",\n \"insertTime\": \"2020-01-16T02:32:12.281Z\",\n \"operationType\": \"UPDATE\",\n \"name\": \"OPERATION_ID\",\n \"targetId\": \"INSTANCE_ID\",\n \"selfLink\": \"https://sqladmin.googleapis.com/v1/projects/PROJECT_ID/operations/OPERATION_ID\",\n \"targetProject\": \"PROJECT_ID\"\n}\n```\nThe following command switches your instance to Cloud SQL Enterprise edition and triggers a restart operation.\nBefore using any of the request data, make the following replacements:- : the project ID of the instance.\n- : the instance ID of the instance.\n- : the machine type of the instance that you want to switch to.  For more information about machine types for Cloud SQL Enterprise edition, see [Machine types for Cloud SQL Enterprise edition instances](/sql/docs/postgres/create-instance#enterprise) .\nHTTP method and URL:\n```\nPATCH https://sqladmin.googleapis.com/v1beta4/projects/PROJECT_ID/instances/INSTANCE_ID\n```\nRequest JSON body:\n```\n{\n \"settings\": {\n  \"tier\": \"MACHINE_TYPE\",\n  \"edition\": \"ENTERPRISE\"\n }\n}\n```\nTo send your request, expand one of these options:You should receive a JSON response similar to the following:\n```\n{\n \"kind\": \"sql#operation\",\n \"targetLink\": \"https://sqladmin.googleapis.com/v1beta4/projects/PROJECT_ID/instances/INSTANCE_ID\",\n \"status\": \"PENDING\",\n \"user\": \"user@example.com\",\n \"insertTime\": \"2020-01-16T02:32:12.281Z\",\n \"operationType\": \"UPDATE\",\n \"name\": \"OPERATION_ID\",\n \"targetId\": \"INSTANCE_ID\",\n \"selfLink\": \"https://sqladmin.googleapis.com/v1beta4/projects/PROJECT_ID/operations/OPERATION_ID\",\n \"targetProject\": \"PROJECT_ID\"\n}\n```\n## What's next\n- Learn more about [Cloud SQL Enterprise Plus edition](/sql/docs/editions-intro) .", "guide": "Cloud SQL"}