{"title": "Cloud SQL - \u6dfb\u52a0 Cloud SQL \u7d44\u7e54\u653f\u7b56", "url": "https://cloud.google.com/sql/docs/postgres/org-policy/configure-org-policy?hl=zh-cn", "abstract": "# Cloud SQL - \u6dfb\u52a0 Cloud SQL \u7d44\u7e54\u653f\u7b56\n\u672c\u9801\u9762\u4ecb\u7d39\u5982\u4f55\u5728 Cloud SQL \u5be6\u4f8b\u4e0a\u6dfb\u52a0\u7d44\u7e54\u653f\u7b56\uff0c\u4ee5\u4fbf\u5728\u9805\u76ee\u3001\u6587\u4ef6\u593e\u6216\u7d44\u7e54\u7d1a\u5c64\u5c0d Cloud SQL \u65bd\u52a0\u9650\u5236\u3002\u5982\u9700\u67e5\u770b\u6982\u89bd\uff0c\u8acb\u53c3\u95b1 [Cloud SQL \u7d44\u7e54\u653f\u7b56](https://cloud.google.com/sql/docs/postgres/org-policy/org-policy?hl=zh-cn) \u3002\n", "content": "## \u6e96\u5099\u5de5\u4f5c\n- Titles in dynamic includes are not used anywhere, and we should avoid paying to translate them\n- \u901a\u904e **IAM \u548c\u7ba1\u7406** \u9801\u9762\uff0c\u7232\u60a8\u7684\u7528\u6236\u6216\u670d\u52d9\u8cec\u865f\u6dfb\u52a0 **Organization Policy Administrator** \u89d2\u8272 ( [roles/orgpolicy.policyAdmin](https://cloud.google.com/iam/docs/understanding-roles?hl=zh-cn#organization-policy-roles) )\u3002 [\u8f49\u5230\u201cIAM \u8cec\u865f\u201d\u9801\u9762](https://console.cloud.google.com/iam-admin/iam?hl=zh-cn) \n- \u5728\u57f7\u884c\u6b64\u904e\u7a0b\u4e4b\u524d\uff0c\u8acb\u5148\u53c3\u95b1 [\u9650\u5236](https://cloud.google.com/sql/docs/postgres/org-policy/org-policy?hl=zh-cn#restrictions) \u3002\n## \u6dfb\u52a0\u9023\u63a5\u7d44\u7e54\u653f\u7b56\n\u5982\u9700\u7c21\u8981\u4e86\u89e3\u9023\u63a5\u7d44\u7e54\u653f\u7b56\uff0c\u8acb\u53c3\u95b1 [\u9023\u63a5\u7d44\u7e54\u653f\u7b56](https://cloud.google.com/sql/docs/postgres/org-policy/org-policy?hl=zh-cn#connection-organization-policy) \u3002\n\u8981\u6dfb\u52a0\u9023\u63a5\u7d44\u7e54\u653f\u7b56\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- \u8f49\u5230 **\u7d44\u7e54\u653f\u7b56** \u9801\u9762\u3002 [\u8f49\u5230\u201c\u7d44\u7e54\u653f\u7b56\u201d\u9801\u9762](https://console.cloud.google.com/iam-admin/orgpolicies?hl=zh-cn) \n- \u9ede\u64ca\u9802\u90e8\u6a19\u7c64\u9801\u4e2d\u7684\u9805\u76ee\u4e0b\u62c9\u83dc\u55ae\uff0c\u7136\u5f8c\u9078\u64c7\u9700\u8981\u7d44\u7e54\u653f\u7b56\u7684\u9805\u76ee\u3001\u6587\u4ef6\u593e\u6216\u7d44\u7e54\u3002 **\u7d44\u7e54\u653f\u7b56** \u9801\u9762\u6703\u986f\u793a\u53ef\u7528\u7684\u7d44\u7e54\u653f\u7b56\u9650\u5236\u689d\u4ef6\u5217\u8868\u3002\n- \u91dd\u5c0d `name` \u6216 `display_name` \u9650\u5236\u689d\u4ef6\u9032\u884c\u904e\u6ffe\u3002- \u5982\u9700\u7981\u6b62\u5c0d\u4e92\u806f\u7db2\u7684\u8a2a\u554f\u6216\u4f86\u81ea\u4e92\u806f\u7db2\u7684\u8a2a\u554f\uff0c\u8acb\u6309\u5982\u4e0b\u6240\u8ff0\u64cd\u4f5c\uff1a```\nname: \"constraints/sql.restrictPublicIp\"display_name: \"Restrict Public IP access on Cloud SQL instances\"\n```\n- \u5728\u7f3a\u5c11 IAM \u8eab\u4efd\u9a57\u8b49\u7684\u60c5\u6cc1\u4e0b\u7981\u6b62\u4f86\u81ea\u4e92\u806f\u7db2\u7684\u8a2a\u554f\uff08\u9019\u4e0d\u6703\u5f71\u97ff\u4f7f\u7528\u5c08\u7528 IP \u9032\u884c\u7684\u8a2a\u554f\uff09\uff1a```\nname: \"constraints/sql.restrictAuthorizedNetworks\"display_name: \"Restrict Authorized Networks on Cloud SQL instances\"\n```\n- \u5f9e\u5217\u8868\u4e2d\u9078\u64c7\u653f\u7b56 **\u540d\u7a31** \u3002\n- \u9ede\u64ca **\u4fee\u6539** \u3002\n- \u9ede\u64ca **\u81ea\u5b9a\u7fa9** \u3002\n- \u9ede\u64ca **\u6dfb\u52a0\u898f\u5247** \u3002\n- \u5728 **\u5f37\u5236\u57f7\u884c** \u4e0b\uff0c\u9ede\u64ca **\u958b\u5553** \u3002\n- \u9ede\u64ca **\u4fdd\u5b58** \u3002## \u6dfb\u52a0 CMEK \u7d44\u7e54\u653f\u7b56**    \u9810\u89bd     ** \u672c\u7522\u54c1\u6216\u529f\u80fd\u9808\u9075\u5b88 [\u670d\u52d9\u5c08\u7528\u689d\u6b3e](https://cloud.google.com/terms/service-terms?hl=zh-cn#1) \u7684\u201c\u901a\u7528\u670d\u52d9\u689d\u6b3e\u201d\u90e8\u5206\u4e2d\u7684\u201c\u975e\u6b63\u5f0f\u7248\u7522\u54c1\u689d\u6b3e\u201d\u3002 \u6b63\u5f0f\u767c\u4f48\u524d\u7522\u54c1\u548c\u529f\u80fd\u201c\u6309\u539f\u6a23\u201d\u63d0\u4f9b\uff0c\u53ef\u80fd\u50c5\u63d0\u4f9b\u6709\u9650\u652f\u6301\u3002 \u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [\u767c\u4f48\u968e\u6bb5\u8aaa\u660e](https://cloud.google.com/products?hl=zh-cn#product-launch-stages) \u3002\n\u5982\u9700\u67e5\u770b\u6982\u89bd\uff0c\u8acb\u53c3\u95b1 [\u5ba2\u6236\u7ba1\u7406\u7684\u52a0\u5bc6\u5bc6\u9470\u7d44\u7e54\u653f\u7b56](https://cloud.google.com/sql/docs/postgres/org-policy/org-policy?hl=zh-cn#cmek-organization-policy) \u3002\n\u5982\u9700\u6dfb\u52a0 CMEK \u7d44\u7e54\u653f\u7b56\uff0c\u8acb\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- \u8f49\u5230 **\u7d44\u7e54\u653f\u7b56** \u9801\u9762\u3002 [\u8f49\u5230\u201c\u7d44\u7e54\u653f\u7b56\u201d\u9801\u9762](https://console.cloud.google.com/iam-admin/orgpolicies?hl=zh-cn) \n- \u9ede\u64ca\u9802\u90e8\u6a19\u7c64\u9801\u4e2d\u7684\u9805\u76ee\u4e0b\u62c9\u83dc\u55ae\uff0c\u7136\u5f8c\u9078\u64c7\u9700\u8981\u7d44\u7e54\u653f\u7b56\u7684\u9805\u76ee\u3001\u6587\u4ef6\u593e\u6216\u7d44\u7e54\u3002 **\u7d44\u7e54\u653f\u7b56** \u9801\u9762\u6703\u986f\u793a\u53ef\u7528\u7684\u7d44\u7e54\u653f\u7b56\u9650\u5236\u689d\u4ef6\u5217\u8868\u3002\n- \u91dd\u5c0d `name` \u6216 `display_name` \u9650\u5236\u689d\u4ef6\u9032\u884c\u904e\u6ffe\u3002- \u5c07\u670d\u52d9\u540d\u7a31\u6dfb\u52a0\u5230\u62d2\u7d55\u5217\u8868\uff0c\u4ee5\u78ba\u4fdd\u5728\u8a72\u670d\u52d9\u7684\u8cc7\u6e90\u4e2d\u4f7f\u7528 CMEK\uff1a```\nname: \"constraints/gcp.restrictNonCmekServices\"display_name: \"Restrict which services may create resources without CMEK\"\n```\u60a8\u5fc5\u9808\u5c07 `sqladmin.googleapis.com` \u6dfb\u52a0\u5230\u53d7\u9650\u670d\u52d9\u5217\u8868\u4e2d\u4e26\u8a2d\u7232\u62d2\u7d55\u3002\n- \u5c07\u9805\u76ee ID \u6dfb\u52a0\u5230\u5141\u8a31\u5217\u8868\uff0c\u4ee5\u78ba\u4fdd\u53ea\u6709\u8a72\u9805\u76ee\u4e2d Cloud KMS \u5be6\u4f8b\u7684\u5bc6\u9470\u53ef\u7528\u65bc CMEK\u3002```\nname: \"constraints/gcp.restrictCmekCryptoKeyProjects\"display_name: \"Restrict which projects may supply KMS CryptoKeys for CMEK\"\n```\n- \u5f9e\u5217\u8868\u4e2d\u9078\u64c7\u653f\u7b56 **\u540d\u7a31** \u3002\n- \u9ede\u64ca **\u4fee\u6539** \u3002\n- \u9ede\u64ca **\u81ea\u5b9a\u7fa9** \u3002\n- \u9ede\u64ca **\u6dfb\u52a0\u898f\u5247** \u3002\n- \u5728 **\u653f\u7b56\u503c** \u4e0b\u65b9\uff0c\u9ede\u64ca **\u81ea\u5b9a\u7fa9** \u3002\n- \u5c0d\u65bc `constraints/gcp.restrictNonCmekServices` \uff1a a. \u5728 **\u653f\u7b56\u985e\u578b** \u4e0b\uff0c\u9078\u64c7 **\u62d2\u7d55** \u3002 b. \u5728 **\u81ea\u5b9a\u7fa9\u503c** \u4e0b\uff0c\u8f38\u5165 `sqladmin.googleapis.com` \u3002\u5c0d\u65bc `constraints/gcp.restrictCmekCryptoKeyProjects` \uff1a a. \u5728 **\u653f\u7b56\u985e\u578b** \u4e0b\uff0c\u9078\u64c7 **\u5141\u8a31** \u3002b. \u5728 **\u81ea\u5b9a\u7fa9\u503c** \u4e0b\uff0c\u6309\u7167\u4ee5\u4e0b\u683c\u5f0f\u8f38\u5165\u8cc7\u6e90\uff1a `under:organizations/ORGANIZATION_ID` \u3001 `under:folders/FOLDER_ID` \u6216 `projects/PROJECT_ID` \u3002\n- \u9ede\u64ca **\u5b8c\u6210** \u3002\n- \u9ede\u64ca **\u4fdd\u5b58** \u3002## \u5f8c\u7e8c\u6b65\u9a5f\n- \u77ad\u89e3 [\u7d44\u7e54\u653f\u7b56](https://cloud.google.com/sql/docs/postgres/org-policy/org-policy?hl=zh-cn) \u3002\n- \u77ad\u89e3 [\u5c08\u7528 IP](https://cloud.google.com/sql/docs/postgres/private-ip?hl=zh-cn) \u5982\u4f55\u8207 Cloud SQL \u642d\u914d\u4f7f\u7528\u3002\n- \u77ad\u89e3\u5982\u4f55\u7232 Cloud SQL [\u914d\u7f6e\u5c08\u7528 IP](https://cloud.google.com/sql/docs/postgres/configure-private-ip?hl=zh-cn) \u3002\n- \u77ad\u89e3 [\u7d44\u7e54\u653f\u7b56\u670d\u52d9](https://cloud.google.com/resource-manager/docs/organization-policy/overview?hl=zh-cn) \u3002\n- \u77ad\u89e3 [\u7d44\u7e54\u653f\u7b56\u9650\u5236](https://cloud.google.com/resource-manager/docs/organization-policy/understanding-constraints?hl=zh-cn) \u3002", "guide": "Cloud SQL"}