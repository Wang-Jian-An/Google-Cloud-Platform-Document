{"title": "Cloud SQL - Connect using a MySQL client", "url": "https://cloud.google.com/sql/docs/mysql/connect-admin-ip", "abstract": "# Cloud SQL - Connect using a MySQL client\nYou can use the MySQL command-line client to connect to Cloud SQL. This page describes how to connect a [mysql client](https://dev.mysql.com/doc/refman/5.7/en/mysql.html) to your Cloud SQL instance, whether running locally on your client machine, on a Compute Engine VM, or in the Cloud Shell.\n**Note:** For information about connecting a client to a Cloud SQL instance using the Cloud SQL Auth Proxy, see [Connect using the Cloud SQL Auth Proxy](/sql/docs/mysql/connect-auth-proxy) . For information about connecting using private IP, see [Configure private IP](/sql/docs/mysql/configure-private-ip) .\n", "content": "## Before you begin\nBefore you can use a `mysql` client to connect to your Cloud SQL instance, do the following:\n- Create a Cloud SQL instance, including configuring the default  user.See [  Create instances](/sql/docs/mysql/create-instance) and [Set the  password for the default user account](/sql/docs/mysql/create-manage-users#user-root) .\n- Optionally, create a Compute Engine VM instance and then  connected to the instance using SSH.See [Create and  start a VM instance](/compute/docs/instances/create-start-instance) , [About SSH connections](/compute/docs/instances/ssh) ,   or [Connect to  Windows VMs using RDP](/compute/docs/instances/connecting-to-windows) .\n- Determine how you'll connect to your instance.For the connection options and how to choose from among them, see [About connection options](/sql/docs/mysql/connect-overview) .\n## Use a MySQL client on a local machine or a Compute Engine\n VM\nUsing a `mysql` client to connect to your Cloud SQL instance involves three high-level tasks:\n- [Install the client](#install-mysql-client) .\n- [Configure access to your Cloud SQL instance](#configure-instance-mysql) .\n- [Connect to your Cloud SQL instance](#connect) .\n### Install the client\nTo install the `mysql` client, do the following:\n- Download the MySQL Community Server for your platform from the [MySQL Community Server download page](http://dev.mysql.com/downloads/mysql/) .The Community Server includes the MySQL client.\n- Install the Community Server, following the directions on the download page.\nFor more information about installing MySQL, see [Installing and Upgrading MySQL](https://dev.mysql.com/doc/refman/5.7/en/installing.html) .\n### Configure access to your Cloud SQL\ninstance\nTo configure access to your instance, do the following:\n- From the client machine or Compute Engine VM instance, use [What's my IP](http://ipv4.whatismyv6.com) to see the IP address of the client machine.\n- Copy that IP address.\n- In the Google Cloud console, go to the **Cloud SQL Instances** page. [Go to Cloud SQL Instances](https://console.cloud.google.com/sql) \n- To open the **Overview** page of an instance, click the instance name.\n- Select **Connections** from the SQL navigation menu.\n- Select the **Networking** tab.\n- In the **Authorized networks** section, click **Add network** and enter the IP address of the machine where the client is installed. **Note:** The IP address of the instance and the`mysql`client IP address you authorize must be theIP  version: either IPv4 or IPv6.\n- Click **Done** . Then click **Save** at the bottom of the page to save your changes.\n- Connect to your instance, either [using SSL/TLS](#connect-ssl) or [without encryption (without using SSL/TLS)](#connect) .\n### Connect to your Cloud SQL instance without\nencryption\n**Caution:** This procedure configures an unencrypted connection to your database. If your database contains sensitive data, then [connect to your instance using SSL/TLS](#connect-ssl) .\nTo let you connect without encryption, the instance must have [SSL mode](/sql/docs/mysql/configure-ssl-instance#enforcing-ssl) set to `ALLOW_UNENCRYPTED_AND_ENCRYPTED` . In the Google Cloud console, the equivalent configuration is **Allow unencrypted network traffic** .\nFor more information about the SSL/TLS configuration of your instance, see [Configure SSL/TLS certificates](/sql/docs/mysql/configure-ssl-instance) .\nTo connect to your instance, do the following:\n- Confirm that you have [installed the client](#install-mysql-client) and [configured access to your instance](#configure-instance-mysql) .\n- Start the`mysql`client:```\nmysql --ssl-mode=DISABLED --host=INSTANCE_IP_ADDRESS --user=root --password\n```\n- Enter your password.\n- The mysql prompt appears.\n### Connect to your Cloud SQL instance using SSL/TLS\n**Note** : If you are using IAM database authentication to log in to the instance, then use the procedure in [Log in using IAM database authentication](/sql/docs/mysql/iam-logins#logging-in-as-a-user) instead.\nTo connect to your instance using SSL/TLS and built-in authentication:\nBefore you begin, confirm that you have [installed the client](#install-mysql-client) and [configured access to your instance](#configure-instance-mysql) .\n- Start the`mysql`client:```\nmysql --ssl-mode=REQUIRED \\\u00a0 \u00a0--host=INSTANCE_IP_ADDRESS \\\u00a0 \u00a0--user=root --password\n``` **Warning:** Don't include the`--ssl-mode`flag in the command if you are using a  MariaDB client to connect to the MySQL instance. Use the client from the [MySQL community server](http://dev.mysql.com/downloads/mysql/) instead.\n- Enter the password.\n- At the MySQL prompt, enter the`\\s`command to verify that your connection is using SSL/TLS.\n- Look for the output line with **SSL:** .```\n...\nSSL:      Cipher in use is DHE-RSA-AES256-SHA\n...\n``` **Warning:** MySQL client versions prior to 5.7.3 consider the`--ssl`options as advisory, and silently fall back to unencrypted connections if the server does not accept an encrypted connection. For more information, see [ Using Encrypted Connections](https://dev.mysql.com/doc/refman/5.7/en/encrypted-connections.html) in the MySQL Reference Manual. To avoid this issue, you can configure the instance so that only SSL/TLS connections can connect to it (for more information, see [Configuring SSL for Instances](/sql/docs/mysql/configure-ssl-instance) ).For information about troubleshooting connection issues, see [Debug connectionissues](/sql/docs/mysql/debugging-connectivity) .If `ssl_mode` on your Cloud SQL instance is configured to `TRUSTED_CLIENT_CERTIFICATE_REQUIRED` , then you must also provide a verified client identity when you log in.\nTo connect using SSL/TLS certificates with client verification, you need the following:\n- A client public key certificate in a **client-cert.pem** file.\n- A client private key in a **client-key.pem** file.\nIn addition, to let the client verify the server's identity for mutual authentication, specify the server certificate **server-ca.pem** .\n`mysql`\n```\n\u00a0 \u00a0 mysql --ssl-mode=VERIFY_CA \\\u00a0 \u00a0 \u00a0 --ssl-ca=server-ca.pem \\\u00a0 \u00a0 \u00a0 --ssl-cert=client-cert.pem \\\u00a0 \u00a0 \u00a0 --ssl-key=client-key.pem \\\u00a0 \u00a0 \u00a0 --host=INSTANCE_IP_ADDRESS \\\u00a0 \u00a0 \u00a0 --user=root --password\u00a0 \u00a0\n```\nIf you do not have a client certificate and a corresponding private key, then [create a new client certificate](/sql/docs/mysql/configure-ssl-instance#new-client) .\n## Using the client in the Cloud Shell\nTo connect to a Cloud SQL instance (public IP only):- Go to the Google Cloud console. [ Go to the Google Cloud console](https://console.cloud.google.com/) \n- Click the Cloud Shell icontowards the right in the toolbar.The Cloud Shell takes a few moments to initialize.\n- At the Cloud Shell prompt, use the built-in client to connect to your Cloud SQL instance:```\ngcloud sql connect INSTANCE_ID \\--user=root\n```\n- Enter your password.\nThe `gcloud sql connect` command does not support connecting  to a Cloud SQL instance using private IP, or using SSL/TLS. To connect  with encryption, install and use the proxy in the Cloud Shell:- [Install the proxy](/sql/docs/mysql/connect-auth-proxy#install-the-cloud-sql-proxy) (Linux 64-bit) in the`/home/USER`directory.\n- Start the proxy, using gcloud CLI authentication:```\n./cloud-sql-proxy INSTANCE_CONNECTION_NAME &\n```\n- Connect to the database by using the TCP connection:```\nmysql -u USERNAME -p --host=127.0.0.1\n```## What's next- Learn about [ configuring an instance with a private IP address](/sql/docs/mysql/configure-private-ip) .\n- Learn about [ options for connecting to your instance from your application](/sql/docs/mysql/connect-overview#external-connection-methods) .\n- Learn about the [mysql client](https://dev.mysql.com/doc/refman/5.7/en/mysql.html) .", "guide": "Cloud SQL"}