{"title": "Vertex AI Vision - Use the Face Blur model with the Python SDK", "url": "https://cloud.google.com/vision-ai/docs/face-blur-python?hl=zh-cn", "abstract": "# Vertex AI Vision - Use the Face Blur model with the Python SDK\nThis tutorial shows you how to use the Python SDK to blur faces in video. The example blurs video files from a Cloud Storage bucket and generates blurred video outputs. These output videos are stored to the same Cloud Storage bucket as the source videos.", "content": "## ObjectivesThis tutorial shows you how to do the following:- Create a Cloud Storage bucket.\n- Upload a local video file to the bucket.\n- Send a request using the Python SDK.\n- View blurred output videos.\n## CostsIn this document, you use the following billable components of Google Cloud:- [Vertex AI Vision](/vision-ai/pricing) (Models - Person / face blur)\n- [Cloud Storage](/storage/pricing) \nTo generate a cost estimate based on your projected usage,  use the [pricing calculator](/products/calculator) . \nWhen you finish the tasks that are described in this document, you can avoid continued billing by deleting the resources that you created. For more information, see [Clean up](#clean-up) .## Before you begin- Get the Vertex AI Vision SDK source code:```\ngit clone https://github.com/google/visionai.git\n```The Python examples are located in the `visionai/python/example/` directory.\n- Get the Python SDK:```\nwget https://github.com/google/visionai/releases/download/v0.0.5/visionai-0.0.5-py3-none-any.whl\n```\n## Add input files to Cloud StorageBefore you can send a request using the Python SDK, create a Cloud Storage bucket and upload a local video to use as input.- Create a Cloud Storage bucket:```\ngcloud storage buckets create gs://BUCKET_NAME\n```\n- Upload a local video file to the new bucket:```\ngsutil cp LOCAL_FILE gs://BUCKET_NAME\n```\n## Install dependencies and send the requestAfter you create your Cloud Storage bucket for input and output videos and add a local video, install the necessary dependencies and send your request.- Optional. Set up your virtual environment:- If not installed, install `virtualenv` :```\nsudo apt-get install python3-venv\n```\n- Create a new virtual environment:```\npython3 -m venv vaivenv\n```\n- Activate your virtual environment:```\nsource vaivenv/bin/activate\n```\n- Install dependencies:```\npip3 install visionai-0.0.5-py3-none-any.whlpip3 install google-cloud-storage\n```\n- Send your request with the Python SDK.Make the following variable substitutions:- : Your Google Cloud project ID.\n- : Your location ID. For example,`us-central1`. [More information](/about/locations) . [Supported regions](/vision-ai/docs/warehouse-supported-regions) .\n- : The Cloud Storage bucket you created.\n```\npython3 visionai/python/example/blur_gcs_video.py \\--project_id=PROJECT_ID \u2013cluster_id=application-cluster-0 \\\u2013location_id=LOCATION_ID \u2013bucket_name=BUCKET_NAME\n```You should see output similar to the following:```\n\u00a0Listing mp4 files...\u00a0test1.mp4\u00a0test2.mp4\u00a0Creating deid processes...\u00a0process vnluvxgl is created\u00a0process rvrdoucx is created\u00a0Waiting for processes to finish...\u00a0process vnluvxgl state is COMPLETED\u00a0process rvrdoucx state is COMPLETED\u00a0All processes have finished, please check the GCS bucket!\u00a0```\n```\n## Examine outputAfter your video has finished processing you can examine the output in your Cloud Storage bucket. The generated blurred video files will be in the same Cloud Storage bucket as the source video.- List all objects in your bucket with the [gsutil ls](/storage/docs/gsutil/commands/ls) command:```\ngsutil ls gs://bucket\n```You should see the source files and output files similar to the following:```\ntest1.mp4test2.mp4test1_deid_output.mp4test2_deid_output.mp4\n```\n- Optional. Download the output files locally with the [gsutil cp](/storage/docs/gsutil/commands/cp) command and view the blurred videos:```\ngsutil cp gs://BUCKET_NAME/FILE_NAME .\n```\n## Clean upTo avoid incurring charges to your Google Cloud account for the resources used in this   tutorial, either delete the project that contains the resources, or keep the project and   delete the individual resources.## What's next\n- Read more about the [Person blur model](/vision-ai/docs/person-blur-model) .\n- Explore reference architectures, diagrams, and best practices about Google Cloud. Take a look at our [Cloud Architecture Center](/architecture) .", "guide": "Vertex AI Vision"}