{"title": "Vertex AI Vision - Overview", "url": "https://cloud.google.com/vision-ai/docs/warehouse-searchconfig-and-hypernyms?hl=zh-cn", "abstract": "# Vertex AI Vision - Overview\n", "content": "## Search config\nSearch config can modify the search criteria and search facet behavior. We have the following four use cases for search config.\nAvailability:\n- Streaming Video Warehouse: All following use cases are enabled.\n- Batch Video Warehouse: Search criteria is enabled, but search facet is not enabled.\n- Image Warehouse: Search config is not available.\n### Use case 1: one-to-many criteria\nUsers can create a customized search criteria that maps to multiple existing data schemas. For example, the following search config creates a customized search criteria, \"person\". When users search under the criteria \"person\", like searching \"Mike\" under criteria \"person\", our service will expand the \"person\" criteria to \"player\", \"coach\", and \"cheerleader\", and then search under all these data schemas. In other words, whether \"Mike\" is annotated as \"player\", \"coach\", or \"cheerleader\", related results will be returned.\n```\n{\u00a0 name: \"projects/$PROJECT_NUMBER/locations/$LOCATION_ID/corpora/$CORPUS_ID/searchConfigs/person\"\u00a0 search_criteria_property {\u00a0 \u00a0 mapped_fields: \"player\"\u00a0 \u00a0 mapped_fields: \"coach\"\u00a0 \u00a0 mapped_fields: \"cheerleader\"\u00a0 }}\n```\n### Use case 2: one-to-one facet\nUsers can enable the search facet for an existing data schema by creating one search config on it. For example, the following search config enables the search facet for location. When users searching under \"location,\" they can now select bucket values under \"location,\" like \"Tokyo\", \"London\" to further narrow down search results.\nNote that the search config ID, facet_property.mapped_field, and the data schema ID all need to be the same string, in this case, \"location\".\n```\n{\u00a0 name: \"projects/$PROJECT_NUMBER/locations/$LOCATION_ID/corpora/$CORPUS_ID/searchConfigs/location\"\u00a0 facet_property {\u00a0 \u00a0 mapped_fields: \"location\",\u00a0 \u00a0 display_name: \"A customized name for UI\",\u00a0 \u00a0 result_size: 5,\u00a0 \u00a0 bucket_type: FACET_BUCKET_TYPE_VALUE\u00a0 }}\n```\n### Use case 3: one-to-many criteria and facet\nUsers can create a customized search criteria and also enable the search facet on it at the same time. For example, the following search config creates a customized search criteria that maps \"location\" to \"city\", \"state\", and \"province\". Meanwhile, the search facet is enabled. All bucket values from \"city\", \"state\", and \"province\" will be returned together.\nNote that, in this case, mapped_fields of search_criteria_property and facet_property need to be identical. And they should be the ID of existing data schema.\n```\n{\u00a0 name: \"projects/$PROJECT_NUMBER/locations/$LOCATION_ID/corpora/$CORPUS_ID/searchConfigs/location\"\u00a0 search_criteria_property {\u00a0 \u00a0 mapped_fields: \"city\"\u00a0 \u00a0 mapped_fields: \"state\"\u00a0 \u00a0 mapped_fields: \"province\"\u00a0 } \u00a0 \u00a0 facet_property {\u00a0 \u00a0 mapped_fields: \"city\" \u00a0 \u00a0\u00a0 \u00a0 mapped_fields: \"state\"\u00a0 \u00a0 mapped_fields: \"province\"\u00a0 \u00a0 display_name: \"places\"\u00a0 \u00a0 result_size: 5,\u00a0 \u00a0 bucket_type: FACET_BUCKET_TYPE_VALUE\u00a0 }}\n```\n### Use case 4: range-based facet\nFor use case 2 and 3, we can change the bucket type of a facet to be range-based. Range-based facets are similar to normal facets, but each facet bucket covers some continuous span. Additional setting is needed to configure the continuous span.\nRange facets are available for:\n- Integers\n- Dates\nThere are three types of range facets:\n- Fixed range: each bucket is the same size.\n- Custom range: programmable bucket sizes, for example logarithmic.\n- Date range: fixed bucket granularities of DAY, MONTH, and YEAR (only applicable for date range facets).\nThe following search config enables the search facet on \"inventory-count\" search criteria and the facet buckets will be [-inf, 0), [0, 10), [10, 20), [20, 30), [30, inf).\n```\n{\u00a0 name: \"projects/$PROJECT_NUMBER/locations/$LOCATION_ID/corpora/$CORPUS_ID/searchConfigs/inventory-count\"\u00a0 facet_property {\u00a0 mapped_fields: \"inventory-count\"\u00a0 display_name: \"Inventory Count\"\u00a0 result_size: 5\u00a0 bucket_type:FACET_BUCKET_TYPE_FIXED_RANGE\u00a0 fixed_range_bucket_spec {\u00a0 \u00a0 bucket_start {\u00a0 \u00a0 \u00a0 integer_value: 0\u00a0 \u00a0 }\u00a0 \u00a0 bucket_granularity {\u00a0 \u00a0 \u00a0 integer_value: 10\u00a0 \u00a0 }\u00a0 \u00a0 bucket_count: 5\u00a0 \u00a0 }\u00a0 }}\n```\nThe following search config enables the search facet on \"film-date\" search criteria with a DAY granularity.\n```\n{\u00a0 name: \"projects/$PROJECT_NUMBER/locations/$LOCATION_ID/corpora/$CORPUS_ID/searchConfigs/film-date\"\u00a0 facet_property {\u00a0 \u00a0 mapped_fields: \"film-date\"\u00a0 \u00a0 display_name: \"Film Date\"\u00a0 \u00a0 result_size: 5\u00a0 \u00a0 bucket_type: FACET_BUCKET_TYPE_DATETIME\u00a0 \u00a0 datetime_bucket_spec {\u00a0 \u00a0 \u00a0 granularity: DAY\u00a0 \u00a0 }\u00a0 }}\n```\n## Search hypernym\nSearch hypernym can modify how search queries match with smart search string annotations.\nAvailability:\n- Streaming Warehouse: Search hypernym is enabled for global search query and smart search criteria string query.\n- VoD Warehouse: Search hypernym is enabled for smart search criteria string query.\n- Image Warehouse: Search hypernym is not available.\nA search hypernym maps one hypernym to multiple hyponyms. For example, the following search hypernym maps \"vehicle\" to \"sedan\", \"truck\", and \"suv\". Searching \"vehicle\" in a global search query or under smart search string criteria will also match results annotated with \"sedan\", \"truck\", and \"suv\", as well as \"vehicle\".\n```\n{\u00a0 name: \"projects/$PROJECT_NUMBER/locations/$LOCATION_ID/corpora/$CORPUS_ID/searchHypernyms/car-hypernym\"\u00a0 hypernym: \"vehicle\"\u00a0 hyponyms: \"sedan\"\u00a0 hyponyms: \"truck\"\u00a0 hyponyms: \"suv\"}\n```", "guide": "Vertex AI Vision"}