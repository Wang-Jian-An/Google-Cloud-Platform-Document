{"title": "Vertex AI Vision - Manage application instances", "url": "https://cloud.google.com/vision-ai/docs/manage-app-instances?hl=zh-cn", "abstract": "# Vertex AI Vision - Manage application instances\nAfter you [build](/vision-ai/docs/build-app) and [deploy](/vision-ai/docs/deploy-app) apps, you can manage these app instances using the Google Cloud console or command line.\n", "content": "## View deployed app instances and output\nYou can view app instances and output using the Google Cloud console or command line. You can then use this information to [read model output streams](/vision-ai/docs/read-stream) and [get assets](/vision-ai/docs/manage-assets-api#get-asset) .\nView an app's instances and output in the Google Cloud console.- Open the **Applications** tab of the Vertex AI Vision dashboard. [Go to the Applications tab](https://console.cloud.google.com/ai/vision-ai/applications) \n- Select the name of the app you want to view. This takes you to the application details page.The application details page displays a table with application resources. This table lists all the running instances of the application. Each input stream to the application has its own instance. Each instance has its own input and output resources listed under it.\n- To inspect the stream or warehouse asset resources in the instance table, click on the input or output ID, or select the path.- If you click on **stream** resource, you are redirected to the stream details page, where you can inspect the detailed information of that stream.To learn how to read a model's output stream using the command line, see [Create and manage Streams](/vision-ai/docs/read-stream) .\n- Clicking on the **warehouse asset** resource takes you to the Vision Warehouse asset details page.To get a Vision Warehouse asset, see [Manage resourcesusing the Vision Warehouse API](/vision-ai/docs/manage-assets-api#get-asset) .To list app instances, send a GET request by using the [projects.locations.applications.instances.list](/vision-ai/docs/reference/rest/v1/projects.locations.applications.instances/list) method.\nBefore using any of the request data, make the following replacements:- : Your Google Cloud [project ID or project number](/resource-manager/docs/creating-managing-projects#identifying_projects) .\n- : The [region](/about/locations) where you are using Vertex AI Vision. For example:`us-central1`,`europe-west4`. See [available regions](/vision-ai/docs/warehouse-supported-regions) .\n- : The ID of your target application.\nHTTP method and URL:\n```\nGET https://visionai.googleapis.com/v1/projects/PROJECT_NUMBER/locations/LOCATION_ID/applications/APPLICATION_ID/instances\n```\nTo send your request, choose one of these options:\n **Note:** The following command assumes that you have logged in to  the`gcloud`CLI with your user account by running [gcloud init](/sdk/gcloud/reference/init) or [gcloud auth login](/sdk/gcloud/reference/auth/login) ,  or by using [Cloud Shell](/shell/docs) ,  which automatically logs you into the`gcloud`CLI.  You can check the currently active account by running [gcloud auth list](/sdk/gcloud/reference/auth/list) .\nExecute the following command:\n```\ncurl -X GET \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ \"https://visionai.googleapis.com/v1/projects/PROJECT_NUMBER/locations/LOCATION_ID/applications/APPLICATION_ID/instances\"\n``` **Note:** The following command assumes that you have logged in to  the`gcloud`CLI with your user account by running [gcloud init](/sdk/gcloud/reference/init) or [gcloud auth login](/sdk/gcloud/reference/auth/login) ,  or by using [Cloud Shell](/shell/docs) ,  which automatically logs you into the`gcloud`CLI.  You can check the currently active account by running [gcloud auth list](/sdk/gcloud/reference/auth/list) .\nExecute the following command:\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method GET ` -Headers $headers ` -Uri \"https://visionai.googleapis.com/v1/projects/PROJECT_NUMBER/locations/LOCATION_ID/applications/APPLICATION_ID/instances\" | Select-Object -Expand Content\n```\nYou should receive a JSON response similar to the following:\n```\n{\n \"instances\": [ {\n  \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION_ID/applications/APPLICATION_ID/instances/INSTANCE_ID\",\n  \"createTime\": \"2022-03-01T20:05:45.863836157Z\",\n  \"inputResources\": [  {\n   \"inputResource\": \"input-stream\",\n   \"consumerNode\": \"builtin-input-stream\"\n  }\n  ],\n  \"outputResources\": [  {\n   \"outputResource\": \"sample-resource-1\",\n   \"producerNode\": \"builtin-occupancy-count\",\n   \"isTemporary\": true\n  },\n  {\n   \"outputResource\": \"sample-resource-2\",\n   \"producerNode\": \"builtin-input-stream\"\n  },\n  {\n   \"outputResource\": \"sample-resource-3\",\n   \"producerNode\": \"builtin-input-stream\",\n   \"isTemporary\": true\n  },\n  {\n   \"outputResource\": \"sample-resource-4\",\n   \"producerNode\": \"builtin-input-stream\",\n   \"isTemporary\": true\n  }\n  ]\n }\n ]\n}\n```\n## Delete an app instance\nTo delete application instances, send a POST request by using the [projects.locations.applications.deleteApplicationInstances](/vision-ai/docs/reference/rest/v1/projects.locations.applications/deleteApplicationInstances) method.\nBefore using any of the request data, make the following replacements:- : Your Google Cloud [project number](/resource-manager/docs/creating-managing-projects#identifying_projects) .\n- : The [region](/about/locations) where you are using Vertex AI Vision. For example:`us-central1`,`europe-west4`. See [available regions](/vision-ai/docs/warehouse-supported-regions) .\n- : The ID of your target application.\nHTTP method and URL:\n```\nPOST https://visionai.googleapis.com/v1/projects/PROJECT_NUMBER/locations/LOCATION_ID/applications/APPLICATION_ID:deleteApplicationInstances\n```\nRequest JSON body:\n```\n{\n \"instanceIds\": [ \"INSTANCE_ID1\",\n \"INSTANCE_ID2\",\n [...]\n ]\n}\n```\nTo send your request, choose one of these options:\n **Note:** The following command assumes that you have logged in to  the`gcloud`CLI with your user account by running [gcloud init](/sdk/gcloud/reference/init) or [gcloud auth login](/sdk/gcloud/reference/auth/login) ,  or by using [Cloud Shell](/shell/docs) ,  which automatically logs you into the`gcloud`CLI.  You can check the currently active account by running [gcloud auth list](/sdk/gcloud/reference/auth/list) .\nSave the request body in a file named `request.json` ,  and execute the following command:\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://visionai.googleapis.com/v1/projects/PROJECT_NUMBER/locations/LOCATION_ID/applications/APPLICATION_ID:deleteApplicationInstances\"\n``` **Note:** The following command assumes that you have logged in to  the`gcloud`CLI with your user account by running [gcloud init](/sdk/gcloud/reference/init) or [gcloud auth login](/sdk/gcloud/reference/auth/login) ,  or by using [Cloud Shell](/shell/docs) ,  which automatically logs you into the`gcloud`CLI.  You can check the currently active account by running [gcloud auth list](/sdk/gcloud/reference/auth/list) .\nSave the request body in a file named `request.json` ,  and execute the following command:\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://visionai.googleapis.com/v1/projects/PROJECT_NUMBER/locations/LOCATION_ID/applications/APPLICATION_ID:deleteApplicationInstances\" | Select-Object -Expand Content\n```\nYou should receive a JSON response similar to the following:\n```\n{\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION_ID/operations/OPERATION_ID\",\n \"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.visionai.v1.OperationMetadata\",\n \"createTime\": \"[...]\",\n \"Target\": \"projects/PROJECT_NUMBER/locations/LOCATION_ID/applications/APPLICATION_ID\"\n \"Verb\": \"update\"\n \"apiVersion\": \"v1\"\n },\n \"done\": false\n}\n```\n## Manage large scale apps\nThe deploy and undeploy methods are valid for applications with less than 20 instances. If your app has more than 20 instances you must create and remove instances incrementally with the API. The recommended workflow is as follows:\n- Create your app.\n- Add 1-20 experimental instances.\n- Deploy your application.\n- Verify your app works as expected.\n- Use the [createApplicationInstances](/vision-ai/docs/reference/rest/v1/projects.locations.applications/createApplicationInstances) method to incrementally add more inputs to the deployed application.\n- Allow app to run.\n- Use the [deleteApplicationInstances](/vision-ai/docs/reference/rest/v1/projects.locations.applications/deleteApplicationInstances) method to incrementally remove inputs from deployed applications.\n- Undeploy the application.\n**Caution:** For a single application there can only be update request running at a time. You are responsible for queueing these types of requests, and performing the necessary retries if there is a failure.", "guide": "Vertex AI Vision"}