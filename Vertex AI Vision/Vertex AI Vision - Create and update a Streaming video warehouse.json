{"title": "Vertex AI Vision - Create and update a Streaming video warehouse", "url": "https://cloud.google.com/vision-ai/docs/create-manage-streaming-warehouse?hl=zh-cn", "abstract": "# Vertex AI Vision - Create and update a Streaming video warehouse\nA Vision Warehouse is a component you can add to your app to store model output and streaming data.\n", "content": "## Create a streaming video warehouse\nTo connect other component nodes of your app graph to a warehouse you must first create a streaming video warehouse.\n**Caution** : Vertex AI Vision doesn't support a stream's usage in multiple apps connected to a warehouse ; one stream can be associated with only one warehouse export destination.\n**Note:** You can also create a streaming video warehouse from the application graph builder page. See [Build an application](/vision-ai/docs/build-app#connect-warehousepp) for more details.\n- Open the **Warehouses** tab of the Vertex AI Vision dashboard. [Go to the Warehouses tab](https://console.cloud.google.com/ai/vision-ai/media-warehouse) \n- Select add **Create** .\n- Add a name for the warehouse and choose a [time to live (TTL)](https://en.wikipedia.org/wiki/Time_to_live#:%7E:text=Time%20to%20live%20(TTL)%20or,data%20is%20discarded%20or%20revalidated.) period for assets stored in the warehouse. These values can be modified later.After a warehouse is created you can [add the warehouse](/vision-ai/docs/build-app#connect-warehousepp) to an application graph.\nCreates a new `corpus` resource under the given project with the option to specify the `corpus` display name, description and a TTL.\nBefore using any of the request data, make the following replacements:- : Endpoint might include a prefix matching the`LOCATION_ID`such as`europe-west4-`. See more about [ regionalized endpoints](/vision-ai/docs/warehouse-supported-regions) .\n- : Your Google Cloud [project number](/resource-manager/docs/creating-managing-projects#identifying_projects) .\n- : The [region](/about/locations) where you are using Vertex AI Vision. For example:`us-central1`,`europe-west4`. See [available regions](/vision-ai/docs/warehouse-supported-regions) .\n- : Display name for the warehouse.\n- : The description of the warehouse (`corpus`).\n- : The amount of time to live (TTL) for all assets under a corpus, or the TTL of a specific asset. For example, for a corpus with assets with a TTL of 100 days, provide the value`8640000`(seconds).\nHTTP method and URL:\n```\nPOST https://warehouse-visionai.googleapis.com/v1/projects/PROJECT_NUMBER/locations/LOCATION_ID/corpora\n```\nRequest JSON body:\n```\n{\n \"display_name\": \"DISPLAY_NAME\",\n \"description\": \"WAREHOUSE_DESCRIPTION\",\n \"type\": \"STREAM_VIDEO\",\n \"default_ttl\": {\n \"seconds\": TIME_TO_LIVE\n }\n}\n```\nTo send your request, choose one of these options:\n **Note:** The following command assumes that you have logged in to  the`gcloud`CLI with your user account by running [gcloud init](/sdk/gcloud/reference/init) or [gcloud auth login](/sdk/gcloud/reference/auth/login) ,  or by using [Cloud Shell](/shell/docs) ,  which automatically logs you into the`gcloud`CLI.  You can check the currently active account by running [gcloud auth list](/sdk/gcloud/reference/auth/list) .\nSave the request body in a file named `request.json` ,  and execute the following command:\n```\ncurl -X POST \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://warehouse-visionai.googleapis.com/v1/projects/PROJECT_NUMBER/locations/LOCATION_ID/corpora\"\n``` **Note:** The following command assumes that you have logged in to  the`gcloud`CLI with your user account by running [gcloud init](/sdk/gcloud/reference/init) or [gcloud auth login](/sdk/gcloud/reference/auth/login) ,  or by using [Cloud Shell](/shell/docs) ,  which automatically logs you into the`gcloud`CLI.  You can check the currently active account by running [gcloud auth list](/sdk/gcloud/reference/auth/list) .\nSave the request body in a file named `request.json` ,  and execute the following command:\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method POST ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://warehouse-visionai.googleapis.com/v1/projects/PROJECT_NUMBER/locations/LOCATION_ID/corpora\" | Select-Object -Expand Content\n```\nYou should receive a JSON response similar to the following:\n```\n{\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION_ID/warehouseoperations/OPERATION_ID\",\n \"metadata\": {\n \"@type\": \"type.googleapis.com/google.cloud.visionai.v1.CreateCorpusMetadata\"\n },\n \"done\": true,\n \"response\": {\n \"@type\": \"type.googleapis.com/google.cloud.visionai.v1.Corpus\",\n \"name\": \"projects/PROJECT_NUMBER/locations/LOCATION_ID/corpora/CORPUS_ID\",\n \"displayName\": \"DISPLAY_NAME\",\n \"description\": \"WAREHOUSE_DESCRIPTION\",\n \"type\": \"STREAM_VIDEO\",\n \"defaultTtl\": \"TIME_TO_LIVE\"\n }\n}\n```\n## Update a streaming video warehouse\nUpdates an existing corpus under the given project with the option to update display name, description, default TTL, or update all available fields.\nUpdates an existing `corpus` resource under the given project. This sample shows you how to update the `corpus` display name, but you can also update description, TTL, or all fields at once using the same URL format and updated request body.\nBefore using any of the request data, make the following replacements:- : Endpoint might include a prefix matching the`LOCATION_ID`such as`europe-west4-`. See more about [ regionalized endpoints](/vision-ai/docs/warehouse-supported-regions) .\n- : Your Google Cloud [project number](/resource-manager/docs/creating-managing-projects#identifying_projects) .\n- : The [region](/about/locations) where you are using Vertex AI Vision. For example:`us-central1`,`europe-west4`. See [available regions](/vision-ai/docs/warehouse-supported-regions) .\n- : The ID of your target corpus.\n- `?updateMask=` ``: One of the available fields you can apply an`updateMask`to. Specify the corresponding new field value in the request body. This new value replaces the existing field value. Available fields:- Display name:`?updateMask=display_name`\n- Description:`?updateMask=description`\n- Default time-to-live (TTL):`?updateMask=default_ttl`\n- Update all fields:`?updateMask=*`- : A new value for the specified field. In this example, a  new user-provided display name for the warehouse resource.\nHTTP method and URL:\n```\nPATCH https://warehouse-visionai.googleapis.com/v1/projects/PROJECT_NUMBER/locations/LOCATION_ID/corpora/CORPUS_ID?update_mask=display_name\n```\nRequest JSON body:\n```\n{\n \"displayName\": \"UPDATED_FIELD_VALUE\",\n \"description\": \"Original description\",\n \"defaultTtl\": {\n \"seconds\": \"7800\"\n }\n}\n```\nTo send your request, choose one of these options:\n **Note:** The following command assumes that you have logged in to  the`gcloud`CLI with your user account by running [gcloud init](/sdk/gcloud/reference/init) or [gcloud auth login](/sdk/gcloud/reference/auth/login) ,  or by using [Cloud Shell](/shell/docs) ,  which automatically logs you into the`gcloud`CLI.  You can check the currently active account by running [gcloud auth list](/sdk/gcloud/reference/auth/list) .\nSave the request body in a file named `request.json` ,  and execute the following command:\n```\ncurl -X PATCH \\ -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\ -H \"Content-Type: application/json; charset=utf-8\" \\ -d @request.json \\ \"https://warehouse-visionai.googleapis.com/v1/projects/PROJECT_NUMBER/locations/LOCATION_ID/corpora/CORPUS_ID?update_mask=display_name\"\n``` **Note:** The following command assumes that you have logged in to  the`gcloud`CLI with your user account by running [gcloud init](/sdk/gcloud/reference/init) or [gcloud auth login](/sdk/gcloud/reference/auth/login) ,  or by using [Cloud Shell](/shell/docs) ,  which automatically logs you into the`gcloud`CLI.  You can check the currently active account by running [gcloud auth list](/sdk/gcloud/reference/auth/list) .\nSave the request body in a file named `request.json` ,  and execute the following command:\n```\n$cred = gcloud auth print-access-token$headers = @{ \"Authorization\" = \"Bearer $cred\" }Invoke-WebRequest ` -Method PATCH ` -Headers $headers ` -ContentType: \"application/json; charset=utf-8\" ` -InFile request.json ` -Uri \"https://warehouse-visionai.googleapis.com/v1/projects/PROJECT_NUMBER/locations/LOCATION_ID/corpora/CORPUS_ID?update_mask=display_name\" | Select-Object -Expand Content\n```\nYou should receive a JSON response similar to the following:\n```\n{\n \"name\": \"projects/PROJECT_ID/locations/LOCATION_ID/corpora/CORPORA_ID\",\n \"displayName\": \"UPDATED_FIELD_VALUE\",\n \"description\": \"Original description\",\n \"defaultTtl\": \"7800s\"\n}\n```", "guide": "Vertex AI Vision"}