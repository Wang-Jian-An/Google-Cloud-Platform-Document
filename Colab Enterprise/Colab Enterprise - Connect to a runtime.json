{"title": "Colab Enterprise - Connect to a runtime", "url": "https://cloud.google.com/colab/docs/connect-to-runtime?hl=zh-cn", "abstract": "# Colab Enterprise - Connect to a runtime\n# Connect to a runtime\nThis page shows you how to connect to a runtime in Colab Enterprise.\nTo run code in your notebook, you must connect to a runtime. A is a compute resource that runs your code.\n", "content": "## Before you begin\n## Connect by using different methods\nThis page shows you how to connect to a runtime by using the following methods:\n- [Use the default runtime](#default) \n- [Connect to an existing runtime](#existing) \n- [Create a runtime](#create) ## Use the default runtime\nThis section describes how to connect to the default runtime.\n### Required roles\nTo ensure that your user account has the necessary  permissions to connect to the default runtime in a Colab Enterprise notebook,   ask your administrator to grant your user account the   Colab Enterprise User ( [roles/aiplatform.colabEnterpriseUser](/vertex-ai/docs/general/access-control#aiplatform.colabEnterpriseUser) ) IAM role on the project.    For more information about granting roles, see [Manage access](/iam/docs/granting-changing-revoking-access) .\nYour administrator might also be able to give your user account  the required permissions through [custom  roles](/iam/docs/creating-custom-roles) or other [predefined  roles](/iam/docs/understanding-roles) .\nUsers assigned the Code Creator role in a project can list the names of code assets in that project by using the Dataform API or the Dataform command-line interface (CLI). In preview, non-administrators using BigQuery Studio can only see code assets that they created or that were shared with them.### Connect to the default runtime\nWhen you run code in a notebook for the first time, Colab Enterprise automatically connects to the default runtime unless you [specify a different runtime](#connect-existing) .\nTo connect to the default runtime without running code, do the following:\n- In the Google Cloud console, go to  the Colab Enterprise **Notebooks** page. [Go to Notebooks](https://console.cloud.google.com/vertex-ai/colab/notebooks) \n- In the **Region** menu, select the region that contains your notebook.\n- On the **My notebooks** tab, click the notebook  that you want to open. If you haven't created a notebook yet, [create a notebook](/colab/docs/create-console-quickstart#create) .\n- In your notebook, click **Connect** . \n- If this is your first time connecting to a runtime with  end-user credentials enabled, a **Sign in** dialog appears.The default runtime has end-user credentials enabled by default. To  use a runtime that doesn't have access to your user credentials, [create a runtime template](/colab/docs/create-runtime-template) without end-user credentials enabled.To grant Colab Enterprise access to your user credentials, complete the following steps:- In the **Sign in** dialog, click your user account.\n- Select **See, edit, configure, and delete your  Google Cloud data...** to grant Colab Enterprise  access to your user credentials.\n- Click **Continue** .Colab Enterprise connects to the default runtime. If the default runtime isn't running, Colab Enterprise starts the default runtime, and then connects to it.\n## Connect to an existing runtime\nThis section describes how to connect to an existing runtime by using the **Connect to Vertex AI runtime** dialog.\n### Required roles\nTo ensure that your user account has the necessary  permissions to connect to an existing runtime in a Colab Enterprise notebook,   ask your administrator to grant your user account the   Colab Enterprise User ( [roles/aiplatform.colabEnterpriseUser](/vertex-ai/docs/general/access-control#aiplatform.colabEnterpriseUser) ) IAM role on the project.    For more information about granting roles, see [Manage access](/iam/docs/granting-changing-revoking-access) .\nYour administrator might also be able to give your user account  the required permissions through [custom  roles](/iam/docs/creating-custom-roles) or other [predefined  roles](/iam/docs/understanding-roles) .\nUsers assigned the Code Creator role in a project can list the names of code assets in that project by using the Dataform API or the Dataform command-line interface (CLI). In preview, non-administrators using BigQuery Studio can only see code assets that they created or that were shared with them.### Connect to the existing runtime\n- In the Google Cloud console, go to  the Colab Enterprise **Notebooks** page. [Go to Notebooks](https://console.cloud.google.com/vertex-ai/colab/notebooks) \n- In the **Region** menu, select the region that contains your notebook.\n- On the **My notebooks** tab, click the notebook  that you want to open. If you haven't created a notebook yet, [create a notebook](/colab/docs/create-console-quickstart#create) .\n- In your notebook, click the **Additional connection options** expander arrow,  and then select **Connect to a runtime** . The **Connect to Vertex AI runtime** dialog opens.\n- For **Select a runtime** ,  select **Connect to an existing runtime** .\n- For **Select an existing runtime option** ,  select the runtime that you want to connect to. If there aren't  any runtimes in the list, [create a runtime](#create) or [connect to the default runtime](#default) .\n- Click **Connect** .\n- If your runtime has end-user credentials enabled, and this is your  first time connecting to a runtime with  end-user credentials enabled, a **Sign in** dialog appears.To use a runtime that doesn't have access to your user credentials, [create a runtime template](/colab/docs/create-runtime-template) without end-user credentials enabled.To grant Colab Enterprise access to your user credentials, complete the following steps:- In the **Sign in** dialog, click your user account.\n- Select **See, edit, configure, and delete your  Google Cloud data...** to grant Colab Enterprise  access to your user credentials.\n- Click **Continue** .Colab Enterprise connects to the runtime. If the runtime isn't running, Colab Enterprise starts the runtime, and then connects to it.\n## Create a runtime\nThis section describes how to create a runtime and connect to it by using the **Connect to Vertex AI runtime** dialog. Alternatively, you can [createa runtime from the Runtimes tab](/colab/docs/create-runtime) .\n### Required roles\nTo ensure that your user account has the necessary  permissions to create a runtime in Colab Enterprise,   ask your administrator to grant your user account the   Colab Enterprise Admin ( [roles/aiplatform.colabEnterpriseAdmin](/vertex-ai/docs/general/access-control#aiplatform.colabEnterpriseAdmin) ) IAM role on the project.    For more information about granting roles, see [Manage access](/iam/docs/granting-changing-revoking-access) .\nYour administrator might also be able to give your user account  the required permissions through [custom  roles](/iam/docs/creating-custom-roles) or other [predefined  roles](/iam/docs/understanding-roles) .\nUsers assigned the Code Creator role in a project can list the names of code assets in that project by using the Dataform API or the Dataform command-line interface (CLI). In preview, non-administrators using BigQuery Studio can only see code assets that they created or that were shared with them.### Create a runtime and connect to it\n**Connect to Vertex AI runtime**\n- In the Google Cloud console, go to  the Colab Enterprise **Notebooks** page. [Go to Notebooks](https://console.cloud.google.com/vertex-ai/colab/notebooks) \n- In the **Region** menu, select the region that contains your notebook.\n- On the **My notebooks** tab, click the notebook  that you want to open. If you haven't created a notebook yet, [create a notebook](/colab/docs/create-console-quickstart#create) .\n- In your notebook, click the **Additional connection options** expander arrow,  and then select **Connect to a runtime** . The **Connect to Vertex AI runtime** dialog opens.\n- For **Select a runtime** ,  select **Create new runtime** .\n- In the **Runtime template** menu,  select a runtime template. If there aren't any runtime templates listed, [create a runtime template](/colab/docs/create-runtime-template) .\n- In the **Runtime name** field, enter a name for your runtime.\n- Click **Connect** .\n- If the runtime template that you selected has end-user credentials enabled,  and this is your first time connecting to a runtime with  end-user credentials enabled, a **Sign in** dialog appears.To use a runtime that doesn't have access to your user credentials, [create a runtime template](/colab/docs/create-runtime-template) without end-user credentials enabled.To grant Colab Enterprise access to your user credentials, complete the following steps:- In the **Sign in** dialog, click your user account.\n- Select **See, edit, configure, and delete your  Google Cloud data...** to grant Colab Enterprise  access to your user credentials.\n- Click **Continue** .Colab Enterprise starts the default runtime, and then connects to it.\n### Runtime management\nBy default, when you create a runtime, you automatically have the required permissions to delete ( `aiplatform.googleapis.com/notebookRuntimes.delete` ) and start ( `aiplatform.googleapis.com/notebookRuntimes.start` ) that runtime.\n## Troubleshoot\nThis section shows you how to resolve issues with connecting to runtimes in Colab Enterprise.\n### Unable to connect to a runtime\nThis issue occurs due to several reasons. See also [Unable to connect to a defaultruntime](#unable-to-connect-default-runtime-no-template-create-permission) . The most common causes are:\nThe browser that you are using is blocking a third party cookie that Colab Enterprise uses to establish an HTTPS connection with the runtime.\nTo resolve this issue, configure your browser's settings to allow the `DATALAB_TUNNEL_TOKEN` third party cookie from the domain `*.aiplatform-notebook.googleusercontent.com` .Your network's firewall rules block outbound traffic to `*.aiplatform-notebook.cloud.google.com` or `*aiplatform.googleapis.com` .\nTo resolve this issue, configure your network's firewall rules to allow outbound traffic to `*.aiplatform-notebook.cloud.google.com` and `*aiplatform.googleapis.com` .### Unable to connect to a default runtime\nThe following error occurs when you try to connect to a default runtime when there isn't an existing default runtime template.\n```\nFailed to connect to runtime\n```\nWhen you connect to a default runtime that hasn't been created yet, Colab Enterprise first creates a default runtime template, and then uses that default runtime template to generate the default runtime. However, if you don't have the permissions required to create a runtime template, then Colab Enterprise can't create the default runtime template nor the default runtime.\nTo resolve this issue, ask your administrator to grant you a role that includes the `aiplatform.notebookRuntimeTemplates.create` permission.### Unable to create a runtime\nThis issue occurs when you're unable to create a runtime. See also [Unable to create a defaultruntime](#unable-to-create-default-runtime-no-template-create-permission) . The most common causes are:\nThe following error occurs when you try to create a runtime.\n```\nNo available zone found for runtime RUNTIME_ID\nfor machine type MACHINE_TYPE\nwith accelerator type: ACCELERATOR. Please try again later.\n```\nThis error occurs if there are no resources available for your machine type configuration within your notebook's region.\nTo resolve this issue, try a runtime with a different machine type configuration, or try again at a later time.The following error occurs when you try to create a runtime from the default runtime template when the default runtime already exists.\n```\nFailed to create runtime\nOne click runtime already exists.\n```\nIf you try to create a runtime from a default runtime template, Colab Enterprise tries to create a default runtime. There can only be one default runtime per user, project, and region. If the default runtime already exists, Colab Enterprise is unable to create another default runtime.\nTo resolve this issue, connect to the existing default runtime or create a runtime from a non-default runtime template.### Unable to create a default runtime\nWhen Colab Enterprise creates a default runtime, it first creates a default runtime template that it uses to generate the default runtime. If you try to create a default runtime without the permissions required to create a runtime template, then Colab Enterprise can't create the default runtime.\nTo resolve this issue, ask your administrator to grant you a role that includes the `aiplatform.notebookRuntimeTemplates.create` permission.\n## What's next\n- Learn more about [runtimes and runtime templates](/colab/docs/runtimes) .\n- [Create a runtime template](/colab/docs/create-runtime-template) .", "guide": "Colab Enterprise"}