{"title": "Google Cloud Observability - Defining a microservice", "url": "https://cloud.google.com/stackdriver/docs/solutions/slo-monitoring/ui/define-svc", "abstract": "# Google Cloud Observability - Defining a microservice\nThis document describes how to create custom services and services for GKE- and Cloud Run-based resources.\n**Note:** This document doesn't apply to Anthos Service Mesh, Istio on Google Kubernetes Engine, and App Engine, which are automatically recognized as services. You don't have to manually identify or define them.\nIn Cloud Monitoring, a is a construct that you can associate with SLOs and alerting policies. Several of the resources for which you might create Monitoring services are also referred to as , but with different meanings, like [GKEservices](/kubernetes-engine/docs/concepts/service) or [Cloud Runservices](/run/docs/resource-model#services) .\nMonitoring can recognize GKE- and Cloud Run-based services as for monitoring. To create services for them, you indicate which candidates you want to be treated as Monitoring services; Monitoring creates the necessary infrastructure for you.\nYou can also define arbitrary custom services.\n", "content": "## Identify or create a service\nTo identify candidate services, or to create custom services, go to the **Define service** pane:\n- In the navigation panel of the Google Cloud console, select **Monitoring** , and then select **SLOs** : [Go to SLOs](https://console.cloud.google.com/monitoring/services) \n- On the **Services Overview** page, do one of the following:- Click **Define service** .\n- In the **Current status** pane, click the **Define service** link: From the **Define service** pane, you can do the following:\n- Create GKE- or Cloud Run-based services from a list of candidate services.\n- Define custom services.\nThe following sections describe these options.\n## Create GKE- and Cloud Run-based services\nCloud Monitoring can identify potential services of the following types:\n- GKE namespaces\n- GKE services\n- GKE workloads\n- Cloud Run service\nBecause there might be many of these potential services, Monitoring doesn't assume you want them all to be treated as services with SLOs. To indicate which of the potential services Monitoring should treat as services, you use either the Google Cloud console or the API.\n### Use the Google Cloud console to create GKE and Cloud Run services\nTo identify a GKE- or Cloud Run-based Monitoring service by using the Google Cloud console, do the following:\n- On the **Services Overview** page, click **Define service** .\n- Select **Service Candidates** . There might be a large number of candidate services in the list. You can filter the list as follows:- Click **Filter table** . A list of filter options is displayed.\n- Select one of the options on the filter list. The selected option appears in the filter bar.\n- Click next to the option in the filter bar and start typing. Values that match are provided on a list. Select a value from the list.\n- Click a candidate service from the list of potential services.When you click an entry, the following fields are filled in for you:- The display name is set to the name the entry in the list. You can change this value.\n- A block of JSON code for the configuration of the new service is generated from the candidate. Do not change this value.\n- Click **Submit** . When your service is created, a **Success** notice is displayed.\n### Use the API to create GKE and Cloud Run services\nGKE- and Cloud Run-based services can also be defined by using the [SLO API](/monitoring/api/ref_v3/rest/v3/services) , part of the Cloud Monitoring API.\nTo create a service programmatically, post a configuration object like one of the following to the [services.create method](/monitoring/api/ref_v3/rest/v3/services/create) :\nUse the [GkeNamespace](/monitoring/api/ref_v3/rest/v3/services#GkeNamespace) structure, for example:\n```\n{\n \"displayName\": \"test-kube-namespace\",\n \"gkeNamespace\": {\n \"location\": \"us-central1-c\",\n \"clusterName\": \"cluster-1\",\n \"namespaceName\": \"test-kube-namespace\"\n }\n}\n```\nUse the [GkeService](/monitoring/api/ref_v3/rest/v3/services#GkeService) structure, for example:\n```\n{\n \"displayName\": \"test-kube-service\",\n \"gkeService\": {\n \"location\": \"us-central1-c\",\n \"clusterName\": \"cluster-1\",\n \"namespaceName\": \"kube-system\",\n \"serviceName\": \"test-kube-service\"\n }\n}\n```\nUse the [GkeWorkload](/monitoring/api/ref_v3/rest/v3/services#GkeWorkload) structure, for example:\n```\n{\n \"displayName\": \"frontend-a\",\n \"gkeWorkload\": {\n \"location\": \"us-central1-b\",\n \"clusterName\": \"cluster-2\",\n \"namespaceName\": \"default\",\n \"topLevelControllerType\": \"Deployment\",\n \"topLevelControllerName\": \"frontend-a\"\n }\n}\n```\nUse the [CloudRun](/monitoring/api/ref_v3/rest/v3/services#CloudRun) structure, for example:\n```\n{\n \"displayName\": \"test-cloudrun-service\",\n \"cloudRun\": {\n \"serviceName\": \"test-cloudrun-service\",\n \"location\": \"us-central1\"\n }\n}\n```\nFor more information about managing services programmatically, see [Workingwith the API](/stackdriver/docs/solutions/slo-monitoring/api/using-api) .\n## Create a custom service\nWhen no other service type meets your needs, create a custom service. With a custom service, you can arbitrarily group SLOs together in a way that is meaningful for your environment or create SLOs on business metrics that don't correspond to an existing microservice.\n### Use the Google Cloud console to create a custom service\nTo define a custom service by using the Google Cloud console, do the following:\n- Click **Define service** on the **Services Overview** page to bring up the **Define service** pane.\n- Select **Custom Service** . \n- Enter a display name for your custom service.\n- Click **Submit** . When your service is created, a **Success** notice is displayed.\n### Use the API to create a custom service\nTo define a custom service by using the [SLO API](/monitoring/api/ref_v3/rest/v3/services) , post a [Custom](/monitoring/api/ref_v3/rest/v3/services#Custom) configuration object like the following to the [services.create method](/monitoring/api/ref_v3/rest/v3/services/create) :\n```\n{\n \"displayName\": \"hello-world-service\",\n \"custom\": {}\n}\n```\nFor more information about managing services programmatically, see [Workingwith the API](/stackdriver/docs/solutions/slo-monitoring/api/using-api) .\n## What's next\nAfter you identify or create a new service, you can do the following:\n- Create an SLO for your new service. You must define at least one SLO for your new service for the service to be useful. For more information, see [Creating an SLO](/stackdriver/docs/solutions/slo-monitoring/ui/create-slo) .\n- Go to the dashboard for your new service. For a new service, the dashboard is empty, but you can define SLOs from the dashboard. For more information, see [Using microservice dashboards](/stackdriver/docs/solutions/slo-monitoring/ui/svc-dashboard) .", "guide": "Google Cloud Observability"}