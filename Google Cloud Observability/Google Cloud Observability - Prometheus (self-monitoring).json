{"title": "Google Cloud Observability - Prometheus (self-monitoring)", "url": "https://cloud.google.com/stackdriver/docs/managed-prometheus/exporters/prometheus", "abstract": "# Google Cloud Observability - Prometheus (self-monitoring)\nTo ingest Prometheus self-monitoring metrics from Managed Service for Prometheus, apply the following PodMonitoring manifest:\n[View on GitHub](https://github.com/GoogleCloudPlatform/prometheus-engine/blob/HEAD/examples/self-pod-monitoring.yaml)\n```\n# Copyright 2022 Google LLC\n", "content": "## Licensed under the Apache License, Version 2.0 (the \"License\");# you may not use this file except in compliance with the License.# You may obtain a copy of the License at\n## \u00a0 \u00a0 https://www.apache.org/licenses/LICENSE-2.0\n## Unless required by applicable law or agreed to in writing, software# distributed under the License is distributed on an \"AS IS\" BASIS,# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.# See the License for the specific language governing permissions and# limitations under the License.apiVersion: monitoring.googleapis.com/v1kind: PodMonitoringmetadata:\u00a0 namespace: gmp-system\u00a0 name: collector\u00a0 labels:\u00a0 \u00a0 app.kubernetes.io/name: collector\u00a0 \u00a0 app.kubernetes.io/part-of: google-cloud-managed-prometheusspec:\u00a0 selector:\u00a0 \u00a0 matchLabels:\u00a0 \u00a0 \u00a0 app.kubernetes.io/name: collector\u00a0 endpoints:\u00a0 - port: prom-metrics\u00a0 \u00a0 interval: 30s\u00a0 \u00a0 metricRelabeling:\u00a0 \u00a0 - sourceLabels: [__name__]\u00a0 \u00a0 \u00a0 regex: > \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 prometheus_target.*|prometheus_sd.*|net_conntrack_.*\u00a0 \u00a0 \u00a0 action: drop\u00a0 - port: cfg-rel-metrics\u00a0 \u00a0 interval: 30s---apiVersion: monitoring.googleapis.com/v1kind: PodMonitoringmetadata:\u00a0 namespace: gmp-system\u00a0 name: rule-evaluator\u00a0 labels:\u00a0 \u00a0 app.kubernetes.io/name: rule-evaluator\u00a0 \u00a0 app.kubernetes.io/part-of: google-cloud-managed-prometheusspec:\u00a0 selector:\u00a0 \u00a0 matchLabels:\u00a0 \u00a0 \u00a0 app.kubernetes.io/name: rule-evaluator\u00a0 endpoints:\u00a0 - port: r-eval-metrics\u00a0 \u00a0 interval: 30s\u00a0 - port: cfg-rel-metrics\u00a0 \u00a0 interval: 30s\n```\nYou can install manifests by copying them to a local file and then running `kubectl apply -f` `` . You can also [install manifests by using Terraform](/stackdriver/docs/managed-prometheus/setup-managed#terraform-scrape) .", "guide": "Google Cloud Observability"}