{"title": "Google Cloud Observability - Logging agent overview", "url": "https://cloud.google.com/stackdriver/docs/solutions/agents/logging", "abstract": "# Google Cloud Observability - Logging agent overview\n**This is a legacy agent.** While this agent is still supported, we recommend against using it for new Google Cloud workloads.Instead, we recommend that you use the [Ops Agent](/stackdriver/docs/solutions/agents/logging/../ops-agent) for new Google Cloud workloads and eventually transition your existing Compute Engine VMs to use the Ops Agent. The Ops Agent, which combines the collection of metrics and logging into a single agent, is the eventual replacement for the legacy agents.The Ops Agent is under active development, but there might be some use cases that it doesn't support. If the Ops Agent doesn't support your use case, then you can still use the Logging agent.There will be no new feature development or support for new operating systems for the legacy Logging agent.\nThis guide provides basic information about the Logging agent, an application based on [fluentd](https://www.fluentd.org/) that runs on your virtual machine (VM) instances.\nIn its default configuration, the Logging agent streams logs from common third-party applications and system software to Logging; review the list of [default logs](/logging/docs/agent/default-logs) . You can configure the agent to stream additional logs; go to [Configure theLogging agent](/stackdriver/docs/solutions/agents/logging/configuration) for details on agent configuration and operation.\nIt is a best practice to run the Logging agent on all your VM instances. The agent runs under both Linux and Windows.\nTo install the Logging agent, see [Installing the Logging agent](/stackdriver/docs/solutions/agents/logging/install-index) .\n", "content": "## Supported operating systems\nYou can run the Logging agent on the following operating systems on compatible virtual machine (VM) instances:\n- CentOS 7 and 8\n- Rocky Linux 8\n- Red Hat Enterprise Linux 7 and 8\n- Debian 9 \"Stretch\", 10 \"Buster\", and 11 \"Bullseye\"\n- Ubuntu LTS 20.04 (Focal Fossa)\n- Ubuntu Minimal LTS 20.04 (Focal Fossa)\n- SUSE Linux Enterprise Server 12 and 12 SP5 for SAP\n- SUSE Linux Enterprise Server 15, 15 SP2 for SAP, 15 S3 for SAP, 15 SP4 for SAP, and 15 SP5 for SAP\n- OpenSUSE Leap 15, 15.2, 15.3 and 15.4\n- Windows Server 2016, and 2019\n- Windows Server Core 2016, and 2019\n- Amazon Linux AMI (except Amazon Linux 2.0 AMI)\nIf you're running [Container-Optimized OS VMs](/container-optimized-os/docs/concepts/features-and-benefits) , then follow the [Container-Optimized OS instructions](/container-optimized-os/docs/how-to/logging) for collecting logs from your VMs.\n## Supported environments\nThe Logging agent is compatible with the following environments:\n- [Compute Engine](/compute) instances. The Logging agent sends the logs to the project associated with each VM instance.For instances without external IP addresses, you must [enable Private Google Access](/compute/docs/private-google-access/configure-private-google-access) to allow the Logging agent to send logs.\n- [Amazon Elastic Compute Cloud (Amazon EC2)](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/concepts.html) instances. The Logging agent sends the logs to the [AWS Connector project](/monitoring/settings/aws-accounts#connector-project) that links your AWS account to Google Cloud services. **Note:** Use of AWS CloudWatch metrics in Connector projects in Cloud Monitoring is [deprecated](/stackdriver/docs/deprecations) . As of **August 21, 2023** , you can no longer create AWS Connector projects. Existing AWS Connector projects will be supported until **August 21, 2024** . For more information about this change, see [Deprecation: AWS CloudWatch metrics in Connector projects](/stackdriver/docs/deprecations/aws-cloudwatch-metrics-ingestion) . **The legacy Monitoring agent and legacy Logging agent onAmazon Elastic Compute Cloud (Amazon EC2) are still supported and aren't beingdeprecated.** For the Logging agent to function correctly, the Amazon EC2 instance it runs on must be able to communicate with Google Cloud APIs, particularly the Logging API. This requires either an external IP address or a [VPC internet gateway](https://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_Internet_Gateway.html) .\n**Note:** The standard Logging agent isn't supported on on-premise machines. However, GKE on VMware comes with a version of the agent already installed and ready to use.\nFor these VM instances, a minimum of 250 MiB of resident (RSS) memory is required to run the Logging agent, but 1 GiB is recommended. For example, at a rate of 100 1-KB-sized log entries per second, the Logging agent with default configurations consumes 5% CPU on one core and 150 MiB memory.\nThe following VM instances support Logging using their own software, so manually installing the Logging agent on them is not supported:\n- [App Engine](/appengine) standard environment instances. App Engine includes built-in support for Logging. For more information, go to [Writing application logs](/appengine/docs/standard/python3/writing-application-logs) .\n- [App Engine](/appengine) flexible environment instances. Apps running in the App Engine flexible environment can write logs that are in addition to what is included in the App Engine standard environment. For more information, go to [Writing application logs](/appengine/docs/flexible/python/writing-application-logs) .\n- [Google Kubernetes Engine](/kubernetes-engine/docs) node instances. Log collection with Logging is enabled by default for new container clusters, or you can enable it for your existing clusters. For information, see [Configuring logging and monitoring for GKE](/stackdriver/docs/solutions/gke/installing) .\n- For instances running on [GKE on VMware](/gke-on-prem/docs) , the agent collects system logs but doesn't collect application logs.\n- [Cloud Run](/run/docs) container instances. Cloud Run includes built-in support for Logging. For more information, go to [Logging and viewing logs](/run/docs/logging) .\n- [Cloud Functions](/functions/docs) HTTP and background functions. Cloud Functions includes built-in support for Logging. For more information, go to [Writing, Viewing, and Responding toLogs](/functions/docs/monitoring/logging) .\n### Support for on-premise and hybrid clouds\nGoogle Cloud partners with [observIQ](https://www.observiq.com) to provide logging services for [on-premise and hybrid cloudplatforms](/logging/docs/bindplane/on-premise-hybrid-logging) in a consistent and predictable way. Using BindPlane, you can collect your own data and send it to Logging for analysis. [BindPlane](https://observiq.com/solutions/bindplane-comparison/) integrates with Cloud Logging to capture data from your infrastructure and is included with your project at no additional cost.\nFor more information about observIQ and BindPlane, see [About observIQ and BindPlane](/stackdriver/bindplane) .\n## Agent access requirements\nRunning the agent requires access to the following DNS names:\n- OAuth2 token server: `oauth2.googleapis.com`Older versions of the agent may require access to `www.googleapis.com` (full URL: `https://www.googleapis.com/oauth2/v3/token` ).If you're using an older version of the agent, it's recommended that you [upgrade your agent](/stackdriver/docs/solutions/agents/logging/installation#upgrade) to the latest version.\n- Logging APIs: `logging.googleapis.com`\nInstalling the agent requires access to the following DNS names:\n- (Linux) Google Cloud package repository: `packages.cloud.google.com`\n- Google download server: `dl.google.com`## Logging agent source code\nYou don't need the information in this section unless you want to understand the source code or you have other special needs. The Logging agent is installed by the script described in the [installation instructions](/stackdriver/docs/solutions/agents/logging/installation) .\nThe Logging agent, `google-fluentd` , is a modified version of the [fluentd](https://www.fluentd.org/) log data collector. `google-fluentd` is distributed in two separate packages. The source code is available from the associated GitHub repositories:\n- The GitHub repository named [google-fluentd](https://github.com/GoogleCloudPlatform/google-fluentd) which includes the core`fluentd`program, the custom packaging scripts, and the output plugin for the Cloud Logging API.- The output plugin is packaged as a Ruby gem and is included in the`google-fluentd`package. It is also available separately at the Ruby gem hosting service at [fluent-plugin-google-cloud](https://rubygems.org/gems/fluent-plugin-google-cloud) .\n- The content related to the Windows installer is found in the [windows-installer](https://github.com/GoogleCloudPlatform/google-fluentd/tree/master/windows-installer) folder.\n- The GitHub repository named [google-fluentd-catch-all-config](https://github.com/GoogleCloudPlatform/fluentd-catch-all-config) which includes the configuration files for the Logging agent for ingesting the logs from various third-party software packages.## Logging agent release notes\n- The release notes for the `google-fluentd` Linux package can be found at [google-fluentd/releases](https://github.com/GoogleCloudPlatform/google-fluentd/releases) , where the release tags follow the `[Major].[Minor].[Patch]` semantic versioning format.\n- The release notes for the Windows installers can be found at the same location: [google-fluentd/releases](https://github.com/GoogleCloudPlatform/google-fluentd/releases) . But the release tags are prefixed with `Windows` instead.\n- The release notes for the stand-alone gem `fluent-plugin-google-cloud` can be found at [fluent-plugin-google-cloud/releases](https://github.com/GoogleCloudPlatform/fluent-plugin-google-cloud/releases) , where the release tags follow the `[Major].[Minor].[Patch]` semantic versioning format.## Deprecation policy\nThe Logging agent is subject to the [Google Cloud Observability agentsdeprecation policy](/stackdriver/docs/agent-deprecation-policy) .\n## Next steps\n- [Installing the Logging agent](/stackdriver/docs/solutions/agents/logging/installation) \n- [Configure the Logging agent](/stackdriver/docs/solutions/agents/logging/configuration) \n- [Authorize the Logging agent](/stackdriver/docs/solutions/agents/logging/authorization) \n- [Upgrading the Logging agent](/stackdriver/docs/solutions/agents/logging/installation#upgrade) \n- After installing the agent, view your logs in the [Logs Explorer](/logging/docs/view/logs-explorer-interface) .", "guide": "Google Cloud Observability"}