{"title": "Google Cloud Observability - Configure the Monitoring agent", "url": "https://cloud.google.com/stackdriver/docs/solutions/agents/monitoring/configuration", "abstract": "# Google Cloud Observability - Configure the Monitoring agent\nThis page describes how to configure which built-in metrics the Monitoring agent collects from a Linux VM. The content on this page is intended for system administrators who want to modify the default configuration of the Monitoring agent.\nYou cannot configure the Monitoring agent when it is installed on a Windows VM.\nThis page doesn't describe how to configure the Monitoring agent to monitor third-party applications or how to use the agent to collect user-defined metrics. For information on those topics, see the following pages:\n- [Monitoring third party applications](/monitoring/agent/plugins) \n- [User-defined metrics from the agent](/monitoring/agent/custom-metrics-agent) ", "content": "## Before you begin\nIf you haven't installed the Monitoring agent on a VM, see [Install the Monitoring agent](/stackdriver/docs/solutions/agents/monitoring/installation#joint-install) .\n## Changing the default Monitoring agent configuration\nTo change the configuration of the Monitoring agent, do the following:\n- Edit the Monitoring agent configuration file `/etc/stackdriver/collectd.conf` .\n- Restart the Monitoring agent by running the following command:\n```\n\u00a0 \u00a0 \u00a0 \u00a0sudo service stackdriver-agent restart\n```\n## Stopping the collection of process metrics\nFor information about how to stop the collection of process metrics\u2014the metrics with the prefix `agent.googleapis.com/processes` \u2014see [Disabling process metrics on Linux VMs](/monitoring/agent/process-metrics#disable-on-linux) .\n## Configuring reported CPU metrics\nBy default, the Monitoring agent reports the total CPU utilization by state for all CPUs on the VM by using the [agent.googleapis.com/cpu/utilization](/monitoring/api/metrics_agent#cpu/utilization) metric type. This behavior is specified in the configuration file by the following settings:\n- `ValuesPercentage true`\n- `ReportByCpu false`\nYou must modify these settings if you want the agent to report the utilization per CPU, or if you want it to report CPU usage time, [agent.googleapis.com/cpu/usage_time](/monitoring/api/metrics_agent#cpu/usage_time) , metrics:\n- To configure the Monitoring agent to report the [agent.googleapis.com/cpu/utilization](/monitoring/api/metrics_agent#cpu/utilization) per CPU, do the following:- Leave`ValuesPercentage`at the default value of`true`.\n- Set`ReportByCpu`to`true`.\n- To configure the Monitoring agent to report the [agent.googleapis.com/cpu/usage_time](/monitoring/api/metrics_agent#cpu/usage_time) per CPU, do the following:- Set`ValuesPercentage`to`false`.\n- Set`ReportByCpu`to`true`.The Monitoring agent can either report the CPU utilization or the CPU usage, but not both metrics. This is a known limitation of [collectd](https://collectd.org/wiki/index.php/Main_Page) . When `ReportByCpu` is `true` , the `ValuesPercentage` field determines if the utilization or usage is reported. When `ReportByCpu` is `false` , the agent reports the CPU utilization.\n## Troubleshooting\nIf you're having trouble installing or running the agent, see [Troubleshooting agent installation](/stackdriver/docs/solutions/agents/monitoring/troubleshooting) .", "guide": "Google Cloud Observability"}