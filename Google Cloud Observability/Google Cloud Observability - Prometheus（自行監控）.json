{"title": "Google Cloud Observability - Prometheus\uff08\u81ea\u884c\u76e3\u63a7\uff09", "url": "https://cloud.google.com/stackdriver/docs/managed-prometheus/exporters/prometheus?hl=zh-cn", "abstract": "# Google Cloud Observability - Prometheus\uff08\u81ea\u884c\u76e3\u63a7\uff09\n\u5982\u9700\u5f9e Managed Service for Prometheus \u6ce8\u5165 Prometheus \u81ea\u884c\u76e3\u63a7\u6307\u6a19\uff0c\u8acb\u61c9\u7528\u4ee5\u4e0b PodMonitoring \u6e05\u55ae\uff1a\n[\u5728 GitHub \u4e0a\u67e5\u770b](https://github.com/GoogleCloudPlatform/prometheus-engine/blob/HEAD/examples/self-pod-monitoring.yaml)\n```\n# Copyright 2022 Google LLC\n", "content": "## Licensed under the Apache License, Version 2.0 (the \"License\");# you may not use this file except in compliance with the License.# You may obtain a copy of the License at\n## \u00a0 \u00a0 https://www.apache.org/licenses/LICENSE-2.0\n## Unless required by applicable law or agreed to in writing, software# distributed under the License is distributed on an \"AS IS\" BASIS,# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.# See the License for the specific language governing permissions and# limitations under the License.apiVersion: monitoring.googleapis.com/v1kind: PodMonitoringmetadata:\u00a0 namespace: gmp-system\u00a0 name: collector\u00a0 labels:\u00a0 \u00a0 app.kubernetes.io/name: collector\u00a0 \u00a0 app.kubernetes.io/part-of: google-cloud-managed-prometheusspec:\u00a0 selector:\u00a0 \u00a0 matchLabels:\u00a0 \u00a0 \u00a0 app.kubernetes.io/name: collector\u00a0 endpoints:\u00a0 - port: prom-metrics\u00a0 \u00a0 interval: 30s\u00a0 \u00a0 metricRelabeling:\u00a0 \u00a0 - sourceLabels: [__name__]\u00a0 \u00a0 \u00a0 regex: >\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 prometheus_target.*|prometheus_sd.*|net_conntrack_.*\u00a0 \u00a0 \u00a0 action: drop\u00a0 - port: cfg-rel-metrics\u00a0 \u00a0 interval: 30s---apiVersion: monitoring.googleapis.com/v1kind: PodMonitoringmetadata:\u00a0 namespace: gmp-system\u00a0 name: rule-evaluator\u00a0 labels:\u00a0 \u00a0 app.kubernetes.io/name: rule-evaluator\u00a0 \u00a0 app.kubernetes.io/part-of: google-cloud-managed-prometheusspec:\u00a0 selector:\u00a0 \u00a0 matchLabels:\u00a0 \u00a0 \u00a0 app.kubernetes.io/name: rule-evaluator\u00a0 endpoints:\u00a0 - port: r-eval-metrics\u00a0 \u00a0 interval: 30s\u00a0 - port: cfg-rel-metrics\u00a0 \u00a0 interval: 30s\n```\n\u5982\u9700\u5b89\u88dd\u6e05\u55ae\uff0c\u60a8\u53ef\u4ee5\u5c07\u6e05\u55ae\u8907\u88fd\u5230\u672c\u5730\u6587\u4ef6\uff0c\u7136\u5f8c\u904b\u884c `kubectl apply -f` `` \u3002\u60a8\u9084\u53ef\u4ee5 [\u4f7f\u7528 Terraform \u5b89\u88dd\u6e05\u55ae](https://cloud.google.com/stackdriver/docs/managed-prometheus/setup-managed?hl=zh-cn#terraform-scrape) \u3002", "guide": "Google Cloud Observability"}