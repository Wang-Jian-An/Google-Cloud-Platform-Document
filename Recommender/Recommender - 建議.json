{"title": "Recommender - \u5efa\u8b70", "url": "https://cloud.google.com/recommender/docs/key-concepts?hl=zh-cn", "abstract": "# Recommender - \u5efa\u8b70\n# \u5efa\u8b70\n", "content": "## Recommender\nRecommender \u662f Google Cloud \u4e2d\u7684\u4e00\u9805\u670d\u52d9\uff0c\u53ef\u7232 Google Cloud \u7522\u54c1\u548c\u8cc7\u6e90\u63d0\u4f9b\u512a\u5316\u5efa\u8b70\u3002\n\u6bcf\u500b Recommender \u90fd\u6709\u4e00\u500b\u552f\u4e00\u7684 Recommender ID\uff0c\u7528\u65bc\u6a19\u8b58\u670d\u52d9\u3002\u60a8\u53ef\u5728\u4f7f\u7528 Recommender [gcloud](https://cloud.google.com/sdk/gcloud/reference/recommender?hl=zh-cn) \u547d\u4ee4\u3001 [REST](https://cloud.google.com/recommender/docs/reference/rest?hl=zh-cn) \u6216 [RPC](https://cloud.google.com/recommender/docs/reference/rpc?hl=zh-cn) API \u8207\u5efa\u8b70\u9032\u884c\u4ea4\u4e92\u6642\u4f7f\u7528 Recommender ID\u3002\n\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [Recommender](https://cloud.google.com/recommender/docs/recommenders?hl=zh-cn) \u3002\n## \u5efa\u8b70\n\u6a5f\u5668\u751f\u6210\u7684\u5efa\u8b70 \uff0c\u53ef\u7528\u65bc\u512a\u5316 Cloud \u8cc7\u6e90\u7684\u4f7f\u7528\u60c5\u6cc1\u3002\u5176\u4e2d\u5305\u62ec\u5c0d\u5efa\u8b70\u63a1\u53d6\u63aa\u65bd\u6240\u9700\u7684\u6b65\u9a5f\u3002Recommender \u4f7f\u7528\u6a5f\u5668\u5b78\u7fd2\u6216\u5553\u767c\u6cd5\uff0c\u6839\u64da\u8cc7\u6e90\u4f7f\u7528\u60c5\u6cc1\u63d0\u4f9b\u5efa\u8b70\u3002Recommender \u4f7f\u7528 [Recommendation](https://cloud.google.com/recommender/docs/reference/rest/v1/projects.locations.recommenders.recommendations?hl=zh-cn#resource-recommendation) \u5be6\u9ad4\u5b58\u5132\u5efa\u8b70\u3002\n\u5efa\u8b70\u9700\u5177\u6709\u4ee5\u4e0b\u6838\u5fc3\u7279\u6027\uff1a\n- [\u540d\u7a31](#name) \n- [\u8aaa\u660e](#description) \n- [Recommender \u5b50\u985e\u578b](#recommender_subtype) \n- [\u5f71\u97ff](#recommender_impact) \n- [\u64cd\u4f5c](#operation) \n- [\u64cd\u4f5c\u7d44](#operation_groups) \n- [\u72c0\u614b\u4fe1\u606f](#state) \n- [etag](#etag) \n- [\u512a\u5148\u7d1a](#priority) \n- [\u72c0\u614b\u5143\u6578\u64da](#state_metadata) \n- [\u4e0a\u6b21\u5237\u65b0\u6642\u9593](#last_refresh_time) \n- [\u6578\u64da\u5206\u6790\u53c3\u8003\u6587\u6a94](#insight_reference) \n- [\u914d\u7f6e](#configuration) \n### \u540d\u7a31\n\u5efa\u8b70\u540d\u7a31\u5b58\u5132\u5728 `Recommendation` \u5be6\u9ad4\u7684 `name` \u5b57\u6bb5\u4e2d\u3002\u8a72\u5efa\u8b70\u7684\u540d\u7a31\u63a1\u7528\u4ee5\u4e0b\u683c\u5f0f\uff1a\n```\nprojects/TARGET_PROJECT_ID/locations/LOCATION/recommenders/RECOMMENDER_ID/recommendations/RECOMMENDATION_ID\n```\n\u5176\u4e2d\uff1a\n- \u662f\u63d0\u51fa\u5efa\u8b70\u7684\u9805\u76ee\u7684 ID\u3002\n- \u662f\u8207\u5efa\u8b70\u95dc\u806f\u7684\u8cc7\u6e90\u6240\u5728\u7684 Google Cloud [\u4f4d\u7f6e](https://cloud.google.com/compute/docs/regions-zones?hl=zh-cn) \uff08\u4f8b\u5982`global`\u6216`us-central1-a`\uff09\n- \u662f\u5b8c\u5168\u9650\u5b9a\u7684 [Recommender ID](https://cloud.google.com/recommender/docs/recommenders?hl=zh-cn#recommenders) \uff08\u4f8b\u5982`google.compute.instance.MachineTypeRecommender`\uff09\u3002\n- \u662f\u6578\u64da\u5206\u6790\u7684\u552f\u4e00 ID\u3002\n### \u8aaa\u660e\n\u5efa\u8b70\u8aaa\u660e\u5b58\u5132\u5728 `Recommendation` \u5be6\u9ad4\u7684 `description` \u5b57\u6bb5\u4e2d\u3002\u76ee\u524d\u50c5\u6709\u82f1\u6587\u7248\u3002\u9019\u662f\u63cf\u8ff0\u5efa\u8b70\u7684\u53ef\u8b80\u6027\u6587\u672c\u3002\u5728 Google Cloud Console \u4e2d\uff0c\u9ede\u64ca\u67e5\u770b\u5176\u4ed6\u5efa\u8b70\u8a73\u7d30\u4fe1\u606f\u6642\u6703\u986f\u793a\u8aaa\u660e\u3002\n### Recommender \u5b50\u985e\u578b\nRecommender \u53ef\u4ee5\u7232\u7279\u5b9a\u7a2e\u985e\u7684\u5efa\u8b70\u63d0\u4f9b\u5b50\u985e\u578b\u3002\u4f8b\u5982\uff0cIdentity and Access Management \u89d2\u8272 Recommender \u5177\u6709\u5b50\u985e\u578b `REPLACE_ROLE` \u548c `REMOVE_ROLE` \u3002\u96a8\u7740\u6642\u9593\u7684\u63a8\u79fb\uff0c\u65b0\u7684\u5b50\u985e\u578b\u53ef\u80fd\u6703\u5f15\u5165\u73fe\u6709 Recommender\u3002\u6b64 [\u6982\u89bd](https://cloud.google.com/recommender/docs/recommenders?hl=zh-cn) \u63d0\u4f9b\u4e86\u6240\u6709\u53ef\u7528 Recommender \u7684\u5217\u8868\u3002\u5982\u9700\u8a73\u7d30\u77ad\u89e3\u53ef\u7528\u7684\u5efa\u8b70\u5b50\u985e\u578b\uff0c\u8acb\u53c3\u95b1 Recommender \u6587\u6a94\u3002\n### Recommender \u5f71\u97ff\n\u5f71\u97ff\u53ef\u4ee5\u91cf\u5316\u57f7\u884c\u63a8\u85a6\u64cd\u4f5c\u7684\u9810\u8a08\u512a\u52e2\u3002\u6bcf\u689d\u5efa\u8b70\u90fd\u6709\u4ee5\u4e0b\u985e\u578b\u7684\u5f71\u97ff\uff0c\u8868\u793a\u56e0\u61c9\u7528\u5efa\u8b70\u800c\u53ef\u80fd\u7522\u751f\u7684\u7d50\u679c\uff1a\n- \u4e3b\u8981\u5f71\u97ff\u662f\u5fc5\u9700\u7684\uff0c\u5b58\u5132\u5728 `Recommendation` \u5be6\u9ad4\u7684 `primaryImpact` \u5b57\u6bb5\u4e2d\u3002\n- \u6b21\u8981\u5f71\u97ff\u662f\u53ef\u9078\u7684\uff0c\u5b58\u5132\u5728 `additionalImpact` \u5b57\u6bb5\u4e2d\u3002\n\u4e3b\u8981\u548c\u6b21\u8981\u5f71\u97ff\u5982\u4e0b\uff1a\n- **COST** \uff1a\u5982\u679c\u60a8\u61c9\u7528\u7d66\u5b9a\u5efa\u8b70\uff0c\u60a8\u9810\u8a08\u53ef\u4ee5\u7bc0\u7701\uff08\u6216\u7522\u751f\uff09\u7684\u91d1\u984d\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [CostProjection](https://cloud.google.com/recommender/docs/reference/rest/v1beta1/billingAccounts.locations.recommenders.recommendations?hl=zh-cn#costprojection) \u4e0b\u7684 `cost` \u5b57\u6bb5\u3002\n- **PERFORMANCE** \uff1a\u9810\u4f30\u6027\u80fd\u589e\u52a0\u6216\u6e1b\u5c11\u3002\u8acb\u6ce8\u610f\uff0c\u67d0\u4e9b\u6027\u80fd\u5efa\u8b70\u53ef\u80fd\u6703\u7522\u751f\u984d\u5916\u8cbb\u7528\uff08\u4f8b\u5982\uff0c\u5982\u679c\u5efa\u8b70\u5728\u904e\u5ea6\u4f7f\u7528\u7684\u865b\u64ec\u6a5f\u4e0a\u589e\u52a0 CPU \u6216\u5167\u5b58\u5206\u914d\uff09\u3002\n- **SECURITY** \uff1a\u9810\u4f30\u5b89\u5168\u72c0\u6cc1\u63d0\u5347\u3002\u5982\u4e0b\u4e86\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [SecurityProjection](https://cloud.google.com/recommender/docs/reference/rest/v1beta1/billingAccounts.locations.recommenders.recommendations?hl=zh-cn#costprojection) \u4e0b\u7684 `details` \u5b57\u6bb5\u3002\n- **MANAGEABILITY** \uff1a\u9810\u4f30\u8cbb\u529b\u7684\u624b\u52d5\u64cd\u4f5c\u6e1b\u5c11\u3002\n- **SUSTAINABILITY** \uff1a\u9810\u4f30\u78b3\u6392\u653e\u91cf\u6e1b\u5c11\u3002\u5982\u9700\u77ad\u89e3\u8a73\u60c5\uff0c\u8acb\u53c3\u95b1 [SustainabilityProjection](https://cloud.google.com/recommender/docs/reference/rest/v1beta1/billingAccounts.locations.recommenders.recommendations?hl=zh-cn#sustainabilityprojection) \u548c [\u78b3\u8db3\u8de1\u5831\u544a\u65b9\u6cd5](https://cloud.google.com/carbon-footprint/docs/methodology?hl=zh-cn) \u4e0b\u7684 `carbon_footprint_kg_co2` \u5b57\u6bb5\u3002\n### \u64cd\u4f5c\n[Operation](https://cloud.google.com/recommender/docs/reference/rest/v1/projects.locations.recommenders.recommendations?hl=zh-cn#operation) \u662f\u63a8\u85a6\u7684\u5efa\u8b70\u4e2d\u5fc5\u9808\u4f5c\u7232\u539f\u5b50\u6b65\u9a5f\u4e4b\u4e00\u57f7\u884c\u7684\u55ae\u500b\u64cd\u4f5c\u3002\u64cd\u4f5c\u53ef\u4ee5\u8868\u793a\u4ee5\u4e0b\u66f4\u6539\uff1a\n- \u5728 Google Cloud \u8cc7\u6e90\u4e2d\u6dfb\u52a0\u3001\u79fb\u9664\u6216\u66ff\u63db JSON \u5c0d\u8c61\u5b57\u6bb5\u3002\n- \u5728 Google Cloud \u8cc7\u6e90\u4e2d\u6dfb\u52a0\u3001\u79fb\u9664\u6216\u66ff\u63db JSON \u6578\u7d44\u5b57\u6bb5\u3002\u901a\u904e\u5728\u8def\u5f91\u4e0a\u5b9a\u7fa9\u904e\u6ffe\u5668\u4f86\u6a19\u8b58 JSON \u6578\u7d44\u5143\u7d20\u3002\n- \u6dfb\u52a0\u65b0\u7684 Google Cloud \u8cc7\u6e90\u3002\n- \u522a\u9664 Google Cloud \u8cc7\u6e90\u3002\n- \u6e2c\u8a66\u64cd\u4f5c\u53ef\u6307\u793a\u8cc7\u6e90\u7684\u539f\u59cb\u72c0\u614b\u3002\u6e2c\u8a66\u64cd\u4f5c\u9084\u53ef\u5728\u63a1\u7d0d\u5efa\u8b70\u4e4b\u524d\u9a57\u8b49\u8cc7\u6e90\u7684\u7576\u524d\u72c0\u614b\u3002\n- \u8907\u88fd\u548c\u79fb\u52d5 Google Cloud \u8cc7\u6e90\u548c\u5b57\u6bb5\u3002\n\u6bcf\u500b `Operation` \u90fd\u57fa\u65bc\u88dc\u4e01\u7a0b\u5e8f\u7684 [JSON \u8def\u5f91 (RFC 6902)](https://tools.ietf.org/html/rfc6902) \u683c\u5f0f\u3002\u6211\u5011\u4e4b\u6240\u4ee5\u9078\u64c7\u6b64 RFC\uff0c\u662f\u56e0\u7232\u5b83\u63d0\u4f9b\u4e86\u4e00\u7a2e\u66f4\u4e00\u81f4\u7684\u65b9\u6cd5\u4f86\u53cd\u6620\u5305\u62ec Google Cloud \u4e2d\u5e38\u898b\u8986\u96dc\u5834\u666f\u7684\u8cc7\u6e90\u66f4\u6539\u3002\u4f8b\u5982\uff0cIAM \u5efa\u8b70\u7684\u5d4c\u5957\u6578\u7d44\u53ef\u4ee5\u53cd\u6620\u5c07\u4e3b\u8cec\u865f\u7684\u89d2\u8272\u7d81\u5b9a\u79fb\u52d5\u5230\u5176\u4ed6\u89d2\u8272\u7684\u904e\u7a0b\u3002\n\u6bcf\u7a2e\u8cc7\u6e90\u7684\u66f4\u6539\u5217\u8868\uff08\u57fa\u65bc\u5dee\u7570\u8996\u5716\uff09\u5747\u53ef\u901a\u904e\u4ee5\u4e0b\u65b9\u5f0f\u751f\u6210\uff1a\n- **\u539f\u59cb\u72c0\u614b** \uff1a\u6e2c\u8a66\u64cd\u4f5c\u8868\u793a\u5b57\u6bb5\u7684\u539f\u59cb\u503c\u3002\u539f\u59cb\u72c0\u614b\u8868\u793a\u5dee\u7570\u8996\u5716\u7684\u5de6\u5074\u3002\n- **\u63a8\u85a6\u7684\u72c0\u614b** \uff1a\u975e\u6e2c\u8a66\u64cd\u4f5c\u8868\u793a\u6bcf\u500b\u5b57\u6bb5\u63a8\u85a6\u7684\u66f4\u6539\u3002\u63a8\u85a6\u7684\u72c0\u614b\u8868\u793a\u5dee\u7570\u8996\u5716\u7684\u53f3\u5074\u3002\n### \u64cd\u4f5c\u7d44\n\u201c\u64cd\u4f5c\u7d44\u201d\u662f\u5728\u63a1\u7d0d\u5efa\u8b70\u6642\uff0c\u5fc5\u9808\u6309\u7279\u5b9a\u9806\u5e8f\u57f7\u884c\u7684\u4e00\u500b\u6216\u591a\u500b\u64cd\u4f5c\uff0c\u3002\u6bcf\u500b\u5efa\u8b70\u53ef\u4ee5\u5305\u542b\u4e00\u500b\u6216\u591a\u500b\u64cd\u4f5c\u7d44\u3002\u64cd\u4f5c\u7d44\u5b58\u5132\u5728 `Recommendation` \u5be6\u9ad4\u7684 `operationGroups` \u5b57\u6bb5\u4e2d\u3002\n\u4f8b\u5982\uff0c\u5efa\u8b70\u7232 Compute Engine \u5be6\u4f8b\u7d44\u66f4\u6539\u865b\u64ec\u6a5f\u5be6\u4f8b\u6a5f\u5668\u985e\u578b\u7684\u5efa\u8b70\u6709\u5169\u500b\u64cd\u4f5c\u7d44\uff1a\u4e00\u500b\u7528\u65bc\u66f4\u6539\u5be6\u4f8b\u6a21\u677f\u4e2d\u7684\u6a5f\u5668\u985e\u578b\uff0c\u53e6\u4e00\u500b\u7528\u65bc\u5c07\u66f4\u6539\u61c9\u7528\u65bc\u7279\u5b9a\u5be6\u4f8b\u7d44\u3002\n\u56e0\u7232\u7b2c\u4e00\u7d44\u64cd\u4f5c\u5fc5\u9808\u5728\u5553\u52d5\u7b2c\u4e8c\u7d44\u64cd\u4f5c\u4e4b\u524d\u5b8c\u6210\uff0c\u6240\u4ee5\u5728\u5efa\u8b70\u4e2d\u5c07\u5b83\u5011\u5b9a\u7fa9\u7232\u5169\u500b\u55ae\u7368\u7684\u5be6\u4f8b\u7d44\u3002\n\u64cd\u4f5c\u7d44\u53ef\u5305\u542b\u6e2c\u8a66 \u64cd\u4f5c\u3002\u6e2c\u8a66\u64cd\u4f5c\u6703\u57f7\u884c\u6aa2\u67e5\uff0c\u4ee5\u78ba\u4fdd\u5efa\u8b70\u4ecd\u7136\u6709\u6548\u3002\u5efa\u8b70\u66f4\u6539\u865b\u64ec\u6a5f\u5be6\u4f8b\u7684\u6a5f\u5668\u985e\u578b\u7684\u5efa\u8b70\u6709\u4e00\u9805\u6e2c\u8a66\u64cd\u4f5c\uff0c\u7528\u65bc\u6aa2\u67e5\u7576\u524d\u6a5f\u5668\u985e\u578b\u662f\u5426\u8207\u63d0\u51fa\u5efa\u8b70\u6642\u76f8\u540c\u3002\n### \u5dde\n\u9019\u4e9b\u5efa\u8b70\u5728\u63d0\u51fa\u5f8c\u6703\u7d93\u6b77\u8a31\u591a\u72c0\u614b\u8f49\u63db\u3002\u5efa\u8b70\u53ef\u5177\u6709\u4ee5\u4e0b\u72c0\u614b\uff1a\n- `ACTIVE`\u8868\u793a\u5df2\u63d0\u51fa\u5efa\u8b70\uff0c\u4f46\u5c1a\u672a\u5c0d\u8a72\u5efa\u8b70\u57f7\u884c\u4efb\u4f55\u97ff\u61c9\u64cd\u4f5c\u3002\u53ef\u901a\u904e\u8072\u660e\u5efa\u8b70\u4f86\u63a1\u7d0d\u8a72\u5efa\u8b70\u3002\u5728\u8cc7\u6e90\u66f4\u6539\u6642\u53ef\u66f4\u65b0\u6709\u6548\u5efa\u8b70\u3002\n- `CLAIMED`\u8868\u793a\u60a8\u6216\u5176\u4ed6\u9032\u7a0b\u5df2\u4f54\u7528\u8a72\u5efa\u8b70\uff0c\u4e26\u4e14\u6b63\u5728\u97ff\u61c9\u8a72\u5efa\u8b70\u3002\u4f54\u7528\u5efa\u8b70\u5f8c\uff0cRecommender \u4e0d\u6703\u5728\u8cc7\u6e90\u66f4\u6539\u6642\u5c0d\u5176\u9032\u884c\u66f4\u65b0\u3002\n- `SUCCEEDED`\u8868\u793a\u60a8\u6216\u5176\u4ed6\u9032\u7a0b\u5df2\u5c0d\u95dc\u806f\u8cc7\u6e90\u61c9\u7528\u8a72\u5efa\u8b70\u3002\n- `FAILED`\u8868\u793a\u5617\u8a66\u61c9\u7528\u8a72\u5efa\u8b70\u5931\u6557\u3002\n- `DISMISSED`\u8868\u793a\u60a8\u6216\u5176\u4ed6\u9032\u7a0b\u5ffd\u7565\u4e86\u672a\u61c9\u7528\u65bc\u95dc\u806f\u8cc7\u6e90\u7684\u5efa\u8b70\u3002\u6b64\u72c0\u614b\u7684\u5efa\u8b70\u7121\u6cd5\u5728\u5efa\u8b70\u5217\u8868\u4e2d\u986f\u793a\uff0c\u4e26\u4e14\u901a\u5e38\u7531\u56e0\u591a\u7a2e\u539f\u56e0\u4ee4\u5176\u7121\u6548\u7684\u7ba1\u7406\u54e1\u61c9\u7528\u3002\u8a72\u5efa\u8b70\u72c0\u614b\u7121\u6cd5\u66f4\u6539\u7232`CLAIMED`\u72c0\u614b\u3002\n\u5efa\u8b70\u7684\u72c0\u614b\u4fe1\u606f\u5b58\u5132\u5728 `Recommendation` \u5be6\u9ad4\u7684 `stateInfo` \u5b57\u6bb5\u4e2d\u3002\u5176\u4e2d\u5305\u62ec\u5efa\u8b70\u7684\u72c0\u614b\u672c\u8eab\u4ee5\u53ca\u5176\u4ed6\u5efa\u8b70\u7684\u6bcf\u500b Recommender \u72c0\u614b\u5143\u6578\u64da\u3002\n\u5982\u679c\u5c07\u5efa\u8b70\u66f4\u6539\u7232 `CLAIMED` \u3001 `SUCCEEDED` \u6216 `FAILED` \u72c0\u614b\uff0c\u5247\u5efa\u8b70\u7684\u5167\u5bb9\u4e0d\u6703\u66f4\u65b0\uff0c\u4e26\u4e14\u5efa\u8b70\u7684\u6709\u6548\u671f\u662f\u81ea\u72c0\u614b\u66f4\u6539\u4e4b\u65e5\u8d77\u7684 90 \u5929\u3002\n**\u6ce8\u610f** \uff1a\u60a8\u7121\u6cd5\u5728 API \u4e2d\u5ffd\u7565\u5efa\u8b70\u6216\u5c07\u5efa\u8b70\u72c0\u614b\u66f4\u6539\u7232\u6709\u6548\u3002\u55ae\u500b Recommender \u63d0\u4f9b\u4e86\u5728 Google Cloud Console \u4e2d\u8a2d\u7f6e\u9019\u4e9b\u72c0\u614b\u7684\u9078\u9805\u3002\n### etag\nEtag \u662f\u7528\u65bc\u6a19\u8b58\u5efa\u8b70\u7576\u524d\u72c0\u614b\u7684\u552f\u4e00\u6307\u7d0b\u3002\u6bcf\u6b21\u5efa\u8b70\u66f4\u6539\u6642\uff0c\u7cfb\u7d71\u90fd\u6703\u5206\u914d\u4e00\u500b\u65b0\u7684 ETag \u503c\u3002\u6b64\u503c\u5b58\u5132\u5728 `Recommender` \u5be6\u9ad4\u7684 `etag` \u5b57\u6bb5\u4e2d\u3002\n\u4f7f\u7528 `gcloud` \u547d\u4ee4\u6216 API \u8abf\u7528\u5f9e Recommender \u6aa2\u7d22\u5efa\u8b70\u5f8c\uff0c\u60a8\u53ef\u5728\u5f8c\u7e8c\u64cd\u4f5c\u4e2d\u4f7f\u7528\u5efa\u8b70 ID \u548c Etag \u5c0d\u5176\u9032\u884c\u5f15\u7528\u3002\u8a72\u64cd\u4f5c\u53ef\u78ba\u4fdd\u50c5\u5728\u4e0a\u6b21\u6aa2\u7d22\u5efa\u8b70\u5f8c\u6c92\u6709\u4efb\u4f55\u66f4\u6539\u7684\u60c5\u6cc1\u4e0b\u57f7\u884c\u6240\u6709\u64cd\u4f5c\u3002\n### \u512a\u5148\u7d1a\n\u5efa\u8b70\u7684 [\u512a\u5148\u7d1a](https://cloud.google.com/recommender/docs/reference/rest/v1/billingAccounts.locations.recommenders.recommendations?hl=zh-cn#priority) \u6709\u52a9\u65bc\u6307\u793a\u5fc5\u9808\u5148\u57f7\u884c\u7684\u64cd\u4f5c\u3002\u6b64\u5b57\u6bb5\u9644\u5e36\u503c `P1` \u3001 `P2` \u3001 `P3` \u548c `P4` \uff0c\u4e26\u5c07 `P4` \u8a2d\u7f6e\u7232\u9ed8\u8a8d\u512a\u5148\u7d1a\u3002\u6bcf\u500b [Recommender](https://cloud.google.com/recommender/docs/recommenders?hl=zh-cn) \u90fd\u53ef\u4ee5\u5b9a\u7fa9\u81ea\u5df1\u7684\u512a\u5148\u7d1a\u7b56\u7565\u3002\n### \u72c0\u614b\u5143\u6578\u64da\n\u7576\u60a8\u8072\u660e\u5efa\u8b70\u6216\u5c07\u5176\u6a19\u8a18\u7232\u6210\u529f\u6216\u5931\u6557\u6642\uff0c\u53ef\u4ee5\u6dfb\u52a0\u6709\u95dc\u72c0\u614b\u5143\u6578\u64da\u64cd\u4f5c\u7684\u5176\u4ed6\u5143\u6578\u64da\u3002\n\u5143\u6578\u64da\u4ee5 `key:value` \u5c0d\u5f62\u5f0f\u6307\u5b9a\u3002\u4f8b\u5982\uff1a\n```\n{\u00a0 \"stateMetadata\": {\u00a0 \u00a0 \"priority\" : \"high\",\u00a0 \u00a0 \"tracking_number\": \"12345\" }}\n```\n\u5c0d `stateMetadata` \u5b57\u6bb5\u7684\u66f4\u65b0\u5c07\u8986\u84cb\u73fe\u6709\u72c0\u614b\u5143\u6578\u64da\u3002\n### \u4e0a\u6b21\u5237\u65b0\u6642\u9593\n\u4e0a\u6b21\u5237\u65b0\u6642\u9593\u8868\u793a\u751f\u6210\u904e\u7a0b\u4e0a\u6b21\u5237\u65b0\u5efa\u8b70\u7684\u6642\u9593\u3002\u5efa\u8b70\u7684\u5167\u5bb9\u53cd\u6620\u4e86\u4e0a\u6b21\u5237\u65b0\u6642\u8cc7\u6e90\u7684\u72c0\u614b\u3002\n### \u793a\u4f8b\n\u4ee5\u4e0b\u793a\u4f8b\u986f\u793a\u4e86 Compute Engine \u4e2d\u865b\u64ec\u6a5f\u5be6\u4f8b\u7684\u5bb9\u91cf\u5efa\u8b70\u3002\n```\n{\u00a0 \"content\": {\u00a0 \u00a0 \"operationGroups\": [\u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \"operations\": [\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"action\": \"test\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"path\": \"/machineType\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"resource\": \"//compute.googleapis.com/projects/example-project/zones/us-central1-a/instances/instance-rightsizing-2\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"resourceType\": \"compute.googleapis.com/Instance\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"valueMatcher\": {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"matchesPattern\": \".*zones/us-central1-a/machineTypes/n1-standard-4\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 {\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"action\": \"replace\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"path\": \"/machineType\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"resource\": \"//compute.googleapis.com/projects/example-project/zones/us-central1-a/instances/instance-rightsizing-2\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"resourceType\": \"compute.googleapis.com/Instance\",\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"value\": \"zones/us-central1-a/machineTypes/custom-2-5120\"\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 \u00a0 \u00a0 ]\u00a0 \u00a0 \u00a0 }\u00a0 \u00a0 ]\u00a0 },\u00a0 \"description\": \"Save cost by changing machine type from n1-standard-4 to custom-2-5120.\",\u00a0 \"etag\": \"\\\"923daeebe926c12f\\\"\",\u00a0 \"recommenderSubtype\": \"CHANGE_MACHINE_TYPE\",\u00a0 \"lastRefreshTime\": \"2019-06-13T06:44:58Z\",\u00a0 \"name\": \"projects/32428390823/locations/us-central1-a/recommenders/google.compute.instance.MachineTypeRecommender/recommendations/a523ff7e-ed03-4143-a3a5-5b396b99cba9\",\u00a0 \"primaryImpact\": {\u00a0 \u00a0 \"category\": \"COST\",\u00a0 \u00a0 \"costProjection\": {\u00a0 \u00a0 \u00a0 \"cost\": {\u00a0 \u00a0 \u00a0 \u00a0 \"currencyCode\": \"USD\",\u00a0 \u00a0 \u00a0 \u00a0 \"units\": \"-73\"\u00a0 \u00a0 \u00a0 },\u00a0 \u00a0 \u00a0 \"duration\": \"2592000s\"\u00a0 \u00a0 }\u00a0 },\u00a0 \"stateInfo\": {\u00a0 \u00a0 \"state\": \"ACTIVE\"\u00a0 }}\n```\n\u5982\u9700\u67e5\u770b\u66f4\u591a\u5efa\u8b70\u793a\u4f8b\uff0c\u8acb\u53c3\u95b1 [Recommender](https://cloud.google.com/recommender/docs/recommenders?hl=zh-cn) \u4e2d\u5404\u500b Recommender \u6587\u6a94\u3002\n### \u6578\u64da\u5206\u6790\u53c3\u8003\u6587\u6a94\n\u5c0d\u95dc\u806f [\u6578\u64da\u5206\u6790](https://cloud.google.com/recommender/docs/insights/using-insights?hl=zh-cn#insights) \u7684\u5f15\u7528\u3002\u5f15\u7528\u53ef\u5c07\u5efa\u8b70\u8207\u5176\u95dc\u806f\u7684\u6578\u64da\u5206\u6790\uff08\u5982\u679c\u6709\uff09\u95dc\u806f\u8d77\u4f86\u3002\n### \u914d\u7f6e\n\u901a\u904e Recommender \u914d\u7f6e\uff0c\u60a8\u53ef\u4ee5\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a\n- \u81ea\u5b9a\u7fa9\u6578\u64da\u5206\u6790\u548c\u5efa\u8b70\u7684\u751f\u6210\u65b9\u5f0f\u3002\u901a\u904e\u4fee\u6539\u7528\u65bc\u751f\u6210\u9019\u4e9b\u6578\u64da\u5206\u6790\u548c\u5efa\u8b70\u7684\u4e00\u4e9b\u914d\u7f6e\u53c3\u6578\uff0c\u53ef\u5be6\u73fe\u9019\u4e00\u9ede\u3002\n- \u6bcf\u500b Recommender \u914d\u7f6e\u5728\u958b\u59cb\u6642\u90fd\u7232\u6bcf\u500b\u53c3\u6578\u63d0\u4f9b\u4e86\u4e00\u4e9b\u9ed8\u8a8d\u503c\u3002\u6bcf\u500b\u53c3\u6578\u90fd\u6709\u4e00\u7cfb\u5217\u503c\uff0c\u53ef\u7528\u65bc\u81ea\u5b9a\u7fa9\u914d\u7f6e\u3002\n- \u6d3b\u8e8d\u914d\u7f6e\u662f\u60a8\u4e4b\u524d\u4fee\u6539\u7684\u914d\u7f6e\u3002\u6bcf\u6b21\u66f4\u6539\u914d\u7f6e\u6642\uff0c\u914d\u7f6e\u6700\u9577\u53ef\u80fd\u9700\u8981 48 \u5c0f\u6642\u624d\u80fd\u751f\u6548\u3002\n**\u6ce8\u610f** \uff1a\u50c5\u7576 Recommender \u6216\u6578\u64da\u5206\u6790\u985e\u578b\u652f\u6301\u6b64\u914d\u7f6e\u8a2d\u7f6e\u6642\uff0c\u60a8\u624d\u80fd\u6aa2\u7d22\u914d\u7f6e\u8a73\u60c5\u3002\nRecommender \u914d\u7f6e\u7684\u4e00\u500b\u793a\u4f8b\u662f\u8a2d\u7f6e\u9ed8\u8a8d CPU \u95be\u503c\u6216\u89c0\u5bdf\u671f\uff0c\u4ee5\u5275\u5efa\u66f4\u6eff\u8db3\u60a8\u7684\u5de5\u4f5c\u8ca0\u8f09\u3001\u61c9\u7528\u548c\u57fa\u790e\u67b6\u69cb\u9700\u6c42\u7684\u5efa\u8b70\u3002\n\u4f7f\u7528 Configuration API\uff0c\u60a8\u53ef\u4ee5\u6aa2\u7d22 Recommender \u6216\u6578\u64da\u5206\u6790\u985e\u578b\u7684\u914d\u7f6e\u3002\u60a8\u53ef\u4ee5\u9078\u64c7\u66f4\u65b0\u55ae\u500b\u9805\u76ee\u7684\u914d\u7f6e\u53c3\u6578\u3002\u6bcf\u7a2e Recommender \u914d\u7f6e\u6216\u6578\u64da\u5206\u6790\u985e\u578b\u90fd\u9700\u8981\u7279\u5b9a\u6b0a\u9650\u624d\u80fd\u67e5\u770b\u548c\u4fee\u6539\u914d\u7f6e\u53c3\u6578\u3002\n\u4ee5\u4e0b\u662f\u5305\u542b\u7a7a\u9592\u865b\u64ec\u6a5f Recommender \u7684\u914d\u7f6e\u53c3\u6578\u7684\u793a\u4f8b\u97ff\u61c9\uff1a\n```\n{\u00a0 \"name\": \"projects/project-number/locations/global/recommenders/google.iam.policy.Recommender/config\",\u00a0 \"recommenderGenerationConfig\": {\u00a0 \u00a0 \"params\": {\u00a0 \u00a0 \u00a0 \"minimum_observation_period\": \"P90D\",\u00a0 \u00a0 }\u00a0 },\u00a0 \"etag\": \"\\\"2f3c9b65cda6a4ba\\\"\",\u00a0 \"updateTime\": \"2020-11-03T04:41:15.330351Z\"}\n```", "guide": "Recommender"}