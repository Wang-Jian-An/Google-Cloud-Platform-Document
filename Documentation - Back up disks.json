{"title": "Documentation - Back up disks", "url": "https://cloud.google.com/distributed-cloud/hosted/docs/latest/gdch/overview", "abstract": "# Documentation - Back up disks\nBack up your disks regularly to ensure that your snapshot data is relatively current, and to reduce the risk of unexpected data loss when carrying out data backup and recovery operations.\n", "content": "## Create snapshots\nCreate snapshots to periodically back up data from your persistent disks.\n### Before you begin\nEnsure that a user with the Backup Repository Admin role created the following items:\n- A [single VM backup repository](/distributed-cloud/hosted/docs/latest/gdch/platform/pa-user/backup-plan-vm#repo) for disk snapshots.\n- A [VM backup plan](/distributed-cloud/hosted/docs/latest/gdch/platform/pa-user/backup-plan-vm#plan-vm-backup) with the`disk-snapshot-bpt`name.\nTo get the permissions that you need to create a snapshot, ask your Project IAM Admin to grant you the following roles:\n- Project VM Admin:`project-vm-admin`.\n- Backup Creator:`backup-creator`.\n- Project Viewer:`project-viewer`.\n### Create a snapshot\nCreate a snapshot using either the GDCH console or the API.\n- Sign in to the GDCH console.\n- In the navigation menu, click **Virtual Machines > Snapshots** .\n- Select a project.\n- Click **Create snapshot** .\n- In the **Source disk** field, select the disk that you want to create the snapshot from.\n- Enter the **Snapshot name** .\n- Click **Create** .\nIssue a `VirtualMachineBackupRequest` to initiate a snapshot:\n```\napiVersion: virtualmachine.gdc.goog/v1kind: VirtualMachineBackupRequestmetadata:\u00a0 name: BACKUP_REQUEST_NAME\u00a0 namespace: PROJECT_NAMEspec:\u00a0 virtualMachineBackupPlanTemplate: VM_BACKUP_PLAN\u00a0 virtualMachineDisk: VM_DISK\u00a0 virtualMachineBackupName: VM_BACKUP_NAME\n```\nReplace the following:- ``: the name to give the backup request that is being initiated.\n- ``: the name of the GDCH project.\n- ``: the name of the`VirtualMachineBackupPlanTemplate`to use for configuration of the snapshot. For snapshots, this value is`disk-snapshot-bpt`.\n- ``: the name of the disk to snapshot.\n- ``: the name of the snapshot to create.## View snapshots\nView snapshots and their details by using the Google Cloud console or `kubectl` .\n- Sign in to the GDCH console.\n- In the navigation menu, click **Virtual Machines > Snapshots** .\n- Select a project.\n- In the list of snapshots, click the snapshot name to view its details.\nView a snapshot by listing the snapshots and viewing their details.- List the existing snapshots:```\nkubectl get virtualmachinebackups.virtualmachine.gdc.goog -n PROJECT_NAME\n```Replace `` with the name of the project.\n- In the list, find the snapshot that you want to view.\n- View the snapshot details:```\nkubectl describe virtualmachinebackup.virtualmachine.gdc.goog VM_BACKUP_NAME -n PROJECT_NAME\n```Replace the following:- ``: the name of the snapshot.\n- ``: the name of the project.\n## Delete a snapshot\nDelete snapshots by using the Google Cloud console or `kubectl` . Disks created from snapshots are not affected when the underlying snapshot is deleted.\n- Sign in to the GDCH console.\n- In the navigation menu, click **Virtual Machines > Snapshots** .\n- Select a project.\n- In the list of snapshots, find the snapshot to delete and click **Delete** .\n- Click **Confirm** .\nDelete a snapshot using `kubectl` .- List the existing snapshots:```\nkubectl get virtualmachinebackups.virtualmachine.gdc.goog -n PROJECT_NAME\n```Replace `` with the name of the project.\n- In the list, find the snapshot that you want to delete.\n- Issue a `VirtualMachineDeleteBackupRequest` to delete the snapshot:```\napiVersion: virtualmachine.gdc.goog/v1kind: VirtualMachineDeleteBackupRequestmetadata:\u00a0 name: DELETE_BACKUP_REQUEST_NAME\u00a0 namespace: PROJECT_NAMEspec:\u00a0 virtualMachineBackupRef:\u00a0 \u00a0 name: VM_BACKUP_NAME\n```Replace the following:- ``: name to give the delete backup request that is being initiated.\n- ``: the name of the snapshot to delete.\n- ``: the name of the project.\n## What's next\nYou can restore a VM disk from an image disk snapshot. For more information, see [Restore a VM from a snapshot](/distributed-cloud/hosted/docs/latest/gdch/application/ao-user/vms/backup-and-restore/restore-from-backup/restore-from-a-snapshot) .", "guide": "Documentation"}